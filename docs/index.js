!function(){function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function n(t){Object.defineProperty(t,"__esModule",{value:!0,configurable:!0})}function r(t){return t&&t.__esModule?t.default:t}var i={},o={},a=e.parcelRequire5b50;null==a&&((a=function(t){if(t in i)return i[t].exports;if(t in o){var e=o[t];delete o[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},e.parcelRequire5b50=a),a.register("lGKbD",(function(e,n){var r,i;t(e.exports,"register",(function(){return r}),(function(t){return r=t})),t(e.exports,"resolve",(function(){return i}),(function(t){return i=t}));var o={};r=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)o[e[n]]=t[e[n]]},i=function(t){var e=o[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),a.register("a58XM",(function(e,n){var r,i,o;t(e.exports,"Fragment",(function(){return r}),(function(t){return r=t})),t(e.exports,"jsx",(function(){return i}),(function(t){return i=t})),t(e.exports,"jsxs",(function(){return o}),(function(t){return o=t})),a("7JwYr");var s=a("6cds3"),u=60103;if(r=60107,"function"==typeof Symbol&&Symbol.for){var l=Symbol.for;u=l("react.element"),r=l("react.fragment")}var c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function h(t,e,n){var r,i={},o=null,a=null;for(r in void 0!==n&&(o=""+n),void 0!==e.key&&(o=""+e.key),void 0!==e.ref&&(a=e.ref),e)f.call(e,r)&&!p.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:u,type:t,key:o,ref:a,props:i,_owner:c.current}}i=h,o=h})),a.register("7JwYr",(function(t,e){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var a,s,u=o(t),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))r.call(a,c)&&(u[c]=a[c]);if(n){s=n(a);for(var f=0;f<s.length;f++)i.call(a,s[f])&&(u[s[f]]=a[s[f]])}}return u}})),a.register("6cds3",(function(t,e){"use strict";t.exports=a("gx6CV")})),a.register("gx6CV",(function(e,n){t(e.exports,"Fragment",(function(){return r}),(function(t){return r=t})),t(e.exports,"StrictMode",(function(){return i}),(function(t){return i=t})),t(e.exports,"Profiler",(function(){return o}),(function(t){return o=t})),t(e.exports,"Suspense",(function(){return s}),(function(t){return s=t})),t(e.exports,"Children",(function(){return u}),(function(t){return u=t})),t(e.exports,"Component",(function(){return l}),(function(t){return l=t})),t(e.exports,"PureComponent",(function(){return c}),(function(t){return c=t})),t(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(function(){return f}),(function(t){return f=t})),t(e.exports,"cloneElement",(function(){return p}),(function(t){return p=t})),t(e.exports,"createContext",(function(){return h}),(function(t){return h=t})),t(e.exports,"createElement",(function(){return d}),(function(t){return d=t})),t(e.exports,"createFactory",(function(){return g}),(function(t){return g=t})),t(e.exports,"createRef",(function(){return y}),(function(t){return y=t})),t(e.exports,"forwardRef",(function(){return A}),(function(t){return A=t})),t(e.exports,"isValidElement",(function(){return v}),(function(t){return v=t})),t(e.exports,"lazy",(function(){return m}),(function(t){return m=t})),t(e.exports,"memo",(function(){return _}),(function(t){return _=t})),t(e.exports,"useCallback",(function(){return b}),(function(t){return b=t})),t(e.exports,"useContext",(function(){return x}),(function(t){return x=t})),t(e.exports,"useDebugValue",(function(){return w}),(function(t){return w=t})),t(e.exports,"useEffect",(function(){return E}),(function(t){return E=t})),t(e.exports,"useImperativeHandle",(function(){return S}),(function(t){return S=t})),t(e.exports,"useLayoutEffect",(function(){return P}),(function(t){return P=t})),t(e.exports,"useMemo",(function(){return k}),(function(t){return k=t})),t(e.exports,"useReducer",(function(){return C}),(function(t){return C=t})),t(e.exports,"useRef",(function(){return T}),(function(t){return T=t})),t(e.exports,"useState",(function(){return I}),(function(t){return I=t})),t(e.exports,"version",(function(){return M}),(function(t){return M=t}));var r,i,o,s,u,l,c,f,p,h,d,g,y,A,v,m,_,b,x,w,E,S,P,k,C,T,I,M,O=a("5qgrd"),L=a("7JwYr"),R=60103,D=60106;r=60107,i=60108,o=60114;var N=60109,F=60110,j=60112;s=60113;var z=60115,B=60116;if("function"==typeof Symbol&&Symbol.for){var U=Symbol.for;R=U("react.element"),D=U("react.portal"),r=U("react.fragment"),i=U("react.strict_mode"),o=U("react.profiler"),N=U("react.provider"),F=U("react.context"),j=U("react.forward_ref"),s=U("react.suspense"),z=U("react.memo"),B=U("react.lazy")}var V="function"==typeof Symbol&&Symbol.iterator;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W={};function H(t,e,n){this.props=t,this.context=e,this.refs=W,this.updater=n||q}function X(){}function Z(t,e,n){this.props=t,this.context=e,this.refs=W,this.updater=n||q}H.prototype.isReactComponent={},H.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(G(85));this.updater.enqueueSetState(this,t,e,"setState")},H.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},X.prototype=H.prototype;var Y=Z.prototype=new X;Y.constructor=Z,L(Y,H.prototype),Y.isPureReactComponent=!0;var Q={current:null},K=Object.prototype.hasOwnProperty,J={key:!0,ref:!0,__self:!0,__source:!0};function $(t,e,n){var r,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)K.call(e,r)&&!J.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:R,type:t,key:o,ref:a,props:i,_owner:Q.current}}function tt(t){return"object"==typeof t&&null!==t&&t.$$typeof===R}var et=/\/+/g;function nt(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function rt(t,e,n,r,i){var o=void 0===t?"undefined":O.default(t);"undefined"!==o&&"boolean"!==o||(t=null);var a,s=!1;if(null===t)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case R:case D:s=!0}}if(s)return i=i(s=t),t=""===r?"."+nt(s,0):r,Array.isArray(i)?(n="",null!=t&&(n=t.replace(et,"$&/")+"/"),rt(i,e,n,"",(function(t){return t}))):null!=i&&(tt(i)&&(i=function(t,e){return{$$typeof:R,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(et,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=""===r?".":r+":",Array.isArray(t))for(var u=0;u<t.length;u++){var l=r+nt(o=t[u],u);s+=rt(o,e,n,l,i)}else if("function"==typeof(l=null===(a=t)||"object"!=typeof a?null:"function"==typeof(a=V&&a[V]||a["@@iterator"])?a:null))for(t=l.call(t),u=0;!(o=t.next()).done;)s+=rt(o=o.value,e,n,l=r+nt(o,u++),i);else if("object"===o)throw e=""+t,Error(G(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return s}function it(t,e,n){if(null==t)return t;var r=[],i=0;return rt(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function ot(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var at={current:null};function st(){var t=at.current;if(null===t)throw Error(G(321));return t}u={map:it,forEach:function(t,e,n){it(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return it(t,(function(){e++})),e},toArray:function(t){return it(t,(function(t){return t}))||[]},only:function(t){if(!tt(t))throw Error(G(143));return t}},l=H,c=Z,f={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Q,IsSomeRendererActing:{current:!1},assign:L},p=function(t,e,n){if(null==t)throw Error(G(267,t));var r=L({},t.props),i=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=Q.current),void 0!==e.key&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)K.call(e,u)&&!J.hasOwnProperty(u)&&(r[u]=void 0===e[u]&&void 0!==s?s[u]:e[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:R,type:t.type,key:i,ref:o,props:r,_owner:a}},h=function(t,e){return void 0===e&&(e=null),(t={$$typeof:F,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:N,_context:t},t.Consumer=t},d=$,g=function(t){var e=$.bind(null,t);return e.type=t,e},y=function(){return{current:null}},A=function(t){return{$$typeof:j,render:t}},v=tt,m=function(t){return{$$typeof:B,_payload:{_status:-1,_result:t},_init:ot}},_=function(t,e){return{$$typeof:z,type:t,compare:void 0===e?null:e}},b=function(t,e){return st().useCallback(t,e)},x=function(t,e){return st().useContext(t,e)},w=function(){},E=function(t,e){return st().useEffect(t,e)},S=function(t,e,n){return st().useImperativeHandle(t,e,n)},P=function(t,e){return st().useLayoutEffect(t,e)},k=function(t,e){return st().useMemo(t,e)},C=function(t,e,n){return st().useReducer(t,e,n)},T=function(t){return st().useRef(t)},I=function(t){return st().useState(t)},M="17.0.2"})),a.register("9PFJu",(function(e,n){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t(e.exports,"default",(function(){return r}))})),a.register("3Ka4w",(function(e,n){function r(t){var e;if("function"==typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}t(e.exports,"default",(function(){return r}))})),a.register("cqwPg",(function(e,n){function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}t(e.exports,"default",(function(){return i}))})),a.register("kYXZb",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("6A8mF");function i(t){return new r.default(t)}})),a.register("6A8mF",(function(e,n){function r(t){this.wrapped=t}t(e.exports,"default",(function(){return r}))})),a.register("ijozg",(function(e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t(e.exports,"default",(function(){return r}))})),a.register("4EaGG",(function(e,n){t(e.exports,"default",(function(){return s}));var r=a("4SAPP");function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function o(t,e,n){return(o=i()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r.default(o,n.prototype),o}).apply(null,arguments)}function s(t,e,n){return o.apply(null,arguments)}})),a.register("4SAPP",(function(e,n){function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){return r(t,e)}t(e.exports,"default",(function(){return i}))})),a.register("pGAoq",(function(e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}t(e.exports,"default",(function(){return i}))})),a.register("1joaW",(function(e,n){t(e.exports,"default",(function(){return s}));var r=a("1POWW"),i=a("8YVeo"),o=a("enNAH");function s(t){var e=r.default();return function(){var n,r=i.default(t);if(e){var a=i.default(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o.default(this,n)}}})),a.register("1POWW",(function(e,n){function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}t(e.exports,"default",(function(){return r}))})),a.register("8YVeo",(function(e,n){function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){return r(t)}t(e.exports,"default",(function(){return i}))})),a.register("enNAH",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("9PFJu"),i=a("5qgrd");function o(t,e){return!e||"object"!==i.default(e)&&"function"!=typeof e?r.default(t):e}})),a.register("5qgrd",(function(e,n){function r(t){return t&&t.constructor===Symbol?"symbol":typeof t}t(e.exports,"default",(function(){return r}))})),a.register("e2Lau",(function(e,n){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t(e.exports,"default",(function(){return r}))})),a.register("fj4bz",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("5tPj1");function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=r.default(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n||t):o.value}})(t,e,n)}function o(t,e,n){return i(t,e,n)}})),a.register("5tPj1",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("8YVeo");function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r.default(t)););return t}})),a.register("hE9gS",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("4SAPP");function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r.default(t,e)}})),a.register("11zLF",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("e2Lau");function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r.default(t,e,n[e])}))}return t}})),a.register("en48w",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("5nHAE");function i(t,e){if(null==t)return{};var n,i,o=r.default(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}})),a.register("5nHAE",(function(e,n){function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}t(e.exports,"default",(function(){return r}))})),a.register("1zCSZ",(function(e,n){t(e.exports,"default",(function(){return u}));var r=a("f6fRF"),i=a("2zPRw"),o=a("kNWu8"),s=a("ddsjt");function u(t,e){return r.default(t)||i.default(t,e)||s.default(t,e)||o.default()}})),a.register("f6fRF",(function(e,n){function r(t){if(Array.isArray(t))return t}t(e.exports,"default",(function(){return r}))})),a.register("2zPRw",(function(e,n){function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}t(e.exports,"default",(function(){return r}))})),a.register("kNWu8",(function(e,n){function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t(e.exports,"default",(function(){return r}))})),a.register("ddsjt",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("aHlwT");function i(t,e){if(t){if("string"==typeof t)return r.default(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r.default(t,e):void 0}}})),a.register("aHlwT",(function(e,n){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t(e.exports,"default",(function(){return r}))})),a.register("gj7DP",(function(e,n){t(e.exports,"default",(function(){return u}));var r=a("dl9Lr"),i=a("2zPRw"),o=a("73xCX"),s=a("ddsjt");function u(t){return r.default(t)||i.default(t)||s.default(t)||o.default()}})),a.register("dl9Lr",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("aHlwT");function i(t){if(Array.isArray(t))return r.default(t)}})),a.register("73xCX",(function(e,n){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t(e.exports,"default",(function(){return r}))})),a.register("ixbLR",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("4KD1E");function i(t){return function(){return new r.default(t.apply(this,arguments))}}})),a.register("4KD1E",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("6A8mF");function i(t){var e,n;function i(e,n){try{var a=t[e](n),s=a.value,u=s instanceof r.default;Promise.resolve(u?s.wrapped:s).then((function(t){u?i("next",t):o(a.done?"return":"normal",t)}),(function(t){i("throw",t)}))}catch(t){o("throw",t)}}function o(t,r){switch(t){case"return":e.resolve({value:r,done:!0});break;case"throw":e.reject(r);break;default:e.resolve({value:r,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(t,r){return new Promise((function(o,a){var s={key:t,arg:r,resolve:o,reject:a,next:null};n?n=n.next=s:(e=n=s,i(t,r))}))},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(t){return this._invoke("next",t)},i.prototype.throw=function(t){return this._invoke("throw",t)},i.prototype.return=function(t){return this._invoke("return",t)}})),a.register("9nHRL",(function(t,e){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=a("jZA9I")})),a.register("jZA9I",(function(e,n){t(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(function(){return r}),(function(t){return r=t})),t(e.exports,"createPortal",(function(){return i}),(function(t){return i=t})),t(e.exports,"findDOMNode",(function(){return o}),(function(t){return o=t})),t(e.exports,"flushSync",(function(){return s}),(function(t){return s=t})),t(e.exports,"hydrate",(function(){return u}),(function(t){return u=t})),t(e.exports,"render",(function(){return l}),(function(t){return l=t})),t(e.exports,"unmountComponentAtNode",(function(){return c}),(function(t){return c=t})),t(e.exports,"unstable_batchedUpdates",(function(){return f}),(function(t){return f=t})),t(e.exports,"unstable_createPortal",(function(){return p}),(function(t){return p=t})),t(e.exports,"unstable_renderSubtreeIntoContainer",(function(){return h}),(function(t){return h=t})),t(e.exports,"version",(function(){return d}),(function(t){return d=t}));var r,i,o,s,u,l,c,f,p,h,d,g=a("5qgrd"),y=a("6cds3"),A=a("7JwYr"),v=a("1c9zD");function m(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!y)throw Error(m(227));var _=new Set,b={};function x(t,e){w(t,e),w(t+"Capture",e)}function w(t,e){for(b[t]=e,t=0;t<e.length;t++)_.add(e[t])}var E=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P=Object.prototype.hasOwnProperty,k={},C={};function T(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(void 0===e?"undefined":g.default(e)){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function I(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){M[t]=new I(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];M[e]=new I(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){M[t]=new I(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){M[t]=new I(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){M[t]=new I(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){M[t]=new I(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){M[t]=new I(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){M[t]=new I(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){M[t]=new I(t,5,!1,t.toLowerCase(),null,!1,!1)}));var O=/[\-:]([a-z])/g;function L(t){return t[1].toUpperCase()}function R(t,e,n,r){var i=M.hasOwnProperty(e)?M[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(T(e,n,i,r)&&(n=null),r||null===i?function(t){return!!P.call(C,t)||!P.call(k,t)&&(S.test(t)?C[t]=!0:(k[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(O,L);M[e]=new I(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(O,L);M[e]=new I(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(O,L);M[e]=new I(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){M[t]=new I(t,1,!1,t.toLowerCase(),null,!1,!1)})),M.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){M[t]=new I(t,1,!1,t.toLowerCase(),null,!0,!0)}));var D=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=60103,F=60106,j=60107,z=60108,B=60114,U=60109,V=60110,G=60112,q=60113,W=60120,H=60115,X=60116,Z=60121,Y=60128,Q=60129,K=60130,J=60131;if("function"==typeof Symbol&&Symbol.for){var $=Symbol.for;N=$("react.element"),F=$("react.portal"),j=$("react.fragment"),z=$("react.strict_mode"),B=$("react.profiler"),U=$("react.provider"),V=$("react.context"),G=$("react.forward_ref"),q=$("react.suspense"),W=$("react.suspense_list"),H=$("react.memo"),X=$("react.lazy"),Z=$("react.block"),$("react.scope"),Y=$("react.opaque.id"),Q=$("react.debug_trace_mode"),K=$("react.offscreen"),J=$("react.legacy_hidden")}var tt,et="function"==typeof Symbol&&Symbol.iterator;function nt(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=et&&t[et]||t["@@iterator"])?t:null}function rt(t){if(void 0===tt)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);tt=e&&e[1]||""}return"\n"+tt+t}var it=!1;function ot(t,e){if(!t||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var r=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){r=t}t.call(e.prototype)}else{try{throw Error()}catch(t){r=t}t()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rt(t):""}function at(t){switch(t.tag){case 5:return rt(t.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 2:case 15:return t=ot(t.type,!1);case 11:return t=ot(t.type.render,!1);case 22:return t=ot(t.type._render,!1);case 1:return t=ot(t.type,!0);default:return""}}function st(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case j:return"Fragment";case F:return"Portal";case B:return"Profiler";case z:return"StrictMode";case q:return"Suspense";case W:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case V:return(t.displayName||"Context")+".Consumer";case U:return(t._context.displayName||"Context")+".Provider";case G:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case H:return st(t.type);case Z:return st(t._render);case X:e=t._payload,t=t._init;try{return st(t(e))}catch(t){}}return null}function ut(t){switch(void 0===t?"undefined":g.default(t)){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function lt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function ct(t){t._valueTracker||(t._valueTracker=function(t){var e=lt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function ft(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=lt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function pt(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function ht(t,e){var n=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function dt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=ut(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function gt(t,e){null!=(e=e.checked)&&R(t,"checked",e,!1)}function yt(t,e){gt(t,e);var n=ut(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?vt(t,e.type,n):e.hasOwnProperty("defaultValue")&&vt(t,e.type,ut(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function At(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function vt(t,e,n){"number"===e&&pt(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function mt(t,e){return t=A({children:void 0},e),(e=function(t){var e="";return y.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function _t(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ut(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function bt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(m(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(m(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(m(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:ut(n)}}function wt(t,e){var n=ut(e.value),r=ut(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Et(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var St="http://www.w3.org/1999/xhtml",Pt="http://www.w3.org/2000/svg";function kt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ct(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?kt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Tt,It,Mt=(It=function(t,e){if(t.namespaceURI!==Pt||"innerHTML"in t)t.innerHTML=e;else{for((Tt=Tt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return It(t,e)}))}:It);function Ot(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var Lt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rt=["Webkit","ms","Moz","O"];function Dt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Lt.hasOwnProperty(t)&&Lt[t]?(""+e).trim():e+"px"}function Nt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Dt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Lt).forEach((function(t){Rt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lt[e]=Lt[t]}))}));var Ft=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jt(t,e){if(e){if(Ft[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(m(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(m(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(m(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(m(62))}}function zt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ut=null,Vt=null,Gt=null;function qt(t){if(t=di(t)){if("function"!=typeof Ut)throw Error(m(280));var e=t.stateNode;e&&(e=yi(e),Ut(t.stateNode,t.type,e))}}function Wt(t){Vt?Gt?Gt.push(t):Gt=[t]:Vt=t}function Ht(){if(Vt){var t=Vt,e=Gt;if(Gt=Vt=null,qt(t),e)for(t=0;t<e.length;t++)qt(e[t])}}function Xt(t,e){return t(e)}function Zt(t,e,n,r,i){return t(e,n,r,i)}function Yt(){}var Qt=Xt,Kt=!1,Jt=!1;function $t(){null===Vt&&null===Gt||(Yt(),Ht())}function te(t,e){var n=t.stateNode;if(null===n)return null;var r=yi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(m(231,e,void 0===n?"undefined":g.default(n)));return n}var ee=!1;if(E)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){ee=!0}}),window.addEventListener("test",ne,ne),window.removeEventListener("test",ne,ne)}catch(It){ee=!1}function re(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}var ie=!1,oe=null,ae=!1,se=null,ue={onError:function(t){ie=!0,oe=t}};function le(t,e,n,r,i,o,a,s,u){ie=!1,oe=null,re.apply(ue,arguments)}function ce(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function fe(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function pe(t){if(ce(t)!==t)throw Error(m(188))}function he(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=ce(t)))throw Error(m(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return pe(i),t;if(o===r)return pe(i),e;o=o.sibling}throw Error(m(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(m(189))}}if(n.alternate!==r)throw Error(m(190))}if(3!==n.tag)throw Error(m(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function de(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ge,ye,Ae,ve,me=!1,_e=[],be=null,xe=null,we=null,Ee=new Map,Se=new Map,Pe=[],ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ce(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function Te(t,e){switch(t){case"focusin":case"focusout":be=null;break;case"dragenter":case"dragleave":xe=null;break;case"mouseover":case"mouseout":we=null;break;case"pointerover":case"pointerout":Ee.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Se.delete(e.pointerId)}}function Ie(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ce(e,n,r,i,o),null!==e&&(null!==(e=di(e))&&ye(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Me(t){var e=hi(t.target);if(null!==e){var n=ce(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=fe(n)))return t.blockedOn=e,void ve(t.lanePriority,(function(){v.unstable_runWithPriority(t.priority,(function(){Ae(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Oe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=dn(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=di(n))&&ye(e),t.blockedOn=n,!1;e.shift()}return!0}function Le(t,e,n){Oe(t)&&n.delete(e)}function Re(){for(me=!1;0<_e.length;){var t=_e[0];if(null!==t.blockedOn){null!==(t=di(t.blockedOn))&&ge(t);break}for(var e=t.targetContainers;0<e.length;){var n=dn(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&_e.shift()}null!==be&&Oe(be)&&(be=null),null!==xe&&Oe(xe)&&(xe=null),null!==we&&Oe(we)&&(we=null),Ee.forEach(Le),Se.forEach(Le)}function De(t,e){t.blockedOn===e&&(t.blockedOn=null,me||(me=!0,v.unstable_scheduleCallback(v.unstable_NormalPriority,Re)))}function Ne(t){var e=function(e){return De(e,t)};if(0<_e.length){De(_e[0],t);for(var n=1;n<_e.length;n++){var r=_e[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==be&&De(be,t),null!==xe&&De(xe,t),null!==we&&De(we,t),Ee.forEach(e),Se.forEach(e),n=0;n<Pe.length;n++)(r=Pe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Pe.length&&null===(n=Pe[0]).blockedOn;)Me(n),null===n.blockedOn&&Pe.shift()}function Fe(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var je={animationend:Fe("Animation","AnimationEnd"),animationiteration:Fe("Animation","AnimationIteration"),animationstart:Fe("Animation","AnimationStart"),transitionend:Fe("Transition","TransitionEnd")},ze={},Be={};function Ue(t){if(ze[t])return ze[t];if(!je[t])return t;var e,n=je[t];for(e in n)if(n.hasOwnProperty(e)&&e in Be)return ze[t]=n[e];return t}E&&(Be=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);var Ve=Ue("animationend"),Ge=Ue("animationiteration"),qe=Ue("animationstart"),We=Ue("transitionend"),He=new Map,Xe=new Map,Ze=["abort","abort",Ve,"animationEnd",Ge,"animationIteration",qe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",We,"transitionEnd","waiting","waiting"];function Ye(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Xe.set(r,e),He.set(r,i),x(i,[r])}}(0,v.unstable_now)();var Qe=8;function Ke(t){if(0!=(1&t))return Qe=15,1;if(0!=(2&t))return Qe=14,2;if(0!=(4&t))return Qe=13,4;var e=24&t;return 0!==e?(Qe=12,e):0!=(32&t)?(Qe=11,32):0!==(e=192&t)?(Qe=10,e):0!=(256&t)?(Qe=9,256):0!==(e=3584&t)?(Qe=8,e):0!=(4096&t)?(Qe=7,4096):0!==(e=4186112&t)?(Qe=6,e):0!==(e=62914560&t)?(Qe=5,e):67108864&t?(Qe=4,67108864):0!=(134217728&t)?(Qe=3,134217728):0!==(e=805306368&t)?(Qe=2,e):0!=(1073741824&t)?(Qe=1,1073741824):(Qe=8,t)}function Je(t,e){var n=t.pendingLanes;if(0===n)return Qe=0;var r=0,i=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)r=o,i=Qe=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ke(u),i=Qe):0!==(s&=o)&&(r=Ke(s),i=Qe)}else 0!==(o=n&~a)?(r=Ke(o),i=Qe):0!==s&&(r=Ke(s),i=Qe);if(0===r)return 0;if(r=n&((0>(r=31-on(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0==(e&a)){if(Ke(e),i<=Qe)return e;Qe=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-on(e)),r|=t[n],e&=~i;return r}function $e(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function tn(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=en(24&~e))?tn(10,e):t;case 10:return 0===(t=en(192&~e))?tn(8,e):t;case 8:return 0===(t=en(3584&~e))&&(0===(t=en(4186112&~e))&&(t=512)),t;case 2:return 0===(e=en(805306368&~e))&&(e=268435456),e}throw Error(m(358,t))}function en(t){return t&-t}function nn(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rn(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-on(e)]=n}var on=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(an(t)/sn|0)|0},an=Math.log,sn=Math.LN2;var un=v.unstable_UserBlockingPriority,ln=v.unstable_runWithPriority,cn=!0;function fn(t,e,n,r){Kt||Yt();var i=hn,o=Kt;Kt=!0;try{Zt(i,t,e,n,r)}finally{(Kt=o)||$t()}}function pn(t,e,n,r){ln(un,hn.bind(null,t,e,n,r))}function hn(t,e,n,r){var i;if(cn)if((i=0==(4&e))&&0<_e.length&&-1<ke.indexOf(t))t=Ce(null,t,e,n,r),_e.push(t);else{var o=dn(t,e,n,r);if(null===o)i&&Te(t,r);else{if(i){if(-1<ke.indexOf(t))return t=Ce(o,t,e,n,r),void _e.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return be=Ie(be,t,e,n,r,i),!0;case"dragenter":return xe=Ie(xe,t,e,n,r,i),!0;case"mouseover":return we=Ie(we,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ee.set(o,Ie(Ee.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Se.set(o,Ie(Se.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;Te(t,r)}Hr(t,e,r,null,n)}}}function dn(t,e,n,r){var i=Bt(r);if(null!==(i=hi(i))){var o=ce(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=fe(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Hr(t,e,r,i,n),null}var gn=null,yn=null,An=null;function vn(){if(An)return An;var t,e,n=yn,r=n.length,i="value"in gn?gn.value:gn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return An=i.slice(t,1<e?1-e:void 0)}function mn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function _n(){return!0}function bn(){return!1}function xn(t){var e=function(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?_n:bn,this.isPropagationStopped=bn,this};return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==g.default(t.returnValue)&&(t.returnValue=!1),this.isDefaultPrevented=_n)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==g.default(t.cancelBubble)&&(t.cancelBubble=!0),this.isPropagationStopped=_n)},persist:function(){},isPersistent:_n}),e}var wn,En,Sn,Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kn=xn(Pn),Cn=A({},Pn,{view:0,detail:0}),Tn=xn(Cn),In=A({},Cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Un,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sn&&(Sn&&"mousemove"===t.type?(wn=t.screenX-Sn.screenX,En=t.screenY-Sn.screenY):En=wn=0,Sn=t),wn)},movementY:function(t){return"movementY"in t?t.movementY:En}}),Mn=xn(In),On=xn(A({},In,{dataTransfer:0})),Ln=xn(A({},Cn,{relatedTarget:0})),Rn=xn(A({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0})),Dn=xn(A({},Pn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),Nn=xn(A({},Pn,{data:0})),Fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=zn[t])&&!!e[t]}function Un(){return Bn}var Vn=xn(A({},Cn,{key:function(t){if(t.key){var e=Fn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=mn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?jn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Un,charCode:function(t){return"keypress"===t.type?mn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?mn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Gn=xn(A({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),qn=xn(A({},Cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Un})),Wn=xn(A({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Hn=xn(A({},In,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Xn=[9,13,27,32],Zn=E&&"CompositionEvent"in window,Yn=null;E&&"documentMode"in document&&(Yn=document.documentMode);var Qn=E&&"TextEvent"in window&&!Yn,Kn=E&&(!Zn||Yn&&8<Yn&&11>=Yn),Jn=String.fromCharCode(32),$n=!1;function tr(t,e){switch(t){case"keyup":return-1!==Xn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function er(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var nr=!1;var rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ir(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!rr[t.type]:"textarea"===e}function or(t,e,n,r){Wt(r),0<(e=Zr(e,"onChange")).length&&(n=new kn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ar=null,sr=null;function ur(t){Br(t,0)}function lr(t){if(ft(gi(t)))return t}function cr(t,e){if("change"===t)return e}var fr=!1;if(E){var pr;if(E){var hr="oninput"in document;if(!hr){var dr=document.createElement("div");dr.setAttribute("oninput","return;"),hr="function"==typeof dr.oninput}pr=hr}else pr=!1;fr=pr&&(!document.documentMode||9<document.documentMode)}function gr(){ar&&(ar.detachEvent("onpropertychange",yr),sr=ar=null)}function yr(t){if("value"===t.propertyName&&lr(sr)){var e=[];if(or(e,sr,t,Bt(t)),t=ur,Kt)t(e);else{Kt=!0;try{Xt(t,e)}finally{Kt=!1,$t()}}}}function Ar(t,e,n){"focusin"===t?(gr(),sr=n,(ar=e).attachEvent("onpropertychange",yr)):"focusout"===t&&gr()}function vr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return lr(sr)}function mr(t,e){if("click"===t)return lr(e)}function _r(t,e){if("input"===t||"change"===t)return lr(e)}var br="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},xr=Object.prototype.hasOwnProperty;function wr(t,e){if(br(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!xr.call(e,n[r])||!br(t[n[r]],e[n[r]]))return!1;return!0}function Er(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sr(t,e){var n,r=Er(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Er(r)}}function Pr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?Pr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function kr(){for(var t=window,e=pt();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=pt((t=e.contentWindow).document)}return e}function Cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Tr=E&&"documentMode"in document&&11>=document.documentMode,Ir=null,Mr=null,Or=null,Lr=!1;function Rr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Lr||null==Ir||Ir!==pt(r)||("selectionStart"in(r=Ir)&&Cr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Or&&wr(Or,r)||(Or=r,0<(r=Zr(Mr,"onSelect")).length&&(e=new kn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ir)))}Ye("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ye("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ye(Ze,2);for(var Dr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Nr=0;Nr<Dr.length;Nr++)Xe.set(Dr[Nr],0);w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function zr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,a,s,u){if(le.apply(this,arguments),ie){if(!ie)throw Error(m(198));var l=oe;ie=!1,oe=null,ae||(ae=!0,se=l)}}(r,e,void 0,t),t.currentTarget=null}function Br(t,e){e=0!=(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break t;zr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break t;zr(i,s,l),o=u}}}if(ae)throw t=se,ae=!1,se=null,t}function Ur(t,e){var n=Ai(e),r=t+"__bubble";n.has(r)||(Wr(e,t,2,!1),n.add(r))}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Gr(t){t[Vr]||(t[Vr]=!0,_.forEach((function(e){jr.has(e)||qr(e,!1,t,null),qr(e,!0,t,null)})))}function qr(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&jr.has(t)){if("scroll"!==t)return;i|=2,o=r}var a=Ai(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(i|=4),Wr(o,t,i,e),a.add(s))}function Wr(t,e,n,r){var i=Xe.get(e);switch(void 0===i?2:i){case 0:i=fn;break;case 1:i=pn;break;default:i=hn}n=i.bind(null,e,n,t),i=void 0,!ee||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hr(t,e,n,r,i){var o=r;if(0==(1&e)&&0==(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=hi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(Jt)return t(e,n);Jt=!0;try{Qt(t,e,n)}finally{Jt=!1,$t()}}((function(){var r=o,i=Bt(n),a=[];t:{var s=He.get(t);if(void 0!==s){var u=kn,l=t;switch(t){case"keypress":if(0===mn(n))break t;case"keydown":case"keyup":u=Vn;break;case"focusin":l="focus",u=Ln;break;case"focusout":l="blur",u=Ln;break;case"beforeblur":case"afterblur":u=Ln;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=Mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=On;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=qn;break;case Ve:case Ge:case qe:u=Rn;break;case We:u=Wn;break;case"scroll":u=Tn;break;case"wheel":u=Hn;break;case"copy":case"cut":case"paste":u=Dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Gn}var c=0!=(4&e),f=!c&&"scroll"===t,p=c?null!==s?s+"Capture":null:s;c=[];for(var h,d=r;null!==d;){var g=(h=d).stateNode;if(5===h.tag&&null!==g&&(h=g,null!==p&&(null!=(g=te(d,p))&&c.push(Xr(d,g,h)))),f)break;d=d.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!=(16&e)||!(l=n.relatedTarget||n.fromElement)||!hi(l)&&!l[fi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?hi(l):null)&&(l!==(f=ce(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=Mn,g="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=Gn,g="onPointerLeave",p="onPointerEnter",d="pointer"),f=null==u?s:gi(u),h=null==l?s:gi(l),(s=new c(g,d+"leave",u,n,i)).target=f,s.relatedTarget=h,g=null,hi(i)===r&&((c=new c(p,d+"enter",l,n,i)).target=h,c.relatedTarget=f,g=c),f=g,u&&l)t:{for(p=l,d=0,h=c=u;h;h=Yr(h))d++;for(h=0,g=p;g;g=Yr(g))h++;for(;0<d-h;)c=Yr(c),d--;for(;0<h-d;)p=Yr(p),h--;for(;d--;){if(c===p||null!==p&&c===p.alternate)break t;c=Yr(c),p=Yr(p)}c=null}else c=null;null!==u&&Qr(a,s,u,c,!1),null!==l&&null!==f&&Qr(a,f,l,c,!0)}if("select"===(u=(s=r?gi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=cr;else if(ir(s))if(fr)y=_r;else{y=vr;var A=Ar}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=mr);switch(y&&(y=y(t,r))?or(a,y,n,i):(A&&A(t,s,r),"focusout"===t&&(A=s._wrapperState)&&A.controlled&&"number"===s.type&&vt(s,"number",s.value)),A=r?gi(r):window,t){case"focusin":(ir(A)||"true"===A.contentEditable)&&(Ir=A,Mr=r,Or=null);break;case"focusout":Or=Mr=Ir=null;break;case"mousedown":Lr=!0;break;case"contextmenu":case"mouseup":case"dragend":Lr=!1,Rr(a,n,i);break;case"selectionchange":if(Tr)break;case"keydown":case"keyup":Rr(a,n,i)}var v;if(Zn)t:{switch(t){case"compositionstart":var m="onCompositionStart";break t;case"compositionend":m="onCompositionEnd";break t;case"compositionupdate":m="onCompositionUpdate";break t}m=void 0}else nr?tr(t,n)&&(m="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(m="onCompositionStart");m&&(Kn&&"ko"!==n.locale&&(nr||"onCompositionStart"!==m?"onCompositionEnd"===m&&nr&&(v=vn()):(yn="value"in(gn=i)?gn.value:gn.textContent,nr=!0)),0<(A=Zr(r,m)).length&&(m=new Nn(m,t,null,n,i),a.push({event:m,listeners:A}),v?m.data=v:null!==(v=er(n))&&(m.data=v))),(v=Qn?function(t,e){switch(t){case"compositionend":return er(e);case"keypress":return 32!==e.which?null:($n=!0,Jn);case"textInput":return(t=e.data)===Jn&&$n?null:t;default:return null}}(t,n):function(t,e){if(nr)return"compositionend"===t||!Zn&&tr(t,e)?(t=vn(),An=yn=gn=null,nr=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Zr(r,"onBeforeInput")).length&&(i=new Nn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Br(a,e)}))}function Xr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=te(t,n))&&r.unshift(Xr(t,o,i)),null!=(o=te(t,e))&&r.push(Xr(t,o,i))),t=t.return}return r}function Yr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Qr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=te(n,o))&&a.unshift(Xr(n,u,s)):i||null!=(u=te(n,o))&&a.push(Xr(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function Kr(){}var Jr=null,$r=null;function ti(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function ei(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ni="function"==typeof setTimeout?setTimeout:void 0,ri="function"==typeof clearTimeout?clearTimeout:void 0;function ii(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function oi(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function ai(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var si=0;var ui=Math.random().toString(36).slice(2),li="__reactFiber$"+ui,ci="__reactProps$"+ui,fi="__reactContainer$"+ui,pi="__reactEvents$"+ui;function hi(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[li]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ai(t);null!==t;){if(n=t[li])return n;t=ai(t)}return e}n=(t=n).parentNode}return null}function di(t){return!(t=t[li]||t[fi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function gi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(m(33))}function yi(t){return t[ci]||null}function Ai(t){var e=t[pi];return void 0===e&&(e=t[pi]=new Set),e}var vi=[],mi=-1;function _i(t){return{current:t}}function bi(t){0>mi||(t.current=vi[mi],vi[mi]=null,mi--)}function xi(t,e){mi++,vi[mi]=t.current,t.current=e}var wi={},Ei=_i(wi),Si=_i(!1),Pi=wi;function ki(t,e){var n=t.type.contextTypes;if(!n)return wi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ci(t){return null!=(t=t.childContextTypes)}function Ti(){bi(Si),bi(Ei)}function Ii(t,e,n){if(Ei.current!==wi)throw Error(m(168));xi(Ei,e),xi(Si,n)}function Mi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(m(108,st(e)||"Unknown",i));return A({},n,r)}function Oi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,Pi=Ei.current,xi(Ei,t),xi(Si,Si.current),!0}function Li(t,e,n){var r=t.stateNode;if(!r)throw Error(m(169));n?(t=Mi(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,bi(Si),bi(Ei),xi(Ei,t)):bi(Si),xi(Si,n)}var Ri=null,Di=null,Ni=v.unstable_runWithPriority,Fi=v.unstable_scheduleCallback,ji=v.unstable_cancelCallback,zi=v.unstable_shouldYield,Bi=v.unstable_requestPaint,Ui=v.unstable_now,Vi=v.unstable_getCurrentPriorityLevel,Gi=v.unstable_ImmediatePriority,qi=v.unstable_UserBlockingPriority,Wi=v.unstable_NormalPriority,Hi=v.unstable_LowPriority,Xi=v.unstable_IdlePriority,Zi={},Yi=void 0!==Bi?Bi:function(){},Qi=null,Ki=null,Ji=!1,$i=Ui(),to=1e4>$i?Ui:function(){return Ui()-$i};function eo(){switch(Vi()){case Gi:return 99;case qi:return 98;case Wi:return 97;case Hi:return 96;case Xi:return 95;default:throw Error(m(332))}}function no(t){switch(t){case 99:return Gi;case 98:return qi;case 97:return Wi;case 96:return Hi;case 95:return Xi;default:throw Error(m(332))}}function ro(t,e){return t=no(t),Ni(t,e)}function io(t,e,n){return t=no(t),Fi(t,e,n)}function oo(){if(null!==Ki){var t=Ki;Ki=null,ji(t)}ao()}function ao(){if(!Ji&&null!==Qi){Ji=!0;var t=0;try{var e=Qi;ro(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Qi=null}catch(e){throw null!==Qi&&(Qi=Qi.slice(t+1)),Fi(Gi,oo),e}finally{Ji=!1}}}var so=D.ReactCurrentBatchConfig;function uo(t,e){if(t&&t.defaultProps){for(var n in e=A({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var lo=_i(null),co=null,fo=null,po=null;function ho(){po=fo=co=null}function go(t){var e=lo.current;bi(lo),t.type._context._currentValue=e}function yo(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function Ao(t,e){co=t,po=fo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(Za=!0),t.firstContext=null)}function vo(t,e){if(po!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(po=t,e=1073741823),e={context:t,observedBits:e,next:null},null===fo){if(null===co)throw Error(m(308));fo=e,co.dependencies={lanes:0,firstContext:e,responders:null}}else fo=fo.next=e;return t._currentValue}var mo=!1;function _o(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function bo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function Eo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function So(t,e,n,r){var i=t.updateQueue;mo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=t.alternate;if(null!==c){var f=(c=c.updateQueue).lastBaseUpdate;f!==a&&(null===f?c.firstBaseUpdate=l:f.next=l,c.lastBaseUpdate=u)}}if(null!==o){for(f=i.baseState,a=0,c=l=u=null;;){s=o.lane;var p=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var h=t,d=o;switch(s=e,p=n,d.tag){case 1:if("function"==typeof(h=d.payload)){f=h.call(p,f,s);break t}f=h;break t;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(s="function"==typeof(h=d.payload)?h.call(p,f,s):h))break t;f=A({},f,s);break t;case 2:mo=!0}}null!==o.callback&&(t.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else p={eventTime:p,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=p,u=f):c=c.next=p,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,Js|=a,t.lanes=a,t.memoizedState=f}}function Po(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(m(191,i));i.call(r)}}}var ko=(new y.Component).refs;function Co(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:A({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var To={isMounted:function(t){return!!(t=t._reactInternals)&&ce(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wu(),i=Eu(t),o=xo(r,i);o.payload=e,null!=n&&(o.callback=n),wo(t,o),Su(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wu(),i=Eu(t),o=xo(r,i);o.tag=1,o.payload=e,null!=n&&(o.callback=n),wo(t,o),Su(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wu(),r=Eu(t),i=xo(n,r);i.tag=2,null!=e&&(i.callback=e),wo(t,i),Su(t,r,n)}};function Io(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!wr(n,r)||!wr(i,o))}function Mo(t,e,n){var r=!1,i=wi,o=e.contextType;return"object"==typeof o&&null!==o?o=vo(o):(i=Ci(e)?Pi:Ei.current,o=(r=null!=(r=e.contextTypes))?ki(t,i):wi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=To,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Oo(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&To.enqueueReplaceState(e,e.state,null)}function Lo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ko,_o(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=vo(o):(o=Ci(e)?Pi:Ei.current,i.context=ki(t,o)),So(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(Co(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&To.enqueueReplaceState(i,i.state,null),So(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4)}var Ro=Array.isArray;function Do(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(m(309));var r=n.stateNode}if(!r)throw Error(m(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===ko&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(m(284));if(!n._owner)throw Error(m(290,t))}return t}function No(t,e){if("textarea"!==t.type)throw Error(m(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Fo(t){var e=function(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}},n=function(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null},r=function(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t},i=function(t,e){return(t=rl(t,e)).index=0,t.sibling=null,t},o=function(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n},a=function(e){return t&&null===e.alternate&&(e.flags=2),e},s=function(t,e,n,r){return null===e||6!==e.tag?((e=sl(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)},u=function(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Do(t,e,n),r.return=t,r):((r=il(n.type,n.key,n.props,null,t.mode,r)).ref=Do(t,e,n),r.return=t,r)},l=function(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=ul(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)},c=function(t,e,n,r,o){return null===e||7!==e.tag?((e=ol(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)},f=function(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=sl(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case N:return(n=il(e.type,e.key,e.props,null,t.mode,n)).ref=Do(t,null,e),n.return=t,n;case F:return(e=ul(e,t.mode,n)).return=t,e}if(Ro(e)||nt(e))return(e=ol(e,t.mode,n,null)).return=t,e;No(t,e)}return null},p=function(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case N:return n.key===i?n.type===j?c(t,e,n.props.children,r,i):u(t,e,n,r):null;case F:return n.key===i?l(t,e,n,r):null}if(Ro(n)||nt(n))return null!==i?null:c(t,e,n,r,null);No(t,n)}return null},h=function(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return t=t.get(n)||null,s(e,t,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case N:return t=t.get(null===r.key?n:r.key)||null,r.type===j?c(e,t,r.props.children,i,r.key):u(e,t,r,i);case F:return t=t.get(null===r.key?n:r.key)||null,l(e,t,r,i)}if(Ro(r)||nt(r))return t=t.get(n)||null,c(e,t,r,i,null);No(e,r)}return null},d=function(i,a,s,u){for(var l=null,c=null,d=a,g=a=0,y=null;null!==d&&g<s.length;g++){d.index>g?(y=d,d=null):y=d.sibling;var A=p(i,d,s[g],u);if(null===A){null===d&&(d=y);break}t&&d&&null===A.alternate&&e(i,d),a=o(A,a,g),null===c?l=A:c.sibling=A,c=A,d=y}if(g===s.length)return n(i,d),l;if(null===d){for(;g<s.length;g++)null!==(d=f(i,s[g],u))&&(a=o(d,a,g),null===c?l=d:c.sibling=d,c=d);return l}for(d=r(i,d);g<s.length;g++)null!==(y=h(d,i,g,s[g],u))&&(t&&null!==y.alternate&&d.delete(null===y.key?g:y.key),a=o(y,a,g),null===c?l=y:c.sibling=y,c=y);return t&&d.forEach((function(t){return e(i,t)})),l},g=function(i,a,s,u){var l=nt(s);if("function"!=typeof l)throw Error(m(150));if(null==(s=l.call(s)))throw Error(m(151));for(var c=l=null,d=a,g=a=0,y=null,A=s.next();null!==d&&!A.done;g++,A=s.next()){d.index>g?(y=d,d=null):y=d.sibling;var v=p(i,d,A.value,u);if(null===v){null===d&&(d=y);break}t&&d&&null===v.alternate&&e(i,d),a=o(v,a,g),null===c?l=v:c.sibling=v,c=v,d=y}if(A.done)return n(i,d),l;if(null===d){for(;!A.done;g++,A=s.next())null!==(A=f(i,A.value,u))&&(a=o(A,a,g),null===c?l=A:c.sibling=A,c=A);return l}for(d=r(i,d);!A.done;g++,A=s.next())null!==(A=h(d,i,g,A.value,u))&&(t&&null!==A.alternate&&d.delete(null===A.key?g:A.key),a=o(A,a,g),null===c?l=A:c.sibling=A,c=A);return t&&d.forEach((function(t){return e(i,t)})),l};return function(t,r,o,s){var u="object"==typeof o&&null!==o&&o.type===j&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case N:t:{for(l=o.key,u=r;null!==u;){if(u.key===l){if(7===u.tag){if(o.type===j){n(t,u.sibling),(r=i(u,o.props.children)).return=t,t=r;break t}}else if(u.elementType===o.type){n(t,u.sibling),(r=i(u,o.props)).ref=Do(t,u,o),r.return=t,t=r;break t}n(t,u);break}e(t,u),u=u.sibling}o.type===j?((r=ol(o.props.children,t.mode,s,o.key)).return=t,t=r):((s=il(o.type,o.key,o.props,null,t.mode,s)).ref=Do(t,r,o),s.return=t,t=s)}return a(t);case F:t:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=ul(o,t.mode,s)).return=t,t=r}return a(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=sl(o,t.mode,s)).return=t,t=r),a(t);if(Ro(o))return d(t,r,o,s);if(nt(o))return g(t,r,o,s);if(l&&No(t,o),void 0===o&&!u)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(m(152,st(t.type)||"Component"))}return n(t,r)}}var jo=Fo(!0),zo=Fo(!1),Bo={},Uo=_i(Bo),Vo=_i(Bo),Go=_i(Bo);function qo(t){if(t===Bo)throw Error(m(174));return t}function Wo(t,e){switch(xi(Go,e),xi(Vo,t),xi(Uo,Bo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ct(null,"");break;default:e=Ct(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}bi(Uo),xi(Uo,e)}function Ho(){bi(Uo),bi(Vo),bi(Go)}function Xo(t){qo(Go.current);var e=qo(Uo.current),n=Ct(e,t.type);e!==n&&(xi(Vo,t),xi(Uo,n))}function Zo(t){Vo.current===t&&(bi(Uo),bi(Vo))}var Yo=_i(0);function Qo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ko=null,Jo=null,$o=!1;function ta(t,e){var n=el(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function ea(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function na(t){if($o){var e=Jo;if(e){var n=e;if(!ea(t,e)){if(!(e=oi(n.nextSibling))||!ea(t,e))return t.flags=-1025&t.flags|2,$o=!1,void(Ko=t);ta(Ko,n)}Ko=t,Jo=oi(e.firstChild)}else t.flags=-1025&t.flags|2,$o=!1,Ko=t}}function ra(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ko=t}function ia(t){if(t!==Ko)return!1;if(!$o)return ra(t),$o=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!ei(e,t.memoizedProps))for(e=Jo;e;)ta(t,e),e=oi(e.nextSibling);if(ra(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(m(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Jo=oi(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Jo=null}}else Jo=Ko?oi(t.stateNode.nextSibling):null;return!0}function oa(){Jo=Ko=null,$o=!1}var aa=[];function sa(){for(var t=0;t<aa.length;t++)aa[t]._workInProgressVersionPrimary=null;aa.length=0}var ua=D.ReactCurrentDispatcher,la=D.ReactCurrentBatchConfig,ca=0,fa=null,pa=null,ha=null,da=!1,ga=!1;function ya(){throw Error(m(321))}function Aa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!br(t[n],e[n]))return!1;return!0}function va(t,e,n,r,i,o){if(ca=o,fa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ua.current=null===t||null===t.memoizedState?qa:Wa,t=n(r,i),ga){o=0;do{if(ga=!1,!(25>o))throw Error(m(301));o+=1,ha=pa=null,e.updateQueue=null,ua.current=Ha,t=n(r,i)}while(ga)}if(ua.current=Ga,e=null!==pa&&null!==pa.next,ca=0,ha=pa=fa=null,da=!1,e)throw Error(m(300));return t}function ma(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ha?fa.memoizedState=ha=t:ha=ha.next=t,ha}function _a(){if(null===pa){var t=fa.alternate;t=null!==t?t.memoizedState:null}else t=pa.next;var e=null===ha?fa.memoizedState:ha.next;if(null!==e)ha=e,pa=t;else{if(null===t)throw Error(m(310));t={memoizedState:(pa=t).memoizedState,baseState:pa.baseState,baseQueue:pa.baseQueue,queue:pa.queue,next:null},null===ha?fa.memoizedState=ha=t:ha=ha.next=t}return ha}function ba(t,e){return"function"==typeof e?e(t):e}function xa(t){var e=_a(),n=e.queue;if(null===n)throw Error(m(311));n.lastRenderedReducer=t;var r=pa,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.lane;if((ca&l)===l)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===t?u.eagerState:t(r,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,fa.lanes|=l,Js|=l}u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,br(r,e.memoizedState)||(Za=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=s,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function wa(t){var e=_a(),n=e.queue;if(null===n)throw Error(m(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);br(o,e.memoizedState)||(Za=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Ea(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=(ca&t)===t)&&(e._workInProgressVersionPrimary=r,aa.push(e))),t)return n(e._source);throw aa.push(e),Error(m(350))}function Sa(t,e,n,r){var i=qs;if(null===i)throw Error(m(349));var o=e._getVersion,a=o(e._source),s=ua.current,u=s.useState((function(){return Ea(i,e,n)})),l=u[1],c=u[0];u=ha;var f=t.memoizedState,p=f.refs,h=p.getSnapshot,d=f.source;f=f.subscribe;var g=fa;return t.memoizedState={refs:p,source:e,subscribe:r},s.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var t=o(e._source);if(!br(a,t)){t=n(e._source),br(c,t)||(l(t),t=Eu(g),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,s=t;0<s;){var u=31-on(s),f=1<<u;r[u]|=t,s&=~f}}}),[n,e,r]),s.useEffect((function(){return r(e._source,(function(){var t=p.getSnapshot,n=p.setSnapshot;try{n(t(e._source));var r=Eu(g);i.mutableReadLanes|=r&i.pendingLanes}catch(t){n((function(){throw t}))}}))}),[e,r]),br(h,n)&&br(d,e)&&br(f,r)||((t={pending:null,dispatch:null,lastRenderedReducer:ba,lastRenderedState:c}).dispatch=l=Va.bind(null,fa,t),u.queue=t,u.baseQueue=null,c=Ea(i,e,n),u.memoizedState=u.baseState=c),c}function Pa(t,e,n){return Sa(_a(),t,e,n)}function ka(t){var e=ma();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t}).dispatch=Va.bind(null,fa,t),[e.memoizedState,t]}function Ca(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=fa.updateQueue)?(e={lastEffect:null},fa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Ta(t){return t={current:t},ma().memoizedState=t}function Ia(){return _a().memoizedState}function Ma(t,e,n,r){var i=ma();fa.flags|=t,i.memoizedState=Ca(1|e,n,void 0,void 0===r?null:r)}function Oa(t,e,n,r){var i=_a();r=void 0===r?null:r;var o=void 0;if(null!==pa){var a=pa.memoizedState;if(o=a.destroy,null!==r&&Aa(r,a.deps))return void Ca(e,n,o,r)}fa.flags|=t,i.memoizedState=Ca(1|e,n,o,r)}function La(t,e){return Ma(516,4,t,e)}function Ra(t,e){return Oa(516,4,t,e)}function Da(t,e){return Oa(4,2,t,e)}function Na(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Fa(t,e,n){return n=null!=n?n.concat([t]):null,Oa(4,2,Na.bind(null,e,t),n)}function ja(){}function za(t,e){var n=_a();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Aa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ba(t,e){var n=_a();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Aa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ua(t,e){var n=eo();ro(98>n?98:n,(function(){t(!0)})),ro(97<n?97:n,(function(){var n=la.transition;la.transition=1;try{t(!1),e()}finally{la.transition=n}}))}function Va(t,e,n){var r=wu(),i=Eu(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===fa||null!==a&&a===fa)ga=da=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,br(u,s))return}catch(t){}Su(t,i,r)}}var Ga={readContext:vo,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useLayoutEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useDeferredValue:ya,useTransition:ya,useMutableSource:ya,useOpaqueIdentifier:ya,unstable_isNewReconciler:!1},qa={readContext:vo,useCallback:function(t,e){return ma().memoizedState=[t,void 0===e?null:e],t},useContext:vo,useEffect:La,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Ma(4,2,Na.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ma(4,2,t,e)},useMemo:function(t,e){var n=ma();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ma();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Va.bind(null,fa,t),[r.memoizedState,t]},useRef:Ta,useState:ka,useDebugValue:ja,useDeferredValue:function(t){var e=ka(t),n=e[0],r=e[1];return La((function(){var e=la.transition;la.transition=1;try{r(t)}finally{la.transition=e}}),[t]),n},useTransition:function(){var t=ka(!1),e=t[0];return Ta(t=Ua.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=ma();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},Sa(r,t,e,n)},useOpaqueIdentifier:function(){if($o){var t=!1,e={$$typeof:Y,toString:r=function(){throw t||(t=!0,n("r:"+(si++).toString(36))),Error(m(355))},valueOf:r},n=ka(e)[1];return 0==(2&fa.mode)&&(fa.flags|=516,Ca(5,(function(){n("r:"+(si++).toString(36))}),void 0,null)),e}var r;return ka(e="r:"+(si++).toString(36)),e},unstable_isNewReconciler:!1},Wa={readContext:vo,useCallback:za,useContext:vo,useEffect:Ra,useImperativeHandle:Fa,useLayoutEffect:Da,useMemo:Ba,useReducer:xa,useRef:Ia,useState:function(){return xa(ba)},useDebugValue:ja,useDeferredValue:function(t){var e=xa(ba),n=e[0],r=e[1];return Ra((function(){var e=la.transition;la.transition=1;try{r(t)}finally{la.transition=e}}),[t]),n},useTransition:function(){var t=xa(ba)[0];return[Ia().current,t]},useMutableSource:Pa,useOpaqueIdentifier:function(){return xa(ba)[0]},unstable_isNewReconciler:!1},Ha={readContext:vo,useCallback:za,useContext:vo,useEffect:Ra,useImperativeHandle:Fa,useLayoutEffect:Da,useMemo:Ba,useReducer:wa,useRef:Ia,useState:function(){return wa(ba)},useDebugValue:ja,useDeferredValue:function(t){var e=wa(ba),n=e[0],r=e[1];return Ra((function(){var e=la.transition;la.transition=1;try{r(t)}finally{la.transition=e}}),[t]),n},useTransition:function(){var t=wa(ba)[0];return[Ia().current,t]},useMutableSource:Pa,useOpaqueIdentifier:function(){return wa(ba)[0]},unstable_isNewReconciler:!1},Xa=D.ReactCurrentOwner,Za=!1;function Ya(t,e,n,r){e.child=null===t?zo(e,null,n,r):jo(e,t.child,n,r)}function Qa(t,e,n,r,i){n=n.render;var o=e.ref;return Ao(e,i),r=va(t,e,n,r,o,i),null===t||Za?(e.flags|=1,Ya(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ys(t,e,i))}function Ka(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||nl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=il(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ja(t,e,a,r,i,o))}return a=t.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:wr)(i,r)&&t.ref===e.ref)?ys(t,e,o):(e.flags|=1,(t=rl(a,r)).ref=e.ref,t.return=e,e.child=t)}function Ja(t,e,n,r,i,o){if(null!==t&&wr(t.memoizedProps,r)&&t.ref===e.ref){if(Za=!1,0==(o&i))return e.lanes=t.lanes,ys(t,e,o);0!=(16384&t.flags)&&(Za=!0)}return es(t,e,n,r,o)}function $a(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&e.mode))e.memoizedState={baseLanes:0},Lu(e,n);else{if(0==(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Lu(e,t),null;e.memoizedState={baseLanes:0},Lu(e,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Lu(e,r);return Ya(t,e,i,n),e.child}function ts(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function es(t,e,n,r,i){var o=Ci(n)?Pi:Ei.current;return o=ki(e,o),Ao(e,i),n=va(t,e,n,r,o,i),null===t||Za?(e.flags|=1,Ya(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ys(t,e,i))}function ns(t,e,n,r,i){if(Ci(n)){var o=!0;Oi(e)}else o=!1;if(Ao(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),Mo(e,n,r),Lo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=vo(l):l=ki(e,l=Ci(n)?Pi:Ei.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Oo(e,a,r,l),mo=!1;var p=e.memoizedState;a.state=p,So(e,r,a,i),u=e.memoizedState,s!==r||p!==u||Si.current||mo?("function"==typeof c&&(Co(e,n,c,r),u=e.memoizedState),(s=mo||Io(e,n,s,r,p,u,l))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.flags|=4)):("function"==typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(e.flags|=4),r=!1)}else{a=e.stateNode,bo(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:uo(e.type,s),a.props=l,f=e.pendingProps,p=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=vo(u):u=ki(e,u=Ci(n)?Pi:Ei.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||p!==u)&&Oo(e,a,r,u),mo=!1,p=e.memoizedState,a.state=p,So(e,r,a,i);var d=e.memoizedState;s!==f||p!==d||Si.current||mo?("function"==typeof h&&(Co(e,n,h,r),d=e.memoizedState),(l=mo||Io(e,n,l,r,p,d,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"==typeof a.componentDidUpdate&&(e.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=256),r=!1)}return rs(t,e,n,r,o,i)}function rs(t,e,n,r,i,o){ts(t,e);var a=0!=(64&e.flags);if(!r&&!a)return i&&Li(e,n,!1),ys(t,e,o);r=e.stateNode,Xa.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=jo(e,t.child,null,o),e.child=jo(e,null,s,o)):Ya(t,e,s,o),e.memoizedState=r.state,i&&Li(e,n,!0),e.child}function is(t){var e=t.stateNode;e.pendingContext?Ii(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ii(0,e.context,!1),Wo(t,e.containerInfo)}var os,as,ss,us={dehydrated:null,retryLane:0};function ls(t,e,n){var r,i=e.pendingProps,o=Yo.current,a=!1;return(r=0!=(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!=(2&o)),r?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),xi(Yo,1&o),null===t?(void 0!==i.fallback&&na(e),t=i.children,o=i.fallback,a?(t=cs(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=us,t):"number"==typeof i.unstable_expectedLoadTime?(t=cs(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=us,e.lanes=33554432,t):((n=al({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(i=ps(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=us,i):(n=fs(t,e,i.children,n),e.memoizedState=null,n))}function cs(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=al(e,i,0,null),n=ol(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function fs(t,e,n,r){var i=t.child;return t=i.sibling,n=rl(i,{mode:"visible",children:n}),0==(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function ps(t,e,n,r,i){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=rl(a,s),null!==t?r=rl(t,r):(r=ol(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function hs(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),yo(t.return,e)}function ds(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function gs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ya(t,e,r.children,n),0!=(2&(r=Yo.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!=(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&hs(t,n);else if(19===t.tag)hs(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xi(Yo,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Qo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ds(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Qo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ds(e,!0,n,null,o,e.lastEffect);break;case"together":ds(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ys(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Js|=e.lanes,0!=(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(m(153));if(null!==e.child){for(n=rl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=rl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function As(t,e){if(!$o)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vs(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Ci(e.type)&&Ti(),null;case 3:return Ho(),bi(Si),bi(Ei),sa(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ia(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Zo(e);var i=qo(Go.current);if(n=e.type,null!==t&&null!=e.stateNode)as(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(m(166));return null}if(t=qo(Uo.current),ia(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[li]=e,r[ci]=o,n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(t=0;t<Fr.length;t++)Ur(Fr[t],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":dt(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":xt(r,o),Ur("invalid",r)}for(var a in jt(n,o),t=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(t=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(t=["children",""+i]):b.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&Ur("scroll",r));switch(n){case"input":ct(r),At(r,o,!0);break;case"textarea":ct(r),Et(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Kr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,t===St&&(t=kt(n)),t===St?"script"===n?((t=a.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),"select"===n&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[li]=e,t[ci]=r,os(t,e),e.stateNode=t,a=zt(n,r),n){case"dialog":Ur("cancel",t),Ur("close",t),i=r;break;case"iframe":case"object":case"embed":Ur("load",t),i=r;break;case"video":case"audio":for(i=0;i<Fr.length;i++)Ur(Fr[i],t);i=r;break;case"source":Ur("error",t),i=r;break;case"img":case"image":case"link":Ur("error",t),Ur("load",t),i=r;break;case"details":Ur("toggle",t),i=r;break;case"input":dt(t,r),i=ht(t,r),Ur("invalid",t);break;case"option":i=mt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=A({},r,{value:void 0}),Ur("invalid",t);break;case"textarea":xt(t,r),i=bt(t,r),Ur("invalid",t);break;default:i=r}jt(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?Nt(t,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&Mt(t,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&Ot(t,u):"number"==typeof u&&Ot(t,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(b.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",t):null!=u&&R(t,o,u,a))}switch(n){case"input":ct(t),At(t,r,!1);break;case"textarea":ct(t),Et(t);break;case"option":null!=r.value&&t.setAttribute("value",""+ut(r.value));break;case"select":t.multiple=!!r.multiple,null!=(o=r.value)?_t(t,!!r.multiple,o,!1):null!=r.defaultValue&&_t(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(t.onclick=Kr)}ti(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)ss(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(m(166));n=qo(Go.current),qo(Uo.current),ia(e)?(r=e.stateNode,n=e.memoizedProps,r[li]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[li]=e,e.stateNode=r)}return null;case 13:return bi(Yo),r=e.memoizedState,0!=(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&ia(e):n=null!==t.memoizedState,r&&!n&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Yo.current)?0===Ys&&(Ys=3):(0!==Ys&&3!==Ys||(Ys=4),null===qs||0==(134217727&Js)&&0==(134217727&$s)||Tu(qs,Hs))),(r||n)&&(e.flags|=4),null);case 4:return Ho(),null===t&&Gr(e.stateNode.containerInfo),null;case 10:return go(e),null;case 19:if(bi(Yo),null===(r=e.memoizedState))return null;if(o=0!=(64&e.flags),null===(a=r.rendering))if(o)As(r,!1);else{if(0!==Ys||null!==t&&0!=(64&t.flags))for(t=e.child;null!==t;){if(null!==(a=Qo(t))){for(e.flags|=64,As(r,!1),null!==(o=a.updateQueue)&&(e.updateQueue=o,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xi(Yo,1&Yo.current|2),e.child}t=t.sibling}null!==r.tail&&to()>ru&&(e.flags|=64,o=!0,As(r,!1),e.lanes=33554432)}else{if(!o)if(null!==(t=Qo(a))){if(e.flags|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),As(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!$o)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*to()-r.renderingStartTime>ru&&1073741824!==n&&(e.flags|=64,o=!0,As(r,!1),e.lanes=33554432);r.isBackwards?(a.sibling=e.child,e.child=a):(null!==(n=r.last)?n.sibling=a:e.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=to(),n.sibling=null,e=Yo.current,xi(Yo,o?1&e|2:1&e),n):null;case 23:case 24:return Ru(),null!==t&&null!==t.memoizedState!=(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(m(156,e.tag))}function ms(t){switch(t.tag){case 1:Ci(t.type)&&Ti();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Ho(),bi(Si),bi(Ei),sa(),0!=(64&(e=t.flags)))throw Error(m(285));return t.flags=-4097&e|64,t;case 5:return Zo(t),null;case 13:return bi(Yo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return bi(Yo),null;case 4:return Ho(),null;case 10:return go(t),null;case 23:case 24:return Ru(),null;default:return null}}function _s(t,e){try{var n="",r=e;do{n+=at(r),r=r.return}while(r);var i=n}catch(t){i="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:i}}function bs(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}os=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},as=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,qo(Uo.current);var o,a=null;switch(n){case"input":i=ht(t,i),r=ht(t,r),a=[];break;case"option":i=mt(t,i),r=mt(t,r),a=[];break;case"select":i=A({},i,{value:void 0}),r=A({},r,{value:void 0}),a=[];break;case"textarea":i=bt(t,i),r=bt(t,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(t.onclick=Kr)}for(l in jt(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(b.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(b.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Ur("scroll",t),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===Y?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}},ss=function(t,e,n,r){n!==r&&(e.flags|=4)};var xs="function"==typeof WeakMap?WeakMap:Map;function ws(t,e,n){(n=xo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){su||(su=!0,uu=r),bs(0,e)},n}function Es(t,e,n){(n=xo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return bs(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===lu?lu=new Set([this]):lu.add(this),bs(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var Ss="function"==typeof WeakSet?WeakSet:Set;function Ps(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Ku(t,e)}else e.current=null}function ks(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:uo(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&ii(e.stateNode.containerInfo))}throw Error(m(163))}function Cs(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3==(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Zu(n,t),Xu(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:uo(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&Po(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}Po(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&ti(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ne(n)))))}throw Error(m(163))}function Ts(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=Dt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Is(t,e){if(Di&&"function"==typeof Di.onCommitFiberUnmount)try{Di.onCommitFiberUnmount(Ri,e)}catch(t){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Zu(e,n);else{r=e;try{i()}catch(t){Ku(r,t)}}n=n.next}while(n!==t)}break;case 1:if(Ps(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Ku(e,t)}break;case 5:Ps(e);break;case 4:Ns(t,e)}}function Ms(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function Os(t){return 5===t.tag||3===t.tag||4===t.tag}function Ls(t){t:{for(var e=t.return;null!==e;){if(Os(e))break t;e=e.return}throw Error(m(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(m(161))}16&n.flags&&(Ot(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||Os(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?Rs(t,n,e):Ds(t,n,e)}function Rs(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Kr));else if(4!==r&&null!==(t=t.child))for(Rs(t,e,n),t=t.sibling;null!==t;)Rs(t,e,n),t=t.sibling}function Ds(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(Ds(t,e,n),t=t.sibling;null!==t;)Ds(t,e,n),t=t.sibling}function Ns(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(m(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var a=t,s=i,u=s;;)if(Is(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break t;for(;null===u.sibling;){if(null===u.return||u.return===s)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(Is(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Fs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[ci]=r,"input"===t&&"radio"===r.type&&null!=r.name&&gt(n,r),zt(t,i),e=zt(t,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?Nt(n,s):"dangerouslySetInnerHTML"===a?Mt(n,s):"children"===a?Ot(n,s):R(n,a,s,e)}switch(t){case"input":yt(n,r);break;case"textarea":wt(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?_t(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?_t(n,!!r.multiple,r.defaultValue,!0):_t(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(m(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,Ne(n.containerInfo)));case 13:return null!==e.memoizedState&&(nu=to(),Ts(e.child,!0)),void js(e);case 19:return void js(e);case 23:case 24:return void Ts(e,null!==e.memoizedState)}throw Error(m(163))}function js(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ss),e.forEach((function(e){var r=$u.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function zs(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Bs=Math.ceil,Us=D.ReactCurrentDispatcher,Vs=D.ReactCurrentOwner,Gs=0,qs=null,Ws=null,Hs=0,Xs=0,Zs=_i(0),Ys=0,Qs=null,Ks=0,Js=0,$s=0,tu=0,eu=null,nu=0,ru=1/0;function iu(){ru=to()+500}var ou,au=null,su=!1,uu=null,lu=null,cu=!1,fu=null,pu=90,hu=[],du=[],gu=null,yu=0,Au=null,vu=-1,mu=0,_u=0,bu=null,xu=!1;function wu(){return 0!=(48&Gs)?to():-1!==vu?vu:vu=to()}function Eu(t){if(0==(2&(t=t.mode)))return 1;if(0==(4&t))return 99===eo()?1:2;if(0===mu&&(mu=Ks),0!==so.transition){0!==_u&&(_u=null!==eu?eu.pendingLanes:0),t=mu;var e=4186112&~_u;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=eo(),0!=(4&Gs)&&98===t?t=tn(12,mu):t=tn(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),mu),t}function Su(t,e,n){if(50<yu)throw yu=0,Au=null,Error(m(185));if(null===(t=Pu(t,e)))return null;rn(t,e,n),t===qs&&($s|=e,4===Ys&&Tu(t,Hs));var r=eo();1===e?0!=(8&Gs)&&0==(48&Gs)?Iu(t):(ku(t,n),0===Gs&&(iu(),oo())):(0==(4&Gs)||98!==r&&99!==r||(null===gu?gu=new Set([t]):gu.add(t)),ku(t,n)),eu=t}function Pu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function ku(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-on(a),u=1<<s,l=o[s];if(-1===l){if(0==(u&r)||0!=(u&i)){l=e,Ke(u);var c=Qe;o[s]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=e&&(t.expiredLanes|=u);a&=~u}if(r=Je(t,t===qs?Hs:0),e=Qe,0===r)null!==n&&(n!==Zi&&ji(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Zi&&ji(n)}15===e?(n=Iu.bind(null,t),null===Qi?(Qi=[n],Ki=Fi(Gi,ao)):Qi.push(n),n=Zi):14===e?n=io(99,Iu.bind(null,t)):n=io(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(m(358,t))}}(e),Cu.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function Cu(t){if(vu=-1,_u=mu=0,0!=(48&Gs))throw Error(m(327));var e=t.callbackNode;if(Hu()&&t.callbackNode!==e)return null;var n=Je(t,t===qs?Hs:0);if(0===n)return null;var r=n,i=Gs;Gs|=16;var o=Fu();for(qs===t&&Hs===r||(iu(),Du(t,r));;)try{Bu();break}catch(e){Nu(t,e)}if(ho(),Us.current=o,Gs=i,null!==Ws?r=0:(qs=null,Hs=0,r=Ys),0!=(Ks&$s))Du(t,0);else if(0!==r){if(2===r&&(Gs|=64,t.hydrate&&(t.hydrate=!1,ii(t.containerInfo)),0!==(n=$e(t))&&(r=ju(t,n))),1===r)throw e=Qs,Du(t,0),Tu(t,n),ku(t,to()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(m(345));case 2:case 5:Gu(t);break;case 3:if(Tu(t,n),(62914560&n)===n&&10<(r=nu+500-to())){if(0!==Je(t,0))break;if(((i=t.suspendedLanes)&n)!==n){wu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ni(Gu.bind(null,t),r);break}Gu(t);break;case 4:if(Tu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var a=31-on(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=to()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Bs(n/1960))-n)){t.timeoutHandle=ni(Gu.bind(null,t),n);break}Gu(t);break;default:throw Error(m(329))}}return ku(t,to()),t.callbackNode===e?Cu.bind(null,t):null}function Tu(t,e){for(e&=~tu,e&=~$s,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-on(e),r=1<<n;t[n]=-1,e&=~r}}function Iu(t){if(0!=(48&Gs))throw Error(m(327));if(Hu(),t===qs&&0!=(t.expiredLanes&Hs)){var e=Hs,n=ju(t,e);0!=(Ks&$s)&&(n=ju(t,e=Je(t,e)))}else n=ju(t,e=Je(t,0));if(0!==t.tag&&2===n&&(Gs|=64,t.hydrate&&(t.hydrate=!1,ii(t.containerInfo)),0!==(e=$e(t))&&(n=ju(t,e))),1===n)throw n=Qs,Du(t,0),Tu(t,e),ku(t,to()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gu(t),ku(t,to()),null}function Mu(t,e){var n=Gs;Gs|=1;try{return t(e)}finally{0===(Gs=n)&&(iu(),oo())}}function Ou(t,e){var n=Gs;Gs&=-2,Gs|=8;try{return t(e)}finally{0===(Gs=n)&&(iu(),oo())}}function Lu(t,e){xi(Zs,Xs),Xs|=e,Ks|=e}function Ru(){Xs=Zs.current,bi(Zs)}function Du(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ri(n)),null!==Ws)for(n=Ws.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ti();break;case 3:Ho(),bi(Si),bi(Ei),sa();break;case 5:Zo(r);break;case 4:Ho();break;case 13:case 19:bi(Yo);break;case 10:go(r);break;case 23:case 24:Ru()}n=n.return}qs=t,Ws=rl(t.current,null),Hs=Xs=Ks=e,Ys=0,Qs=null,tu=$s=Js=0}function Nu(t,e){for(;;){var n=Ws;try{if(ho(),ua.current=Ga,da){for(var r=fa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}da=!1}if(ca=0,ha=pa=fa=null,ga=!1,Vs.current=null,null===n||null===n.return){Ys=1,Qs=e,Ws=null;break}t:{var o=t,a=n.return,s=n,u=e;if(e=Hs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&Yo.current),p=a;do{var h;if(h=13===p.tag){var d=p.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var g=p.memoizedProps;h=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!f)}}if(h){var y=p.updateQueue;if(null===y){var A=new Set;A.add(l),p.updateQueue=A}else y.add(l);if(0==(2&p.mode)){if(p.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=xo(-1,1);v.tag=2,wo(s,v)}s.lanes|=1;break t}u=void 0,s=e;var m=o.pingCache;if(null===m?(m=o.pingCache=new xs,u=new Set,m.set(l,u)):void 0===(u=m.get(l))&&(u=new Set,m.set(l,u)),!u.has(s)){u.add(s);var _=Ju.bind(null,o,l,s);l.then(_,_)}p.flags|=4096,p.lanes=e;break t}p=p.return}while(null!==p);u=Error((st(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ys&&(Ys=2),u=_s(u,s),p=a;do{switch(p.tag){case 3:o=u,p.flags|=4096,e&=-e,p.lanes|=e,Eo(p,ws(0,o,e));break t;case 1:o=u;var b=p.type,x=p.stateNode;if(0==(64&p.flags)&&("function"==typeof b.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===lu||!lu.has(x)))){p.flags|=4096,e&=-e,p.lanes|=e,Eo(p,Es(p,o,e));break t}}p=p.return}while(null!==p)}Vu(n)}catch(t){e=t,Ws===n&&null!==n&&(Ws=n=n.return);continue}break}}function Fu(){var t=Us.current;return Us.current=Ga,null===t?Ga:t}function ju(t,e){var n=Gs;Gs|=16;var r=Fu();for(qs===t&&Hs===e||Du(t,e);;)try{zu();break}catch(e){Nu(t,e)}if(ho(),Gs=n,Us.current=r,null!==Ws)throw Error(m(261));return qs=null,Hs=0,Ys}function zu(){for(;null!==Ws;)Uu(Ws)}function Bu(){for(;null!==Ws&&!zi();)Uu(Ws)}function Uu(t){var e=ou(t.alternate,t,Xs);t.memoizedProps=t.pendingProps,null===e?Vu(t):Ws=e,Vs.current=null}function Vu(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(2048&e.flags)){if(null!==(n=vs(n,e,Xs)))return void(Ws=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Xs)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0==(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=ms(e)))return n.flags&=2047,void(Ws=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Ws=e);Ws=e=t}while(null!==e);0===Ys&&(Ys=5)}function Gu(t){var e=eo();return ro(99,qu.bind(null,t,e)),null}function qu(t,e){do{Hu()}while(null!==fu);if(0!=(48&Gs))throw Error(m(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(m(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var a=t.eventTimes,s=t.expirationTimes;0<o;){var u=31-on(o),l=1<<u;i[u]=0,a[u]=-1,s[u]=-1,o&=~l}if(null!==gu&&0==(24&r)&&gu.has(t)&&gu.delete(t),t===qs&&(Ws=qs=null,Hs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Gs,Gs|=32,Vs.current=null,Jr=cn,Cr(a=kr())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else t:if(s=(s=a.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{s.nodeType,u.nodeType}catch(t){s=null;break t}var c=0,f=-1,p=-1,h=0,d=0,g=a,y=null;e:for(;;){for(var A;g!==s||0!==o&&3!==g.nodeType||(f=c+o),g!==u||0!==l&&3!==g.nodeType||(p=c+l),3===g.nodeType&&(c+=g.nodeValue.length),null!==(A=g.firstChild);)y=g,g=A;for(;;){if(g===a)break e;if(y===s&&++h===o&&(f=c),y===u&&++d===l&&(p=c),null!==(A=g.nextSibling))break;y=(g=y).parentNode}g=A}s=-1===f||-1===p?null:{start:f,end:p}}else s=null;s=s||{start:0,end:0}}else s=null;$r={focusedElem:a,selectionRange:s},cn=!1,bu=null,xu=!1,au=r;do{try{Wu()}catch(t){if(null===au)throw Error(m(330));Ku(au,t),au=au.nextEffect}}while(null!==au);bu=null,au=r;do{try{for(a=t;null!==au;){var v=au.flags;if(16&v&&Ot(au.stateNode,""),128&v){var _=au.alternate;if(null!==_){var b=_.ref;null!==b&&("function"==typeof b?b(null):b.current=null)}}switch(1038&v){case 2:Ls(au),au.flags&=-3;break;case 6:Ls(au),au.flags&=-3,Fs(au.alternate,au);break;case 1024:au.flags&=-1025;break;case 1028:au.flags&=-1025,Fs(au.alternate,au);break;case 4:Fs(au.alternate,au);break;case 8:Ns(a,s=au);var x=s.alternate;Ms(s),null!==x&&Ms(x)}au=au.nextEffect}}catch(t){if(null===au)throw Error(m(330));Ku(au,t),au=au.nextEffect}}while(null!==au);if(b=$r,_=kr(),v=b.focusedElem,a=b.selectionRange,_!==v&&v&&v.ownerDocument&&Pr(v.ownerDocument.documentElement,v)){null!==a&&Cr(v)&&(_=a.start,void 0===(b=a.end)&&(b=_),"selectionStart"in v?(v.selectionStart=_,v.selectionEnd=Math.min(b,v.value.length)):(b=(_=v.ownerDocument||document)&&_.defaultView||window).getSelection&&(b=b.getSelection(),s=v.textContent.length,x=Math.min(a.start,s),a=void 0===a.end?x:Math.min(a.end,s),!b.extend&&x>a&&(s=a,a=x,x=s),s=Sr(v,x),o=Sr(v,a),s&&o&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==o.node||b.focusOffset!==o.offset)&&((_=_.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>a?(b.addRange(_),b.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),b.addRange(_))))),_=[];for(b=v;b=b.parentNode;)1===b.nodeType&&_.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<_.length;v++)(b=_[v]).element.scrollLeft=b.left,b.element.scrollTop=b.top}cn=!!Jr,$r=Jr=null,t.current=n,au=r;do{try{for(v=t;null!==au;){var w=au.flags;if(36&w&&Cs(v,au.alternate,au),128&w){_=void 0;var E=au.ref;if(null!==E){var S=au.stateNode;au.tag,_=S,"function"==typeof E?E(_):E.current=_}}au=au.nextEffect}}catch(t){if(null===au)throw Error(m(330));Ku(au,t),au=au.nextEffect}}while(null!==au);au=null,Yi(),Gs=i}else t.current=n;if(cu)cu=!1,fu=t,pu=e;else for(au=r;null!==au;)e=au.nextEffect,au.nextEffect=null,8&au.flags&&((w=au).sibling=null,w.stateNode=null),au=e;if(0===(r=t.pendingLanes)&&(lu=null),1===r?t===Au?yu++:(yu=0,Au=t):yu=0,n=n.stateNode,Di&&"function"==typeof Di.onCommitFiberRoot)try{Di.onCommitFiberRoot(Ri,n,void 0,64==(64&n.current.flags))}catch(t){}if(ku(t,to()),su)throw su=!1,t=uu,uu=null,t;return 0!=(8&Gs)||oo(),null}function Wu(){for(;null!==au;){var t=au.alternate;xu||null===bu||(0!=(8&au.flags)?de(au,bu)&&(xu=!0):13===au.tag&&zs(t,au)&&de(au,bu)&&(xu=!0));var e=au.flags;0!=(256&e)&&ks(t,au),0==(512&e)||cu||(cu=!0,io(97,(function(){return Hu(),null}))),au=au.nextEffect}}function Hu(){if(90!==pu){var t=97<pu?97:pu;return pu=90,ro(t,Yu)}return!1}function Xu(t,e){hu.push(e,t),cu||(cu=!0,io(97,(function(){return Hu(),null})))}function Zu(t,e){du.push(e,t),cu||(cu=!0,io(97,(function(){return Hu(),null})))}function Yu(){if(null===fu)return!1;var t=fu;if(fu=null,0!=(48&Gs))throw Error(m(331));var e=Gs;Gs|=32;var n=du;du=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(t){if(null===o)throw Error(m(330));Ku(o,t)}}for(n=hu,hu=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(t){if(null===o)throw Error(m(330));Ku(o,t)}}for(s=t.current.firstEffect;null!==s;)t=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=t;return Gs=e,oo(),!0}function Qu(t,e,n){wo(t,e=ws(0,e=_s(n,e),1)),e=wu(),null!==(t=Pu(t,1))&&(rn(t,1,e),ku(t,e))}function Ku(t,e){if(3===t.tag)Qu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Qu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===lu||!lu.has(r))){var i=Es(n,t=_s(e,t),1);if(wo(n,i),i=wu(),null!==(n=Pu(n,1)))rn(n,1,i),ku(n,i);else if("function"==typeof r.componentDidCatch&&(null===lu||!lu.has(r)))try{r.componentDidCatch(e,t)}catch(t){}break}}n=n.return}}function Ju(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=wu(),t.pingedLanes|=t.suspendedLanes&n,qs===t&&(Hs&n)===n&&(4===Ys||3===Ys&&(62914560&Hs)===Hs&&500>to()-nu?Du(t,0):tu|=n),ku(t,e)}function $u(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0==(2&(e=t.mode))?e=1:0==(4&e)?e=99===eo()?1:2:(0===mu&&(mu=Ks),0===(e=en(62914560&~mu))&&(e=4194304))),n=wu(),null!==(t=Pu(t,e))&&(rn(t,e,n),ku(t,n))}function tl(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function el(t,e,n,r){return new tl(t,e,n,r)}function nl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function rl(t,e){var n=t.alternate;return null===n?((n=el(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function il(t,e,n,r,i,o){var a=2;if(r=t,"function"==typeof t)nl(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case j:return ol(n.children,i,o,e);case Q:a=8,i|=16;break;case z:a=8,i|=1;break;case B:return(t=el(12,n,e,8|i)).elementType=B,t.type=B,t.lanes=o,t;case q:return(t=el(13,n,e,i)).type=q,t.elementType=q,t.lanes=o,t;case W:return(t=el(19,n,e,i)).elementType=W,t.lanes=o,t;case K:return al(n,i,o,e);case J:return(t=el(24,n,e,i)).elementType=J,t.lanes=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case U:a=10;break t;case V:a=9;break t;case G:a=11;break t;case H:a=14;break t;case X:a=16,r=null;break t;case Z:a=22;break t}throw Error(m(130,null==t?t:void 0===t?"undefined":g.default(t),""))}return(e=el(a,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function ol(t,e,n,r){return(t=el(7,t,r,e)).lanes=n,t}function al(t,e,n,r){return(t=el(23,t,r,e)).elementType=K,t.lanes=n,t}function sl(t,e,n){return(t=el(6,t,null,e)).lanes=n,t}function ul(t,e,n){return(e=el(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ll(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=nn(0),this.expirationTimes=nn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.mutableSourceEagerHydrationData=null}function cl(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:F,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function fl(t,e,n,r){var i=e.current,o=wu(),a=Eu(i);t:if(n){e:{if(ce(n=n._reactInternals)!==n||1!==n.tag)throw Error(m(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ci(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(null!==s);throw Error(m(171))}if(1===n.tag){var u=n.type;if(Ci(u)){n=Mi(n,u,s);break t}}n=s}else n=wi;return null===e.context?e.context=n:e.pendingContext=n,(e=xo(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),wo(i,e),Su(i,a,o),a}function pl(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function hl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function dl(t,e){hl(t,e),(t=t.alternate)&&hl(t,e)}function gl(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new ll(t,e,null!=n&&!0===n.hydrate),e=el(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,_o(e),t[fi]=n.current,Gr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function yl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Al(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var t=pl(a);s.call(t)}}fl(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new gl(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var t=pl(a);u.call(t)}}Ou((function(){fl(e,a,t,i)}))}return pl(a)}function vl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!yl(e))throw Error(m(200));return cl(t,e,null,n)}ou=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||Si.current)Za=!0;else{if(0==(n&r)){switch(Za=!1,e.tag){case 3:is(e),oa();break;case 5:Xo(e);break;case 1:Ci(e.type)&&Oi(e);break;case 4:Wo(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;xi(lo,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!=(n&e.child.childLanes)?ls(t,e,n):(xi(Yo,1&Yo.current),null!==(e=ys(t,e,n))?e.sibling:null);xi(Yo,1&Yo.current);break;case 19:if(r=0!=(n&e.childLanes),0!=(64&t.flags)){if(r)return gs(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(Yo,Yo.current),r)break;return null;case 23:case 24:return e.lanes=0,$a(t,e,n)}return ys(t,e,n)}Za=0!=(16384&t.flags)}else Za=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=ki(e,Ei.current),Ao(e,n),i=va(null,e,r,t,i,n),e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ci(r)){var o=!0;Oi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,_o(e);var a=r.getDerivedStateFromProps;"function"==typeof a&&Co(e,r,a,t),i.updater=To,e.stateNode=i,i._reactInternals=e,Lo(e,r,t,n),e=rs(null,e,r,!0,o,n)}else e.tag=0,Ya(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"==typeof t)return nl(t)?1:0;if(null!=t){if((t=t.$$typeof)===G)return 11;if(t===H)return 14}return 2}(i),t=uo(i,t),o){case 0:e=es(null,e,i,t,n);break t;case 1:e=ns(null,e,i,t,n);break t;case 11:e=Qa(null,e,i,t,n);break t;case 14:e=Ka(null,e,i,uo(i.type,t),r,n);break t}throw Error(m(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,es(t,e,r,i=e.elementType===r?i:uo(r,i),n);case 1:return r=e.type,i=e.pendingProps,ns(t,e,r,i=e.elementType===r?i:uo(r,i),n);case 3:if(is(e),r=e.updateQueue,null===t||null===r)throw Error(m(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,bo(t,e),So(e,r,null,n),(r=e.memoizedState.element)===i)oa(),e=ys(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(Jo=oi(e.stateNode.containerInfo.firstChild),Ko=e,o=$o=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],aa.push(o);for(n=zo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ya(t,e,r,n),oa();e=e.child}return e;case 5:return Xo(e),null===t&&na(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,ei(r,i)?a=null:null!==o&&ei(r,o)&&(e.flags|=16),ts(t,e),Ya(t,e,a,n),e.child;case 6:return null===t&&na(e),null;case 13:return ls(t,e,n);case 4:return Wo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=jo(e,null,r,n):Ya(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Qa(t,e,r,i=e.elementType===r?i:uo(r,i),n);case 7:return Ya(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ya(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var s=e.type._context;if(xi(lo,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=br(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!Si.current){e=ys(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=xo(-1,n&-n)).tag=2,wo(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),yo(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===e.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Ya(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,Ao(e,n),r=r(i=vo(i,o.unstable_observedBits)),e.flags|=1,Ya(t,e,r,n),e.child;case 14:return o=uo(i=e.type,e.pendingProps),Ka(t,e,i,o=uo(i.type,o),r,n);case 15:return Ja(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:uo(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ci(r)?(t=!0,Oi(e)):t=!1,Ao(e,n),Mo(e,r,i),Lo(e,r,i,n),rs(null,e,r,!0,t,n);case 19:return gs(t,e,n);case 23:case 24:return $a(t,e,n)}throw Error(m(156,e.tag))},gl.prototype.render=function(t){fl(t,this._internalRoot,null,null)},gl.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;fl(null,t,null,(function(){e[fi]=null}))},ge=function(t){13===t.tag&&(Su(t,4,wu()),dl(t,4))},ye=function(t){13===t.tag&&(Su(t,67108864,wu()),dl(t,67108864))},Ae=function(t){if(13===t.tag){var e=wu(),n=Eu(t);Su(t,n,e),dl(t,n)}},ve=function(t,e){return e()},Ut=function(t,e,n){switch(e){case"input":if(yt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yi(r);if(!i)throw Error(m(90));ft(r),yt(r,i)}}}break;case"textarea":wt(t,n);break;case"select":null!=(e=n.value)&&_t(t,!!n.multiple,e,!1)}},Xt=Mu,Zt=function(t,e,n,r,i){var o=Gs;Gs|=4;try{return ro(98,t.bind(null,e,n,r,i))}finally{0===(Gs=o)&&(iu(),oo())}},Yt=function(){0==(49&Gs)&&(function(){if(null!==gu){var t=gu;gu=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,ku(t,to())}))}oo()}(),Hu())},Qt=function(t,e){var n=Gs;Gs|=2;try{return t(e)}finally{0===(Gs=n)&&(iu(),oo())}};var ml={Events:[di,gi,yi,Wt,Ht,Hu,{current:!1}]},_l={findFiberByHostInstance:hi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},bl={bundleType:_l.bundleType,version:_l.version,rendererPackageName:_l.rendererPackageName,rendererConfig:_l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=he(t))?null:t.stateNode},findFiberByHostInstance:_l.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xl.isDisabled&&xl.supportsFiber)try{Ri=xl.inject(bl),Di=xl}catch(It){}}r=ml,i=vl,o=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(m(188));throw Error(m(268,Object.keys(t)))}return t=null===(t=he(e))?null:t.stateNode},s=function(t,e){var n=Gs;if(0!=(48&n))return t(e);Gs|=1;try{if(t)return ro(99,t.bind(null,e))}finally{Gs=n,oo()}},u=function(t,e,n){if(!yl(e))throw Error(m(200));return Al(null,t,e,!0,n)},l=function(t,e,n){if(!yl(e))throw Error(m(200));return Al(null,t,e,!1,n)},c=function(t){if(!yl(t))throw Error(m(40));return!!t._reactRootContainer&&(Ou((function(){Al(null,null,t,!1,(function(){t._reactRootContainer=null,t[fi]=null}))})),!0)},f=Mu,p=function(t,e){return vl(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},h=function(t,e,n,r){if(!yl(n))throw Error(m(200));if(null==t||void 0===t._reactInternals)throw Error(m(38));return Al(t,e,n,!1,r)},d="17.0.2"})),a.register("1c9zD",(function(t,e){"use strict";t.exports=a("lffg4")})),a.register("lffg4",(function(e,n){var r,i,o,a,s,u,l,c,f,p,h,d,g,y,A,v,m,_,b,x,w,E,S;if(t(e.exports,"unstable_now",(function(){return r}),(function(t){return r=t})),t(e.exports,"unstable_shouldYield",(function(){return i}),(function(t){return i=t})),t(e.exports,"unstable_forceFrameRate",(function(){return o}),(function(t){return o=t})),t(e.exports,"unstable_IdlePriority",(function(){return a}),(function(t){return a=t})),t(e.exports,"unstable_ImmediatePriority",(function(){return s}),(function(t){return s=t})),t(e.exports,"unstable_LowPriority",(function(){return u}),(function(t){return u=t})),t(e.exports,"unstable_NormalPriority",(function(){return l}),(function(t){return l=t})),t(e.exports,"unstable_Profiling",(function(){return c}),(function(t){return c=t})),t(e.exports,"unstable_UserBlockingPriority",(function(){return f}),(function(t){return f=t})),t(e.exports,"unstable_cancelCallback",(function(){return p}),(function(t){return p=t})),t(e.exports,"unstable_continueExecution",(function(){return h}),(function(t){return h=t})),t(e.exports,"unstable_getCurrentPriorityLevel",(function(){return d}),(function(t){return d=t})),t(e.exports,"unstable_getFirstCallbackNode",(function(){return g}),(function(t){return g=t})),t(e.exports,"unstable_next",(function(){return y}),(function(t){return y=t})),t(e.exports,"unstable_pauseExecution",(function(){return A}),(function(t){return A=t})),t(e.exports,"unstable_requestPaint",(function(){return v}),(function(t){return v=t})),t(e.exports,"unstable_runWithPriority",(function(){return m}),(function(t){return m=t})),t(e.exports,"unstable_scheduleCallback",(function(){return _}),(function(t){return _=t})),t(e.exports,"unstable_wrapCallback",(function(){return b}),(function(t){return b=t})),"object"==typeof performance&&"function"==typeof performance.now){var P=performance;r=function(){return P.now()}}else{var k=Date,C=k.now();r=function(){return k.now()-C}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var T=null,I=null,M=function(){if(null!==T)try{var t=r();T(!0,t),T=null}catch(t){throw setTimeout(M,0),t}};x=function(t){null!==T?setTimeout(x,0,t):(T=t,setTimeout(M,0))},w=function(t,e){I=setTimeout(t,e)},E=function(){clearTimeout(I)},i=function(){return!1},S=o=function(){}}else{var O=window.setTimeout,L=window.clearTimeout;if("undefined"!=typeof console){var R=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof R&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var D=!1,N=null,F=-1,j=5,z=0;i=function(){return r()>=z},S=function(){},o=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<t?Math.floor(1e3/t):5};var B=new MessageChannel,U=B.port2;B.port1.onmessage=function(){if(null!==N){var t=r();z=t+j;try{N(!0,t)?U.postMessage(null):(D=!1,N=null)}catch(t){throw U.postMessage(null),t}}else D=!1},x=function(t){N=t,D||(D=!0,U.postMessage(null))},w=function(t,e){F=O((function(){t(r())}),e)},E=function(){L(F),F=-1}}function V(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<W(i,e)))break t;t[r]=e,t[n]=i,n=r}}function G(t){return void 0===(t=t[0])?null:t}function q(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>W(a,n))void 0!==u&&0>W(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>W(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function W(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var H=[],X=[],Z=1,Y=null,Q=3,K=!1,J=!1,$=!1;function tt(t){for(var e=G(X);null!==e;){if(null===e.callback)q(X);else{if(!(e.startTime<=t))break;q(X),e.sortIndex=e.expirationTime,V(H,e)}e=G(X)}}function et(t){if($=!1,tt(t),!J)if(null!==G(H))J=!0,x(nt);else{var e=G(X);null!==e&&w(et,e.startTime-t)}}function nt(t,e){J=!1,$&&($=!1,E()),K=!0;var n=Q;try{for(tt(e),Y=G(H);null!==Y&&(!(Y.expirationTime>e)||t&&!i());){var o=Y.callback;if("function"==typeof o){Y.callback=null,Q=Y.priorityLevel;var a=o(Y.expirationTime<=e);e=r(),"function"==typeof a?Y.callback=a:Y===G(H)&&q(H),tt(e)}else q(H);Y=G(H)}if(null!==Y)var s=!0;else{var u=G(X);null!==u&&w(et,u.startTime-e),s=!1}return s}finally{Y=null,Q=n,K=!1}}a=5,s=1,u=4,l=3,c=null,f=2,p=function(t){t.callback=null},h=function(){J||K||(J=!0,x(nt))},d=function(){return Q},g=function(){return G(H)},y=function(t){switch(Q){case 1:case 2:case 3:var e=3;break;default:e=Q}var n=Q;Q=e;try{return t()}finally{Q=n}},A=function(){},v=S,m=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=Q;Q=t;try{return e()}finally{Q=n}},_=function(t,e,n){var i=r();switch("object"==typeof n&&null!==n?n="number"==typeof(n=n.delay)&&0<n?i+n:i:n=i,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:Z++,callback:e,priorityLevel:t,startTime:n,expirationTime:o=n+o,sortIndex:-1},n>i?(t.sortIndex=n,V(X,t),null===G(H)&&t===G(X)&&($?E():$=!0,w(et,n-i))):(t.sortIndex=o,V(H,t),J||K||(J=!0,x(nt))),t},b=function(t){var e=Q;return function(){var n=Q;Q=e;try{return t.apply(this,arguments)}finally{Q=n}}}})),a.register("4Z8U5",(function(t,e){var n=function(t){var e,n=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]},r=function(t,e,n,r){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),s=new h(r||[]);return a._invoke=c(t,n,s),a},i=function(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}},o=function(){},a=function(){},s=function(){},u=function(t){["next","throw","return"].forEach((function(e){n(t,e,(function(t){return this._invoke(e,t)}))}))},l=function(t,e){function n(r,o,a,s){var u=i(t[r],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&A.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var r;this._invoke=function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}},c=function(t,e,n){var r=x;return function(o,a){if(r===E)throw new Error("Generator is already running");if(r===S){if("throw"===o)throw a;return g()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=M(s,n);if(u){if(u===P)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===x)throw r=S,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=E;var l=i(t,e,n);if("normal"===l.type){if(r=n.done?S:w,l.arg===P)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=S,n.method="throw",n.arg=l.arg)}}},f=function(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)},p=function(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e},h=function(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)},d=function(t){if(t){var n=t[m];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(A.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:g}},g=function(){return{value:e,done:!0}},y=Object.prototype,A=y.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},m=v.iterator||"@@iterator",_=v.asyncIterator||"@@asyncIterator",b=v.toStringTag||"@@toStringTag";try{n({},"")}catch(t){n=function(t,e,n){return t[e]=n}}t.wrap=r;var x="suspendedStart",w="suspendedYield",E="executing",S="completed",P={},k={};n(k,m,(function(){return this}));var C=Object.getPrototypeOf,T=C&&C(C(d([])));T&&T!==y&&A.call(T,m)&&(k=T);var I=s.prototype=o.prototype=Object.create(k);function M(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method))return P;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var o=i(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,P;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,P):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P)}return a.prototype=s,n(I,"constructor",s),n(s,"constructor",a),a.displayName=n(s,b,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,n(t,b,"GeneratorFunction")),t.prototype=Object.create(I),t},t.awrap=function(t){return{__await:t}},u(l.prototype),n(l.prototype,_,(function(){return this})),t.AsyncIterator=l,t.async=function(e,n,i,o,a){void 0===a&&(a=Promise);var s=new l(r(e,n,i,o),a);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},u(I),n(I,b,"Generator"),n(I,m,(function(){return this})),n(I,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=d,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(p),!t)for(var n in this)"t"===n.charAt(0)&&A.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){var n=function(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i};if(this.done)throw t;for(var r=this,i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=A.call(o,"catchLoc"),u=A.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&A.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),P}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),P}},t}(t.exports);try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})),a.register("17QCl",(function(e,n){var r;t(e.exports,"getBundleURL",(function(){return r}),(function(t){return r=t}));var i={};function o(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(t){var e=i[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return o(t[2])}return"/"}(),i[t]=e),e}})),a.register("lrct3",(function(t,e){"use strict";var n=a("aGGuH");function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){var t=function(t,e,r,i,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}},e=function(){return t};t.isRequired=t;var o={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:r};return o.PropTypes=o,o}})),a.register("aGGuH",(function(t,e){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"})),a.register("2DOCw",(function(e,n){t(e.exports,"VERSION",(function(){return a("iALu4").VERSION})),t(e.exports,"self",(function(){return a("kY0vE").self})),t(e.exports,"window",(function(){return a("kY0vE").window})),t(e.exports,"global",(function(){return a("kY0vE").global})),t(e.exports,"document",(function(){return a("kY0vE").document})),t(e.exports,"process",(function(){return a("kY0vE").process})),t(e.exports,"console",(function(){return a("kY0vE").console})),t(e.exports,"isBrowser",(function(){return a("kjULg").default})),t(e.exports,"isBrowserMainThread",(function(){return a("kjULg").isBrowserMainThread})),t(e.exports,"getBrowser",(function(){return a("aNBzk").default})),t(e.exports,"isMobile",(function(){return a("aNBzk").isMobile})),t(e.exports,"isElectron",(function(){return a("fVQcG").default})),t(e.exports,"assert",(function(){return a("j0QYz").default}));a("iALu4"),a("kY0vE"),a("kjULg"),a("aNBzk"),a("fVQcG"),a("j0QYz")})),a.register("iALu4",(function(e,n){t(e.exports,"VERSION",(function(){return i}));var r=a("kjULg"),i="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";r.default()})),a.register("kjULg",(function(e,n){t(e.exports,"default",(function(){return o})),t(e.exports,"isBrowserMainThread",(function(){return s}));var r=a("fVQcG"),i=a("a8i8g");function o(){return!("object"==typeof i&&"[object process]"===String(i)&&!1)||r.default()}function s(){return o()&&"undefined"!=typeof document}})),a.register("fVQcG",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("a8i8g");function i(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==r&&"object"==typeof r.versions&&Boolean(r.versions.electron))return!0;var e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}})),a.register("a8i8g",(function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,f=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!c){var t=s(p);c=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}})),a.register("kY0vE",(function(n,r){t(n.exports,"global",(function(){return s})),t(n.exports,"self",(function(){return u})),t(n.exports,"window",(function(){return l})),t(n.exports,"document",(function(){return c})),t(n.exports,"process",(function(){return f})),t(n.exports,"console",(function(){return p}));var i=a("a8i8g"),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"==typeof i&&i},s=globalThis,u=o.self||o.window||o.global,l=o.window||o.self||o.global,c=o.document||{},f=o.process||{},p=console})),a.register("aNBzk",(function(e,n){t(e.exports,"isMobile",(function(){return s})),t(e.exports,"default",(function(){return u}));var r=a("kjULg"),i=a("fVQcG"),o=globalThis;function s(){return void 0!==o.orientation}function u(t){if(!t&&!r.default())return"Node";if(i.default(t))return"Electron";var e="undefined"!=typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var a=-1!==n.indexOf("MSIE "),s=-1!==n.indexOf("Trident/");return a||s?"IE":o.chrome?"Chrome":o.safari?"Safari":o.mozInnerScreenX?"Firefox":"Unknown"}})),a.register("j0QYz",(function(e,n){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t(e.exports,"default",(function(){return r}))})),a.register("aqbQf",(function(t,e){})),a.register("1Ft0x",(function(e,r){var i,o;n(e.exports),t(e.exports,"default",(function(){return it})),i=e.exports,o=s,Object.keys(o).forEach((function(t){"default"===t||"__esModule"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return o[t]}})}))}));var s={};n(s),t(s,"default",(function(){return it})),t(s,"WebMercatorViewport",(function(){return it})),t(s,"getBounds",(function(){return nt})),t(s,"fitBounds",(function(){return tt})),t(s,"normalizeViewportProps",(function(){return ot})),t(s,"flyToViewport",(function(){return lt})),t(s,"getFlyToDuration",(function(){return ct})),t(s,"MAX_LATITUDE",(function(){return z})),t(s,"lngLatToWorld",(function(){return V})),t(s,"worldToLngLat",(function(){return G})),t(s,"worldToPixels",(function(){return J})),t(s,"pixelsToWorld",(function(){return $})),t(s,"zoomToScale",(function(){return B})),t(s,"scaleToZoom",(function(){return U})),t(s,"altitudeToFovy",(function(){return Q})),t(s,"fovyToAltitude",(function(){return K})),t(s,"getMeterZoom",(function(){return q})),t(s,"getDistanceScales",(function(){return W})),t(s,"addMetersToLngLat",(function(){return H})),t(s,"getViewMatrix",(function(){return X})),t(s,"getProjectionMatrix",(function(){return Y})),t(s,"getProjectionParameters",(function(){return Z}));var u=a("ijozg"),l=a("pGAoq"),c=a("1zCSZ"),f=a("gj7DP"),p=1e-6,h="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var d,g;d=new h(4),h!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0),g=d;function y(t,e){var n=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}([],e,t);return function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(n,n,1/n[3]),n}function A(t,e){var n=t%e;return n<0?e+n:n}function v(t,e,n){return n*e+(1-n)*t}function m(t,e,n){return t<e?e:t>n?n:t}var _=Math.log2||function(t){return Math.log(t)*Math.LOG2E};c=a("1zCSZ");function b(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],g=e[12],y=e[13],A=e[14],v=e[15],m=n[0],_=n[1],b=n[2],x=n[3];return t[0]=m*r+_*s+b*f+x*g,t[1]=m*i+_*u+b*p+x*y,t[2]=m*o+_*l+b*h+x*A,t[3]=m*a+_*c+b*d+x*v,m=n[4],_=n[5],b=n[6],x=n[7],t[4]=m*r+_*s+b*f+x*g,t[5]=m*i+_*u+b*p+x*y,t[6]=m*o+_*l+b*h+x*A,t[7]=m*a+_*c+b*d+x*v,m=n[8],_=n[9],b=n[10],x=n[11],t[8]=m*r+_*s+b*f+x*g,t[9]=m*i+_*u+b*p+x*y,t[10]=m*o+_*l+b*h+x*A,t[11]=m*a+_*c+b*d+x*v,m=n[12],_=n[13],b=n[14],x=n[15],t[12]=m*r+_*s+b*f+x*g,t[13]=m*i+_*u+b*p+x*y,t[14]=m*o+_*l+b*h+x*A,t[15]=m*a+_*c+b*d+x*v,t}function x(t,e,n){var r,i,o,a,s,u,l,c,f,p,h,d,g=n[0],y=n[1],A=n[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*A+e[12],t[13]=e[1]*g+e[5]*y+e[9]*A+e[13],t[14]=e[2]*g+e[6]*y+e[10]*A+e[14],t[15]=e[3]*g+e[7]*y+e[11]*A+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=p,t[10]=h,t[11]=d,t[12]=r*g+s*y+f*A+e[12],t[13]=i*g+u*y+p*A+e[13],t[14]=o*g+l*y+h*A+e[14],t[15]=a*g+c*y+d*A+e[15]),t}function w(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function E(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],g=t[12],y=t[13],A=t[14],v=t[15],m=e[0],_=e[1],b=e[2],x=e[3],w=e[4],E=e[5],S=e[6],P=e[7],k=e[8],C=e[9],T=e[10],I=e[11],M=e[12],O=e[13],L=e[14],R=e[15];return Math.abs(n-m)<=p*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-_)<=p*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=p*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=p*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=p*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=p*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-S)<=p*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-P)<=p*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(c-k)<=p*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(f-C)<=p*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(h-T)<=p*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-I)<=p*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(g-M)<=p*Math.max(1,Math.abs(g),Math.abs(M))&&Math.abs(y-O)<=p*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(A-L)<=p*Math.max(1,Math.abs(A),Math.abs(L))&&Math.abs(v-R)<=p*Math.max(1,Math.abs(v),Math.abs(R))}function S(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function P(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function k(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function C(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}var T=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};!function(){var t=function(){var t=new h(2);return h!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function I(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}var M=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t};!function(){var t=function(){var t=new h(3);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();function O(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var L=Math.PI,R=L/4,D=L/180,N=180/L,F=512,j=4003e4,z=85.051129;function B(t){return Math.pow(2,t)}function U(t){return _(t)}function V(t){var e=c.default(t,2),n=e[0],r=e[1];O(Number.isFinite(n)),O(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var i=r*D;return[F*(n*D+L)/(2*L),F*(L+Math.log(Math.tan(R+.5*i)))/(2*L)]}function G(t){var e=c.default(t,2),n=e[0],r=e[1],i=n/F*(2*L)-L,o=2*(Math.atan(Math.exp(r/F*(2*L)-L))-R);return[i*N,o*N]}function q(t){var e=t.latitude;O(Number.isFinite(e));var n=Math.cos(e*D);return U(j*n)-9}function W(t){var e=t.latitude,n=t.longitude,r=t.highPrecision,i=void 0!==r&&r;O(Number.isFinite(e)&&Number.isFinite(n));var o={},a=Math.cos(e*D),s=512/360,u=s/a,l=12790407194604047e-21/a;if(o.unitsPerMeter=[l,l,l],o.metersPerUnit=[1/l,1/l,1/l],o.unitsPerDegree=[s,u,l],o.degreesPerUnit=[.703125,1/u,1/l],i){var c=D*Math.tan(e*D)/a,f=s*c/2,p=12790407194604047e-21*c,h=p/u*l;o.unitsPerDegree2=[0,f,p],o.unitsPerMeter2=[h,0,h]}return o}function H(t,e){var n=c.default(t,3),r=n[0],i=n[1],o=n[2],a=c.default(e,3),s=a[0],u=a[1],l=a[2],f=W({longitude:r,latitude:i,highPrecision:!0}),p=f.unitsPerMeter,h=f.unitsPerMeter2,d=V(t);d[0]+=s*(p[0]+h[0]*u),d[1]+=u*(p[1]+h[1]*u);var g=G(d),y=(o||0)+(l||0);return Number.isFinite(o)||Number.isFinite(l)?[g[0],g[1],y]:g}function X(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,o=t.scale,a=t.center,s=void 0===a?null:a,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return x(u,u,[0,0,-i]),function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],p=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=p*i-u*r}(u,u,-n*D),function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],p=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=p*i-u*r}(u,u,r*D),w(u,u,[o/=e,o,o]),s&&x(u,u,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),u}function Z(t){var e=t.width,n=t.height,r=t.fovy,i=void 0===r?Q(1.5):r,o=t.altitude,a=t.pitch,s=void 0===a?0:a,u=t.nearZMultiplier,l=void 0===u?1:u,c=t.farZMultiplier,f=void 0===c?1:c;void 0!==o&&(i=Q(o));var p=.5*i*D,h=K(i),d=s*D,g=Math.sin(p)*h/Math.sin(Math.min(Math.max(Math.PI/2-d-p,.01),Math.PI-.01));return{fov:2*p,aspect:e/n,focalDistance:h,near:l,far:(Math.sin(d)*g+h)*f}}function Y(t){var e=t.width,n=t.height,r=t.pitch,i=Z({width:e,height:n,altitude:t.altitude,fovy:t.fovy,pitch:r,nearZMultiplier:t.nearZMultiplier,farZMultiplier:t.farZMultiplier}),o=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}([],i.fov,i.aspect,i.near,i.far);return o}function Q(t){return 2*Math.atan(.5/t)*N}function K(t){return.5/Math.tan(.5*t*D)}function J(t,e){var n=c.default(t,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return O(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(a)),y(e,[r,i,a,1])}function $(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=c.default(t,3),i=r[0],o=r[1],a=r[2];if(O(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a)){var s=y(e,[i,o,a,1]);return s}var u=y(e,[i,o,0,1]),l=y(e,[i,o,1,1]),f=u[2],p=l[2],h=f===p?0:((n||0)-f)/(p-f);return C([],u,l,h)}c=a("1zCSZ");function tt(t){var e=t.width,n=t.height,r=t.bounds,i=t.minExtent,o=void 0===i?0:i,a=t.maxZoom,s=void 0===a?24:a,u=t.padding,l=void 0===u?0:u,f=t.offset,p=void 0===f?[0,0]:f,h=c.default(r,2),d=c.default(h[0],2),g=d[0],y=d[1],A=c.default(h[1],2),v=A[0],b=A[1];if(Number.isFinite(l)){l={top:l,bottom:l,left:l,right:l}}else O(Number.isFinite(l.top)&&Number.isFinite(l.bottom)&&Number.isFinite(l.left)&&Number.isFinite(l.right));var x=V([g,m(b,-z,z)]),w=V([v,m(y,-z,z)]),E=[Math.max(Math.abs(w[0]-x[0]),o),Math.max(Math.abs(w[1]-x[1]),o)],S=[e-l.left-l.right-2*Math.abs(p[0]),n-l.top-l.bottom-2*Math.abs(p[1])];O(S[0]>0&&S[1]>0);var P=S[0]/E[0],k=S[1]/E[1],C=(l.right-l.left)/2/P,T=(l.bottom-l.top)/2/k,I=G([(w[0]+x[0])/2+C,(w[1]+x[1])/2+T]),M=Math.min(s,_(Math.abs(Math.min(P,k))));return O(Number.isFinite(M)),{longitude:I[0],latitude:I[1],zoom:M}}var et=Math.PI/180;function nt(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.width,o=t.height,a=t.unproject,s={targetZ:r},u=a([0,o],s),l=a([i,o],s),c=t.fovy?.5*t.fovy*et:Math.atan(.5/t.altitude),f=(90-t.pitch)*et;return c>f-.01?(e=rt(t,0,r),n=rt(t,i,r)):(e=a([0,0],s),n=a([i,0],s)),[u,l,n,e]}function rt(t,e,n){var r=t.pixelUnprojectionMatrix,i=y(r,[e,0,1,1]),o=y(r,[e,t.height,1,1]),a=G(C([],i,o,(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return a[2]=n,a}var it=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},n=e.width,r=e.height,i=e.latitude,o=void 0===i?0:i,a=e.longitude,s=void 0===a?0:a,l=e.zoom,c=void 0===l?0:l,f=e.pitch,p=void 0===f?0:f,h=e.bearing,d=void 0===h?0:h,g=e.altitude,y=void 0===g?null:g,A=e.fovy,v=void 0===A?null:A,m=e.position,_=void 0===m?null:m,b=e.nearZMultiplier,x=void 0===b?.02:b,w=e.farZMultiplier,E=void 0===w?1.01:w;u.default(this,t),n=n||1,r=r||1,null===v&&null===y?v=Q(y=1.5):null===v?v=Q(y):null===y&&(y=K(v));var S=B(c);y=Math.max(.75,y);var P=W({longitude:s,latitude:o}),k=V([s,o]);k[2]=0,_&&I(k,k,M([],_,P.unitsPerMeter)),this.projectionMatrix=Y({width:n,height:r,pitch:p,fovy:v,nearZMultiplier:x,farZMultiplier:E}),this.viewMatrix=X({height:r,scale:S,center:k,pitch:p,bearing:d,altitude:y}),this.width=n,this.height=r,this.scale=S,this.latitude=o,this.longitude=s,this.zoom=c,this.pitch=p,this.bearing=d,this.altitude=y,this.fovy=v,this.center=k,this.meterOffset=_||[0,0,0],this.distanceScales=P,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}return l.default(t,[{key:"_initMatrices",value:function(){var t=this,e=t.width,n=t.height,r=t.projectionMatrix,i=t.viewMatrix,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b(o,o,r),b(o,o,i),this.viewProjectionMatrix=o;var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];w(a,a,[e/2,-n/2,1]),x(a,a,[1,-1,0]),b(a,a,o);var s=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],p=e[10],h=e[11],d=e[12],g=e[13],y=e[14],A=e[15],v=n*s-r*a,m=n*u-i*a,_=n*l-o*a,b=r*u-i*s,x=r*l-o*s,w=i*l-o*u,E=c*g-f*d,S=c*y-p*d,P=c*A-h*d,k=f*y-p*g,C=f*A-h*g,T=p*A-h*y,I=v*T-m*C+_*k+b*P-x*S+w*E;return I?(I=1/I,t[0]=(s*T-u*C+l*k)*I,t[1]=(i*C-r*T-o*k)*I,t[2]=(g*w-y*x+A*b)*I,t[3]=(p*x-f*w-h*b)*I,t[4]=(u*P-a*T-l*S)*I,t[5]=(n*T-i*P+o*S)*I,t[6]=(y*_-d*w-A*m)*I,t[7]=(c*w-p*_+h*m)*I,t[8]=(a*C-s*P+l*E)*I,t[9]=(r*P-n*C-o*E)*I,t[10]=(d*x-g*_+A*v)*I,t[11]=(f*_-c*x-h*v)*I,t[12]=(s*S-a*k-u*E)*I,t[13]=(n*k-r*S+i*E)*I,t[14]=(g*m-d*b-y*v)*I,t[15]=(c*b-f*m+p*v)*I,t):null}([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a);if(!s)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=a,this.pixelUnprojectionMatrix=s}},{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&E(e.projectionMatrix,this.projectionMatrix)&&E(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=this.projectPosition(t),o=J(i,this.pixelProjectionMatrix),a=c.default(o,2),s=a[0],u=a[1],l=r?u:this.height-u;return 2===t.length?[s,l]:[s,l,o[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=c.default(t,3),a=o[0],s=o[1],u=o[2],l=r?s:this.height-s,f=i&&i*this.distanceScales.unitsPerMeter[2],p=$([a,l,u],this.pixelUnprojectionMatrix,f),h=c.default(this.unprojectPosition(p),3),d=h[0],g=h[1],y=h[2];return Number.isFinite(u)?[d,g,y]:Number.isFinite(i)?[d,g,i]:[d,g]}},{key:"projectPosition",value:function(t){var e=c.default(V(t),2);return[e[0],e[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=c.default(G(t),2);return[e[0],e[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return V(t)}},{key:"unprojectFlat",value:function(t){return G(t)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=$(t.pos,this.pixelUnprojectionMatrix),r=S([],V(e),function(t,e){return t[0]=-e[0],t[1]=-e[1],t}([],n));return G(S([],this.center,r))}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,i=r.width,o=r.height,a=tt(Object.assign({width:i,height:o,bounds:e},n)),s=a.longitude,u=a.latitude,l=a.zoom;return new t({width:i,height:o,longitude:s,latitude:u,zoom:l})}},{key:"getBounds",value:function(t){var e,n,r,i,o=this.getBoundingRegion(t),a=(e=Math).min.apply(e,f.default(o.map((function(t){return t[0]})))),s=(n=Math).max.apply(n,f.default(o.map((function(t){return t[0]}))));return[[a,(r=Math).min.apply(r,f.default(o.map((function(t){return t[1]}))))],[s,(i=Math).max.apply(i,f.default(o.map((function(t){return t[1]}))))]]}},{key:"getBoundingRegion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nt(this,t.z||0)}}]),t}();function ot(t){var e=t.width,n=t.height,r=t.longitude,i=t.latitude,o=t.zoom,a=t.pitch,s=void 0===a?0:a,u=t.bearing,l=void 0===u?0:u;(r<-180||r>180)&&(r=A(r+180,360)-180),(l<-180||l>180)&&(l=A(l+180,360)-180);var c=_(n/512);if(o<=c)o=c,i=0;else{var f=n/2/Math.pow(2,o),p=G([0,f])[1];if(i<p)i=p;else{var h=G([0,512-f])[1];i>h&&(i=h)}}return{width:e,height:n,longitude:r,latitude:i,zoom:o,pitch:s,bearing:l}}var at=.01,st=["longitude","latitude","zoom"],ut={curve:1.414,speed:1.2};function lt(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={},o=ft(t,e,r),a=o.startZoom,s=o.startCenterXY,u=o.uDelta,l=o.w0,c=o.u1,f=o.S,p=o.rho,h=o.rho2,d=o.r0;if(c<at){var g=!0,y=!1,A=void 0;try{for(var m,_=st[Symbol.iterator]();!(g=(m=_.next()).done);g=!0){var b=m.value,x=t[b],w=e[b];i[b]=v(x,w,n)}}catch(t){y=!0,A=t}finally{try{g||null==_.return||_.return()}finally{if(y)throw A}}return i}var E=n*f,k=Math.cosh(d)/Math.cosh(d+p*E),C=l*((Math.cosh(d)*Math.tanh(d+p*E)-Math.sinh(d))/h)/c,T=1/k,I=a+U(T),M=P([],u,C);S(M,M,s);var O=G(M);return i.longitude=O[0],i.latitude=O[1],i.zoom=I,i}function ct(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(r=Object.assign({},ut,r)).screenSpeed,o=r.speed,a=r.maxDuration,s=ft(t,e,r),u=s.S,l=s.rho,c=1e3*u;return n=Number.isFinite(i)?c/(i/l):c/o,Number.isFinite(a)&&n>a?0:n}function ft(t,e,n){var r=(n=Object.assign({},ut,n)).curve,i=t.zoom,o=[t.longitude,t.latitude],a=B(i),s=e.zoom,u=[e.longitude,e.latitude],l=B(s-i),c=V(o),f=V(u),p=T([],f,c),h=Math.max(t.width,t.height),d=h/l,g=k(p)*a,y=Math.max(g,at),A=r*r,v=(d*d-h*h+A*A*y*y)/(2*h*A*y),m=(d*d-h*h-A*A*y*y)/(2*d*A*y),_=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(m*m+1)-m);return{startZoom:i,startCenterXY:c,uDelta:p,w0:h,u1:g,S:(b-_)/r,rho:r,rho2:A,r0:_,r1:b}}a.register("OxgNg",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=t.exports.SELECTION_TYPE=void 0;var n=a("eoCq7"),r=l(a("13MRZ")),i=l(a("aMWv9")),o=l(a("61ZcP")),s=l(a("jlhKK")),u=l(a("h91qW"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=[0,255,0,255],v=[255,255,255,90],m=[20,20],_="DeckDrawerPick",b={NONE:null,RECTANGLE:"rectangle",POLYGON:"polygon"};t.exports.SELECTION_TYPE=b;var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"nebula",void 0),y(this,"usePolygon",void 0),y(this,"validPolygon",void 0),y(this,"landPoints",void 0),y(this,"mousePoints",void 0),this.nebula=e,this.usePolygon=!1,this.landPoints=[],this.mousePoints=[]}var e,a,l;return e=t,a=[{key:"_getLayerIds",value:function(){return this.nebula.deckgl.props.layers.filter((function(t){return t&&t.props&&t.props.nebulaLayer&&t.props.nebulaLayer.enableSelection})).map((function(t){return t.id}))}},{key:"_selectFromPickingInfos",value:function(t){var e=t.map((function(t){var e=t.layer,n=t.index;return t.object.original||e.props.nebulaLayer.deckCache.originals[n]}));this.nebula.props.onSelection(e)}},{key:"_getBoundingBox",value:function(){var t=this.mousePoints,e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),r=Math.min.apply(Math,p(e)),i=Math.min.apply(Math,p(n));return{x:r,y:i,width:Math.max.apply(Math,p(e))-r,height:Math.max.apply(Math,p(n))-i}}},{key:"_selectRectangleObjects",value:function(){if(2===this.landPoints.length){var t=f(this.mousePoints[0],2),e=t[0],n=t[1],r=f(this.mousePoints[1],2),i=r[0],o=r[1],a=this.nebula.deckgl.pickObjects({x:Math.min(e,i),y:Math.min(n,o),width:Math.abs(i-e),height:Math.abs(o-n),layerIds:this._getLayerIds()});this._selectFromPickingInfos(a)}}},{key:"_selectPolygonObjects",value:function(){var t=this.nebula.deckgl.pickObjects(function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?c(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({},this._getBoundingBox(),{layerIds:[_].concat(p(this._getLayerIds()))}));this._selectFromPickingInfos(t.filter((function(t){return t.layer.id!==_})))}},{key:"_getMousePosFromEvent",value:function(t){return[t.offsetX,t.offsetY]}},{key:"handleEvent",value:function(t,e,n){"mouseup"!==t.type&&t.stopPropagation(),this.usePolygon=n===b.POLYGON;var r=!1,i=!1,o=this.usePolygon,a=this.landPoints,s=this.mousePoints;if("mousedown"===t.type){if(o&&a.length)(this.landPoints.length<3||this.validPolygon)&&(a.push(e),s.push(this._getMousePosFromEvent(t)));else{this.landPoints=[e,e];var l=this._getMousePosFromEvent(t);this.mousePoints=[l,l]}r=!0}else"mousemove"===t.type&&a.length?(a[a.length-1]=e,s[s.length-1]=this._getMousePosFromEvent(t),r=!0):"mouseup"===t.type&&(o?a.length>4&&(0,u.default)(a[0],a[a.length-1])<.01&&this.validPolygon&&(this._selectPolygonObjects(),this.reset(),r=!0,i=!0):(this._selectRectangleObjects(),this.reset(),r=!0,i=!0));return{redraw:r,deactivate:i}}},{key:"reset",value:function(){this.landPoints=[],this.mousePoints=[]}},{key:"_makeStartPointHighlight",value:function(t){var e=(0,o.default)((0,n.point)(t),.0025);return(0,i.default)((0,r.default)(e)).geometry.coordinates}},{key:"render",value:function(){var t=this,e=[],r=[];if(this.usePolygon||2!==this.landPoints.length){if(this.usePolygon&&this.landPoints.length&&(e.push({polygon:this.landPoints,lineColor:A,fillColor:v}),this.landPoints.length>=3)){var i,a=(0,n.polygon)([[].concat(p(this.landPoints),[this.landPoints[0]])]),u=(0,o.default)((0,n.point)(this.landPoints[0]),10);try{i=(0,s.default)(u,a),r.push({polygon:i.geometry.coordinates,fillColor:[0,0,0,1]}),this.validPolygon=!0}catch(t){this.validPolygon=!1}}}else{var l=f(this.mousePoints,2),c=f(l[0],2),h=c[0],d=c[1],g=f(l[1],2),y=g[0],b=g[1],x=[[h,d],[h,b],[y,b],[y,d],[h,d]].map((function(e){return t.nebula.unprojectMousePosition(e)}));e.push({polygon:x,lineColor:A,fillColor:v})}return this.landPoints.length&&e.push({polygon:this._makeStartPointHighlight(this.landPoints[0]),lineColor:[0,0,0,0],fillColor:A}),e.push({polygon:[[0,0]]}),r.push({polygon:[[0,0]]}),[new MA({id:"DeckDrawerView",data:e,fp64:!1,opacity:1,pickable:!1,lineWidthMinPixels:2,lineWidthMaxPixels:2,lineDashJustified:!0,getLineDashArray:function(t){return m},getLineColor:function(t){return t.lineColor||[0,0,0,255]},getFillColor:function(t){return t.fillColor||[0,0,0,255]},getPolygon:function(t){return t.polygon}}),new MA({id:_,data:r,getLineColor:function(t){return t.lineColor||[0,0,0,255]},getFillColor:function(t){return t.fillColor||[0,0,0,255]},fp64:!1,opacity:1,stroked:!1,pickable:!0,getPolygon:function(t){return t.polygon}})]}}],a&&g(e.prototype,a),l&&g(e,l),t}();t.exports.default=x}));var pt=a("hE9gS"),ht=a("1joaW"),dt=(u=a("ijozg"),l=a("pGAoq"),a("fj4bz")),gt=a("8YVeo"),yt=a("11zLF"),At=(u=a("ijozg"),l=a("pGAoq"),a("e2Lau")),vt=(f=a("gj7DP"),a("5qgrd"));function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}a("2DOCw");var _t=a("kjULg"),bt=a("iALu4");u=a("ijozg"),l=a("pGAoq");function xt(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}var wt=function(){"use strict";function t(e){u.default(this,t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";mt(this,"storage",void 0),mt(this,"id",void 0),mt(this,"config",{}),this.storage=xt(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return l.default(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}();function Et(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));var o=t.width*n,a=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}a("2DOCw");var St;_t=a("kjULg");function Pt(t){return"string"==typeof t?St[t.toUpperCase()]||St.WHITE:t}function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=!0,o=!1,a=void 0;try{for(var s,u=function(n,r){var i=r.value;"function"==typeof t[i]&&(e.find((function(t){return i===t}))||(t[i]=t[i].bind(t)))},l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u(l,s)}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}function Ct(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(St||(St={})),a("2DOCw");_t=a("kjULg");var Tt=a("kY0vE");function It(){var t,e,n;if(_t.default&&"performance"in Tt.window)t=null===Tt.window||void 0===Tt.window||null===(e=Tt.window.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Tt.process){var r,i=null===Tt.process||void 0===Tt.process||null===(r=Tt.process.hrtime)||void 0===r?void 0:r.call(Tt.process);t=1e3*i[0]+i[1]/1e6}else t=Date.now();return t}var Mt={debug:_t.default&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Ot={enabled:!0,level:0};function Lt(){}var Rt={},Dt={once:!0},Nt=function(){"use strict";function t(){u.default(this,t);var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""}).id;mt(this,"id",void 0),mt(this,"VERSION",bt.VERSION),mt(this,"_startTs",It()),mt(this,"_deltaTs",It()),mt(this,"_storage",void 0),mt(this,"userData",{}),mt(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new wt("__probe-".concat(this.id,"__"),Ot),this.userData={},this.timeStamp("".concat(this.id," started")),kt(this),Object.seal(this)}return l.default(t,[{key:"level",get:function(){return this.getLevel()},set:function(t){this.setLevel(t)}},{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((It()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((It()-this._deltaTs).toPrecision(10))}},{key:"priority",get:function(){return this.level},set:function(t){this.level=t}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({level:t}),this}},{key:"get",value:function(t){return this._storage.config[t]}},{key:"set",value:function(t,e){this._storage.updateConfiguration(At.default({},t,e))}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"assert",value:function(t,e){Ct(t,e)}},{key:"warn",value:function(t){return this._getLogFunction(0,t,Mt.warn,arguments,Dt)}},{key:"error",value:function(t){return this._getLogFunction(0,t,Mt.error,arguments)}},{key:"deprecated",value:function(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}},{key:"removed",value:function(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}},{key:"probe",value:function(t,e){return this._getLogFunction(t,e,Mt.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(t,e){return this._getLogFunction(t,e,Mt.debug,arguments)}},{key:"info",value:function(t,e){return this._getLogFunction(t,e,console.info,arguments)}},{key:"once",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,Mt.debug||Mt.info,arguments,Dt)}},{key:"table",value:function(t,e,n){return e?this._getLogFunction(t,e,console.table||Lt,n&&[n],{tag:zt(e)}):Lt}},{key:"image",value:function(t){var e=t.logLevel,n=t.priority,r=t.image,i=t.message,o=void 0===i?"":i,s=t.scale,u=void 0===s?1:s;return this._shouldLog(e||n)?_t.default?function(t){var e=t.image,n=t.message,r=void 0===n?"":n,i=t.scale,o=void 0===i?1:i;if("string"==typeof e){var a=new Image;return a.onload=function(){var t,e=Et(a,r,o);(t=console).log.apply(t,f.default(e))},a.src=e,Lt}var s=e.nodeName||"";if("img"===s.toLowerCase()){var u;return(u=console).log.apply(u,f.default(Et(e,r,o))),Lt}if("canvas"===s.toLowerCase()){var l,c=new Image;return c.onload=function(){return(l=console).log.apply(l,f.default(Et(c,r,o)))},c.src=e.toDataURL(),Lt}return Lt}({image:r,message:o,scale:u}):function(t){var e=t.image,n=(t.message,t.scale),r=void 0===n?1:n,i=null;try{i=a("aqbQf")}catch(t){}return i?function(){return i(e,{fit:"box",width:"".concat(Math.round(80*r),"%")}).then((function(t){return console.log(t)}))}:Lt}({image:r,message:o,scale:u}):Lt}},{key:"time",value:function(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}},{key:"timeEnd",value:function(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(t,e){return this._getLogFunction(t,e,console.timeStamp||Lt)}},{key:"group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=jt({logLevel:t,message:e,opts:n}),i=n.collapsed;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}},{key:"groupCollapsed",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction(t,"",console.groupEnd||Lt)}},{key:"withGroup",value:function(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return this.isEnabled()&&this.getLevel()>=Ft(t)}},{key:"_getLogFunction",value:function(t,e,n,r,i){if(this._shouldLog(t)){var o;i=jt({logLevel:t,message:e,args:r,opts:i}),Ct(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=It();var a=i.tag||i.message;if(i.once){if(Rt[a])return Lt;Rt[a]=It()}return e=function(t,e,n){if("string"==typeof e){var r=n.time?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}((s=n.total)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s")):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),i=e,o=n.color,a=n.background,_t.default||"string"!=typeof i||(o&&(o=Pt(o),i="[".concat(o,"m").concat(i,"[39m")),a&&(o=Pt(a),i="[".concat(a+10,"m").concat(i,"[49m"))),e=i}var i,o,a;var s;return e}(this.id,i.message,i),(o=n).bind.apply(o,[console,e].concat(f.default(i.args)))}return Lt}}]),t}();function Ft(t){if(!t)return 0;var e;switch(void 0===t?"undefined":vt.default(t)){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Ct(Number.isFinite(e)&&e>=0),e}function jt(t){var e=t.logLevel,n=t.message;t.logLevel=Ft(e);for(var r=t.args?Array.from(t.args):[];r.length&&r.shift()!==n;);switch(void 0===e?"undefined":vt.default(e)){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());var i=vt.default(t.message);return Ct("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function zt(t){for(var e in t)for(var n in t[e])return n||"untitled";return"empty"}mt(Nt,"VERSION",bt.VERSION);new Nt({id:"@probe.gl/log"}),u=a("ijozg"),l=a("pGAoq"),u=a("ijozg"),l=a("pGAoq");var Bt=a("a8i8g");function Ut(){var t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==Bt&&Bt.hrtime){var e=Bt.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}var Vt=function(){"use strict";function t(e,n){u.default(this,t),mt(this,"name",void 0),mt(this,"type",void 0),mt(this,"sampleSize",1),mt(this,"time",void 0),mt(this,"count",void 0),mt(this,"samples",void 0),mt(this,"lastTiming",void 0),mt(this,"lastSampleTime",void 0),mt(this,"lastSampleCount",void 0),mt(this,"_count",0),mt(this,"_time",0),mt(this,"_samples",0),mt(this,"_startTime",0),mt(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}return l.default(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Ut(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Ut()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),Gt=function(){"use strict";function t(e){u.default(this,t),mt(this,"id",void 0),mt(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}return l.default(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:"_initializeStats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(this.stats[e]=t instanceof Vt?t:new Vt(e,n)),this.stats[e]}}]),t}(),qt=new Nt({id:"luma.gl"});function Wt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}var Ht="Invalid WebGLRenderingContext";function Xt(t){return"undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function Zt(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function Yt(t){return Wt(Xt(t),Ht),t}function Qt(t){return Wt(Zt(t),"Requires WebGL2"),t}f=a("gj7DP");var Kt={};Kt=a("2DOCw");var Jt={};function $t(t,e){var n;Jt[t]=!0,void 0!==e&&(n=e,Kt.global.console&&Kt.global.console.error&&Kt.global.console.error(n))}var te=function t(e){var n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(var r=0;r<this.attribs.length;r++){var i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};(te.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var ee=function(t){var e=this;this.gl=t,function(t){var e=t.getError;t.getError=function(){var n;do{0!==(n=e.apply(t))&&(Jt[n]=!0)}while(0!==n);for(n in Jt)if(Jt[n])return delete Jt[n],parseInt(n,10);return 0}}(t);var n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){var i=e.currentVertexArrayObject,o=i.attribs[t];switch(r){case 34975:return o.buffer;case 34338:return o.enabled;case 34339:return o.size;case 34340:return o.stride;case 34341:return o.type;case 34922:return o.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,a,s){var u=e.currentVertexArrayObject;u.maxAttrib=Math.max(u.maxAttrib,t);var l=u.attribs[t];return l.buffer=e.currentArrayBuffer,l.size=r,l.type=i,l.normalized=o,l.stride=a,l.offset=s,l.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(function(){var t;t="OESVertexArrayObject emulation library context restored",Kt.global.console&&Kt.global.console.log&&Kt.global.console.log(t),e.reset_()}),!0),this.reset_()};ee.prototype.VERTEX_ARRAY_BINDING_OES=34229,ee.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var e=this.gl;this.maxVertexAttribs=e.getParameter(34921),this.defaultVertexArrayObject=new te(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},ee.prototype.createVertexArrayOES=function(){var t=new te(this);return this.vertexArrayObjects.push(t),t},ee.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},ee.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof te&&t.hasBeenBound&&t.ext===this)},ee.prototype.bindVertexArrayOES=function(t){var e=this.gl;if(!t||t.isAlive){var n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(r!==i){r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);for(var o=this.currentArrayBuffer,a=Math.max(r?r.maxAttrib:0,i.maxAttrib),s=0;s<=a;s++){var u=i.attribs[s],l=r?r.attribs[s]:null;if(r&&u.enabled===l.enabled||(u.enabled?n.enableVertexAttribArray.call(e,s):n.disableVertexAttribArray.call(e,s)),u.enabled){var c=!1;r&&u.buffer===l.buffer||(o!==u.buffer&&(n.bindBuffer.call(e,34962,u.buffer),o=u.buffer),c=!0),(c||u.cached!==l.cached)&&n.vertexAttribPointer.call(e,s,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)}}else $t(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")};At=a("e2Lau"),At=a("e2Lau");var ne="OES_element_index",re="WEBGL_draw_buffers",ie="WEBGL_debug_renderer_info",oe=function(t){return Zt(t)?void 0:0},ae=(Eg={},At.default(Eg,3074,(function(t){return Zt(t)?void 0:36064})),At.default(Eg,35723,(function(t){return Zt(t)?void 0:4352})),At.default(Eg,35977,oe),At.default(Eg,32937,oe),At.default(Eg,36795,(function(t,e){var n=Zt(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0})),At.default(Eg,37445,(function(t,e){var n=t.getExtension(ie);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),At.default(Eg,37446,(function(t,e){var n=t.getExtension(ie);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),At.default(Eg,34047,(function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),At.default(Eg,32883,oe),At.default(Eg,35071,oe),At.default(Eg,37447,oe),At.default(Eg,36063,(function(t,e){if(!Zt(t)){var n=t.getExtension(re);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),At.default(Eg,35379,oe),At.default(Eg,35374,oe),At.default(Eg,35377,oe),At.default(Eg,34852,(function(t){if(!Zt(t)){var e=t.getExtension(re);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}})),At.default(Eg,36203,(function(t){return t.getExtension(ne)?2147483647:65535})),At.default(Eg,33001,(function(t){return t.getExtension(ne)?16777216:65535})),At.default(Eg,33e3,(function(t){return 16777216})),At.default(Eg,37157,oe),At.default(Eg,35373,oe),At.default(Eg,35657,oe),At.default(Eg,36183,oe),At.default(Eg,37137,oe),At.default(Eg,34045,oe),At.default(Eg,35978,oe),At.default(Eg,35979,oe),At.default(Eg,35968,oe),At.default(Eg,35376,oe),At.default(Eg,35375,oe),At.default(Eg,35659,oe),At.default(Eg,37154,oe),At.default(Eg,35371,oe),At.default(Eg,35658,oe),At.default(Eg,35076,oe),At.default(Eg,35077,oe),At.default(Eg,35380,oe),Eg);var se="ANGLE_instanced_arrays";var ue=(Eg={},At.default(Eg,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Wt(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),At.default(Eg,se,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(t,e){Wt(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),At.default(Eg,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Wt(!1)}}),At.default(Eg,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Wt(!1)},deleteQuery:function(){Wt(!1)},beginQuery:function(){Wt(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},getQueryObject:function(){}}),Eg),le={readBuffer:function(t,e,n){Zt(t)&&e(n)},getVertexAttrib:function(t,e,n,r){var i,o=function(t,e){return{webgl2:Zt(t),ext:t.getExtension(e)}}(t,se),a=o.webgl2,s=o.ext;switch(r){case 35069:i=!!a&&void 0;break;case 35070:i=a||s?void 0:0}return void 0!==i?i:e(n,r)},getProgramParameter:function(t,e,n,r){if(!Zt(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,i){return Zt(t)||32937!==i?t.getInternalformatParameter(n,r,i):new Int32Array([0])},getTexParameter:function(t,e,n,r){if(34046===r){var i=t.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){var r=ae[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:function(t,e,n,r){return e(n,r)}};function ce(t,e){var n=e.extension,r=e.target,i=e.target2,o=ue[n];Wt(o);var a=o.meta,s=(void 0===a?{}:a).suffix,u=void 0===s?"":s,l=t.getExtension(n),c=!0,p=!1,h=void 0;try{for(var d,g=function(e,n){var a,s=n.value,c="".concat(s).concat(u),p=null;"meta"===s||"function"==typeof t[s]||(l&&"function"==typeof l[c]?p=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(a=l)[c].apply(a,f.default(e))}:"function"==typeof o[s]&&(p=o[s].bind(r))),p&&(r[s]=p,i[s]=p)},y=Object.keys(o)[Symbol.iterator]();!(c=(d=y.next()).done);c=!0)g(0,d)}catch(t){p=!0,h=t}finally{try{c||null==y.return||y.return()}finally{if(p)throw h}}}(void 0!==e?e:window).polyfillContext=function(t){t.luma=t.luma||{};var e=t.luma;return e.polyfilled||(!function(t){if("function"!=typeof t.createVertexArray){var e=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new ee(this)),this.__OESVertexArrayObject))}}}(t),function(t){t.luma.extensions={};var e=t.getSupportedExtensions()||[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.luma[s]=t.getExtension(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}(t),function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;"overrides"!==s&&ce(t,{extension:s,target:t.luma,target2:t})}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}(t,ue),function(t,e){var n=e.target,r=e.target2;Object.keys(le).forEach((function(e){if("function"==typeof le[e]){var i=t[e]?t[e].bind(t):function(){},o=le[e].bind(null,t,i);n[e]=o,r[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};At=a("e2Lau"),f=a("gj7DP"),c=a("1zCSZ");var fe,pe,he,de,ge,ye,Ae,ve,me,_e,be,xe,we,Ee,Se=(Eg={},At.default(Eg,3042,!1),At.default(Eg,32773,new Float32Array([0,0,0,0])),At.default(Eg,32777,32774),At.default(Eg,34877,32774),At.default(Eg,32969,1),At.default(Eg,32968,0),At.default(Eg,32971,1),At.default(Eg,32970,0),At.default(Eg,3106,new Float32Array([0,0,0,0])),At.default(Eg,3107,[!0,!0,!0,!0]),At.default(Eg,2884,!1),At.default(Eg,2885,1029),At.default(Eg,2929,!1),At.default(Eg,2931,1),At.default(Eg,2932,513),At.default(Eg,2928,new Float32Array([0,1])),At.default(Eg,2930,!0),At.default(Eg,3024,!0),At.default(Eg,36006,null),At.default(Eg,2886,2305),At.default(Eg,33170,4352),At.default(Eg,2849,1),At.default(Eg,32823,!1),At.default(Eg,32824,0),At.default(Eg,10752,0),At.default(Eg,32938,1),At.default(Eg,32939,!1),At.default(Eg,3089,!1),At.default(Eg,3088,new Int32Array([0,0,1024,1024])),At.default(Eg,2960,!1),At.default(Eg,2961,0),At.default(Eg,2968,4294967295),At.default(Eg,36005,4294967295),At.default(Eg,2962,519),At.default(Eg,2967,0),At.default(Eg,2963,4294967295),At.default(Eg,34816,519),At.default(Eg,36003,0),At.default(Eg,36004,4294967295),At.default(Eg,2964,7680),At.default(Eg,2965,7680),At.default(Eg,2966,7680),At.default(Eg,34817,7680),At.default(Eg,34818,7680),At.default(Eg,34819,7680),At.default(Eg,2978,[0,0,1024,1024]),At.default(Eg,3333,4),At.default(Eg,3317,4),At.default(Eg,37440,!1),At.default(Eg,37441,!1),At.default(Eg,37443,37444),At.default(Eg,35723,4352),At.default(Eg,36010,null),At.default(Eg,35977,!1),At.default(Eg,3330,0),At.default(Eg,3332,0),At.default(Eg,3331,0),At.default(Eg,3314,0),At.default(Eg,32878,0),At.default(Eg,3316,0),At.default(Eg,3315,0),At.default(Eg,32877,0),Eg),Pe=function(t,e,n){return e?t.enable(n):t.disable(n)},ke=function(t,e,n){return t.hint(n,e)},Ce=function(t,e,n){return t.pixelStorei(n,e)};function Te(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var Ie=(Tn={},At.default(Tn,3042,Pe),At.default(Tn,32773,(function(t,e){return(fe=t).blendColor.apply(fe,f.default(e))})),At.default(Tn,32777,"blendEquation"),At.default(Tn,34877,"blendEquation"),At.default(Tn,32969,"blendFunc"),At.default(Tn,32968,"blendFunc"),At.default(Tn,32971,"blendFunc"),At.default(Tn,32970,"blendFunc"),At.default(Tn,3106,(function(t,e){return(pe=t).clearColor.apply(pe,f.default(e))})),At.default(Tn,3107,(function(t,e){return(he=t).colorMask.apply(he,f.default(e))})),At.default(Tn,2884,Pe),At.default(Tn,2885,(function(t,e){return t.cullFace(e)})),At.default(Tn,2929,Pe),At.default(Tn,2931,(function(t,e){return t.clearDepth(e)})),At.default(Tn,2932,(function(t,e){return t.depthFunc(e)})),At.default(Tn,2928,(function(t,e){return(de=t).depthRange.apply(de,f.default(e))})),At.default(Tn,2930,(function(t,e){return t.depthMask(e)})),At.default(Tn,3024,Pe),At.default(Tn,35723,ke),At.default(Tn,36006,(function(t,e){var n=Zt(t)?36009:36160;return t.bindFramebuffer(n,e)})),At.default(Tn,2886,(function(t,e){return t.frontFace(e)})),At.default(Tn,33170,ke),At.default(Tn,2849,(function(t,e){return t.lineWidth(e)})),At.default(Tn,32823,Pe),At.default(Tn,32824,"polygonOffset"),At.default(Tn,10752,"polygonOffset"),At.default(Tn,35977,Pe),At.default(Tn,32938,"sampleCoverage"),At.default(Tn,32939,"sampleCoverage"),At.default(Tn,3089,Pe),At.default(Tn,3088,(function(t,e){return(ge=t).scissor.apply(ge,f.default(e))})),At.default(Tn,2960,Pe),At.default(Tn,2961,(function(t,e){return t.clearStencil(e)})),At.default(Tn,2968,(function(t,e){return t.stencilMaskSeparate(1028,e)})),At.default(Tn,36005,(function(t,e){return t.stencilMaskSeparate(1029,e)})),At.default(Tn,2962,"stencilFuncFront"),At.default(Tn,2967,"stencilFuncFront"),At.default(Tn,2963,"stencilFuncFront"),At.default(Tn,34816,"stencilFuncBack"),At.default(Tn,36003,"stencilFuncBack"),At.default(Tn,36004,"stencilFuncBack"),At.default(Tn,2964,"stencilOpFront"),At.default(Tn,2965,"stencilOpFront"),At.default(Tn,2966,"stencilOpFront"),At.default(Tn,34817,"stencilOpBack"),At.default(Tn,34818,"stencilOpBack"),At.default(Tn,34819,"stencilOpBack"),At.default(Tn,2978,(function(t,e){return(ye=t).viewport.apply(ye,f.default(e))})),At.default(Tn,3333,Ce),At.default(Tn,3317,Ce),At.default(Tn,37440,Ce),At.default(Tn,37441,Ce),At.default(Tn,37443,Ce),At.default(Tn,3330,Ce),At.default(Tn,3332,Ce),At.default(Tn,3331,Ce),At.default(Tn,36010,(function(t,e){return t.bindFramebuffer(36008,e)})),At.default(Tn,3314,Ce),At.default(Tn,32878,Ce),At.default(Tn,3316,Ce),At.default(Tn,3315,Ce),At.default(Tn,32877,Ce),At.default(Tn,"framebuffer",(function(t,e){var n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)})),At.default(Tn,"blend",(function(t,e){return e?t.enable(3042):t.disable(3042)})),At.default(Tn,"blendColor",(function(t,e){return(Ae=t).blendColor.apply(Ae,f.default(e))})),At.default(Tn,"blendEquation",(function(t,e){var n;e=Te(e)?e:[e,e],(n=t).blendEquationSeparate.apply(n,f.default(e))})),At.default(Tn,"blendFunc",(function(t,e){var n;e=Te(e)&&2===e.length?f.default(e).concat(f.default(e)):e,(n=t).blendFuncSeparate.apply(n,f.default(e))})),At.default(Tn,"clearColor",(function(t,e){return(ve=t).clearColor.apply(ve,f.default(e))})),At.default(Tn,"clearDepth",(function(t,e){return t.clearDepth(e)})),At.default(Tn,"clearStencil",(function(t,e){return t.clearStencil(e)})),At.default(Tn,"colorMask",(function(t,e){return(me=t).colorMask.apply(me,f.default(e))})),At.default(Tn,"cull",(function(t,e){return e?t.enable(2884):t.disable(2884)})),At.default(Tn,"cullFace",(function(t,e){return t.cullFace(e)})),At.default(Tn,"depthTest",(function(t,e){return e?t.enable(2929):t.disable(2929)})),At.default(Tn,"depthFunc",(function(t,e){return t.depthFunc(e)})),At.default(Tn,"depthMask",(function(t,e){return t.depthMask(e)})),At.default(Tn,"depthRange",(function(t,e){return(_e=t).depthRange.apply(_e,f.default(e))})),At.default(Tn,"dither",(function(t,e){return e?t.enable(3024):t.disable(3024)})),At.default(Tn,"derivativeHint",(function(t,e){t.hint(35723,e)})),At.default(Tn,"frontFace",(function(t,e){return t.frontFace(e)})),At.default(Tn,"mipmapHint",(function(t,e){return t.hint(33170,e)})),At.default(Tn,"lineWidth",(function(t,e){return t.lineWidth(e)})),At.default(Tn,"polygonOffsetFill",(function(t,e){return e?t.enable(32823):t.disable(32823)})),At.default(Tn,"polygonOffset",(function(t,e){return(be=t).polygonOffset.apply(be,f.default(e))})),At.default(Tn,"sampleCoverage",(function(t,e){return(xe=t).sampleCoverage.apply(xe,f.default(e))})),At.default(Tn,"scissorTest",(function(t,e){return e?t.enable(3089):t.disable(3089)})),At.default(Tn,"scissor",(function(t,e){return(we=t).scissor.apply(we,f.default(e))})),At.default(Tn,"stencilTest",(function(t,e){return e?t.enable(2960):t.disable(2960)})),At.default(Tn,"stencilMask",(function(t,e){e=Te(e)?e:[e,e];var n=c.default(e,2),r=n[0],i=n[1];t.stencilMaskSeparate(1028,r),t.stencilMaskSeparate(1029,i)})),At.default(Tn,"stencilFunc",(function(t,e){e=Te(e)&&3===e.length?f.default(e).concat(f.default(e)):e;var n=c.default(e,6),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5];t.stencilFuncSeparate(1028,r,i,o),t.stencilFuncSeparate(1029,a,s,u)})),At.default(Tn,"stencilOp",(function(t,e){e=Te(e)&&3===e.length?f.default(e).concat(f.default(e)):e;var n=c.default(e,6),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5];t.stencilOpSeparate(1028,r,i,o),t.stencilOpSeparate(1029,a,s,u)})),At.default(Tn,"viewport",(function(t,e){return(Ee=t).viewport.apply(Ee,f.default(e))})),Tn);function Me(t,e,n){return void 0!==e[t]?e[t]:n[t]}var Oe={blendEquation:function(t,e,n){return t.blendEquationSeparate(Me(32777,e,n),Me(34877,e,n))},blendFunc:function(t,e,n){return t.blendFuncSeparate(Me(32969,e,n),Me(32968,e,n),Me(32971,e,n),Me(32970,e,n))},polygonOffset:function(t,e,n){return t.polygonOffset(Me(32824,e,n),Me(10752,e,n))},sampleCoverage:function(t,e,n){return t.sampleCoverage(Me(32938,e,n),Me(32939,e,n))},stencilFuncFront:function(t,e,n){return t.stencilFuncSeparate(1028,Me(2962,e,n),Me(2967,e,n),Me(2963,e,n))},stencilFuncBack:function(t,e,n){return t.stencilFuncSeparate(1029,Me(34816,e,n),Me(36003,e,n),Me(36004,e,n))},stencilOpFront:function(t,e,n){return t.stencilOpSeparate(1028,Me(2964,e,n),Me(2965,e,n),Me(2966,e,n))},stencilOpBack:function(t,e,n){return t.stencilOpSeparate(1029,Me(34817,e,n),Me(34818,e,n),Me(34819,e,n))}},Le={enable:function(t,e){return t(At.default({},e,!0))},disable:function(t,e){return t(At.default({},e,!1))},pixelStorei:function(t,e,n){return t(At.default({},e,n))},hint:function(t,e,n){return t(At.default({},e,n))},bindFramebuffer:function(t,e,n){switch(e){case 36160:var r;return t((r={},At.default(r,36006,n),At.default(r,36010,n),r));case 36009:return t(At.default({},36006,n));case 36008:return t(At.default({},36010,n));default:return null}},blendColor:function(t,e,n,r,i){return t(At.default({},32773,new Float32Array([e,n,r,i])))},blendEquation:function(t,e){var n;return t((n={},At.default(n,32777,e),At.default(n,34877,e),n))},blendEquationSeparate:function(t,e,n){var r;return t((r={},At.default(r,32777,e),At.default(r,34877,n),r))},blendFunc:function(t,e,n){var r;return t((r={},At.default(r,32969,e),At.default(r,32968,n),At.default(r,32971,e),At.default(r,32970,n),r))},blendFuncSeparate:function(t,e,n,r,i){var o;return t((o={},At.default(o,32969,e),At.default(o,32968,n),At.default(o,32971,r),At.default(o,32970,i),o))},clearColor:function(t,e,n,r,i){return t(At.default({},3106,new Float32Array([e,n,r,i])))},clearDepth:function(t,e){return t(At.default({},2931,e))},clearStencil:function(t,e){return t(At.default({},2961,e))},colorMask:function(t,e,n,r,i){return t(At.default({},3107,[e,n,r,i]))},cullFace:function(t,e){return t(At.default({},2885,e))},depthFunc:function(t,e){return t(At.default({},2932,e))},depthRange:function(t,e,n){return t(At.default({},2928,new Float32Array([e,n])))},depthMask:function(t,e){return t(At.default({},2930,e))},frontFace:function(t,e){return t(At.default({},2886,e))},lineWidth:function(t,e){return t(At.default({},2849,e))},polygonOffset:function(t,e,n){var r;return t((r={},At.default(r,32824,e),At.default(r,10752,n),r))},sampleCoverage:function(t,e,n){var r;return t((r={},At.default(r,32938,e),At.default(r,32939,n),r))},scissor:function(t,e,n,r,i){return t(At.default({},3088,new Int32Array([e,n,r,i])))},stencilMask:function(t,e){var n;return t((n={},At.default(n,2968,e),At.default(n,36005,e),n))},stencilMaskSeparate:function(t,e,n){return t(At.default({},1028===e?2968:36005,n))},stencilFunc:function(t,e,n,r){var i;return t((i={},At.default(i,2962,e),At.default(i,2967,n),At.default(i,2963,r),At.default(i,34816,e),At.default(i,36003,n),At.default(i,36004,r),i))},stencilFuncSeparate:function(t,e,n,r,i){var o;return t((o={},At.default(o,1028===e?2962:34816,n),At.default(o,1028===e?2967:36003,r),At.default(o,1028===e?2963:36004,i),o))},stencilOp:function(t,e,n,r){var i;return t((i={},At.default(i,2964,e),At.default(i,2965,n),At.default(i,2966,r),At.default(i,34817,e),At.default(i,34818,n),At.default(i,34819,r),i))},stencilOpSeparate:function(t,e,n,r,i){var o;return t((o={},At.default(o,1028===e?2964:34817,n),At.default(o,1028===e?2965:34818,r),At.default(o,1028===e?2966:34819,i),o))},viewport:function(t,e,n,r,i){return t(At.default({},2978,[e,n,r,i]))}},Re=function(t,e){return t.isEnabled(e)},De=(In={},At.default(In,3042,Re),At.default(In,2884,Re),At.default(In,2929,Re),At.default(In,3024,Re),At.default(In,32823,Re),At.default(In,32926,Re),At.default(In,32928,Re),At.default(In,3089,Re),At.default(In,2960,Re),At.default(In,35977,Re),In);f=a("gj7DP"),u=a("ijozg"),l=a("pGAoq");function Ne(t){for(var e in t)return!1;return!0}function Fe(t,e){if(t===e)return!0;var n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function je(t,e){var n=t[e].bind(t);t[e]=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r[0];return o in t.state.cache&&t.state.enable?t.state.cache[o]:n.apply(void 0,f.default(r))},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function ze(t,e,n){var r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var a=n.apply(void 0,[t.state._updateCache].concat(f.default(i))),s=a.valueChanged,u=a.oldValue;return s&&r.apply(void 0,f.default(i)),u},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function Be(t){var e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}var Ue=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copyState,i=void 0!==r&&r,o=n.log,a=void 0===o?function(){}:o;u.default(this,t),this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=i?We(e):Object.assign({},Se),this.log=a,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return l.default(t,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Wt(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];qe(this.gl,t),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in t){Wt(void 0!==i);var o=t[i],a=this.cache[i];Fe(o,a)||(n=!0,e=a,r&&!(i in r)&&(r[i]=a),this.cache[i]=o)}return{valueChanged:n,oldValue:e}}}]),t}();function Ve(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Wt(void 0!==o),!t.state){var a=void 0!==e?e:window,s=a.polyfillContext;for(var u in s&&s(t),t.state=new Ue(t,{copyState:o}),Be(t),Le){var l=Le[u];ze(t,u,l)}je(t,"getParameter"),je(t,"isEnabled")}return t.state.enable=i,t}function Ge(t){Wt(t.state),t.state.pop()}function qe(t,e){if(Wt(Xt(t),"setParameters requires a WebGL context"),!Ne(e)){var n={};for(var r in e){var i=Number(r),o=Ie[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],i))}var a=t.state&&t.state.cache;if(a)for(var s in n){(0,Oe[s])(t,e,a)}}}function We(t,e){if("number"==typeof(e=e||Se)){var n=e,r=De[n];return r?r(t,n):t.getParameter(n)}var i=Array.isArray(e)?e:Object.keys(e),o={},a=!0,s=!1,u=void 0;try{for(var l,c=i[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=De[f];o[f]=p?p(t,Number(f)):t.getParameter(Number(f))}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}return o}function He(t,e,n){if(Ne(e))return n(t);var r,i=e.nocatch,o=void 0===i||i;if(function(t){t.state||Ve(t,{copyState:!1}),t.state.push()}(t),qe(t,e),o)r=n(t),Ge(t);else try{r=n(t)}finally{Ge(t)}return r}f=a("gj7DP");function Xe(t){var e=t.luma;if(t.canvas&&e){var n=e.canvasSizeInfo.clientWidth;return n?t.drawingBufferWidth/n:1}return 1}function Ze(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Xe(t),i=t.drawingBufferWidth,o=t.drawingBufferHeight;return Qe(e,r,i,o,n)}function Ye(t){var e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function Qe(t,e,n,r,i){var o,a=Ke(t[0],e,n),s=Je(t[1],e,r,i),u=Ke(t[0]+1,e,n),l=u===n-1?u:u-1;return u=Je(t[1]+1,e,r,i),i?(o=s,s=u=0===u?u:u+1):o=u===r-1?u:u-1,{x:a,y:s,width:Math.max(l-a+1,1),height:Math.max(o-s+1,1)}}function Ke(t,e,n){return Math.min(Math.round(t*e),n-1)}function Je(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}var $e=Kt.isBrowser(),tn=$e&&"undefined"!=typeof document,en={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function nn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(e){if(t.throwOnError)throw new Error(e);return console.error(e),null};Wt($e,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var n,r=(t=Object.assign({},en,t)).width,i=t.height;t.onError=e;var o=t.canvas,a=an({canvas:o,width:r,height:i,onError:e});return(n=on(a,t))?(sn(n=rn(n,t)),n):null}function rn(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||un(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var r=(n=Object.assign({},en,n)).manageState,i=n.debug;return r&&Ve(t,{copyState:!1,log:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=qt).log.apply(e,[1].concat(f.default(n)))()}}),$e&&i&&(Kt.global.makeDebugContext?(t=Kt.global.makeDebugContext(t,n),qt.level=Math.max(qt.level,1)):qt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function on(t,e){var n=e.onError,r=null,i=function(t){return r=t.statusMessage||r};t.addEventListener("webglcontextcreationerror",i,!1);var o=e.webgl1,a=void 0===o||o,s=e.webgl2,u=void 0===s||s,l=null;return u&&(l=(l=l||t.getContext("webgl2",e))||t.getContext("experimental-webgl2",e)),a&&(l=(l=l||t.getContext("webgl",e))||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),l?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),l):n("Failed to create ".concat(u&&!a?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function an(t){var e,n=t.canvas,r=t.width,i=void 0===r?800:r,o=t.height,a=void 0===o?600:o,s=t.onError;"string"==typeof n?(tn&&"complete"===document.readyState||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):n?e=n:((e=document.createElement("canvas")).id="lumagl-canvas",e.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",e.style.height=Number.isFinite(a)?"".concat(a,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}function sn(t){var e=Zt(t)?"WebGL2":"WebGL1",n=function(t){var e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";qt.info(1,"".concat(e).concat(i," context ").concat(r))()}function un(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?2:1}function ln(t,e,n){var r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(qt.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){var a=e,s=Math.floor(r*a),u=Math.floor(i*a);t.canvas.width=s,t.canvas.height=u,t.drawingBufferWidth===s&&t.drawingBufferHeight===u||(qt.warn("Device pixel ratio clamped")(),a=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*a),t.canvas.height=Math.floor(i*a)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}u=a("ijozg"),l=a("pGAoq");var cn="8.5.10",fn=new(function(){"use strict";function t(){u.default(this,t),this.stats=new Map}return l.default(t,[{key:"get",value:function(t){return this.stats.has(t)||this.stats.set(t,new Gt({id:t})),this.stats.get(t)}}]),t}());if(Kt.global.luma&&Kt.global.luma.VERSION!==cn)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(Kt.global.luma.VERSION," vs ").concat(cn));Kt.global.luma||(Kt.isBrowser()&&qt.log(1,"luma.gl ".concat(cn," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),Kt.global.luma=Kt.global.luma||{VERSION:cn,version:cn,log:qt,stats:fn,globals:{modules:{},nodeIO:{}}});Kt.global.luma;At=a("e2Lau"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg");var pn=a("9PFJu");l=a("pGAoq"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),c=a("1zCSZ"),u=a("ijozg"),l=a("pGAoq");function hn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function dn(t,e){if("string"!=typeof e)return e;var n=Number(e);if(!isNaN(n))return n;var r=t[e=e.replace(/^.*\./,"")];return hn(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function gn(t,e){for(var n in e=Number(e),t)if(t[n]===e)return"GL.".concat(n);return String(e)}var yn={};function An(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";yn[t]=yn[t]||1;var e=yn[t]++;return"".concat(t,"-").concat(e)}function vn(t){return hn("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function mn(t){var e=!0;for(var n in t){e=!1;break}return e}function _n(t,e,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach((function(t){o.methodName||(o[t]=function(){throw qt.removed("Calling removed method ".concat(e,".").concat(t,": "),i)(),new Error(t)})}))}var bn="Resource subclass must define virtual methods",xn=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t),Yt(e);var r=n.id,i=n.userData,o=void 0===i?{}:i;this.gl=e,this.gl2=e,this.id=r||An(this.constructor.name),this.userData=o,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return l.default(t,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"handle",get:function(){return this._handle}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.deleteChildren,n=void 0!==e&&e,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(t){return t.delete()})),this}},{key:"bind",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hn(t=dn(this.gl,t));var n=this.constructor.PARAMETERS||{},r=n[t];if(r){var i=Zt(this.gl),o=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!o){var a=r.webgl1,s="webgl2"in r?r.webgl2:r.webgl1,u=i?s:a;return u}}return this._getParameter(t,e)}},{key:"getParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.parameters,n=t.keys,r=this.constructor.PARAMETERS||{},i=Zt(this.gl),o={},a=e||Object.keys(r),s=!0,u=!1,l=void 0;try{for(var c,f=a[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h=r[p],d=h&&(!("webgl2"in h)||i)&&(!("extension"in h)||this.gl.getExtension(h.extension));if(d){var g=n?gn(this.gl,p):p;o[g]=this.getParameter(p,t),n&&"GLenum"===h.type&&(o[g]=gn(this.gl,o[g]))}}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return o}},{key:"setParameter",value:function(t,e){hn(t=dn(this.gl,t));var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=Zt(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=dn(e))}return this._setParameter(t,e),this}},{key:"setParameters",value:function(t){for(var e in t)this.setParameter(e,t[e]);return this}},{key:"stubRemovedMethods",value:function(t,e,n){return _n(this,t,e,n)}},{key:"initialize",value:function(t){}},{key:"_createHandle",value:function(){throw new Error(bn)}},{key:"_deleteHandle",value:function(){throw new Error(bn)}},{key:"_bindHandle",value:function(t){throw new Error(bn)}},{key:"_getOptsFromHandle",value:function(){throw new Error(bn)}},{key:"_getParameter",value:function(t,e){throw new Error(bn)}},{key:"_setParameter",value:function(t,e){throw new Error(bn)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var t=this.constructor.name,e=fn.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var t=this.constructor.name;fn.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=fn.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(e," Memory")).addCount(t),this.byteLength=t}},{key:"_trackDeallocatedMemory",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,e=fn.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}]),t}(),wn=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),u=a("ijozg"),l=a("pGAoq"),a("4EaGG"));f=a("gj7DP");function En(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function Sn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clamped,r=void 0===n||n;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Pn(t){var e=t.data,n=t.width,r=t.height,i=t.bytesPerPixel,o=void 0===i?4:i,a=t.temp,s=n*o;a=a||new Uint8Array(s);for(var u=0;u<r/2;++u){var l=u*s,c=(r-u-1)*s;a.set(e.subarray(l,l+s)),e.copyWithin(l,c,c+s),e.set(a,c)}}function kn(t){for(var e=t.data,n=t.width,r=t.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var u=0;u<i;u++)for(var l=0;l<4;l++)a[4*(s*i+u)+l]=e[4*(2*s*n+2*u)+l];return{data:a,width:i,height:o}}function Cn(t,e,n){var r=n.removedProps,i=void 0===r?{}:r,o=n.deprecatedProps,a=void 0===o?{}:o,s=n.replacedProps,u=void 0===s?{}:s;for(var l in i)if(l in e){var c=i[l]?"".concat(t,".").concat(i[l]):"N/A";qt.removed("".concat(t,".").concat(l),c)()}for(var f in a)if(f in e){var p=a[f];qt.deprecated("".concat(t,".").concat(f),"".concat(t,".").concat(p))()}var h=null;for(var d in u)if(d in e){var g=u[d];qt.deprecated("".concat(t,".").concat(d),"".concat(t,".").concat(g))(),(h=h||Object.assign({},e))[g]=e[d],delete h[d]}return h||e}var Tn,In,Mn={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},On={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Ln=function(){"use strict";function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=this;u.default(this,t),n.forEach((function(t){return i._assign(t)})),Object.freeze(this)}return l.default(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(t=Cn("Accessor",t,On)).type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}],[{key:"getBytesPerElement",value:function(t){return Sn(t.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){return hn(t.size),Sn(t.type||5126).BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return wn.default(t,f.default([Mn].concat(f.default(n))))}}]),t}(),Rn={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Dn={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Rn},Nn={removedProps:Rn},Fn=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),(r=e.call(this,t,i)).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),r.target=i.target||(r.gl.webgl2?36662:34962),r.initialize(i),Object.seal(pn.default(r)),r}return l.default(n,[{key:"getElementCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Ln.getBytesPerElement(t))}},{key:"getVertexCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Ln.getBytesPerVertex(t))}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=Cn("Buffer",t,Dn),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}},{key:"setProps",value:function(t){return"accessor"in(t=Cn("Buffer",t,Nn))&&this.setAccessor(t.accessor),this}},{key:"setAccessor",value:function(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new Ln(t),this}},{key:"reallocate",value:function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}},{key:"setData",value:function(t){return this.initialize(t)}},{key:"subData",value:function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t.data,n=t.offset,r=void 0===n?0:n,i=t.srcOffset,o=void 0===i?0:i,a=t.byteLength||t.length;hn(e);var s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==o||void 0!==a?(Qt(this.gl),this.gl.bufferSubData(this.target,r,e,o,a)):this.gl.bufferSubData(s,r,e),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(e),this}},{key:"copyData",value:function(t){var e=t.sourceBuffer,n=t.readOffset,r=void 0===n?0:n,i=t.writeOffset,o=void 0===i?0:i,a=t.size,s=this.gl;return Qt(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dstData,n=void 0===e?null:e,r=t.srcByteOffset,i=void 0===r?0:r,o=t.dstOffset,a=void 0===o?0:o,s=t.length,u=void 0===s?0:s;Qt(this.gl);var l,c,f=Sn(this.accessor.type||5126,{clamped:!1}),p=this._getAvailableElementCount(i),h=a;n?l=(c=n.length)-h:c=h+(l=Math.min(p,u||p));var d=Math.min(p,l);return hn((u=u||d)<=d),n=n||new f(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,a,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=t.offset,a=void 0===o?0:o,s=t.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,a,s):(hn(0===a),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=35345===n||35982===n;return o?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;hn(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);var i=En(t);return hn(i),this.setAccessor(new Ln(this.accessor,{type:i})),this}},{key:"_setByteLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;hn(t>=0),this._trackDeallocatedMemory();var n=t;0===t&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(t){var e=t/Sn(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}},{key:"_inferType",value:function(t){this.accessor.type||this.setAccessor(new Ln(this.accessor,{type:En(t)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}},{key:"type",get:function(){return qt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return qt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}},{key:"setByteLength",value:function(t){return qt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}},{key:"updateAccessor",value:function(t){return qt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ln(this.accessor,t),this}}]),n}(xn),jn=(Eg={},(At=a("e2Lau")).default(Eg,6407,{dataFormat:6407,types:[5121,33635]}),At.default(Eg,6408,{dataFormat:6408,types:[5121,32819,32820]}),At.default(Eg,6406,{dataFormat:6406,types:[5121]}),At.default(Eg,6409,{dataFormat:6409,types:[5121]}),At.default(Eg,6410,{dataFormat:6410,types:[5121]}),At.default(Eg,33326,{dataFormat:6403,types:[5126],gl2:!0}),At.default(Eg,33328,{dataFormat:33319,types:[5126],gl2:!0}),At.default(Eg,34837,{dataFormat:6407,types:[5126],gl2:!0}),At.default(Eg,34836,{dataFormat:6408,types:[5126],gl2:!0}),Eg),zn=(Tn={},At.default(Tn,6403,1),At.default(Tn,36244,1),At.default(Tn,33319,2),At.default(Tn,33320,2),At.default(Tn,6407,3),At.default(Tn,36248,3),At.default(Tn,6408,4),At.default(Tn,36249,4),At.default(Tn,6402,1),At.default(Tn,34041,1),At.default(Tn,6406,1),At.default(Tn,6409,1),At.default(Tn,6410,2),Tn),Bn=(In={},At.default(In,5126,4),At.default(In,5125,4),At.default(In,5124,4),At.default(In,5123,2),At.default(In,5122,2),At.default(In,5131,2),At.default(In,5120,1),At.default(In,5121,1),In);function Un(t,e){var n=jn[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Zt(t)&&n.gl2||n.gl1;return"string"==typeof r?t.getExtension(r):r}function Vn(t,e){var n=jn[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}var Gn=[9729,9728],qn=Kt.global.WebGLBuffer||function(){},Wn=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t,r){var i;u.default(this,n);var o=r.id,a=void 0===o?An("texture"):o,s=r.handle,l=r.target;return(i=e.call(this,t,{id:a,handle:s})).target=l,i.textureUnit=void 0,i.loaded=!1,i.width=void 0,i.height=void 0,i.depth=void 0,i.format=void 0,i.type=void 0,i.dataFormat=void 0,i.border=void 0,i.textureUnit=void 0,i.mipmaps=void 0,i}return l.default(n,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise){var n=this;return e.then((function(e){return n.initialize(Object.assign({},t,{pixels:e,data:e}))})),this}var r="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(r&&e.readyState<HTMLVideoElement.HAVE_METADATA){var i=this;return this._video=null,e.addEventListener("loadeddata",(function(){return i.initialize(t)})),this}var o=t.pixels,a=void 0===o?null:o,s=t.format,u=void 0===s?6408:s,l=t.border,c=void 0===l?0:l,f=t.recreate,p=void 0!==f&&f,h=t.parameters,d=void 0===h?{}:h,g=t.pixelStore,y=void 0===g?{}:g,A=t.textureUnit;e||(e=a);var v,m=t.width,_=t.height,b=t.dataFormat,x=t.type,w=t.compressed,E=void 0!==w&&w,S=t.mipmaps,P=void 0===S||S,k=t.depth,C=void 0===k?0:k;return m=(v=this._deduceParameters({format:u,type:x,dataFormat:b,compressed:E,data:e,width:m,height:_})).width,_=v.height,E=v.compressed,b=v.dataFormat,x=v.type,this.width=m,this.height=_,this.depth=C,this.format=u,this.type=x,this.dataFormat=b,this.border=c,this.textureUnit=A,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),P&&this._isNPOT()&&(qt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),P=!1,this._updateForNPOT(d)),this.mipmaps=P,this.setImageData({data:e,width:m,height:_,depth:C,format:u,type:x,dataFormat:b,border:c,mipmaps:P,parameters:y,compressed:E}),P&&this.generateMipmap(),this.setParameters(d),p&&(this.data=e),r&&(this._video={video:e,parameters:d,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var t=this._video,e=t.video,n=t.parameters;if(t.lastTime===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}},{key:"resize",value:function(t){var e=t.height,n=t.width,r=t.mipmaps,i=void 0!==r&&r;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;return this._isNPOT()?(qt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),He(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(t){this._trackDeallocatedMemory("Texture");var e,n=t.target,r=void 0===n?this.target:n,i=t.pixels,o=void 0===i?null:i,a=t.level,s=void 0===a?0:a,u=t.format,l=void 0===u?this.format:u,f=t.border,p=void 0===f?this.border:f,h=t.offset,d=void 0===h?0:h,g=t.parameters,y=void 0===g?{}:g,A=t.data,v=void 0===A?null:A,m=t.type,_=void 0===m?this.type:m,b=t.width,x=void 0===b?this.width:b,w=t.height,E=void 0===w?this.height:w,S=t.dataFormat,P=void 0===S?this.dataFormat:S,k=t.compressed,C=void 0!==k&&k;v||(v=o),e=this._deduceParameters({format:l,type:_,dataFormat:P,compressed:C,data:v,width:x,height:E}),_=e.type,P=e.dataFormat,C=e.compressed,x=e.width,E=e.height;var T=this.gl;T.bindTexture(this.target,this.handle);var I,M,O;if(M=this._getDataType({data:v,compressed:C}),v=M.data,I=M.dataType,He(this.gl,y,(function(){switch(I){case"null":T.texImage2D(r,s,l,x,E,p,P,_,v);break;case"typed-array":T.texImage2D(r,s,l,x,E,p,P,_,v,d);break;case"buffer":(O=Qt(T)).bindBuffer(35052,v.handle||v),O.texImage2D(r,s,l,x,E,p,P,_,d),O.bindBuffer(35052,null);break;case"browser-object":Zt(T)?T.texImage2D(r,s,l,x,E,p,P,_,v):T.texImage2D(r,s,l,P,_,v);break;case"compressed":var t=!0,e=!1,n=void 0;try{for(var i,o=v.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=c.default(i.value,2),u=a[0],f=a[1];T.compressedTexImage2D(r,u,f.format,f.width,f.height,p,f.data)}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}break;default:hn(!1,"Unknown image data type")}})),v&&v.byteLength)this._trackAllocatedMemory(v.byteLength,"Texture");else{var L=zn[this.dataFormat]||4,R=Bn[this.type]||1;this._trackAllocatedMemory(this.width*this.height*L*R,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(t){var e,n=t.target,r=void 0===n?this.target:n,i=t.pixels,o=void 0===i?null:i,a=t.data,s=void 0===a?null:a,u=t.x,l=void 0===u?0:u,c=t.y,f=void 0===c?0:c,p=t.width,h=void 0===p?this.width:p,d=t.height,g=void 0===d?this.height:d,y=t.level,A=void 0===y?0:y,v=t.format,m=void 0===v?this.format:v,_=t.type,b=void 0===_?this.type:_,x=t.dataFormat,w=void 0===x?this.dataFormat:x,E=t.compressed,S=void 0!==E&&E,P=t.offset,k=void 0===P?0:P,C=t.border,T=(void 0===C&&this.border,t.parameters),I=void 0===T?{}:T,M=this;if(e=this._deduceParameters({format:m,type:b,dataFormat:w,compressed:S,data:s,width:h,height:g}),b=e.type,w=e.dataFormat,S=e.compressed,h=e.width,g=e.height,hn(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=o),s&&s.data){var O=s;s=O.data,h=O.shape[0],g=O.shape[1]}s instanceof Fn&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),He(this.gl,I,(function(){if(S)M.gl.compressedTexSubImage2D(r,A,l,f,h,g,m,s);else if(null===s)M.gl.texSubImage2D(r,A,l,f,h,g,w,b,null);else if(ArrayBuffer.isView(s))M.gl.texSubImage2D(r,A,l,f,h,g,w,b,s,k);else if(s instanceof qn){var t=Qt(M.gl);t.bindBuffer(35052,s),t.texSubImage2D(r,A,l,f,h,g,w,b,k),t.bindBuffer(35052,null)}else if(Zt(M.gl)){Qt(M.gl).texSubImage2D(r,A,l,f,h,g,w,b,s)}else M.gl.texSubImage2D(r,A,l,f,w,b,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return qt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}},{key:"_getDataType",value:function(t){var e=t.data,n=t.compressed;return void 0!==n&&n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Fn?{data:e.handle,dataType:"buffer"}:e instanceof qn?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(t){var e,n=t.format,r=t.data,i=t.width,o=t.height,a=t.dataFormat,s=t.type,u=t.compressed,l=jn[n];return{dataFormat:a=a||l&&l.dataFormat,type:s=s||l&&l.types[0],compressed:u=u||l&&l.compressed,width:i=(e=this._deduceImageSize(r,i,o)).width,height:o=e.height,format:n,data:r}}},{key:"_deduceImageSize",value:function(t,e,n){var r;return hn(r="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},"Could not deduced texture size"),hn(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),hn(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:"_setParameter",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:hn(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Zt(this.gl)&&(!(!this.width||!this.height)&&(!vn(this.width)||!vn(this.height)))}},{key:"_updateForNPOT",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(t,e){if(this._isNPOT())switch(t){case 10241:-1===Gn.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format,r=e.linearFiltering,i=!0;return n&&(i=(i=i&&Un(t,n))&&(!r||Vn(t,n))),i}}]),n}(xn),Hn="";function Xn(t,e){return hn("string"==typeof t),t=Hn+t,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(t,".")))},i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(t){r(t)}}))}var Zn=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),Yt(t),(i instanceof Promise||"string"==typeof i)&&(i={data:i}),"string"==typeof i.data&&(i=Object.assign({},i,{data:Xn(i.data)})),(r=e.call(this,t,Object.assign({},i,{target:3553}))).initialize(i),Object.seal(pn.default(r)),r}return l.default(n,null,[{key:"isSupported",value:function(t,e){return Wn.isSupported(t,e)}}]),n}(Wn),Yn=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),a("cqwPg")),Qn=a("4Z8U5"),Kn=[34069,34070,34071,34072,34073,34074],Jn=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),Yt(t),(r=e.call(this,t,Object.assign({},i,{target:34067}))).initialize(i),Object.seal(pn.default(r)),r}return l.default(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=t.mipmaps,r=void 0===n||n,i=t.parameters,o=void 0===i?{}:i;return this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,r&&e.generateMipmap(t),e.setParameters(o)})),this}},{key:"subImage",value:function(t){var e=t.face,n=t.data,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:e,data:n,x:i,y:a,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(t){var e=t.width,n=t.height,i=t.pixels,o=t.data,a=t.border,s=void 0===a?0:a,u=t.format,l=void 0===u?6408:u,c=t.type,f=void 0===c?5121:c,p=this;return Yn.default(r(Qn).mark((function t(){var a,u,c;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p.gl,u=i||o,t.next=4,Promise.all(Kn.map((function(t){var e=u[t];return Promise.all(Array.isArray(e)?e:[e])})));case 4:c=t.sent,p.bind(),Kn.forEach((function(t,r){c[r].length>1&&!1!==p.opts.mipmaps&&qt.warn("".concat(p.id," has mipmap and multiple LODs."))(),c[r].forEach((function(r,i){e&&n?a.texImage2D(t,i,l,e,n,s,l,f,r):a.texImage2D(t,i,l,l,f,r)}))})),p.unbind();case 8:case"end":return t.stop()}}),t)})))()}},{key:"setImageDataForFace",value:function(t){var e=this,n=t.face,r=t.width,i=t.height,o=t.pixels,a=t.data,s=t.border,u=void 0===s?0:s,l=t.format,c=void 0===l?6408:l,f=t.type,p=void 0===f?5121:f,h=this.gl,d=o||a;return this.bind(),d instanceof Promise?d.then((function(r){return e.setImageDataForFace(Object.assign({},t,{face:n,data:r,pixels:r}))})):this.width||this.height?h.texImage2D(n,0,c,r,i,u,c,p,d):h.texImage2D(n,0,c,c,p,d),this}}]),n}(Wn);Jn.FACES=Kn;pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq");var $n=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),Qt(t),i=Object.assign({depth:1},i,{target:32879,unpackFlipY:!1}),(r=e.call(this,t,i)).initialize(i),Object.seal(pn.default(r)),r}return l.default(n,[{key:"setImageData",value:function(t){var e=t.level,n=void 0===e?0:e,r=t.dataFormat,i=void 0===r?6408:r,o=t.width,a=t.height,s=t.depth,u=void 0===s?1:s,l=t.border,c=void 0===l?0:l,f=t.format,p=t.type,h=void 0===p?5121:p,d=t.offset,g=void 0===d?0:d,y=t.data,A=t.parameters,v=void 0===A?{}:A,m=this;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),He(this.gl,v,(function(){ArrayBuffer.isView(y)&&m.gl.texImage3D(m.target,n,i,o,a,u,c,f,h,y),y instanceof Fn&&(m.gl.bindBuffer(35052,y.handle),m.gl.texImage3D(m.target,n,i,o,a,u,c,f,h,g))})),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{var _=zn[this.dataFormat]||4,b=Bn[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*_*b,"Texture")}return this.loaded=!0,this}}],[{key:"isSupported",value:function(t){return Zt(t)}}]),n}(Wn),tr=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),c=a("1zCSZ"),At=a("e2Lau"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),"EXT_color_buffer_float"),er=(Eg={},(At=a("e2Lau")).default(Eg,33189,{bpp:2}),At.default(Eg,33190,{gl2:!0,bpp:3}),At.default(Eg,36012,{gl2:!0,bpp:4}),At.default(Eg,36168,{bpp:1}),At.default(Eg,34041,{bpp:4}),At.default(Eg,35056,{gl2:!0,bpp:4}),At.default(Eg,36013,{gl2:!0,bpp:5}),At.default(Eg,32854,{bpp:2}),At.default(Eg,36194,{bpp:2}),At.default(Eg,32855,{bpp:2}),At.default(Eg,33321,{gl2:!0,bpp:1}),At.default(Eg,33330,{gl2:!0,bpp:1}),At.default(Eg,33329,{gl2:!0,bpp:1}),At.default(Eg,33332,{gl2:!0,bpp:2}),At.default(Eg,33331,{gl2:!0,bpp:2}),At.default(Eg,33334,{gl2:!0,bpp:4}),At.default(Eg,33333,{gl2:!0,bpp:4}),At.default(Eg,33323,{gl2:!0,bpp:2}),At.default(Eg,33336,{gl2:!0,bpp:2}),At.default(Eg,33335,{gl2:!0,bpp:2}),At.default(Eg,33338,{gl2:!0,bpp:4}),At.default(Eg,33337,{gl2:!0,bpp:4}),At.default(Eg,33340,{gl2:!0,bpp:8}),At.default(Eg,33339,{gl2:!0,bpp:8}),At.default(Eg,32849,{gl2:!0,bpp:3}),At.default(Eg,32856,{gl2:!0,bpp:4}),At.default(Eg,32857,{gl2:!0,bpp:4}),At.default(Eg,36220,{gl2:!0,bpp:4}),At.default(Eg,36238,{gl2:!0,bpp:4}),At.default(Eg,36975,{gl2:!0,bpp:4}),At.default(Eg,36214,{gl2:!0,bpp:8}),At.default(Eg,36232,{gl2:!0,bpp:8}),At.default(Eg,36226,{gl2:!0,bpp:16}),At.default(Eg,36208,{gl2:!0,bpp:16}),At.default(Eg,33325,{gl2:tr,bpp:2}),At.default(Eg,33327,{gl2:tr,bpp:4}),At.default(Eg,34842,{gl2:tr,bpp:8}),At.default(Eg,33326,{gl2:tr,bpp:4}),At.default(Eg,33328,{gl2:tr,bpp:8}),At.default(Eg,34836,{gl2:tr,bpp:16}),At.default(Eg,35898,{gl2:tr,bpp:4}),Eg);function nr(t,e,n){var r=n[e];if(!r)return!1;var i=Zt(t)&&r.gl2||r.gl1;return"string"==typeof i?t.getExtension(i):i}var rr=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),(r=e.call(this,t,i)).initialize(i),Object.seal(pn.default(r)),r}return l.default(n,[{key:"initialize",value:function(t){var e=t.format,n=t.width,r=void 0===n?1:n,i=t.height,o=void 0===i?1:i,a=t.samples,s=void 0===a?0:a;return hn(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Zt(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,e,r,o):this.gl.renderbufferStorage(36161,e,r,o),this.format=e,this.width=r,this.height=o,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*er[this.format].bpp),this}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(t){this.gl.bindRenderbuffer(36161,t)}},{key:"_syncHandle",value:function(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}],[{key:"isSupported",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null}).format;return!e||nr(t,e,er)}},{key:"getSamplesForFormat",value:function(t,e){var n=e.format;return t.getInternalformatParameter(36161,n,32937)}}]),n}(xn),ir=(c=a("1zCSZ"),6144),or=6145,ar=6146,sr=34041,ur="clear: bad arguments";function lr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,i=e.color,o=void 0===i?null:i,a=e.depth,s=void 0===a?null:a,u=e.stencil,l=void 0===u?null:u,c={};r&&(c.framebuffer=r);var f=0;o&&(f|=16384,!0!==o&&(c.clearColor=o)),s&&(f|=256,!0!==s&&(c.clearDepth=s)),l&&(f|=1024,!0!==s&&(c.clearStencil=s)),hn(0!==f,ur),He(t,c,(function(){t.clear(f)}))}function cr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,i=e.buffer,o=void 0===i?ir:i,a=e.drawBuffer,s=void 0===a?0:a,u=e.value,l=void 0===u?[0,0,0,0]:u;Qt(t),He(t,{framebuffer:r},(function(){switch(o){case ir:switch(l.constructor){case Int32Array:t.clearBufferiv(o,s,l);break;case Uint32Array:t.clearBufferuiv(o,s,l);break;case Float32Array:default:t.clearBufferfv(o,s,l)}break;case or:t.clearBufferfv(or,0,[l]);break;case ar:t.clearBufferiv(ar,0,[l]);break;case sr:var e=c.default(l,2),n=e[0],r=e[1];t.clearBufferfi(sr,0,n,r);break;default:hn(!1,ur)}}))}function fr(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return hn(!1),0}}function pr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceX,r=void 0===n?0:n,i=e.sourceY,o=void 0===i?0:i,a=e.sourceFormat,s=void 0===a?6408:a,u=e.sourceAttachment,l=void 0===u?36064:u,c=e.target,f=void 0===c?null:c,p=e.sourceWidth,h=e.sourceHeight,d=e.sourceType,g=dr(t),y=g.framebuffer,A=g.deleteFramebuffer;hn(y);var v=y.gl,m=y.handle,_=y.attachments;p=p||y.width,h=h||y.height,36064===l&&null===m&&(l=1028),hn(_[l]),f=gr(f,d=d||_[l].type,s,p,h),d=d||En(f);var b=v.bindFramebuffer(36160,m);return v.readPixels(r,o,p,h,s,d,f),v.bindFramebuffer(36160,b||null),A&&y.delete(),f}function hr(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.sourceAttachment,i=void 0===r?36064:r,o=n.targetMaxHeight,a=void 0===o?Number.MAX_SAFE_INTEGER:o,s=pr(t,{sourceAttachment:i}),u=t.width,l=t.height;l>a;)s=(e=kn({data:s,width:u,height:l})).data,u=e.width,l=e.height;Pn({data:s,width:u,height:l});var c=document.createElement("canvas");c.width=u,c.height=l;var f=c.getContext("2d"),p=f.createImageData(u,l);return p.data.set(s),f.putImageData(p,0,0),c.toDataURL()}function dr(t){return t instanceof Gr?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:(e=t,r=e.gl,i=e.width,o=e.height,a=e.id,s=new Gr(r,Object.assign({},n,{id:"framebuffer-for-".concat(a),width:i,height:o,attachments:At.default({},36064,e)})),s),deleteFramebuffer:!0};var e,n,r,i,o,a,s}function gr(t,e,n,r,i){return t||new(Sn(e=e||5121,{clamped:!1}))(r*i*fr(n))}At=a("e2Lau");var yr="WEBGL2",Ar="VERTEX_ARRAY_OBJECT",vr="TIMER_QUERY",mr="INSTANCED_RENDERING",_r="MULTIPLE_RENDER_TARGETS",br="ELEMENT_INDEX_UINT32",xr="BLEND_EQUATION_MINMAX",wr="FLOAT_BLEND",Er="COLOR_ENCODING_SRGB",Sr="TEXTURE_DEPTH",Pr="TEXTURE_FLOAT",kr="TEXTURE_HALF_FLOAT",Cr="TEXTURE_FILTER_LINEAR_FLOAT",Tr="TEXTURE_FILTER_LINEAR_HALF_FLOAT",Ir="TEXTURE_FILTER_ANISOTROPIC",Mr="COLOR_ATTACHMENT_RGBA32F",Or="COLOR_ATTACHMENT_FLOAT",Lr="COLOR_ATTACHMENT_HALF_FLOAT",Rr="GLSL_FRAG_DATA",Dr="GLSL_FRAG_DEPTH",Nr="GLSL_DERIVATIVES",Fr="GLSL_TEXTURE_LOD";var jr=(Eg={},At.default(Eg,yr,[!1,!0]),At.default(Eg,Ar,["OES_vertex_array_object",!0]),At.default(Eg,vr,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),At.default(Eg,mr,["ANGLE_instanced_arrays",!0]),At.default(Eg,_r,["WEBGL_draw_buffers",!0]),At.default(Eg,br,["OES_element_index_uint",!0]),At.default(Eg,xr,["EXT_blend_minmax",!0]),At.default(Eg,wr,["EXT_float_blend"]),At.default(Eg,Er,["EXT_sRGB",!0]),At.default(Eg,Sr,["WEBGL_depth_texture",!0]),At.default(Eg,Pr,["OES_texture_float",!0]),At.default(Eg,kr,["OES_texture_half_float",!0]),At.default(Eg,Cr,["OES_texture_float_linear"]),At.default(Eg,Tr,["OES_texture_half_float_linear"]),At.default(Eg,Ir,["EXT_texture_filter_anisotropic"]),At.default(Eg,Mr,[function(t){var e=new Zn(t,{format:6408,type:5126,dataFormat:6408}),n=new Gr(t,{id:"test-framebuffer",check:!1,attachments:At.default({},36064,e)}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"]),At.default(Eg,Or,[!1,"EXT_color_buffer_float"]),At.default(Eg,Lr,["EXT_color_buffer_half_float"]),At.default(Eg,Rr,["WEBGL_draw_buffers",!0]),At.default(Eg,Dr,["EXT_frag_depth",!0]),At.default(Eg,Nr,["OES_standard_derivatives",!0]),At.default(Eg,Fr,["EXT_shader_texture_lod",!0]),Eg);function zr(t,e){return Br(t,e)}function Br(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return Ur(t,e)}))}function Ur(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){var n,r=jr[e];hn(r,e);var i=Zt(t)&&r[1]||r[0];if("function"==typeof i)n=i(t);else if(Array.isArray(i)){n=!0;var o=!0,a=!1,s=void 0;try{for(var u,l=i[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;n=n&&Boolean(t.getExtension(c))}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}}else"string"==typeof i?n=Boolean(t.getExtension(i)):"boolean"==typeof i?n=i:hn(!1);return n}(t,e)),t.luma.caps[e]||qt.log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}var Vr="Multiple render targets not supported",Gr=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),(r=e.call(this,t,i)).width=null,r.height=null,r.attachments={},r.readBuffer=36064,r.drawBuffers=[36064],r.ownResources=[],r.initialize(i),Object.seal(pn.default(r)),r}return l.default(n,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){var t=Qt(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var t=Qt(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}},{key:"initialize",value:function(t){var e=t.width,n=void 0===e?1:e,r=t.height,i=void 0===r?1:r,o=t.attachments,a=void 0===o?null:o,s=t.color,u=void 0===s||s,l=t.depth,c=void 0===l||l,f=t.stencil,p=void 0!==f&&f,h=t.check,d=void 0===h||h,g=t.readBuffer,y=t.drawBuffers;if(hn(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var A in a){var v=a[A];(Array.isArray(v)?v[0]:v).resize({width:n,height:i})}else a=this._createDefaultAttachments(u,c,p,n,i);this.update({clearAttachments:!0,attachments:a,readBuffer:g,drawBuffers:y}),a&&d&&this.checkStatus()}},{key:"delete",value:function(){var t=!0,e=!1,r=void 0;try{for(var i,o=this.ownResources[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.delete()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}return dt.default(gt.default(n.prototype),"delete",this).call(this),this}},{key:"update",value:function(t){var e=t.attachments,n=void 0===e?{}:e,r=t.readBuffer,i=t.drawBuffers,o=t.clearAttachments,a=void 0!==o&&o,s=t.resizeAttachments,u=void 0===s||s;this.attach(n,{clearAttachments:a,resizeAttachments:u});var l=this.gl,c=l.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),l.bindFramebuffer(36160,c||null),this}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.height;if(null===this.handle)return hn(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&qt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}},{key:"attach",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clearAttachments,r=void 0!==n&&n,i=e.resizeAttachments,o=void 0===i||i,a=this,s={};r&&Object.keys(this.attachments).forEach((function(t){s[t]=null})),Object.assign(s,t);var u=this.gl.bindFramebuffer(36160,this.handle);for(var l in s){hn(void 0!==l,"Misspelled framebuffer binding point?");var f=Number(l),p=s[f],h=p;if(h)if(h instanceof rr)this._attachRenderbuffer({attachment:f,renderbuffer:h});else if(Array.isArray(p)){var d=c.default(p,3),g=d[0],y=d[1],A=void 0===y?0:y,v=d[2],m=void 0===v?0:v;h=g,this._attachTexture({attachment:f,texture:g,layer:A,level:m})}else this._attachTexture({attachment:f,texture:h,layer:0,level:0});else this._unattach(f);o&&h&&h.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,u||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((function(t){return!a.attachments[t]})).forEach((function(t){delete a.attachments[t]}))}},{key:"checkStatus",value:function(){this.gl;var t=this.getStatus();if(36053!==t)throw new Error(qr(t));return this}},{key:"getStatus",value:function(){var t=this.gl,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=t.color,r=t.depth,i=t.stencil,o=t.drawBuffers,a=void 0===o?[]:o,s=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&lr(this.gl,{color:n,depth:r,stencil:i}),a.forEach((function(t,n){cr(e.gl,{drawBuffer:n,value:t})})),this.gl.bindFramebuffer(36160,s||null),this}},{key:"readPixels",value:function(){return qt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return qt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return qt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return qt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return qt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return qt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(t){var e=t.attachments,n=void 0===e?[]:e,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.width,u=t.height,l=Qt(this.gl),c=l.bindFramebuffer(36008,this.handle);return 0===i&&0===a&&void 0===s&&void 0===u?l.invalidateFramebuffer(36008,n):l.invalidateFramebuffer(36008,n,i,a,s,u),l.bindFramebuffer(36008,c),this}},{key:"getAttachmentParameter",value:function(t,e,n){var r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=gn(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=e?gn(this.gl,l):l;r[c]=this.getAttachmentParameter(t,l,e)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}},{key:"getParameters",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object.keys(this.attachments),n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=Number(u),c=t?gn(this.gl,l):l;n[c]=this.getAttachmentParameters(l,t)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(hr(this),"luma-debug-texture"),this}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>qt.level||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);var n=hr(this,{targetMaxHeight:100});return qt.image({logLevel:t,message:e,image:n},e)(),this}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(t,e,n,r,i){var o,a=null;t&&((a=a||{})[36064]=new Zn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:(o={},At.default(o,10241,9729),At.default(o,10240,9729),At.default(o,10242,33071),At.default(o,10243,33071),o)}),this.ownResources.push(a[36064]));return e&&n?((a=a||{})[33306]=new rr(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(a[33306])):e?((a=a||{})[36096]=new rr(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(a[36096])):n&&hn(!1),a}},{key:"_unattach",value:function(t){var e=this.attachments[t];e&&(e instanceof rr?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}},{key:"_attachRenderbuffer",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.texture,i=t.layer,o=t.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Qt(a).framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var s=function(t){return t<34069?t+34069:t}(i);a.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:hn(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(t){var e,n=Zt(e=this.gl)?e:null;n?n.readBuffer(t):hn(36064===t||1029===t,Vr),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(t){var e=this.gl,n=Qt(e);if(n)n.drawBuffers(t);else{var r=e.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(t):hn(1===t.length&&(36064===t[0]||1029===t[0]),Vr)}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(t){var e=function(t){for(var e in t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},jr)void 0===t.luma.caps[e]&&(t.luma.caps[e]=Ur(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(t){return this.gl.bindFramebuffer(36160,t)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.colorBufferFloat,r=e.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new n(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}}]),n}(xn);function qr(t){return(Gr.STATUS||{})[t]||"Framebuffer error ".concat(t)}function Wr(t,e){hn(t instanceof Zn||t instanceof Jn||t instanceof $n);var n=t.constructor,r=t.gl,i=t.width,o=t.height,a=t.format,s=t.type,u=t.dataFormat,l=t.border,c=t.mipmaps;return new n(r,Object.assign({width:i,height:o,format:a,type:s,dataFormat:u,border:l,mipmaps:c},e))}Gr.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo");var Hr=(Eg={},(At=a("e2Lau")).default(Eg,5126,si.bind(null,"uniform1fv",Jr,1,ui)),At.default(Eg,35664,si.bind(null,"uniform2fv",Jr,2,ui)),At.default(Eg,35665,si.bind(null,"uniform3fv",Jr,3,ui)),At.default(Eg,35666,si.bind(null,"uniform4fv",Jr,4,ui)),At.default(Eg,5124,si.bind(null,"uniform1iv",$r,1,ui)),At.default(Eg,35667,si.bind(null,"uniform2iv",$r,2,ui)),At.default(Eg,35668,si.bind(null,"uniform3iv",$r,3,ui)),At.default(Eg,35669,si.bind(null,"uniform4iv",$r,4,ui)),At.default(Eg,35670,si.bind(null,"uniform1iv",$r,1,ui)),At.default(Eg,35671,si.bind(null,"uniform2iv",$r,2,ui)),At.default(Eg,35672,si.bind(null,"uniform3iv",$r,3,ui)),At.default(Eg,35673,si.bind(null,"uniform4iv",$r,4,ui)),At.default(Eg,35674,si.bind(null,"uniformMatrix2fv",Jr,4,li)),At.default(Eg,35675,si.bind(null,"uniformMatrix3fv",Jr,9,li)),At.default(Eg,35676,si.bind(null,"uniformMatrix4fv",Jr,16,li)),At.default(Eg,35678,ai),At.default(Eg,35680,ai),At.default(Eg,5125,si.bind(null,"uniform1uiv",ti,1,ui)),At.default(Eg,36294,si.bind(null,"uniform2uiv",ti,2,ui)),At.default(Eg,36295,si.bind(null,"uniform3uiv",ti,3,ui)),At.default(Eg,36296,si.bind(null,"uniform4uiv",ti,4,ui)),At.default(Eg,35685,si.bind(null,"uniformMatrix2x3fv",Jr,6,li)),At.default(Eg,35686,si.bind(null,"uniformMatrix2x4fv",Jr,8,li)),At.default(Eg,35687,si.bind(null,"uniformMatrix3x2fv",Jr,6,li)),At.default(Eg,35688,si.bind(null,"uniformMatrix3x4fv",Jr,12,li)),At.default(Eg,35689,si.bind(null,"uniformMatrix4x2fv",Jr,8,li)),At.default(Eg,35690,si.bind(null,"uniformMatrix4x3fv",Jr,12,li)),At.default(Eg,35678,ai),At.default(Eg,35680,ai),At.default(Eg,35679,ai),At.default(Eg,35682,ai),At.default(Eg,36289,ai),At.default(Eg,36292,ai),At.default(Eg,36293,ai),At.default(Eg,36298,ai),At.default(Eg,36299,ai),At.default(Eg,36300,ai),At.default(Eg,36303,ai),At.default(Eg,36306,ai),At.default(Eg,36307,ai),At.default(Eg,36308,ai),At.default(Eg,36311,ai),Eg),Xr={},Zr={},Yr={},Qr=[0];function Kr(t,e,n,r){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(Qr[0]=t,t=Qr);var i=t.length;if(i%e&&qt.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=t[a];return o}function Jr(t,e){return Kr(t,e,Float32Array,Xr)}function $r(t,e){return Kr(t,e,Int32Array,Zr)}function ti(t,e){return Kr(t,e,Uint32Array,Yr)}function ei(t,e,n){var r=Hr[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function ni(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};var e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function ri(t,e,n){for(var r in t){var i=t[r];if((!n||Boolean(n[r]))&&!ii(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function ii(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof Wn||(t instanceof rr||t instanceof Gr&&Boolean(t.texture))))}function oi(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e])for(var r=t[e],i=0,o=n.length;i<o;++i)r[i]=n[i];else t[e]=n.slice();else t[e]=n}function ai(){var t=null;return function(e,n,r){var i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function si(t,e,n,r){var i=null,o=null;return function(a,s,u){var l=e(u,n),c=l.length,f=!1;if(null===i)i=new Float32Array(c),o=c,f=!0;else{hn(o===c,"Uniform length cannot change.");for(var p=0;p<c;++p)if(l[p]!==i[p]){f=!0;break}}return f&&(r(a,t,s,l),i.set(l)),f}}function ui(t,e,n,r){t[e](n,r)}function li(t,e,n,r){t[e](n,!1,r)}pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq");function ci(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}function fi(t,e,n,r){for(var i=t.split(/\r?\n/),o={},a={},s=r||ci(e)||"(unnamed)",u="".concat(function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s),l=0;l<i.length;l++){var c=i[l];if(!(c.length<=1)){var f=c.split(":"),p=f[0],h=parseInt(f[2],10);if(isNaN(h))throw new Error("GLSL compilation error in ".concat(u,": ").concat(t));"WARNING"!==p?o[h]=c:a[h]=c}}var d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((function(t,r){var o=String(r+e),a=o.length;return hi(o,i-a)+n+t}))}(e);return{shaderName:u,errors:pi(o,d),warnings:pi(a,d)}}function pi(t,e){for(var n="",r=0;r<e.length;r++){var i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){var o=t[r+1],a=o.split(":",3),s=a[0],u=parseInt(a[1],10)||0,l=o.substring(a.join(":").length+1).trim();n+=hi("^^^ ".concat(s,": ").concat(l,"\n\n"),u)}}return n}function hi(t,e){for(var n="",r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}var di=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t,r){var i;u.default(this,n),Yt(t),hn("string"==typeof r.source,"Shader: GLSL source code must be a JavaScript string");var o=ci(r.source,null)||r.id||An("unnamed ".concat(n.getTypeName(r.shaderType)));return(i=e.call(this,t,{id:o})).shaderType=r.shaderType,i.source=r.source,i.initialize(r),i}return l.default(n,[{key:"initialize",value:function(t){var e=t.source,n=ci(e,null);n&&(this.id=An(n)),this._compile(e)}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this.handle,t)}},{key:"toString",value:function(){return"".concat(n.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return ci(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var e=this.getParameter(35713);if(!e){var n=this.gl.getShaderInfoLog(this.handle),r=fi(n,this.source,this.shaderType,this.id),i=r.shaderName,o=r.errors,a=r.warnings;throw qt.error("GLSL compilation errors in ".concat(i,"\n").concat(o))(),qt.warn("GLSL compilation warnings in ".concat(i,"\n").concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}],[{key:"getTypeName",value:function(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return hn(!1),"unknown"}}}]),n}(xn),gi=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t,r){return u.default(this,n),"string"==typeof r&&(r={source:r}),e.call(this,t,Object.assign({},r,{shaderType:35633}))}return l.default(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),n}(di),yi=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t,r){return u.default(this,n),"string"==typeof r&&(r={source:r}),e.call(this,t,Object.assign({},r,{shaderType:35632}))}return l.default(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),n}(di),Ai=(u=a("ijozg"),l=a("pGAoq"),At=a("e2Lau"),c=a("1zCSZ"),5126),vi=5124,mi=5125,_i=(Eg={},At.default(Eg,Ai,[Ai,1,"float"]),At.default(Eg,35664,[Ai,2,"vec2"]),At.default(Eg,35665,[Ai,3,"vec3"]),At.default(Eg,35666,[Ai,4,"vec4"]),At.default(Eg,vi,[vi,1,"int"]),At.default(Eg,35667,[vi,2,"ivec2"]),At.default(Eg,35668,[vi,3,"ivec3"]),At.default(Eg,35669,[vi,4,"ivec4"]),At.default(Eg,mi,[mi,1,"uint"]),At.default(Eg,36294,[mi,2,"uvec2"]),At.default(Eg,36295,[mi,3,"uvec3"]),At.default(Eg,36296,[mi,4,"uvec4"]),At.default(Eg,35670,[Ai,1,"bool"]),At.default(Eg,35671,[Ai,2,"bvec2"]),At.default(Eg,35672,[Ai,3,"bvec3"]),At.default(Eg,35673,[Ai,4,"bvec4"]),At.default(Eg,35674,[Ai,8,"mat2"]),At.default(Eg,35685,[Ai,8,"mat2x3"]),At.default(Eg,35686,[Ai,8,"mat2x4"]),At.default(Eg,35675,[Ai,12,"mat3"]),At.default(Eg,35687,[Ai,12,"mat3x2"]),At.default(Eg,35688,[Ai,12,"mat3x4"]),At.default(Eg,35676,[Ai,16,"mat4"]),At.default(Eg,35689,[Ai,16,"mat4x2"]),At.default(Eg,35690,[Ai,16,"mat4x3"]),Eg);function bi(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return hn(!1),0}}function xi(t){var e=_i[t];if(!e)return null;var n=c.default(e,2);return{type:n[0],components:n[1]}}function wi(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=Ai}for(var n in _i){var r=c.default(_i[n],3),i=r[0],o=r[1],a=r[2];if(i===t&&o===e)return{glType:n,name:a}}return null}var Ei=function(){"use strict";function t(e){u.default(this,t),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return l.default(t,[{key:"getAttributeInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}},{key:"getAttributeLocation",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:"getAttributeAccessor",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:"getVaryingInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:"getVaryingIndex",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:"getVaryingAccessor",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:"_readAttributesFromProgram",value:function(t){for(var e=t.gl,n=e.getProgramParameter(t.handle,35721),r=0;r<n;r++){var i=e.getActiveAttrib(t.handle,r),o=i.name,a=i.type,s=i.size,u=e.getAttribLocation(t.handle,o);u>=0&&this._addAttribute(u,o,a,s)}this.attributeInfos.sort((function(t,e){return t.location-e.location}))}},{key:"_readVaryingsFromProgram",value:function(t){var e=t.gl;if(Zt(e)){for(var n=e.getProgramParameter(t.handle,35971),r=0;r<n;r++){var i=e.getTransformFeedbackVarying(t.handle,r),o=i.name,a=i.type,s=i.size;this._addVarying(r,o,a,s)}this.varyingInfos.sort((function(t,e){return t.location-e.location}))}}},{key:"_addAttribute",value:function(t,e,n,r){var i=xi(n),o={type:i.type,size:r*i.components};this._inferProperties(t,e,o);var a={location:t,name:e,accessor:new Ln(o)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function(t,e,n){/instance/i.test(e)&&(n.divisor=1)}},{key:"_addVarying",value:function(t,e,n,r){var i=xi(n),o=i.type,a=i.components,s={location:t,name:e,accessor:new Ln({type:o,size:r*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),t}(),Si=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Pi=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),(r=e.call(this,t,i)).stubRemovedMethods("Program","v6.0",Si),r._isCached=!1,r.initialize(i),Object.seal(pn.default(r)),r._setId(i.id),r}return l.default(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.hash,n=t.vs,r=t.fs,i=t.varyings,o=t.bufferMode,a=void 0===o?35981:o;return this.hash=e||"",this.vs="string"==typeof n?new gi(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new yi(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,hn(this.vs instanceof gi),hn(this.fs instanceof yi),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(Qt(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Ei(this),this.setProps(t)}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:dt.default(gt.default(n.prototype),"delete",this).call(this,t)}},{key:"setProps",value:function(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}},{key:"draw",value:function(t){var e=t.logPriority,n=t.drawMode,r=void 0===n?4:n,i=t.vertexCount,o=t.offset,a=void 0===o?0:o,s=t.start,u=t.end,l=t.isIndexed,c=void 0!==l&&l,f=t.indexType,p=void 0===f?5123:f,h=t.instanceCount,d=void 0===h?0:h,g=t.isInstanced,y=void 0===g?d>0:g,A=t.vertexArray,v=void 0===A?null:A,m=t.transformFeedback,_=t.framebuffer,b=t.parameters,x=void 0===b?{}:b,w=t.uniforms,E=t.samplers,S=this;if((w||E)&&(qt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(w||{})),qt.priority>=e){var P=_?_.id:"default",k="mode=".concat(gn(this.gl,r)," verts=").concat(i," ")+"instances=".concat(d," indexType=").concat(gn(this.gl,p)," ")+"isInstanced=".concat(y," isIndexed=").concat(c," ")+"Framebuffer=".concat(P);qt.log(e,k)()}return hn(v),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||y&&0===d)&&(v.bindForDraw(i,d,(function(){var t=S;if(void 0!==_&&(x=Object.assign({},x,{framebuffer:_})),m){var e=bi(r);m.begin(e)}S._bindTextures(),He(S.gl,x,(function(){c&&y?t.gl2.drawElementsInstanced(r,i,p,a,d):c&&Zt(t.gl)&&!isNaN(s)&&!isNaN(u)?t.gl2.drawRangeElements(r,s,u,i,p,a):c?t.gl.drawElements(r,i,p,a):y?t.gl2.drawArraysInstanced(r,a,i,d):t.gl.drawArrays(r,a,i)})),m&&m.end()})),!0)}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in qt.priority>=2&&ri(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle),t){var n=t[e],r=this._uniformSetters[e];if(r){var i=n,o=!1;if(i instanceof Gr&&(i=i.texture),i instanceof Wn)if(o=this.uniforms[e]!==n){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var a=i,s=r.textureIndex;a.bind(s),i=s,this._textureUniforms[e]=a}else i=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(i)||o)&&oi(this.uniforms,e,n)}}return this}},{key:"_areTexturesRenderable",value:function(){var t=!0;for(var e in this._textureUniforms){var n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}},{key:"_bindTextures",value:function(){for(var t in this._textureUniforms){var e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(t){var e=this.gl.getAttachedShaders(t),n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new gi({handle:u});break;case 35632:n.fs=new yi({handle:u})}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},{key:"_getParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_setId",value:function(t){if(!t){var e=this._getName();this.id=An(e)}}},{key:"_getName",value:function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?"".concat(t,"-program"):"program"}},{key:"_compileAndLink",value:function(){var t=this.gl;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),qt.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),qt.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||qt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var e=0;e<this._uniformCount;e++){var n=this.gl.getActiveUniform(this.handle,e),r=ni(n.name).name,i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=ei(t,i,n),n.size>1)for(var o=0;o<n.size;o++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=ei(t,i,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}},{key:"getUniformBlockIndex",value:function(t){return this.gl2.getUniformBlockIndex(this.handle,t)}},{key:"getActiveUniformBlockParameter",value:function(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}},{key:"uniformBlockBinding",value:function(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}]),n}(xn),ki=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),(r=e.call(this,t,i)).target=null,r._queryPending=!1,r._pollingPromise=null,Object.seal(pn.default(r)),r}return l.default(n,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.conservative,n=void 0!==e&&e;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}},{key:"isTimerDisjoint",value:function(){return this.gl2.getParameter(36795)}},{key:"getResult",value:function(){return this.gl2.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,e=this;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){var o=e,a=function(){o.isResultAvailable()?(r(o.getResult()),o._pollingPromise=null):n++>t?(i("Timed out"),o._pollingPromise=null):requestAnimationFrame(a)};requestAnimationFrame(a)})),this._pollingPromise}},{key:"_createHandle",value:function(){return n.isSupported(this.gl)?this.gl2.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl2.deleteQuery(this.handle)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Zt(t),r=Br(t,vr),i=n||r,o=!0,a=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;switch(c){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:hn(!1)}}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}return i}}]),n}(xn)),Ci=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default(this,n),Qt(t),(r=e.call(this,t,i)).initialize(i),r.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(pn.default(r)),r}return l.default(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,mn(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}},{key:"setBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;return this.bind((function(){for(var n in t)e.setBuffer(n,t[n])})),this}},{key:"setBuffer",value:function(t,e){var n=this._getVaryingIndex(t),r=this._getBufferParams(e),i=r.buffer,o=r.byteSize,a=r.byteOffset;if(n<0){var s=this;return this.unused[t]=i,qt.warn((function(){return"".concat(s.id," unused varying buffer ").concat(t)}))(),this}return this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,i,a,o),this}},{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(t){var e,n,r;return t instanceof Fn==!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}},{key:"_getVaryingInfo",value:function(t){return this.configuration&&this.configuration.getVaryingInfo(t)}},{key:"_getVaryingIndex",value:function(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers){var e=this._getBufferParams(this.buffers[t]),n=e.buffer,r=e.byteSize,i=e.byteOffset;this._bindBuffer(t,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,null)}},{key:"_bindBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindTransformFeedback(36386,this.handle)}}],[{key:"isSupported",value:function(t){return Zt(t)}}]),n}(xn)),Ti=(u=a("ijozg"),l=a("pGAoq"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),null);function Ii(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!Ti||Ti.byteLength<n)&&(Ti=new ArrayBuffer(n)),Ti),0,e)}var Mi=a("aNBzk"),Oi="elements must be GL.ELEMENT_ARRAY_BUFFER",Li=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,n);var o=i.id||i.program&&i.program.id;return(r=e.call(this,t,Object.assign({},i,{id:o}))).buffer=null,r.bufferValue=null,r.isDefaultArray=i.isDefaultArray||!1,r.gl2=t,r.initialize(i),Object.seal(pn.default(r)),r}return l.default(n,[{key:"delete",value:function(){return dt.default(gt.default(n.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete(),this}},{key:"MAX_ATTRIBUTES",get:function(){return n.getMaxAttributes(this.gl)}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}},{key:"setProps",value:function(t){return this}},{key:"setElementBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this;return hn(!t||34963===t.target,Oi),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);var r=n.size,i=n.type,o=n.stride,a=n.offset,s=n.normalized,u=n.integer,l=n.divisor,c=this.gl,f=this.gl2;return t=Number(t),this.bind((function(){c.bindBuffer(34962,e.handle),u?(hn(Zt(c)),f.vertexAttribIPointer(t,r,i,o,a)):c.vertexAttribPointer(t,r,i,s,o,a),c.enableVertexAttribArray(t),f.vertexAttribDivisor(t,l||0)})),this}},{key:"enable",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!e&&0===t&&!n.isSupported(this.gl,{constantAttributeZero:!0});if(!r){var i=this;t=Number(t),this.bind((function(){return e?i.gl.enableVertexAttribArray(t):i.gl.disableVertexAttribArray(t)}))}return this}},{key:"getConstantBuffer",value:function(t,e){var n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t,o=!this.buffer;if(this.buffer=this.buffer||new Fn(this.gl,r),o=(o=o||this.buffer.reallocate(r))||!this._compareConstantArrayValues(n,this.bufferValue)){var a=Ii(e.constructor,i);!function(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,u=a*s,l=0,c=i;l<s;l++)e[c++]=n[l];for(;l<u;)l<u-l?(e.copyWithin(i+l,i,i+l),l*=2):(e.copyWithin(i+l,i,i+u-l),l=u)}({target:a,source:n,start:0,count:i}),this.buffer.subData(a),this.bufferValue=e}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(t){return Array.isArray(t)?new Float32Array(t):t}},{key:"_compareConstantArrayValues",value:function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(t){return this.gl2.deleteVertexArray(t),[this.elements]}},{key:"_bindHandle",value:function(t){this.gl2.bindVertexArray(t)}},{key:"_getParameter",value:function(t,e){var n=e.location,r=this;return hn(Number.isFinite(n)),this.bind((function(){return 34373===t?r.gl.getVertexAttribOffset(n,t):r.gl.getVertexAttrib(n,t)}))}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.constantAttributeZero||(Zt(t)||"Chrome"===Mi.default())}},{key:"getDefaultArray",value:function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new n(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(t){return n.MAX_ATTRIBUTES=n.MAX_ATTRIBUTES||t.getParameter(34921),n.MAX_ATTRIBUTES}},{key:"setConstant",value:function(t,e,r){switch(r.constructor){case Float32Array:n._setConstantFloatArray(t,e,r);break;case Int32Array:n._setConstantIntArray(t,e,r);break;case Uint32Array:n._setConstantUintArray(t,e,r);break;default:hn(!1)}}},{key:"_setConstantFloatArray",value:function(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:hn(!1)}}},{key:"_setConstantIntArray",value:function(t,e,n){switch(hn(Zt(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:hn(!1)}}},{key:"_setConstantUintArray",value:function(t,e,n){switch(hn(Zt(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:hn(!1)}}}]),n}(xn),Ri=/^(.+)__LOCATION_([0-9]+)$/,Di=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],Ni=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Li(e),_n(this,"VertexArray","v6.0",Di),this.initialize(n),Object.seal(this)}return l.default(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(t){var e=this;return Object.assign(this.attributes,t),this.vertexArrayObject.bind((function(){for(var n in t){var r=t[n];e._setAttribute(n,r)}e.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}},{key:"setBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);var r=this._resolveLocationAndAccessor(t,e,e.accessor,n),i=r.location,o=r.accessor;return i>=0&&(this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,e,o)),this}},{key:"setConstant",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n)),i=r.location,o=r.accessor;return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.vertexArrayObject.setElementBuffer(null),t.buffer=t.buffer||new Fn(t.gl,{accessor:{size:4}});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof Fn&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(34962,t.buffer.handle),t.gl.vertexAttribPointer(e,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var n=t.values[e];n instanceof Fn&&t.setBuffer(e,n)}})),this}},{key:"bindForDraw",value:function(t,e,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(t,e),r=n()})),r}},{key:"_resolveLocationAndAccessor",value:function(t,e,n,r){var i={location:-1,accessor:null},o=this._getAttributeIndex(t),a=o.location,s=o.name;if(!Number.isFinite(a)||a<0){var u=this;return this.unused[t]=e,qt.once(3,(function(){return"unused value ".concat(t," in ").concat(u.id)}))(),i}var l=this._getAttributeInfo(s||a);if(!l)return i;var c=this.accessors[a]||{},f=Ln.resolve(l.accessor,c,n,r),p=f.size,h=f.type;return hn(Number.isFinite(p)&&Number.isFinite(h)),{location:a,accessor:f}}},{key:"_getAttributeInfo",value:function(t){return this.configuration&&this.configuration.getAttributeInfo(t)}},{key:"_getAttributeIndex",value:function(t){var e=Number(t);if(Number.isFinite(e))return{location:e};var n=Ri.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:"_setAttribute",value:function(t,e){if(e instanceof Fn)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof Fn){var n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){var i=e;this.setConstant(t,i)}else{if(!(e.buffer instanceof Fn))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var o=e;this.setBuffer(t,o.buffer,o)}}},{key:"_setConstantAttributes",value:function(t,e){var n=Math.max(0|t,0|e),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(t,e){if(Li.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(t,e){Li.setConstant(this.gl,t,e)}},{key:"_updateDrawParams",value:function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}},{key:"_updateDrawParamsForLocation",value:function(t,e){var n=this.values[e],r=this.accessors[e];if(n){var i=r.divisor>0;if(t.isInstanced=t.isInstanced||i,n instanceof Fn){var o=n;if(i){var a=o.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,a)}else{var s=o.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,s)}}}}},{key:"setElements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}]),t}();function Fi(t){var e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}At=a("e2Lau");function ji(t,e){for(var n=e.maxElts,r=void 0===n?16:n,i=e.size,o=void 0===i?1:i,a="[",s=0;s<t.length&&s<r;++s)s>0&&(a+=",".concat(s%o==0?" ":"")),a+=zi(t[s],e);var u=t.length>r?"...":"]";return"".concat(a).concat(u)}function zi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=e.isInteger,i=void 0!==r&&r;if(Array.isArray(t)||ArrayBuffer.isView(t))return ji(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return i?"0":"0.";if(i)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var o=t.toPrecision(2),a=o.indexOf(".0");return a===o.length-2?o.slice(0,-1):o}function Bi(t){var e=t.header,n=void 0===e?"Uniforms":e,r=t.program,i=t.uniforms,o=t.undefinedOnly,a=void 0!==o&&o;hn(r);var s=".*Matrix",u=r._uniformSetters,l={},c=Object.keys(u).sort(),f=0,p=!0,h=!1,d=void 0;try{for(var g,y=c[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var A=g.value;A.match(".*_.*")||A.match(s)||Ui({table:l,header:n,uniforms:i,uniformName:A,undefinedOnly:a})&&f++}}catch(t){h=!0,d=t}finally{try{p||null==y.return||y.return()}finally{if(h)throw d}}var v=!0,m=!1,_=void 0;try{for(var b,x=c[Symbol.iterator]();!(v=(b=x.next()).done);v=!0){var w=b.value;w.match(s)&&Ui({table:l,header:n,uniforms:i,uniformName:w,undefinedOnly:a})&&f++}}catch(t){m=!0,_=t}finally{try{v||null==x.return||x.return()}finally{if(m)throw _}}var E=!0,S=!1,P=void 0;try{for(var k,C=c[Symbol.iterator]();!(E=(k=C.next()).done);E=!0){var T=k.value;l[T]||Ui({table:l,header:n,uniforms:i,uniformName:T,undefinedOnly:a})&&f++}}catch(t){S=!0,P=t}finally{try{E||null==C.return||C.return()}finally{if(S)throw P}}var I=0,M={};if(!a)for(var O in i){var L=i[O];l[O]||(I++,M[O]=At.default({Type:"NOT USED: ".concat(L)},n,zi(L)))}return{table:l,count:f,unusedTable:M,unusedCount:I}}function Ui(t){var e,n=t.table,r=t.header,i=t.uniforms,o=t.uniformName,a=t.undefinedOnly,s=i[o],u=function(t){return null!=t}(s);return(!a||!u)&&(n[o]=(e={},At.default(e,r,u?zi(s):"N/A"),At.default(e,"Uniform Type",u?s:"NOT PROVIDED"),e),!0)}At=a("e2Lau");function Vi(t,e,n,r){var i,o=t.gl;if(!e)return i={},At.default(i,r,"null"),At.default(i,"Format ","N/A"),i;var a,s,u,l,c="NOT PROVIDED",f=1,p=0,h=0;if(n&&(c=n.type,f=n.size,a=-1!==(c=String(c).replace("Array","")).indexOf("nt")),e instanceof Fn){var d,g,y=e,A=y.getDebugData(),v=A.data;if(s=A.changed?"*":"",u=v,p=(h=y.byteLength)/v.BYTES_PER_ELEMENT/f,n){var m=n.divisor>0;d="".concat(m?"I ":"P "," ").concat(p," (x").concat(f,"=").concat(h," bytes ").concat(gn(o,c),")")}else a=!0,d="".concat(h," bytes");return g={},At.default(g,r,"".concat(s).concat(zi(u,{size:f,isInteger:a}))),At.default(g,"Format ",d),g}return u=e,f=e.length,a=-1!==(c=String(e.constructor.name).replace("Array","")).indexOf("nt"),l={},At.default(l,r,"".concat(zi(u,{size:f,isInteger:a})," (constant)")),At.default(l,"Format ","".concat(f,"x").concat(c," (constant)")),l}function Gi(t,e){var n=wi(e.type,e.size);return n?"".concat(t," (").concat(n.name,")"):t}At=a("e2Lau");function qi(t){var e=t.accessor,n=wi(e.type,e.size);return n?"".concat(n.name," ").concat(t.name):t.name}u=a("ijozg"),l=a("pGAoq"),Yn=a("cqwPg"),f=a("gj7DP"),Qn=a("4Z8U5");var Wi=Kt.isBrowser()&&"undefined"!=typeof document,Hi=0,Xi=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t);var n=e.onCreateContext,r=void 0===n?function(t){return nn(t)}:n,i=e.onAddHTML,o=void 0===i?null:i,a=e.onInitialize,s=void 0===a?function(){}:a,l=e.onRender,c=void 0===l?function(){}:l,f=e.onFinalize,p=void 0===f?function(){}:f,h=e.onError,d=e.gl,g=void 0===d?null:d,y=e.glOptions,A=void 0===y?{}:y,v=e.debug,m=void 0!==v&&v,_=e.createFramebuffer,b=void 0!==_&&_,x=e.autoResizeViewport,w=void 0===x||x,E=e.autoResizeDrawingBuffer,S=void 0===E||E,P=e.stats,k=void 0===P?fn.get("animation-loop-".concat(Hi++)):P,C=e.useDevicePixels,T=void 0===C||C;"useDevicePixelRatio"in e&&(qt.deprecated("useDevicePixelRatio","useDevicePixels")(),T=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:o,onInitialize:s,onRender:c,onFinalize:p,onError:h,gl:g,glOptions:A,debug:m,createFramebuffer:b},this.gl=g,this.needsRedraw=null,this.timeline=null,this.stats=k,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:w,autoResizeDrawingBuffer:S,useDevicePixels:T}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return l.default(t,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(t){return hn("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:"setProps",value:function(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;if(this._running)return this;this._running=!0;var n=this._getPageLoadPromise().then((function(){return!e._running||e._initialized?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=ki.isSupported(e.gl,["timers"])?new ki(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))})).then((function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}));return this.props.onError&&n.catch(this.props.onError),this}},{key:"redraw",value:function(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(t){return this.timeline=t,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var t=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(e){t._resolveNextFrame=e}))),this._nextFramePromise}},{key:"toDataURL",value:function(){var t=this;return Yn.default(r(Qn).mark((function e(){return r(Qn).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setNeedsRedraw("toDataURL"),e.next=3,t.waitForRender();case 3:return e.abrupt("return",t.gl.canvas.toDataURL());case 4:case"end":return e.stop()}}),e)})))()}},{key:"isContextLost",value:function(){return this.gl.isContextLost()}},{key:"onCreateContext",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return(r=this.props).onCreateContext.apply(r,f.default(e))}},{key:"onInitialize",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return(r=this.props).onInitialize.apply(r,f.default(e))}},{key:"onRender",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return(r=this.props).onRender.apply(r,f.default(e))}},{key:"onFinalize",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return(r=this.props).onFinalize.apply(r,f.default(e))}},{key:"getHTMLControlValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}},{key:"setViewParameters",value:function(){return qt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var t=this,e=function(){t._running&&(t.redraw(),t._animationFrameId=t._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=Wi?new Promise((function(t,e){Wi&&"complete"===document.readyState?t(document):window.addEventListener("load",(function(){t(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}},{key:"_cancelAnimationFrame",value:function(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}},{key:"_requestAnimationFrame",value:function(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}},{key:"_renderFrame",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;this.display?(r=this.display)._renderFrame.apply(r,f.default(e)):this.onRender.apply(this,f.default(e))}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var t=this._getSizeAndAspect(),e=t.width,n=t.height,r=t.aspect;e===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(t){"object"==typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:"_createWebGLContext",value:function(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?rn(this.props.gl,t):this.onCreateContext(t),!Xt(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");qe(this.gl,Se),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);var n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){ln(t,Ye(e.useDevicePixels),e)}else{var n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new Gr(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var t=this.gl.canvas;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:"_onMouseleave",value:function(t){this.animationProps._mousePosition=null}}]),t}(),Zi=(u=a("ijozg"),l=a("pGAoq"),At=a("e2Lau"),u=a("ijozg"),l=a("pGAoq"),At=a("e2Lau"),c=a("1zCSZ"),"vs"),Yi="fs";u=a("ijozg"),l=a("pGAoq");function Qi(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}vt=a("5qgrd");var Ki={number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate:function(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function Ji(t){var e=$i(t);return"object"===e?t?"type"in t?Object.assign({},t,Ki[t.type]):"value"in t?(e=$i(t.value),Object.assign({type:e},t,Ki[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Ki[e])}function $i(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":void 0===t?"undefined":vt.default(t)}var to=function(){"use strict";function t(e){var n=e.name,r=e.vs,i=e.fs,o=e.dependencies,a=void 0===o?[]:o,s=e.uniforms,l=e.getUniforms,c=e.deprecations,f=void 0===c?[]:c,p=e.defines,h=void 0===p?{}:p,d=e.inject,g=void 0===d?{}:d,y=e.vertexShader,A=e.fragmentShader;u.default(this,t),Qi("string"==typeof n),this.name=n,this.vs=r||y,this.fs=i||A,this.getModuleUniforms=l,this.dependencies=a,this.deprecations=this._parseDeprecationDefinitions(f),this.defines=h,this.injections=function(t){var e={vs:{},fs:{}};for(var n in t){var r=t[n];"string"==typeof r&&(r={order:0,injection:r}),e[n.slice(0,2)][n]=r}return e}(g),s&&(this.uniforms=function(t){var e={};for(var n in t){var r=Ji(t[n]);e[n]=r}return e}(s))}return l.default(t,[{key:"getModuleSource",value:function(t){var e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:Qi(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(t,e){this.deprecations.forEach((function(n){n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(t){return t.forEach((function(t){if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}},{key:"_defaultGetUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=this.uniforms;for(var r in n){var i=n[r];r in t&&!i.private?(i.validate&&Qi(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}]),t}();function eo(t){return no(io(t))}function no(t){var e={},n={};return ro({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((function(t,e){return n[e]-n[t]})).map((function(t){return e[t]}))}function ro(t){var e=t.modules,n=t.level,r=t.moduleMap,i=t.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var o=!0,a=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;r[c.name]=c,(void 0===i[c.name]||i[c.name]<n)&&(i[c.name]=n)}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}var f=!0,p=!1,h=void 0;try{for(var d,g=e[Symbol.iterator]();!(f=(d=g.next()).done);f=!0){var y=d.value;y.dependencies&&ro({modules:y.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(t){p=!0,h=t}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}}function io(t,e){return t.map((function(t){return t instanceof to||(Qi("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Qi(t.name,"shader module has no name"),(t=new to(t)).dependencies=io(t.dependencies)),t}))}function oo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="undefined"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var ao={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},so={};Object.keys(ao).forEach((function(t){so[t]=t}));var uo={};function lo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ao[e];if(Qi(r,e),!oo(n))return!0;if(e in uo)return uo[e];var i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=t.createShader(35633);t.shaderSource(s,a),t.compileShader(s);var u=t.getShaderParameter(s,35713);return t.deleteShader(s),uo[e]=u,u}function co(t,e){var n=ao[e];Qi(n,e);var r=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return Qi(!1===i||!0===i),i}function fo(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return co(t,e)}))}var po=(Eg={},(At=a("e2Lau")).default(Eg,Zi,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),At.default(Eg,Yi,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),Eg),ho="__LUMA_INJECT_DECLARATIONS__",go=/void\s+main\s*\([^)]*\)\s*\{\n?/,yo=/}\n?[^{}]*$/,Ao=[];function vo(t,e,n){var r=function(e){var r=n[e];r.sort((function(t,e){return t.order-e.order})),Ao.length=r.length;for(var i=0,a=r.length;i<a;++i)Ao[i]=r[i].injection;var s="".concat(Ao.join("\n"),"\n");switch(e){case"vs:#decl":o&&(t=t.replace(ho,s));break;case"vs:#main-start":o&&(t=t.replace(go,(function(t){return t+s})));break;case"vs:#main-end":o&&(t=t.replace(yo,(function(t){return s+t})));break;case"fs:#decl":o||(t=t.replace(ho,s));break;case"fs:#main-start":o||(t=t.replace(go,(function(t){return t+s})));break;case"fs:#main-end":o||(t=t.replace(yo,(function(t){return s+t})));break;default:t=t.replace(e,(function(t){return t+s}))}},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e===Zi;for(var a in n)r(a);return t=t.replace(ho,""),i&&(t=t.replace(/\}\s*$/,(function(t){return t+po[e]}))),t}function mo(t){var e={};return Qi(Array.isArray(t)&&t.length>1),t.forEach((function(t){for(var n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}f=a("gj7DP"),c=a("1zCSZ");function _o(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}var bo=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],xo=f.default(bo).concat([[_o("attribute"),"in $1"],[_o("varying"),"out $1"]]),wo=f.default(bo).concat([[_o("varying"),"in $1"]]),Eo=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],So=f.default(Eo).concat([[_o("in"),"attribute $1"],[_o("out"),"varying $1"]]),Po=f.default(Eo).concat([[_o("in"),"varying $1"]]),ko="gl_FragColor",Co=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,To=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Io(t,e,n){switch(e){case 300:return n?Mo(t,xo):function(t){var e=(t=Mo(t,wo)).match(Co);if(e){var n=e[1];t=t.replace(new RegExp("\\b".concat(ko,"\\b"),"g"),n)}else{var r="fragmentColor";t=t.replace(To,(function(t){return"out vec4 ".concat(r,";\n").concat(t)})).replace(new RegExp("\\b".concat(ko,"\\b"),"g"),r)}return t}(t);case 100:return n?Mo(t,So):function(t){var e=(t=Mo(t,Po)).match(Co);if(e){var n=e[1];t=t.replace(Co,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),ko)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function Mo(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=c.default(o.value,2),u=s[0],l=s[1];t=t.replace(u,l)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}var Oo="\n\n".concat(ho,"\n\n"),Lo=(Eg={},At.default(Eg,Zi,"vertex"),At.default(Eg,Yi,"fragment"),Eg);function Ro(t,e){var n=e.vs,r=e.fs,i=eo(e.modules||[]);return{gl:t,vs:Do(t,Object.assign({},e,{source:n,type:Zi,modules:i})),fs:Do(t,Object.assign({},e,{source:r,type:Yi,modules:i})),getUniforms:No(i)}}function Do(t,e){var n=e.id,r=e.source,i=e.type,o=e.modules,a=e.defines,s=void 0===a?{}:a,u=e.hookFunctions,l=void 0===u?[]:u,f=e.inject,p=void 0===f?{}:f,h=e.transpileToGLSL100,d=void 0!==h&&h,g=e.prologue,y=void 0===g||g,A=e.log;Qi("string"==typeof r,"shader source must be a string");var v=i===Zi,m=r.split("\n"),_=100,b="",x=r;0===m[0].indexOf("#version ")?(_=300,b=m[0],x=m.slice(1).join("\n")):b="#version ".concat(_);var w={};o.forEach((function(t){Object.assign(w,t.getDefines())})),Object.assign(w,s);var E=y?"".concat(b,"\n").concat(function(t){var e=t.id,n=t.source,r=t.type;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(Lo[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){var e=t.type;return"\n#define SHADER_TYPE_".concat(Lo[e].toUpperCase(),"\n")}({type:i}),"\n").concat(function(t){var e=function(t){var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937),i=function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r);return{gpuVendor:i,vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function(t,e,n){var r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return fo(t,so.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),fo(t,so.GLSL_DERIVATIVES)&&lo(t,so.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),fo(t,so.GLSL_FRAG_DATA)&&lo(t,so.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),fo(t,so.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(var r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;var i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(w),"\n").concat(v?"":"precision highp float;\n\n","\n"):"".concat(b,"\n"),S=function(t){var e={vs:{},fs:{}};return t.forEach((function(t){var n;"string"!=typeof t?t=(n=t).hook:n={},t=t.trim();var r=c.default(t.split(":"),2),i=r[0],o=r[1],a=t.replace(/\(.+/,"");e[i][a]=Object.assign(n,{signature:o})})),e}(l),P={},k={},C={};for(var T in p){var I="string"==typeof p[T]?{injection:p[T],order:0}:p[T],M=T.match(/^(v|f)s:(#)?([\w-]+)$/);if(M){var O=M[2],L=M[3];O?"decl"===L?k[T]=[I]:C[T]=[I]:P[T]=[I]}else C[T]=[I]}var R=!0,D=!1,N=void 0;try{for(var F,j=o[Symbol.iterator]();!(R=(F=j.next()).done);R=!0){var z=F.value;A&&z.checkDeprecations(x,A),E+=z.getModuleSource(i,_);var B=z.injections[i];for(var U in B){var V=U.match(/^(v|f)s:#([\w-]+)$/);if(V){var G="decl"===V[2]?k:C;G[U]=G[U]||[],G[U].push(B[U])}else P[U]=P[U]||[],P[U].push(B[U])}}}catch(t){D=!0,N=t}finally{try{R||null==j.return||j.return()}finally{if(D)throw N}}return E=vo(E+=Oo,i,k),E+=function(t,e){var n="";for(var r in t){var i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){var o=e[r];o.sort((function(t,e){return t.order-e.order}));var a=!0,s=!1,u=void 0;try{for(var l,c=o[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;n+="  ".concat(f.injection,"\n")}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(S[i],P),E=Io(E=vo(E+=x,i,C),d?100:_,v)}function No(t){return function(e){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value.getUniforms(e,n);Object.assign(n,u)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}c=a("1zCSZ");var Fo="void main() {gl_FragColor = vec4(0);}",jo="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",zo="#version 300 es\n".concat(jo);function Bo(t,e){e=Array.isArray(e)?e:[e];var n=t.replace(/^\s+/,"").split(/\s+/),r=c.default(n,3),i=r[0],o=r[1],a=r[2];return e.includes(i)&&o&&a?{qualifier:i,type:o,name:a.split(";")[0]}:null}function Uo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,r=t.input,i=t.inputType,o=t.output;if(!r)return 300===n?zo:n>300?"#version ".concat(n,"\n").concat(jo):Fo;var a=Go(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}function Vo(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Qi(!1),null}}function Go(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Qi(!1),null}}var qo={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Wo={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};var Ho={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wo,e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){var n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){var r=Array.from(t.pickingHighlightColor,(function(t){return t/255}));Number.isFinite(r[3])||(r[3]=1),e.picking_uHighlightColor=r}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}},Xo="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Zo={lightSources:{}};function Yo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=void 0===e?[0,0,0]:e,r=t.intensity,i=void 0===r?1:r;return n.map((function(t){return t*i/255}))}function Qo(t){var e=t.ambientLight,n=t.pointLights,r=void 0===n?[]:n,i=t.directionalLights,o=void 0===i?[]:i,a={};return a["lighting_uAmbientLight.color"]=e?Yo(e):[0,0,0],r.forEach((function(t,e){a["lighting_uPointLight[".concat(e,"].color")]=Yo(t),a["lighting_uPointLight[".concat(e,"].position")]=t.position,a["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),a.lighting_uPointLightCount=r.length,o.forEach((function(t,e){a["lighting_uDirectionalLight[".concat(e,"].color")]=Yo(t),a["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),a.lighting_uDirectionalLightCount=o.length,a}var Ko={name:"lights",vs:Xo,fs:Xo,getUniforms:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zo;if("lightSources"in e){var n=e.lightSources||{},r=n.ambientLight,i=n.pointLights,o=n.directionalLights,a=r||i&&i.length>0||o&&o.length>0;return a?Object.assign({},Qo({ambientLight:r,pointLights:i,directionalLights:o}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){var s={pointLights:[],directionalLights:[]},u=!0,l=!1,c=void 0;try{for(var f,p=(e.lights||[])[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;switch(h.type){case"ambient":s.ambientLight=h;break;case"directional":s.directionalLights.push(h);break;case"point":s.pointLights.push(h)}}}catch(t){l=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}return t({lightSources:s})}return{}},defines:{MAX_LIGHTS:3}},Jo="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",$o={};function ta(t){var e=t.ambient,n=void 0===e?.35:e,r=t.diffuse,i=void 0===r?.6:r,o=t.shininess,a=void 0===o?32:o,s=t.specularColor;return{lighting_uAmbient:n,lighting_uDiffuse:i,lighting_uShininess:a,lighting_uSpecularColor:(void 0===s?[30,30,30]:s).map((function(t){return t/255}))}}function ea(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$o;if(!("material"in t))return{};var e=t.material;return e?ta(e):{lighting_uEnabled:!1}}var na={name:"gouraud-lighting",dependencies:[Ko],vs:Jo,defines:{LIGHTING_VERTEX:1},getUniforms:ea},ra={name:"phong-lighting",dependencies:[Ko],fs:Jo,defines:{LIGHTING_FRAGMENT:1},getUniforms:ea},ia={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},oa=function(){"use strict";function t(e){u.default(this,t),this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return l.default(t,[{key:"addDefaultModule",value:function(t){this._defaultModules.find((function(e){return e.name===t.name}))||this._defaultModules.push(t),this.stateHash++}},{key:"removeDefaultModule",value:function(t){var e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((function(t){return t.name!==e})),this.stateHash++}},{key:"addShaderHook",value:function(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=t.vs,r=void 0===n?"":n,i=t.fs,o=void 0===i?"":i,a=t.defines,s=void 0===a?{}:a,u=t.inject,l=void 0===u?{}:u,c=t.varyings,f=void 0===c?[]:c,p=t.bufferMode,h=void 0===p?35981:p,d=t.transpileToGLSL100,g=void 0!==d&&d,y=this._getModuleList(t.modules),A=this._getHash(r),v=this._getHash(o),m=y.map((function(t){return e._getHash(t.name)})).sort(),_=f.map((function(t){return e._getHash(t)})),b=Object.keys(s).sort(),x=Object.keys(l).sort(),w=[],E=[],S=!0,P=!1,k=void 0;try{for(var C,T=b[Symbol.iterator]();!(S=(C=T.next()).done);S=!0){var I=C.value;w.push(this._getHash(I)),w.push(this._getHash(s[I]))}}catch(t){P=!0,k=t}finally{try{S||null==T.return||T.return()}finally{if(P)throw k}}var M=!0,O=!1,L=void 0;try{for(var R,D=x[Symbol.iterator]();!(M=(R=D.next()).done);M=!0){var N=R.value;E.push(this._getHash(N)),E.push(this._getHash(l[N]))}}catch(t){O=!0,L=t}finally{try{M||null==D.return||D.return()}finally{if(O)throw L}}var F="".concat(A,"/").concat(v,"D").concat(w.join("/"),"M").concat(m.join("/"),"I").concat(E.join("/"),"V").concat(_.join("/"),"H").concat(this.stateHash,"B").concat(h).concat(g?"T":"");if(!this._programCache[F]){var j=Ro(this.gl,{vs:r,fs:o,modules:y,inject:l,defines:s,hookFunctions:this._hookFunctions,transpileToGLSL100:g});this._programCache[F]=new Pi(this.gl,{hash:F,vs:j.vs,fs:j.fs,varyings:f,bufferMode:h}),this._getUniforms[F]=j.getUniforms||function(t){},this._useCounts[F]=0}return this._useCounts[F]++,this._programCache[F]}},{key:"getUniforms",value:function(t){return this._getUniforms[t.hash]||null}},{key:"release",value:function(t){var e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}},{key:"_getHash",value:function(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}},{key:"_getModuleList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Array(this._defaultModules.length+t.length),n={},r=0,i=0,o=this._defaultModules.length;i<o;++i){var a=this._defaultModules[i],s=a.name;e[r++]=a,n[s]=!0}for(var u=0,l=t.length;u<l;++u){var c=t[u],f=c.name;n[f]||(e[r++]=c,n[f]=!0)}return e.length=r,e}}],[{key:"getDefaultProgramManager",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}}]),t}(),aa=(yt=a("11zLF"),{POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"});function sa(t,e){var n=(e||{}).attributeMap,r=void 0===n?aa:n;return r&&r[t]||t}function ua(t,e){var n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}hn(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}var la=function(){},ca={},fa=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t);var r=n.id,i=void 0===r?An("model"):r;hn(Xt(e)),this.id=i,this.gl=e,this.id=n.id||An("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}return l.default(t,[{key:"initialize",value:function(t){this.props={},this.programManager=t.programManager||oa.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var e=t.program,n=void 0===e?null:e,r=t.vs,i=t.fs,o=t.modules,a=t.defines,s=t.inject,u=t.varyings,l=t.bufferMode,c=t.transpileToGLSL100;this.programProps={program:n,vs:r,fs:i,modules:o,defines:a,inject:s,varyings:u,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},hn(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(t){this._setModelProps(t)}},{key:"delete",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(t){var e=t.program,n=t.vs,r=t.fs,i=t.modules,o=t.defines,a=t.inject,s=t.varyings,u=t.bufferMode,l=t.transpileToGLSL100;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:u,transpileToGLSL100:l},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(t){return this.drawMode=t,this}},{key:"setVertexCount",value:function(t){return hn(Number.isFinite(t)),this.vertexCount=t,this}},{key:"setInstanceCount",value:function(t){return hn(Number.isFinite(t)),this.instanceCount=t,this}},{key:"setGeometry",value:function(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){var r={},i=e.indices;for(var o in e.attributes){var a=e.attributes[o],s=sa(o,n);if("indices"===o)i=a;else if(a.constant)r[s]=a.value;else{var u=a.value,l=yt.default({},a);delete l.value,r[s]=[new Fn(t,u),l],ua(o,l)}}if(i){var c=i.value||i;hn(c instanceof Uint16Array||c instanceof Uint32Array,'attribute array for "indices" must be of integer type');var f={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new Fn(t,{data:c,target:34963}),f]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mn(t))return this;var e={};for(var n in t){var r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}},{key:"getModuleUniforms",value:function(t){this._checkProgram();var e=this.programManager.getUniforms(this.program);return e?e(t):{}}},{key:"updateModuleSettings",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:"clear",value:function(t){return lr(this.program.gl,t),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var e,n=t.moduleSettings,r=void 0===n?null:n,i=t.framebuffer,o=t.uniforms,a=void 0===o?{}:o,s=t.attributes,u=void 0===s?{}:s,l=t.transformFeedback,c=void 0===l?this.transformFeedback:l,f=t.parameters,p=void 0===f?{}:f,h=t.vertexArray,d=void 0===h?this.vertexArray:h;this.setAttributes(u),this.updateModuleSettings(r),this.setUniforms(a),qt.priority>=2&&(e=this._logDrawCallStart(2));var g=this.vertexArray.getDrawParams(),y=this.props,A=y.isIndexed,v=void 0===A?g.isIndexed:A,m=y.indexType,_=void 0===m?g.indexType:m,b=y.indexOffset,x=void 0===b?g.indexOffset:b,w=y.vertexArrayInstanced,E=void 0===w?g.isInstanced:w;E&&!this.isInstanced&&qt.warn("Found instanced attributes on non-instanced model",this.id)();var S=this,P=S.isInstanced,k=S.instanceCount,C=this.props,T=C.onBeforeRender,I=void 0===T?la:T,M=C.onAfterRender,O=void 0===M?la:M;I(),this.program.setUniforms(this.uniforms);var L=this.program.draw(Object.assign(ca,t,{logPriority:e,uniforms:null,framebuffer:i,parameters:p,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:d,transformFeedback:c,isIndexed:v,indexType:_,isInstanced:P,instanceCount:k,offset:v?x:0}));return O(),qt.priority>=2&&this._logDrawCallEnd(e,d,i),L}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,n=void 0===e||e,r=t.feedbackBuffers,i=t.unbindModels,o=void 0===i?[]:i,a=t.parameters;r&&this._setFeedbackBuffers(r),n&&(a=Object.assign({},a,At.default({},35977,n))),o.forEach((function(t){return t.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},t,{parameters:a}))}finally{o.forEach((function(t){return t.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return qt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}},{key:"_setModelProps",value:function(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}},{key:"_checkProgram",value:function(){if(this._programDirty||this.programManager.stateHash!==this._programManagerState){var t=this.programProps.program;if(t)this._managedProgram=!1;else{var e=this.programProps,n=e.vs,r=e.fs,i=e.modules,o=e.inject,a=e.defines,s=e.varyings,u=e.bufferMode,l=e.transpileToGLSL100;t=this.programManager.get({vs:n,fs:r,modules:i,inject:o,defines:a,varyings:s,bufferMode:u,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}hn(t instanceof Pi,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Ni(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var t in this.geometryBuffers){var e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof Fn&&e.delete()}}},{key:"_setAnimationProps",value:function(t){this.animated&&hn(t,"Model.draw(): animated uniforms but no animationProps")}},{key:"_setFeedbackBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mn(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new Ci(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}},{key:"_logDrawCallStart",value:function(t){var e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),qt.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:qt.level<=2})(),t}},{key:"_logDrawCallEnd",value:function(t,e,n,r){if(void 0!==t){var i=function(t){var e=t.vertexArray,n=t.header,r=void 0===n?"Attributes":n;if(!e.configuration)return{};var i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=Vi(e,e.elements,null,r));var o=e.values;for(var a in o){var s=e._getAttributeInfo(a);if(s){var u="".concat(a,": ").concat(s.name),l=e.accessors[s.location];l&&(u="".concat(a,": ").concat(Gi(s.name,l))),i[u]=Vi(e,o[a],l,r)}}return i}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=Bi({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),a=o.table,s=o.unusedTable,u=o.unusedCount,l=Bi({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),c=l.table;l.count>0&&qt.log("MISSING UNIFORMS",Object.keys(c))(),u>0&&qt.log("UNUSED UNIFORMS",Object.keys(s))();var f=function(t){var e={},n="Accessors for ".concat(t.id),r=!0,i=!1,o=void 0;try{for(var a,s=t.attributeInfos[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u){var l=qi(u);e["in ".concat(l)]=At.default({},n,JSON.stringify(u.accessor))}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var c=!0,f=!1,p=void 0;try{for(var h,d=t.varyingInfos[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var g=h.value;if(g){var y=qi(g);e["out ".concat(y)]=At.default({},n,JSON.stringify(g.accessor))}}}catch(t){f=!0,p=t}finally{try{c||null==d.return||d.return()}finally{if(f)throw p}}return e}(this.vertexArray.configuration);qt.table(t,i)(),qt.table(t,a)(),qt.table(t+1,f)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),qt.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),t}(),pa=(u=a("ijozg"),l=a("pGAoq"),u=a("ijozg"),l=a("pGAoq"),function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t),this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return l.default(t,[{key:"setupResources",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.bindings[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this._setupTransformFeedback(a,t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.varyings;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.transformFeedback,i=Object.assign({},n,t.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}},{key:"getBuffer",value:function(t){var e=this.bindings[this.currentIndex].feedbackBuffers,n=t?e[t]:null;return n?n instanceof Fn?n:n.buffer:null}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,n=this.getBuffer(e);return n?n.getData():null}},{key:"delete",value:function(){for(var t in this.resources)this.resources[t].delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&hn(Zt(this.gl))}},{key:"_getFeedbackBuffers",value:function(t){var e=t.sourceBuffers,n=void 0===e?{}:e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var o=this.feedbackMap[i];i in n&&(r[o]=i)}for(var a in Object.assign(r,t.feedbackBuffers),r){var s=r[a];if("string"==typeof s){var u=n[s],l=u.byteLength,c=u.usage,f=u.accessor;r[a]=this._createNewBuffer(a,{byteLength:l,usage:c,accessor:f})}}return r}},{key:"_setupBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=void 0===e?null:e;Object.assign(this.feedbackMap,t.feedbackMap);var r=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(t,e){var n=e.model.program;t.transformFeedback=new Ci(this.gl,{program:n,buffers:t.feedbackBuffers})}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){var e=this._swapBuffers(this.bindings[this.currentIndex]),n=e.sourceBuffers,r=e.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}},{key:"_swapBuffers",value:function(t){if(!this.feedbackMap)return null;var e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],hn(n[i]instanceof Fn)}return{sourceBuffers:e,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(t,e){var n=new Fn(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),t}()),ha=(At=a("e2Lau"),u=a("ijozg"),l=a("pGAoq"),"transform_uSampler_"),da="transform_uSize_",ga="transform_position";function ya(t){var e=t.vs,n=t.sourceTextureMap,r=t.targetTextureVarying,i=t.targetTexture,o=Object.keys(n).length,a=null,s={},u=e,l={};if(o>0||r){var c=u.split("\n"),f=c.slice();if(c.forEach((function(t,e,i){if(o>0){var u=function(t,e){var n={},r=function(t){return Bo(t,["attribute","in"])}(t);if(!r)return null;var i=r.type,o=r.name;if(o&&e[o]){var a="// ".concat(t," => Replaced by Transform with a sampler"),s=function(t){var e="".concat(ha).concat(t),n="".concat(da).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),u=s.samplerName,l=s.sizeName,c=s.uniformDeclerations,f=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Qi(!1),null}}(i),p="  ".concat(i," ").concat(o," = transform_getInput(").concat(u,", ").concat(l,").").concat(f,";\n");return n[u]=o,{updatedLine:a,inject:{"vs:#decl":c,"vs:#main-start":p},samplerTextureMap:n}}return null}(t,n);if(u){var c=u.updatedLine,p=u.inject;f[e]=c,l=mo([l,p]),Object.assign(s,u.samplerTextureMap),o--}}r&&!a&&(a=function(t,e){var n=Bo(t,["varying","out"]);return n&&n.name===e?n.type:null}(t,r))})),r){hn(i);var p="".concat(da).concat(r),h="uniform vec2 ".concat(p,";\n"),d="     vec2 ".concat(ga," = transform_getPos(").concat(p,");\n     gl_Position = vec4(").concat(ga,", 0, 1.);\n");l=mo([l,{"vs:#decl":h,"vs:#main-start":d}])}u=f.join("\n")}return{vs:u,targetTextureType:a,inject:l,samplerTextureMap:s}}function Aa(t){var e,n,r,i,o=t.sourceTextureMap,a=t.targetTextureVarying,s=t.targetTexture,u={};a&&(e=(r=s).width,n=r.height,u["".concat(da).concat(a)]=[e,n]);for(var l in o)e=(i=o[l]).width,n=i.height,u["".concat(da).concat(l)]=[e,n];return u}var va=(Eg={},At.default(Eg,10241,9728),At.default(Eg,10240,9728),At.default(Eg,10242,33071),At.default(Eg,10243,33071),Eg),ma="transform_output",_a=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t),this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return l.default(t,[{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t);return Object.assign({},t,e)}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.sourceTextures,i=e.framebuffer,o=e.targetTexture,a=Object.assign({},n,t.attributes),s=Object.assign({},t.uniforms),u=Object.assign({},t.parameters),l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var c in a.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var f=this.samplerTextureMap[c];s[c]=r[f]}this._setSourceTextureParameters();var p=Aa({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,p)}return this.hasTargetTexture&&(l=!1,u.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:l,parameters:u}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.packed,n=void 0!==e&&e,r=this.bindings[this.currentIndex].framebuffer,i=pr(r);if(!n)return i;for(var o=i.constructor,a=Vo(this.targetTextureType),s=new o(i.length*a/4),u=0,l=0;l<i.length;l+=4)for(var c=0;c<a;c++)s[u++]=i[l+c];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._targetTextureVarying,n=t._swapTexture;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}},{key:"_createTargetTexture",value:function(t){var e=t.sourceTextures,n=t.textureOrReference;if(n instanceof Zn)return n;var r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=t._sourceTextures,r=void 0===n?{}:n,i=t._targetTexture,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:r,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}},{key:"_updateElementIDBuffer",value:function(t){if(!("number"!=typeof t||this.elementCount>=t)){var e=new Float32Array(t);e.forEach((function(t,e,n){n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new Fn(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){var e=this._swapTextures(this.bindings[this.currentIndex]),n=e.sourceTextures,r=e.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(t,e){var n=e.sourceBuffers,r=e.sourceTextures,i=e.targetTexture;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;var o=i.width,a=i.height,s=t.framebuffer;s?(s.update({attachments:At.default({},36064,i),resizeAttachments:!1}),s.resize({width:o,height:a})):t.framebuffer=new Gr(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:At.default({},36064,i)})}return t}},{key:"_setSourceTextureParameters",value:function(){var t=this.currentIndex,e=this.bindings[t].sourceTextures;for(var n in e)e[n].setParameters(va)}},{key:"_swapTextures",value:function(t){if(!this._swapTexture)return null;var e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(t){var e,n=Wr(t,{parameters:(e={},At.default(e,10241,9728),At.default(e,10240,9728),At.default(e,10242,33071),At.default(e,10243,33071),e),pixelStore:At.default({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceTextures,r=e.targetTexture,i=ya({vs:t.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),o=i.vs,a=i.uniforms,s=i.targetTextureType,u=i.inject,l=i.samplerTextureMap,c=mo([t.inject||{},u]);this.targetTextureType=s,this.samplerTextureMap=l;var f=t._fs||Uo({version:Fi(o),input:this.targetTextureVarying,inputType:s,output:ma}),p=this.hasSourceTextures||this.targetTextureVarying?[ia].concat(t.modules||[]):t.modules;return{vs:o,fs:f,modules:p,uniforms:a,inject:c}}}]),t}(),ba=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t),this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return l.default(t,[{key:"delete",value:function(){var t=this,e=t.model,n=t.bufferTransform,r=t.textureTransform;e&&e.delete(),n&&n.delete(),r&&r.delete()}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRenderTarget,n=void 0===e||e,r=this._updateDrawOptions(t);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var t=!1,e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t=t||s.swap()}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}hn(t,"Nothing to swap")}},{key:"getBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.getData(t);if(u)return u}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);var e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.update(t)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new fa(e,Object.assign({},t,{fs:t.fs||Uo({version:Fi(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(t){var e=Object.assign({},t),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){e=a.value.updateModelProps(e)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return e}},{key:"_buildResourceTransforms",value:function(t,e){(function(t){return!(mn(t.feedbackBuffers)&&mn(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(e)&&(this.bufferTransform=new pa(t,e)),function(t){return!(mn(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(e)&&(this.textureTransform=new _a(t,e)),hn(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(t){var e=Object.assign({},t),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;e=Object.assign(e,u.getDrawOptions(e))}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return e}}],[{key:"isSupported",value:function(t){return Zt(t)}}]),t}();u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF");var xa={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},wa=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t);var n=e.id,r=void 0===n?An("geometry"):n,i=e.drawMode,o=void 0===i?xa.TRIANGLES:i,a=e.attributes,s=void 0===a?{}:a,l=e.indices,c=void 0===l?null:l,f=e.vertexCount,p=void 0===f?null:f;this.id=r,this.drawMode=0|o,this.attributes={},this.userData={},this._setAttributes(s,c),this.vertexCount=p||this._calculateVertexCount(this.attributes,this.indices)}return l.default(t,[{key:"mode",get:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?yt.default({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}},{key:"_setAttributes",value:function(t,e){for(var n in e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),t){var r=t[n];r=ArrayBuffer.isView(r)?{value:r}:r,hn(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(hn(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(t,e){if(e)return e.value.length;var n=1/0;for(var r in t){var i=t[r],o=i.value,a=i.size;!i.constant&&o&&a>=1&&(n=Math.min(n,o.length/a))}return hn(Number.isFinite(n)),n}}],[{key:"DRAW_MODE",get:function(){return xa}}]),t}(),Ea=(u=a("ijozg"),l=a("pGAoq"),c=a("1zCSZ"),1),Sa=1,Pa=function(){"use strict";function t(){u.default(this,t),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return l.default(t,[{key:"addChannel",value:function(t){var e=t.delay,n=void 0===e?0:e,r=t.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.rate,a=void 0===o?1:o,s=t.repeat,u=Ea++,l={time:0,delay:n,duration:i,rate:a,repeat:void 0===s?1:s};return this._setChannelTime(l,this.time),this.channels.set(u,l),u}},{key:"removeChannel",value:function(t){this.channels.delete(t);var e=!0,n=!1,r=void 0;try{for(var i,o=this.animations[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=c.default(i.value,2),s=a[0];a[1].channel===t&&this.detachAnimation(s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"isFinished",value:function(t){var e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}},{key:"getTime",value:function(t){if(void 0===t)return this.time;var e=this.channels.get(t);return void 0===e?-1:e.time}},{key:"setTime",value:function(t){this.time=Math.max(0,t);var e=this.channels.values(),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._setChannelTime(s,this.time)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var u=this.animations.values(),l=!0,c=!1,f=void 0;try{for(var p,h=u[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var d=p.value,g=d.animation,y=d.channel;g.setTime(this.getTime(y))}}catch(t){c=!0,f=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(t,e){var n=Sa++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}},{key:"detachAnimation",value:function(t){this.animations.delete(t)}},{key:"update",value:function(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}},{key:"_setChannelTime",value:function(t,e){var n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}]),t}(),ka={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},Ca=new Nt({id:"deck"}),Ta={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ta,"IDENTITY",{get:function(){return Ca.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var Ia={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ma={common:0,meters:1,pixels:2},Oa={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},La="draw",Ra="mask",Da=Object.keys(Ta).map((function(t){return"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Ta[t],";")})).join(""),Na=Object.keys(Ia).map((function(t){return"const int PROJECTION_MODE_".concat(t," = ").concat(Ia[t],";")})).join(""),Fa=Object.keys(Ma).map((function(t){return"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ma[t],";")})).join(""),ja="".concat(Da,"\n").concat(Na,"\n").concat(Fa,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);\n      return 1.0 / cos(radians(y));\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),za="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Ba(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],p=e[10],h=e[11],d=e[12],g=e[13],y=e[14],A=e[15],v=n*s-r*a,m=n*u-i*a,_=n*l-o*a,b=r*u-i*s,x=r*l-o*s,w=i*l-o*u,E=c*g-f*d,S=c*y-p*d,P=c*A-h*d,k=f*y-p*g,C=f*A-h*g,T=p*A-h*y,I=v*T-m*C+_*k+b*P-x*S+w*E;return I?(I=1/I,t[0]=(s*T-u*C+l*k)*I,t[1]=(i*C-r*T-o*k)*I,t[2]=(g*w-y*x+A*b)*I,t[3]=(p*x-f*w-h*b)*I,t[4]=(u*P-a*T-l*S)*I,t[5]=(n*T-i*P+o*S)*I,t[6]=(y*_-d*w-A*m)*I,t[7]=(c*w-p*_+h*m)*I,t[8]=(a*C-s*P+l*E)*I,t[9]=(r*P-n*C-o*E)*I,t[10]=(d*x-g*_+A*v)*I,t[11]=(f*_-c*x-h*v)*I,t[12]=(s*S-a*k-u*E)*I,t[13]=(n*k-r*S+i*E)*I,t[14]=(g*m-d*b-y*v)*I,t[15]=(c*b-f*m+p*v)*I,t):null}function Ua(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],g=e[12],y=e[13],A=e[14],v=e[15],m=n[0],_=n[1],b=n[2],x=n[3];return t[0]=m*r+_*s+b*f+x*g,t[1]=m*i+_*u+b*p+x*y,t[2]=m*o+_*l+b*h+x*A,t[3]=m*a+_*c+b*d+x*v,m=n[4],_=n[5],b=n[6],x=n[7],t[4]=m*r+_*s+b*f+x*g,t[5]=m*i+_*u+b*p+x*y,t[6]=m*o+_*l+b*h+x*A,t[7]=m*a+_*c+b*d+x*v,m=n[8],_=n[9],b=n[10],x=n[11],t[8]=m*r+_*s+b*f+x*g,t[9]=m*i+_*u+b*p+x*y,t[10]=m*o+_*l+b*h+x*A,t[11]=m*a+_*c+b*d+x*v,m=n[12],_=n[13],b=n[14],x=n[15],t[12]=m*r+_*s+b*f+x*g,t[13]=m*i+_*u+b*p+x*y,t[14]=m*o+_*l+b*h+x*A,t[15]=m*a+_*c+b*d+x*v,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Va(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}!function(){var t=function(){var t=new za(4);return za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();function Ga(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function qa(t){var e,n={};return function(r){for(var i in r)if(!Ga(r[i],n[i])){e=t(r),n=r;break}return e}}var Wa=[0,0,0,0],Ha=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Xa=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Za=[0,0,0],Ya=[0,0,0],Qa=qa((function(t){var e=t.viewport,n=t.devicePixelRatio,r=t.coordinateSystem,i=t.coordinateOrigin,o=function(t,e,n){var r=t.viewMatrixUncentered,i=t.projectionMatrix,o=t.viewMatrix,a=t.viewProjectionMatrix,s=Wa,u=Wa,l=t.cameraPosition,c=Ka(t,e,n),f=c.geospatialOrigin,p=c.shaderCoordinateOrigin;c.offsetMode&&(u=t.projectPosition(f||p),l=[l[0]-u[0],l[1]-u[1],l[2]-u[2]],u[3]=1,s=Va([],u,a),a=Ua([],i,o=r||o),a=Ua([],a,Ha));return{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:u,cameraPosCommon:l,shaderCoordinateOrigin:p,geospatialOrigin:f}}(e,r,i),a=o.projectionCenter,s=o.viewProjectionMatrix,u=o.originCommon,l=o.cameraPosCommon,c=o.shaderCoordinateOrigin,f=o.geospatialOrigin,p=e.getDistanceScales(),h=[e.width*n,e.height*n],d=Va([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,g={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:u.slice(0,3),project_uCenter:a,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:d,project_uCommonUnitsPerMeter:p.unitsPerMeter,project_uCommonUnitsPerWorldUnit:p.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Za,project_uScale:e.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:l};if(f){var y=e.getDistanceScales(f);switch(r){case Ta.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=y.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=y.unitsPerMeter2;break;case Ta.LNGLAT:case Ta.LNGLAT_OFFSETS:e._pseudoMeters||(g.project_uCommonUnitsPerMeter=y.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=y.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=y.unitsPerDegree2;break;case Ta.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,y.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,y.unitsPerMeter2[2]]}}return g}));function Ka(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ya;n.length<3&&(n=[n[0],n[1],0]);var r,i=n,o=!0;switch(r=e===Ta.LNGLAT_OFFSETS||e===Ta.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Ia.WEB_MERCATOR:e!==Ta.LNGLAT&&e!==Ta.CARTESIAN||(r=[0,0,0],o=!1);break;case Ia.WEB_MERCATOR_AUTO_OFFSET:e===Ta.LNGLAT?i=r:e===Ta.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Ia.IDENTITY:(i=t.position.map(Math.fround))[2]=i[2]||0;break;case Ia.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}function Ja(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewport,n=t.devicePixelRatio,r=void 0===n?1:n,i=t.modelMatrix,o=void 0===i?null:i,a=t.coordinateSystem,s=void 0===a?Ta.DEFAULT:a,u=t.coordinateOrigin,l=t.autoWrapLongitude,c=void 0!==l&&l;s===Ta.DEFAULT&&(s=e.isGeospatial?Ta.LNGLAT:Ta.CARTESIAN);var f=Qa({viewport:e,devicePixelRatio:r,coordinateSystem:s,coordinateOrigin:u});return f.project_uWrapLongitude=c,f.project_uModelMatrix=o||Xa,f}var $a={};var ts={name:"project",dependencies:[qo,ka],vs:ja,getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a;return t.viewport?Ja(t):{}}},es={name:"project32",dependencies:[ts],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},ns=(yt=a("11zLF")).default({inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}},Ho),rs=[ts],is=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function os(t){var e=oa.getDefaultProgramManager(t),n=!0,r=!1,i=void 0;try{for(var o,a=rs[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.addDefaultModule(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var u=!0,l=!1,c=void 0;try{for(var f,p=is[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;e.addShaderHook(h)}}catch(t){l=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}return e}u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),At=a("e2Lau"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq");var as="Awaiting state",ss="Matched. State transferred from previous layer",us="Initialized",ls="Discarded. Awaiting garbage collection",cs="No longer matched. Awaiting garbage collection",fs="Finalized! Awaiting garbage collection",ps=Symbol.for("component"),hs=Symbol.for("asyncPropDefaults"),ds=Symbol.for("asyncPropOriginal"),gs=Symbol.for("asyncPropResolved"),ys={};function As(t){var e;Ca.level>0&&ys[t]&&(e=ys[t]).call.apply(e,arguments)}function vs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(t)?ms(t,e,[]):e(t)?[t]:[]}function ms(t,e,n){for(var r=-1;++r<t.length;){var i=t[r];Array.isArray(i)?ms(i,e,n):e(i)&&n.push(i)}return n}function _s(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,u=a*s,l=0,c=i;l<s;l++)e[c++]=n[l];for(;l<u;)l<u-l?(e.copyWithin(i+l,i,i+l),l*=2):(e.copyWithin(i+l,i,i+u-l),l=u);return e}u=a("ijozg"),l=a("pGAoq"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF");var bs={};function xs(t){var e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}function ws(t){var e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}function Es(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r="/";return(e=e.map((function(t,n){return n&&(t=t.replace(new RegExp("^".concat(r)),"")),n!==e.length-1&&(t=t.replace(new RegExp("".concat(r,"$")),"")),t}))).join(r)}function Ss(t,e){if(!t)throw new Error(e||"loader assertion failed.")}t(bs,"filename",(function(){return xs})),t(bs,"dirname",(function(){return ws})),t(bs,"join",(function(){return Es}));Bt=a("a8i8g"),"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document;var Ps=Boolean("object"!=typeof Bt||"[object process]"!==String(Bt)||!0),ks=void 0!==Bt&&Bt.version&&/v([0-9]*)/.exec(Bt.version),Cs=(ks&&parseFloat(ks[1]),Yn=a("cqwPg"),Qn=a("4Z8U5"),"3.1.8");function Ts(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),Yn=a("cqwPg"),Qn=a("4Z8U5"),Bt=a("a8i8g"),"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document,"object"!=typeof Bt||String(Bt);var Is="undefined"!=typeof window&&void 0!==window.orientation,Ms=void 0!==Bt&&Bt.version&&/v([0-9]*)/.exec(Bt.version),Os=(Ms&&parseFloat(Ms[1]),u=a("ijozg"),l=a("pGAoq"),new Map);function Ls(t){Ts(t.source&&!t.url||!t.source&&t.url);var e,n=Os.get(t.source||t.url);return n||(t.url&&(n=(e=t.url).startsWith("http")?Rs("try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")):e,Os.set(t.url,n)),t.source&&(n=Rs(t.source),Os.set(t.source,n))),Ts(n),n}function Rs(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Ds(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=n||new Set;if(t){if(Ns(t))r.add(t);else if(Ns(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(var i in t)Ds(t[i],e,r)}else;return void 0===n?Array.from(r):[]}function Ns(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Fs=function(){},js=function(){"use strict";function t(e){u.default(this,t),mt(this,"name",void 0),mt(this,"source",void 0),mt(this,"url",void 0),mt(this,"terminated",!1),mt(this,"worker",void 0),mt(this,"onMessage",void 0),mt(this,"onError",void 0),mt(this,"_loadableURL","");var n=e.name,r=e.source,i=e.url;Ts(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=Fs,this.onError=function(t){return console.log(t)},this.worker=this._createBrowserWorker()}return l.default(t,[{key:"destroy",value:function(){this.onMessage=Fs,this.onError=Fs,this.worker.terminate(),this.terminated=!0}},{key:"isRunning",get:function(){return Boolean(this.onMessage)}},{key:"postMessage",value:function(t,e){e=e||Ds(t),this.worker.postMessage(t,e)}},{key:"_getErrorFromErrorEvent",value:function(t){var e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}},{key:"_createBrowserWorker",value:function(){var t=this;this._loadableURL=Ls({source:this.source,url:this.url});var e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t._getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(t){return console.error(t)},e}}],[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),t}(),zs=(u=a("ijozg"),l=a("pGAoq"),function(){"use strict";function t(e,n){var r=this;u.default(this,t),mt(this,"name",void 0),mt(this,"workerThread",void 0),mt(this,"isRunning",void 0),mt(this,"result",void 0),mt(this,"_resolve",void 0),mt(this,"_reject",void 0),this.name=e,this.workerThread=n,this.isRunning=!0,this._resolve=function(){},this._reject=function(){},this.result=new Promise((function(t,e){r._resolve=t,r._reject=e}))}return l.default(t,[{key:"postMessage",value:function(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}},{key:"done",value:function(t){Ts(this.isRunning),this.isRunning=!1,this._resolve(t)}},{key:"error",value:function(t){Ts(this.isRunning),this.isRunning=!1,this._reject(t)}}]),t}()),Bs=function(){"use strict";function t(e){u.default(this,t),mt(this,"name","unnamed"),mt(this,"source",void 0),mt(this,"url",void 0),mt(this,"maxConcurrency",1),mt(this,"maxMobileConcurrency",1),mt(this,"onDebug",(function(){})),mt(this,"reuseWorkers",!0),mt(this,"props",{}),mt(this,"jobQueue",[]),mt(this,"idleQueue",[]),mt(this,"count",0),mt(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}return l.default(t,[{key:"destroy",value:function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0}},{key:"setProps",value:function(t){this.props=yt.default({},this.props,t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}},{key:"startJob",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e,n){return t.done(n)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return t.error(e)},i=this;return Yn.default(r(Qn).mark((function o(){var a;return r(Qn).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=new Promise((function(r){return i.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),i})),i._startQueuedJob(),r.next=4,a;case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),o)})))()}},{key:"_startQueuedJob",value:function(){var t=this;return Yn.default(r(Qn).mark((function e(){var n,i,o;return r(Qn).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.jobQueue.length){e.next=2;break}return e.abrupt("return");case 2:if(n=t._getAvailableWorker()){e.next=5;break}return e.abrupt("return");case 5:if(!(i=t.jobQueue.shift())){e.next=18;break}return t.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:t.jobQueue.length}),o=new zs(i.name,n),n.onMessage=function(t){return i.onMessage(o,t.type,t.payload)},n.onError=function(t){return i.onError(o,t)},i.onStart(o),e.prev=12,e.next=15,o.result;case 15:return e.prev=15,t.returnWorkerToQueue(n),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[12,,15,18]])})))()}},{key:"returnWorkerToQueue",value:function(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;var t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new js({name:t,source:this.source,url:this.url})}return null}},{key:"_getMaxConcurrency",value:function(){return Is?this.maxMobileConcurrency:this.maxConcurrency}}]),t}(),Us={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},Vs=function(){"use strict";function t(e){u.default(this,t),mt(this,"props",void 0),mt(this,"workerPools",new Map),this.props=yt.default({},Us),this.setProps(e),this.workerPools=new Map}return l.default(t,[{key:"destroy",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.workerPools.values()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.destroy()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"setProps",value:function(t){this.props=yt.default({},this.props,t);var e=!0,n=!1,r=void 0;try{for(var i,o=this.workerPools.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.setProps(this._getWorkerPoolProps())}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"getWorkerPool",value:function(t){var e=t.name,n=t.source,r=t.url,i=this.workerPools.get(e);return i||((i=new Bs({name:e,source:n,url:r})).setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}},{key:"_getWorkerPoolProps",value:function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}],[{key:"isSupported",value:function(){return js.isSupported()}},{key:"getWorkerFarm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t._workerFarm=t._workerFarm||new t({}),t._workerFarm.setProps(e),t._workerFarm}}]),t}();mt(Vs,"_workerFarm",void 0);var Gs="latest";function qs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e[t.id]||{},r="".concat(t.id,"-worker.js"),i=n.workerUrl;if(i||"compression"!==t.id||(i=e.workerUrl),"test"===e._workerType&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){var o=t.version;"latest"===o&&(o=Gs);var a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(a,"/dist/").concat(r)}return Ts(i),i}function Ws(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs;Ts(t,"no worker provided");var n=t.version;return!(!e||!n)}function Hs(t,e){return!!Vs.isSupported()&&(t.worker&&(null==e?void 0:e.worker))}function Xs(t,e,n,r,i){return Zs.apply(this,arguments)}function Zs(){return Zs=Yn.default(r(Qn).mark((function t(e,n,i,o,a){var s,u,l,c,f,p;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.id,u=qs(e,i),l=Vs.getWorkerFarm(i),c=l.getWorkerPool({name:s,url:u}),i=JSON.parse(JSON.stringify(i)),t.next=7,c.startJob("process-on-worker",Ys.bind(null,a));case 7:return(f=t.sent).postMessage("process",{input:n,options:i}),t.next=11,f.result;case 11:return p=t.sent,t.next=14,p.result;case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t)}))),Zs.apply(this,arguments)}function Ys(t,e,n,r){return Qs.apply(this,arguments)}function Qs(){return Qs=Yn.default(r(Qn).mark((function t(e,n,i,o){var a,s,u,l,c;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=i,t.next="done"===t.t0?3:"error"===t.t0?5:"process"===t.t0?7:20;break;case 3:return n.done(o),t.abrupt("break",21);case 5:return n.error(new Error(o.error)),t.abrupt("break",21);case 7:return a=o.id,s=o.input,u=o.options,t.prev=8,t.next=11,e(s,u);case 11:l=t.sent,n.postMessage("done",{id:a,result:l}),t.next=19;break;case 15:t.prev=15,t.t1=t.catch(8),c=t.t1 instanceof Error?t.t1.message:"unknown error",n.postMessage("error",{id:a,error:c});case 19:return t.abrupt("break",21);case 20:console.warn("parse-with-worker unknown message ".concat(i));case 21:case"end":return t.stop()}}),t,null,[[8,15]])}))),Qs.apply(this,arguments)}a("aqbQf");function Ks(t){return t&&"object"==typeof t&&t.isBuffer}function Js(t){if(Ks(t))return Ks(e=t)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){var n=t;return(new TextEncoder).encode(n).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function $s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.map((function(t){return t instanceof ArrayBuffer?new Uint8Array(t):t})),i=r.reduce((function(t,e){return t+e.byteLength}),0),o=new Uint8Array(i),a=0,s=!0,u=!1,l=void 0;try{for(var c,f=r[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value;o.set(p,a),a+=p.byteLength}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return o.buffer}Yn=a("cqwPg");var tu=a("3Ka4w");f=a("gj7DP"),Qn=a("4Z8U5");function eu(t){return nu.apply(this,arguments)}function nu(){return(nu=Yn.default(r(Qn).mark((function t(e){var n,i,o,a,s,u,l,c;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=!1,o=!1,t.prev=2,s=tu.default(e);case 4:return t.next=6,s.next();case 6:if(!(i=!(u=t.sent).done)){t.next=11;break}l=u.value,c=l,n.push(c);case 8:i=!1,t.next=4;break;case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),o=!0,a=t.t0;case 17:if(t.prev=17,t.prev=18,!i||null==s.return){t.next=22;break}return t.next=22,a.return();case 22:if(t.prev=22,!o){t.next=25;break}throw a;case 25:return t.finish(22);case 26:return t.finish(17);case 27:return t.abrupt("return",$s.apply(void 0,f.default(n)));case 28:case"end":return t.stop()}}),t,null,[[2,13,17,27],[18,,22,26]])})))).apply(this,arguments)}var ru="",iu={};function ou(t){for(var e in iu)if(t.startsWith(e)){var n=iu[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(ru).concat(t)),t}function au(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function su(t){var e,n,r;return Ss(t,"null loader"),Ss(au(t),"invalid loader"),Array.isArray(t)&&(r=t[1],t=t[0],t=yt.default({},t,{options:yt.default({},t.options,r)})),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}yt=a("11zLF");var uu=function(t){return"boolean"==typeof t},lu=function(t){return"function"==typeof t},cu=function(t){return null!==t&&"object"==typeof t},fu=function(t){return cu(t)&&t.constructor==={}.constructor},pu=function(t){return t&&"function"==typeof t[Symbol.iterator]},hu=function(t){return t&&"function"==typeof t[Symbol.asyncIterator]},du=function(t){return"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json},gu=function(t){return"undefined"!=typeof Blob&&t instanceof Blob},yu=function(t){return function(t){return"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||cu(t)&&lu(t.tee)&&lu(t.cancel)&&lu(t.getReader)}(t)||function(t){return cu(t)&&lu(t.read)&&lu(t.pipe)&&uu(t.readable)}(t)},Au=(Yn=a("cqwPg"),Qn=a("4Z8U5"),Yn=a("cqwPg"),Qn=a("4Z8U5"),/^data:([-\w.]+\/[-\w.+]+)(;|,)/),vu=/^([-\w.]+\/[-\w.+]+)/;function mu(t){var e=Au.exec(t);return e?e[1]:""}var _u=/\?.*/;function bu(t){if(du(t)){var e=wu(t.url||""),n=t.headers.get("content-type")||"";return{url:e,type:(r=n,i=vu.exec(r),(i?i[1]:r)||mu(e))}}var r,i;return gu(t)?{url:wu(t.name||""),type:t.type||""}:"string"==typeof t?{url:wu(t),type:mu(t)}:{url:"",type:""}}function xu(t){return du(t)?t.headers["content-length"]||-1:gu(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function wu(t){return t.replace(_u,"")}function Eu(t){return Su.apply(this,arguments)}function Su(){return(Su=Yn.default(r(Qn).mark((function t(e){var n,i,o,a,s,u,l;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!du(e)){t.next=2;break}return t.abrupt("return",e);case 2:return n={},(i=xu(e))>=0&&(n["content-length"]=String(i)),o=bu(e),a=o.url,(s=o.type)&&(n["content-type"]=s),t.next=9,Iu(e);case 9:return(u=t.sent)&&(n["x-first-bytes"]=u),"string"==typeof e&&(e=(new TextEncoder).encode(e)),l=new Response(e,{headers:n}),Object.defineProperty(l,"url",{value:a}),t.abrupt("return",l);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pu(t){return ku.apply(this,arguments)}function ku(){return(ku=Yn.default(r(Qn).mark((function t(e){var n;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,Cu(e);case 3:throw n=t.sent,new Error(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Cu(t){return Tu.apply(this,arguments)}function Tu(){return(Tu=Yn.default(r(Qn).mark((function t(e){var n,i,o;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,i=e.headers.get("Content-Type"),o=e.statusText,!i.includes("application/json")){t.next=11;break}return t.t0=o,t.t1=" ",t.next=9,e.text();case 9:t.t2=t.sent,o=t.t0+=t.t1.concat.call(t.t1,t.t2);case 11:n=(n+=o).length>60?"".concat(n.slice(60),"..."):n,t.next=17;break;case 15:t.prev=15,t.t3=t.catch(1);case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}function Iu(t){return Mu.apply(this,arguments)}function Mu(){return(Mu=Yn.default(r(Qn).mark((function t(e){var n,i,o,a;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=5,"string"!=typeof e){t.next=3;break}return t.abrupt("return","data:,".concat(e.slice(0,n)));case 3:if(!(e instanceof Blob)){t.next=8;break}return i=e.slice(0,5),t.next=7,new Promise((function(t){var e=new FileReader;e.onload=function(e){var n;return t(null==e||null===(n=e.target)||void 0===n?void 0:n.result)},e.readAsDataURL(i)}));case 7:return t.abrupt("return",t.sent);case 8:if(!(e instanceof ArrayBuffer)){t.next=12;break}return o=e.slice(0,n),a=Ou(o),t.abrupt("return","data:base64,".concat(a));case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ou(t){for(var e="",n=new Uint8Array(t),r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function Lu(t,e){return Ru.apply(this,arguments)}function Ru(){return Ru=Yn.default(r(Qn).mark((function t(e,n){var i;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=7;break}return e=ou(e),i=n,null!=n&&n.fetch&&"function"!=typeof(null==n?void 0:n.fetch)&&(i=n.fetch),t.next=6,fetch(e,i);case 6:case 9:return t.abrupt("return",t.sent);case 7:return t.next=9,Eu(e);case 10:case"end":return t.stop()}}),t)}))),Ru.apply(this,arguments)}u=a("ijozg"),l=a("pGAoq"),f=a("gj7DP");var Du=new Nt({id:"loaders.gl"}),Nu=function(){"use strict";function t(){u.default(this,t)}return l.default(t,[{key:"log",value:function(){return function(){}}},{key:"info",value:function(){return function(){}}},{key:"warn",value:function(){return function(){}}},{key:"error",value:function(){return function(){}}}]),t}(),Fu=function(){"use strict";function t(){u.default(this,t),mt(this,"console",void 0),this.console=console}return l.default(t,[{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return(r=this.console.log).bind.apply(r,[this.console].concat(f.default(e)))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return(r=this.console.info).bind.apply(r,[this.console].concat(f.default(e)))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return(r=this.console.warn).bind.apply(r,[this.console].concat(f.default(e)))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return(r=this.console.error).bind.apply(r,[this.console].concat(f.default(e)))}}]),t}(),ju={fetch:null,mimeType:void 0,nothrow:!1,log:new Fu,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},zu={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Bu(){globalThis.loaders=globalThis.loaders||{};var t=globalThis.loaders;return t._state=t._state||{},t._state}var Uu=function(){var t=Bu();return t.globalOptions=t.globalOptions||yt.default({},ju),t.globalOptions};function Vu(t,e,n,r){return n=n||[],function(t,e){qu(t,null,ju,zu,e);var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=t&&t[s.id]||{},l=s.options&&s.options[s.id]||{},c=s.deprecatedOptions&&s.deprecatedOptions[s.id]||{};qu(u,s.id,l,c,e)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}(t,n=Array.isArray(n)?n:[n]),Hu(e,t,r)}function Gu(t,e){var n=Uu(),r=t||n;return"function"==typeof r.fetch?r.fetch:cu(r.fetch)?function(t){return Lu(t,r)}:null!=e&&e.fetch?null==e?void 0:e.fetch:Lu}function qu(t,e,n,r,i){var o=e||"Top level",a=e?"".concat(e,"."):"";for(var s in t){var u=!e&&cu(t[s]);if(!(s in n)&&!("baseUri"===s&&!e)&&!("workerUrl"===s&&e))if(s in r)Du.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(r[s],"'"))();else if(!u){var l=Wu(s,i);Du.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(l))()}}}function Wu(t,e){var n=t.toLowerCase(),r="",i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;for(var c in l.options){if(t===c)return"Did you mean '".concat(l.id,".").concat(c,"'?");var f=c.toLowerCase();(n.startsWith(f)||f.startsWith(n))&&(r=r||"Did you mean '".concat(l.id,".").concat(c,"'?"))}}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}function Hu(t,e,n){var r=t.options||{},i=yt.default({},r);return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(i,n),null===i.log&&(i.log=new Nu),Xu(i,Uu()),Xu(i,e),i}function Xu(t,e){for(var n in e)if(n in e){var r=e[n];fu(r)&&fu(t[n])?t[n]=yt.default({},t[n],e[n]):t[n]=e[n]}}var Zu=function(){var t=Bu();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Yu(){return Zu()}Yn=a("cqwPg"),Qn=a("4Z8U5"),Yn=a("cqwPg"),Qn=a("4Z8U5"),Yn=a("cqwPg"),Qn=a("4Z8U5");var Qu=r(Qn=a("4Z8U5")).mark(Ku);function Ku(t,e){var n,i,o,a,s;return r(Qn).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=(null==e?void 0:e.chunkSize)||262144,i=0,o=new TextEncoder;case 3:if(!(i<t.length)){r.next=11;break}return a=Math.min(t.length-i,n),s=t.slice(i,i+a),i+=a,r.next=9,o.encode(s);case 9:r.next=3;break;case 11:case"end":return r.stop()}}),Qu)}Qu=r(Qn=a("4Z8U5")).mark($u);var Ju=262144;function $u(t){var e,n,i,o,a,s,u,l=arguments;return r(Qn).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=l.length>1&&void 0!==l[1]?l[1]:{},n=e.chunkSize,i=void 0===n?Ju:n,o=0;case 3:if(!(o<t.byteLength)){r.next=14;break}return a=Math.min(t.byteLength-o,i),s=new ArrayBuffer(a),u=new Uint8Array(t,o,a),new Uint8Array(s).set(u),o+=a,r.next=12,s;case 12:r.next=3;break;case 14:case"end":return r.stop()}}),Qu)}var tl=a("ixbLR"),el=a("kYXZb"),nl=(Qn=a("4Z8U5"),1048576);function rl(){return rl=tl.default(r(Qn).mark((function t(e,n){var i,o,a,s;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=(null==n?void 0:n.chunkSize)||nl,o=0;case 2:if(!(o<e.size)){t.next=12;break}return a=o+i,t.next=6,el.default(e.slice(o,a).arrayBuffer());case 6:return s=t.sent,o=a,t.next=10,s;case 10:t.next=2;break;case 12:case"end":return t.stop()}}),t)}))),rl.apply(this,arguments)}tl=a("ixbLR"),el=a("kYXZb"),tu=a("3Ka4w"),Qn=a("4Z8U5");function il(t,e){return Ps?function(t,e){return ol.apply(this,arguments)}(t,e):function(t,e){return al.apply(this,arguments)}(t,e)}function ol(){return ol=tl.default(r(Qn).mark((function t(e,n){var i,o,a,s,u,l;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.getReader(),t.prev=2;case 3:return a=o||i.read(),null!=n&&n._streamReadAhead&&(o=i.read()),t.next=8,el.default(a);case 8:if(s=t.sent,u=s.done,l=s.value,!u){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,Js(l);case 15:t.next=3;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),i.releaseLock();case 22:case"end":return t.stop()}}),t,null,[[2,19]])}))),ol.apply(this,arguments)}function al(){return(al=tl.default(r(Qn).mark((function t(e,n){var i,o,a,s,u,l,c;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=!1,o=!1,t.prev=1,s=tu.default(e);case 3:return t.next=5,el.default(s.next());case 5:if(!(i=!(u=t.sent).done)){t.next=13;break}return l=u.value,c=l,t.next=10,Js(c);case 10:i=!1,t.next=3;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),o=!0,a=t.t0;case 19:if(t.prev=19,t.prev=20,!i||null==s.return){t.next=24;break}return t.next=24,a.return();case 24:if(t.prev=24,!o){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[1,15,19,29],[20,,24,28]])})))).apply(this,arguments)}function sl(t,e){if("string"==typeof t)return Ku(t,e);if(t instanceof ArrayBuffer)return $u(t,e);if(gu(t))return function(t,e){return rl.apply(this,arguments)}(t,e);if(yu(t))return il(t,e);if(du(t))return il(t.body,e);throw new Error("makeIterator")}var ul="Cannot convert supplied data type";function ll(t,e,n){if(e.text&&"string"==typeof t)return t;var r;if((r=t)&&"object"==typeof r&&r.isBuffer&&(t=t.buffer),t instanceof ArrayBuffer){var i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);var o=t.buffer,a=t.byteLength||t.length;return 0===t.byteOffset&&a===o.byteLength||(o=o.slice(t.byteOffset,t.byteOffset+a)),o}throw new Error(ul)}function cl(t,e,n){return fl.apply(this,arguments)}function fl(){return fl=Yn.default(r(Qn).mark((function t(e,n,i){var o,a;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e instanceof ArrayBuffer||ArrayBuffer.isView(e),"string"!=typeof e&&!o){t.next=3;break}return t.abrupt("return",ll(e,n));case 3:if(!gu(e)){t.next=7;break}return t.next=6,Eu(e);case 6:e=t.sent;case 7:if(!du(e)){t.next=21;break}return a=e,t.next=11,Pu(a);case 11:if(!n.binary){t.next=17;break}return t.next=14,a.arrayBuffer();case 14:t.t0=t.sent,t.next=20;break;case 17:return t.next=19,a.text();case 19:t.t0=t.sent;case 20:return t.abrupt("return",t.t0);case 21:if(yu(e)&&(e=sl(e,i)),!pu(e)&&!hu(e)){t.next=24;break}return t.abrupt("return",eu(e));case 24:throw new Error(ul);case 25:case"end":return t.stop()}}),t)}))),fl.apply(this,arguments)}yt=a("11zLF"),f=a("gj7DP");function pl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n)return n;var r=yt.default({fetch:Gu(e,t)},t);return Array.isArray(r.loaders)||(r.loaders=null),r}function hl(t,e){if(!e&&t&&!Array.isArray(t))return t;var n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){var r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?f.default(n).concat(f.default(r)):r}return n&&n.length?n:null}Yn=a("cqwPg"),yt=a("11zLF"),f=a("gj7DP"),vt=a("5qgrd"),Qn=a("4Z8U5");var dl=new Nt({id:"loaders.gl"}),gl=/\.([^.]+)$/;function yl(t){return Al.apply(this,arguments)}function Al(){return Al=Yn.default(r(Qn).mark((function t(e){var n,i,o,a,s=arguments;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:[],i=s.length>2?s[2]:void 0,o=s.length>3?s[3]:void 0,_l(e)){t.next=3;break}return t.abrupt("return",null);case 3:if(!(a=vl(e,n,yt.default({},i,{nothrow:!0}),o))){t.next=6;break}return t.abrupt("return",a);case 6:if(!gu(e)){t.next=11;break}return t.next=9,e.slice(0,10).arrayBuffer();case 9:e=t.sent,a=vl(e,n,i,o);case 11:if(a||null!=i&&i.nothrow){t.next=13;break}throw new Error(bl(e));case 13:return t.abrupt("return",a);case 14:case"end":return t.stop()}}),t)}))),Al.apply(this,arguments)}function vl(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!_l(t))return null;if(n&&!Array.isArray(n))return su(n);var o=[];n&&(o=o.concat(n)),null!=r&&r.ignoreRegisteredLoaders||(e=o).push.apply(e,f.default(Yu())),xl(o);var a=ml(t,o,r,i);if(!(a||null!=r&&r.nothrow))throw new Error(bl(t));return a}function ml(t,e,n,r){var i,o=bu(t),a=o.url,s=o.type,u=a||(null==r?void 0:r.url),l=null,c="";(null!=n&&n.mimeType&&(l=wl(e,null==n?void 0:n.mimeType),c="match forced by supplied MIME type ".concat(null==n?void 0:n.mimeType)),l=l||function(t,e){var n=e&&gl.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();var n=!0,r=!1,i=void 0,o=!0,a=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;try{for(var f,p=c.extensions[Symbol.iterator]();!(n=(f=p.next()).done);n=!0){if(f.value.toLowerCase()===e)return c}}catch(t){r=!0,i=t}finally{try{n||null==p.return||p.return()}finally{if(r)throw i}}}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}return null}(t,r):null}(e,u),c=c||(l?"matched url ".concat(u):""),l=l||wl(e,s),c=c||(l?"matched MIME type ".concat(s):""),l=l||function(t,e){if(!e)return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if("string"==typeof e){if(El(e,s))return s}else if(ArrayBuffer.isView(e)){if(Sl(e.buffer,e.byteOffset,s))return s}else if(e instanceof ArrayBuffer){if(Sl(e,0,s))return s}}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}(e,t),c=c||(l?"matched initial data ".concat(Pl(t)):""),l=l||wl(e,null==n?void 0:n.fallbackMimeType),c=c||(l?"matched fallback MIME type ".concat(s):""))&&dl.log(1,"selectLoader selected ".concat(null===(i=l)||void 0===i?void 0:i.name,": ").concat(c,"."));return l}function _l(t){return!(t instanceof Response&&204===t.status)}function bl(t){var e=bu(t),n=e.url,r=e.type,i="No valid loader found (";i+=n?"".concat(bs.filename(n),", "):"no url provided, ",i+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");var o=t?Pl(t):"";return i+=o?' first bytes: "'.concat(o,'"'):"first bytes: not available",i+=")"}function xl(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){su(i.value)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}function wl(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.mimeTypes&&s.mimeTypes.includes(e))return s;if(e==="application/x.".concat(s.id))return s}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}function El(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some((function(e){return t.startsWith(e)}))}function Sl(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((function(r){return function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;for(var r=new Uint8Array(t),i=new Uint8Array(e),o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,t,r.byteLength);switch(void 0===r?"undefined":vt.default(r)){case"function":return r(t,n);case"string":return r===kl(t,e,r.length);default:return!1}}(t,e,n,r)}))}function Pl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return kl(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){var n=0;return kl(t,n,e)}return""}function kl(t,e,n){if(t.byteLength<e+n)return"";for(var r=new DataView(t),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}function Cl(t,e,n,r){return Tl.apply(this,arguments)}function Tl(){return Tl=Yn.default(r(Qn).mark((function t(e,n,i,o){var a,s,u;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ts(!o||"object"==typeof o),!n||Array.isArray(n)||au(n)||(o=void 0,i=n,n=void 0),t.next=4,e;case 4:return e=t.sent,i=i||{},a=bu(e).url,s=hl(n,o),t.next=11,yl(e,s,i);case 11:if(u=t.sent){t.next=14;break}return t.abrupt("return",null);case 14:return i=Vu(i,u,s,a),o=pl({url:a,parse:Cl,loaders:s},i,o),t.next=18,Il(u,e,i,o);case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t)}))),Tl.apply(this,arguments)}function Il(t,e,n,r){return Ml.apply(this,arguments)}function Ml(){return Ml=Yn.default(r(Qn).mark((function t(e,n,i,o){return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ws(e),t.next=3,cl(n,e,i);case 3:if(n=t.sent,!e.parseTextSync||"string"!=typeof n){t.next=7;break}return i.dataType="text",t.abrupt("return",e.parseTextSync(n,i,o,e));case 7:if(!Hs(e,i)){t.next=11;break}return t.next=10,Xs(e,n,i,o,Cl);case 10:case 14:case 18:return t.abrupt("return",t.sent);case 11:if(!e.parseText||"string"!=typeof n){t.next=15;break}return t.next=14,e.parseText(n,i,o,e);case 15:if(!e.parse){t.next=19;break}return t.next=18,e.parse(n,i,o,e);case 19:throw Ts(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"));case 21:case"end":return t.stop()}}),t)}))),Ml.apply(this,arguments)}function Ol(t,e,n,r){return Ll.apply(this,arguments)}function Ll(){return Ll=Yn.default(r(Qn).mark((function t(e,n,i,o){var a,s;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Array.isArray(n)||au(n)||(void 0,i=n,n=void 0),a=Gu(i),s=e,"string"!=typeof e){t.next=7;break}return t.next=6,a(e);case 6:s=t.sent;case 7:if(!gu(e)){t.next=11;break}return t.next=10,a(e);case 10:s=t.sent;case 11:return t.next=13,Cl(s,n,i);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t)}))),Ll.apply(this,arguments)}var Rl=function(){"use strict";function t(e,n,r){u.default(this,t),this.id=e,this.context=r,this._loadCount=0,this._subscribers=new Set,this.setData(n)}return l.default(t,[{key:"subscribe",value:function(t){this._subscribers.add(t)}},{key:"unsubscribe",value:function(t){this._subscribers.delete(t)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var t=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((function(){return t.getData()}))}},{key:"setData",value:function(t,e){if(t!==this._data||e){this._data=t;var n=++this._loadCount,r=t;if("string"==typeof t&&(r=Ol(t)),r instanceof Promise){var i=this;this.isLoaded=!1,this._loader=r.then((function(t){i._loadCount===n&&(i.isLoaded=!0,i._error=null,i._content=t)})).catch((function(t){i._loadCount===n&&(i.isLoaded=!0,i._error=t||!0)}))}else this.isLoaded=!0,this._error=null,this._content=t;var o=!0,a=!1,s=void 0;try{for(var u,l=this._subscribers[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){u.value.onChange(this.getData())}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}}}}]),t}(),Dl=function(){"use strict";function t(e){var n=e.gl,r=e.protocol;u.default(this,t),this.protocol=r||"resource://",this._context={gl:n,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return l.default(t,[{key:"contains",value:function(t){return!!t.startsWith(this.protocol)||t in this._resources}},{key:"add",value:function(t){var e=t.resourceId,n=t.data,r=t.forceUpdate,i=void 0!==r&&r,o=t.persistent,a=void 0===o||o,s=this._resources[e];s?s.setData(n,i):(s=new Rl(e,n,this._context),this._resources[e]=s),s.persistent=a}},{key:"remove",value:function(t){var e=this._resources[t];e&&(e.delete(),delete this._resources[t])}},{key:"unsubscribe",value:function(t){var e=t.consumerId,n=this._consumers[e];if(n){for(var r in n){var i=n[r];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[e],this.prune()}}},{key:"subscribe",value:function(t){var e=t.resourceId,n=t.onChange,r=t.consumerId,i=t.requestId,o=void 0===i?"default":i,a=this._resources,s=this.protocol;e.startsWith(s)&&(a[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));var u=a[e];if(this._track(r,o,u,n),u)return u.getData()}},{key:"prune",value:function(){var t=this;this._pruneRequest||(this._pruneRequest=setTimeout((function(){return t._prune()}),0))}},{key:"finalize",value:function(){for(var t in this._resources)this._resources[t].delete()}},{key:"_track",value:function(t,e,n,r){var i=this._consumers,o=i[t]=i[t]||{},a=o[e]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),n&&(o[e]=a,a.onChange=r,a.resource=n,n.subscribe(a))}},{key:"_prune",value:function(){this._pruneRequest=null;var t=!0,e=!1,n=void 0;try{for(var r,i=Object.keys(this._resources)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value,a=this._resources[o];a.persistent||a.inUse()||(a.delete(),delete this._resources[o])}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}]),t}(),Nl=(u=a("ijozg"),l=a("pGAoq"),c=a("1zCSZ"),u=a("ijozg"),l=a("pGAoq"),new(function(){"use strict";function t(e){u.default(this,t),this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}return l.default(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"allocate",value:function(t,e,n){var r,i=n.size,o=void 0===i?1:i,a=n.type,s=n.padding,u=void 0===s?0:s,l=n.copy,c=void 0!==l&&l,f=n.initialize,p=void 0!==f&&f,h=n.maxCount,d=a||t&&t.constructor||Float32Array,g=e*o+u;if(ArrayBuffer.isView(t)){if(g<=t.length)return t;if(g*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new d(t.buffer,0,g)}h&&(r=h*o+u);var y=this._allocate(d,g,p,r);return t&&c?y.set(t):p||y.fill(0,0,4),this._release(t),y}},{key:"release",value:function(t){this._release(t)}},{key:"_allocate",value:function(t,e,n,r){var i=Math.max(Math.ceil(e*this.props.overAlloc),1);i>r&&(i=r);var o=this._pool,a=t.BYTES_PER_ELEMENT*i,s=o.findIndex((function(t){return t.byteLength>=a}));if(s>=0){var u=new t(o.splice(s,1)[0],0,i);return n&&u.fill(0),u}return new t(i)}},{key:"_release",value:function(t){if(ArrayBuffer.isView(t)){var e=this._pool,n=t.buffer,r=n.byteLength,i=e.findIndex((function(t){return t.byteLength>=r}));i<0?e.push(n):(i>0||e.length<this.props.poolSize)&&e.splice(i,0,n),e.length>this.props.poolSize&&e.shift()}}}]),t}()));wn=a("4EaGG"),f=a("gj7DP");function Fl(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}Math.PI,Math.PI;var jl={};function zl(t){return Math.round(t/jl.EPSILON)*jl.EPSILON}function Bl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,r=void 0===n?jl.precision||4:n;return t=zl(t),"".concat(parseFloat(t.toPrecision(r)))}function Ul(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Vl(t,e,n){if(Ul(t)){n=n||((i=t).clone?i.clone():new Array(i.length));for(var r=0;r<n.length&&r<t.length;++r)n[r]=e(t[r],r,n);return n}var i;return e(t)}function Gl(t,e,n){return Vl(t,(function(t){return Math.max(e,Math.min(n,t))}))}function ql(t,e,n){return Ul(t)?t.map((function(t,r){return ql(t,e[r],n)})):n*e+(1-n)*t}function Wl(t,e,n){var r=jl.EPSILON;n&&(jl.EPSILON=n);try{if(t===e)return!0;if(Ul(t)&&Ul(e)){if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!Wl(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=jl.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{jl.EPSILON=r}}jl.EPSILON=1e-12,jl.debug=!1,jl.precision=4,jl.printTypes=!1,jl.printDegrees=!1,jl.printRowMajor=!0;pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq");var Hl,Xl,Zl=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"ELEMENTS",get:function(){return Fl(!1),0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"to",value:function(t){return t===this?this:Ul(t)?this.toArray(t):this.toObject(t)}},{key:"toTarget",value:function(t){return t?this.to(t):this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(jl)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Bl(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Wl(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)for(var u=a.value,l=0;l<this.ELEMENTS;++l)this[l]+=u[l]}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)for(var u=a.value,l=0;l<this.ELEMENTS;++l)this[l]-=u[l]}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}},{key:"multiplyByScalar",value:function(t){return this.scale(t)}},{key:"elements",get:function(){return this}},{key:"check",value:function(){if(jl.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}}]),n}((Hl=Array,Xl=function(){var t=Reflect.construct(Hl,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t},Xl.prototype=Object.create(Hl.prototype,{constructor:{value:Hl,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Xl,Hl):Xl.__proto__=Hl,Xl));function Yl(t,e){if(t.length!==e)return!1;for(var n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Ql(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Kl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(jl.debug&&!Yl(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}var Jl={};function $l(t,e){Jl[t]||(Jl[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}var tc=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"ELEMENTS",get:function(){return Fl(!1),0}},{key:"copy",value:function(t){return Fl(!1),this}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Ql(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Ql(t)}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Ql(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Ql(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)for(var u=a.value,l=0;l<this.ELEMENTS;++l)this[l]*=u[l]}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)for(var u=a.value,l=0;l<this.ELEMENTS;++l)this[l]/=u[l]}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return Fl(t>=0&&t<this.ELEMENTS,"index is out of range"),Ql(this[t])}},{key:"setComponent",value:function(t,e){return Fl(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}]),n}(Zl),ec=1e-6,nc="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function rc(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function ic(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});!function(){var t=function(){var t=new nc(2);return nc!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function oc(t,e,n){var r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}function ac(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/a,t[1]=(n[1]*r+n[5]*i+n[9]*o)/a,t[2]=(n[2]*r+n[6]*i+n[10]*o)/a,t}var sc=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u.default(this,n),t=e.call(this,2),Ul(r)&&1===arguments.length?t.copy(r):(jl.debug&&(Ql(r),Ql(i)),t[0]=r,t[1]=i),t}return l.default(n,[{key:"set",value:function(t,e){return this[0]=t,this[1]=e,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this.check()}},{key:"fromObject",value:function(t){return jl.debug&&(Ql(t.x),Ql(t.y)),this[0]=t.x,this[1]=t.y,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t}},{key:"ELEMENTS",get:function(){return 2}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return ic(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return oc(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return rc(this,this,t),this.check()}},{key:"transformByMatrix2x3",value:function(t){return function(t,e,n){var r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5]}(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return function(t,e,n){var r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i}(this,this,t),this.check()}}]),n}(tc);pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq");function uc(){var t=new nc(3);return nc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function lc(t,e,n){var r=new nc(3);return r[0]=t,r[1]=e,r[2]=n,r}function cc(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function fc(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function pc(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function hc(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}var dc=function(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)},gc=(function(){var t=uc()}(),[0,0,0]),yc={},Ac=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u.default(this,n),t=e.call(this,-0,-0,-0),1===arguments.length&&Ul(r)?t.copy(r):(jl.debug&&(Ql(r),Ql(i),Ql(o)),t[0]=r,t[1]=i,t[2]=o),t}return l.default(n,[{key:"set",value:function(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}},{key:"fromObject",value:function(t){return jl.debug&&(Ql(t.x),Ql(t.y),Ql(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Ql(t)}},{key:"angle",value:function(t){return n=t,r=(e=this)[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=Math.sqrt(r*r+i*i+o*o)*Math.sqrt(a*a+s*s+u*u),c=l&&cc(e,n)/l,Math.acos(Math.min(Math.max(c,-1),1));var e,n,r,i,o,a,s,u,l,c}},{key:"cross",value:function(t){return fc(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,void 0===n?gc:n,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,void 0===n?gc:n,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,void 0===n?gc:n,e),this.check()}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return pc(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return ac(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return hc(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return function(t,e,n){var r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return function(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],l=e[2],c=i*l-o*u,f=o*s-r*l,p=r*u-i*s,h=i*p-o*f,d=o*c-r*p,g=r*f-i*c,y=2*a;c*=y,f*=y,p*=y,h*=2,d*=2,g*=2,t[0]=s+c+h,t[1]=u+f+d,t[2]=l+p+g}(this,this,t),this.check()}}],[{key:"ZERO",get:function(){return yc.ZERO=yc.ZERO||Object.freeze(new n(0,0,0,0))}}]),n}(tc),vc=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"ELEMENTS",get:function(){return Fl(!1),0}},{key:"RANK",get:function(){return Fl(!1),0}},{key:"toString",value:function(){var t="[";if(jl.printRowMajor){t+="row-major:";for(var e=0;e<this.RANK;++e)for(var n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(var r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]"}},{key:"getElementIndex",value:function(t,e){return e*this.RANK+t}},{key:"getElement",value:function(t,e){return this[e*this.RANK+t]}},{key:"setElement",value:function(t,e,n){return this[e*this.RANK+t]=Ql(n),this}},{key:"getColumn",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=t*this.RANK,r=0;r<this.RANK;++r)e[r]=this[n+r];return e}},{key:"setColumn",value:function(t,e){for(var n=t*this.RANK,r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}]),n}(Zl));Object.freeze([1,0,0,0,1,0,0,0,1]),Object.freeze([0,0,0,0,0,0,0,0,0]),Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),c=a("1zCSZ");function mc(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],g=e[12],y=e[13],A=e[14],v=e[15],m=n[0],_=n[1],b=n[2],x=n[3];return t[0]=m*r+_*s+b*f+x*g,t[1]=m*i+_*u+b*p+x*y,t[2]=m*o+_*l+b*h+x*A,t[3]=m*a+_*c+b*d+x*v,m=n[4],_=n[5],b=n[6],x=n[7],t[4]=m*r+_*s+b*f+x*g,t[5]=m*i+_*u+b*p+x*y,t[6]=m*o+_*l+b*h+x*A,t[7]=m*a+_*c+b*d+x*v,m=n[8],_=n[9],b=n[10],x=n[11],t[8]=m*r+_*s+b*f+x*g,t[9]=m*i+_*u+b*p+x*y,t[10]=m*o+_*l+b*h+x*A,t[11]=m*a+_*c+b*d+x*v,m=n[12],_=n[13],b=n[14],x=n[15],t[12]=m*r+_*s+b*f+x*g,t[13]=m*i+_*u+b*p+x*y,t[14]=m*o+_*l+b*h+x*A,t[15]=m*a+_*c+b*d+x*v,t}function _c(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function bc(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function xc(t,e,n,r){var i,o,a,s,u,l,c,f,p,h,d=e[0],g=e[1],y=e[2],A=r[0],v=r[1],m=r[2],_=n[0],b=n[1],x=n[2];return Math.abs(d-_)<ec&&Math.abs(g-b)<ec&&Math.abs(y-x)<ec?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(c=d-_,f=g-b,p=y-x,i=v*(p*=h=1/Math.hypot(c,f,p))-m*(f*=h),o=m*(c*=h)-A*p,a=A*f-v*c,(h=Math.hypot(i,o,a))?(i*=h=1/h,o*=h,a*=h):(i=0,o=0,a=0),s=f*a-p*o,u=p*i-c*a,l=c*o-f*i,(h=Math.hypot(s,u,l))?(s*=h=1/h,u*=h,l*=h):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=l,t[10]=p,t[11]=0,t[12]=-(i*d+o*g+a*y),t[13]=-(s*d+u*g+l*y),t[14]=-(c*d+f*g+p*y),t[15]=1,t)}!function(){var t=function(){var t=new nc(4);return nc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();var wc=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Ec=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Sc=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Pc={},kc=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r;return u.default(this,n),r=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return l.default(n,[{key:"INDICES",get:function(){return Sc}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:"set",value:function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=f,this[12]=p,this[13]=h,this[14]=d,this[15]=g,this.check()}},{key:"setRowMajor",value:function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g){return this[0]=t,this[1]=i,this[2]=u,this[3]=p,this[4]=e,this[5]=o,this[6]=l,this[7]=h,this[8]=n,this[9]=a,this[10]=c,this[11]=d,this[12]=r,this[13]=s,this[14]=f,this[15]=g,this.check()}},{key:"toRowMajor",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:"identity",value:function(){return this.copy(wc)}},{key:"fromQuaternion",value:function(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,p=i*a,h=i*s,d=i*u,g=o*a,y=o*s,A=o*u;t[0]=1-f-d,t[1]=c+A,t[2]=p-y,t[3]=0,t[4]=c-A,t[5]=1-l-d,t[6]=h+g,t[7]=0,t[8]=p+y,t[9]=h-g,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,r=t.right,i=t.bottom,o=t.top,a=t.near,s=t.far;return s===1/0?n._computeInfinitePerspectiveOffCenter(this,e,r,i,o,a):function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0}(this,e,r,i,o,a,s),this.check()}},{key:"lookAt",value:function(t,e,n){var r;return 1===arguments.length&&(t=(r=t).eye,e=r.center,n=r.up),xc(this,t,e=e||[0,0,0],n=n||[0,1,0]),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far;return function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1}(this,e,n,r,i,a,void 0===s?500:s),this.check()}},{key:"orthographic",value:function(t){var e=t.fovy,r=void 0===e?45*Math.PI/180:e,i=t.aspect,o=void 0===i?1:i,a=t.focalDistance,s=void 0===a?1:a,u=t.near,l=void 0===u?.1:u,c=t.far,f=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var p=r/2,h=s*Math.tan(p),d=h*o;return(new n).ortho({left:-d,right:d,bottom:-h,top:h,near:l,far:f})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.near,s=void 0===a?.1:a,u=t.far,l=void 0===u?500:u;if((e=e||r)>2*Math.PI)throw Error("radians");return bc(this,e,o,s,l),this.check()}},{key:"determinant",value:function(){return e=(t=this)[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],p=t[11],h=t[12],d=t[13],g=t[14],y=t[15],(e*a-n*o)*(f*y-p*g)-(e*s-r*o)*(c*y-p*d)+(e*u-i*o)*(c*g-f*d)+(n*s-r*a)*(l*y-p*h)-(n*u-i*a)*(l*g-f*h)+(r*u-i*s)*(l*d-c*h);var t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g,y}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:"getTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"getRotationMatrix3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}},{key:"transpose",value:function(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}},{key:"invert",value:function(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],p=e[10],h=e[11],d=e[12],g=e[13],y=e[14],A=e[15],v=n*s-r*a,m=n*u-i*a,_=n*l-o*a,b=r*u-i*s,x=r*l-o*s,w=i*l-o*u,E=c*g-f*d,S=c*y-p*d,P=c*A-h*d,k=f*y-p*g,C=f*A-h*g,T=p*A-h*y,I=v*T-m*C+_*k+b*P-x*S+w*E;I&&(I=1/I,t[0]=(s*T-u*C+l*k)*I,t[1]=(i*C-r*T-o*k)*I,t[2]=(g*w-y*x+A*b)*I,t[3]=(p*x-f*w-h*b)*I,t[4]=(u*P-a*T-l*S)*I,t[5]=(n*T-i*P+o*S)*I,t[6]=(y*_-d*w-A*m)*I,t[7]=(c*w-p*_+h*m)*I,t[8]=(a*C-s*P+l*E)*I,t[9]=(r*P-n*C-o*E)*I,t[10]=(d*x-g*_+A*v)*I,t[11]=(f*_-c*x-h*v)*I,t[12]=(s*S-a*k-u*E)*I,t[13]=(n*k-r*S+i*E)*I,t[14]=(g*m-d*b-y*v)*I,t[15]=(c*b-f*m+p*v)*I)}(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return mc(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return mc(this,this,t),this.check()}},{key:"rotateX",value:function(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],p=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=p*i-u*r}(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],f=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-f*r,t[3]=u*i-p*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+f*i,t[11]=u*r+p*i}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],p=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=p*i-u*r}(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=c.default(t,3),n=e[0],r=e[1],i=e[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(t,e){return function(t,e,n,r){var i,o,a,s,u,l,c,f,p,h,d,g,y,A,v,m,_,b,x,w,E,S,P,k,C=r[0],T=r[1],I=r[2],M=Math.hypot(C,T,I);M<ec||(C*=M=1/M,T*=M,I*=M,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],u=e[1],l=e[2],c=e[3],f=e[4],p=e[5],h=e[6],d=e[7],g=e[8],y=e[9],A=e[10],v=e[11],m=C*C*a+o,_=T*C*a+I*i,b=I*C*a-T*i,x=C*T*a-I*i,w=T*T*a+o,E=I*T*a+C*i,S=C*I*a+T*i,P=T*I*a-C*i,k=I*I*a+o,t[0]=s*m+f*_+g*b,t[1]=u*m+p*_+y*b,t[2]=l*m+h*_+A*b,t[3]=c*m+d*_+v*b,t[4]=s*x+f*w+g*E,t[5]=u*x+p*w+y*E,t[6]=l*x+h*w+A*E,t[7]=c*x+d*w+v*E,t[8]=s*S+f*P+g*k,t[9]=u*S+p*P+y*k,t[10]=l*S+h*P+A*k,t[11]=c*S+d*P+v*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?_c(this,this,t):_c(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return function(t,e,n){var r,i,o,a,s,u,l,c,f,p,h,d,g=n[0],y=n[1],A=n[2];e===t?(t[12]=e[0]*g+e[4]*y+e[8]*A+e[12],t[13]=e[1]*g+e[5]*y+e[9]*A+e[13],t[14]=e[2]*g+e[6]*y+e[10]*A+e[14],t[15]=e[3]*g+e[7]*y+e[11]*A+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=p,t[10]=h,t[11]=d,t[12]=r*g+s*y+f*A+e[12],t[13]=i*g+u*y+p*A+e[13],t[14]=o*g+l*y+h*A+e[14],t[15]=a*g+c*y+d*A+e[15])}(this,this,t),this.check()}},{key:"transform",value:function(t,e){return 4===t.length?(e=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}(e||[-0,-0,-0,-0],t,this),Kl(e,4),e):this.transformAsPoint(t,e)}},{key:"transformAsPoint",value:function(t,e){switch(t.length){case 2:e=ic(e||[-0,-0],t,this);break;case 3:e=pc(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Kl(e,t.length),e}},{key:"transformAsVector",value:function(t,e){switch(t.length){case 2:e=oc(e||[-0,-0],t,this);break;case 3:e=ac(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Kl(e,t.length),e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"transformPoint",value:function(t,e){return $l("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}},{key:"transformVector",value:function(t,e){return $l("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}},{key:"transformDirection",value:function(t,e){return $l("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}],[{key:"IDENTITY",get:function(){return Pc.IDENTITY=Pc.IDENTITY||Object.freeze(new n(wc)),Pc.IDENTITY}},{key:"ZERO",get:function(){return Pc.ZERO=Pc.ZERO||Object.freeze(new n(Ec)),Pc.ZERO}},{key:"_computeInfinitePerspectiveOffCenter",value:function(t,e,n,r,i,o){var a=2*o/(n-e),s=2*o/(i-r),u=(n+e)/(n-e),l=(i+r)/(i-r),c=-2*o;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=u,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=c,t[15]=0,t}}]),n}(vc);pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq");function Cc(){var t=new nc(4);return nc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Tc(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Ic(t,e,n,r){var i,o,a,s,u,l=e[0],c=e[1],f=e[2],p=e[3],h=n[0],d=n[1],g=n[2],y=n[3];return(o=l*h+c*d+f*g+p*y)<0&&(o=-o,h=-h,d=-d,g=-g,y=-y),1-o>ec?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*l+u*h,t[1]=s*c+u*d,t[2]=s*f+u*g,t[3]=s*p+u*y,t}function Mc(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}var Oc,Lc,Rc,Dc,Nc,Fc,jc=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t},zc=(Oc=uc(),Lc=lc(1,0,0),Rc=lc(0,1,0),Dc=Cc(),Nc=Cc(),Fc=function(){var t=new nc(9);return nc!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}(),Math.PI,Math.PI,Math.PI,Math.PI,{self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e});(zc.global||zc.self||zc.window).mathgl={config:jl};var Bc,Uc=new Ac;function Vc(t,e,n,r){Uc.set(t,e,n);var i=Uc.len();return{distance:r/i,normal:new Ac(-t/i,-e/i,-n/i)}}function Gc(t,e){var n=e.size,r=void 0===n?1:n,i=e.startIndex,o=void 0===i?0:i,a=void 0!==e.endIndex?e.endIndex:t.length,s=(a-o)/r;Bc=Nl.allocate(Bc,s,{type:Float32Array,size:2*r});for(var u,l=o,c=0;l<a;){for(var f=0;f<r;f++){var p=t[l++];Bc[c+f]=p,Bc[c+f+r]=(u=p)-Math.fround(u)}c+=2*r}return Bc.subarray(0,s*r*2)}var qc=Math.PI/180,Wc=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Hc=[0,0,0],Xc={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},Zc=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,o=void 0===i?0:i,a=e.y,s=void 0===a?0:a,l=e.width,c=void 0===l?1:l,f=e.height,p=void 0===f?1:f;this.id=r||this.constructor.displayName||"viewport",this.x=o,this.y=s,this.width=c||1,this.height=p||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return l.default(t,[{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?Ia.WEB_MERCATOR:Ia.WEB_MERCATOR_AUTO_OFFSET:Ia.IDENTITY}},{key:"equals",value:function(e){return e instanceof t&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Wl(e.projectionMatrix,this.projectionMatrix)&&Wl(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=this.projectPosition(t),o=J(i,this.pixelProjectionMatrix),a=c.default(o,2),s=a[0],u=a[1],l=r?u:this.height-u;return 2===t.length?[s,l]:[s,l,o[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=c.default(t,3),a=o[0],s=o[1],u=o[2],l=r?s:this.height-s,f=i&&i*this.distanceScales.unitsPerMeter[2],p=$([a,l,u],this.pixelUnprojectionMatrix,f),h=c.default(this.unprojectPosition(p),3),d=h[0],g=h[1],y=h[2];return Number.isFinite(u)?[d,g,y]:Number.isFinite(i)?[d,g,i]:[d,g]}},{key:"projectPosition",value:function(t){var e=c.default(this.projectFlat(t),2);return[e[0],e[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=c.default(this.unprojectFlat(t),2);return[e[0],e[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return this.isGeospatial?V(t):t}},{key:"unprojectFlat",value:function(t){return this.isGeospatial?G(t):t}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={targetZ:t.z||0},n=this.unproject([0,0],e),r=this.unproject([this.width,0],e),i=this.unproject([0,this.height],e),o=this.unproject([this.width,this.height],e);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?W({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,o=t.height,a=void 0===o?1:o;return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+a}},{key:"getFrustumPlanes",value:function(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:Vc((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Vc(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Vc(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Vc(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Vc(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Vc(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}},{key:"panByPosition",value:function(t,e){return null}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,n=t.fovyRadians,r=t.aspect,i=t.focalDistance,o=t.near,a=t.far;return e?(new kc).orthographic({fovy:n,aspect:r,focalDistance:i,near:o,far:a}):(new kc).perspective({fovy:n,aspect:r,near:o,far:a})}},{key:"_initViewMatrix",value:function(t){var e=t.viewMatrix,n=void 0===e?Wc:e,r=t.longitude,i=void 0===r?null:r,o=t.latitude,a=void 0===o?null:o,s=t.zoom,u=void 0===s?null:s,l=t.position,c=void 0===l?null:l,f=t.modelMatrix,p=void 0===f?null:f,h=t.focalDistance,d=void 0===h?1:h,g=t.distanceScales,y=void 0===g?null:g;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=u,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?q({latitude:a})+Math.log2(d):0);var A=Math.pow(2,this.zoom);this.scale=A,this.distanceScales=this.isGeospatial?W({latitude:a,longitude:i}):y||Xc,this.focalDistance=d,this.distanceScales.metersPerUnit=new Ac(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new Ac(this.distanceScales.unitsPerMeter),this.position=Hc,this.meterOffset=Hc,c&&(this.position=c,this.modelMatrix=p,this.meterOffset=p?p.transformVector(c):c),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a})):this.center=c?this.projectPosition(c):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=(new kc).multiplyRight(this.viewMatrixUncentered).translate(new Ac(this.center||Hc).negate())}},{key:"_getCenterInWorld",value:function(t){var e=t.longitude,n=t.latitude,r=this.meterOffset,i=this.distanceScales,o=new Ac(this.projectPosition([e,n,0]));if(r){var a=new Ac(r).scale(i.unitsPerMeter);o.add(a)}return o}},{key:"_initProjectionMatrix",value:function(t){var e=t.projectionMatrix,n=void 0===e?null:e,r=t.orthographic,i=void 0!==r&&r,o=t.fovyRadians,a=t.fovy,s=void 0===a?75:a,u=t.near,l=void 0===u?.1:u,c=t.far,f=void 0===c?1e3:c,p=t.focalDistance,h=void 0===p?1:p;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:i,fovyRadians:o||s*qc,aspect:this.width/this.height,focalDistance:h,near:l,far:f})}},{key:"_initPixelMatrices",value:function(){var t,e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ua(e,e,this.projectionMatrix),Ua(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=Ba([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(t=this.viewMatrixInverse)[12],t[13],t[14]];var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];!function(t,e,n){var r=n[0],i=n[1],o=n[2];t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(n,n,[this.width/2,-this.height/2,1]),function(t,e,n){var r,i,o,a,s,u,l,c,f,p,h,d,g=n[0],y=n[1],A=n[2];e===t?(t[12]=e[0]*g+e[4]*y+e[8]*A+e[12],t[13]=e[1]*g+e[5]*y+e[9]*A+e[13],t[14]=e[2]*g+e[6]*y+e[10]*A+e[14],t[15]=e[3]*g+e[7]*y+e[11]*A+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=p,t[10]=h,t[11]=d,t[12]=r*g+s*y+f*A+e[12],t[13]=i*g+u*y+p*A+e[13],t[14]=o*g+l*y+h*A+e[14],t[15]=a*g+c*y+d*A+e[15])}(n,n,[1,-1,0]),Ua(r,n,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=n,this.pixelUnprojectionMatrix=Ba([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ca.warn("Pixel project matrix not invertible")()}}]),t}();Zc.displayName="Viewport";var Yc=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),Qc=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.deck,i=n.stats,o=n.viewport,a=n.timeline;u.default(this,t),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new Dl({gl:e,protocol:"deck://"}),this.context=yt.default({},Yc,{layerManager:this,gl:e,deck:r,programManager:e&&os(e),stats:i||new Gt({id:"deck.gl"}),viewport:o||new Zc({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new Pa,resourceManager:this.resourceManager}),this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return l.default(t,[{key:"finalize",value:function(){this.resourceManager.finalize();var t=!0,e=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this._finalizeLayer(o)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.getNeedsRedraw(t);e=e||u}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}},{key:"needsUpdate",value:function(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t}},{key:"getLayers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.layerIds,n=void 0===e?null:e;return n?this.layers.filter((function(t){return n.find((function(e){return 0===t.id.indexOf(e)}))})):this.layers}},{key:"setProps",value:function(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}},{key:"setLayers",value:function(t,e){As("layerManager.setLayers",this,e,t),this.lastRenderedLayers=t,t=vs(t,Boolean);var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.context=this.context}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return this._updateLayers(this.layers,t),this}},{key:"updateLayers",value:function(){var t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this.lastRenderedLayers,t)),this._nextLayers=null}},{key:"activateViewport",value:function(t){return As("layerManager.activateViewport",this,t),t&&(this.context.viewport=t),this}},{key:"_handleError",value:function(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}},{key:"_updateLayers",value:function(t,e){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;n[u.id]?Ca.warn("Multiple old layers with same id ".concat(u.id))():n[u.id]=u}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var l=[];this._updateSublayersRecursively(e,n,l),this._finalizeOldLayers(n);var c=!1,f=!0,p=!1,h=void 0;try{for(var d,g=l[Symbol.iterator]();!(f=(d=g.next()).done);f=!0){if(d.value.hasUniformTransition()){c=!0;break}}}catch(t){p=!0,h=t}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}this._needsUpdate=c,this.layers=l}},{key:"_updateSublayersRecursively",value:function(t,e,n){var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u.context=this.context;var l=e[u.id];null===l&&Ca.warn("Multiple new layers with same id ".concat(u.id))(),e[u.id]=null;var c=null;try{this._debug&&l!==u&&u.validateProps(),l?(this._transferLayerState(l,u),this._updateLayer(u)):this._initializeLayer(u),n.push(u),c=u.isComposite&&u.getSubLayers()}catch(t){this._handleError("matching",t,u)}c&&this._updateSublayersRecursively(c,e,n)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"_finalizeOldLayers",value:function(t){for(var e in t){var n=t[e];n&&this._finalizeLayer(n)}}},{key:"_initializeLayer",value:function(t){try{t._initialize(),t.lifecycle=us}catch(e){this._handleError("initialization",e,t)}}},{key:"_transferLayerState",value:function(t,e){e._transferState(t),e.lifecycle=ss,e!==t&&(t.lifecycle=ls)}},{key:"_updateLayer",value:function(t){try{t._update()}catch(e){this._handleError("update",e,t)}}},{key:"_finalizeLayer",value:function(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=cs;try{t._finalize(),t.lifecycle=fs}catch(e){this._handleError("finalization",e,t)}}}]),t}();u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF");function Kc(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var n in t){var r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&Kc(r,i)))return!1}return!0}var Jc=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}return l.default(t,[{key:"finalize",value:function(){for(var t in this.controllers)this.controllers[t]&&this.controllers[t].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}},{key:"updateViewStates",value:function(){for(var t in this.controllers){var e=this.controllers[t];e&&e.updateTransition()}}},{key:"getViewports",value:function(t){return t?this._viewports.filter((function(e){return e.containsPixel(t)})):this._viewports}},{key:"getViews",value:function(){var t={};return this.views.forEach((function(e){t[e.id]=e})),t}},{key:"getView",value:function(t){return"string"==typeof t?this.views.find((function(e){return e.id===t})):t}},{key:"getViewState",value:function(t){var e=this.getView(t),n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}},{key:"getViewport",value:function(t){return this._viewportMap[t]}},{key:"unproject",value:function(t,e){for(var n=this.getViewports(),r={x:t[0],y:t[1]},i=n.length-1;i>=0;--i){var o=n[i];if(o.containsPixel(r)){var a=t.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,e)}}return null}},{key:"setProps",value:function(t){"views"in t&&this._setViews(t.views),"viewState"in t&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(t){t=vs(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}},{key:"_setViewState",value:function(t){t?(!Kc(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Ca.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(t,e){e.viewId=t,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(e)}},{key:"_createController",value:function(t,e){return new(0,e.type)(yt.default({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:function(e){return t._getViewport(e,{width:e.width,height:e.height})}},e))}},{key:"_updateController",value:function(t,e,n,r){var i=t.controller;return i?(i=yt.default({},e,t.props,i,{id:t.id,x:n.x,y:n.y,width:n.width,height:n.height}),r?r.setProps(i):r=this._createController(t,i),r):null}},{key:"_rebuildViewports",value:function(){var t=this,e=t.width,n=t.height,r=t.views,i=this.controllers;this._viewports=[],this.controllers={};for(var o=!1,a=r.length;a--;){var s=r[a],u=this.getViewState(s),l=s.makeViewport({width:e,height:n,viewState:u}),c=i[s.id];s.controller&&!c&&(o=!0),!o&&s.controller||!c||(c.finalize(),c=null),this.controllers[s.id]=this._updateController(s,u,l,c),this._viewports.unshift(l)}for(var f in i)i[f]&&!this.controllers[f]&&i[f].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var t=this;this._viewportMap={},this._viewports.forEach((function(e){e.id&&(t._viewportMap[e.id]=t._viewportMap[e.id]||e)}))}},{key:"_diffViews",value:function(t,e){return t.length!==e.length||t.some((function(n,r){return!t[r].equals(e[r])}))}}]),t}(),$c=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),vt=a("5qgrd"),vt=a("5qgrd"),/([0-9]+\.?[0-9]*)(%|px)/);function tf(t){switch(void 0===t?"undefined":vt.default(t)){case"number":return{position:t,relative:!1};case"string":var e=$c.exec(t);if(e&&e.length>=3){var n="%"===e[2],r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function ef(t,e){return t.relative?Math.round(t.position*e):t.position}function nf(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}var rf=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,o=void 0===i?0:i,a=e.y,s=void 0===a?0:a,l=e.width,c=void 0===l?"100%":l,f=e.height,p=void 0===f?"100%":f,h=e.viewportInstance,d=e.type,g=void 0===d?Zc:d;nf(!h||h instanceof Zc),this.viewportInstance=h,this.id=r||this.constructor.displayName||"view",this.type=g,this.props=yt.default({},e,{id:this.id}),this._parseDimensions({x:o,y:s,width:c,height:p}),this.equals=this.equals.bind(this),Object.seal(this)}return l.default(t,[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):Kc(this.props,t.props))}},{key:"makeViewport",value:function(t){var e=t.width,n=t.height,r=t.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:e,height:n});return this._getViewport(r,i)}},{key:"getViewStateId",value:function(){switch(vt.default(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(t){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;var e=yt.default({},t);for(var n in this.props.viewState)"id"!==n&&(e[n]=this.props.viewState[n]);return e}return t}},{key:"getDimensions",value:function(t){var e=t.width,n=t.height;return{x:ef(this._x,e),y:ef(this._y,n),width:ef(this._width,e),height:ef(this._height,n)}}},{key:"_getControllerProps",value:function(t){var e=this.props.controller;return e?!0===e?t:("function"==typeof e&&(e={type:e}),yt.default({},t,e)):null}},{key:"_getViewport",value:function(t,e){return new(0,this.type)(yt.default({},t,this.props,e))}},{key:"_parseDimensions",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height;this._x=tf(e),this._y=tf(n),this._width=tf(r),this._height=tf(i)}}]),t}();pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),yt=a("11zLF"),pn=a("9PFJu"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),c=a("1zCSZ");function of(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function af(t,e){return t[0]=-e[0],t[1]=-e[1],t}!function(){var t=function(){var t=new za(2);return za!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var sf=Math.PI/180;function uf(t){return 512/4003e4/Math.cos(t*sf)}var lf=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,n);var i,o=r.latitude,a=void 0===o?0:o,s=r.longitude,l=void 0===s?0:s,c=r.zoom,f=void 0===c?11:c,p=r.pitch,h=void 0===p?0:p,d=r.bearing,g=void 0===d?0:d,y=r.nearZMultiplier,A=void 0===y?.1:y,v=r.farZMultiplier,m=void 0===v?1.01:v,_=r.orthographic,b=void 0!==_&&_,x=r.projectionMatrix,w=r.repeat,E=void 0!==w&&w,S=r.worldOffset,P=void 0===S?0:S,k=r.legacyMeterSizes,C=void 0!==k&&k,T=r.width,I=r.height,M=r.altitude,O=void 0===M?1.5:M,L=Math.pow(2,f);T=T||1,I=I||1;var R=null;x?i=Q(O=x[5]/2):(r.fovy?O=K(i=r.fovy):i=Q(O),R=Z({width:T,height:I,pitch:h,fovy:i,nearZMultiplier:A,farZMultiplier:m}));var D=X({height:I,pitch:h,bearing:g,scale:L,altitude:O});if(P){var N=(new kc).translate([512*P,0,0]);D=N.multiplyLeft(D)}return(t=e.call(this,yt.default({},r,{width:T,height:I,viewMatrix:D,longitude:l,latitude:a,zoom:f},R,{fovy:i,focalDistance:O}))).latitude=a,t.longitude=l,t.zoom=f,t.pitch=h,t.bearing=g,t.altitude=O,t.fovy=i,t.orthographic=b,t._subViewports=E?[]:null,t._pseudoMeters=C,Object.freeze(pn.default(t)),t}return l.default(n,[{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var t=this.getBounds(),e=Math.floor((t[0]+180)/360),r=Math.ceil((t[2]-180)/360),i=e;i<=r;i++){var o=i?new n(yt.default({},this,{worldOffset:i})):this;this._subViewports.push(o)}return this._subViewports}},{key:"projectPosition",value:function(t){if(this._pseudoMeters)return dt.default(gt.default(n.prototype),"projectPosition",this).call(this,t);var e=c.default(this.projectFlat(t),2);return[e[0],e[1],(t[2]||0)*uf(t[1])]}},{key:"unprojectPosition",value:function(t){if(this._pseudoMeters)return dt.default(gt.default(n.prototype),"unprojectPosition",this).call(this,t);var e=c.default(this.unprojectFlat(t),2),r=e[0],i=e[1];return[r,i,(t[2]||0)/uf(i)]}},{key:"addMetersToLngLat",value:function(t,e){return H(t,e)}},{key:"panByPosition",value:function(t,e){var n=$(e,this.pixelUnprojectionMatrix),r=of([],this.projectFlat(t),af([],n)),i=of([],this.center,r),o=c.default(this.unprojectFlat(i),2);return{longitude:o[0],latitude:o[1]}}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=nt(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}},{key:"fitBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,i=r.width,o=r.height,a=tt(yt.default({width:i,height:o,bounds:t},e)),s=a.longitude,u=a.latitude,l=a.zoom;return new n({width:i,height:o,longitude:s,latitude:u,zoom:l})}}]),n}(Zc);lf.displayName="WebMercatorViewport";pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF");function cf(){}var ff={onStart:cf,onUpdate:cf,onInterrupt:cf,onEnd:cf},pf=function(){"use strict";function t(e){u.default(this,t),this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}return l.default(t,[{key:"inProgress",get:function(){return this._inProgress}},{key:"start",value:function(t){this.cancel(),this.settings=yt.default({},ff,t),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){if(!this._inProgress)return!1;if(null===this._handle){var t=this.timeline,e=this.settings;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}}]),t}(),hf=function(){},df=1,gf=2,yf=3,Af={transitionEasing:function(t){return t},transitionInterruption:df,onTransitionStart:hf,onTransitionInterrupt:hf,onTransitionEnd:hf},vf=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t),this.ControllerState=e,this.props=yt.default({},Af,n),this.propsInTransition=null,this.transition=new pf(n.timeline),this.onViewStateChange=n.onViewStateChange||hf,this.onStateChange=n.onStateChange||hf,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return l.default(t,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var e=!1,n=this.props;if(t=yt.default({},Af,t),this.props=t,this._shouldIgnoreViewportChange(n,t))return e;if(this._isTransitionEnabled(t)){var r=this.transition.settings,i=r.interruption,o=r.endProps,a=yt.default({},n,i===gf?o:this.propsInTransition||n);this._triggerTransition(a,t),e=!0}else this.transition.cancel();return e}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(t){var e=t.transitionDuration,n=t.transitionInterpolator;return(e>0||"auto"===e)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this.transition.inProgress?this.transition.settings.interruption===yf||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){var n=new this.ControllerState(t),r=new this.ControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0!==o){var a=e.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startProps:a.start,endProps:a.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(t){var e=this;return function(n){e.propsInTransition=null,e.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t(n)}}},{key:"_onTransitionUpdate",value:function(t){var e=t.time,n=t.settings,r=n.interpolator,i=n.startProps,o=n.endProps,a=n.duration,s=(0,n.easing)(e/a),u=r.interpolateProps(i,o,s);this.propsInTransition=new this.ControllerState(yt.default({},this.props,u)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}]),t}(),mf=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF"),u=a("ijozg"),l=a("pGAoq"),function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var n=e.compare,r=e.extract,i=e.required;this._propsToCompare=n,this._propsToExtract=r,this._requiredProps=i}return l.default(t,[{key:"arePropsEqual",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=(this._propsToCompare||Object.keys(e))[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!(s in t)||!(s in e)||!Wl(t[s],e[s]))return!1}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(t,e){var n;if(this._propsToExtract){var r={},i={},o=!0,a=!1,s=void 0;try{for(var u,l=this._propsToExtract[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;r[c]=t[c],i[c]=e[c]}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}n={start:r,end:i}}else n={start:t,end:e};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(t,e,n){return e}},{key:"getDuration",value:function(t,e){return e.transitionDuration}},{key:"_checkRequiredProps",value:function(t){this._requiredProps&&this._requiredProps.forEach((function(e){var n=t[e];nf(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}]),t}()),_f=["longitude","latitude","zoom","bearing","pitch"],bf=["longitude","latitude","zoom"],xf=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,n);var i=Array.isArray(r)?r:r.transitionProps;return(t=e.call(this,i||{compare:_f,extract:_f,required:bf})).opts=r,t}return l.default(n,[{key:"initializeProps",value:function(t,e){var r=dt.default(gt.default(n.prototype),"initializeProps",this).call(this,t,e),i=this.opts,o=i.makeViewport,a=i.around;if(o&&a){var s=o(t),u=o(e),l=s.unproject(a);r.start.around=a,Object.assign(r.end,{around:u.project(l),aroundPosition:l,width:e.width,height:e.height})}return r}},{key:"interpolateProps",value:function(t,e,n){var r={},i=!0,o=!1,a=void 0;try{for(var s,u=this._propsToExtract[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l]=ql(t[l]||0,e[l]||0,n)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}if(e.aroundPosition){var c=this.opts.makeViewport(yt.default({},e,r));Object.assign(r,c.panByPosition(e.aroundPosition,ql(t.around,e.around,n)))}return r}}]),n}(mf),wf={transitionDuration:0},Ef={transitionDuration:300,transitionEasing:function(t){return t},transitionInterruption:df},Sf=function(t){return 1-(1-t)*(1-t)},Pf=["wheel"],kf=["panstart","panmove","panend"],Cf=["pinchstart","pinchmove","pinchend"],Tf=["tripanstart","tripanmove","tripanend"],If=["doubletap"],Mf=["keydown"],Of=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t),mt(this,"ControllerState",void 0),mt(this,"controllerState",null),mt(this,"controllerStateProps",null),mt(this,"transitionManager",void 0),mt(this,"_transition",void 0),mt(this,"_events",null),mt(this,"eventManager",null),mt(this,"_interactionState",{isDragging:!1}),mt(this,"_customEvents",[]),mt(this,"onViewStateChange",null),mt(this,"onStateChange",null),mt(this,"makeViewport",void 0),mt(this,"_eventStartBlocked",void 0),mt(this,"_state",void 0),mt(this,"_panMove",void 0),mt(this,"invertPan",void 0),mt(this,"dragMode","rotate"),mt(this,"inertia",0),mt(this,"scrollZoom",!0),mt(this,"dragPan",!0),mt(this,"dragRotate",!0),mt(this,"doubleClickZoom",!0),mt(this,"touchZoom",!0),mt(this,"touchRotate",!1),mt(this,"keyboard",!0),this.ControllerState=e,this.transitionManager=new vf(e,yt.default({},n,{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}));var r=this.linearTransitionProps;this._transition=r&&yt.default({},Ef,{transitionInterpolator:new xf({transitionProps:r})}),this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return l.default(t,[{key:"linearTransitionProps",get:function(){return null}},{key:"events",set:function(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.setProps(this.controllerStateProps)}},{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){var e=this.ControllerState;this.controllerState=new e(yt.default({makeViewport:this.makeViewport},this.controllerStateProps,this._state));var n=this._eventStartBlocked;switch(t.type){case"panstart":return!n&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!n&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!n&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=this.controllerStateProps,n=e.x,r=e.y,i=t.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(t,e){var n=this.controllerStateProps,r=n.width,i=n.height;if(e&&e.handled)return!1;var o=t[0]>=0&&t[0]<=r&&t[1]>=0&&t[1]<=i;return o&&e&&e.stopPropagation(),o}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"blockEvents",value:function(t){var e=this,n=setTimeout((function(){e._eventStartBlocked===n&&(e._eventStartBlocked=null)}),t);this._eventStartBlocked=n}},{key:"setProps",value:function(t){"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),"makeViewport"in t&&(this.makeViewport=t.makeViewport),"dragMode"in t&&(this.dragMode=t.dragMode),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);var e=t.inertia;!0===e&&(e=300),this.inertia=e;var n=t.scrollZoom,r=void 0===n||n,i=t.dragPan,o=void 0===i||i,a=t.dragRotate,s=void 0===a||a,u=t.doubleClickZoom,l=void 0===u||u,c=t.touchZoom,f=void 0===c||c,p=t.touchRotate,h=void 0!==p&&p,d=t.keyboard,g=void 0===d||d,y=Boolean(this.onViewStateChange);this.toggleEvents(Pf,y&&r),this.toggleEvents(kf,y&&(o||s)),this.toggleEvents(Cf,y&&(f||h)),this.toggleEvents(Tf,y&&h),this.toggleEvents(If,y&&l),this.toggleEvents(Mf,y&&g),this.scrollZoom=r,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=l,this.touchZoom=f,this.touchRotate=h,this.keyboard=g}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach((function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))}))}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=yt.default({},t.getViewportProps(),e),i=this.controllerState!==t;if(this._state=t.getState(),this._setInteractionState(n),i){var o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}},{key:"_onTransition",value:function(t){this.onViewStateChange&&(t.interactionState=this._interactionState,this.onViewStateChange(t))}},{key:"_setInteractionState",value:function(t){Object.assign(this._interactionState,t),this.onStateChange&&this.onStateChange(this._interactionState)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t)||t.rightButton;(this.invertPan||"pan"===this.dragMode)&&(n=!n);var r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,wf,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}},{key:"_onPanEnd",value:function(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,wf,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(t){var e=this.inertia;if(this.dragPan&&e&&t.velocity){var n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,yt.default({},this._getTransitionProps(),{transitionDuration:e,transitionEasing:Sf}),{isDragging:!1,isPanning:!0})}else{var o=this.controllerState.panEnd();this.updateViewport(o,null,{isDragging:!1,isPanning:!1})}return!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,wf,{isDragging:!0,isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(t){var e=this.inertia;if(this.dragRotate&&e&&t.velocity){var n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,yt.default({},this._getTransitionProps(),{transitionDuration:e,transitionEasing:Sf}),{isDragging:!1,isRotating:!0})}else{var o=this.controllerState.rotateEnd();this.updateViewport(o,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.scrollZoom,r=n.speed,i=void 0===r?.01:r,o=n.smooth,a=void 0!==o&&o,s=t.delta,u=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==u&&(u=1/u);var l=this.controllerState.zoom({pos:e,scale:u});return this.updateViewport(l,yt.default({},this._getTransitionProps({around:e}),{transitionDuration:a?250:1}),{isZooming:!0,isPanning:!0}),!0}},{key:"_onTriplePanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,wf,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;var e=this.getCenter(t);e[0]-=t.deltaX;var n=this.controllerState.rotate({pos:e});return this.updateViewport(n,wf,{isDragging:!0,isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(t){if(!this.isDragging())return!1;var e=this.inertia;if(this.touchRotate&&e&&t.velocityY){var n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,yt.default({},this._getTransitionProps(),{transitionDuration:e,transitionEasing:Sf}),{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{var o=this.controllerState.rotateEnd();this.updateViewport(o,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._startPinchRotation=t.rotation,this._lastPinchEvent=t,this.updateViewport(n,wf,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation;e=e.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(e,wf,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=t,!0}},{key:"_onPinchEnd",value:function(t){if(!this.isDragging())return!1;var e=this.inertia,n=this._lastPinchEvent;if(this.touchZoom&&e&&n&&t.scale!==n.scale){var r=this.getCenter(t),i=this.controllerState.rotateEnd(),o=Math.log2(t.scale),a=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),s=Math.pow(2,o+a*e/2);i=i.zoom({pos:r,scale:s}).zoomEnd(),this.updateViewport(i,yt.default({},this._getTransitionProps({around:r}),{transitionDuration:e,transitionEasing:Sf}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{var u=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(u,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.keyboard,i=r.zoomSpeed,o=r.moveSpeed,a=r.rotateSpeedX,s=r.rotateSpeedY,u=this.controllerState,l={};switch(t.srcEvent.code){case"Minus":e=n?u.zoomOut(i).zoomOut(i):u.zoomOut(i),l.isZooming=!0;break;case"Equal":e=n?u.zoomIn(i).zoomIn(i):u.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(e=u.rotateLeft(a),l.isRotating=!0):(e=u.moveLeft(o),l.isPanning=!0);break;case"ArrowRight":n?(e=u.rotateRight(a),l.isRotating=!0):(e=u.moveRight(o),l.isPanning=!0);break;case"ArrowUp":n?(e=u.rotateUp(s),l.isRotating=!0):(e=u.moveUp(o),l.isPanning=!0);break;case"ArrowDown":n?(e=u.rotateDown(s),l.isRotating=!0):(e=u.moveDown(o),l.isPanning=!0);break;default:return!1}return this.updateViewport(e,this._getTransitionProps(),l),!0}},{key:"_getTransitionProps",value:function(t){var e=this._transition;return e?t?yt.default({},e,{transitionInterpolator:new xf(yt.default({},t,{transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport}))}):e:wf}}]),t}(),Lf=(u=a("ijozg"),l=a("pGAoq"),function(){"use strict";function t(e){u.default(this,t),mt(this,"_viewportProps",void 0),mt(this,"_state",void 0),this._viewportProps=this._applyConstraints(e)}return l.default(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"shortestPathFrom",value:function(t){return this._viewportProps}},{key:"_applyConstraints",value:function(t){return t}}]),t}()),Rf={pitch:0,bearing:0,altitude:1.5,minZoom:0,maxZoom:20,minPitch:0,maxPitch:60,position:[0,0,0]},Df=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r;u.default(this,n);var i=(t=yt.default({},Rf,t))||{},o=i.makeViewport,a=i.width,s=i.height,l=i.latitude,c=i.longitude,f=i.zoom,p=i.bearing,h=i.pitch,d=i.altitude,g=i.position,y=i.maxZoom,A=i.minZoom,v=i.maxPitch,m=i.minPitch,_=i.startPanLngLat,b=i.startZoomLngLat,x=i.startRotatePos,w=i.startBearing,E=i.startPitch,S=i.startZoom,P=i.normalize;return nf(Number.isFinite(c)),nf(Number.isFinite(l)),nf(Number.isFinite(f)),(r=e.call(this,{width:a,height:s,latitude:l,longitude:c,zoom:f,bearing:p,pitch:h,altitude:d,maxZoom:y,minZoom:A,maxPitch:v,minPitch:m,normalize:P,position:g}))._state={startPanLngLat:_,startZoomLngLat:b,startRotatePos:x,startBearing:w,startPitch:E,startZoom:S},r.makeViewport=o,r}return l.default(n,[{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var i=this.makeViewport(this._viewportProps).panByPosition(r,e);return this._getUpdatedState(i)}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e,n=t.pos,r=t.deltaAngleX,i=void 0===r?0:r,o=t.deltaAngleY,a=void 0===o?0:o,s=this._state,u=s.startRotatePos,l=s.startBearing,c=s.startPitch;return u&&Number.isFinite(l)&&Number.isFinite(c)?(e=n?this._calculateNewPitchAndBearing(yt.default({},this._getRotationParams(n,u),{startBearing:l,startPitch:c})):{bearing:l+i,pitch:c+a},this._getUpdatedState(e)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._state,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(e));var s=this._calculateNewZoom({scale:r,startZoom:o}),u=this.makeViewport(yt.default({},this._viewportProps,{zoom:s}));return this._getUpdatedState(yt.default({zoom:s},u.panByPosition(a,e)))}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}},{key:"moveLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}},{key:"moveRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}},{key:"moveUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}},{key:"moveDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}},{key:"rotateLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-t})}},{key:"rotateRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+t})}},{key:"rotateUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+t})}},{key:"rotateDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-t})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=yt.default({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.zoom({pos:[n/2,r/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+t[0],r/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new this.constructor(yt.default({makeViewport:this.makeViewport},this._viewportProps,this._state,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=Gl(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;t.pitch=Gl(a,o,i);var s=t.normalize;return(void 0===s||s)&&Object.assign(t,ot(t)),t}},{key:"_unproject",value:function(t){var e=this.makeViewport(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return Gl(n+Math.log2(e),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=Gl(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(a-i)),{pitch:u,bearing:r+180*e}}},{key:"_getRotationParams",value:function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=t[1],o=e[1],a=this._viewportProps,s=a.width,u=a.height,l=n/s,c=0;return r>0?Math.abs(u-o)>5&&(c=r/(o-u)*1.2):r<0&&o>5&&(c=1-i/o),{deltaScaleX:l,deltaScaleY:c=Math.min(1,Math.max(-1,c))}}}]),n}(Lf),Nf=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){return u.default(this,n),t.dragMode=t.dragMode||"pan",e.call(this,Df,t)}return l.default(n,[{key:"setProps",value:function(t){t.position=t.position||[0,0,0];var e=this.controllerStateProps;dt.default(gt.default(n.prototype),"setProps",this).call(this,t),(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState(yt.default({makeViewport:this.makeViewport},this.controllerStateProps,this._state)))}},{key:"linearTransitionProps",get:function(){return["longitude","latitude","zoom","bearing","pitch","position"]}}]),n}(Of),Ff=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){return u.default(this,n),e.call(this,yt.default({},t,{type:lf}))}return l.default(n,[{key:"controller",get:function(){return this._getControllerProps({type:Nf})}}]),n}(rf);Ff.displayName="MapView";u=a("ijozg"),l=a("pGAoq"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),u=a("ijozg");var jf=[255,255,255],zf=0,Bf=function t(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t);var n=e.color,r=void 0===n?jf:n,i=e.intensity,o=void 0===i?1:i;this.id=e.id||"ambient-".concat(zf++),this.color=r,this.intensity=o,this.type="ambient"},Uf=(u=a("ijozg"),l=a("pGAoq"),[255,255,255]),Vf=[0,0,-1],Gf=0,qf=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t);var n=e.color,r=void 0===n?Uf:n,i=e.intensity,o=void 0===i?1:i,a=e.direction,s=void 0===a?Vf:a,l=e._shadow,c=void 0!==l&&l;this.id=e.id||"directional-".concat(Gf++),this.color=r,this.intensity=o,this.type="directional",this.direction=new Ac(s).normalize().toArray(),this.shadow=c}return l.default(t,[{key:"getProjectedLight",value:function(){return this}}]),t}(),Wf=(u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t),mt(this,"id",void 0),mt(this,"props",void 0),mt(this,"useInPicking",void 0);var n=e.id,r=void 0===n?"effect":n;this.id=r,this.props=yt.default({},e),this.useInPicking=!1}return l.default(t,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(t){}},{key:"cleanup",value:function(){}}]),t}()),Hf=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),At=a("e2Lau"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};u.default(this,t),mt(this,"id",void 0),mt(this,"gl",void 0),mt(this,"props",void 0);var r=n.id;this.id=r,this.gl=e,this.props=yt.default({},n)}return l.default(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"render",value:function(t){}},{key:"cleanup",value:function(){}}]),t}()),Xf=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"render",value:function(t){return qe(this.gl,{framebuffer:t.target}),this._drawLayers(t)}},{key:"_drawLayers",value:function(t){var e=t.target,n=t.moduleParameters,r=t.viewports,i=t.views,o=t.onViewportActive,a=t.clearCanvas,s=void 0===a||a;t.pass=t.pass||"unknown";var u=this.gl;s&&function(t){var e=t.drawingBufferWidth,n=t.drawingBufferHeight;qe(t,{viewport:[0,0,e,n]}),t.clear(16640)}(u);var l=[],c=!0,f=!1,p=void 0;try{for(var h,d=r[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var g=h.value,y=i&&i[g.id];o(g);var A=this._getDrawLayerParams(g,t),v=g.subViewports||[g],m=!0,_=!1,b=void 0;try{for(var x,w=v[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var E=x.value,S=this._drawLayersInViewport(u,{target:e,moduleParameters:n,viewport:E,view:y,pass:t.pass,layers:t.layers},A);l.push(S)}}catch(t){_=!0,b=t}finally{try{m||null==w.return||w.return()}finally{if(_)throw b}}}}catch(t){f=!0,p=t}finally{try{c||null==d.return||d.return()}finally{if(f)throw p}}return l}},{key:"_getDrawLayerParams",value:function(t,e){for(var n=e.layers,r=e.pass,i=e.layerFilter,o=e.effects,a=e.moduleParameters,s=[],u=Zf(),l={layer:n[0],viewport:t,isPicking:r.startsWith("picking"),renderPass:r},c={},f=0;f<n.length;f++){var p=n[f],h=this._shouldDrawLayer(p,l,i,c),d={shouldDrawLayer:h,layerRenderIndex:u(p,h)};h&&(d.moduleParameters=this._getModuleParameters(p,o,r,a),d.layerParameters=this.getLayerParameters(p,f,t)),s[f]=d}return s}},{key:"_drawLayersInViewport",value:function(t,e,n){var r=e.layers,i=e.moduleParameters,o=e.pass,a=e.target,s=e.viewport,u=e.view,l=function(t,e){var n=e.moduleParameters,r=e.target,i=e.viewport,o=r&&"default-framebuffer"!==r.id,a=n&&n.devicePixelRatio||Xe(t),s=o?r.height:t.drawingBufferHeight,u=i;return[u.x*a,s-(u.y+u.height)*a,u.width*a,u.height*a]}(t,{moduleParameters:i,target:a,viewport:s});if(u&&u.props.clear){var c=!0===u.props.clear?{color:!0,depth:!0}:u.props.clear;He(t,{scissorTest:!0,scissor:l},(function(){return lr(t,c)}))}var f={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};qe(t,{viewport:l});for(var p=0;p<r.length;p++){var h=r[p],d=n[p],g=d.shouldDrawLayer,y=d.layerRenderIndex,A=d.moduleParameters,v=d.layerParameters;if(g&&h.props.pickable&&f.pickableCount++,h.isComposite)f.compositeCount++;else if(g){f.visibleCount++,A.viewport=s;try{h.drawLayer({moduleParameters:A,uniforms:{layerIndex:y},parameters:v})}catch(t){h.raiseError(t,"drawing ".concat(h," to ").concat(o))}}}return f}},{key:"shouldDrawLayer",value:function(t){return!0}},{key:"getModuleParameters",value:function(t,e){return null}},{key:"getLayerParameters",value:function(t,e,n){return t.props.parameters}},{key:"_shouldDrawLayer",value:function(t,e,n,r){if(!(this.shouldDrawLayer(t)&&t.props.visible))return!1;e.layer=t;for(var i=t.parent;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){var o=e.layer.id;if(o in r||(r[o]=n(e)),!r[o])return!1}return t.activateViewport(e.viewport),!0}},{key:"_getModuleParameters",value:function(t,e,n,r){var i=Object.assign(Object.create(t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Xe(this.gl)}),o=!0,a=!1,s=void 0;if(e)try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;Object.assign(i,c.getModuleParameters(t))}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}return Object.assign(i,this.getModuleParameters(t,e),r)}}]),n}(Hf);function Zf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=function(i,o){var a,s=i.props._offset,u=i.id,l=i.parent&&i.parent.id;if(l&&!(l in e)&&r(i.parent,!1),l in n){var c=n[l]=n[l]||Zf(e[l],e);a=c(i,o),n[u]=c}else Number.isFinite(s)?(a=s+(e[l]||0),n[u]=null):a=t;return o&&a>=t&&(t=a+1),e[u]=a,a};return r}var Yf=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t,r){var i,o,a;return u.default(this,n),i=e.call(this,t,r),mt(pn.default(i),"shadowMap",void 0),mt(pn.default(i),"depthBuffer",void 0),mt(pn.default(i),"fbo",void 0),i.shadowMap=new Zn(t,{width:1,height:1,parameters:(o={},At.default(o,10241,9729),At.default(o,10240,9729),At.default(o,10242,33071),At.default(o,10243,33071),o)}),i.depthBuffer=new rr(t,{format:33189,width:1,height:1}),i.fbo=new Gr(t,{id:"shadowmap",width:1,height:1,attachments:(a={},At.default(a,36064,i.shadowMap),At.default(a,36096,i.depthBuffer),a)}),i}return l.default(n,[{key:"render",value:function(t){var e=this,r=this.fbo;He(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var i=t.viewports[0],o=Xe(e.gl),a=i.width*o,s=i.height*o;a===r.width&&s===r.height||r.resize({width:a,height:s}),dt.default(gt.default(n.prototype),"render",e).call(e,yt.default({},t,{target:r,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function(t){return!1!==t.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),n}(Xf),Qf=(c=a("1zCSZ"),f=a("gj7DP"),qa((function(t){var e=t.viewport,n=t.center;return new kc(e.viewProjectionMatrix).invert().transform(n)}))),Kf=qa((function(t){var e=t.viewport,n=t.shadowMatrices,r=[],i=e.pixelUnprojectionMatrix,o=e.isGeospatial?void 0:1,a=[[0,0,o],[e.width,0,o],[0,e.height,o],[e.width,e.height,o],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((function(t){return function(t,e){var n=c.default(t,3),r=n[0],i=n[1],o=n[2],a=$([r,i,o],e);return Number.isFinite(o)?a:[a[0],a[1],0]}(t,i)})),s=!0,u=!1,l=void 0;try{for(var p,h=function(t,n){var i,o,s,u,l,c,p=n.value,h=p.clone().translate(new Ac(e.center).negate()),d=a.map((function(t){return h.transform(t)})),g=(new kc).ortho({left:(i=Math).min.apply(i,f.default(d.map((function(t){return t[0]})))),right:(o=Math).max.apply(o,f.default(d.map((function(t){return t[0]})))),bottom:(s=Math).min.apply(s,f.default(d.map((function(t){return t[1]})))),top:(u=Math).max.apply(u,f.default(d.map((function(t){return t[1]})))),near:(l=Math).min.apply(l,f.default(d.map((function(t){return-t[2]})))),far:(c=Math).max.apply(c,f.default(d.map((function(t){return-t[2]}))))});r.push(g.multiplyRight(p))},d=n[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)h(0,p)}catch(t){u=!0,l=t}finally{try{s||null==d.return||d.return()}finally{if(u)throw l}}return r})),Jf=[0,0,0,1],$f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function tp(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Jf,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=Qf({viewport:t.viewport,center:e.project_uCenter}),i=[],o=Kf({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice(),a=0;a<t.shadowMatrices.length;a++){var s=o[a],u=s.clone().translate(new Ac(t.viewport.center).negate());e.project_uCoordinateSystem===Ta.LNGLAT&&e.project_uProjectionMode===Ia.WEB_MERCATOR?(o[a]=u,i[a]=r):(o[a]=s.clone().multiplyRight($f),i[a]=u.transform(r))}for(var l=0;l<o.length;l++)n["shadow_uViewProjectionMatrices[".concat(l,"]")]=o[l],n["shadow_uProjectCenters[".concat(l,"]")]=i[l],t.shadowMaps&&t.shadowMaps.length>0?n["shadow_uShadowMap".concat(l)]=t.shadowMaps[l]:n["shadow_uShadowMap".concat(l)]=t.dummyShadowMap;return n}var ep={name:"shadow",dependencies:[ts],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){var n=t.shadowEnabled,r=void 0===n||n;return r&&t.shadowMatrices&&t.shadowMatrices.length>0?tp(t,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},np={color:[255,255,255],intensity:1},rp=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],ip=[0,0,0,200/255],op=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r;for(var i in u.default(this,n),(r=e.call(this,t)).ambientLight=null,r.directionalLights=[],r.pointLights=[],r.shadowColor=ip,r.shadowPasses=[],r.shadowMaps=[],r.dummyShadowMap=null,r.shadow=!1,r.programManager=null,t){var o=t[i];switch(o.type){case"ambient":r.ambientLight=o;break;case"directional":r.directionalLights.push(o);break;case"point":r.pointLights.push(o)}}return r._applyDefaultLights(),r.shadow=r.directionalLights.some((function(t){return t.shadow})),r}return l.default(n,[{key:"preRender",value:function(t,e){var n=e.layers,r=e.layerFilter,i=e.viewports,o=e.onViewportActive,a=e.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=oa.getDefaultProgramManager(t),ep&&this.programManager.addDefaultModule(ep)),this.dummyShadowMap||(this.dummyShadowMap=new Zn(t,{width:1,height:1}));for(var s=0;s<this.shadowPasses.length;s++){this.shadowPasses[s].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(t){var e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(e){return e.getProjectedLight({layer:t})})),pointLights:this.pointLights.map((function(e){return e.getProjectedLight({layer:t})}))},e}},{key:"cleanup",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.shadowPasses[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.delete()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(ep),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var i,o=this.directionalLights[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,s=(new kc).lookAt({eye:new Ac(a.direction).negate()});t.push(s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"_createShadowPasses",value:function(t){for(var e=0;e<this.directionalLights.length;e++){var n=new Yf(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}},{key:"_applyDefaultLights",value:function(){var t=this,e=t.ambientLight,n=t.pointLights,r=t.directionalLights;e||0!==n.length||0!==r.length||(this.ambientLight=new Bf(np),this.directionalLights.push(new qf(rp[0]),new qf(rp[1])))}}]),n}(Wf),ap=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),At=a("e2Lau"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF"),function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t,r){var i;u.default(this,n),i=e.call(this,t,r),mt(pn.default(i),"maskMap",void 0),mt(pn.default(i),"fbo",void 0);var o,a=r.mapSize,s=void 0===a?2048:a;return i.maskMap=new Zn(t,{width:s,height:s,parameters:(o={},At.default(o,10241,9729),At.default(o,10240,9729),At.default(o,10242,33071),At.default(o,10243,33071),o)}),i.fbo=new Gr(t,{id:"maskmap",width:s,height:s,attachments:At.default({},36064,i.maskMap)}),i}return l.default(n,[{key:"render",value:function(t){var e=this,r=this.gl,i=[!1,!1,!1,!1];return i[t.channel]=!0,He(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},(function(){return dt.default(gt.default(n.prototype),"render",e).call(e,yt.default({},t,{target:e.fbo,pass:"mask"}))}))}},{key:"shouldDrawLayer",value:function(t){return t.props.operation===Ra}},{key:"delete",value:function(){this.fbo.delete(),this.maskMap.delete()}}]),n}(Xf)),sp=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),c=a("1zCSZ"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),c=a("1zCSZ"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),{rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0}),up=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=t.makeViewport,o=t.width,a=t.height,s=t.rotationX,l=void 0===s?sp.rotationX:s,c=t.rotationOrbit,f=void 0===c?sp.rotationOrbit:c,p=t.target,h=void 0===p?sp.target:p,d=t.zoom,g=void 0===d?sp.zoom:d,y=t.minRotationX,A=void 0===y?sp.minRotationX:y,v=t.maxRotationX,m=void 0===v?sp.maxRotationX:v,_=t.minZoom,b=void 0===_?sp.minZoom:_,x=t.maxZoom,w=void 0===x?sp.maxZoom:x,E=t.startPanPosition,S=t.startRotatePos,P=t.startRotationX,k=t.startRotationOrbit,C=t.startZoomPosition,T=t.startZoom;return u.default(this,n),(r=e.call(this,{width:o,height:a,rotationX:l,rotationOrbit:f,target:h,zoom:g,minRotationX:A,maxRotationX:m,minZoom:b,maxZoom:w}))._state={startPanPosition:E,startRotatePos:S,startRotationX:P,startRotationOrbit:k,startZoomPosition:C,startZoom:T},r.makeViewport=i,r}return l.default(n,[{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanPosition:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPosition,r=this._state.startPanPosition||n;if(!r)return this;var i=this.makeViewport(this._viewportProps).panByPosition(r,e);return this._getUpdatedState(i)}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(t){var e,n=t.pos,r=t.deltaAngleX,i=void 0===r?0:r,o=t.deltaAngleY,a=void 0===o?0:o,s=this._state,u=s.startRotatePos,l=s.startRotationX,c=s.startRotationOrbit,f=this._viewportProps,p=f.width,h=f.height;if(!u||!Number.isFinite(l)||!Number.isFinite(c))return this;if(n){var d=(n[0]-u[0])/p;(l<-90||l>90)&&(d*=-1),e={rotationX:l+180*((n[1]-u[1])/h),rotationOrbit:c+180*d}}else e={rotationX:l+a,rotationOrbit:c+i};return this._getUpdatedState(e)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=yt.default({},this._viewportProps),r=n.rotationOrbit;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps.zoom,o=this._state,a=o.startZoom,s=o.startZoomPosition;Number.isFinite(a)||(a=i,s=this._unproject(n)||this._unproject(e));var u=this._calculateNewZoom({scale:r,startZoom:a}),l=this.makeViewport(yt.default({},this._viewportProps,{zoom:u}));return this._getUpdatedState(yt.default({zoom:u},l.panByPosition(s,e)))}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}},{key:"moveLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([-t,0])}},{key:"moveRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([t,0])}},{key:"moveUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,-t])}},{key:"moveDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,t])}},{key:"rotateLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-t})}},{key:"rotateRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+t})}},{key:"rotateUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX-t})}},{key:"rotateDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX+t})}},{key:"_unproject",value:function(t){var e=this.makeViewport(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return Number.isFinite(n)||(n=this._viewportProps.zoom),Gl(n+Math.log2(e),o,i)}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height,i=e.target;return this.pan({startPosition:i,pos:[n/2+t[0],r/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new this.constructor(yt.default({},this._viewportProps,this._state,t))}},{key:"_applyConstraints",value:function(t){var e,n,r=t.maxZoom,i=t.minZoom,o=t.zoom,a=t.maxRotationX,s=t.minRotationX,u=t.rotationOrbit;return t.zoom=Gl(o,i,r),t.rotationX=Gl(t.rotationX,s,a),(u<-180||u>180)&&(t.rotationOrbit=((n=(u+180)%(e=360))<0?e+n:n)-180),t}}]),n}(Lf),lp=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r;return u.default(this,n),r=e.call(this,t),mt(pn.default(r),"zoomAxis",void 0),r.zoomAxis=t.zoomAxis||"all",r}return l.default(n,[{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;return t.zoom=Array.isArray(r)?[Gl(r[0],n,e),Gl(r[1],n,e)]:Gl(r,n,e),t}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;n||0===n||(n=this._viewportProps.zoom);var a=Math.log2(e);if(Array.isArray(n)){var s=c.default(n,2),u=s[0],l=s[1];switch(this.zoomAxis){case"X":u=Gl(u+a,o,i);break;case"Y":l=Gl(l+a,o,i);break;default:var f=Math.min(u+a,l+a);f<o&&(a+=o-f),(f=Math.max(u+a,l+a))>i&&(a+=i-f),u+=a,l+=a}return[u,l]}return Gl(n+a,o,i)}}]),n}(up),cp=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){return u.default(this,n),t.dragMode=t.dragMode||"pan",e.call(this,lp,t)}return l.default(n,[{key:"_onPanRotate",value:function(t){return!1}},{key:"linearTransitionProps",get:function(){return["target","zoom"]}}]),n}(Of),fp=(new kc).lookAt({eye:[0,0,1]});function pp(t){var e=t.width,n=t.height,r=t.near,i=t.far;return e=e||1,n=n||1,(new kc).ortho({left:-e/2,right:e/2,bottom:-n/2,top:n/2,near:r,far:i})}var hp=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){u.default(this,n);var r,i=t.width,o=t.height,a=t.near,s=void 0===a?.1:a,l=t.far,c=void 0===l?1e3:l,f=t.zoom,p=void 0===f?0:f,h=t.target,d=void 0===h?[0,0,0]:h,g=t.flipY,y=void 0===g||g,A=Array.isArray(p)?p[0]:p,v=Array.isArray(p)?p[1]:p,m=Math.min(A,v),_=Math.pow(2,m);if(A!==v){var b=Math.pow(2,A),x=Math.pow(2,v);r={unitsPerMeter:[b/_,x/_,1],metersPerUnit:[_/b,_/x,1]}}return e.call(this,yt.default({},t,{longitude:null,position:d,viewMatrix:fp.clone().scale([_,_*(y?-1:1),_]),projectionMatrix:pp({width:i,height:o,near:s,far:c}),zoom:m,distanceScales:r}))}return l.default(n,[{key:"projectFlat",value:function(t){var e=c.default(t,2),n=e[0],r=e[1],i=this.distanceScales.unitsPerMeter;return[n*i[0],r*i[1]]}},{key:"unprojectFlat",value:function(t){var e=c.default(t,2),n=e[0],r=e[1],i=this.distanceScales.metersPerUnit;return[n*i[0],r*i[1]]}},{key:"panByPosition",value:function(t,e){var n=$(e,this.pixelUnprojectionMatrix),r=of([],this.projectFlat(t),af([],n)),i=of([],this.center,r);return{target:this.unprojectFlat(i)}}}]),n}(Zc),dp=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){return u.default(this,n),e.call(this,yt.default({},t,{type:hp}))}return l.default(n,[{key:"controller",get:function(){return this._getControllerProps({type:cp})}}]),n}(rf);dp.displayName="OrthographicView";var gp=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r;return u.default(this,n),(r=e.call(this,t)).dummyMaskMap=null,r.useInPicking=!0,r.channels=[],r.masks=null,r}return l.default(n,[{key:"preRender",value:function(t,e){var n=e.layers,r=e.layerFilter,i=e.viewports,o=e.onViewportActive,a=e.views;this.dummyMaskMap||(this.dummyMaskMap=new Zn(t,{width:1,height:1}));var s=n.filter((function(t){return t.props.operation===Ra&&t.props.visible}));if(0===s.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new ap(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);var u=this._sortMaskChannels(s),l=i[0],c=!this.lastViewport||!this.lastViewport.equals(l);for(var f in u)this._renderChannel(u[f],{layerFilter:r,onViewportActive:o,views:a,viewport:l,viewportChanged:c})}},{key:"_renderChannel",value:function(t,e){var n=e.layerFilter,r=e.onViewportActive,i=e.views,o=e.viewport,a=e.viewportChanged,s=this.channels[t.index],u=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((function(t,e){return t!==s.layerBounds[e]}));if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(u||a)&&(this.lastViewport=o,t.bounds=function(t){var e=t.layers,n=t.viewport,r=null,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value.getBounds();l&&(r?(r[0]=Math.min(r[0],l[0][0]),r[1]=Math.min(r[1],l[0][1]),r[2]=Math.max(r[2],l[1][0]),r[3]=Math.max(r[3],l[1][1])):r=[l[0][0],l[0][1],l[1][0],l[1][1]])}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var c=n.getBounds();if(!r)return c;var f=function(t){var e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}(c);return r[2]-r[0]<f[2]-f[0]||r[3]-r[1]<f[3]-f[1]||(r[0]=Math.max(r[0],f[0]),r[1]=Math.max(r[1],f[1]),r[2]=Math.min(r[2],f[2]),r[3]=Math.min(r[3],f[3])),r}({layers:t.layers,viewport:o}),u||!Wl(t.bounds,s.bounds))){var l=this.maskPass,c=this.maskMap,f=function(t){var e=t.bounds,n=t.viewport,r=t.width,i=t.height;if(e[2]<=e[0]||e[3]<=e[1])return null;if(r-=2,i-=2,n instanceof lf){var o=tt({width:r,height:i,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20}),a=o.longitude,s=o.latitude,u=o.zoom;return new lf({longitude:a,latitude:s,zoom:u,x:1,y:1,width:r,height:i})}var l=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],c=Math.min(20,r/(e[2]-e[0]),i/(e[3]-e[1]));return new dp({x:1,y:1}).makeViewport({width:r,height:i,viewState:{target:l,zoom:Math.log2(c)}})}({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],l.render({channel:t.index,layers:t.layers,layerFilter:n,viewports:f?[f]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}},{key:"_sortMaskChannels",value:function(t){var e={},n=0,r=!0,i=!1,o=void 0;try{for(var a,s=this,u=function(t,r){var i=r.value,o=i.root.id,a=e[o];if(!a){if(++n>4)return Ca.warn("Too many mask layers. The max supported is 4")(),"continue";a={id:o,index:s.channels.findIndex((function(t){return(null==t?void 0:t.id)===o})),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},e[o]=a}a.layers.push(i),a.layerBounds.push(i.getBounds())},l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)u(0,a)}catch(t){i=!0,o=t}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}for(var c=0;c<4;c++){var f=this.channels[c];f&&f.id in e||(this.channels[c]=null)}for(var p in e){var h=e[p];h.index<0&&(h.index=this.channels.findIndex((function(t){return!t})),this.channels[h.index]=h)}return e}},{key:"getModuleParameters",value:function(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}},{key:"cleanup",value:function(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=null),this.maskPass&&(this.maskPass.delete(),this.maskPass=null,this.maskMap=null),this.lastViewport=null,this.masks=null,this.channels.length=0}}]),n}(Wf),yp=new op,Ap=function(){"use strict";function t(){u.default(this,t),mt(this,"effects",void 0),mt(this,"_internalEffects",void 0),mt(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return l.default(t,[{key:"setProps",value:function(t){"effects"in t&&(t.effects.length===this.effects.length&&Kc(t.effects,this.effects)||(this.setEffects(t.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new gp),t.some((function(t){return t instanceof op}))||this._internalEffects.push(yp)}},{key:"cleanup",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.cleanup()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var o=!0,a=!1,s=void 0;try{for(var u,l=this._internalEffects[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){u.value.cleanup()}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}this.effects.length=0,this._internalEffects.length=0}}]),t}(),vp=(u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"shouldDrawLayer",value:function(t){return t.props.operation===La}}]),n}(Xf)),mp=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),f=a("gj7DP"),pn=a("9PFJu"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF"),{blendFunc:[1,0,32771,0],blendEquation:32774}),_p=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o;return u.default(this,n),o=e.call.apply(e,[this].concat(f.default(r))),mt(pn.default(o),"pickZ",void 0),mt(pn.default(o),"_colors",null),o}return l.default(n,[{key:"render",value:function(t){return t.pickingFBO?this._drawPickingBuffer(t):dt.default(gt.default(n.prototype),"render",this).call(this,t)}},{key:"_drawPickingBuffer",value:function(t){var e=t.layers,r=t.layerFilter,i=t.views,o=t.viewports,a=t.onViewportActive,s=t.pickingFBO,u=t.deviceRect,l=u.x,c=u.y,f=u.width,p=u.height,h=t.effects,d=t.pass,g=void 0===d?"picking":d,y=t.pickZ,A=this,v=this.gl;this.pickZ=y;var m=y?null:{byLayer:new Map,byAlpha:[]};this._colors=m;var _=He(v,yt.default({scissorTest:!0,scissor:[l,c,f,p],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},mp,{blend:!y}),(function(){return dt.default(gt.default(n.prototype),"render",A).call(A,{target:s,layers:e,layerFilter:r,views:i,viewports:o,onViewportActive:a,effects:null==h?void 0:h.filter((function(t){return t.useInPicking})),pass:g})}));return this._colors=null,{decodePickingColor:m&&bp.bind(null,m),stats:_}}},{key:"shouldDrawLayer",value:function(t){return t.props.pickable&&t.props.operation===La}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(t,e,n){var r=yt.default({},t.props.parameters);return this._colors?(Object.assign(r,mp),r.blend=!0,r.blendColor=function(t,e,n){var r,i=t.byLayer,o=t.byAlpha,a=i.get(e);a?(a.viewports.push(n),r=a.a):(r=i.size+1)<=255?(a={a:r,layer:e,viewports:[n]},i.set(e,a),o[r]=a):(Ca.warn("Too many pickable layers, only picking the first 255")(),r=0);return[0,0,0,r/255]}(this._colors,t,n)):r.blend=!1,r}}]),n}(Xf);function bp(t,e){var n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}var xp=function(){"use strict";function t(e){u.default(this,t),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new vp(e),this.pickLayersPass=new _p(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}return l.default(t,[{key:"setProps",value:function(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}},{key:"renderLayers",value:function(t){var e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||Gr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);var n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,r=e.render(yt.default({},t,{target:n}));this._postRender(t.effects,t),this.renderCount++,As("deckRenderer.renderLayers",this,r,t)}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"finalize",value:function(){var t=this.renderBuffers,e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.delete()}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}t.length=0}},{key:"_preRender",value:function(t,e){var n=null,r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u.preRender(this.gl,e),u.postRender&&(n=u)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}},{key:"_resizeRenderBuffers",value:function(){var t=this.renderBuffers;0===t.length&&t.push(new Gr(this.gl),new Gr(this.gl));var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.resize()}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"_postRender",value:function(t,e){var n=this.renderBuffers,r={inputBuffer:n[0],swapBuffer:n[1],target:null},i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;if(l.postRender){if(l===this.lastPostProcessEffect){r.target=e.target,l.postRender(this.gl,r);break}var c=l.postRender(this.gl,r);r.inputBuffer=c,r.swapBuffer=c===n[0]?n[1]:n[0]}}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}]),t}(),wp=(u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),At=a("e2Lau"),yt=a("11zLF"),{pickedColor:null,pickedLayer:null,pickedObjectIndex:-1});function Ep(t){var e=t.pickedColors,n=t.decodePickingColor,r=t.deviceX,i=t.deviceY,o=t.deviceRadius,a=t.deviceRect;if(e){for(var s=a.x,u=a.y,l=a.width,c=a.height,f=o*o,p=-1,h=0,d=0;d<c;d++){var g=d+u-i,y=g*g;if(y>f)h+=4*l;else for(var A=0;A<l;A++){if(e[h+3]-1>=0){var v=A+s-r,m=v*v+y;m<=f&&(f=m,p=h)}h+=4}}if(p>=0){var _=e.slice(p,p+4),b=n(_);if(b){var x=Math.floor(p/4/l),w=p/4-x*l;return yt.default({},b,{pickedColor:_,pickedX:s+w,pickedY:u+x})}Ca.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return wp}yt=a("11zLF");function Sp(t){var e=t.pickInfo,n=t.viewports,r=t.pixelRatio,i=t.x,o=t.y,a=t.z,s=n[0];n.length>1&&(s=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.containsPixel(e))return r}return t[0]}((null==e?void 0:e.pickedViewports)||n,{x:i,y:o}));var u=s&&s.unproject([i-s.x,o-s.y,a]);return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:o,pixel:[i,o],coordinate:u,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:null,pixelRatio:r}}function Pp(t){var e=t.pickInfo,n=t.lastPickedInfo,r=t.mode,i=t.layers,o=e.pickedColor,a=e.pickedLayer,s=e.pickedObjectIndex,u=a?[a]:[];if("hover"===r){var l=n.index,c=n.layerId,f=a&&a.props.id;if(f!==c||s!==l){if(f!==c){var p=i.find((function(t){return t.props.id===c}));p&&u.unshift(p)}n.layerId=f,n.index=s,n.info=null}}var h=Sp(t),d=new Map;return d.set(null,h),u.forEach((function(t){var e=yt.default({},h);t===a&&(e.color=o,e.index=s,e.picked=!0),e=kp({layer:t,info:e,mode:r}),t===a&&"hover"===r&&(n.info=e),d.set(e.layer.id,e),"hover"===r&&e.layer.updateAutoHighlight(e)})),d}function kp(t){for(var e=t.layer,n=t.info,r=t.mode;e&&n;){var i=n.layer||null;n.sourceLayer=i,n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:i}),e=e.parent}return n}var Cp=function(){"use strict";function t(e){u.default(this,t),this.gl=e,this.pickingFBO=null,this.pickLayersPass=new _p(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return l.default(t,[{key:"setProps",value:function(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(t){return this._pickClosestObject(t)}},{key:"pickObjects",value:function(t){return this._pickVisibleObjects(t)}},{key:"getLastPickedObject",value:function(t){var e=t.x,n=t.y,r=t.layers,i=t.viewports,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,u=a?r.find((function(t){return t.id===a})):null,l=s&&i.find((function(t){return t.id===s}))||i[0],c=l&&l.unproject([e-l.x,n-l.y]),f={x:e,y:n,viewport:l,coordinate:c,layer:u};return yt.default({},o,f)}},{key:"_resizeBuffer",value:function(){var t=this.gl;return this.pickingFBO||(this.pickingFBO=new Gr(t),Gr.isSupported(t,{colorBufferFloat:!0})&&(this.depthFBO=new Gr(t),this.depthFBO.attach(At.default({},36064,new Zn(t,{format:Zt(t)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function(t){if(!1===this._pickable)return null;var e=t.filter((function(t){return t.isPickable()&&!t.isComposite}));return e.length?e:null}},{key:"_pickClosestObject",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.x,o=t.y,a=t.radius,s=void 0===a?0:a,u=t.depth,l=void 0===u?1:u,c=t.mode,f=void 0===c?"query":c,p=t.unproject3D,h=t.onViewportActive,d=t.effects;if(!(e=this._getPickable(e)))return{result:[],emptyInfo:Sp({viewports:r,x:i,y:o})};this._resizeBuffer();for(var g,y=Xe(this.gl),A=Ze(this.gl,[i,o],!0),v=[A.x+Math.floor(A.width/2),A.y+Math.floor(A.height/2)],m=Math.round(s*y),_=this.pickingFBO,b=_.width,x=_.height,w=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceWidth:b,deviceHeight:x}),E=[],S=new Set,P=0;P<l;P++){var k=w&&this._drawAndSample({layers:e,views:n,viewports:r,onViewportActive:h,deviceRect:w,effects:d,pass:"picking:".concat(f),redrawReason:f}),C=Ep(yt.default({},k,{deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceRect:w})),T=void 0;if(C.pickedLayer&&p&&this.depthFBO)T=this._drawAndSample({layers:[C.pickedLayer],views:n,viewports:r,onViewportActive:h,deviceRect:{x:C.pickedX,y:C.pickedY,width:1,height:1},effects:d,pass:"picking:".concat(f),redrawReason:"pick-z",pickZ:!0}).pickedColors[0];C.pickedLayer&&P+1<l&&(S.add(C.pickedLayer),C.pickedLayer.disablePickingIndex(C.pickedObjectIndex)),g=Pp({pickInfo:C,lastPickedInfo:this.lastPickedInfo,mode:f,layers:e,viewports:r,x:i,y:o,z:T,pixelRatio:y});var I=!0,M=!1,O=void 0;try{for(var L,R=g.values()[Symbol.iterator]();!(I=(L=R.next()).done);I=!0){var D=L.value;D.layer&&E.push(D)}}catch(t){M=!0,O=t}finally{try{I||null==R.return||R.return()}finally{if(M)throw O}}if(!C.pickedColor)break}var N=!0,F=!1,j=void 0;try{for(var z,B=S[Symbol.iterator]();!(N=(z=B.next()).done);N=!0){z.value.restorePickingColors()}}catch(t){F=!0,j=t}finally{try{N||null==B.return||B.return()}finally{if(F)throw j}}return{result:E,emptyInfo:g&&g.get(null)}}},{key:"_pickVisibleObjects",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.x,o=t.y,a=t.width,s=void 0===a?1:a,u=t.height,l=void 0===u?1:u,c=t.mode,f=void 0===c?"query":c,p=t.maxObjects,h=void 0===p?null:p,d=t.onViewportActive,g=t.effects;if(!(e=this._getPickable(e)))return[];this._resizeBuffer();for(var y=Xe(this.gl),A=Ze(this.gl,[i,o],!0),v=A.x,m=A.y+A.height,_=Ze(this.gl,[i+s,o+l],!0),b=_.x+_.width,x=_.y,w={x:v,y:x,width:b-v,height:m-x},E=function(t){var e=t.pickedColors,n=t.decodePickingColor,r=new Map;if(e)for(var i=0;i<e.length;i+=4)if(e[i+3]-1>=0){var o=e.slice(i,i+4),a=o.join(",");if(!r.has(a)){var s=n(o);s?r.set(a,yt.default({},s,{pickedColor:o})):Ca.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:e,views:n,viewports:r,onViewportActive:d,deviceRect:w,effects:g,pass:"picking:".concat(f),redrawReason:f})),S=new Map,P=Number.isFinite(h),k=0;k<E.length&&!(P&&S.size>=h);k++){var C=E[k],T={color:C.pickedColor,layer:null,index:C.pickedObjectIndex,picked:!0,x:i,y:o,width:s,height:l,pixelRatio:y};T=kp({layer:C.pickedLayer,info:T,mode:f}),S.has(T.object)||S.set(T.object,T)}return Array.from(S.values())}},{key:"_drawAndSample",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.onViewportActive,o=t.deviceRect,a=t.effects,s=t.pass,u=t.redrawReason,l=t.pickZ,c=l?this.depthFBO:this.pickingFBO,f=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:c,deviceRect:o,effects:a,pass:s,redrawReason:u,pickZ:l}).decodePickingColor,p=o.x,h=o.y,d=o.width,g=o.height,y=new(l?Float32Array:Uint8Array)(d*g*4);return pr(c,{sourceX:p,sourceY:h,sourceWidth:d,sourceHeight:g,target:y}),{pickedColors:y,decodePickingColor:f}}},{key:"_getPickingRect",value:function(t){var e=t.deviceX,n=t.deviceY,r=t.deviceRadius,i=t.deviceWidth,o=t.deviceHeight,a=Math.max(0,e-r),s=Math.max(0,n-r),u=Math.min(i,e+r+1)-a,l=Math.min(o,n+r+1)-s;return u<=0||l<=0?null:{x:a,y:s,width:u,height:l}}}]),t}(),Tp=(u=a("ijozg"),l=a("pGAoq"),{zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"}),Ip=function(){"use strict";function t(e){u.default(this,t);var n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Tp),n.appendChild(this.el)),this.isVisible=!1}return l.default(t,[{key:"setTooltip",value:function(t,e,n){var r=this.el;if("string"==typeof t)r.innerText=t;else{if(!t)return this.isVisible=!1,void(r.style.display="none");"text"in t&&(r.innerText=t.text),"html"in t&&(r.innerHTML=t.html),"className"in t&&(r.className=t.className),Object.assign(r.style,t.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),t}(),Mp=(yt=a("11zLF"),Yn=a("cqwPg"),Qn=a("4Z8U5"),globalThis._parseImageNode),Op="undefined"!=typeof Image,Lp="undefined"!=typeof ImageBitmap,Rp=Boolean(Mp),Dp=!!Ps||Rp;function Np(t){var e=jp(t);if(!e)throw new Error("Not an image");return e}function Fp(t){switch(Np(t)){case"data":return t;case"image":case"imagebitmap":var e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function jp(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}Yn=a("cqwPg"),Qn=a("4Z8U5");var zp=/^data:image\/svg\+xml/,Bp=/\.svg((\?|#).*)?$/;function Up(t){return t&&(zp.test(t)||Bp.test(t))}function Vp(t,e){if(Up(e)){var n=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(n=unescape(encodeURIComponent(n)))}catch(t){throw new Error(t.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return Gp(t,e)}function Gp(t,e){if(Up(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function qp(t,e,n){return Wp.apply(this,arguments)}function Wp(){return Wp=Yn.default(r(Qn).mark((function t(e,n,i){var o,a,s;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Vp(e,i),a=self.URL||self.webkitURL,s="string"!=typeof o&&a.createObjectURL(o),t.prev=3,t.next=6,Hp(s||o,n);case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,s&&a.revokeObjectURL(s),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])}))),Wp.apply(this,arguments)}function Hp(t,e){return Xp.apply(this,arguments)}function Xp(){return Xp=Yn.default(r(Qn).mark((function t(e,n){var i;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=new Image).src=e,!(n.image&&n.image.decode&&i.decode)){t.next=6;break}return t.next=5,i.decode();case 5:return t.abrupt("return",i);case 6:return t.next=8,new Promise((function(t,n){try{i.onload=function(){return t(i)},i.onerror=function(t){return n(new Error("Could not load image ".concat(e,": ").concat(t)))}}catch(t){n(t)}}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)}))),Xp.apply(this,arguments)}Yn=a("cqwPg"),Qn=a("4Z8U5");var Zp={},Yp=!0;function Qp(t,e,n){return Kp.apply(this,arguments)}function Kp(){return Kp=Yn.default(r(Qn).mark((function t(e,n,i){var o,a,s;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Up(i)){t.next=8;break}return t.next=4,qp(e,n,i);case 4:a=t.sent,o=a,t.next=9;break;case 8:o=Gp(e,i);case 9:return s=n&&n.imagebitmap,t.next=12,Jp(o,s);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)}))),Kp.apply(this,arguments)}function Jp(t){return $p.apply(this,arguments)}function $p(){return $p=Yn.default(r(Qn).mark((function t(e){var n,i=arguments;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!th(n=i.length>1&&void 0!==i[1]?i[1]:null)&&Yp||(n=null),!n){t.next=13;break}return t.prev=3,t.next=6,createImageBitmap(e,n);case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(3),console.warn(t.t0),Yp=!1;case 13:return t.next=15,createImageBitmap(e);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,null,[[3,9]])}))),$p.apply(this,arguments)}function th(t){for(var e in t||Zp)return!1;return!0}Yn=a("cqwPg"),Qn=a("4Z8U5");var eh=!1,nh=!0;function rh(t){var e=ih(t);return function(t){var e=ih(t);return e.byteLength>=24&&e.getUint32(0,eh)===2303741511?{mimeType:"image/png",width:e.getUint32(16,eh),height:e.getUint32(20,eh)}:null}(e)||function(t){var e=ih(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,eh)&&255===e.getUint8(2)))return null;var n=function(){for(var t=new Set([65499,65476,65484,65501,65534]),e=65504;e<65520;++e)t.add(e);var n=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:n}}(),r=n.tableMarkers,i=n.sofMarkers,o=2;for(;o+9<e.byteLength;){var a=e.getUint16(o,eh);if(i.has(a))return{mimeType:"image/jpeg",height:e.getUint16(o+5,eh),width:e.getUint16(o+7,eh)};if(!r.has(a))return null;o+=2,o+=e.getUint16(o,eh)}return null}(e)||function(t){var e=ih(t);return e.byteLength>=10&&e.getUint32(0,eh)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,nh),height:e.getUint16(8,nh)}:null}(e)||function(t){var e=ih(t);return e.byteLength>=14&&e.getUint16(0,eh)===16973&&e.getUint32(2,nh)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,nh),height:e.getUint32(22,nh)}:null}(e)}function ih(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function oh(t,e){return ah.apply(this,arguments)}function ah(){return(ah=Yn.default(r(Qn).mark((function t(e,n){var i,o;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(rh(e)||{}).mimeType,Ss(o=globalThis._parseImageNode),t.next=5,o(e,i);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function sh(){return sh=Yn.default(r(Qn).mark((function t(e,n,i){var o,a,s,u,l;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=(n=n||{}).image||{},a=o.type||"auto",s=(i||{}).url,u=uh(a),t.t0=u,t.next="imagebitmap"===t.t0?9:"image"===t.t0?13:"data"===t.t0?17:21;break;case 9:return t.next=11,Qp(e,n,s);case 11:return l=t.sent,t.abrupt("break",22);case 13:return t.next=15,qp(e,n,s);case 15:return l=t.sent,t.abrupt("break",22);case 17:return t.next=19,oh(e,n);case 19:return l=t.sent,t.abrupt("break",22);case 21:Ss(!1);case 22:return"data"===a&&(l=Fp(l)),t.abrupt("return",l);case 24:case"end":return t.stop()}}),t)}))),sh.apply(this,arguments)}function uh(t){switch(t){case"auto":case"data":return function(){if(Lp)return"imagebitmap";if(Op)return"image";if(Dp)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return Lp||Op||Dp;case"imagebitmap":return Lp;case"image":return Op;case"data":return Dp;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}var lh={id:"image",module:"images",name:"Images",version:"3.1.8",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(t,e,n){return sh.apply(this,arguments)},tests:[function(t){return Boolean(rh(new DataView(t)))}],options:{image:{type:"auto",decode:!0}}};var ch={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){var e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},fh="8.7.2",ph=globalThis.deck&&globalThis.deck.VERSION;if(ph&&ph!==fh)throw new Error("deck.gl - multiple versions detected: ".concat(ph," vs ").concat(fh));ph||(Ca.log(1,"deck.gl ".concat(fh))(),globalThis.deck=yt.default({},globalThis.deck,{VERSION:fh,version:fh,log:Ca,_registerLoggers:function(t){ys=t}}),function(t){var e=Zu();t=Array.isArray(t)?t:[t];var n=!0,r=!1,i=void 0;try{for(var o,a=function(t,n){var r=su(n.value);e.find((function(t){return r===t}))||e.unshift(r)},s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)a(0,o)}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}([ch,[lh,{imagebitmap:{premultiplyAlpha:"none"}}]]));var hh=globalThis.deck;a("2DOCw");Mi=a("aNBzk"),u=a("ijozg"),l=a("pGAoq"),c=a("1zCSZ");var dh={};vt=a("5qgrd");
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(t,e,n,r){var i,o=function(t,e,n){return setTimeout(c(t,n),e)},a=function(t,e,n){return!!Array.isArray(t)&&(s(t,n[e],n),!0)},s=function(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==r)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)},u=function(e,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=t.console&&(t.console.warn||t.console.log);return o&&o.call(t.console,i,r),e.apply(this,arguments)}},l=function(t,e,n){var r,o=e.prototype;(r=t.prototype=Object.create(o)).constructor=t,r._super=o,n&&i(r,n)},c=function(t,e){return function(){return t.apply(e,arguments)}},f=function(t,e){return(void 0===t?"undefined":vt.default(t))==ut?t.apply(e&&e[0]||r,e):t},p=function(t,e){return t===r?e:t},h=function(t,e,n){s(A(e),(function(e){t.addEventListener(e,n,!1)}))},d=function(t,e,n){s(A(e),(function(e){t.removeEventListener(e,n,!1)}))},g=function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},y=function(t,e){return t.indexOf(e)>-1},A=function(t){return t.trim().split(/\s+/g)},v=function(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1},m=function(t){return Array.prototype.slice.call(t,0)},_=function(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];v(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r},b=function(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),a=0;a<at.length;){if((i=(n=at[a])?n+o:e)in t)return i;a++}return r},x=function(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t},w=function(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){f(t.options.enable,[t])&&n.handler(e)},this.init()},E=function(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&xt&&r-i==0,a=e&(Et|St)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,S(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n},S=function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=C(e)),i>1&&!n.firstMultiple?n.firstMultiple=C(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=T(r);e.timeStamp=ft(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=L(s,u),e.distance=O(s,u),P(n,e),e.offsetDirection=M(e.deltaX,e.deltaY);var l=I(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=ct(l.x)>ct(l.y)?l.x:l.y,e.scale=a?D(a.pointers,r):1,e.rotation=a?R(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,k(n,e);var c=t.element;g(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c},P=function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==xt&&o.eventType!==Et||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)},k=function(t,e){var n,i,o,a,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(e.eventType!=St&&(u>bt||s.velocity===r)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,f=I(u,l,c);i=f.x,o=f.y,n=ct(f.x)>ct(f.y)?f.x:f.y,a=M(l,c),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=a},C=function(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:lt(t.pointers[n].clientX),clientY:lt(t.pointers[n].clientY)},n++;return{timeStamp:ft(),pointers:e,center:T(e),deltaX:t.deltaX,deltaY:t.deltaY}},T=function(t){var e=t.length;if(1===e)return{x:lt(t[0].clientX),y:lt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:lt(n/e),y:lt(r/e)}},I=function(t,e,n){return{x:e/t||0,y:n/t||0}},M=function(t,e){return t===e?Pt:ct(t)>=ct(e)?t<0?kt:Ct:e<0?Tt:It},O=function(t,e,n){n||(n=Rt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)},L=function(t,e,n){n||(n=Rt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI},R=function(t,e){return L(e[1],e[0],Dt)+L(t[1],t[0],Dt)},D=function(t,e){return O(e[0],e[1],Dt)/O(t[0],t[1],Dt)},N=function(){this.evEl=Ft,this.evWin=jt,this.pressed=!1,w.apply(this,arguments)},F=function(){this.evEl=Ut,this.evWin=Vt,w.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]},j=function(){this.evTarget=qt,this.evWin=Wt,this.started=!1,w.apply(this,arguments)},z=function(t,e){var n=m(t.touches),r=m(t.changedTouches);return e&(Et|St)&&(n=_(n.concat(r),"identifier",!0)),[n,r]},B=function(){this.evTarget=Xt,this.targetIds={},w.apply(this,arguments)},U=function(t,e){var n=m(t.touches),r=this.targetIds;if(e&(xt|wt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=m(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return g(t.target,u)})),e===xt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(Et|St)&&delete r[a[i].identifier],i++;return s.length?[_(o.concat(s),"identifier",!0),s]:void 0},V=function(){w.apply(this,arguments);var t=c(this.handler,this);this.touch=new B(this.manager,t),this.mouse=new N(this.manager,t),this.primaryTouch=null,this.lastTouches=[]},G=function(t,e){t&xt?(this.primaryTouch=e.changedPointers[0].identifier,q.call(this,e)):t&(Et|St)&&q.call(this,e)},q=function(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Zt)}},W=function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=Yt&&a<=Yt)return!0}return!1},H=function(t,e){this.manager=t,this.set(e)},X=function(t){this.options=i({},this.defaults,t||{}),this.id=dt++,this.manager=null,this.options.enable=p(this.options.enable,!0),this.state=oe,this.simultaneous={},this.requireFail=[]},Z=function(t){return t&ce?"cancel":t&ue?"end":t&se?"move":t&ae?"start":""},Y=function(t){return t==It?"down":t==Tt?"up":t==kt?"left":t==Ct?"right":""},Q=function(t,e){var n=e.manager;return n?n.get(t):t},K=function(){X.apply(this,arguments)},J=function(){K.apply(this,arguments),this.pX=null,this.pY=null},$=function(){K.apply(this,arguments)},tt=function(){X.apply(this,arguments),this._timer=null,this._input=null},et=function(){K.apply(this,arguments)},nt=function(){K.apply(this,arguments)},rt=function(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0},it=function(t,e){var n;this.options=i({},pe.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(yt?F:At?B:gt?V:N))(n,E),this.touchAction=new H(this,this.options.touchAction),ot(this,!0),s(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)},ot=function(t,e){var n,r=t.element;r.style&&(s(t.options.cssProps,(function(i,o){n=b(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))},at=["","webkit","Moz","MS","ms","o"],st=e.createElement("div"),ut="function",lt=Math.round,ct=Math.abs,ft=Date.now;i="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==r&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var pt=u((function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===r)&&(t[i[o]]=e[i[o]]),o++;return t}),"extend","Use `assign`."),ht=u((function(t,e){return pt(t,e,!0)}),"merge","Use `assign`."),dt=1,gt="ontouchstart"in t,yt=b(t,"PointerEvent")!==r,At=gt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),mt="touch",_t="mouse",bt=25,xt=1,wt=2,Et=4,St=8,Pt=1,kt=2,Ct=4,Tt=8,It=16,Mt=kt|Ct,Ot=Tt|It,Lt=Mt|Ot,Rt=["x","y"],Dt=["clientX","clientY"];w.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(x(this.element),this.evWin,this.domHandler)}};var Nt={mousedown:xt,mousemove:wt,mouseup:Et},Ft="mousedown",jt="mousemove mouseup";l(N,w,{handler:function(t){var e=Nt[t.type];e&xt&&0===t.button&&(this.pressed=!0),e&wt&&1!==t.which&&(e=Et),this.pressed&&(e&Et&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:_t,srcEvent:t}))}});var zt={pointerdown:xt,pointermove:wt,pointerup:Et,pointercancel:St,pointerout:St},Bt={2:mt,3:"pen",4:_t,5:"kinect"},Ut="pointerdown",Vt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Ut="MSPointerDown",Vt="MSPointerMove MSPointerUp MSPointerCancel"),l(F,w,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=zt[r],o=Bt[t.pointerType]||t.pointerType,a=o==mt,s=v(e,t.pointerId,"pointerId");i&xt&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Et|St)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Gt={touchstart:xt,touchmove:wt,touchend:Et,touchcancel:St},qt="touchstart",Wt="touchstart touchmove touchend touchcancel";l(j,w,{handler:function(t){var e=Gt[t.type];if(e===xt&&(this.started=!0),this.started){var n=z.call(this,t,e);e&(Et|St)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:mt,srcEvent:t})}}});var Ht={touchstart:xt,touchmove:wt,touchend:Et,touchcancel:St},Xt="touchstart touchmove touchend touchcancel";l(B,w,{handler:function(t){var e=Ht[t.type],n=U.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:mt,srcEvent:t})}});var Zt=2500,Yt=25;l(V,w,{handler:function(t,e,n){var r=n.pointerType==mt,i=n.pointerType==_t;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)G.call(this,e,n);else if(i&&W.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Qt=b(st.style,"touchAction"),Kt=Qt!==r,Jt="compute",$t="auto",te="manipulation",ee="none",ne="pan-x",re="pan-y",ie=function(){if(!Kt)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){e[r]=!n||t.CSS.supports("touch-action",r)})),e}();H.prototype={set:function(t){t==Jt&&(t=this.compute()),Kt&&this.manager.element.style&&ie[t]&&(this.manager.element.style[Qt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,(function(e){f(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(y(t,ee))return ee;var e=y(t,ne),n=y(t,re);return e&&n?ee:e||n?e?ne:re:y(t,te)?te:$t}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=y(r,ee)&&!ie[ee],o=y(r,re)&&!ie[re],a=y(r,ne)&&!ie[ne];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}if(!a||!o)return i||o&&n&Mt||a&&n&Ot?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var oe=1,ae=2,se=4,ue=8,le=ue,ce=16,fe=32;function pe(t,e){return(e=e||{}).recognizers=p(e.recognizers,pe.defaults.preset),new it(t,e)}X.prototype={defaults:{},set:function(t){return i(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Q(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)||(t=Q(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=Q(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=Q(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=function(e){n.manager.emit(e,t)},n=this,r=this.state;r<ue&&e(n.options.event+Z(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=ue&&e(n.options.event+Z(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=fe},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(fe|oe)))return!1;t++}return!0},recognize:function(t){var e=i({},t);if(!f(this.options.enable,[this,e]))return this.reset(),void(this.state=fe);this.state&(le|ce|fe)&&(this.state=oe),this.state=this.process(e),this.state&(ae|se|ue|ce)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},l(K,X,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(ae|se),i=this.attrTest(t);return r&&(n&St||!i)?e|ce:r||i?n&Et?e|ue:e&ae?e|se:ae:fe}}),l(J,K,{defaults:{event:"pan",threshold:10,pointers:1,direction:Lt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Mt&&e.push(re),t&Ot&&e.push(ne),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Mt?(i=0===o?Pt:o<0?kt:Ct,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?Pt:a<0?Tt:It,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return K.prototype.attrTest.call(this,t)&&(this.state&ae||!(this.state&ae)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Y(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l($,K,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ae)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(tt,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[$t]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Et|St)&&!i)this.reset();else if(t.eventType&xt)this.reset(),this._timer=o((function(){this.state=le,this.tryEmit()}),e.time,this);else if(t.eventType&Et)return le;return fe},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===le&&(t&&t.eventType&Et?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ft(),this.manager.emit(this.options.event,this._input)))}}),l(et,K,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ae)}}),l(nt,K,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Mt|Ot,pointers:1},getTouchAction:function(){return J.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Mt|Ot)?e=t.overallVelocity:n&Mt?e=t.overallVelocityX:n&Ot&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&ct(e)>this.options.velocity&&t.eventType&Et},emit:function(t){var e=Y(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(rt,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[te]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&xt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Et)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||O(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=o((function(){this.state=le,this.tryEmit()}),e.interval,this),ae):le}return fe},failTimeout:function(){return this._timer=o((function(){this.state=fe}),this.options.interval,this),fe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==le&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),pe.VERSION="2.0.7",pe.defaults={domEvents:!1,touchAction:Jt,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[$,{enable:!1},["rotate"]],[nt,{direction:Mt}],[J,{direction:Mt},["swipe"]],[rt],[rt,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};it.prototype={set:function(t){return i(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&le)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(ae|se|ue)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof X)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=v(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var n=this.handlers;return s(A(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==r){var n=this.handlers;return s(A(t),(function(t){e?n[t]&&n[t].splice(v(n[t],e),1):delete n[t]})),this}},emit:function(t,n){this.options.domEvents&&function(t,n){var r=e.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}(t,n);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){n.type=t,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](n),i++}},destroy:function(){this.element&&ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},i(pe,{INPUT_START:xt,INPUT_MOVE:wt,INPUT_END:Et,INPUT_CANCEL:St,STATE_POSSIBLE:oe,STATE_BEGAN:ae,STATE_CHANGED:se,STATE_ENDED:ue,STATE_RECOGNIZED:le,STATE_CANCELLED:ce,STATE_FAILED:fe,DIRECTION_NONE:Pt,DIRECTION_LEFT:kt,DIRECTION_RIGHT:Ct,DIRECTION_UP:Tt,DIRECTION_DOWN:It,DIRECTION_HORIZONTAL:Mt,DIRECTION_VERTICAL:Ot,DIRECTION_ALL:Lt,Manager:it,Input:w,TouchAction:H,TouchInput:B,MouseInput:N,PointerEventInput:F,TouchMouseInput:V,SingleTouchInput:j,Recognizer:X,AttrRecognizer:K,Tap:rt,Pan:J,Swipe:nt,Pinch:$,Rotate:et,Press:tt,on:h,off:d,each:s,merge:ht,extend:pt,assign:i,inherit:l,bindFn:c,prefixed:b}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=pe,"function"==typeof define&&define.amd?define((function(){return pe})):dh?dh=pe:t.Hammer=pe}(window,document);var gh,yh,Ah={mousedown:1,mousemove:2,mouseup:4};gh=r(dh).PointerEventInput,yh=gh.prototype.handler,gh.prototype.handler=function(t){var e=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(e,(function(e){return e.pointerId===t.pointerId}))||e.push(t)),yh.call(this,t)},r(dh).MouseInput.prototype.handler=function(t){var e=Ah[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};var vh=r(dh).Manager,mh=r(dh),_h=(u=a("ijozg"),l=a("pGAoq"),mh?[[mh.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[mh.Rotate,{enable:!1}],[mh.Pinch,{enable:!1}],[mh.Swipe,{enable:!1}],[mh.Pan,{threshold:0,enable:!1}],[mh.Press,{enable:!1}],[mh.Tap,{event:"doubletap",taps:2,enable:!1}],[mh.Tap,{event:"anytap",enable:!1}],[mh.Tap,{enable:!1}]]:null),bh={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},xh={doubletap:["tap"]},wh={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Eh=["keydown","keyup"],Sh=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],Ph=["wheel","mousewheel"],kh={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Ch={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Th="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Ih="undefined"!=typeof window?window:e,Mh=(void 0!==e||window,"undefined"!=typeof document&&document,!1);try{var Oh={get passive(){return Mh=!0,!0}};Ih.addEventListener("test",Oh,Oh),Ih.removeEventListener("test",Oh,Oh)}catch(t){}var Lh=-1!==Th.indexOf("firefox"),Rh=Ph,Dh="wheel",Nh=4.000244140625,Fh=function(){"use strict";function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this;u.default(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.events=Rh.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,i.handleEvent,!!Mh&&{passive:!1})}))}return l.default(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===Dh&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){var e=t.deltaY;Ih.WheelEvent&&(Lh&&t.deltaMode===Ih.WheelEvent.DOM_DELTA_PIXEL&&(e/=Ih.devicePixelRatio),t.deltaMode===Ih.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%Nh==0&&(e=Math.floor(e/Nh)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:Dh,center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),jh=(u=a("ijozg"),l=a("pGAoq"),Sh),zh="pointermove",Bh="pointerover",Uh="pointerout",Vh="pointerleave",Gh=function(){"use strict";function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this;u.default(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},r),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=jh.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,i.handleEvent)}))}return l.default(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===zh&&(this.enableMoveEvent=e),t===Bh&&(this.enableOverEvent=e),t===Uh&&(this.enableOutEvent=e),t===Vh&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){this.handleOverEvent(t),this.handleOutEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)}},{key:"handleOverEvent",value:function(t){this.enableOverEvent&&"mouseover"===t.type&&this.callback({type:Bh,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleOutEvent",value:function(t){this.enableOutEvent&&"mouseout"===t.type&&this.callback({type:Uh,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleLeaveEvent",value:function(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:Vh,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleMoveEvent",value:function(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:zh,srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}(),qh=(u=a("ijozg"),l=a("pGAoq"),Eh),Wh="keydown",Hh="keyup",Xh=function(){"use strict";function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this;u.default(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=qh.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=r.tabIndex||0,e.style.outline="none",this.events.forEach((function(t){return e.addEventListener(t,i.handleEvent)}))}return l.default(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===Wh&&(this.enableDownEvent=e),t===Hh&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:Wh,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:Hh,srcEvent:t,key:t.key,target:t.target}))}}]),t}(),Zh=(u=a("ijozg"),l=a("pGAoq"),"contextmenu"),Yh=function(){"use strict";function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u.default(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return l.default(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(t,e){t===Zh&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){this.options.enable&&this.callback({type:Zh,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),Qh=(u=a("ijozg"),l=a("pGAoq"),{pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4});var Kh={srcElement:"root",priority:0},Jh=function(){"use strict";function t(e){u.default(this,t),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return l.default(t,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this,a=o.handlers,s=o.handlersByElement;n&&("object"!=typeof n||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},Kh,n):Kh;var u=s.get(n.srcElement);u||(u=[],s.set(n.srcElement,u));var l={type:t,handler:e,srcElement:n.srcElement,priority:n.priority};r&&(l.once=!0),i&&(l.passive=!0),a.push(l),this._active=this._active||!l.passive;for(var c=u.length-1;c>=0&&!(u[c].priority>=l.priority);)c--;u.splice(c+1,0,l)}},{key:"remove",value:function(t,e){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);var a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=n.some((function(t){return!t.passive}))}},{key:"handleEvent",value:function(t){if(!this.isEmpty()){for(var e=this._normalizeEvent(t),n=t.srcEvent.target;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")}}},{key:"_emit",value:function(t,e){var n=this.handlersByElement.get(e);if(n){for(var r=!1,i=function(){t.handled=!0},o=function(){t.handled=!0,r=!0},a=[],s=0;s<n.length;s++){var u=n[s],l=u.type,c=u.handler,f=u.once;if(c(Object.assign({},t,{type:l,stopPropagation:i,stopImmediatePropagation:o})),f&&a.push(n[s]),r)break}for(var p=0;p<a.length;p++){var h=a[p],d=h.type,g=h.handler;this.remove(d,g)}}}},{key:"_normalizeEvent",value:function(t){var e=this.eventManager.element;return Object.assign({},t,function(t){var e=Qh[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,u=!1;return 4===e||2===e&&!Number.isFinite(r)?(a=1===o,s=2===o,u=3===o):2===e?(a=Boolean(1&r),s=Boolean(4&r),u=Boolean(2&r)):1===e&&(a=0===i,s=1===i,u=2===i),{leftButton:a,middleButton:s,rightButton:u}}(t),function(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),o=i.width/e.offsetWidth||1,a=i.height/e.offsetHeight||1;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/o,y:(r.y-i.top-e.clientTop)/a}}}(t,e),{handled:!1,rootElement:e})}}]),t}(),$h={events:null,recognizers:null,recognizerOptions:{},Manager:vh,touchAction:"none",tabIndex:0},td=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,t),this.options=Object.assign({},$h,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=n.events;r&&this.on(r)}return l.default(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;for(var i in this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||_h}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(bh).forEach((function(t){var n=e.manager.get(t);n&&bh[t].forEach((function(t){n.recognizeWith(t)}))})),n.recognizerOptions){var o=this.manager.get(i);if(o){var a=n.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new Fh(t,this._onOtherEvent,{enable:!1}),this.moveInput=new Gh(t,this._onOtherEvent,{enable:!1}),this.keyInput=new Xh(t,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Yh(t,this._onOtherEvent,{enable:!1});var s=!0,u=!1,l=void 0;try{for(var f,p=this.events[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=c.default(f.value,2),d=h[0],g=h[1];g.isEmpty()||(this._toggleRecognizer(g.recognizerName,!0),this.manager.on(d,g.handleEvent))}}catch(t){u=!0,l=t}finally{try{s||null==p.return||p.return()}finally{if(u)throw l}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){this._addEventHandler(t,e,n,!1)}},{key:"once",value:function(t,e,n){this._addEventHandler(t,e,n,!0)}},{key:"watch",value:function(t,e,n){this._addEventHandler(t,e,n,!1,!0)}},{key:"off",value:function(t,e){this._removeEventHandler(t,e)}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});var i=xh[t];i&&!this.options.recognizers&&i.forEach((function(i){var o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e,n,r,i){if("string"==typeof t){var o=this.manager,a=this.events,s=Ch[t]||t,u=a.get(s);u||(u=new Jh(this),a.set(s,u),u.recognizerName=kh[s]||s,o&&o.on(s,u.handleEvent)),u.add(t,e,n,r,i),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}else for(var l in n=e,t)this._addEventHandler(l,t[l],n,r,i)}},{key:"_removeEventHandler",value:function(t,e){if("string"==typeof t){var n=this.events,r=Ch[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){var o=i.recognizerName,a=!1,s=!0,u=!1,l=void 0;try{for(var c,f=n.values()[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value;if(p.recognizerName===o&&!p.isEmpty()){a=!0;break}}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}a||this._toggleRecognizer(o,!1)}}else for(var h in t)this._removeEventHandler(h,t[h])}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=wh[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}();function ed(){}var nd={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:ed,onResize:ed,onViewStateChange:ed,onInteractionStateChange:ed,onBeforeRender:ed,onAfterRender:ed,onLoad:ed,onError:function(t,e){return Ca.error(t)()},_onMetrics:null,getCursor:function(t){return t.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},rd=function(){"use strict";function t(e){u.default(this,t),e=yt.default({},nd,e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&Ca.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Mi.default()&&Ca.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new Gt({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Nl.setProps(e._typedArrayManagerProps),this.animationLoop.start()}return l.default(t,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Ca.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Ca.removed("onLayerClick","onClick")(),t.initialViewState&&!Kc(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);var e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||o}},{key:"redraw",value:function(t){if(this.layerManager){var e=t||this.needsRedraw({clearRedrawFlags:!0});e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(t){return this.viewManager.getViewports(t)}},{key:"pickObject",value:function(t){var e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}},{key:"pickMultipleObjects",value:function(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}},{key:"pickObjects",value:function(t){return this._pick("pickObjects","pickObjects Time",t)}},{key:"_addResources",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}},{key:"_removeResources",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.layerManager.resourceManager.remove(a)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"_pick",value:function(t,e,n){var r=this.stats;r.get("Pick Count").incrementCount(),r.get(e).timeStart();var i=this.deckPicker[t](yt.default({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects()},n));return r.get(e).timeEnd(),i}},{key:"_createCanvas",value:function(t){var e=t.canvas;("string"==typeof e&&nf(e=document.getElementById(e)),e)||((e=document.createElement("canvas")).id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(e));return Object.assign(e.style,t.style),e}},{key:"_setCanvasSize",value:function(t){if(this.canvas){var e=t.width,n=t.height;(e||0===e)&&(e=Number.isFinite(e)?"".concat(e,"px"):e,this.canvas.style.width=e),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var t=this.width,e=this.height;this.viewManager.setProps({width:t,height:e}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var t=this.canvas;if(!t)return!1;var e=t.clientWidth||t.width,n=t.clientHeight||t.height;return(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(t){var e=this,n=t.width,r=t.height,i=t.gl,o=t.glOptions,a=t.debug,s=t.onError,u=t.onBeforeRender,l=t.onAfterRender,c=t.useDevicePixels,f=t.autoResizeDrawingBuffer;return new Xi({width:n,height:r,useDevicePixels:c,autoResizeDrawingBuffer:f,autoResizeViewport:!1,gl:i,onCreateContext:function(t){return nn(yt.default({},o,t,{canvas:e.canvas,debug:a,onContextLost:function(){return e._onContextLost()}}))},onInitialize:function(t){return e._setGLContext(t.gl)},onRender:this._onRenderFrame.bind(this),onBeforeRender:u,onAfterRender:l,onError:s})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var t=this.props.views||[new Ff({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}},{key:"_onContextLost",value:function(){var t=this.props.onError;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}},{key:"_onPointerMove",value:function(t){var e=this._pickRequest;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;var n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t,e.mode="hover"}},{key:"_pickAndCallback",value:function(){var t=this._pickRequest;if(t.event){var e=this._pick("pickObject","pickObject Time",t),n=e.result,r=e.emptyInfo;this.interactiveState.isHovering=n.length>0;var i=r,o=!1,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;i=f,o=f.layer.onHover(f,t.event)}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}if(!o&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip){var p=this.props.getTooltip(i);this.tooltip.setTooltip(p,i.x,i.y)}t.event=null}}},{key:"_updateCursor",value:function(){var t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(t){if(!this.layerManager){this.canvas||(this.canvas=t.canvas,rn(t,{enable:!0,copyState:!0})),this.tooltip=new Ip(this.canvas),qe(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);var e=new Pa;for(var n in e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new td(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),Oa)this.eventManager.on(n,this._onEvent);this.viewManager=new Jc({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var r=this.viewManager.getViewports()[0];this.layerManager=new Qc(t,{deck:this,stats:this.stats,viewport:r,timeline:e}),this.effectManager=new Ap,this.deckRenderer=new xp(t),this.deckPicker=new Cp(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(t,e){var n=this.layerManager.context.gl;qe(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers(yt.default({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects()},e)),this.props.onAfterRender({gl:n})}},{key:"_onRenderFrame",value:function(t){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Ca.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(t){var e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState=yt.default({},this.viewState,At.default({},t.viewId,e)),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractionStateChange",value:function(t){this.interactiveState.isDragging=t.isDragging,this.props.onInteractionStateChange(t)}},{key:"_onEvent",value:function(t){var e=Oa[t.type],n=t.offsetCenter;if(e&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),o=i.layer,a=o&&(o[e.handler]||o.props[e.handler]),s=this.props[e.handler],u=!1;a&&(u=a.call(o,i,t)),!u&&s&&s(i,t)}}},{key:"_onPointerDown",value:function(t){var e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo}},{key:"_getFrameStats",value:function(){var t=this.stats;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();var e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var t=this.metrics,e=this.stats;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();var n=fn.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}]),t}();rd.getPropTypes=function(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(Wf)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.oneOfType([t.bool,t.number]),touchAction:t.string,eventRecognizerOptions:t.object,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onInteractionStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,onError:t.func,debug:t.bool,drawPickingColors:t.bool,_framebuffer:t.object,_animate:t.bool,_pickable:t.bool,_typedArrayManagerProps:t.object}},rd.defaultProps=nd,rd.VERSION=hh.VERSION;yt=a("11zLF"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),c=a("1zCSZ"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),c=a("1zCSZ"),At=a("e2Lau"),yt=a("11zLF"),u=a("ijozg"),l=a("pGAoq"),At=a("e2Lau"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF");var id=function(){"use strict";function t(e,n){u.default(this,t),this.opts=n,this.source=e}return l.default(t,[{key:"value",get:function(){return this.source.value}},{key:"getValue",value:function(){var t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];var n=this.source.value,r=e.size,i=n;if(n&&n.length!==r){i=new Float32Array(r);for(var o=e.elementOffset||0,a=0;a<r;++a)i[a]=n[o+a]}return i}},{key:"getAccessor",value:function(){return yt.default({},this.source.getAccessor(),this.opts)}}]),t}();function od(t){return t.stride||t.size*t.bytesPerElement}function ad(t,e){e.offset&&Ca.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var n=od(t),r=("vertexOffset"in e?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return yt.default({},e,{offset:r,stride:n})}var sd=function(){"use strict";function t(e,n){u.default(this,t),this.gl=e,this.id=n.id,this.size=n.size;var r=n.logicalType||n.type,i=5130===r,o=n.defaultValue;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),n.defaultValue=o;var a=r;i?a=5126:!a&&n.isIndexed?a=e&&zr(e,br)?5125:5123:a||(a=5126),n.logicalType=r,n.type=a;var s=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.shaderAttributes={},this.doublePrecision=i,i&&!1===n.fp64&&(s=Float32Array),n.bytesPerElement=s.BYTES_PER_ELEMENT,this.defaultType=s,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null,this.setData(n)}return l.default(t,[{key:"buffer",get:function(){if(!this._buffer){var t=this.settings,e=t.isIndexed,n=t.type;this._buffer=new Fn(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}},{key:"byteOffset",get:function(){var t=this.getAccessor();return t.vertexOffset?t.vertexOffset*od(t):0}},{key:"numInstances",get:function(){return this.state.numInstances},set:function(t){this.state.numInstances=t}},{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),Nl.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(t,e){if(this.doublePrecision){var n={},r=this.value instanceof Float64Array,i=(o=this.getAccessor(),{high:a=ad(o,e||{}),low:yt.default({},a,{offset:a.offset+4*o.size})});return n[t]=new id(this,i.high),n["".concat(t,"64Low")]=r?new id(this,i.low):new Float32Array(this.size),n}var o,a;if(e){var s=ad(this.getAccessor(),e);return At.default({},t,new id(this,s))}return At.default({},t,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"getBounds",value:function(){if(this.state.bounds)return this.state.bounds;var t=null;if(this.state.constant){var e=this.value.slice();t=[e,e]}else{var n=this,r=n.value,i=n.numInstances,o=n.size,a=i*o;if(r&&a&&r.length>=a){for(var s=new Array(o).fill(1/0),u=new Array(o).fill(-1/0),l=0;l<a;)for(var c=0;c<o;c++){var f=r[l++];f<s[c]&&(s[c]=f),f>u[c]&&(u[c]=f)}t=[s,u]}}return this.state.bounds=t,t}},{key:"setData",value:function(t){var e=this.state;ArrayBuffer.isView(t)?t={value:t}:t instanceof Fn&&(t={buffer:t});var n=yt.default({},this.settings,t);if(e.bufferAccessor=n,e.bounds=null,t.constant){var r=t.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),!(!e.constant||!this._areValuesEqual(r,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=r}else if(t.buffer){var i=t.buffer;e.externalBuffer=i,e.constant=!1,this.value=t.value;var o=t.value instanceof Float64Array;n.type=t.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(o?2:1),n.stride=od(n)}else if(t.value){this._checkExternalBuffer(t);var a=t.value;e.externalBuffer=null,e.constant=!1,this.value=a,n.bytesPerElement=a.BYTES_PER_ELEMENT,n.stride=od(n);var s=this.buffer,u=this.byteOffset;this.doublePrecision&&a instanceof Float64Array&&(a=Gc(a,n));var l=a.byteLength+u+2*n.stride;s.byteLength<l&&s.reallocate(l),s.setAccessor(null),s.subData({data:a,offset:u}),n.type=t.type||s.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;var e=this.value,n=t.startOffset,r=void 0===n?0:n,i=t.endOffset;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?Gc(e,{size:this.size,startIndex:r,endIndex:i}):e.subarray(r,i),offset:r*e.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(t){var e=t.numInstances,n=t.copy,r=void 0!==n&&n,i=this.state,o=i.allocatedValue,a=Nl.allocate(o,e+1,{size:this.size,type:this.defaultType,copy:r});this.value=a;var s=this.buffer,u=this.byteOffset;return s.byteLength<a.byteLength+u&&(s.reallocate(a.byteLength+u),r&&o&&s.subData({data:o instanceof Float64Array?Gc(o,this):o,offset:u})),i.allocatedValue=a,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(t){var e=t.value;if(!t.constant&&e){var n=this.defaultType,r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||Ca.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((function(t){return(t+128)/255*2-1}));case 5122:return new Float32Array(t).map((function(t){return(t+32768)/65535*2-1}));case 5121:return new Float32Array(t).map((function(t){return t/255}));case 5123:return new Float32Array(t).map((function(t){return t/65535}));default:return t}}},{key:"_normalizeValue",value:function(t,e,n){var r=this.settings,i=r.defaultValue,o=r.size;if(Number.isFinite(t))return e[n]=t,e;if(!t)return e[n]=i[0],e;switch(o){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:for(var a=o;--a>=0;)e[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return e}},{key:"_areValuesEqual",value:function(t,e){if(!t||!e)return!1;for(var n=this.size,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}]),t}(),ud=[],ld=[];function cd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=ud,i={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?r=t:t.length>0&&(ld.length=t.length,r=ld):r=ud,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function fd(t){return t&&t[Symbol.asyncIterator]}function pd(t,e){var n=e.size,r=e.stride,i=e.offset,o=e.startIndices,a=e.nested,s=t.BYTES_PER_ELEMENT,u=r?r/s:n,l=i?i/s:0,c=Math.floor((t.length-l)/u);return function(e,r){var i=r.index,s=r.target;if(!o){for(var f=i*u+l,p=0;p<n;p++)s[p]=t[f+p];return s}var h,d=o[i],g=o[i+1]||c;if(a){h=new Array(g-d);for(var y=d;y<g;y++){var A=y*u+l;s=new Array(n);for(var v=0;v<n;v++)s[v]=t[A+v];h[y-d]=s}}else if(u===n)h=t.subarray(d*n+l,g*n+l);else{h=new t.constructor((g-d)*n);for(var m=0,_=d;_<g;_++)for(var b=_*u+l,x=0;x<n;x++)h[m++]=t[b+x]}return h}}var hd=[],dd=[[0,1/0]];function gd(t,e){if(t===dd)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;for(var n=[],r=t.length,i=0,o=0;o<r;o++){var a=t[o];a[1]<e[0]?(n.push(a),i=o+1):a[0]>e[1]?n.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return n.splice(i,0,e),n}yt=a("11zLF");function yd(t){var e=t.source,n=t.target,r=t.start,i=void 0===r?0:r,o=t.size,a=t.getData,s=t.end||n.length,u=e.length,l=s-i;if(u>l)n.set(e.subarray(0,l),i);else if(n.set(e,i),a)for(var c=u;c<l;)for(var f=a(c,e),p=0;p<o;p++)n[i+c]=f[p]||0,c++}var Ad={interpolation:{duration:0,easing:function(t){return t}},spring:{stiffness:.05,damping:.5}};function vd(t,e){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",yt.default({},Ad[t.type],e,t)):null}function md(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function _d(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function bd(t){t.push(t.shift())}function xd(t,e){var n=t.doublePrecision,r=t.settings,i=t.value,o=t.size,a=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*a}function wd(t){var e=t.buffer,n=t.numInstances,r=t.attribute,i=t.fromLength,o=t.fromStartIndices,a=t.getData,s=void 0===a?function(t){return t}:a,u=r.doublePrecision&&r.value instanceof Float64Array?2:1,l=r.size*u,c=r.byteOffset,f=r.startIndices,p=o&&f,h=xd(r,n),d=r.state.constant;if(p||!(i>=h)){var g=d?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!d){var y=s;s=function(t,e){return r._normalizeConstant(y(t,e))}}var A=d?function(t,e){return s(g,e)}:function(t,e){return s(g.subarray(t,t+l),e)},v=e.getData({length:i}),m=new Float32Array(h);!function(t){var e=t.source,n=t.target,r=t.size,i=t.getData,o=t.sourceStartIndices,a=t.targetStartIndices;if(!Array.isArray(a))return yd({source:e,target:n,size:r,getData:i}),n;for(var s=0,u=0,l=i&&function(t,e){return i(t+u,e)},c=Math.min(o.length,a.length),f=1;f<c;f++){var p=o[f]*r,h=a[f]*r;yd({source:e.subarray(s,p),target:n,start:u,end:h,size:r,getData:l}),s=p,u=h}u<n.length&&yd({source:[],target:n,start:u,size:r,getData:l})}({source:v,target:m,sourceStartIndices:o,targetStartIndices:f,size:l,getData:A}),e.byteLength<m.byteLength+c&&e.reallocate(m.byteLength+c),e.subData({data:m,offset:c})}}var Ed=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.default(this,n),r=e.call(this,t,i);var o=i.transition,a=void 0!==o&&o,s=i.noAlloc,l=void 0!==s&&s,c=i.update,f=void 0===c?null:c,p=i.accessor,h=void 0===p?null:p,d=i.transform,g=void 0===d?null:d,y=i.startIndices,A=void 0===y?null:y;return Object.assign(r.settings,{transition:a,noAlloc:l,update:f||h&&r._autoUpdater,accessor:h,transform:g}),Object.assign(r.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:dd,startIndices:A}),Object.seal(r.settings),Object.seal(r.state),r._validateAttributeUpdaters(),r}return l.default(n,[{key:"startIndices",get:function(){return this.state.startIndices},set:function(t){this.state.startIndices=t}},{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearChangedFlags,n=void 0!==e&&e,r=this.state.needsRedraw;return this.state.needsRedraw=r&&!n,r}},{key:"getUpdateTriggers",value:function(){var t=this.settings.accessor;return[this.id].concat("function"!=typeof t&&t||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(t){if(!t||!this.supportsTransition())return null;var e=this.settings.accessor,n=this.settings.transition;return vd(Array.isArray(e)?t[e.find((function(e){return t[e]}))]:t[e],n)}},{key:"setNeedsUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){var n=e.startRow,r=void 0===n?0:n,i=e.endRow,o=void 0===i?1/0:i;this.state.updateRanges=gd(this.state.updateRanges,[r,o])}else this.state.updateRanges=dd}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=hd}},{key:"setNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}},{key:"update",value:function(t){this.setData(t)}},{key:"allocate",value:function(t){var e=this.state,r=this.settings;return!r.noAlloc&&(!!r.update&&(dt.default(gt.default(n.prototype),"allocate",this).call(this,{numInstances:t,copy:e.updateRanges!==dd}),!0))}},{key:"updateBuffer",value:function(t){var e=t.numInstances,r=t.data,i=t.props,o=t.context;if(!this.needsUpdate())return!1;var a=this.state.updateRanges,s=this.settings,u=s.update,l=s.noAlloc,f=!0;if(u){var p=!0,h=!1,d=void 0;try{for(var g,y=a[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var A=c.default(g.value,2),v=A[0],m=A[1];u.call(o,this,{data:r,startRow:v,endRow:m,props:i,numInstances:e})}}catch(t){h=!0,d=t}finally{try{p||null==y.return||y.return()}finally{if(h)throw d}}var _=!0,b=!1,x=void 0;if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else try{for(var w,E=a[Symbol.iterator]();!(_=(w=E.next()).done);_=!0){var S=c.default(w.value,2),P=S[0],k=S[1],C=Number.isFinite(P)?this.getVertexOffset(P):0,T=Number.isFinite(k)?this.getVertexOffset(k):l||!Number.isFinite(e)?this.value.length:e*this.size;dt.default(gt.default(n.prototype),"updateSubBuffer",this).call(this,{startOffset:C,endOffset:T})}}catch(t){b=!0,x=t}finally{try{_||null==E.return||E.return()}finally{if(b)throw x}}else;this._checkAttributeArray()}else f=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),f}},{key:"setConstantValue",value:function(t){return void 0!==t&&"function"!=typeof t&&(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(t){var e=this.state;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=n.state,i=n.settings;if(!t)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===t)return this.clearNeedsUpdate(),!0;r.binaryValue=t,this.setNeedsRedraw(),ArrayBuffer.isView(t)&&(t={value:t});var o=i.transform||e!==this.startIndices;if(o){nf(ArrayBuffer.isView(t.value),"invalid ".concat(i.accessor));var a=t.size&&t.size!==this.size;return r.binaryAccessor=pd(t.value,{size:t.size||this.size,stride:t.stride,offset:t.offset,startIndices:e,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}},{key:"getVertexOffset",value:function(t){var e=this.startIndices;return(e?e[t]:t)*this.size}},{key:"getShaderAttributes",value:function(){var t=this.settings.shaderAttributes||At.default({},this.id,null),e={};for(var r in t)Object.assign(e,dt.default(gt.default(n.prototype),"getShaderAttributes",this).call(this,r,t[r]));return e}},{key:"_autoUpdater",value:function(t,e){var n=e.data,r=e.startRow,i=e.endRow,o=e.props,a=e.numInstances;if(!t.constant){var s=t.settings,u=t.state,l=t.value,c=t.size,f=t.startIndices,p=s.accessor,h=s.transform,d=u.binaryAccessor||("function"==typeof p?p:o[p]);nf("function"==typeof d,'accessor "'.concat(p,'" is not a function'));var g=t.getVertexOffset(r),y=cd(n,r,i),A=y.iterable,v=y.objectInfo,m=!0,_=!1,b=void 0;try{for(var x,w=A[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var E=x.value;v.index++;var S=d(E,v);if(h&&(S=h.call(this,S)),f){var P=(v.index<f.length-1?f[v.index+1]:a)-f[v.index];if(S&&Array.isArray(S[0])){var k=g,C=!0,T=!1,I=void 0;try{for(var M,O=S[Symbol.iterator]();!(C=(M=O.next()).done);C=!0){var L=M.value;t._normalizeValue(L,l,k),k+=c}}catch(t){T=!0,I=t}finally{try{C||null==O.return||O.return()}finally{if(T)throw I}}}else S&&S.length>c?l.set(S,g):(t._normalizeValue(S,v.target,0),_s({target:l,source:v.target,start:g,count:P}));g+=P*c}else t._normalizeValue(S,l,g),g+=c}}catch(t){_=!0,b=t}finally{try{m||null==w.return||w.return()}finally{if(_)throw b}}}}},{key:"_validateAttributeUpdaters",value:function(){var t=this.settings;if(!(t.noAlloc||"function"==typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var t=this.value,e=Math.min(4,this.size);if(t&&t.length>=e){var n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}]),n}(sd),Sd=(u=a("ijozg"),l=a("pGAoq"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),function(){"use strict";function t(e){var n=e.gl,r=e.attribute,i=e.timeline;u.default(this,t),this.gl=n,this.type="interpolation",this.transition=new pf(i),this.attribute=r,this.attributeInTransition=new Ed(n,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=function(t,e){var n=_d(e.size);return new ba(t,{vs:Pd,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(n,r);var o={byteLength:0,usage:35050};this.buffers=[new Fn(n,o),new Fn(n,o)]}return l.default(t,[{key:"inProgress",get:function(){return this.transition.inProgress}},{key:"start",value:function(t,e){if(t.duration<=0)this.transition.cancel();else{var n=this,r=(n.gl,n.buffers),i=n.attribute;bd(r);var o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},a=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;wd(yt.default({buffer:f},o))}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}this.currentStartIndices=i.startIndices,this.currentLength=xd(i,e),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:md(0,i)},feedbackBuffers:{vCurrent:r[1]}})}}},{key:"update",value:function(){var t=this.transition.update();if(t){var e=this.transition,n=e.time,r=e.settings,i=r.duration,o=(0,r.easing)(n/i);this.transform.run({uniforms:{time:o}})}return t}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}}]),t}()),Pd="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),At=a("e2Lau");var kd={interpolation:Sd,spring:function(){"use strict";function t(e){var n=e.gl,r=e.attribute,i=e.timeline;u.default(this,t),this.gl=n,this.type="spring",this.transition=new pf(i),this.attribute=r,this.attributeInTransition=new Ed(n,yt.default({},r.settings,{normalized:!1})),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=function(t){return new Zn(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(n),this.framebuffer=function(t,e){return new Gr(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:At.default({},36064,e)})}(n,this.texture),this.transform=function(t,e,n){var r=_d(e.size);return new ba(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(n,r,this.framebuffer);var o={byteLength:0,usage:35050};this.buffers=[new Fn(n,o),new Fn(n,o),new Fn(n,o)]}return l.default(t,[{key:"inProgress",get:function(){return this.transition.inProgress}},{key:"start",value:function(t,e){var n=this,r=(n.gl,n.buffers),i=n.attribute,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},a=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;wd(yt.default({buffer:f},o))}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}this.currentStartIndices=i.startIndices,this.currentLength=xd(i,e),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:md(0,i)}})}},{key:"update",value:function(){var t=this,e=t.buffers,n=t.transform,r=t.framebuffer,i=t.transition;return!!i.update()&&(n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.settings.stiffness,damping:i.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),bd(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),pr(r)[0]>0||i.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}]),t}()},Cd=function(){"use strict";function t(e,n){var r=n.id,i=n.timeline;u.default(this,t),this.id=r,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=ba.isSupported(e)}return l.default(t,[{key:"finalize",value:function(){for(var t in this.transitions)this._removeTransition(t)}},{key:"update",value:function(t){var e=t.attributes,n=t.transitions,r=t.numInstances;for(var i in this.numInstances=r||1,e){var o=e[i],a=o.getTransitionSetting(n);a&&this._updateAttribute(i,o,a)}for(var s in this.transitions){var u=e[s];u&&u.getTransitionSetting(n)||this._removeTransition(s)}}},{key:"hasAttribute",value:function(t){var e=this.transitions[t];return e&&e.inProgress}},{key:"getAttributes",value:function(){var t={};for(var e in this.transitions){var n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}var e=this.needsRedraw;return this.needsRedraw=!1,e}},{key:"_removeTransition",value:function(t){this.transitions[t].cancel(),delete this.transitions[t]}},{key:"_updateAttribute",value:function(t,e,n){var r=this.transitions[t],i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void Ca.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);var o=kd[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(Ca.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}]),t}(),Td="attributeManager.invalidate",Id="attributeManager.updateStart",Md="attributeManager.updateEnd",Od=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=void 0===r?"attribute-manager":r,o=n.stats,a=n.timeline;u.default(this,t),this.id=i,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=o,this.attributeTransitionManager=new Cd(e,{id:"".concat(i,"-transitions"),timeline:a}),Object.seal(this)}return l.default(t,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!0,this}},{key:"add",value:function(t,e){this._add(t,e)}},{key:"addInstanced",value:function(t,e){this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(t,e){var n=this._invalidateTrigger(t,e);As(Td,this,t,n)}},{key:"invalidateAll",value:function(t){for(var e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);As(Td,this,"all")}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.startIndices,i=void 0===r?null:r,o=t.transitions,a=t.props,s=void 0===a?{}:a,u=t.buffers,l=void 0===u?{}:u,c=t.context,f=void 0===c?{}:c,p=!1;for(var h in As(Id,this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var d=this.attributes[h],g=d.settings.accessor;d.startIndices=i,d.numInstances=n,s[h]&&Ca.removed("props.".concat(h),"data.attributes.".concat(h))(),d.setExternalBuffer(l[h])||d.setBinaryValue(l[g],e.startIndices)||!l[g]&&d.setConstantValue(s[g])||d.needsUpdate()&&(p=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:s,context:f})),this.needsRedraw|=d.needsRedraw()}p&&As(Md,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:o})}},{key:"updateTransition",value:function(){var t=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},e=this,n=e.attributes,r=e.attributeTransitionManager,i=yt.default({},r.getAttributes());for(var o in n){var a=n[o];a.needsRedraw(t)&&!r.hasAttribute(o)&&(i[o]=a)}return i}},{key:"getShaderAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());var n={};for(var r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r in e&&Ca.warn("AttributeManager.add({updaters}) - updater map no longer supported")(),t){var i=t[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(t,e,n){var r=yt.default({},e,{id:t,isIndexed:e.isIndexed||e.elements||!1,constant:e.constant||!1,size:(e.elements?1:e.size)||1,value:e.value||null,divisor:e.instanced||n.instanced?1:e.divisor||0});return new Ed(this.gl,r)}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e=function(e){t.attributes[e].getUpdateTriggers().forEach((function(t){n[t]||(n[t]=[]),n[t].push(e)}))},n={};for(var r in this.attributes)e(r);this.updateTriggers=n}},{key:"_invalidateTrigger",value:function(t,e){var n=this.attributes,r=this.updateTriggers[t];return r&&r.forEach((function(t){var r=n[t];r&&r.setNeedsUpdate(r.id,e)})),r}},{key:"_updateAttribute",value:function(t){var e=t.attribute,n=t.numInstances;(As("attribute.updateStart",e),e.constant)?e.setConstantValue(e.value):(e.allocate(n)&&As("attribute.allocate",e,n),e.updateBuffer(t)&&(this.needsRedraw=!0,As("attribute.updateEnd",e,n)))}}]),t}(),Ld=(u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),c=a("1zCSZ"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"value",get:function(){return this._value}},{key:"_onUpdate",value:function(){var t=this.time,e=this.settings,n=e.fromValue,r=e.toValue,i=e.duration,o=(0,e.easing)(t/i);this._value=ql(n,r,o)}}]),n}(pf)),Rd=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),1e-5);function Dd(t,e,n,r,i){var o=e-t;return(n-e)*i+-o*r+o+e}function Nd(t,e){if(Array.isArray(t)){for(var n=0,r=0;r<t.length;r++){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}var Fd=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"value",get:function(){return this._currValue}},{key:"_onUpdate",value:function(){var t=this.settings,e=t.fromValue,n=t.toValue,r=t.damping,i=t.stiffness,o=this._prevValue,a=void 0===o?e:o,s=this._currValue,u=void 0===s?e:s,l=function(t,e,n,r,i){if(Array.isArray(n)){for(var o=[],a=0;a<n.length;a++)o[a]=Dd(t[a],e[a],n[a],r,i);return o}return Dd(t,e,n,r,i)}(a,u,n,r,i),c=Nd(l,n),f=Nd(l,u);c<Rd&&f<Rd&&(l=n,this.end()),this._prevValue=u,this._currValue=l}}]),n}(pf),jd={interpolation:Ld,spring:Fd},zd=function(){"use strict";function t(e){u.default(this,t),this.transitions=new Map,this.timeline=e}return l.default(t,[{key:"active",get:function(){return this.transitions.size>0}},{key:"add",value:function(t,e,n,r){var i=this.transitions;if(i.has(t)){var o=i.get(t),a=o.value;e=void 0===a?o.settings.fromValue:a,this.remove(t)}if(r=vd(r)){var s=jd[r.type];if(s){var u=new s(this.timeline);u.start(yt.default({},r,{fromValue:e,toValue:n})),i.set(t,u)}else Ca.error("unsupported transition type '".concat(r.type,"'"))()}}},{key:"remove",value:function(t){var e=this.transitions;e.has(t)&&(e.get(t).cancel(),e.delete(t))}},{key:"update",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,o=this.transitions[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=c.default(i.value,2),s=a[0],u=a[1];u.update(),t[s]=u.value,u.inProgress||this.remove(s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"clear",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.transitions.keys()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.remove(o)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}]),t}();function Bd(t,e){var n=Vd({newProps:t,oldProps:e,propTypes:Hd(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";var n=null,r=t.dataComparator,i=t._dataDiff;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e),i=!1;return r||(i=function(t,e){if(null===e)return"oldProps is null, initial diff";if("all"in t.updateTriggers){if(Wd(t,e,"all"))return{all:!0}}var n={},r=!1;for(var i in t.updateTriggers)if("all"!==i){Wd(t,e,i)&&(n[i]=!0,r=n)}return r}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:qd(t,e),transitionsChanged:Ud(t,e)}}function Ud(t,e){if(!t.transitions)return null;var n={},r=Hd(t);for(var i in t.transitions){var o=r[i],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&Gd(t[i],e[i],o)&&(n[i]=!0)}return n}function Vd(t){var e=t.newProps,n=t.oldProps,r=t.ignoreProps,i=void 0===r?{}:r,o=t.propTypes,a=void 0===o?{}:o,s=t.triggerName,u=void 0===s?"props":s;if(n===e)return null;if("object"!=typeof e||null===e)return"".concat(u," changed shallowly");if("object"!=typeof n||null===n)return"".concat(u," changed shallowly");var l=!0,c=!1,f=void 0;try{for(var p,h=Object.keys(e)[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var d=p.value;if(!(d in i)){if(!(d in n))return"".concat(u,".").concat(d," added");var g=Gd(e[d],n[d],a[d]);if(g)return"".concat(u,".").concat(d," ").concat(g)}}}catch(t){c=!0,f=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}var y=!0,A=!1,v=void 0;try{for(var m,_=Object.keys(n)[Symbol.iterator]();!(y=(m=_.next()).done);y=!0){var b=m.value;if(!(b in i)){if(!(b in e))return"".concat(u,".").concat(b," dropped");if(!Object.hasOwnProperty.call(e,b)){var x=Gd(e[b],n[b],a[b]);if(x)return"".concat(u,".").concat(b," ").concat(x)}}}}catch(t){A=!0,v=t}finally{try{y||null==_.return||_.return()}finally{if(A)throw v}}return null}function Gd(t,e,n){var r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||!(r=t&&e&&t.equals)||r.call(t,e)?r||e===t?null:"changed shallowly":"changed deeply"}function qd(t,e){if(null===e)return!0;var n=e.extensions,r=t.extensions;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Wd(t,e,n){var r=t.updateTriggers[n];r=null==r?{}:r;var i=e.updateTriggers[n];return Vd({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function Hd(t){var e=t[ps],n=e&&e.constructor;return n?n._propTypes:{}}function Xd(t){if(null===(e=t)||"object"!=typeof e)throw new Error("count(): argument not an object");var e;if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}yt=a("11zLF");function Zd(t,e){if(!e)return t;var n=yt.default({},t,e);if("defines"in e&&(n.defines=yt.default({},t.defines,e.defines)),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((function(t){return"project64"===t.name})))){var r=n.modules.findIndex((function(t){return"project32"===t.name}));r>=0&&n.modules.splice(r,1)}if("inject"in e)if(t.inject){var i=yt.default({},t.inject);for(var o in e.inject)i[o]=(i[o]||"")+e.inject[o];n.inject=i}else n.inject=e.inject;return n}c=a("1zCSZ"),yt=a("11zLF");var Yd=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};!function(){var t=function(){var t=new za(3);return za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();function Qd(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.projectPosition(t);if(n&&e instanceof lf){var i=c.default(t,3),o=i[0],a=i[1],s=i[2],u=void 0===s?0:s,l=e.getDistanceScales([o,a]);r[2]=u*l.unitsPerMeter[2]}return r}function Kd(t,e){var n,r=e.viewport,i=e.modelMatrix,o=e.coordinateSystem,a=e.coordinateOrigin,s=e.offsetMode,u=c.default(t,3),l=u[0],f=u[1],p=u[2],h=void 0===p?0:p;switch(i&&(l=(n=c.default(Va([],[l,f,h,1],i),3))[0],f=n[1],h=n[2]),o){case Ta.LNGLAT:return Qd([l,f,h],r,s);case Ta.LNGLAT_OFFSETS:return Qd([l+a[0],f+a[1],h+(a[2]||0)],r,s);case Ta.METER_OFFSETS:return Qd(H(a,[l,f,h]),r,s);default:return r.isGeospatial?[l+a[0],f+a[1],h+a[2]]:r.projectPosition([l,f,h])}}function Jd(t,e){var n=function(t){var e=yt.default({},t),n=t.coordinateSystem,r=t.viewport,i=t.coordinateOrigin,o=t.fromCoordinateSystem,a=t.fromCoordinateOrigin;return n===Ta.DEFAULT&&(n=r.isGeospatial?Ta.LNGLAT:Ta.CARTESIAN),void 0===o&&(e.fromCoordinateSystem=n),void 0===a&&(e.fromCoordinateOrigin=i),e.coordinateSystem=n,e}(e),r=n.viewport,i=n.coordinateSystem,o=n.coordinateOrigin,a=n.modelMatrix,s=n.fromCoordinateSystem,u=n.fromCoordinateOrigin,l=Ka(r,i,o),c=l.geospatialOrigin,f=l.shaderCoordinateOrigin,p=l.offsetMode,h=Kd(t,{viewport:r,modelMatrix:a,coordinateSystem:s,coordinateOrigin:u,offsetMode:p});if(p){var d=r.projectPosition(c||f);Yd(h,h,d)}return h}u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),yt=a("11zLF"),c=a("1zCSZ"),yt=a("11zLF"),vt=a("5qgrd"),At=a("e2Lau"),yt=a("11zLF");var $d=(Eg={},At.default(Eg,10241,9987),At.default(Eg,10240,9729),At.default(Eg,10242,33071),At.default(Eg,10243,33071),Eg),tg={};var eg={boolean:{validate:function(t,e){return!0},equal:function(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate:function(t,e){return e.optional&&!t||og(t)&&(3===t.length||4===t.length)},equal:function(t,e,n){return ng(t,e)}},accessor:{validate:function(t,e){var n=ag(t);return"function"===n||n===ag(e.value)},equal:function(t,e,n){return"function"==typeof e||ng(t,e)}},array:{validate:function(t,e){return e.optional&&!t||og(t)},equal:function(t,e,n){return n.compare?ng(t,e):t===e}},function:{validate:function(t,e){return e.optional&&!t||"function"==typeof t},equal:function(t,e,n){return!n.compare||t===e}},data:{transform:function(t,e,n){var r=n.props.dataTransform;return r&&t?r(t):t}},image:{transform:function(t,e,n){return function(t,e){var n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof Zn)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});var r=null;e.compressed&&(r=At.default({},10241,e.data.length>1?9985:9729));var i=new Zn(n,yt.default({},e,{parameters:yt.default({},$d,r,t.props.textureParameters)}));return tg[i.id]=!0,i}(n,t)},release:function(t){var e;(e=t)&&e instanceof Zn&&tg[e.id]&&(e.delete(),delete tg[e.id])}}};function ng(t,e){if(t===e)return!0;if(!og(t)||!og(e))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function rg(t,e){switch(ag(e)){case"object":return ig(t,e);case"array":return ig(t,{type:"array",value:e,compare:!1});case"boolean":return ig(t,{type:"boolean",value:e});case"number":return ig(t,{type:"number",value:e});case"function":return ig(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function ig(t,e){return"type"in e?yt.default({name:t},eg[e.type],e):"value"in e?yt.default({name:t,type:ag(e.value)},e):{name:t,type:"object",value:e}}function og(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function ag(t){return og(t)?"array":null===t?"null":void 0===t?"undefined":vt.default(t)}function sg(t,e){var n=ug(t.constructor),r=Object.create(n);r[ps]=t,r[ds]={},r[gs]={};for(var i=0;i<e.length;++i){var o=e[i];for(var a in o)r[a]=o[a]}return Object.freeze(r),r}function ug(t){var e=fg(t,"_mergedDefaultProps");return e||(function(t){if(!t.prototype)return;var e=Object.getPrototypeOf(t),n=ug(e),r=function(t){var e={},n={},r={},i=!0,o=!1,a=void 0;try{for(var s,u=Object.entries(t)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=c.default(s.value,2),f=l[0],p=l[1],h=null==p?void 0:p.deprecatedFor;if(h)r[f]=Array.isArray(h)?h:[h];else{var d=rg(f,p);e[f]=d,n[f]=d.value}}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}(fg(t,"defaultProps")||{}),i=function(t,e,n){var r=Object.create(null);Object.assign(r,e,t);var i=function(t){var e=fg(t,"layerName")||fg(t,"componentName");e||Ca.once(0,"".concat(t.name,".componentName not specified"))();return e||t.name}(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(r.defaultProps,n,t),o=yt.default({},e._propTypes,r.propTypes);!function(t,e){var n={},r={};for(var i in e){var o=e[i],a=o.name,s=o.value;o.async&&(n[a]=s,r[a]=lg(a))}t[hs]=n,t[ds]={},Object.defineProperties(t,r)}(i,o);var a=yt.default({},e._deprecatedProps,r.deprecatedProps);(function(t,e){var n=function(n){Object.defineProperty(t,n,{enumerable:!1,set:function(t){var r="".concat(this.id,": ").concat(n),i=!0,o=!1,a=void 0;try{for(var s,u=e[n][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;cg(this,l)||(this[l]=t)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}Ca.deprecated(r,e[n].join("/"))()}})};for(var r in e)n(r)})(i,a),t._mergedDefaultProps=i,t._propTypes=o,t._deprecatedProps=a}(t),t._mergedDefaultProps)}function lg(t){return{enumerable:!0,set:function(e){"string"==typeof e||e instanceof Promise||fd(e)?this[ds][t]=e:this[gs][t]=e},get:function(){if(this[gs]){if(t in this[gs])return this[gs][t]||this[hs][t];if(t in this[ds]){var e=this[ps]&&this[ps].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[hs][t]}}return this[hs][t]}}}function cg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fg(t,e){return cg(t,e)&&t[e]}u=a("ijozg"),l=a("pGAoq"),Yn=a("cqwPg"),tu=a("3Ka4w"),Qn=a("4Z8U5");var pg=Object.freeze({}),hg=function(){"use strict";function t(e){u.default(this,t),mt(this,"component",void 0),mt(this,"onAsyncPropUpdated",void 0),mt(this,"asyncProps",void 0),mt(this,"oldProps",void 0),mt(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=null,this.oldAsyncProps=null}return l.default(t,[{key:"finalize",value:function(){for(var t in this.asyncProps){var e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}}},{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps||pg}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"hasAsyncProp",value:function(t){return t in this.asyncProps}},{key:"getAsyncProp",value:function(t){var e=this.asyncProps[t];return e&&e.resolvedValue}},{key:"isAsyncPropLoading",value:function(t){if(t){var e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(var n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}},{key:"reloadAsyncProp",value:function(t,e){this._watchPromise(t,Promise.resolve(e))}},{key:"setAsyncProps",value:function(t){var e=t[gs]||{},n=t[ds]||t,r=t[hs]||{};for(var i in e){var o=e[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,o),e[i]=this.getAsyncProp(i)}for(var a in n){var s=n[a];this._createAsyncPropData(a,r[a]),this._updateAsyncProp(a,s)}}},{key:"_fetch",value:function(t,e){return e}},{key:"_onResolve",value:function(t,e){}},{key:"_onError",value:function(t,e){}},{key:"_updateAsyncProp",value:function(t,e){this._didAsyncInputValueChange(t,e)&&("string"==typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):fd(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}},{key:"_freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps&&this.oldProps)for(var t in this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}},{key:"_didAsyncInputValueChange",value:function(t,e){var n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}},{key:"_setPropValue",value:function(t,e){this._freezeAsyncOldProps();var n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}},{key:"_setAsyncPropValue",value:function(t,e,n){var r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}},{key:"_watchPromise",value:function(t,e){var n=this.asyncProps[t];if(n){var r=this;n.pendingLoadCount++;var i=n.pendingLoadCount;e.then((function(e){e=r._postProcessValue(n,e),r._setAsyncPropValue(t,e,i),r._onResolve(t,e)})).catch((function(e){r._onError(t,e)}))}}},{key:"_resolveAsyncIterable",value:function(t,e){var n=this;return Yn.default(r(Qn).mark((function i(){var o,a,s,u,l,c,f,p,h,d,g,y;return r(Qn).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("data"===t){r.next=3;break}return n._setPropValue(t,e),r.abrupt("return");case 3:if(o=n.asyncProps[t]){r.next=6;break}return r.abrupt("return");case 6:o.pendingLoadCount++,a=o.pendingLoadCount,s=[],u=0,l=!1,c=!1,r.prev=11,p=tu.default(e);case 13:return r.next=15,p.next();case 15:if(!(l=!(h=r.sent).done)){r.next=20;break}d=h.value,g=d,y=n.component.props.dataTransform,s=y?y(g,s):s.concat(g),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:u,endRow:s.length}]}),u=s.length,n._setAsyncPropValue(t,s,a);case 17:l=!1,r.next=13;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(11),c=!0,f=r.t0;case 26:if(r.prev=26,r.prev=27,!l||null==p.return){r.next=31;break}return r.next=31,f.return();case 31:if(r.prev=31,!c){r.next=34;break}throw f;case 34:return r.finish(31);case 35:return r.finish(26);case 36:n._onResolve(t,s);case 37:case"end":return r.stop()}}),i,null,[[11,22,26,36],[27,,31,35]])})))()}},{key:"_postProcessValue",value:function(t,e){var n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}},{key:"_createAsyncPropData",value:function(t,e){if(!this.asyncProps[t]){var n=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}]),t}(),dg=0,gg=function(){"use strict";function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];u.default(this,t),mt(this,"id",void 0),mt(this,"props",void 0),mt(this,"count",void 0),mt(this,"lifecycle",void 0),mt(this,"parent",void 0),mt(this,"context",void 0),mt(this,"state",void 0),mt(this,"internalState",void 0),this.props=sg(this,n),this.id=this.props.id,this.count=dg++,this.lifecycle=as,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return l.default(t,[{key:"root",get:function(){for(var t=this;t.parent;)t=t.parent;return t}},{key:"clone",value:function(t){var e=this.props,n={};for(var r in e[hs])r in e[gs]?n[r]=e[gs][r]:r in e[ds]&&(n[r]=e[ds][r]);return new this.constructor(yt.default({},e,n,t))}},{key:"_initState",value:function(){this.internalState=new hg(this)}}]),t}();mt(gg,"componentName","Component"),mt(gg,"defaultProps",{});pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),pn=a("9PFJu"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo");var yg=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r,i=t.attributeManager,o=t.layer;return u.default(this,n),r=e.call(this,o),mt(pn.default(r),"attributeManager",void 0),mt(pn.default(r),"needsRedraw",void 0),mt(pn.default(r),"subLayers",void 0),mt(pn.default(r),"usesPickingColorCache",void 0),r.attributeManager=i,r.needsRedraw=!0,r.subLayers=null,r.usesPickingColorCache=!1,r}return l.default(n,[{key:"layer",get:function(){return this.component},set:function(t){this.component=t}},{key:"_fetch",value:function(t,e){var r=this.component.props.fetch;return r?r(e,{propName:t,layer:this.layer}):dt.default(gt.default(n.prototype),"_fetch",this).call(this,t,e)}},{key:"_onResolve",value:function(t,e){var n=this.component.props.onDataLoad;"data"===t&&n&&n(e,{propName:t,layer:this.layer})}},{key:"_onError",value:function(t,e){this.layer.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}]),n}(hg),Ag=Math.pow(2,24)-1,vg=Object.freeze([]),mg=qa((function(t){var e=t.oldViewport,n=t.viewport;return e.equals(n)})),_g=new Uint8ClampedArray(0),bg={data:{type:"data",value:vg,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:function(t){return t&&t.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(t,e){var n,r=e.propName,i=e.layer,o=e.loaders,a=e.loadOptions,s=e.signal,u=i.context.resourceManager;(a=a||i.getLoadOptions(),o=o||i.props.loaders,s)&&(a=yt.default({},a,{fetch:yt.default({},null===(n=a)||void 0===n?void 0:n.fetch,{signal:s})}));var l=u.contains(t);return l||a||(u.add({resourceId:t,data:Ol(t,o),persistent:!1}),l=!0),l?u.subscribe({resourceId:t,onChange:function(t){return i.internalState.reloadAsyncProp(r,t)},consumerId:i.id,requestId:r}):Ol(t,o,a)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:La,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Ta.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},xg=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"raiseError",value:function(t,e){var n,r,i,o;(e&&(t.message="".concat(e,": ").concat(t.message)),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,t,this))}},{key:"setState",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(t){var e=this.context.viewport,n=Kd(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),r=c.default(J(n,e.pixelProjectionMatrix),3),i=r[0],o=r[1],a=r[2];return 2===t.length?[i,o]:[i,o,a]}},{key:"unproject",value:function(t){return this.context.viewport.unproject(t)}},{key:"projectPosition",value:function(t,e){return Jd(t,yt.default({viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem},e))}},{key:"use64bitPositions",value:function(){var t=this.props.coordinateSystem;return t===Ta.DEFAULT||t===Ta.LNGLAT||t===Ta.CARTESIAN}},{key:"onHover",value:function(t,e){return!!this.props.onHover&&this.props.onHover(t,e)}},{key:"onClick",value:function(t,e){return!!this.props.onClick&&this.props.onClick(t,e)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}},{key:"decodePickingColor",value:function(t){nf(t instanceof Uint8Array);var e=c.default(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.props.extensions[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t=Zd(t,a.getShaders.call(this,a))}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"getBounds",value:function(){var t,e=this.getAttributeManager();if(!e)return null;var n=e.attributes,r=n.positions,i=n.instancePositions;return null===(t=r||i)||void 0===t?void 0:t.getBounds()}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){var e=t.oldProps,n=t.props,r=(t.context,t.changeFlags),i=this.getAttributeManager();if(r.dataChanged&&i){var o=r.dataChanged,a=!0,s=!1,u=void 0;if(Array.isArray(o))try{for(var l,c=o[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;i.invalidateAll(f)}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}else i.invalidateAll()}var p=Number.isInteger(e.highlightedObjectIndex)||e.pickable,h=Number.isInteger(n.highlightedObjectIndex)||n.pickable;if(p!==h&&i){var d=i.attributes,g=d.pickingColors,y=d.instancePickingColors,A=g||y;A&&(h&&A.constant&&(A.constant=!1,i.invalidate(A.id)),A.value||h||(A.constant=!0,A.value=[0,0,0]))}}},{key:"finalizeState",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.getModels()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.delete()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var o=this.getAttributeManager();o&&o.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}},{key:"draw",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.draw(t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function(t){var e=t.info,n=(t.mode,e.index);return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}},{key:"activateViewport",value:function(t){var e=this.internalState.viewport;this.internalState.viewport=t,e&&mg({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}},{key:"updateAttributes",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this._setModelAttributes(a,t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"_updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var n=this.getNumInstances(t),r=this.getStartIndices(t);e.update({data:t.data,numInstances:n,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var t=this.getAttributeManager();t&&t.updateTransition()}},{key:"_updateUniformTransition",value:function(){var t=this.internalState.uniformTransitions;if(t.active){var e=t.update(),n=Object.create(this.props);for(var r in e)Object.defineProperty(n,r,{value:e[r]});return n}return this.props}},{key:"calculateInstancePickingColors",value:function(t,e){var n=e.numInstances;if(!t.constant){var r=Math.floor(_g.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>Ag&&Ca.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),_g=Nl.allocate(_g,n,{size:3,copy:!0,maxCount:Math.max(n,Ag)});for(var i=Math.floor(_g.length/3),o=[],a=r;a<i;a++)this.encodePickingColor(a,o),_g[3*a+0]=o[0],_g[3*a+1]=o[1],_g[3*a+2]=o[2]}t.value=_g.subarray(0,3*n)}}},{key:"_setModelAttributes",value:function(t,e){var n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}},{key:"disablePickingIndex",value:function(t){this._disablePickingIndex(t)}},{key:"_disablePickingIndex",value:function(t){var e=this.getAttributeManager().attributes,n=e.pickingColors,r=e.instancePickingColors,i=n||r,o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}},{key:"restorePickingColors",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,n=t.instancePickingColors,r=e||n;this.internalState.usesPickingColorCache&&r.value.buffer!==_g.buffer&&(r.value=_g.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Xd(t.data)}},{key:"getStartIndices",value:function(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){As("layer.initialize",this),this._initState(),this.initializeState(this.context);var t=!0,e=!1,n=void 0;try{for(var r,i=this.props.extensions[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.initializeState.call(this,this.context,o)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var t=this.needsUpdate();As("layer.update",this,t),t&&this._updateState()}},{key:"_updateState",value:function(){var t=this.props,e=this.context.viewport,n=this._updateUniformTransition();this.internalState.propsInTransition=n,this.context.viewport=this.internalState.viewport||e,this.props=n;try{var r=this._getUpdateParams(),i=this.getModels();if(this.context.gl)this.updateState(r);else try{this.updateState(r)}catch(t){}var o=!0,a=!1,s=void 0;try{for(var u,l=this.props.extensions[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;c.updateState.call(this,r,c)}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}var f=this.getModels()[0]!==i[0];this._updateModules(r,f),this.isComposite?this._renderLayers(r):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=e,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}},{key:"_finalize",value:function(){As("layer.finalize",this),this.finalizeState(this.context);var t=!0,e=!1,n=void 0;try{for(var r,i=this.props.extensions[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.finalizeState.call(this,o)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"drawLayer",value:function(t){var e=t.moduleParameters,n=void 0===e?null:e,r=t.uniforms,i=void 0===r?{}:r,o=t.parameters,a=void 0===o?{}:o;this._updateAttributeTransition();var s=this.props;this.props=this.internalState.propsInTransition||s;var u=this.props.opacity;i.opacity=Math.pow(u,1/2.2);try{var l=this;n&&this.setModuleParameters(n);var c=this.props.getPolygonOffset,f=c&&c(i)||[0,0];qe(this.context.gl,{polygonOffset:f}),He(this.context.gl,a,(function(){var t={moduleParameters:n,uniforms:i,parameters:a,context:l.context},e=!0,r=!1,o=void 0;try{for(var s,u=l.props.extensions[Symbol.iterator]();!(e=(s=u.next()).done);e=!0){var c=s.value;c.draw.call(l,t,c)}}catch(t){r=!0,o=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw o}}l.draw(t)}))}finally{this.props=s}}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this.internalState.changeFlags;for(var n in t)if(t[n]){var r=!1;"dataChanged"===n&&Array.isArray(e[n])&&(e[n]=Array.isArray(t[n])?e[n].concat(t[n]):t[n],r=!0),e[n]||(e[n]=t[n],r=!0),r&&As("layer.changeFlag",this,n,t)}var i=e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged;e.propsOrDataChanged=i,e.somethingChanged=i||t.viewportChanged||t.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(t,e){var n=Bd(t,e);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(var i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,e[i],t[i],t.transitions[i]);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(t){var e=Hd(t);for(var n in e){var r=e[n],i=r.validate;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}},{key:"setModuleParameters",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.updateModuleSettings(t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"updateAutoHighlight",value:function(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}},{key:"_updateAutoHighlight",value:function(t){var e={pickingSelectedColor:t.picked?t.color:null},n=this.props.highlightColor;t.picked&&"function"==typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}},{key:"_updateModules",value:function(t,e){var n=t.props,r=t.oldProps,i=n.autoHighlight,o=n.highlightedObjectIndex,a=n.highlightColor;if(e||r.autoHighlight!==i||r.highlightedObjectIndex!==o||r.highlightColor!==a){var s={};i||(s.pickingSelectedColor=null),Array.isArray(a)&&(s.pickingHighlightColor=a),Number.isInteger(o)&&(s.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(s)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(t);return e=e||r}},{key:"_getAttributeManager",value:function(){return new Od(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){nf(!this.internalState&&!this.state),nf(isFinite(this.props.coordinateSystem));var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new yg({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return Ca.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t}}),this.internalState.layer=this,this.internalState.uniformTransitions=new zd(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(t){As("layer.matched",this,this===t);var e=t.state,n=t.internalState;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}]),n}(gg);xg.layerName="Layer",xg.defaultProps=bg;pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF");var wg=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return dt.default(gt.default(n.prototype),"isLoaded",this)&&this.getSubLayers().every((function(t){return t.isLoaded}))}},{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(t){dt.default(gt.default(n.prototype),"setState",this).call(this,t),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(t){var e=t.info,n=e.object;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(e.object=n.__source.object,e.index=n.__source.index,e):e}},{key:"renderLayers",value:function(){return null}},{key:"filterSubLayer",value:function(t){return!0}},{key:"shouldRenderSubLayer",value:function(t,e){return e&&e.length}},{key:"getSubLayerClass",value:function(t,e){var n=this.props._subLayerProps;return n&&n[t]&&n[t].type||e}},{key:"getSubLayerRow",value:function(t,e,n){return t.__source={parent:this,object:e,index:n},t}},{key:"getSubLayerAccessor",value:function(t){if("function"==typeof t){var e={data:this.props.data,target:[]};return function(n,r){return n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}}return t}},{key:"getSubLayerProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,n=e.opacity,r=e.pickable,i=e.visible,o=e.parameters,a=e.getPolygonOffset,s=e.highlightedObjectIndex,u=e.autoHighlight,l=e.highlightColor,c=e.coordinateSystem,f=e.coordinateOrigin,p=e.wrapLongitude,h=e.positionFormat,d=e.modelMatrix,g=e.extensions,y=e.fetch,A=e.operation,v=e._subLayerProps,m={opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:u,highlightColor:l,coordinateSystem:c,coordinateOrigin:f,wrapLongitude:p,positionFormat:h,modelMatrix:d,extensions:g,fetch:y,operation:A},_=v&&v[t.id],b=_&&_.updateTriggers,x=t.id||"sublayer";if(_){var w=this.constructor._propTypes,E=t.type?t.type._propTypes:{};for(var S in _){var P=E[S]||w[S];P&&"accessor"===P.type&&(_[S]=this.getSubLayerAccessor(_[S]))}}Object.assign(m,t,_),m.id="".concat(this.props.id,"-").concat(x),m.updateTriggers=yt.default({all:this.props.updateTriggers.all},t.updateTriggers,b);var k=!0,C=!1,T=void 0;try{for(var I,M=g[Symbol.iterator]();!(k=(I=M.next()).done);k=!0){var O=I.value,L=O.getSubLayerProps.call(this,O);L&&Object.assign(m,L,{updateTriggers:Object.assign(m.updateTriggers,L.updateTriggers)})}}catch(t){C=!0,T=t}finally{try{k||null==M.return||M.return()}finally{if(C)throw T}}return m}},{key:"_updateAutoHighlight",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.getSubLayers()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.updateAutoHighlight(t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var t=this.internalState.subLayers,e=!t||this.needsUpdate();e&&(t=vs(t=this.renderLayers(),Boolean),this.internalState.subLayers=t),As("compositeLayer.renderLayers",this,e,t);var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.parent=this}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}}]),n}(xg);wg.layerName="CompositeLayer";pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),u=a("ijozg"),l=a("pGAoq");var Eg,Sg=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.default(this,t);var n=e.attributes,r=void 0===n?{}:n;this.typedArrayManager=Nl,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.opts=e,this.updateGeometry(e),Object.seal(this)}return l.default(t,[{key:"updateGeometry",value:function(t){Object.assign(this.opts,t);var e=this.opts,n=e.data,r=e.buffers,i=void 0===r?{}:r,o=e.getGeometry,a=e.geometryBuffer,s=e.positionFormat,u=e.dataChanged,l=e.normalize,c=void 0===l||l;this.data=n,this.getGeometry=o,this.positionSize=a&&a.size||("XY"===s?2:3),this.buffers=i,this.normalize=c,a&&(nf(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(a),c||(i.positions=a)),this.geometryBuffer=i.positions;var f=!0,p=!1,h=void 0;if(Array.isArray(u))try{for(var d,g=u[Symbol.iterator]();!(f=(d=g.next()).done);f=!0){var y=d.value;this._rebuildGeometry(y)}}catch(t){p=!0,h=t}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(t){var e=t.startRow,n=t.endRow;this._rebuildGeometry({startRow:e,endRow:n})}},{key:"normalizeGeometry",value:function(t){return t}},{key:"updateGeometryAttributes",value:function(t,e,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(t){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function(t){var e=t.value||t;return nf(ArrayBuffer.isView(e)),pd(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function(t,e){var n=this,r=n.attributes,i=n.buffers,o=n._attributeDefs,a=n.typedArrayManager;for(var s in o)if(s in i)a.release(r[s]),r[s]=null;else{var u=o[s];u.copy=e,r[s]=a.allocate(r[s],t,u)}}},{key:"_forEachGeometry",value:function(t,e,n){var r=this.data,i=this.getGeometry,o=cd(r,e,n),a=o.iterable,s=o.objectInfo,u=!0,l=!1,c=void 0;try{for(var f,p=a[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;s.index++,t(i(h,s),s.index)}}catch(t){l=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}}},{key:"_rebuildGeometry",value:function(t){var e=this;if(this.data&&this.getGeometry){var n=this,r=n.indexStarts,i=n.vertexStarts,o=n.instanceCount,a=this.data,s=this.geometryBuffer,u=t||{},l=u.startRow,c=void 0===l?0:l,f=u.endRow,p=void 0===f?1/0:f,h={};if(t||(r=[0],i=[0]),this.normalize||!s){var d=this;this._forEachGeometry((function(t,e){t=d.normalizeGeometry(t),h[e]=t,i[e+1]=i[e]+d.getGeometrySize(t)}),c,p),o=i[i.length-1]}else if(s.buffer instanceof Fn){var g=s.stride||4*this.positionSize;i=a.startIndices,o=i[a.length]||s.buffer.byteLength/g}else{var y=s.value||s,A=s.stride/y.BYTES_PER_ELEMENT||this.positionSize;i=a.startIndices,o=i[a.length]||y.length/A}this._allocate(o,Boolean(t)),this.indexStarts=r,this.vertexStarts=i,this.instanceCount=o;var v={};this._forEachGeometry((function(t,n){t=h[n]||t,v.vertexStart=i[n],v.indexStart=r[n];var a=n<i.length-1?i[n+1]:o;v.geometrySize=a-i[n],v.geometryIndex=n,e.updateGeometryAttributes(t,v)}),c,p),this.vertexCount=r[r.length-1]}}}]),t}(),Pg=(At=a("e2Lau"),yt=a("11zLF"),u=a("ijozg"),l=a("pGAoq"),function(){}),kg=(Eg={},At.default(Eg,10241,9987),At.default(Eg,10240,9729),At.default(Eg,10242,33071),At.default(Eg,10243,33071),Eg);function Cg(t){return t&&(t.id||t.url)}function Tg(t,e,n,r){var i=e.width,o=e.height,a=Wr(e,{width:n,height:r});return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sourceX,i=void 0===r?0:r,o=n.sourceY,a=void 0===o?0:o,s=n.targetMipmaplevel,u=void 0===s?0:s,l=n.targetInternalFormat,c=void 0===l?6408:l,f=n.targetX,p=n.targetY,h=n.targetZ,d=n.width,g=n.height,y=dr(t),A=y.framebuffer,v=y.deleteFramebuffer;hn(A);var m=A.gl,_=A.handle,b=void 0!==f||void 0!==p||void 0!==h;f=f||0,p=p||0,h=h||0;var x=m.bindFramebuffer(36160,_);hn(e);var w=null;if(e instanceof Wn&&(w=e,d=Number.isFinite(d)?d:w.width,g=Number.isFinite(g)?g:w.height,w.bind(0),e=w.target),b)switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,u,f,p,i,a,d,g);break;case 35866:case 32879:Qt(m).copyTexSubImage3D(e,u,f,p,h,i,a,d,g)}else m.copyTexImage2D(e,u,c,i,a,d,g,0);w&&w.unbind(),m.bindFramebuffer(36160,x||null),v&&A.delete()}(e,a,{targetY:0,width:i,height:o}),e.delete(),a}function Ig(t,e,n){for(var r=0;r<e.length;r++){var i=e[r],o=i.icon,a=i.xOffset;t[Cg(o)]=yt.default({},o,{x:a,y:n})}}var Mg=function(){"use strict";function t(e,n){var r=n.onUpdate,i=void 0===r?Pg:r,o=n.onError,a=void 0===o?Pg:o;u.default(this,t),this.gl=e,this.onUpdate=i,this.onError=a,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}return l.default(t,[{key:"finalize",value:function(){var t;null===(t=this._texture)||void 0===t||t.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(t){var e=this._autoPacking?Cg(t):t;return this._mapping[e]||{}}},{key:"setProps",value:function(t){var e=t.loadOptions,n=t.autoPacking,r=t.iconAtlas,i=t.iconMapping,o=t.data,a=t.getIcon;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),a&&(this._getIcon=a),i&&(this._mapping=i),r&&this._updateIconAtlas(r),this._autoPacking&&(o||a)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(o))}},{key:"isLoaded",get:function(){return 0===this._pendingCount}},{key:"_updateIconAtlas",value:function(t){var e;null===(e=this._texture)||void 0===e||e.delete(),this._texture=null,this._externalTexture=t,this.onUpdate()}},{key:"_updateAutoPacking",value:function(t){var e=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};var r={},i=cd(t),o=i.iterable,a=i.objectInfo,s=!0,u=!1,l=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value;a.index++;var h=e(p,a),d=Cg(h);if(!h)throw new Error("Icon is missing.");if(!h.url)throw new Error("Icon url is missing.");r[d]||n[d]&&h.url===n[d].url||(r[d]=yt.default({},h,{source:p,sourceIndex:a.index}))}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return r}(t,this._getIcon,this._mapping)||{});if(e.length>0){var n=function(t){for(var e,n=t.icons,r=t.buffer,i=t.mapping,o=void 0===i?{}:i,a=t.xOffset,s=void 0===a?0:a,u=t.yOffset,l=void 0===u?0:u,c=t.rowHeight,f=void 0===c?0:c,p=t.canvasWidth,h=[],d=0;d<n.length;d++){var g=n[d];if(!o[Cg(g)]){var y=g.height,A=g.width;s+A+r>p&&(Ig(o,h,l),s=0,l=f+l+r,f=0,h=[]),h.push({icon:g,xOffset:s}),s=s+A+r,f=Math.max(f,y)}}return h.length>0&&Ig(o,h,l),{mapping:o,rowHeight:f,xOffset:s,yOffset:l,canvasWidth:p,canvasHeight:(e=f+l+r,Math.pow(2,Math.ceil(Math.log2(e))))}}({icons:e,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),r=n.mapping,i=n.xOffset,o=n.yOffset,a=n.rowHeight,s=n.canvasHeight;this._rowHeight=a,this._mapping=r,this._xOffset=i,this._yOffset=o,this._canvasHeight=s,this._texture||(this._texture=new Zn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:kg})),this._texture.height!==this._canvasHeight&&(this._texture=Tg(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(e)}}},{key:"_loadIcons",value:function(t){var e=this._canvas.getContext("2d"),n=!0,r=!1,i=void 0;try{for(var o,a=this,s=function(t,n){var r=n.value,i=a;a._pendingCount++,Ol(r.url,lh,a._loadOptions).then((function(t){var n=Cg(r),o=i._mapping[n],a=o.x,s=o.y,u=o.width,l=o.height,c=function(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}(e,t,u,l);i._texture.setSubImageData({data:c,x:a,y:s,width:u,height:l}),i._texture.generateMipmap(),i.onUpdate()})).catch((function(t){i.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:i._loadOptions,error:t})})).finally((function(){i._pendingCount--}))},u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)s(0,o)}catch(t){r=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}}}]),t}(),Og=[0,0,0,255],Lg={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(t){return t.position}},getIcon:{type:"accessor",value:function(t){return t.icon}},getColor:{type:"accessor",value:Og},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}},Rg=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"getShaders",value:function(){return dt.default(gt.default(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[es,ns]})}},{key:"initializeState",value:function(){this.state={iconManager:new Mg(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Og},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(t){var e=t.oldProps,r=t.props,i=t.changeFlags;dt.default(gt.default(n.prototype),"updateState",this).call(this,{props:r,oldProps:e,changeFlags:i});var o=this.getAttributeManager(),a=r.iconAtlas,s=r.iconMapping,u=r.data,l=r.getIcon,c=this.state.iconManager;c.setProps({loadOptions:r.loadOptions});var f=!1;if(a||this.internalState.isAsyncPropLoading("iconAtlas")?(e.iconAtlas!==r.iconAtlas&&c.setProps({iconAtlas:a,autoPacking:!1}),e.iconMapping!==r.iconMapping&&(c.setProps({iconMapping:s}),f=!0)):c.setProps({autoPacking:!0}),(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&c.setProps({data:u,getIcon:l}),f&&(o.invalidate("instanceOffsets"),o.invalidate("instanceIconFrames"),o.invalidate("instanceColorModes")),i.extensionsChanged){var p,h=this.context.gl;null===(p=this.state.model)||void 0===p||p.delete(),this.state.model=this._getModel(h),o.invalidateAll()}}},{key:"isLoaded",get:function(){return dt.default(gt.default(n.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}},{key:"finalizeState",value:function(){dt.default(gt.default(n.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.sizeScale,i=n.sizeMinPixels,o=n.sizeMaxPixels,a=n.sizeUnits,s=n.billboard,u=n.alphaCutoff,l=this.state.iconManager.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:Ma[a],sizeScale:r,sizeMinPixels:i,sizeMaxPixels:o,billboard:s,alphaCutoff:u}).draw()}},{key:"_getModel",value:function(t){return new fa(t,yt.default({},this.getShaders(),{id:this.props.id,geometry:new wa({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"_onError",value:function(t){var e=this.getCurrentLayer().props.onIconError;e?e(t):Ca.error(t.error)()}},{key:"getInstanceOffset",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.width/2-e.anchorX||0,e.height/2-e.anchorY||0]}},{key:"getInstanceColorMode",value:function(t){return this.state.iconManager.getIconMapping(t).mask?1:0}},{key:"getInstanceIconFrame",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.x||0,e.y||0,e.width||0,e.height||0]}}]),n}(xg);Rg.layerName="IconLayer",Rg.defaultProps=Lg;pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF");var Dg={getSourcePosition:{type:"accessor",value:function(t){return t.sourcePosition}},getTargetPosition:{type:"accessor",value:function(t){return t.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},Ng=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"getShaders",value:function(){return dt.default(gt.default(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float useShortestPath;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvec3 splitLine(vec3 a, vec3 b, float x) {\n  float t = (x - a.x) / (b.x - a.x);\n  return vec3(x, mix(a.yz, b.yz, t));\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;\n  vec3 source_world_64low = instanceSourcePositions64Low;\n  vec3 target_world_64low = instanceTargetPositions64Low;\n\n  if (useShortestPath > 0.5 || useShortestPath < -0.5) {\n    source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n    target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n    float deltaLng = target_world.x - source_world.x;\n\n    if (deltaLng * useShortestPath > 180.) {\n      source_world.x += 360. * useShortestPath;\n      source_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      source_world_64low = vec3(0.0);\n    } else if (deltaLng * useShortestPath < -180.) {\n      target_world.x += 360. * useShortestPath;\n      target_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      target_world_64low = vec3(0.0);\n    } else if (useShortestPath < 0.) {\n      gl_Position = vec4(0.);\n      return;\n    }\n  }\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[es,ns]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(dt.default(gt.default(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var o,a=this.context.gl;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.widthUnits,i=n.widthScale,o=n.widthMinPixels,a=n.widthMaxPixels,s=n.wrapLongitude;this.state.model.setUniforms(e).setUniforms({widthUnits:Ma[r],widthScale:i,widthMinPixels:o,widthMaxPixels:a,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}},{key:"_getModel",value:function(t){return new fa(t,yt.default({},this.getShaders(),{id:this.props.id,geometry:new wa({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0}))}}]),n}(xg);Ng.layerName="LineLayer",Ng.defaultProps=Dg;pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF");var Fg=[0,0,0,255],jg={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:function(t){return t.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Fg},getLineColor:{type:"accessor",value:Fg},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},zg=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"getShaders",value:function(){return dt.default(gt.default(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  }\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[es,ns]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(dt.default(gt.default(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var o,a=this.context.gl;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.radiusUnits,i=n.radiusScale,o=n.radiusMinPixels,a=n.radiusMaxPixels,s=n.stroked,u=n.filled,l=n.billboard,c=n.antialiasing,f=n.lineWidthUnits,p=n.lineWidthScale,h=n.lineWidthMinPixels,d=n.lineWidthMaxPixels;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:u,billboard:l,antialiasing:c,radiusUnits:Ma[r],radiusScale:i,radiusMinPixels:o,radiusMaxPixels:a,lineWidthUnits:Ma[f],lineWidthScale:p,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}},{key:"_getModel",value:function(t){return new fa(t,yt.default({},this.getShaders(),{id:this.props.id,geometry:new wa({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0}))}}]),n}(xg);zg.layerName="ScatterplotLayer",zg.defaultProps=jg;pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),u=a("ijozg"),l=a("pGAoq");var Bg=1,Ug=-1;function Vg(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Gg(t,n);return r!==e&&(Wg(t,n),!0)}function Gg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(qg(t,e))}function qg(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.start,r=void 0===n?0:n,i=e.end,o=void 0===i?t.length:i,a=e.size||2,s=0,u=r,l=o-a;u<o;u+=a)s+=(t[u]-t[l])*(t[u+1]+t[l+1]),l=u;return s/2}function Wg(t,e){for(var n=e.start,r=void 0===n?0:n,i=e.end,o=void 0===i?t.length:i,a=e.size,s=void 0===a?2:a,u=(o-r)/s,l=Math.floor(u/2),c=0;c<l;++c)for(var f=r+c*s,p=r+(u-1-c)*s,h=0;h<s;++h){var d=t[f+h];t[f+h]=t[p+h],t[p+h]=d}}function Hg(t,e,n,r){n=n||2;var i,o,a,s,u,l,c,f=e&&e.length,p=f?e[0]*n:t.length,h=Xg(t,0,p,n,!0,r&&r[0]),d=[];if(!h||h.next===h.prev)return d;if(f&&(h=function(t,e,n,r,i){var o,a,s,u=[];for(o=0,a=e.length;o<a;o++)(s=Xg(t,e[o]*r,o<a-1?e[o+1]*r:t.length,r,!1,i&&i[o+1]))===s.next&&(s.steiner=!0),u.push(iy(s));for(u.sort(ty),o=0;o<u.length;o++)ey(u[o],n),n=Zg(n,n.next);return n}(t,e,h,n,r)),t.length>80*n){s=o=t[0],u=a=t[1];for(var g=n;g<p;g+=n)(l=t[g])<s&&(s=l),(c=t[g+1])<u&&(u=c),l>o&&(o=l),c>a&&(a=c);i=0!==(i=Math.max(o-s,a-u))?1/i:0}return Yg(h,d,n,s,u,i),d}function Xg(t,e,n,r,i,o){var a,s;if(void 0===o&&(o=qg(t,{start:e,end:n,size:r})),i===o<0)for(a=e;a<n;a+=r)s=dy(a,t[a],t[a+1],s);else for(a=n-r;a>=e;a-=r)s=dy(a,t[a],t[a+1],s);return s&&uy(s,s.next)&&(gy(s),s=s.next),s}function Zg(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!uy(r,r.next)&&0!==sy(r.prev,r,r.next))r=r.next;else{if(gy(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Yg(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=ry(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(i=t,t=null,u=null,r=0;i;){for(r++,a=i,o=0,n=0;n<l&&(o++,a=a.nextZ);n++);for(s=l;o>0||s>0&&a;)0!==o&&(0===s||!a||i.z<=a.z)?(e=i,i=i.nextZ,o--):(e=a,a=a.nextZ,s--),u?u.nextZ=e:t=e,e.prevZ=u,u=e;i=a}u.nextZ=null,l*=2}while(r>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Kg(t,r,i,o):Qg(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),gy(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Yg(t=Jg(Zg(t),e,n),e,n,r,i,o,2):2===a&&$g(t,e,n,r,i,o):Yg(Zg(t),e,n,r,i,o,1);break}}}function Qg(t){var e=t.prev,n=t,r=t.next;if(sy(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(oy(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&sy(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Kg(t,e,n,r){var i=t.prev,o=t,a=t.next;if(sy(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=ry(s,u,e,n,r),p=ry(l,c,e,n,r),h=t.prevZ,d=t.nextZ;h&&h.z>=f&&d&&d.z<=p;){if(h!==t.prev&&h!==t.next&&oy(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&sy(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&oy(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&sy(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&oy(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&sy(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&oy(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&sy(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Jg(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!uy(i,o)&&ly(i,r,r.next,o)&&py(i,o)&&py(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),gy(r),gy(r.next),r=t=o),r=r.next}while(r!==t);return Zg(r)}function $g(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&ay(a,s)){var u=hy(a,s);return a=Zg(a,a.next),u=Zg(u,u.next),Yg(a,e,n,r,i,o),void Yg(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function ty(t,e){return t.x-e.x}function ey(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&oy(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),py(r,t)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&ny(n,r)))&&(n=r,p=u)),r=r.next}while(r!==l);return n}(t,e),e){var n=hy(e,t);Zg(e,e.next),Zg(n,n.next)}}function ny(t,e){return sy(t.prev,t,e.prev)<0&&sy(e.next,t,t.next)<0}function ry(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function iy(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function oy(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ay(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ly(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(py(t,e)&&py(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(sy(t.prev,t,e.prev)||sy(t,e.prev,e))||uy(t,e)&&sy(t.prev,t,t.next)>0&&sy(e.prev,e,e.next)>0)}function sy(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function uy(t,e){return t.x===e.x&&t.y===e.y}function ly(t,e,n,r){var i=fy(sy(t,e,n)),o=fy(sy(t,e,r)),a=fy(sy(n,r,t)),s=fy(sy(n,r,e));return i!==o&&a!==s||(!(0!==i||!cy(t,n,e))||(!(0!==o||!cy(t,r,e))||(!(0!==a||!cy(n,t,r))||!(0!==s||!cy(n,e,r)))))}function cy(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function fy(t){return t>0?1:t<0?-1:0}function py(t,e){return sy(t.prev,t,t.next)<0?sy(t,e,t.next)>=0&&sy(t,t.prev,e)>=0:sy(t,e,t.prev)<0||sy(t,t.next,e)<0}function hy(t,e){var n=new yy(t.i,t.x,t.y),r=new yy(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function dy(t,e,n,r){var i=new yy(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gy(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function yy(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ay(t,e){var n=e.length,r=t.length;if(r>0){for(var i=!0,o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(var a=0;a<n;a++)t[r+a]=e[a];return!0}function vy(t,e){for(var n=e.length,r=0;r<n;r++)t[r]=e[r]}function my(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=r+e*n,a=0;a<n;a++)i[a]=t[o+a];return i}function _y(t,e,n,r){var i,o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(4&n)i=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(2&n)i=(r[2]-t[0])/(e[0]-t[0]),o=2;else{if(!(1&n))return null;i=(r[0]-t[0])/(e[0]-t[0]),o=0}for(var s=0;s<t.length;s++)a[s]=(1&o)===s?r[o]:i*(e[s]-t[s])+t[s];return a}function by(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function xy(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.size,o=void 0===i?2:i,a=r.broken,s=void 0!==a&&a,u=r.gridResolution,l=void 0===u?10:u,c=r.gridOffset,f=void 0===c?[0,0]:c,p=r.startIndex,h=void 0===p?0:p,d=r.endIndex,g=void 0===d?t.length:d,y=(g-h)/o,A=[],v=[A],m=my(t,0,o,h),_=Py(m,l,f,[]),b=[];Ay(A,m);for(var x=1;x<y;x++){for(n=by(e=my(t,x,o,h,e),_);n;){_y(m,e,n,_,b);var w=by(b,_);w&&(_y(m,b,w,_,b),n=w),Ay(A,b),vy(m,b),ky(_,l,n),s&&A.length>o&&(A=[],v.push(A),Ay(A,m)),n=by(e,_)}Ay(A,e),vy(m,e)}return s?v:v[0]}function wy(t,e){for(var n=0;n<e.length;n++)t.push(e[n]);return t}function Ey(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return[];for(var r=n.size,i=void 0===r?2:r,o=n.gridResolution,a=void 0===o?10:o,s=n.gridOffset,u=void 0===s?[0,0]:s,l=n.edgeTypes,c=void 0!==l&&l,f=[],p=[{pos:t,types:c&&new Array(t.length/i).fill(1),holes:e||[]}],h=[[],[]],d=[];p.length;){var g=p.shift(),y=g.pos,A=g.types,v=g.holes;Cy(y,i,v[0]||y.length,h),d=Py(h[0],a,u,d);var m=by(h[1],d);if(m){var _=Sy(y,A,i,0,v[0]||y.length,d,m),b={pos:_[0].pos,types:_[0].types,holes:[]},x={pos:_[1].pos,types:_[1].types,holes:[]};p.push(b,x);for(var w=0;w<v.length;w++)(_=Sy(y,A,i,v[w],v[w+1]||y.length,d,m))[0]&&(b.holes.push(b.pos.length),b.pos=wy(b.pos,_[0].pos),c&&(b.types=wy(b.types,_[0].types))),_[1]&&(x.holes.push(x.pos.length),x.pos=wy(x.pos,_[1].pos),c&&(x.types=wy(x.types,_[1].types)))}else{var E={positions:y};c&&(E.edgeTypes=A),v.length&&(E.holeIndices=v),f.push(E)}}return f}function Sy(t,e,n,r,i,o,a){for(var s,u,l,c=(i-r)/n,f=[],p=[],h=[],d=[],g=[],y=my(t,c-1,n,r),A=Math.sign(8&a?y[1]-o[3]:y[0]-o[2]),v=e&&e[c-1],m=0,_=0,b=0;b<c;b++)s=my(t,b,n,r,s),u=Math.sign(8&a?s[1]-o[3]:s[0]-o[2]),l=e&&e[r/n+b],u&&A&&A!==u&&(_y(y,s,a,o,g),Ay(f,g)&&h.push(v),Ay(p,g)&&d.push(v)),u<=0?(Ay(f,s)&&h.push(l),m-=u):h.length&&(h[h.length-1]=0),u>=0?(Ay(p,s)&&d.push(l),_+=u):d.length&&(d[d.length-1]=0),vy(y,s),A=u,v=l;return[m?{pos:f,types:e&&h}:null,_?{pos:p,types:e&&d}:null]}function Py(t,e,n,r){var i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}function ky(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function Cy(t,e,n,r){for(var i=1/0,o=-1/0,a=1/0,s=-1/0,u=0;u<n;u+=e){var l=t[u],c=t[u+1];i=l<i?l:i,o=l>o?l:o,a=c<a?c:a,s=c>s?c:s}return r[0][0]=i,r[0][1]=a,r[1][0]=o,r[1][1]=s,r}var Ty=85.051129;function Iy(t,e,n,r){for(var i=-1,o=-1,a=n+1;a<r;a+=e){var s=Math.abs(t[a]);s>i&&(i=s,o=a-1)}return o}function My(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ty,o=t[n],a=t[r-e];if(Math.abs(o-a)>180){var s=my(t,0,e,n);s[0]+=360*Math.round((a-o)/360),Ay(t,s),s[1]=Math.sign(s[1])*i,Ay(t,s),s[0]=o,Ay(t,s)}}function Oy(t,e,n,r){for(var i,o=t[0],a=n;a<r;a+=e){var s=(i=t[a])-o;(s>180||s<-180)&&(i-=360*Math.round(s/360)),t[a]=o=i}}function Ly(t,e){for(var n,r=t.length/e,i=0;i<r&&((n=t[i*e])+180)%360==0;i++);var o=360*-Math.round(n/360);if(0!==o)for(var a=0;a<r;a++)t[a*e]+=o}function Ry(t,e,n,r){var i=t;if(Array.isArray(t[0])){var o=t.length*e;i=new Array(o);for(var a=0;a<t.length;a++)for(var s=0;s<e;s++)i[a*e+s]=t[a][s]||0}return n?xy(i,{size:e,gridResolution:n}):r?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.size,r=void 0===n?2:n,i=e.startIndex,o=void 0===i?0:i,a=e.endIndex,s=void 0===a?t.length:a,u=e.normalize,l=void 0===u||u,c=t.slice(o,s);Oy(c,r,0,s-o);var f=xy(c,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]}),p=!0,h=!1,d=void 0;if(l)try{for(var g,y=f[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){Ly(g.value,r)}}catch(t){h=!0,d=t}finally{try{p||null==y.return||y.return()}finally{if(h)throw d}}return f}(i,{size:e}):i}var Dy=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){return u.default(this,n),e.call(this,yt.default({},t,{attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}}))}return l.default(n,[{key:"getGeometryFromBuffer",value:function(t){return this.normalize?dt.default(gt.default(n.prototype),"getGeometryFromBuffer",this).call(this,t):function(){return null}}},{key:"normalizeGeometry",value:function(t){return this.normalize?Ry(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}},{key:"get",value:function(t){return this.attributes[t]}},{key:"getGeometrySize",value:function(t){if(Array.isArray(t[0])){var e=0,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e+=this.getGeometrySize(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}var u=this.getPathLength(t);return u<2?0:this.isClosed(t)?u<3?0:u+2:u}},{key:"updateGeometryAttributes",value:function(t,e){if(0!==e.geometrySize){var n=!0,r=!1,i=void 0;if(t&&Array.isArray(t[0]))try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=this.getGeometrySize(s);e.geometrySize=u,this.updateGeometryAttributes(s,e),e.vertexStart+=u}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}}},{key:"_updateSegmentTypes",value:function(t,e){var n=this.attributes.segmentTypes,r=this.isClosed(t),i=e.vertexStart,o=e.geometrySize;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}},{key:"_updatePositions",value:function(t,e){var n=this.attributes.positions;if(n)for(var r=e.vertexStart,i=e.geometrySize,o=new Array(3),a=r,s=0;s<i;a++,s++)this.getPointOnPath(t,s,o),n[3*a]=o[0],n[3*a+1]=o[1],n[3*a+2]=o[2]}},{key:"getPathLength",value:function(t){return t.length/this.positionSize}},{key:"getPointOnPath",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.positionSize;e*r>=t.length&&(e+=1-t.length/r);var i=e*r;return n[0]=t[i],n[1]=t[i+1],n[2]=3===r&&t[i+2]||0,n}},{key:"isClosed",value:function(t){if(!this.normalize)return this.opts.loop;var e=this.positionSize,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}]),n}(Sg),Ny=[0,0,0,255],Fy={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(t){return t.path}},getColor:{type:"accessor",value:Ny},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},jy={enter:function(t,e){return e.length?e.subarray(e.length-t.length):t}},zy=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"getShaders",value:function(){return dt.default(gt.default(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[es,ns]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){var t=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:jy,accessor:"getPath",update:this.calculatePositions,noAlloc:true,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:true},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:jy,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:jy,defaultValue:Ny},instancePickingColors:{size:3,type:5121,accessor:function(e,n){var r=n.index,i=n.target;return t.encodePickingColor(e&&e.__source?e.__source.index:r,i)}}}),this.setState({pathTesselator:new Dy({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&Ca.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=t.oldProps,r=t.props,i=t.changeFlags;dt.default(gt.default(n.prototype),"updateState",this).call(this,{props:r,oldProps:e,changeFlags:i});var o=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var a=this.state.pathTesselator,s=r.data.attributes||{};a.updateGeometry({data:r.data,geometryBuffer:s.getPath,buffers:s,normalize:!r._pathType,loop:"loop"===r._pathType,getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),i.dataChanged||o.invalidateAll()}if(i.extensionsChanged){var u,l=this.context.gl;null===(u=this.state.model)||void 0===u||u.delete(),this.state.model=this._getModel(l),o.invalidateAll()}}},{key:"getPickingInfo",value:function(t){var e=dt.default(gt.default(n.prototype),"getPickingInfo",this).call(this,t),r=e.index,i=this.props.data;return i[0]&&i[0].__source&&(e.object=i.find((function(t){return t.__source.index===r}))),e}},{key:"disablePickingIndex",value:function(t){var e=this.props.data;if(e[0]&&e[0].__source)for(var n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.jointRounded,i=n.capRounded,o=n.billboard,a=n.miterLimit,s=n.widthUnits,u=n.widthScale,l=n.widthMinPixels,c=n.widthMaxPixels;this.state.model.setUniforms(e).setUniforms({jointType:Number(r),capType:Number(i),billboard:o,widthUnits:Ma[s],widthScale:u,miterLimit:a,widthMinPixels:l,widthMaxPixels:c}).draw()}},{key:"_getModel",value:function(t){return new fa(t,yt.default({},this.getShaders(),{id:this.props.id,geometry:new wa({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(t){var e=this.state.pathTesselator;t.startIndices=e.vertexStarts,t.value=e.get("positions")}},{key:"calculateSegmentTypes",value:function(t){var e=this.state.pathTesselator;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}]),n}(xg);zy.layerName="PathLayer",zy.defaultProps=Fy;pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),yt=a("11zLF"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),c=a("1zCSZ");var By={};function Uy(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,f=c?e[0]*n:t.length,p=Vy(t,0,f,n,!0),h=[];if(!p||p.next===p.prev)return h;if(c&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Vy(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push($y(a));for(s.sort(Yy),i=0;i<s.length;i++)n=Gy(n=Qy(s[i],n),n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return qy(p,h,n,r,i,l),h}function Vy(t,e,n,r,i){var o,a;if(i===pA(t,e,n,r)>0)for(o=e;o<n;o+=r)a=lA(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=lA(o,t[o],t[o+1],a);return a&&rA(a,a.next)&&(cA(a),a=a.next),a}function Gy(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!rA(r,r.next)&&0!==nA(r.prev,r,r.next))r=r.next;else{if(cA(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function qy(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Jy(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Hy(t,r,i,o):Wy(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),cA(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?qy(t=Xy(Gy(t),e,n),e,n,r,i,o,2):2===a&&Zy(t,e,n,r,i,o):qy(Gy(t),e,n,r,i,o,1);break}}}function Wy(t){var e=t.prev,n=t,r=t.next;if(nA(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(tA(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&nA(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Hy(t,e,n,r){var i=t.prev,o=t,a=t.next;if(nA(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=Jy(s,u,e,n,r),p=Jy(l,c,e,n,r),h=t.prevZ,d=t.nextZ;h&&h.z>=f&&d&&d.z<=p;){if(h!==t.prev&&h!==t.next&&tA(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&nA(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&tA(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&nA(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&tA(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&nA(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&tA(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&nA(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Xy(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!rA(i,o)&&iA(i,r,r.next,o)&&sA(i,o)&&sA(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),cA(r),cA(r.next),r=t=o),r=r.next}while(r!==t);return Gy(r)}function Zy(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&eA(a,s)){var u=uA(a,s);return a=Gy(a,a.next),u=Gy(u,u.next),qy(a,e,n,r,i,o),void qy(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Yy(t,e){return t.x-e.x}function Qy(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&tA(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),sA(r,t)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&Ky(n,r)))&&(n=r,p=u)),r=r.next}while(r!==l);return n}(t,e);if(!n)return e;var r=uA(n,t),i=Gy(n,n.next);return Gy(r,r.next),e===n?i:e}function Ky(t,e){return nA(t.prev,t,e.prev)<0&&nA(e.next,t,t.next)<0}function Jy(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function $y(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function tA(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function eA(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&iA(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(sA(t,e)&&sA(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(nA(t.prev,t,e.prev)||nA(t,e.prev,e))||rA(t,e)&&nA(t.prev,t,t.next)>0&&nA(e.prev,e,e.next)>0)}function nA(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function rA(t,e){return t.x===e.x&&t.y===e.y}function iA(t,e,n,r){var i=aA(nA(t,e,n)),o=aA(nA(t,e,r)),a=aA(nA(n,r,t)),s=aA(nA(n,r,e));return i!==o&&a!==s||(!(0!==i||!oA(t,n,e))||(!(0!==o||!oA(t,r,e))||(!(0!==a||!oA(n,t,r))||!(0!==s||!oA(n,e,r)))))}function oA(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function aA(t){return t>0?1:t<0?-1:0}function sA(t,e){return nA(t.prev,t,t.next)<0?nA(t,e,t.next)>=0&&nA(t,t.prev,e)>=0:nA(t,e,t.prev)<0||nA(t,t.next,e)<0}function uA(t,e){var n=new fA(t.i,t.x,t.y),r=new fA(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function lA(t,e,n,r){var i=new fA(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function cA(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function fA(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pA(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(By=Uy).default=Uy,Uy.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(pA(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(pA(t,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,h=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[p]-t[d])*(t[h+1]-t[p+1])-(t[p]-t[h])*(t[d+1]-t[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},Uy.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var hA=Bg,dA=Ug,gA={isClosed:!0};function yA(t,e,n,r){for(var i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function AA(t,e,n,r,i){for(var o=e,a=n.length,s=0;s<a;s++)for(var u=0;u<r;u++)t[o++]=n[s][u]||0;if(!function(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(var l=0;l<r;l++)t[o++]=n[0][l]||0;return gA.start=e,gA.end=o,gA.size=r,Vg(t,i,gA),o}function vA(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=(o=o||n.length)-i;if(s<=0)return e;for(var u=e,l=0;l<s;l++)t[u++]=n[i+l];if(!yA(n,r,i,o))for(var c=0;c<r;c++)t[u++]=n[i+c];return gA.start=e,gA.end=u,gA.size=r,Vg(t,a,gA),u}function mA(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);var n=[],r=[];if(t.positions){var i=t.positions,o=t.holeIndices;if(o){for(var a=0,s=0;s<=o.length;s++)a=vA(n,a,i,e,o[s-1],o[s],0===s?hA:dA),r.push(a);return r.pop(),{positions:n,holeIndices:r}}t=i}if(Number.isFinite(t[0]))return vA(n,0,t,e,0,n.length,hA),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){var u=0,l=!0,f=!1,p=void 0;try{for(var h,d=t.entries()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var g=c.default(h.value,2),y=g[0];u=AA(n,u,g[1],e,0===y?hA:dA),r.push(u)}}catch(t){f=!0,p=t}finally{try{l||null==d.return||d.return()}finally{if(f)throw p}}return r.pop(),{positions:n,holeIndices:r}}return AA(n,0,t,e,hA),n}var _A=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){u.default(this,n);var r=t.fp64,i=t.IndexType,o=void 0===i?Uint32Array:i;return e.call(this,yt.default({},t,{attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:o,size:1}}}))}return l.default(n,[{key:"get",value:function(t){var e=this.attributes;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}},{key:"updateGeometry",value:function(t){dt.default(gt.default(n.prototype),"updateGeometry",this).call(this,t);var e=this.buffers.indices;e&&(this.vertexCount=(e.value||e).length)}},{key:"normalizeGeometry",value:function(t){if(this.normalize){if(t=mA(t,this.positionSize),this.opts.resolution)return Ey(t.positions||t,t.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,i=void 0===r?2:r,o=n.normalize,a=void 0===o||o,s=n.edgeTypes,u=void 0!==s&&s;e=e||[];for(var l=[],c=[],f=0,p=0,h=0;h<=e.length;h++){for(var d=e[h]||t.length,g=p,y=Iy(t,i,f,d),A=y;A<d;A++)l[p++]=t[A];for(var v=f;v<y;v++)l[p++]=t[v];Oy(l,i,g,p),My(l,i,g,p,n.maxLatitude),f=d,c[h]=p}c.pop();var m=Ey(l,c,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:u}),_=!0,b=!1,x=void 0;if(a)try{for(var w,E=m[Symbol.iterator]();!(_=(w=E.next()).done);_=!0){Ly(w.value.positions,i)}}catch(t){b=!0,x=t}finally{try{_||null==E.return||E.return()}finally{if(b)throw x}}return m}(t.positions||t,t.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return t}},{key:"getGeometrySize",value:function(t){if(Array.isArray(t)&&!Number.isFinite(t[0])){var e=0,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e+=this.getGeometrySize(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}return(t.positions||t).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function(t){return this.normalize||!this.buffers.indices?dt.default(gt.default(n.prototype),"getGeometryFromBuffer",this).call(this,t):function(){return null}}},{key:"updateGeometryAttributes",value:function(t,e){var n=!0,r=!1,i=void 0;if(Array.isArray(t)&&!Number.isFinite(t[0]))try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=this.getGeometrySize(s);e.geometrySize=u,this.updateGeometryAttributes(s,e),e.vertexStart+=u,e.indexStart=this.indexStarts[e.geometryIndex+1]}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}},{key:"_updateIndices",value:function(t,e){var n=e.geometryIndex,i=e.vertexStart,o=e.indexStart,a=this,s=a.attributes,u=a.indexStarts,l=a.typedArrayManager,c=s.indices;if(c){var f=o,p=function(t,e,n){var i=null;t.holeIndices&&(i=t.holeIndices.map((function(t){return t/e})));var o=t.positions||t;if(n){var a=o.length;o=o.slice();for(var s=[],u=0;u<a;u+=e){s[0]=o[u],s[1]=o[u+1];var l=n(s);o[u]=l[0],o[u+1]=l[1]}}return r(By)(o,i,e)}(t,this.positionSize,this.opts.preproject);c=l.allocate(c,o+p.length,{copy:!0});for(var h=0;h<p.length;h++)c[f++]=p[h]+i;u[n+1]=o+p.length,s.indices=c}}},{key:"_updatePositions",value:function(t,e){var n=e.vertexStart,r=e.geometrySize,i=this.attributes.positions,o=this.positionSize;if(i)for(var a=t.positions||t,s=n,u=0;u<r;s++,u++){var l=a[u*o],c=a[u*o+1],f=o>2?a[u*o+2]:0;i[3*s]=l,i[3*s+1]=c,i[3*s+2]=f}}},{key:"_updateVertexValid",value:function(t,e){var n=e.vertexStart,r=e.geometrySize,i=this.attributes.vertexValid,o=this.positionSize,a=t&&t.holeIndices;if(t&&t.edgeTypes?i.set(t.edgeTypes,n):i.fill(1,n,n+r),a)for(var s=0;s<a.length;s++)i[n+a[s]/o-1]=0;i[n+r-1]=0}}]),n}(Sg),bA="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",xA="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(bA,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),wA="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(bA,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),EA=[0,0,0,255],SA={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(t){return t.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:EA},getLineColor:{type:"accessor",value:EA},material:!0},PA={enter:function(t,e){return e.length?e.subarray(e.length-t.length):t}},kA=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"getShaders",value:function(t){return dt.default(gt.default(n.prototype),"getShaders",this).call(this,{vs:"top"===t?xA:wA,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[es,na,ns]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){var t=this,e=this.context,n=e.gl,r=e.viewport,i=this.props.coordinateSystem;r.isGeospatial&&i===Ta.DEFAULT&&(i=Ta.LNGLAT),this.setState({numInstances:0,polygonTesselator:new _A({preproject:i===Ta.LNGLAT&&r.projectFlat,fp64:this.use64bitPositions(),IndexType:!n||Br(n,br)?Uint32Array:Uint16Array})});var o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:PA,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:PA,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:PA,accessor:"getFillColor",defaultValue:EA,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:PA,accessor:"getLineColor",defaultValue:EA,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(e,n){var r=n.index,i=n.target;return t.encodePickingColor(e&&e.__source?e.__source.index:r,i)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"getPickingInfo",value:function(t){var e=dt.default(gt.default(n.prototype),"getPickingInfo",this).call(this,t),r=e.index,i=this.props.data;return i[0]&&i[0].__source&&(e.object=i.find((function(t){return t.__source.index===r}))),e}},{key:"disablePickingIndex",value:function(t){var e=this.props.data;if(e[0]&&e[0].__source)for(var n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.extruded,i=n.filled,o=n.wireframe,a=n.elevationScale,s=this.state,u=s.topModel,l=s.sideModel,c=s.polygonTesselator,f=yt.default({},e,{extruded:Boolean(r),elevationScale:a});l&&(l.setInstanceCount(c.instanceCount-1),l.setUniforms(f),o&&(l.setDrawMode(3),l.setUniforms({isWireframe:!0}).draw()),i&&(l.setDrawMode(6),l.setUniforms({isWireframe:!1}).draw())),u&&(u.setVertexCount(c.vertexCount),u.setUniforms(f).draw())}},{key:"updateState",value:function(t){dt.default(gt.default(n.prototype),"updateState",this).call(this,t),this.updateGeometry(t);var e,r=t.props,i=t.oldProps,o=t.changeFlags,a=this.getAttributeManager();(o.extensionsChanged||r.filled!==i.filled||r.extruded!==i.extruded)&&(null===(e=this.state.models)||void 0===e||e.forEach((function(t){return t.delete()})),this.setState(this._getModels(this.context.gl)),a.invalidateAll())}},{key:"updateGeometry",value:function(t){var e=t.props,n=(t.oldProps,t.changeFlags);if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var r=this.state.polygonTesselator,i=e.data.attributes||{};r.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:r.instanceCount,startIndices:r.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(t){var e,n,r=this.props,i=r.id,o=r.filled,a=r.extruded;if(o){var s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,e=new fa(t,yt.default({},s,{id:"".concat(i,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return a&&((n=new fa(t,yt.default({},this.getShaders("side"),{id:"".concat(i,"-side"),geometry:new wa({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[n,e].filter(Boolean),topModel:e,sideModel:n}}},{key:"calculateIndices",value:function(t){var e=this.state.polygonTesselator;t.startIndices=e.indexStarts,t.value=e.get("indices")}},{key:"calculatePositions",value:function(t){var e=this.state.polygonTesselator;t.startIndices=e.vertexStarts,t.value=e.get("positions")}},{key:"calculateVertexValid",value:function(t){t.value=this.state.polygonTesselator.get("vertexValid")}}]),n}(xg);function CA(t){for(var e=t.data,n=t.getIndex,r=t.dataRange,i=t.replace,o=r.startRow,a=void 0===o?0:o,s=r.endRow,u=void 0===s?1/0:s,l=e.length,c=l,f=l,p=0;p<l;p++){var h=n(e[p]);if(c>p&&h>=a&&(c=p),h>=u){f=p;break}}for(var d=c,g=f-c!==i.length,y=g&&e.slice(f),A=0;A<i.length;A++)e[d++]=i[A];if(g){for(var v=0;v<y.length;v++)e[d++]=y[v];e.length=d}return{startRow:c,endRow:c+i.length}}kA.layerName="SolidPolygonLayer",kA.defaultProps=SA;var TA=[0,0,0,255],IA={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(t){return t.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:TA},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},MA=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&Ca.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){t.oldProps,t.props;var e=t.changeFlags,n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){var r=this,i=this.state.paths.slice(),o=e.dataChanged.map((function(t){return CA({data:i,getIndex:function(t){return t.__source.index},dataRange:t,replace:r._getPaths(t)})}));this.setState({paths:i,pathsDiff:o})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,n=e.data,r=e.getPolygon,i=e.positionFormat,o=e._normalize,a=[],s="XY"===i?2:3,u=t.startRow,l=t.endRow,c=cd(n,u,l),f=c.iterable,p=c.objectInfo,h=!0,d=!1,g=void 0;try{for(var y,A=f[Symbol.iterator]();!(h=(y=A.next()).done);h=!0){var v=y.value;p.index++;var m=r(v,p);o&&(m=mA(m,s));var _=m.holeIndices,b=m.positions||m;if(_)for(var x=0;x<=_.length;x++){var w=b.slice(_[x-1]||0,_[x]||b.length);a.push(this.getSubLayerRow({path:w},v,p.index))}else a.push(this.getSubLayerRow({path:b},v,p.index))}}catch(t){d=!0,g=t}finally{try{h||null==A.return||A.return()}finally{if(d)throw g}}return a}},{key:"renderLayers",value:function(){var t=this.props,e=t.data,n=t._dataDiff,r=t.stroked,i=t.filled,o=t.extruded,a=t.wireframe,s=t._normalize,u=t._windingOrder,l=t.elevationScale,c=t.transitions,f=t.positionFormat,p=this.props,h=p.lineWidthUnits,d=p.lineWidthScale,g=p.lineWidthMinPixels,y=p.lineWidthMaxPixels,A=p.lineJointRounded,v=p.lineMiterLimit,m=p.lineDashJustified,_=this.props,b=_.getFillColor,x=_.getLineColor,w=_.getLineWidth,E=_.getLineDashArray,S=_.getElevation,P=_.getPolygon,k=_.updateTriggers,C=_.material,T=this.state,I=T.paths,M=T.pathsDiff,O=this.getSubLayerClass("fill",kA),L=this.getSubLayerClass("stroke",zy),R=this.shouldRenderSubLayer("fill",I)&&new O({_dataDiff:n,extruded:o,elevationScale:l,filled:i,wireframe:a,_normalize:s,_windingOrder:u,getElevation:S,getFillColor:b,getLineColor:o&&a?x:TA,material:C,transitions:c},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:k.getPolygon,getElevation:k.getElevation,getFillColor:k.getFillColor,lineColors:o&&a,getLineColor:k.getLineColor}}),{data:e,positionFormat:f,getPolygon:P});return[!o&&R,!o&&r&&this.shouldRenderSubLayer("stroke",I)&&new L({_dataDiff:M&&function(){return M},widthUnits:h,widthScale:d,widthMinPixels:g,widthMaxPixels:y,jointRounded:A,miterLimit:v,dashJustified:m,_pathType:"loop",transitions:c&&{getWidth:c.getLineWidth,getColor:c.getLineColor,getPath:c.getPolygon},getColor:this.getSubLayerAccessor(x),getWidth:this.getSubLayerAccessor(w),getDashArray:this.getSubLayerAccessor(E)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:k.getLineWidth,getColor:k.getLineColor,getDashArray:k.getLineDashArray}}),{data:I,positionFormat:f,getPath:function(t){return t.path}}),o&&R]}}]),n}(wg);MA.layerName="PolygonLayer",MA.defaultProps=IA;yt=a("11zLF"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo");var OA=a("en48w");yt=a("11zLF");function LA(t,e){if(!t)return null;var n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return-1!==n?function(t,e,n){var r={properties:yt.default({},t.properties[e])};for(var i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}(t,r,n):null}pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),c=a("1zCSZ"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF"),dt=a("fj4bz"),gt=a("8YVeo");var RA=[],DA=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"getShaders",value:function(){return yt.default({},dt.default(gt.default(n.prototype),"getShaders",this).call(this),{fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}},{key:"initializeState",value:function(){var t=this;dt.default(gt.default(n.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:function(e,n){var r=n.index,i=n.target;return t.encodePickingColor(r,i)}}})}},{key:"updateState",value:function(t){dt.default(gt.default(n.prototype),"updateState",this).call(this,t);var e=t.props,r=t.oldProps,i=e.outlineColor;i!==r.outlineColor&&((i=i.map((function(t){return t/255})))[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!e.sdf&&e.outlineWidth&&Ca.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}},{key:"draw",value:function(t){var e=this.props,r=e.sdf,i=e.smoothing,o=e.outlineWidth,a=this.state.outlineColor;t.uniforms=yt.default({},t.uniforms,{buffer:.75,outlineBuffer:o?Math.max(i,.75*(1-o)):-1,gamma:i,sdf:Boolean(r),outlineColor:a}),dt.default(gt.default(n.prototype),"draw",this).call(this,t)}},{key:"getInstanceOffset",value:function(t){var e=this;return t?Array.from(t).map((function(t){return dt.default(gt.default(n.prototype),"getInstanceOffset",e).call(e,t)})):RA}},{key:"getInstanceColorMode",value:function(t){return 1}},{key:"getInstanceIconFrame",value:function(t){var e=this;return t?Array.from(t).map((function(t){return dt.default(gt.default(n.prototype),"getInstanceIconFrame",e).call(e,t)})):RA}}]),n}(Rg);DA.layerName="MultiIconLayer",DA.defaultProps={getIconOffsets:{type:"accessor",value:function(t){return t.offsets}},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};u=a("ijozg"),l=a("pGAoq"),yt=a("11zLF");var NA={};(NA=jA).default=jA;var FA=1e20;function jA(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function zA(t,e,n,r,i,o){for(var a=0;a<e;a++)BA(t,a,e,n,r,i,o);for(var s=0;s<n;s++)BA(t,s*e,1,e,r,i,o)}function BA(t,e,n,r,i,o,a){var s,u,l,c;for(o[0]=0,a[0]=-1e20,a[1]=FA,s=0;s<r;s++)i[s]=t[e+s*n];for(s=1,u=0,l=0;s<r;s++){do{c=o[u],l=(i[s]-i[c]+s*s-c*c)/(s-c)/2}while(l<=a[u]&&--u>-1);o[++u]=s,a[u]=l,a[u+1]=FA}for(s=0,u=0;s<r;s++){for(;a[u+1]<s;)u++;c=o[u],t[e+s*n]=i[c]+(s-c)*(s-c)}}jA.prototype._draw=function(t,e){var n,r,i,o,a,s,u,l,c,f=this.ctx.measureText(t),p=f.width,h=2*this.buffer;e&&this.useMetrics?(a=Math.floor(f.actualBoundingBoxAscent),l=this.buffer+Math.ceil(f.actualBoundingBoxAscent),s=this.buffer,u=this.buffer,n=(r=Math.min(this.size,Math.ceil(f.actualBoundingBoxRight-f.actualBoundingBoxLeft)))+h,i=(o=Math.min(this.size-s,Math.ceil(f.actualBoundingBoxAscent+f.actualBoundingBoxDescent)))+h,this.ctx.textBaseline="alphabetic"):(n=r=this.size,i=o=this.size,a=19*this.fontSize/24,s=u=0,l=this.middle,this.ctx.textBaseline="middle"),r&&o&&(this.ctx.clearRect(u,s,r,o),this.ctx.fillText(t,this.buffer,l),c=this.ctx.getImageData(u,s,r,o));var d=new Uint8ClampedArray(n*i);return function(t,e,n,r,i,o,a){o.fill(FA,0,e*n),a.fill(0,0,e*n);for(var s=(e-r)/2,u=0;u<i;u++)for(var l=0;l<r;l++){var c=(u+s)*e+l+s,f=t.data[4*(u*r+l)+3]/255;if(1===f)o[c]=0,a[c]=FA;else if(0===f)o[c]=FA,a[c]=0;else{var p=Math.max(0,.5-f),h=Math.max(0,f-.5);o[c]=p*p,a[c]=h*h}}}(c,n,i,r,o,this.gridOuter,this.gridInner),zA(this.gridOuter,n,i,this.f,this.v,this.z),zA(this.gridInner,n,i,this.f,this.v,this.z),function(t,e,n,r,i,o,a){for(var s=0;s<e*n;s++){var u=Math.sqrt(r[s])-Math.sqrt(i[s]);t[s]=Math.round(255-255*(u/o+a))}}(d,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:d,metrics:{width:r,height:o,sdfWidth:n,sdfHeight:i,top:a,left:0,advance:p}}},jA.prototype.draw=function(t){return this._draw(t,!1).data},jA.prototype.drawWithMetrics=function(t){return this._draw(t,!0)};var UA=[];function VA(t,e,n,r){for(var i=0,o=e;o<n;o++){var a=t[o],s=null,u=r&&r[a];u&&(s=u.width),i+=s}return i}function GA(t,e,n,r,i,o){for(var a=e,s=0,u=e;u<n;u++){var l=VA(t,u,u+1,i);s+l>r&&(a<u&&o.push(u),a=u,s=0),s+=l}return s}function qA(t,e,n,r,i,o){for(var a=e,s=e,u=e,l=0,c=e;c<n;c++)if(" "===t[c]?u=c+1:" "!==t[c+1]&&c+1!==n||(u=c+1),u>s){var f=VA(t,s,u,i);l+f>r&&(a<s&&(o.push(s),a=s,l=0),f>r&&(f=GA(t,s,u,r,i,o),a=o[o.length-1])),s=u,l+=f}return l}function WA(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=t.length);var a=[];return"break-all"===e?GA(t,i,o,n,r,a):qA(t,i,o,n,r,a),a}function HA(t,e,n,r,i,o){for(var a=0,s=0,u=e;u<n;u++){var l=t[u],c=r[l];c?(s||(s=c.height),i[u]=a+c.width/2,a+=c.width):(Ca.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),i[u]=a,a+=32)}o[0]=a,o[1]=s}function XA(t,e,n,r,i){for(var o=(t=Array.from(t)).length,a=new Array(o),s=new Array(o),u=new Array(o),l=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,c=[0,0],f=[],p=0,h=0,d=0,g=0;g<=o;g++){var y=t[g];if("\n"!==y&&g!==o||(d=g),d>h){for(var A=l?WA(t,n,r,i,h,d):UA,v=0;v<=A.length;v++){var m=0===v?h:A[v-1],_=v<A.length?A[v]:d;HA(t,m,_,i,a,f);for(var b=m;b<_;b++)s[b]=p+f[1]/2,u[b]=f[0];p+=f[1]*e,c[0]=Math.max(c[0],f[0])}h=d}"\n"===y&&(a[h]=0,s[h]=0,u[h]=0,h++)}return c[1]=p,{x:a,y:s,rowWidth:u,size:c}}u=a("ijozg"),l=a("pGAoq");var ZA=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;u.default(this,t),this.limit=e,this.clear()}return l.default(t,[{key:"clear",value:function(){this._cache={},this._order=[]}},{key:"get",value:function(t){var e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}},{key:"set",value:function(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}},{key:"delete",value:function(t){this._cache[t]&&(this._deleteCache(t),this._deleteOrder(t))}},{key:"_deleteCache",value:function(t){delete this._cache[t]}},{key:"_deleteOrder",value:function(t){var e=this._order.findIndex((function(e){return e===t}));e>=0&&this._order.splice(e,1)}},{key:"_appendOrder",value:function(t){this._order.push(t)}}]),t}();var YA=function(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),QA="Monaco, monospace",KA="normal",JA=new ZA(3),$A=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function tv(t,e){var n=JA.get(t);if(!n)return e;var r=[],i=n.mapping,o=Object.keys(i);o=new Set(o);var a=e;return a instanceof Array&&(a=new Set(a)),a.forEach((function(t){o.has(t)||r.push(t)})),r}function ev(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function nv(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}var rv=function(){"use strict";function t(){u.default(this,t),this.props={fontFamily:QA,fontWeight:KA,characterSet:YA,fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12},this._key=null,this._atlas=null}return l.default(t,[{key:"texture",get:function(){return this._atlas}},{key:"mapping",get:function(){return this._atlas&&this._atlas.mapping}},{key:"scale",get:function(){return 1.2}},{key:"setProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;$A.forEach((function(n){n in t&&(e.props[n]=t[n])}));var n=this._key;this._key=this._getKey();var r=tv(this._key,this.props.characterSet),i=JA.get(this._key);if(i&&0===r.length)this._key!==n&&(this._atlas=i);else{var o=this._generateFontAtlas(this._key,r,i);this._atlas=o,JA.set(this._key,o)}}},{key:"_generateFontAtlas",value:function(t,e,n){var i=this.props,o=i.fontFamily,a=i.fontWeight,s=i.fontSize,u=i.buffer,l=i.sdf,c=i.radius,f=i.cutoff,p=n&&n.data;p||((p=document.createElement("canvas")).width=1024);var h=p.getContext("2d");nv(h,o,s,a);var d=function(t){var e=t.characterSet,n=t.getFontWidth,r=t.fontHeight,i=t.buffer,o=t.maxCanvasWidth,a=t.mapping,s=void 0===a?{}:a,u=t.xOffset,l=void 0===u?0:u,c=t.yOffset,f=void 0===c?0:c,p=0,h=l,d=0,g=!0,y=!1,A=void 0;try{for(var v,m=e[Symbol.iterator]();!(g=(v=m.next()).done);g=!0){var _=v.value;if(!s[_]){var b=n(_,d++);h+b+2*i>o&&(h=0,p++),s[_]={x:h+i,y:f+p*(r+2*i)+i,width:b,height:r},h+=b+2*i}}}catch(t){y=!0,A=t}finally{try{g||null==m.return||m.return()}finally{if(y)throw A}}var x,w=r+2*i;return{mapping:s,xOffset:h,yOffset:f+p*w,canvasHeight:(x=f+(p+1)*w,Math.pow(2,Math.ceil(Math.log2(x))))}}(yt.default({getFontWidth:function(t){return h.measureText(t).width},fontHeight:1.2*s,buffer:u,characterSet:e,maxCanvasWidth:1024},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),g=d.mapping,y=d.canvasHeight,A=d.xOffset,v=d.yOffset;if(p.height!==y){var m=h.getImageData(0,0,p.width,p.height);p.height=y,h.putImageData(m,0,0)}nv(h,o,s,a);var _=!0,b=!1,x=void 0;if(l){var w=new(r(NA))(s,u,c,f,o,a),E=h.getImageData(0,0,w.size,w.size),S=!0,P=!1,k=void 0;try{for(var C,T=e[Symbol.iterator]();!(S=(C=T.next()).done);S=!0){var I=C.value;ev(w.draw(I),E),h.putImageData(E,g[I].x-u,g[I].y+u)}}catch(t){P=!0,k=t}finally{try{S||null==T.return||T.return()}finally{if(P)throw k}}}else try{for(var M,O=e[Symbol.iterator]();!(_=(M=O.next()).done);_=!0){var L=M.value;h.fillText(L,g[L].x,g[L].y+.9*s)}}catch(t){b=!0,x=t}finally{try{_||null==O.return||O.return()}finally{if(b)throw x}}return{xOffset:A,yOffset:v,mapping:g,data:p,width:p.width,height:p.height}}},{key:"_getKey",value:function(){var t=this.props,e=t.fontFamily,n=t.fontWeight,r=t.fontSize,i=t.buffer,o=t.sdf,a=t.radius,s=t.cutoff;return o?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(a," ").concat(s):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}]),t}(),iv=(pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),dt=a("fj4bz"),gt=a("8YVeo"),yt=a("11zLF"),{billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:function(t){return t.position}},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}}),ov=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"getShaders",value:function(){return dt.default(gt.default(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[es,ns]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(dt.default(gt.default(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var o,a=this.context.gl;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.billboard,i=n.sizeScale,o=n.sizeUnits,a=n.sizeMinPixels,s=n.sizeMaxPixels,u=n.getLineWidth,l=this.props.padding;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:r,stroked:Boolean(u),padding:l,sizeUnits:Ma[o],sizeScale:i,sizeMinPixels:a,sizeMaxPixels:s}).draw()}},{key:"_getModel",value:function(t){return new fa(t,yt.default({},this.getShaders(),{id:this.props.id,geometry:new wa({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0}))}}]),n}(xg);ov.layerName="TextBackgroundLayer",ov.defaultProps=iv;var av={fontSize:64,buffer:4,sdf:!1,radius:12,cutoff:.25,smoothing:.1},sv={start:1,middle:0,end:-1},uv={top:1,center:0,bottom:-1},lv=[0,0,0,255],cv=["fontSize","buffer","sdf","radius","cutoff"],fv={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:lv},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:YA},fontFamily:QA,fontWeight:KA,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:lv},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:function(t){return t.text}},getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:lv},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}},pv=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"initializeState",value:function(){this.state={styleVersion:0,fontAtlasManager:new rv}}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=t.changeFlags,i=r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText),o=this.state.characterSet;i&&this._updateText();var a=o!==this.state.characterSet||this._fontChanged(n,e);a&&this._updateFontAtlas(n,e),(a||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}},{key:"getPickingInfo",value:function(t){var e=t.info;return e.object=e.index>=0?this.props.data[e.index]:null,e}},{key:"_updateFontAtlas",value:function(t,e){var n=e.fontSettings,r=e.fontFamily,i=e.fontWeight,o=this.state,a=o.fontAtlasManager,s=o.characterSet;a.setProps(yt.default({},av,n,{characterSet:s,fontFamily:r,fontWeight:i}))}},{key:"_fontChanged",value:function(t,e){if(t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight)return!0;if(t.fontSettings===e.fontSettings)return!1;var n=t.fontSettings||{},r=e.fontSettings||{};return cv.some((function(t){return n[t]!==r[t]}))}},{key:"_updateText",value:function(){var t,e=this.props,n=e.data,r=e.characterSet,i=n.attributes&&n.attributes.getText,o=this.props.getText,a=n.startIndices,s="auto"===r&&new Set;if(i&&a){var u=function(t){var e=t.value,n=t.length,r=t.stride,i=t.offset,o=t.startIndices,a=t.characterSet,s=e.BYTES_PER_ELEMENT,u=r?r/s:1,l=i?i/s:0,c=o[n]||Math.ceil((e.length-l)/u),f=a&&new Set,p=new Array(n),h=e;if(u>1||l>0){h=new e.constructor(c);for(var d=0;d<c;d++)h[d]=e[d*u+l]}for(var g=0;g<n;g++){var y=o[g],A=o[g+1]||c,v=h.subarray(y,A);p[g]=String.fromCodePoint.apply(null,v),f&&v.forEach(f.add,f)}var m=!0,_=!1,b=void 0;if(f)try{for(var x,w=f[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var E=x.value;a.add(String.fromCodePoint(E))}}catch(t){_=!0,b=t}finally{try{m||null==w.return||w.return()}finally{if(_)throw b}}return{texts:p,characterCount:c}}(yt.default({},ArrayBuffer.isView(i)?{value:i}:i,{length:n.length,startIndices:a,characterSet:s})),l=u.texts;t=u.characterCount,o=function(t,e){var n=e.index;return l[n]}}else{var c=cd(n),f=c.iterable,p=c.objectInfo;a=[0],t=0;var h=!0,d=!1,g=void 0;try{for(var y,A=f[Symbol.iterator]();!(h=(y=A.next()).done);h=!0){var v=y.value;p.index++;var m=Array.from(o(v,p)||"");s&&m.forEach(s.add,s),t+=m.length,a.push(t)}}catch(t){d=!0,g=t}finally{try{h||null==A.return||A.return()}finally{if(d)throw g}}}this.setState({getText:o,startIndices:a,numInstances:t,characterSet:s||r})}},{key:"getBoundingRect",value:function(t,e){var n=this.state.fontAtlasManager.mapping,r=this.state.getText,i=this.props,o=i.wordBreak,a=i.maxWidth,s=i.lineHeight,u=i.getTextAnchor,l=i.getAlignmentBaseline,f=XA(r(t,e)||"",s,o,a,n),p=c.default(f.size,2),h=p[0],d=p[1];return[(sv["function"==typeof u?u(t,e):u]-1)*h/2,(uv["function"==typeof l?l(t,e):l]-1)*d/2,h,d]}},{key:"getIconOffsets",value:function(t,e){for(var n=this.state.fontAtlasManager.mapping,r=this.state.getText,i=this.props,o=i.wordBreak,a=i.maxWidth,s=i.lineHeight,u=i.getTextAnchor,l=i.getAlignmentBaseline,f=XA(r(t,e)||"",s,o,a,n),p=f.x,h=f.y,d=f.rowWidth,g=c.default(f.size,2),y=g[0],A=g[1],v=sv["function"==typeof u?u(t,e):u],m=uv["function"==typeof l?l(t,e):l],_=p.length,b=new Array(2*_),x=0,w=0;w<_;w++){var E=(1-v)*(y-d[w])/2;b[x++]=(v-1)*y/2+E+p[w],b[x++]=(m-1)*A/2+h[w]}return b}},{key:"renderLayers",value:function(){var t=this.state,e=t.startIndices,n=t.numInstances,r=t.getText,i=t.fontAtlasManager,o=i.scale,a=i.texture,s=i.mapping,u=t.styleVersion,l=this.props,c=l.data,f=l._dataDiff,p=l.getPosition,h=l.getColor,d=l.getSize,g=l.getAngle,y=l.getPixelOffset,A=l.getBackgroundColor,v=l.getBorderColor,m=l.getBorderWidth,_=l.backgroundPadding,b=l.background,x=l.billboard,w=l.fontSettings,E=l.outlineWidth,S=l.outlineColor,P=l.sizeScale,k=l.sizeUnits,C=l.sizeMinPixels,T=l.sizeMaxPixels,I=l.transitions,M=l.updateTriggers,O=this.getSubLayerClass("characters",DA),L=this.getSubLayerClass("background",ov);return[b&&new L({getFillColor:A,getLineColor:v,getLineWidth:m,padding:_,getPosition:p,getSize:d,getAngle:g,getPixelOffset:y,billboard:x,sizeScale:P/this.state.fontAtlasManager.props.fontSize,sizeUnits:k,sizeMinPixels:C,sizeMaxPixels:T,transitions:I&&{getPosition:I.getPosition,getAngle:I.getAngle,getSize:I.getSize,getFillColor:I.getBackgroundColor,getLineColor:I.getBorderColor,getLineWidth:I.getBorderWidth,getPixelOffset:I.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:M.getPosition,getAngle:M.getAngle,getSize:M.getSize,getFillColor:M.getBackgroundColor,getLineColor:M.getBorderColor,getLineWidth:M.getBorderWidth,getPixelOffset:M.getPixelOffset,getBoundingRect:{getText:M.getText,getTextAnchor:M.getTextAnchor,getAlignmentBaseline:M.getAlignmentBaseline,styleVersion:u}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:f,autoHighlight:!1,getBoundingRect:this.getBoundingRect.bind(this)}),new O({sdf:w.sdf,smoothing:Number.isFinite(w.smoothing)?w.smoothing:av.smoothing,outlineWidth:E,outlineColor:S,iconAtlas:a,iconMapping:s,getPosition:p,getColor:h,getSize:d,getAngle:g,getPixelOffset:y,billboard:x,sizeScale:P*o,sizeUnits:k,sizeMinPixels:C*o,sizeMaxPixels:T*o,transitions:I&&{getPosition:I.getPosition,getAngle:I.getAngle,getColor:I.getColor,getSize:I.getSize,getPixelOffset:I.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:M.getText,getPosition:M.getPosition,getAngle:M.getAngle,getColor:M.getColor,getSize:M.getSize,getPixelOffset:M.getPixelOffset,getIconOffsets:{getText:M.getText,getTextAnchor:M.getTextAnchor,getAlignmentBaseline:M.getAlignmentBaseline,styleVersion:u}}}),{data:c,_dataDiff:f,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets.bind(this),getIcon:r})]}}],[{key:"fontAtlasCacheLimit",set:function(t){!function(t){Ca.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),JA=new ZA(t)}(t)}}]),n}(wg);pv.layerName="TextLayer",pv.defaultProps=fv;var hv={circle:{type:zg,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Rg,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:pv,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},dv={type:zy,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},gv={type:kA,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function yv(t){var e=t.type,n=t.props,r={};for(var i in n)r[i]=e.defaultProps[n[i]];return r}function Av(t,e){var n=t.props,r=n.transitions,i=n.updateTriggers,o={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(var a in e){var s=e[a],u=t.props[a];a.startsWith("get")&&(u=t.getSubLayerAccessor(u),o.updateTriggers[s]=i[a],r&&(o.transitions[s]=r[a])),o[s]=u}return o}function vv(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},i=n.startRow,o=void 0===i?0:i,a=n.endRow,s=void 0===a?t.length:a,u=o;u<s;u++){var l=t[u];Ca.assert(l&&l.geometry,"GeoJSON does not have geometry");var c=l.geometry;if("GeometryCollection"===c.type){Ca.assert(Array.isArray(c.geometries),"GeoJSON does not have geometries array");for(var f=c.geometries,p=0;p<f.length;p++){var h=f[p];mv(h,r,e,l,u)}}else mv(c,r,e,l,u)}return r}function mv(t,e,n,r,i){var o=t.type,a=t.coordinates,s=e.pointFeatures,u=e.lineFeatures,l=e.polygonFeatures,c=e.polygonOutlineFeatures;if(function(t,e){var n=_v[t];Ca.assert(n,"Unknown GeoJSON type ".concat(t));for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,a))switch(o){case"Point":s.push(n({geometry:t},r,i));break;case"MultiPoint":a.forEach((function(t){s.push(n({geometry:{type:"Point",coordinates:t}},r,i))}));break;case"LineString":u.push(n({geometry:t},r,i));break;case"MultiLineString":a.forEach((function(t){u.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"Polygon":l.push(n({geometry:t},r,i)),a.forEach((function(t){c.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"MultiPolygon":a.forEach((function(t){l.push(n({geometry:{type:"Polygon",coordinates:t}},r,i)),t.forEach((function(t){c.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}))}))}else Ca.warn("".concat(o," coordinates are malformed"))()}var _v={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};yt=a("11zLF");function bv(t){return t.geometry.coordinates}function xv(t,e){var n={points:{},lines:{},polygons:{},polygonsOutline:{}},r=t.points,i=t.lines,o=t.polygons,a=function(t,e){var n={points:null,lines:null,polygons:null};for(var r in n){var i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(3*i.length);for(var o=[],a=0;a<i.length;a++)e(i[a],o),n[r][3*a+0]=o[0],n[r][3*a+1]=o[1],n[r][3*a+2]=o[2]}return n}(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:yt.default({},r.attributes,{getPosition:r.positions,instancePickingColors:{size:3,value:a.points}}),properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:yt.default({},i.attributes,{getPath:i.positions,instancePickingColors:{size:3,value:a.lines}}),properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:yt.default({},o.attributes,{getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}}),properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:yt.default({},o.attributes,{getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}}),properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}var wv=["points","linestrings","polygons"],Ev=yt.default({},yv(hv.circle),yv(hv.icon),yv(hv.text),yv(dv),yv(gv),{stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:function(t){return t.properties.icon}},getText:{type:"accessor",value:function(t){return t.properties.text}},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}}),Sv=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){return u.default(this,n),e.apply(this,arguments)}return l.default(n,[{key:"initializeState",value:function(){this.state={layerProps:{},features:{}},this.props.getLineDashArray&&Ca.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=t.props,n=t.changeFlags;if(n.dataChanged){var r=this.props.data,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}}},{key:"_updateStateBinary",value:function(t){var e=t.props,n=(t.changeFlags,xv(e.data,this.encodePickingColor));this.setState({layerProps:n})}},{key:"_updateStateJSON",value:function(t){var e=t.props,n=t.changeFlags,r=function(t){if(Array.isArray(t))return t;switch(Ca.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return Ca.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(e.data),i=this.getSubLayerRow.bind(this),o={},a={};if(Array.isArray(n.dataChanged)){var s=this.state.features;for(var u in s)o[u]=s[u].slice(),a[u]=[];var l=!0,c=!1,f=void 0;try{for(var p,h=n.dataChanged[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var d=p.value,g=vv(r,i,d);for(var y in s)a[y].push(CA({data:o[y],getIndex:function(t){return t.__source.index},dataRange:d,replace:g[y]}))}}catch(t){c=!0,f=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}else o=vv(r,i);var A=function(t,e){var n={points:{},lines:{},polygons:{},polygonsOutline:{}},r=t.pointFeatures,i=t.lineFeatures,o=t.polygonFeatures,a=t.polygonOutlineFeatures;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&function(){return e.pointFeatures},n.points.getPosition=bv,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&function(){return e.lineFeatures},n.lines.getPath=bv,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&function(){return e.polygonFeatures},n.polygons.getPolygon=bv,n.polygonsOutline.data=a,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&function(){return e.polygonOutlineFeatures},n.polygonsOutline.getPath=bv,n}(o,a);this.setState({features:o,featuresDiff:a,layerProps:A})}},{key:"getPickingInfo",value:function(t){var e=this,r=dt.default(gt.default(n.prototype),"getPickingInfo",this).call(this,t),i=r.index,o=r.sourceLayer;return r.featureType=wv.find((function(t){return o.id.startsWith("".concat(e.id,"-").concat(t,"-"))})),i>=0&&o.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[i]),r}},{key:"_updateAutoHighlight",value:function(t){var e="".concat(this.id,"-points-"),n="points"===t.featureType,r=!0,i=!1,o=void 0;try{for(var a,s=this.getSubLayers()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u.id.startsWith(e)===n&&u.updateAutoHighlight(t)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"_renderPolygonLayer",value:function(){var t=this.props,e=t.extruded,n=t.wireframe,r=this.state.layerProps,i="polygons-fill",o=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,gv.type);if(o){var a=Av(this,gv.props),s=e&&n;return s||delete a.getLineColor,a.updateTriggers.lineColors=s,new o(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),r.polygons)}return null}},{key:"_renderLineLayers",value:function(){var t=this.props,e=t.extruded,n=t.stroked,r=this.state.layerProps,i="polygons-stroke",o="linestrings",a=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,dv.type),s=this.shouldRenderSubLayer(o,r.lines.data)&&this.getSubLayerClass(o,dv.type);if(a||s){var u=Av(this,dv.props);return[a&&new a(u,this.getSubLayerProps({id:i,updateTriggers:u.updateTriggers}),r.polygonsOutline),s&&new s(u,this.getSubLayerProps({id:o,updateTriggers:u.updateTriggers}),r.lines)]}return null}},{key:"_renderPointLayers",value:function(){var t=this.props.pointType,e=this.state,n=e.layerProps,r=e.binary,i=this.props.highlightedObjectIndex;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex((function(t){return t.__source.index===i})));var o=new Set(t.split("+")),a=[],s=!0,u=!1,l=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value,h="points-".concat(p),d=hv[p],g=d&&this.shouldRenderSubLayer(h,n.points.data)&&this.getSubLayerClass(h,d.type);if(g){var y=Av(this,d.props),A=n.points;if("text"===p&&this.state.binary){var v=A.data.attributes,m=(v.instancePickingColors,OA.default(v,["instancePickingColors"]));A=yt.default({},A,{data:yt.default({},A.data,{attributes:m})})}a.push(new g(y,this.getSubLayerProps({id:h,updateTriggers:y.updateTriggers,highlightedObjectIndex:i}),A))}}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return a}},{key:"renderLayers",value:function(){var t=this.props.extruded,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}},{key:"getSubLayerAccessor",value:function(t){return this.state.binary&&"function"==typeof t?function(e,n){var r=LA(n.data,n.index);return t(r,n)}:dt.default(gt.default(n.prototype),"getSubLayerAccessor",this).call(this,t)}}]),n}(wg);Sv.layerName="GeoJsonLayer",Sv.defaultProps=Ev,a.register("eoCq7",(function(t,e){var n=a("5qgrd");function r(t,e,r,i){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(i&&-1===["string","number"].indexOf(void 0===i?"undefined":n.default(i)))throw new Error("id must be a number or a string");var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function i(t,e,n,i){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!y(t[0])||!y(t[1]))throw new Error("Coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n,i)}function o(t,e,n,i){if(!t)throw new Error("No coordinates passed");for(var o=0;o<t.length;o++){var a=t[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++){if(0===o&&0===s&&!y(a[0][0])||!y(a[0][1]))throw new Error("Coordinates must contain numbers");if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}}return r({type:"Polygon",coordinates:t},e,n,i)}function s(t,e,n,i){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!y(t[0][1])||!y(t[0][1]))throw new Error("Coordinates must contain numbers");return r({type:"LineString",coordinates:t},e,n,i)}function u(t,e,n,i){if(!t)throw new Error("No coordinates passed");return r({type:"MultiLineString",coordinates:t},e,n,i)}function l(t,e,n,i){if(!t)throw new Error("No coordinates passed");return r({type:"MultiPoint",coordinates:t},e,n,i)}function c(t,e,n,i){if(!t)throw new Error("No coordinates passed");return r({type:"MultiPolygon",coordinates:t},e,n,i)}var f={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65},p={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function h(t,e){if(null==t)throw new Error("radians is required");var n=f[e||"kilometers"];if(!n)throw new Error("units is invalid");return t*n}function d(t,e){if(null==t)throw new Error("distance is required");var n=f[e||"kilometers"];if(!n)throw new Error("units is invalid");return t/n}function g(t){if(null==t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function y(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}t.exports={feature:r,geometry:function(t,e,n){if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(n&&4!==n.length)throw new Error("bbox must be an Array of 4 numbers");var r;switch(t){case"Point":r=i(e).geometry;break;case"LineString":r=s(e).geometry;break;case"Polygon":r=o(e).geometry;break;case"MultiPoint":r=l(e).geometry;break;case"MultiLineString":r=u(e).geometry;break;case"MultiPolygon":r=c(e).geometry;break;default:throw new Error(t+" is invalid")}return n&&(r.bbox=n),r},featureCollection:function(t,e,r){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(void 0===r?"undefined":n.default(r)))throw new Error("id must be a number or a string");var i={type:"FeatureCollection"};return r&&(i.id=r),e&&(i.bbox=e),i.features=t,i},geometryCollection:function(t,e,n,i){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return r({type:"GeometryCollection",geometries:t},e,n,i)},point:i,multiPoint:l,lineString:s,multiLineString:u,polygon:o,multiPolygon:c,radiansToDistance:h,distanceToRadians:d,distanceToDegrees:function(t,e){return g(d(t,e))},radians2degrees:g,degrees2radians:function(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180},bearingToAngle:function(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e},convertDistance:function(t,e,n){if(null==t)throw new Error("distance is required");if(!(t>=0))throw new Error("distance must be a positive number");return h(d(t,e),n||"kilometers")},convertArea:function(t,e,n){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=p[e||"meters"];if(!r)throw new Error("invalid original units");var i=p[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i},round:function(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},isNumber:y}})),a.register("13MRZ",(function(t,e){var n=a("ltHp8").coordEach;t.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return n(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}})),a.register("ltHp8",(function(e,n){function r(t,e,n){if(null!==t){var i,o,a,s,u,l,c,f,p,h,d=0,g=0,y=t.type,A="FeatureCollection"===y,v="Feature"===y,m=A?t.features.length:1;for(i=0;i<m;i++)for(c=(h=!!(p=A?t.features[i].geometry:v?t.geometry:t)&&"GeometryCollection"===p.type)?p.geometries.length:1,o=0;o<c;o++){var _=0;if(null!==(l=h?p.geometries[o]:p)){f=l.coordinates;var b=l.type;switch(d=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":e(f,g,i,_),g++,_++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++)e(f[a],g,i,_),g++,"MultiPoint"===b&&_++;"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(s=0;s<f[a].length-d;s++)e(f[a][s],g,i,_),g++;"MultiLineString"===b&&_++}"Polygon"===b&&_++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(s=0;s<f[a].length;s++)for(u=0;u<f[a][s].length-d;u++)e(f[a][s][u],g,i,_),g++;_++}break;case"GeometryCollection":for(a=0;a<l.geometries.length;a++)r(l.geometries[a],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){var n,r,i,o,a,s,u,l,c=0,f="FeatureCollection"===t.type,p="Feature"===t.type,h=f?t.features.length:1;for(n=0;n<h;n++){for(s=f?t.features[n].geometry:p?t.geometry:t,l=f?t.features[n].properties:p?t.properties:{},a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,c,l);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],c,l);break;default:throw new Error("Unknown Geometry Type")}else e(null,c,l);c++}}function o(t,e){i(t,(function(t,n,r){var i,o=null===t?null:t.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return void e(a(t,r),n,0)}switch(o){case"MultiPoint":i="Point";break;case"MultiLineString":i="LineString";break;case"MultiPolygon":i="Polygon"}t.coordinates.forEach((function(t,o){e(a({type:i,coordinates:t},r),n,o)}))}))}function a(t,e){if(void 0===t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}t(e.exports,"coordEach",(function(){return r})),t(e.exports,"flattenEach",(function(){return o}))})),a.register("aMWv9",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return o}));var i=a("dAfUT");function o(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),a=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r],u=[n,a],l=[o,a],c=[o,r];return i.polygon([[s,c,l,u,s]],e.properties,{bbox:t,id:e.id})}})),a.register("dAfUT",(function(e,n){t(e.exports,"polygon",(function(){return i}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}})),a.register("61ZcP",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return d}));var i=a("gvC1G"),o=a("g4BGS"),s=a("dumn0");a("kJI5v");var u=a("beMfU"),l=a("chwG4");function c(t,e,n,r){var a=t.properties||{},d="Feature"===t.type?t.geometry:t;if("GeometryCollection"===d.type){var g=[];return s.geomEach(t,(function(t){var i=c(t,e,n,r);i&&g.push(i)})),l.featureCollection(g)}var y=function(t){var e=i.default(t).geometry.coordinates,n=[-e[0],-e[1]];return u.default().rotate(n).scale(l.earthRadius)}(d),A={type:d.type,coordinates:p(d.coordinates,y)},v=(new o.GeoJSONReader).read(A),m=l.radiansToLength(l.lengthToRadians(e,n),"meters"),_=o.BufferOp.bufferOp(v,m,r);if(!f((_=(new o.GeoJSONWriter).write(_)).coordinates)){var b={type:_.type,coordinates:h(_.coordinates,y)};return l.feature(b,a)}}function f(t){return Array.isArray(t[0])?f(t[0]):isNaN(t[0])}function p(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return p(t,e)}))}function h(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return h(t,e)}))}var d=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return s.geomEach(t,(function(t){var n=c(t,e,r,i);n&&o.push(n)})),l.featureCollection(o);case"FeatureCollection":return s.featureEach(t,(function(t){var n=c(t,e,r,i);n&&s.featureEach(n,(function(t){t&&o.push(t)}))})),l.featureCollection(o)}return c(t,e,r,i)}})),a.register("gvC1G",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return s}));var i=a("2sBgq"),o=a("79xRo");var s=function(t,e){void 0===e&&(e={});var n=i.default(t),r=(n[0]+n[2])/2,a=(n[1]+n[3])/2;return o.point([r,a],e.properties,e)}})),a.register("2sBgq",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("1SRTe");function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i;var o=i})),a.register("1SRTe",(function(e,n){t(e.exports,"coordEach",(function(){return r}));a("79xRo");function r(t,e,n){if(null!==t)for(var i,o,a,s,u,l,c,f,p=0,h=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,A=g?t.features.length:1,v=0;v<A;v++){u=(f=!!(c=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<u;m++){var _=0,b=0;if(null!==(s=f?c.geometries[m]:c)){l=s.coordinates;var x=s.type;switch(p=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],h,v,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-p;o++){if(!1===e(l[i][o],h,v,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-p;a++){if(!1===e(l[i][o][a],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}})),a.register("79xRo",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"isObject",(function(){return u}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(t[0])||!s(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}})),a.register("g4BGS",(function(t,e){t.exports,function(t){"use strict";var e=function(){},n=function(t){this.message=t||""},r=function(t){this.message=t||""},i=function(t){this.message=t||""},o=function(){},a=function(t){return null===t?Nt:t.color},s=function(t){return null===t?null:t.parent},u=function(t,e){null!==t&&(t.color=e)},l=function(t){return null===t?null:t.left},c=function(t){return null===t?null:t.right},f=function(){this.root_=null,this.size_=0},p=function(){},h=function(){this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])},d=function(){},g=function(t){this.message=t||""},y=function(){this.array_=[]};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var A=function(){};A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){var e=function(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),m=function(){},_={MAX_VALUE:{configurable:!0}};m.isNaN=function(t){return Number.isNaN(t)},m.doubleToLongBits=function(t){return t},m.longBitsToDouble=function(t){return t},m.isInfinite=function(t){return!Number.isFinite(t)},_.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(m,_);var b=function(){},x=function(){},w=function(){},E=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},S={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};E.prototype.setOrdinate=function(t,e){switch(t){case E.X:this.x=e;break;case E.Y:this.y=e;break;case E.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},E.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!A.equalsWithTolerance(this.x,e.x,n)&&!!A.equalsWithTolerance(this.y,e.y,n)}},E.prototype.getOrdinate=function(t){switch(t){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new v("Invalid ordinate index: "+t)},E.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||m.isNaN(this.z))&&m.isNaN(t.z)},E.prototype.equals=function(t){return t instanceof E&&this.equals2D(t)},E.prototype.equalInZ=function(t,e){return A.equalsWithTolerance(this.z,t.z,e)},E.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},E.prototype.clone=function(){},E.prototype.copy=function(){return new E(this)},E.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},E.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},E.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},E.prototype.hashCode=function(){var t=17;return 37*(t=37*t+E.hashCode(this.x))+E.hashCode(this.y)},E.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},E.prototype.interfaces_=function(){return[b,x,e]},E.prototype.getClass=function(){return E},E.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=m.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},S.DimensionalComparator.get=function(){return P},S.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},S.NULL_ORDINATE.get=function(){return m.NaN},S.X.get=function(){return 0},S.Y.get=function(){return 1},S.Z.get=function(){return 2},Object.defineProperties(E,S);var P=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};P.prototype.compare=function(t,e){var n=t,r=e,i=P.compare(n.x,r.x);if(0!==i)return i;var o=P.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:P.compare(n.z,r.z)},P.prototype.interfaces_=function(){return[w]},P.prototype.getClass=function(){return P},P.compare=function(t,e){return t<e?-1:t>e?1:m.isNaN(t)?m.isNaN(e)?0:-1:m.isNaN(e)?1:0};var k=function(){};k.prototype.create=function(){},k.prototype.interfaces_=function(){return[]},k.prototype.getClass=function(){return k};var C=function(){},T={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.toLocationSymbol=function(t){switch(t){case C.EXTERIOR:return"e";case C.BOUNDARY:return"b";case C.INTERIOR:return"i";case C.NONE:return"-"}throw new v("Unknown location value: "+t)},T.INTERIOR.get=function(){return 0},T.BOUNDARY.get=function(){return 1},T.EXTERIOR.get=function(){return 2},T.NONE.get=function(){return-1},Object.defineProperties(C,T);var I=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},M=function(){},O={LOG_10:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.log10=function(t){var e=Math.log(t);return m.isInfinite(e)||m.isNaN(e)?e:e/M.LOG_10},M.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},M.wrap=function(t,e){return t<0?e- -t%e:t%e},M.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},M.average=function(t,e){return(t+e)/2},O.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(M,O);var L=function(t){this.str=t};L.prototype.append=function(t){this.str+=t},L.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},L.prototype.toString=function(t){return this.str};var R=function(t){this.value=t};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var D=function(){};D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var N=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};N.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},N.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=N.magnitude(n._hi),i=N.TEN.pow(r);(n=n.divide(i)).gt(N.TEN)?(n=n.divide(N.TEN),r+=1):n.lt(N.ONE)&&(n=n.multiply(N.TEN),r-=1);for(var o=r+1,a=new L,s=N.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,f=0;l>9?(c=!0,f="9"):f="0"+l,a.append(f),n=n.subtract(N.valueOf(l)).multiply(N.TEN),c&&n.selfAdd(N.TEN);var p=!0,h=N.magnitude(n._hi);if(h<0&&Math.abs(h)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},N.prototype.sqr=function(){return this.multiply(this)},N.prototype.doubleValue=function(){return this._hi+this._lo},N.prototype.subtract=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},N.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},N.prototype.isZero=function(){return 0===this._hi&&0===this._lo},N.prototype.selfSubtract=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},N.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},N.prototype.min=function(t){return this.le(t)?this:t},N.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,f=null;return u=this._hi/n,f=(i=(l=N.SPLIT*u)-(i=l-u))*(a=(f=N.SPLIT*n)-(a=f-n))-(c=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,f=u+(l=(this._hi-c-f+this._lo-u*r)/n),this._hi=f,this._lo=u-f+l,this}},N.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},N.prototype.divide=function(){if(arguments[0]instanceof N){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=N.SPLIT*o)-(e=a-o)),u=e*(r=(u=N.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new N(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return m.isNaN(l)?N.createNaN():N.copy(this).selfDivide(l,0)}},N.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},N.prototype.pow=function(t){if(0===t)return N.valueOf(1);var e=new N(this),n=N.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},N.prototype.ceil=function(){if(this.isNaN())return N.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new N(t,e)},N.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},N.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},N.prototype.setValue=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},N.prototype.max=function(t){return this.ge(t)?this:t},N.prototype.sqrt=function(){if(this.isZero())return N.valueOf(0);if(this.isNegative())return N.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=N.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},N.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,f=null,p=null,h=null,d=null,g=null,y=null;h=this._hi+u,f=this._lo+l,d=h-(g=h-this._hi),p=f-(y=f-this._lo);var A=(c=h+(g=(d=u-g+(this._hi-d))+f))+(g=(p=l-y+(this._lo-p))+(g+(h-c))),v=g+(c-A);return this._hi=A,this._lo=v,this}},N.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=N.SPLIT*this._hi)-this._hi,l=N.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=l+(i=u-c);return this._hi=c,this._lo=f,this}},N.prototype.selfSqr=function(){return this.selfMultiply(this)},N.prototype.floor=function(){if(this.isNaN())return N.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new N(t,e)},N.prototype.negate=function(){return this.isNaN()?this:new N(-this._hi,-this._lo)},N.prototype.clone=function(){},N.prototype.multiply=function(){if(arguments[0]instanceof N){var t=arguments[0];return t.isNaN()?N.createNaN():N.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return m.isNaN(e)?N.createNaN():N.copy(this).selfMultiply(e,0)}},N.prototype.isNaN=function(){return m.isNaN(this._hi)},N.prototype.intValue=function(){return Math.trunc(this._hi)},N.prototype.toString=function(){var t=N.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},N.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+N.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+N.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},N.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=N.SPLIT*i)-(t=o-i)),n=(s=N.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new N(u,i-u+o)},N.prototype.toSciNotation=function(){if(this.isZero())return N.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=N.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},N.prototype.abs=function(){return this.isNaN()?N.NaN:this.isNegative()?this.negate():new N(this)},N.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},N.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},N.prototype.add=function(){if(arguments[0]instanceof N){var t=arguments[0];return N.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return N.copy(this).selfAdd(e)}},N.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof N){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},N.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},N.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},N.prototype.trunc=function(){return this.isNaN()?N.NaN:this.isPositive()?this.floor():this.ceil()},N.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},N.prototype.interfaces_=function(){return[e,b,x]},N.prototype.getClass=function(){return N},N.sqr=function(t){return N.valueOf(t).selfMultiply(t)},N.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return N.parse(t)}if("number"==typeof arguments[0])return new N(arguments[0])},N.sqrt=function(t){return N.valueOf(t).sqrt()},N.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new N,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,D.isDigit(l)){var c=l-"0";o.selfMultiply(N.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var f=t.substring(e);try{u=R.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var p=o,h=a-s-u;if(0===h)p=o;else if(h>0){var d=N.TEN.pow(h);p=o.divide(d)}else if(h<0){var g=N.TEN.pow(-h);p=o.multiply(g)}return r?p.negate():p},N.createNaN=function(){return new N(m.NaN,m.NaN)},N.copy=function(t){return new N(t)},N.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},N.stringOfChar=function(t,e){for(var n=new L,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new N(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new N(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new N(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new N(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new N(m.NaN,m.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return N.valueOf(10)},F.ONE.get=function(){return N.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(N,F);var j=function(){},z={DP_SAFE_EPSILON:{configurable:!0}};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,n){var r=j.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=N.valueOf(e.x).selfAdd(-t.x),o=N.valueOf(e.y).selfAdd(-t.y),a=N.valueOf(n.x).selfAdd(-e.x),s=N.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},j.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},j.intersection=function(t,e,n,r){var i=N.valueOf(r.y).selfSubtract(n.y).selfMultiply(N.valueOf(e.x).selfSubtract(t.x)),o=N.valueOf(r.x).selfSubtract(n.x).selfMultiply(N.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=N.valueOf(r.x).selfSubtract(n.x).selfMultiply(N.valueOf(t.y).selfSubtract(n.y)),u=N.valueOf(r.y).selfSubtract(n.y).selfMultiply(N.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=N.valueOf(t.x).selfAdd(N.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),f=N.valueOf(e.x).selfSubtract(t.x).selfMultiply(N.valueOf(t.y).selfSubtract(n.y)),p=N.valueOf(e.y).selfSubtract(t.y).selfMultiply(N.valueOf(t.x).selfSubtract(n.x)),h=f.subtract(p).selfDivide(a).doubleValue(),d=N.valueOf(n.y).selfAdd(N.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new E(c,d)},j.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return j.signum(a);r=i+o}else{if(!(i<0))return j.signum(a);if(o>=0)return j.signum(a);r=-i-o}var s=j.DP_SAFE_EPSILON*r;return a>=s||-a>=s?j.signum(a):2},j.signum=function(t){return t>0?1:t<0?-1:0},z.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,z);var B=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},B.prototype.setOrdinate=function(t,e,n){},B.prototype.size=function(){},B.prototype.getOrdinate=function(t,e){},B.prototype.getCoordinate=function(){},B.prototype.getCoordinateCopy=function(t){},B.prototype.getDimension=function(){},B.prototype.getX=function(t){},B.prototype.clone=function(){},B.prototype.expandEnvelope=function(t){},B.prototype.copy=function(){},B.prototype.getY=function(t){},B.prototype.toCoordinateArray=function(){},B.prototype.interfaces_=function(){return[x]},B.prototype.getClass=function(){return B},Object.defineProperties(B,U);var V=function(){},G=function(t){var e=function(){t.call(this,"Projective point not representable on the Cartesian plane.")};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(V),q=function(){};q.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};var W=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var f=arguments[0],p=arguments[1],h=arguments[2],d=arguments[3],g=f.y-p.y,y=p.x-f.x,A=f.x*p.y-p.x*f.y,v=h.y-d.y,m=d.x-h.x,_=h.x*d.y-d.x*h.y;this.x=y*_-m*A,this.y=v*A-g*_,this.w=g*m-v*y}};W.prototype.getY=function(){var t=this.y/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new G;return t},W.prototype.getX=function(){var t=this.x/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new G;return t},W.prototype.getCoordinate=function(){var t=new E;return t.x=this.getX(),t.y=this.getY(),t},W.prototype.interfaces_=function(){return[]},W.prototype.getClass=function(){return W},W.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,f=(o*l-u*a)/c,p=(s*a-i*l)/c;if(m.isNaN(f)||m.isInfinite(f)||m.isNaN(p)||m.isInfinite(p))throw new G;return new E(f,p)};var H=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof E){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},X={serialVersionUID:{configurable:!0}};H.prototype.getArea=function(){return this.getWidth()*this.getHeight()},H.prototype.equals=function(t){if(!(t instanceof H))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},H.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new H;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new H(e,r,n,i)},H.prototype.isNull=function(){return this._maxx<this._minx},H.prototype.getMaxX=function(){return this._maxx},H.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof H){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},H.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof H){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof E){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},H.prototype.getMinY=function(){return this._miny},H.prototype.getMinX=function(){return this._minx},H.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof H){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},H.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},H.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},H.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},H.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},H.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},H.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},H.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},H.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},H.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},H.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof H){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},H.prototype.centre=function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},H.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof H){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},H.prototype.getMaxY=function(){return this._maxy},H.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},H.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+E.hashCode(this._minx))+E.hashCode(this._maxx))+E.hashCode(this._miny))+E.hashCode(this._maxy)},H.prototype.interfaces_=function(){return[b,e]},H.prototype.getClass=function(){return H},H.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<s))}},X.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(H,X);var Z={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Y=function(t){this.geometryFactory=t||new me};Y.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Z.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Z.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Y.prototype.write=function(t){return this.extractGeometry(t)},Y.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Q[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Q[e].apply(this,[t])+")"};var Q={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Q.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Q.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Q.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Q.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Q.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Q.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Q.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Q.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Z.spaces);return this.geometryFactory.createPoint(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Z.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Z.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Z.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Z.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Z.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Z.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Z.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Z.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Z.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new Y(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){var e=function(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){var e=function(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new E,this._intPt[1]=new E,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new L;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new H(this._inputLines[0][0],this._inputLines[0][1]),n=new H(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,H.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=W.intersection(t,n,r,i)}catch(a){if(!(a instanceof G))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new E(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=j.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);q.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&q.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new E(t),o=new E(e),a=new E(n),s=new E(r),u=new E;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=H.intersects(e,n,r),a=H.intersects(e,n,i),s=H.intersects(r,i,e),u=H.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,f=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,h=((o>l?o:l)+(s<f?s:f))/2,d=((a>c?a:c)+(u<p?u:p))/2;i.x=h,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!H.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new E(r):0===a?this._intPt[0]=new E(i):0===s?this._intPt[0]=new E(e):0===u&&(this._intPt[0]=new E(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==C.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?C.BOUNDARY:this._crossingCount%2==1?C.INTERIOR:C.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof E&&I(arguments[1],B)){for(var t=arguments[1],e=new at(arguments[0]),n=new E,r=new E,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof E&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var u=o[s],l=o[s-1];if(a.countSegment(u,l),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return j.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(I(arguments[0],B)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new E,l=new E,c=new E;a.getCoordinate(0,l),a.getCoordinate(1,c);var f=l.x;c.x-=f;for(var p=0,h=1;h<s-1;h++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(h+1,c),c.x-=f,p+=l.x*(u.y-c.y);return p/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(H.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?M.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==C.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new E;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=st.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ft={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new H(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[x,b,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ft.serialVersionUID.get=function(){return 0x799ea46522854c00},ft.SORTINDEX_POINT.get=function(){return 0},ft.SORTINDEX_MULTIPOINT.get=function(){return 1},ft.SORTINDEX_LINESTRING.get=function(){return 2},ft.SORTINDEX_LINEARRING.get=function(){return 3},ft.SORTINDEX_MULTILINESTRING.get=function(){return 4},ft.SORTINDEX_POLYGON.get=function(){return 5},ft.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ft.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ft.geometryChangedFilter.get=function(){return pt},Object.defineProperties(ct,ft);var pt=function(){};pt.interfaces_=function(){return[lt]},pt.filter=function(t){t.geometryChangedAction()};var ht=function(){};ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return At},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return mt},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new At},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var At=function(){};At.prototype.isInBoundary=function(t){return t>0},At.prototype.interfaces_=function(){return[dt]},At.prototype.getClass=function(){return At};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var mt=function(){};mt.prototype.isInBoundary=function(t){return 1===t},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.add=function(){},_t.prototype.addAll=function(){},_t.prototype.isEmpty=function(){},_t.prototype.iterator=function(){},_t.prototype.size=function(){},_t.prototype.toArray=function(){},_t.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var bt=function(){};bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){};var xt=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(_t);(r.prototype=new Error).name="NoSuchElementException";var wt,Et,St=function(t){var e=function(){t.call(this),this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,_t]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Pt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(xt),Pt=(Et=function(t){wt.call(this),this.arrayList_=t,this.position_=0},(wt=bt)&&(Et.__proto__=wt),Et.prototype=Object.create(wt&&wt.prototype),Et.prototype.constructor=Et,Et.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},Et.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Et.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Et.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},Et),kt=function(t){var e=function(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof E&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<s.length;l++)this.add(s[l],u);else for(var c=s.length-1;c>=0;c--)this.add(s[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var f=arguments[0],p=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(f>0&&this.get(f-1).equals2D(p))return null;if(f<h&&this.get(f).equals2D(p))return null}}t.prototype.add.call(this,f,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],A=arguments[3],v=1;y>A&&(v=-1);for(var m=y;m!==A;m+=v)this.add(d[m],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new E(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(St),Ct=function(){},Tt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Tt.ForwardComparator.get=function(){return It},Tt.BidirectionalComparator.get=function(){return Mt},Tt.coordArrayType.get=function(){return new Array(0).fill(null)},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ct.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Ct.indexOf(r,e)<0)return r}return null},Ct.scroll=function(t,e){var n=Ct.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);q.arraycopy(t,n,r,0,t.length-n),q.arraycopy(t,0,r,t.length-n,n),q.arraycopy(r,0,t,0,t.length)},Ct.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Ct.intersection=function(t,e){for(var n=new kt,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Ct.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ct.removeRepeatedPoints=function(t){return Ct.hasRepeatedPoints(t)?new kt(t,!1).toCoordinateArray():t},Ct.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Ct.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Ct.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new E(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new E(r[i+u])},Ct.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Ct.envelope=function(t){for(var e=new H,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ct.toCoordinateArray=function(t){return t.toArray(Ct.coordArrayType)},Ct.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ct.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ct.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Ct.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Ct.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ct.extract=function(t,e,n){e=M.clamp(e,0,t.length);var r=(n=M.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Ct,Tt);var It=function(){};It.prototype.compare=function(t,e){return Ct.compare(t,e)},It.prototype.interfaces_=function(){return[w]},It.prototype.getClass=function(){return It};var Mt=function(){};Mt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Ct.compare(n,r);return Ct.isEqualReversed(n,r)?0:i},Mt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Ct.increasingDirection(n),o=Ct.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},Mt.prototype.interfaces_=function(){return[w]},Mt.prototype.getClass=function(){return Mt};var Ot=function(){};Ot.prototype.get=function(){},Ot.prototype.put=function(){},Ot.prototype.size=function(){},Ot.prototype.values=function(){},Ot.prototype.entrySet=function(){};var Lt=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ot);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new _t).contains=function(){};var Rt=function(t){var e=function(){t.call(this),this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Dt(this)},e}(o),Dt=function(t){var e=function(e){t.call(this),this.hashSet_=e,this.position_=0};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(bt),Nt=0;(f.prototype=new Lt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},f.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},f.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===l(s(s(t)))){var e=c(s(s(t)));1===a(e)?(u(s(t),Nt),u(e,Nt),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),Nt),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=l(s(s(t)));1===a(n)?(u(s(t),Nt),u(n,Nt),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),Nt),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Nt},f.prototype.values=function(){var t=new St,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=f.successor(e));)t.add(e.value);return t},f.prototype.entrySet=function(){var t=new Rt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=f.successor(e));)t.add(e);return t},f.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},f.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},f.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},f.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},f.prototype.size=function(){return this.size_};var Ft=function(){};Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},p.prototype=new o,(h.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},h.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},h.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},h.prototype.remove=function(t){throw new i},h.prototype.size=function(){return this.array_.length},h.prototype.isEmpty=function(){return 0===this.array_.length},h.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},h.prototype.iterator=function(){return new jt(this)};var jt=function(t){this.treeSet_=t,this.position_=0};jt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},jt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},jt.prototype.remove=function(){throw new i};var zt=function(){};zt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},zt.asList=function(t){for(var e=new St,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Bt=function(){},Ut={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ut.P.get=function(){return 0},Ut.L.get=function(){return 1},Ut.A.get=function(){return 2},Ut.FALSE.get=function(){return-1},Ut.TRUE.get=function(){return-2},Ut.DONTCARE.get=function(){return-3},Ut.SYM_FALSE.get=function(){return"F"},Ut.SYM_TRUE.get=function(){return"T"},Ut.SYM_DONTCARE.get=function(){return"*"},Ut.SYM_P.get=function(){return"0"},Ut.SYM_L.get=function(){return"1"},Ut.SYM_A.get=function(){return"2"},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt},Bt.toDimensionSymbol=function(t){switch(t){case Bt.FALSE:return Bt.SYM_FALSE;case Bt.TRUE:return Bt.SYM_TRUE;case Bt.DONTCARE:return Bt.SYM_DONTCARE;case Bt.P:return Bt.SYM_P;case Bt.L:return Bt.SYM_L;case Bt.A:return Bt.SYM_A}throw new v("Unknown dimension value: "+t)},Bt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case Bt.SYM_FALSE:return Bt.FALSE;case Bt.SYM_TRUE:return Bt.TRUE;case Bt.SYM_DONTCARE:return Bt.DONTCARE;case Bt.SYM_P:return Bt.P;case Bt.SYM_L:return Bt.L;case Bt.SYM_A:return Bt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(Bt,Ut);var Vt=function(){};Vt.prototype.filter=function(t){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Gt=function(){};Gt.prototype.filter=function(t,e){},Gt.prototype.isDone=function(){},Gt.prototype.isGeometryChanged=function(){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var qt=function(t){var e=function(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new H,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();zt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Bt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Bt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new h(zt.asList(this._geometries)),n=new h(zt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),l=i.getGeometryN(s),c=u.compareToSameClass(l,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(I(arguments[0],ht))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(I(arguments[0],Gt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(I(arguments[0],Vt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(I(arguments[0],lt)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Wt=function(t){var e=function(){t.apply(this,arguments)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Bt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Ht(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ft]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(qt),Ht=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Ht.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Ht.prototype.getBoundary=function(){return this._geom instanceof Kt?this.boundaryLineString(this._geom):this._geom instanceof Wt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ht.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Ht.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ht.prototype.computeBoundaryCoordinates=function(t){var e=new St;this._endpointMap=new f;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Ct.toCoordinateArray(e)},Ht.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Xt,this._endpointMap.put(t,e)),e.count++},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.getBoundary=function(){return 1===arguments.length?new Ht(arguments[0]).getBoundary():2===arguments.length?new Ht(arguments[0],arguments[1]).getBoundary():void 0};var Xt=function(){this.count=null};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt};var Zt=function(){},Yt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt},Zt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Zt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Zt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Zt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Zt.split=function(t,e){for(var n=e.length,r=new St,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Zt.toString=function(){if(1===arguments.length){var t=arguments[0];return Zt.SIMPLE_ORDINATE_FORMAT.format(t)}},Zt.spaces=function(t){return Zt.chars(" ",t)},Yt.NEWLINE.get=function(){return q.getProperty("line.separator")},Yt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Zt,Yt);var Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt},Qt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Qt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,B.X)===t.getOrdinate(e-1,B.X)&&t.getOrdinate(0,B.Y)===t.getOrdinate(e-1,B.Y)},Qt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||m.isNaN(a)&&m.isNaN(s)))return!1}return!0},Qt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Qt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Qt.copy(e,i-1,r,o,1);return r},Qt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Qt.swap(t,r,e-r)},Qt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Qt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Qt.copyCoord(t,e+o,n,r+o)},Qt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new L;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Zt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Qt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Qt.createClosedRing(t,e,4):e.getOrdinate(0,B.X)===e.getOrdinate(n-1,B.X)&&e.getOrdinate(0,B.Y)===e.getOrdinate(n-1,B.Y)?e:Qt.createClosedRing(t,e,n+1)},Qt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Qt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Qt.copy(e,0,r,o,1);return r};var Kt=function(t){var e=function(e,n){t.call(this,n),this._points=null,this.init(e)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new H:this._points.expandEnvelope(new H)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Qt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Bt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Qt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(I(arguments[0],ht))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(I(arguments[0],Gt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(I(arguments[0],Vt)||I(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Ht(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Ft]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var $t=function(t){var e=function(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new H;var t=new H;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(I(arguments[0],ht)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(I(arguments[0],Gt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(I(arguments[0],Vt)||I(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),te=function(){};te.prototype.interfaces_=function(){return[]},te.prototype.getClass=function(){return te};var ee=function(t){var e=function(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o==(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);zt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Ct.minCoordinate(e.getCoordinates());Ct.scroll(r,i),q.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Ct.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),c=0;c<u&&c<l;){var f=this.getInteriorRingN(c),p=i.getInteriorRingN(c),h=f.compareToSameClass(p,r);if(0!==h)return h;c++}return c<u?1:c<l?-1:0}},e.prototype.apply=function(t){if(I(t,ht)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(I(t,Gt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(I(t,Vt))t.filter(this);else if(I(t,lt)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[te]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),ne=function(t){var e=function(){t.apply(this,arguments)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(qt),re=function(t){var e=function(e,n){e instanceof E&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Qt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Kt),ie=function(t){var e=function(){t.apply(this,arguments)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new St,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[te]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(qt),oe=function(t){this._factory=t||null,this._isUserDataCopied=!1},ae={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};oe.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},oe.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},oe.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof qt?this.editGeometryCollection(t,e):t instanceof ee?this.editPolygon(t,e):t instanceof $t||t instanceof Kt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},oe.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new St,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===ne?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Wt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ie?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},oe.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new St,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.GeometryEditorOperation=function(){},ae.NoOpGeometryOperation.get=function(){return se},ae.CoordinateOperation.get=function(){return ue},ae.CoordinateSequenceOperation.get=function(){return le},Object.defineProperties(oe,ae);var se=function(){};se.prototype.edit=function(t,e){return t},se.prototype.interfaces_=function(){return[oe.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){};ue.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof re?e.createLinearRing(n):t instanceof Kt?e.createLineString(n):t instanceof $t?n.length>0?e.createPoint(n[0]):e.createPoint():t},ue.prototype.interfaces_=function(){return[oe.GeometryEditorOperation]},ue.prototype.getClass=function(){return ue};var le=function(){};le.prototype.edit=function(t,e){return t instanceof re?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $t?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},le.prototype.interfaces_=function(){return[oe.GeometryEditorOperation]},le.prototype.getClass=function(){return le};var ce=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new E}else if(I(arguments[0],B)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new E}},fe={serialVersionUID:{configurable:!0}};ce.prototype.setOrdinate=function(t,e,n){switch(e){case B.X:this._coordinates[t].x=n;break;case B.Y:this._coordinates[t].y=n;break;case B.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},ce.prototype.size=function(){return this._coordinates.length},ce.prototype.getOrdinate=function(t,e){switch(e){case B.X:return this._coordinates[t].x;case B.Y:return this._coordinates[t].y;case B.Z:return this._coordinates[t].z}return m.NaN},ce.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ce.prototype.getCoordinateCopy=function(t){return new E(this._coordinates[t])},ce.prototype.getDimension=function(){return this._dimension},ce.prototype.getX=function(t){return this._coordinates[t].x},ce.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ce(t,this._dimension)},ce.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ce.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ce(t,this._dimension)},ce.prototype.toString=function(){if(this._coordinates.length>0){var t=new L(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ce.prototype.getY=function(t){return this._coordinates[t].y},ce.prototype.toCoordinateArray=function(){return this._coordinates},ce.prototype.interfaces_=function(){return[B,e]},ce.prototype.getClass=function(){return ce},fe.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ce,fe);var pe=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};pe.prototype.readResolve=function(){return pe.instance()},pe.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ce(arguments[0]);if(I(arguments[0],B))return new ce(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ce(t):new ce(t,e)}},pe.prototype.interfaces_=function(){return[k,e]},pe.prototype.getClass=function(){return pe},pe.instance=function(){return pe.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new pe},Object.defineProperties(pe,he);var de=function(t){var e=function(){t.call(this),this.map_=new Map};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new St,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Ot),ge=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ae){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},ye={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ge.prototype.equals=function(t){if(!(t instanceof ge))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},ge.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(r))},ge.prototype.getScale=function(){return this._scale},ge.prototype.isFloating=function(){return this._modelType===ge.FLOATING||this._modelType===ge.FLOATING_SINGLE},ge.prototype.getType=function(){return this._modelType},ge.prototype.toString=function(){var t="UNKNOWN";return this._modelType===ge.FLOATING?t="Floating":this._modelType===ge.FLOATING_SINGLE?t="Floating-Single":this._modelType===ge.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},ge.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return m.isNaN(t)||this._modelType===ge.FLOATING_SINGLE?t:this._modelType===ge.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof E){var e=arguments[0];if(this._modelType===ge.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},ge.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===ge.FLOATING?t=16:this._modelType===ge.FLOATING_SINGLE?t=6:this._modelType===ge.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},ge.prototype.setScale=function(t){this._scale=Math.abs(t)},ge.prototype.interfaces_=function(){return[e,b]},ge.prototype.getClass=function(){return ge},ge.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},ye.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ye.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(ge,ye);var Ae=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ve={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ae.prototype.readResolve=function(){return Ae.nameToTypeMap.get(this._name)},Ae.prototype.toString=function(){return this._name},Ae.prototype.interfaces_=function(){return[e]},Ae.prototype.getClass=function(){return Ae},ve.serialVersionUID.get=function(){return-552860263173159e4},ve.nameToTypeMap.get=function(){return new de},Object.defineProperties(Ae,ve),ge.Type=Ae,ge.FIXED=new Ae("FIXED"),ge.FLOATING=new Ae("FLOATING"),ge.FLOATING_SINGLE=new Ae("FLOATING SINGLE");var me=function t(){this._precisionModel=new ge,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?I(arguments[0],k)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ge&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},_e={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new E(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new E(t.getMinX(),t.getMinY()),new E(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new E(t.getMinX(),t.getMinY()),new E(t.getMinX(),t.getMaxY()),new E(t.getMaxX(),t.getMaxY()),new E(t.getMaxX(),t.getMinY()),new E(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Kt(this.getCoordinateSequenceFactory().create(t),this):I(t,B)?new Kt(t,this):void 0:new Kt(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){return 0===arguments.length?new Wt(null,this):1===arguments.length?new Wt(arguments[0],this):void 0},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(me.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof ee)return this.createMultiPolygon(me.toPolygonArray(t));if(s instanceof Kt)return this.createMultiLineString(me.toLineStringArray(t));if(s instanceof $t)return this.createMultiPoint(me.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(I(arguments[0],B))return new $t(arguments[0],this)}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new ee(null,null,this);if(1===arguments.length){if(I(arguments[0],B)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof re){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new ee(arguments[0],arguments[1],this)},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},me.prototype.createGeometry=function(t){return new oe(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(I(arguments[0],B))return new re(arguments[0],this)}},me.prototype.createMultiPolygon=function(){return 0===arguments.length?new ie(null,this):1===arguments.length?new ie(arguments[0],this):void 0},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new ne(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(I(arguments[0],B)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Qt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return pe.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},_e.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,_e);var be=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xe=function(t){this.geometryFactory=t||new me};xe.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!we[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==be.indexOf(n)?we[n].apply(this,[e.coordinates]):"GeometryCollection"===n?we[n].apply(this,[e.geometries]):we[n].apply(this,[e])},xe.prototype.write=function(t){var e=t.getGeometryType();if(!Ee[e])throw new Error("Geometry is not supported");return Ee[e].apply(this,[t])};var we={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!we[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=we.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new E(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new E(t[0],t[1]),new E(t[2],t[1]),new E(t[2],t[3]),new E(t[0],t[3]),new E(t[0],t[1])])},Point:function(t){var e=new E(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=we.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=we.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=we.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(we.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Ee.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ee.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Ee.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ee[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Se=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xe(this.geometryFactory)};Se.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ge.FIXED&&this.reducePrecision(e),e},Se.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Pe=function(){this.parser=new xe(this.geometryFactory)};Pe.prototype.write=function(t){return this.parser.write(t)};var ke=function(){},Ce={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.opposite=function(t){return t===ke.LEFT?ke.RIGHT:t===ke.RIGHT?ke.LEFT:t},Ce.ON.get=function(){return 0},Ce.LEFT.get=function(){return 1},Ce.RIGHT.get=function(){return 2},Object.defineProperties(ke,Ce),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new xt).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Te=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Te.prototype.getCoordinate=function(){return this._minCoord},Te.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Te.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Te.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=ke.LEFT;return n[e].y<n[e+1].y&&(r=ke.RIGHT),r},Te.prototype.getEdge=function(){return this._orientedDe},Te.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Te.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Te.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ke.LEFT&&(this._orientedDe=this._minDe.getSym())},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Ie=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new E(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),Me=function(){this.array_=[]};Me.prototype.addLast=function(t){this.array_.push(t)},Me.prototype.removeFirst=function(){return this.array_.shift()},Me.prototype.isEmpty=function(){return 0===this.array_.length};var Oe=function(){this._finder=null,this._dirEdgeList=new St,this._nodes=new St,this._rightMostCoord=null,this._env=null,this._finder=new Te};Oe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Oe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Oe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ie("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Oe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(ke.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Oe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Oe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(ke.RIGHT)>=1&&e.getDepth(ke.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Oe.prototype.computeDepths=function(t){var e=new Rt,n=new Me,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Oe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Oe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new H,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Oe.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Oe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(ke.LEFT,t.getDepth(ke.RIGHT)),e.setDepth(ke.RIGHT,t.getDepth(ke.LEFT))},Oe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Oe.prototype.getNodes=function(){return this._nodes},Oe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Oe.prototype.interfaces_=function(){return[b]},Oe.prototype.getClass=function(){return Oe};var Le=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[ke.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[ke.ON]=o,this.location[ke.LEFT]=a,this.location[ke.RIGHT]=s}};Le.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Le.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==C.NONE)return!1;return!0},Le.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===C.NONE&&(this.location[e]=t)},Le.prototype.isLine=function(){return 1===this.location.length},Le.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[ke.ON]=this.location[ke.ON],e[ke.LEFT]=C.NONE,e[ke.RIGHT]=C.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===C.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Le.prototype.getLocations=function(){return this.location},Le.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[ke.LEFT];this.location[ke.LEFT]=this.location[ke.RIGHT],this.location[ke.RIGHT]=t},Le.prototype.toString=function(){var t=new L;return this.location.length>1&&t.append(C.toLocationSymbol(this.location[ke.LEFT])),t.append(C.toLocationSymbol(this.location[ke.ON])),this.location.length>1&&t.append(C.toLocationSymbol(this.location[ke.RIGHT])),t.toString()},Le.prototype.setLocations=function(t,e,n){this.location[ke.ON]=t,this.location[ke.LEFT]=e,this.location[ke.RIGHT]=n},Le.prototype.get=function(t){return t<this.location.length?this.location[t]:C.NONE},Le.prototype.isArea=function(){return this.location.length>1},Le.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===C.NONE)return!0;return!1},Le.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(ke.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Le.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(C.NONE)},Le.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Le.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le};var Re=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Le(e),this.elt[1]=new Le(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Le(n.elt[0]),this.elt[1]=new Le(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Le(C.NONE),this.elt[1]=new Le(C.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Le(o,a,s),this.elt[1]=new Le(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],f=arguments[3];this.elt[0]=new Le(C.NONE,C.NONE,C.NONE),this.elt[1]=new Le(C.NONE,C.NONE,C.NONE),this.elt[u].setLocations(l,c,f)}};Re.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Re.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Re.prototype.isNull=function(t){return this.elt[t].isNull()},Re.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Re.prototype.isLine=function(t){return this.elt[t].isLine()},Re.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Le(t.elt[e]):this.elt[e].merge(t.elt[e])},Re.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Re.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(ke.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Re.prototype.toString=function(){var t=new L;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Re.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Re.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Re.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(ke.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Re.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Re.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Re.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Le(this.elt[t].location[0]))},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re},Re.toLineLabel=function(t){for(var e=new Re(C.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var De=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new St,this._pts=new St,this._label=new Re(C.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new St,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};De.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},De.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},De.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ie("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ie("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},De.prototype.getLinearRing=function(){return this._ring},De.prototype.getCoordinate=function(t){return this._pts.get(t)},De.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},De.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},De.prototype.isHole=function(){return this._isHole},De.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},De.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},De.prototype.addHole=function(t){this._holes.add(t)},De.prototype.isShell=function(){return null===this._shell},De.prototype.getLabel=function(){return this._label},De.prototype.getEdges=function(){return this._edges},De.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},De.prototype.getShell=function(){return this._shell},De.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,ke.RIGHT);if(n===C.NONE)return null;if(this._label.getLocation(e)===C.NONE)return this._label.setLocation(e,n),null}},De.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},De.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Ne=function(t){var e=function(){var e=arguments[0],n=arguments[1];t.call(this,e,n)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Fe=function(t){var e=function(){var e=arguments[0],n=arguments[1];t.call(this,e,n)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new St,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ne(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),je=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};je.prototype.setVisited=function(t){this._isVisited=t},je.prototype.setInResult=function(t){this._isInResult=t},je.prototype.isCovered=function(){return this._isCovered},je.prototype.isCoveredSet=function(){return this._isCoveredSet},je.prototype.setLabel=function(t){this._label=t},je.prototype.getLabel=function(){return this._label},je.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},je.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},je.prototype.isInResult=function(){return this._isInResult},je.prototype.isVisited=function(){return this._isVisited},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var ze=function(t){var e=function(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Re(0,C.NONE)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=C.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==C.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Re(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Re)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===C.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=C.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case C.BOUNDARY:n=C.INTERIOR;break;case C.INTERIOR:default:n=C.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(je),Be=function(){this.nodeMap=new f,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Be.prototype.find=function(t){return this.nodeMap.get(t)},Be.prototype.addNode=function(){if(arguments[0]instanceof E){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ze){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Be.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Be.prototype.iterator=function(){return this.nodeMap.values().iterator()},Be.prototype.values=function(){return this.nodeMap.values()},Be.prototype.getBoundaryNodes=function(t){for(var e=new St,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===C.BOUNDARY&&e.add(r)}return e},Be.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be};var Ue=function(){},Ve={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue},Ue.isNorthern=function(t){return t===Ue.NE||t===Ue.NW},Ue.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Ue.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Ue.isInHalfPlane=function(t,e){return e===Ue.SE?t===Ue.SE||t===Ue.SW:t===e||t===e+1},Ue.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ue.NE:Ue.SE:e>=0?Ue.NW:Ue.SW}if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Ue.NE:Ue.SE:r.y>=n.y?Ue.NW:Ue.SW}},Ve.NE.get=function(){return 0},Ve.NW.get=function(){return 1},Ve.SW.get=function(){return 2},Ve.SE.get=function(){return 3},Object.defineProperties(Ue,Ve);var Ge=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ge.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ge.prototype.getDy=function(){return this._dy},Ge.prototype.getCoordinate=function(){return this._p0},Ge.prototype.setNode=function(t){this._node=t},Ge.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ge.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ge.prototype.getDirectedCoordinate=function(){return this._p1},Ge.prototype.getDx=function(){return this._dx},Ge.prototype.getLabel=function(){return this._label},Ge.prototype.getEdge=function(){return this._edge},Ge.prototype.getQuadrant=function(){return this._quadrant},Ge.prototype.getNode=function(){return this._node},Ge.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ge.prototype.computeLabel=function(t){},Ge.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Ue.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ge.prototype.interfaces_=function(){return[b]},Ge.prototype.getClass=function(){return Ge};var qe=function(t){var e=function(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Re(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ie("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,ke.LEFT)===C.INTERIOR&&this._label.getLocation(e,ke.RIGHT)===C.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[ke.LEFT]+"/"+this._depth[ke.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,C.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,C.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===ke.LEFT&&(r=-1);var i=ke.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===C.EXTERIOR&&e===C.INTERIOR?1:t===C.INTERIOR&&e===C.EXTERIOR?-1:0},e}(Ge),We=function(){};We.prototype.createNode=function(t){return new ze(t,null)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var He=function(){if(this._edges=new St,this._nodes=null,this._edgeEndList=new St,0===arguments.length)this._nodes=new Be(new We);else if(1===arguments.length){var t=arguments[0];this._nodes=new Be(t)}};He.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},He.prototype.find=function(t){return this._nodes.find(t)},He.prototype.addNode=function(){if(arguments[0]instanceof ze){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof E){var e=arguments[0];return this._nodes.addNode(e)}},He.prototype.getNodeIterator=function(){return this._nodes.iterator()},He.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},He.prototype.debugPrintln=function(t){q.out.println(t)},He.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===C.BOUNDARY},He.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},He.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Ue.quadrant(t,e)===Ue.quadrant(n,r)},He.prototype.getEdgeEnds=function(){return this._edgeEndList},He.prototype.debugPrint=function(t){q.out.print(t)},He.prototype.getEdgeIterator=function(){return this._edges.iterator()},He.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},He.prototype.insertEdge=function(t){this._edges.add(t)},He.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},He.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new qe(n,!0),i=new qe(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},He.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},He.prototype.getNodes=function(){return this._nodes.values()},He.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He},He.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Xe=function(){this._geometryFactory=null,this._shellList=new St;var t=arguments[0];this._geometryFactory=t};Xe.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Xe.prototype.computePolygons=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Xe.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ie("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Xe.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new St,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Xe.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Xe.prototype.buildMaximalEdgeRings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Fe(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Xe.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Xe.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Xe.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;c.contains(r)&&st.isPointInRing(i,l.getCoordinates())&&(f=!0),f&&(null===o||a.contains(c))&&(o=u)}return o},Xe.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Xe.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];He.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new St,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Ze=function(){};Ze.prototype.getBounds=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ye=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Ye.prototype.getItem=function(){return this._item},Ye.prototype.getBounds=function(){return this._bounds},Ye.prototype.interfaces_=function(){return[Ze,e]},Ye.prototype.getClass=function(){return Ye};var Qe=function(){this._size=null,this._items=null,this._size=0,this._items=new St,this._items.add(null)};Qe.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Qe.prototype.size=function(){return this._size},Qe.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Qe.prototype.clear=function(){this._size=0,this._items.clear()},Qe.prototype.isEmpty=function(){return 0===this._size},Qe.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Qe.prototype.interfaces_=function(){return[]},Qe.prototype.getClass=function(){return Qe};var Ke=function(){};Ke.prototype.visitItem=function(t){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Je=function(){};Je.prototype.insert=function(t,e){},Je.prototype.remove=function(t,e){},Je.prototype.query=function(){},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je};var $e=function(){if(this._childBoundables=new St,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},tn={serialVersionUID:{configurable:!0}};$e.prototype.getLevel=function(){return this._level},$e.prototype.size=function(){return this._childBoundables.size()},$e.prototype.getChildBoundables=function(){return this._childBoundables},$e.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},$e.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},$e.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},$e.prototype.interfaces_=function(){return[Ze,e]},$e.prototype.getClass=function(){return $e},tn.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties($e,tn);var en=function(){};en.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},en.min=function(t){return en.sort(t),t.get(0)},en.sort=function(t,e){var n=t.toArray();e?zt.sort(n,e):zt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},en.singletonList=function(t){var e=new St;return e.add(t),e};var nn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};nn.prototype.expandToQueue=function(t,e){var n=nn.isComposite(this._boundable1),r=nn.isComposite(this._boundable2);if(n&&r)return nn.area(this._boundable1)>nn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},nn.prototype.isLeaves=function(){return!(nn.isComposite(this._boundable1)||nn.isComposite(this._boundable2))},nn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},nn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new nn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},nn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},nn.prototype.getDistance=function(){return this._distance},nn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},nn.prototype.interfaces_=function(){return[b]},nn.prototype.getClass=function(){return nn},nn.area=function(t){return t.getBounds().getArea()},nn.isComposite=function(t){return t instanceof $e};var rn=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new St,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},on={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};rn.prototype.getNodeCapacity=function(){return this._nodeCapacity},rn.prototype.lastNode=function(t){return t.get(t.size()-1)},rn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof $e?t+=this.size(n):n instanceof Ye&&(t+=1)}return t}},rn.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ye&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},rn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new St:t}if(1===arguments.length){for(var e=arguments[0],n=new St,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof $e){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Ye?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},rn.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ye(t,e))},rn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new St;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof $e?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof Ye),-1===n&&i.add(a))}return null}},rn.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new St;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(I(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof $e)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof $e?this.query(i,u,o):u instanceof Ye?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(I(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof $e)for(var l=arguments[0],c=arguments[2],f=arguments[1].getChildBoundables(),p=0;p<f.size();p++){var h=f.get(p);this.getIntersectsOp().intersects(h.getBounds(),l)&&(h instanceof $e?this.query(l,h,c):h instanceof Ye?c.add(h.getItem()):et.shouldNeverReachHere())}},rn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},rn.prototype.getRoot=function(){return this.build(),this._root},rn.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof $e&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},rn.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},rn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof $e){var r=this.depth(n);r>t&&(t=r)}}return t+1}},rn.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new St;n.add(this.createNode(e));var r=new St(t);en.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},rn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},rn.prototype.interfaces_=function(){return[e]},rn.prototype.getClass=function(){return rn},rn.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},on.IntersectsOp.get=function(){return an},on.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},on.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(rn,on);var an=function(){},sn=function(){};sn.prototype.distance=function(t,e){},sn.prototype.interfaces_=function(){return[]},sn.prototype.getClass=function(){return sn};var un=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new St,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new ln(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new St;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(I(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof $e){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(I(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof $e){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new St(t);en.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(I(arguments[0],sn)){var t=arguments[0],e=new nn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof nn){var r=arguments[0];return this.nearestNeighbour(r,m.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&I(arguments[1],sn)){var i=arguments[0],o=arguments[1],a=new nn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof nn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=null,c=new Qe;for(c.add(s);!c.isEmpty()&&u>0;){var f=c.poll(),p=f.getDistance();if(p>=u)break;f.isLeaves()?(u=p,l=f):f.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[2],d=new Ye(arguments[0],arguments[1]),g=new nn(this.getRoot(),d,h);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Je,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return ln},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(rn),ln=function(t){var e=function(){var e=arguments[0];t.call(this,e)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new H(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($e),cn=function(){};cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn},cn.relativeSign=function(t,e){return t<e?-1:t>e?1:0},cn.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=cn.relativeSign(e.x,n.x),i=cn.relativeSign(e.y,n.y);switch(t){case 0:return cn.compareValue(r,i);case 1:return cn.compareValue(i,r);case 2:return cn.compareValue(i,-r);case 3:return cn.compareValue(-r,i);case 4:return cn.compareValue(-r,-i);case 5:return cn.compareValue(-i,-r);case 6:return cn.compareValue(-i,r);case 7:return cn.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},cn.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var fn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new E(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};fn.prototype.getCoordinate=function(){return this.coord},fn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},fn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:cn.compare(this._segmentOctant,this.coord,e.coord)},fn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},fn.prototype.isInterior=function(){return this._isInterior},fn.prototype.interfaces_=function(){return[b]},fn.prototype.getClass=function(){return fn};var pn=function(){this._nodeMap=new f,this._edge=null;var t=arguments[0];this._edge=t};pn.prototype.getSplitCoordinates=function(){var t=new kt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},pn.prototype.addCollapsedNodes=function(){var t=new St;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},pn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},pn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new R(e+1))}},pn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new E(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new E(e.coord))},pn.prototype.iterator=function(){return this._nodeMap.values().iterator()},pn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},pn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},pn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new R(e[0])),r=i}},pn.prototype.getEdge=function(){return this._edge},pn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},pn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new E(e.coord)),new yn(o,this._edge.getData())},pn.prototype.add=function(t,e){var n=new fn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},pn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+i)},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof E&&arguments[1]instanceof E){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new v("Cannot compute the octant for two identical points "+i);return hn.octant(a,s)}};var dn=function(){};dn.prototype.getCoordinates=function(){},dn.prototype.size=function(){},dn.prototype.getCoordinate=function(t){},dn.prototype.isClosed=function(){},dn.prototype.setData=function(t){},dn.prototype.getData=function(){},dn.prototype.interfaces_=function(){return[]},dn.prototype.getClass=function(){return dn};var gn=function(){};gn.prototype.addIntersection=function(t,e){},gn.prototype.interfaces_=function(){return[dn]},gn.prototype.getClass=function(){return gn};var yn=function(){this._nodeList=new pn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};yn.prototype.getCoordinates=function(){return this._pts},yn.prototype.size=function(){return this._pts.length},yn.prototype.getCoordinate=function(t){return this._pts[t]},yn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},yn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},yn.prototype.setData=function(t){this._data=t},yn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},yn.prototype.getData=function(){return this._data},yn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new E(arguments[0].getIntersection(r));this.addIntersection(i,n)}},yn.prototype.toString=function(){return J.toLineString(new ce(this._pts))},yn.prototype.getNodeList=function(){return this._nodeList},yn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},yn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},yn.prototype.interfaces_=function(){return[gn]},yn.prototype.getClass=function(){return yn},yn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new St;return yn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var An=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new E,this.p1=new E;else if(1===arguments.length){var t=arguments[0];this.p0=new E(t.p0),this.p1=new E(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new E(e,n),this.p1=new E(r,i)}},vn={serialVersionUID:{configurable:!0}};An.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},An.prototype.orientationIndex=function(){if(arguments[0]instanceof An){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof E){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},An.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},An.prototype.isVertical=function(){return this.p0.x===this.p1.x},An.prototype.equals=function(t){if(!(t instanceof An))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},An.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},An.prototype.project=function(){if(arguments[0]instanceof E){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new E(t);var e=this.projectionFactor(t),n=new E;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof An){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new An(a,s)}},An.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},An.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},An.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},An.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},An.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},An.prototype.midPoint=function(){return An.midPoint(this.p0,this.p1)},An.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?m.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},An.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=m.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},An.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},An.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},An.prototype.getLength=function(){return this.p0.distance(this.p1)},An.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},An.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},An.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},An.prototype.lineIntersection=function(t){try{return W.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof G))throw t}return null},An.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},An.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new E(n-u,r+s)},An.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},An.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||m.isNaN(e))&&(e=1),e},An.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},An.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},An.prototype.distance=function(){if(arguments[0]instanceof An){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof E){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},An.prototype.pointAlong=function(t){var e=new E;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},An.prototype.hashCode=function(){var t=m.doubleToLongBits(this.p0.x);t^=31*m.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=m.doubleToLongBits(this.p1.x);return n^=31*m.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},An.prototype.interfaces_=function(){return[b,e]},An.prototype.getClass=function(){return An},An.midPoint=function(t,e){return new E((t.x+e.x)/2,(t.y+e.y)/2)},vn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(An,vn);var mn=function(){this.tempEnv1=new H,this.tempEnv2=new H,this._overlapSeg1=new An,this._overlapSeg2=new An};mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var _n=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};_n.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},_n.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},_n.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},_n.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},_n.prototype.setId=function(t){this._id=t},_n.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},_n.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new H(t,e)}return this._env},_n.prototype.getEndIndex=function(){return this._end},_n.prototype.getStartIndex=function(){return this._start},_n.prototype.getContext=function(){return this._context},_n.prototype.getId=function(){return this._id},_n.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),f=Math.trunc((r+i)/2);t<c&&(r<f&&this.computeOverlapsInternal(t,c,n,r,f,o),f<i&&this.computeOverlapsInternal(t,c,n,f,i,o)),c<e&&(r<f&&this.computeOverlapsInternal(c,e,n,r,f,o),f<i&&this.computeOverlapsInternal(c,e,n,f,i,o))},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var bn=function(){};bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn},bn.getChainStartIndices=function(t){var e=0,n=new St;n.add(new R(e));do{var r=bn.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return bn.toIntArray(n)},bn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Ue.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Ue.quadrant(t[i-1],t[i])===r);)i++;return i-1},bn.getChains=function(){if(1===arguments.length){var t=arguments[0];return bn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new St,i=bn.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new _n(e,i[o],i[o+1],n);r.add(a)}return r}},bn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var xn=function(){};xn.prototype.computeNodes=function(t){},xn.prototype.getNodedSubstrings=function(){},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn};var wn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};wn.prototype.setSegmentIntersector=function(t){this._segInt=t},wn.prototype.interfaces_=function(){return[xn]},wn.prototype.getClass=function(){return wn};var En=function(t){var e=function(e){e?t.call(this,e):t.call(this),this._monoChains=new St,this._index=new un,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return yn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=bn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Sn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Sn},Object.defineProperties(e,n),e}(wn),Sn=function(t){var e=function(){t.call(this),this._si=null;var e=arguments[0];this._si=e};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),Pn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},kn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Pn.prototype.getEndCapStyle=function(){return this._endCapStyle},Pn.prototype.isSingleSided=function(){return this._isSingleSided},Pn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Pn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Pn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Pn.JOIN_ROUND&&(this._quadrantSegments=Pn.DEFAULT_QUADRANT_SEGMENTS)},Pn.prototype.getJoinStyle=function(){return this._joinStyle},Pn.prototype.setJoinStyle=function(t){this._joinStyle=t},Pn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Pn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Pn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Pn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Pn.prototype.getMitreLimit=function(){return this._mitreLimit},Pn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Pn.prototype.setSingleSided=function(t){this._isSingleSided=t},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},kn.CAP_ROUND.get=function(){return 1},kn.CAP_FLAT.get=function(){return 2},kn.CAP_SQUARE.get=function(){return 3},kn.JOIN_ROUND.get=function(){return 1},kn.JOIN_MITRE.get=function(){return 2},kn.JOIN_BEVEL.get=function(){return 3},kn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},kn.DEFAULT_MITRE_LIMIT.get=function(){return 5},kn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Pn,kn);var Cn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Tn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Cn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Cn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Cn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Cn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Cn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Cn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Cn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Cn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Cn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Cn.DELETE;)e++;return e},Cn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Cn.prototype.collapseLine=function(){for(var t=new kt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Cn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.simplify=function(t,e){return new Cn(t).simplify(e)},Tn.INIT.get=function(){return 0},Tn.DELETE.get=function(){return 1},Tn.KEEP.get=function(){return 1},Tn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Cn,Tn);var In=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new St},Mn={COORDINATE_ARRAY_TYPE:{configurable:!0}};In.prototype.getCoordinates=function(){return this._ptList.toArray(In.COORDINATE_ARRAY_TYPE)},In.prototype.setPrecisionModel=function(t){this._precisionModel=t},In.prototype.addPt=function(t){var e=new E(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},In.prototype.revere=function(){},In.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},In.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},In.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},In.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new E(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},In.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},Mn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(In,Mn);var On=function(){},Ln={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.toDegrees=function(t){return 180*t/Math.PI},On.normalize=function(t){for(;t>Math.PI;)t-=On.PI_TIMES_2;for(;t<=-Math.PI;)t+=On.PI_TIMES_2;return t},On.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},On.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},On.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},On.interiorAngle=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n);return Math.abs(i-r)},On.normalizePositive=function(t){if(t<0){for(;t<0;)t+=On.PI_TIMES_2;t>=On.PI_TIMES_2&&(t=0)}else{for(;t>=On.PI_TIMES_2;)t-=On.PI_TIMES_2;t<0&&(t=0)}return t},On.angleBetween=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n);return On.diff(r,i)},On.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},On.toRadians=function(t){return t*Math.PI/180},On.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?On.COUNTERCLOCKWISE:n<0?On.CLOCKWISE:On.NONE},On.angleBetweenOriented=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n)-r;return i<=-Math.PI?i+On.PI_TIMES_2:i>Math.PI?i-On.PI_TIMES_2:i},Ln.PI_TIMES_2.get=function(){return 2*Math.PI},Ln.PI_OVER_2.get=function(){return Math.PI/2},Ln.PI_OVER_4.get=function(){return Math.PI/4},Ln.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Ln.CLOCKWISE.get=function(){return st.CLOCKWISE},Ln.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(On,Ln);var Rn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new An,this._seg1=new An,this._offset0=new An,this._offset1=new An,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Pn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Dn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===ke.LEFT||n===st.COUNTERCLOCKWISE&&this._side===ke.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rn.prototype.addLineEndCap=function(t,e){var n=new An(t,e),r=new An;this.computeOffsetSegment(n,ke.LEFT,this._distance,r);var i=new An;this.computeOffsetSegment(n,ke.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Pn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Pn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Pn.CAP_SQUARE:var u=new E;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new E(r.p1.x+u.x,r.p1.y+u.y),c=new E(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Rn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=W.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof G))throw t;o=new E(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Rn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===st.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Rn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Pn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Pn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rn.prototype.createSquare=function(t){this._segList.addPt(new E(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new E(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=On.angle(i,this._seg0.p0),a=On.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=On.normalize(o+a),u=On.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),f=i.x+l*Math.cos(u),p=i.y+l*Math.sin(u),h=new E(f,p),d=new An(i,h),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===ke.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Rn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===ke.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Rn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new E;l<a;){var f=e+o*l;c.x=t.x+i*Math.cos(f),c.y=t.y+i*Math.sin(f),this._segList.addPt(c),l+=u}},Rn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new E((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new E((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rn.prototype.createCircle=function(t){var e=new E(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new In,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Pn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Pn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Rn.prototype.closeRing=function(){this._segList.closeRing()},Rn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Dn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rn,Dn);var Nn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Nn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Ct.reverse(o),o},Nn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],ke.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Cn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],ke.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},Nn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===ke.RIGHT&&(r=-r);var i=Cn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Nn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Cn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],ke.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Cn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],ke.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Nn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Pn.CAP_ROUND:e.createCircle(t);break;case Pn.CAP_SQUARE:e.createSquare(t)}},Nn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Nn.prototype.getBufferParameters=function(){return this._bufParams},Nn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Nn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Nn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Nn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],ke.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Cn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],ke.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},Nn.prototype.getSegGen=function(t){return new Rn(this._precisionModel,this._bufParams,t)},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new E(t[n]);return e};var Fn=function(){this._subgraphs=null,this._seg=new An,this._cga=new st;var t=arguments[0];this._subgraphs=t},jn={DepthSegment:{configurable:!0}};Fn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new St,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(I(arguments[2],xt)&&arguments[0]instanceof E&&arguments[1]instanceof qe){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var c=a.getDepth(ke.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(ke.RIGHT));var f=new zn(this._seg,c);s.add(f)}}else if(I(arguments[2],xt)&&arguments[0]instanceof E&&I(arguments[1],xt))for(var p=arguments[0],h=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(p,g,h)}},Fn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:en.min(e)._leftDepth},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},jn.DepthSegment.get=function(){return zn},Object.defineProperties(Fn,jn);var zn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new An(t),this._leftDepth=e};zn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},zn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},zn.prototype.toString=function(){return this._upwardSeg.toString()},zn.prototype.interfaces_=function(){return[b]},zn.prototype.getClass=function(){return zn};var Bn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Bn.prototype.area=function(){return Bn.area(this.p0,this.p1,this.p2)},Bn.prototype.signedArea=function(){return Bn.signedArea(this.p0,this.p1,this.p2)},Bn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return Bn.interpolateZ(t,this.p0,this.p1,this.p2)},Bn.prototype.longestSideLength=function(){return Bn.longestSideLength(this.p0,this.p1,this.p2)},Bn.prototype.isAcute=function(){return Bn.isAcute(this.p0,this.p1,this.p2)},Bn.prototype.circumcentre=function(){return Bn.circumcentre(this.p0,this.p1,this.p2)},Bn.prototype.area3D=function(){return Bn.area3D(this.p0,this.p1,this.p2)},Bn.prototype.centroid=function(){return Bn.centroid(this.p0,this.p1,this.p2)},Bn.prototype.inCentre=function(){return Bn.inCentre(this.p0,this.p1,this.p2)},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Bn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Bn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Bn.det=function(t,e,n,r){return t*r-e*n},Bn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,f=t.x-i,p=t.y-o,h=(l*f-s*p)/c,d=(-u*f+a*p)/c;return e.z+h*(n.z-e.z)+d*(r.z-e.z)},Bn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Bn.isAcute=function(t,e,n){return!!On.isAcute(t,e,n)&&!!On.isAcute(e,n,t)&&!!On.isAcute(n,t,e)},Bn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*Bn.det(o,a,s,u),c=Bn.det(a,o*o+a*a,u,s*s+u*u),f=Bn.det(o,o*o+a*a,s,s*s+u*u);return new E(r-c/l,i+f/l)},Bn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new W(t.x+n/2,t.y+r/2,1),o=new W(t.x-r+n/2,t.y+n+r/2,1);return new W(i,o)},Bn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new E(t.x+i*o,t.y+i*a)},Bn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,f=r*s-i*a,p=l*l+c*c+f*f;return Math.sqrt(p)/2},Bn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new E(r,i)},Bn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new E(s,u)};var Un=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Un.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},Un.prototype.addPolygon=function(t){var e=this._distance,n=ke.LEFT;this._distance<0&&(e=-this._distance,n=ke.RIGHT);var r=t.getExteriorRing(),i=Ct.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,C.EXTERIOR,C.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Ct.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,ke.opposite(n),C.INTERIOR,C.EXTERIOR)}},Un.prototype.isTriangleErodedCompletely=function(t,e){var n=new Bn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Un.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},Un.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new yn(t,new Re(0,C.BOUNDARY,e,n));this._curveList.add(r)},Un.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Un.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<re.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=re.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=ke.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Un.prototype.add=function(t){if(t.isEmpty())return null;t instanceof ee?this.addPolygon(t):t instanceof Kt?this.addLineString(t):t instanceof $t?this.addPoint(t):(t instanceof ne||t instanceof Wt||t instanceof ie||t instanceof qt)&&this.addCollection(t)},Un.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Un.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Vn=function(){};Vn.prototype.locate=function(t){},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn};var Gn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Gn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Gn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof qt?(this._subcollectionIterator=new Gn(t),this._subcollectionIterator.next()):t},Gn.prototype.remove=function(){throw new Error(this.getClass().getName())},Gn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Gn.prototype.interfaces_=function(){return[bt]},Gn.prototype.getClass=function(){return Gn},Gn.isAtomic=function(t){return!(t instanceof qt)};var qn=function(){this._geom=null;var t=arguments[0];this._geom=t};qn.prototype.locate=function(t){return qn.locate(t,this._geom)},qn.prototype.interfaces_=function(){return[Vn]},qn.prototype.getClass=function(){return qn},qn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},qn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!qn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(qn.isPointInRing(t,i))return!1}return!0},qn.containsPoint=function(t,e){if(e instanceof ee)return qn.containsPointInPolygon(t,e);if(e instanceof qt)for(var n=new Gn(e);n.hasNext();){var r=n.next();if(r!==e&&qn.containsPoint(t,r))return!0}return!1},qn.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:qn.containsPoint(t,e)?C.INTERIOR:C.EXTERIOR};var Wn=function(){this._edgeMap=new f,this._edgeList=null,this._ptInAreaLocation=[C.NONE,C.NONE]};Wn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Wn.prototype.propagateSideLabels=function(t){for(var e=C.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,ke.LEFT)!==C.NONE&&(e=r.getLocation(t,ke.LEFT))}if(e===C.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,ke.ON)===C.NONE&&s.setLocation(t,ke.ON,i),s.isArea(t)){var u=s.getLocation(t,ke.LEFT),l=s.getLocation(t,ke.RIGHT);if(l!==C.NONE){if(l!==i)throw new Ie("side location conflict",a.getCoordinate());u===C.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,ke.LEFT)===C.NONE,"found single null side"),s.setLocation(t,ke.RIGHT,i),s.setLocation(t,ke.LEFT,i)}}},Wn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Wn.prototype.print=function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Wn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Wn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,ke.LEFT);et.isTrue(r!==C.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,ke.LEFT),u=a.getLocation(t,ke.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Wn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Wn.prototype.iterator=function(){return this.getEdges().iterator()},Wn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new St(this._edgeMap.values())),this._edgeList},Wn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===C.NONE&&(this._ptInAreaLocation[t]=qn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Wn.prototype.toString=function(){var t=new L;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Wn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Wn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===C.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=C.NONE;if(e[u])l=C.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},Wn.prototype.getDegree=function(){return this._edgeMap.size()},Wn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Hn=function(t){var e=function(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ie("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Ue.isNorthern(i)&&Ue.isNorthern(o)?n:Ue.isNorthern(i)||Ue.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new St;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(ke.LEFT),r=t.getDepth(ke.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ie("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(ke.RIGHT,a),a=u.getDepth(ke.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=C.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=C.INTERIOR;break}if(r.isInResult()){t=C.EXTERIOR;break}}}if(t===C.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===C.INTERIOR):(a.isInResult()&&(i=C.EXTERIOR),s.isInResult()&&(i=C.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Re(C.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==C.INTERIOR&&o!==C.BOUNDARY||this._label.setLocation(i,C.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wn),Xn=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ze(t,new Hn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(We),Zn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Zn.prototype.compareTo=function(t){var e=t;return Zn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Zn.prototype.interfaces_=function(){return[b]},Zn.prototype.getClass=function(){return Zn},Zn.orientation=function(t){return 1===Ct.increasingDirection(t)},Zn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var f=(u+=i)===a,p=(l+=o)===s;if(f&&!p)return-1;if(!f&&p)return 1;if(f&&p)return 0}};var Yn=function(){this._edges=new St,this._ocaMap=new f};Yn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Yn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Yn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Yn.prototype.iterator=function(){return this._edges.iterator()},Yn.prototype.getEdges=function(){return this._edges},Yn.prototype.get=function(t){return this._edges.get(t)},Yn.prototype.findEqualEdge=function(t){var e=new Zn(t.getCoordinates());return this._ocaMap.get(e)},Yn.prototype.add=function(t){this._edges.add(t);var e=new Zn(t.getCoordinates());this._ocaMap.put(e,t)},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Qn=function(){};Qn.prototype.processIntersections=function(t,e,n,r){},Qn.prototype.isDone=function(){},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var Kn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Kn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Kn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Kn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Kn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Kn.prototype.getLineIntersector=function(){return this._li},Kn.prototype.hasProperIntersection=function(){return this._hasProper},Kn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Kn.prototype.hasIntersection=function(){return this._hasIntersection},Kn.prototype.isDone=function(){return!1},Kn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Kn.prototype.interfaces_=function(){return[Qn]},Kn.prototype.getClass=function(){return Kn},Kn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Jn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new E(t),this.segmentIndex=e,this.dist=n};Jn.prototype.getSegmentIndex=function(){return this.segmentIndex},Jn.prototype.getCoordinate=function(){return this.coord},Jn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Jn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Jn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Jn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Jn.prototype.getDistance=function(){return this.dist},Jn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Jn.prototype.interfaces_=function(){return[b]},Jn.prototype.getClass=function(){return Jn};var $n=function(){this._nodeMap=new f,this.edge=null;var t=arguments[0];this.edge=t};$n.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},$n.prototype.iterator=function(){return this._nodeMap.values().iterator()},$n.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},$n.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},$n.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new ir(o,new Re(this.edge._label))},$n.prototype.add=function(t,e,n){var r=new Jn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},$n.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var tr=function(){};tr.prototype.getChainStartIndices=function(t){var e=0,n=new St;n.add(new R(e));do{var r=this.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return tr.toIntArray(n)},tr.prototype.findChainEnd=function(t,e){for(var n=Ue.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Ue.quadrant(t[r-1],t[r])===n;)r++;return r-1},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var er=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new H,this.env2=new H;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new tr;this.startIndex=e.getChainStartIndices(this.pts)};er.prototype.getCoordinates=function(){return this.pts},er.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},er.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},er.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],f=this.pts[o],p=a.pts[s],h=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,f),this.env2.init(p,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,l),g<u&&this.computeIntersectsForChain(i,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},er.prototype.getStartIndexes=function(){return this.startIndex},er.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er};var nr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},rr={NULL_VALUE:{configurable:!0}};nr.prototype.getDepth=function(t,e){return this._depth[t][e]},nr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},nr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==nr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===nr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===nr.NULL_VALUE}},nr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},nr.prototype.getDelta=function(t){return this._depth[t][ke.RIGHT]-this._depth[t][ke.LEFT]},nr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?C.EXTERIOR:C.INTERIOR},nr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},nr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==C.EXTERIOR&&r!==C.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=nr.depthAtLocation(r):this._depth[e][n]+=nr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===C.INTERIOR&&this._depth[i][o]++}},nr.prototype.interfaces_=function(){return[]},nr.prototype.getClass=function(){return nr},nr.depthAtLocation=function(t){return t===C.EXTERIOR?0:t===C.INTERIOR?1:nr.NULL_VALUE},rr.NULL_VALUE.get=function(){return-1},Object.defineProperties(nr,rr);var ir=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new $n(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new nr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Re.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new er(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new H;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new E(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new L;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,ke.ON),e.getLocation(1,ke.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,ke.LEFT),e.getLocation(1,ke.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,ke.RIGHT),e.getLocation(1,ke.RIGHT),2))},e}(je),or=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Yn,this._bufParams=t||null};or.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},or.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip(),n.merge(r);var i=or.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(or.depthDelta(t.getLabel()))},or.prototype.buildSubgraphs=function(t,e){for(var n=new St,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Fn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},or.prototype.createSubgraphs=function(t){for(var e=new St,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Oe;i.create(r),e.add(i)}}return en.sort(e,en.reverseOrder()),e},or.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},or.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new En,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Kn(n)),e},or.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Nn(n,this._bufParams),i=new Un(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new He(new Xn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Xe(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},or.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new ir(i.getCoordinates(),new Re(a));this.insertUniqueEdge(s)}}},or.prototype.setNoder=function(t){this._workingNoder=t},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.depthDelta=function(t){var e=t.getLocation(0,ke.LEFT),n=t.getLocation(0,ke.RIGHT);return e===C.INTERIOR&&n===C.EXTERIOR?1:e===C.EXTERIOR&&n===C.INTERIOR?-1:0},or.convertSegStrings=function(t){for(var e=new me,n=new St;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ar=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ar.prototype.rescale=function(){if(I(arguments[0],_t))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}},ar.prototype.scale=function(){if(I(arguments[0],_t)){for(var t=arguments[0],e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new yn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new E(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Ct.removeRepeatedPoints(o)}},ar.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ar.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ar.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ar.prototype.interfaces_=function(){return[xn]},ar.prototype.getClass=function(){return ar};var sr=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ur={fact:{configurable:!0}};sr.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},sr.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],f=arguments[1],p=arguments[2],h=arguments[3];if(c===p&&f===h)return null;var d=c.getCoordinates()[f],g=c.getCoordinates()[f+1],y=p.getCoordinates()[h],A=p.getCoordinates()[h+1];if(this._li.computeIntersection(d,g,y,A),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,A)))throw new $("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+A)}},sr.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},sr.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},sr.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},sr.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+sr.fact.createLineString([t,e,n]))},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.fact.get=function(){return new me},Object.defineProperties(sr,ur);var lr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new E(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new E,this._p1Scaled=new E),this.initCorners(this._pt)},cr={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};lr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},lr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new E(this._maxx,this._maxy),this._corner[1]=new E(this._minx,this._maxy),this._corner[2]=new E(this._minx,this._miny),this._corner[3]=new E(this._maxx,this._miny)},lr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},lr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},lr.prototype.getCoordinate=function(){return this._originalPt},lr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},lr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=lr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new H(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},lr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},lr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},lr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},cr.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(lr,cr);var fr=function(){this.tempEnv1=new H,this.selectedSegment=new An};fr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr};var pr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};pr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new dr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ke]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},pr.prototype.interfaces_=function(){return[]},pr.prototype.getClass=function(){return pr},hr.HotPixelSnapAction.get=function(){return dr},Object.defineProperties(pr,hr);var dr=function(t){var e=function(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fr),gr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new St};gr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},gr.prototype.isDone=function(){return!1},gr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},gr.prototype.interfaces_=function(){return[Qn]},gr.prototype.getClass=function(){return gr};var yr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};yr.prototype.checkCorrectness=function(t){var e=yn.getNodedSubstrings(t),n=new sr(e);try{n.checkValid()}catch(t){if(!(t instanceof V))throw t;t.printStackTrace()}},yr.prototype.getNodedSubstrings=function(){return yn.getNodedSubstrings(this._nodedSegStrings)},yr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},yr.prototype.findInteriorIntersections=function(t,e){var n=new gr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},yr.prototype.computeVertexSnaps=function(){if(I(arguments[0],_t))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof yn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new lr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},yr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new En,this._pointSnapper=new pr(this._noder.getIndex()),this.snapRound(t,this._li)},yr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new lr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},yr.prototype.interfaces_=function(){return[xn]},yr.prototype.getClass=function(){return yr};var Ar=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Pn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},vr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ar.prototype.bufferFixedPrecision=function(t){var e=new ar(new yr(new ge(1)),t.getScale()),n=new or(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Ar.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Ar.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ie))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Ar.precisionScaleFactor(this._argGeom,this._distance,n),i=new ge(r);this.bufferFixedPrecision(i)}},Ar.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ge.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Ar.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Ar.prototype.bufferOriginalPrecision=function(){try{var t=new or(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},Ar.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Ar.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new Ar(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new Ar(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Pn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new Ar(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new Ar(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},Ar.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=M.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},vr.CAP_ROUND.get=function(){return Pn.CAP_ROUND},vr.CAP_BUTT.get=function(){return Pn.CAP_FLAT},vr.CAP_FLAT.get=function(){return Pn.CAP_FLAT},vr.CAP_SQUARE.get=function(){return Pn.CAP_SQUARE},vr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ar,vr);var mr=function(){this._pt=[new E,new E],this._distance=m.NaN,this._isNull=!0};mr.prototype.getCoordinates=function(){return this._pt},mr.prototype.getCoordinate=function(t){return this._pt[t]},mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},mr.prototype.getDistance=function(){return this._distance},mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var _r=function(){};_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},_r.computeDistance=function(){if(arguments[2]instanceof mr&&arguments[0]instanceof Kt&&arguments[1]instanceof E)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new An,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof mr&&arguments[0]instanceof ee&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1],u=arguments[2];_r.computeDistance(a.getExteriorRing(),s,u);for(var l=0;l<a.getNumInteriorRing();l++)_r.computeDistance(a.getInteriorRingN(l),s,u)}else if(arguments[2]instanceof mr&&arguments[0]instanceof ct&&arguments[1]instanceof E){var c=arguments[0],f=arguments[1],p=arguments[2];if(c instanceof Kt)_r.computeDistance(c,f,p);else if(c instanceof ee)_r.computeDistance(c,f,p);else if(c instanceof qt)for(var h=c,d=0;d<h.getNumGeometries();d++){var g=h.getGeometryN(d);_r.computeDistance(g,f,p)}else p.setMinimum(c.getCoordinate(),f)}else if(arguments[2]instanceof mr&&arguments[0]instanceof An&&arguments[1]instanceof E){var y=arguments[1],A=arguments[2],v=arguments[0].closestPoint(y);A.setMinimum(v,y)}};var br=function(t){this._maxPtDist=new mr,this._inputGeom=t||null},xr={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};br.prototype.computeMaxMidpointDistance=function(t){var e=new Er(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},br.prototype.computeMaxVertexDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},br.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},br.prototype.getDistancePoints=function(){return this._maxPtDist},br.prototype.interfaces_=function(){return[]},br.prototype.getClass=function(){return br},xr.MaxPointDistanceFilter.get=function(){return wr},xr.MaxMidpointDistanceFilter.get=function(){return Er},Object.defineProperties(br,xr);var wr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};wr.prototype.filter=function(t){this._minPtDist.initialize(),_r.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[ht]},wr.prototype.getClass=function(){return wr};var Er=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};Er.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new E((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),_r.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Er.prototype.isDone=function(){return!1},Er.prototype.isGeometryChanged=function(){return!1},Er.prototype.getMaxPointDistance=function(){return this._maxPtDist},Er.prototype.interfaces_=function(){return[Gt]},Er.prototype.getClass=function(){return Er};var Sr=function(t){this._comps=t||null};Sr.prototype.filter=function(t){t instanceof ee&&this._comps.add(t)},Sr.prototype.interfaces_=function(){return[Vt]},Sr.prototype.getClass=function(){return Sr},Sr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Sr.getPolygons(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof ee?n.add(e):e instanceof qt&&e.apply(new Sr(n)),n}};var Pr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Pr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof re){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Kt&&this._lines.add(t)},Pr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Pr.prototype.interfaces_=function(){return[lt]},Pr.prototype.getClass=function(){return Pr},Pr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Pr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Pr.getLines(e,n))}},Pr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Pr.getLines(t,!1)}if(2===arguments.length){if(I(arguments[0],_t)&&I(arguments[1],_t)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Pr.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new St;return i.apply(new Pr(a,o)),a}if(arguments[0]instanceof ct&&I(arguments[1],_t)){var s=arguments[0],u=arguments[1];return s instanceof Kt?u.add(s):s.apply(new Pr(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&I(arguments[0],_t)&&I(arguments[1],_t)){for(var l=arguments[1],c=arguments[2],f=arguments[0].iterator();f.hasNext();){var p=f.next();Pr.getLines(p,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&I(arguments[1],_t)){var h=arguments[1],d=arguments[2];return arguments[0].apply(new Pr(h,d)),h}}};var kr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};kr.prototype.locateInternal=function(){if(arguments[0]instanceof E&&arguments[1]instanceof ee){var t=arguments[0],e=arguments[1];if(e.isEmpty())return C.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===C.EXTERIOR)return C.EXTERIOR;if(r===C.BOUNDARY)return C.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===C.INTERIOR)return C.EXTERIOR;if(a===C.BOUNDARY)return C.BOUNDARY}return C.INTERIOR}if(arguments[0]instanceof E&&arguments[1]instanceof Kt){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return C.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?st.isOnLine(s,l)?C.INTERIOR:C.EXTERIOR:C.BOUNDARY}if(arguments[0]instanceof E&&arguments[1]instanceof $t){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?C.INTERIOR:C.EXTERIOR}},kr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):C.EXTERIOR},kr.prototype.intersects=function(t,e){return this.locate(t,e)!==C.EXTERIOR},kr.prototype.updateLocationInfo=function(t){t===C.INTERIOR&&(this._isIn=!0),t===C.BOUNDARY&&this._numBoundaries++},kr.prototype.computeLocation=function(t,e){if(e instanceof $t&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Kt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ee)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Wt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ie)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof qt)for(var u=new Gn(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},kr.prototype.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:e instanceof Kt||e instanceof ee?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?C.BOUNDARY:this._numBoundaries>0||this._isIn?C.INTERIOR:C.EXTERIOR)},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr};var Cr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Tr={INSIDE_AREA:{configurable:!0}};Cr.prototype.isInsideArea=function(){return this._segIndex===Cr.INSIDE_AREA},Cr.prototype.getCoordinate=function(){return this._pt},Cr.prototype.getGeometryComponent=function(){return this._component},Cr.prototype.getSegmentIndex=function(){return this._segIndex},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Tr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Cr,Tr);var Ir=function(t){this._pts=t||null};Ir.prototype.filter=function(t){t instanceof $t&&this._pts.add(t)},Ir.prototype.interfaces_=function(){return[Vt]},Ir.prototype.getClass=function(){return Ir},Ir.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof $t?en.singletonList(t):Ir.getPoints(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof qt&&e.apply(new Ir(n)),n}};var Mr=function(){this._locations=null;var t=arguments[0];this._locations=t};Mr.prototype.filter=function(t){(t instanceof $t||t instanceof Kt||t instanceof ee)&&this._locations.add(new Cr(t,0,t.getCoordinate()))},Mr.prototype.interfaces_=function(){return[Vt]},Mr.prototype.getClass=function(){return Mr},Mr.getLocations=function(t){var e=new St;return t.apply(new Mr(e)),e};var Or=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new kr,this._minDistanceLocation=null,this._minDistance=m.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Or.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Sr.getPolygons(this._geom[e]);if(i.size()>0){var o=Mr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&I(arguments[0],xt)&&I(arguments[1],xt)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),f=0;f<s.size();f++)if(this.computeContainmentDistance(c,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Cr&&arguments[1]instanceof ee){var p=arguments[0],h=arguments[1],d=arguments[2],g=p.getCoordinate();if(C.EXTERIOR!==this._ptLocator.locate(g,h))return this._minDistance=0,d[0]=p,d[1]=new Cr(h,g),null}},Or.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Or.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Pr.getLines(this._geom[0]),n=Pr.getLines(this._geom[1]),r=Ir.getPoints(this._geom[0]),i=Ir.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Or.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Or.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Or.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Or.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new An(r[o],r[o+1]).closestPoint(i);n[0]=new Cr(t,o,s),n[1]=new Cr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof Kt){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),p=l.getCoordinates(),h=0;h<f.length-1;h++)for(var d=0;d<p.length-1;d++){var g=st.distanceLineLine(f[h],f[h+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new An(f[h],f[h+1]),A=new An(p[d],p[d+1]),v=y.closestPoints(A);c[0]=new Cr(u,h,v[0]),c[1]=new Cr(l,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Or.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Cr(i,0,i.getCoordinate()),n[1]=new Cr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Or.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Or.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.distance=function(t,e){return new Or(t,e).distance()},Or.isWithinDistance=function(t,e,n){return new Or(t,e,n).distance()<=n},Or.nearestPoints=function(t,e){return new Or(t,e).nearestPoints()};var Lr=function(){this._pt=[new E,new E],this._distance=m.NaN,this._isNull=!0};Lr.prototype.getCoordinates=function(){return this._pt},Lr.prototype.getCoordinate=function(t){return this._pt[t]},Lr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Lr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Lr.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Lr.prototype.getDistance=function(){return this._distance},Lr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr};var Rr=function(){};Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.computeDistance=function(){if(arguments[2]instanceof Lr&&arguments[0]instanceof Kt&&arguments[1]instanceof E)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new An,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof ee&&arguments[1]instanceof E){var s=arguments[0],u=arguments[1],l=arguments[2];Rr.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Rr.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof ct&&arguments[1]instanceof E){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof Kt)Rr.computeDistance(f,p,h);else if(f instanceof ee)Rr.computeDistance(f,p,h);else if(f instanceof qt)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Rr.computeDistance(y,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof An&&arguments[1]instanceof E){var A=arguments[1],v=arguments[2],m=arguments[0].closestPoint(A);v.setMinimum(m,A)}};var Dr=function(){this._g0=null,this._g1=null,this._ptDist=new Lr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Nr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dr.prototype.computeOrientedDistance=function(t,e,n){var r=new Fr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new jr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Dr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.distance=function(){if(2===arguments.length)return new Dr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Dr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Nr.MaxPointDistanceFilter.get=function(){return Fr},Nr.MaxDensifiedByFractionDistanceFilter.get=function(){return jr},Object.defineProperties(Dr,Nr);var Fr=function(){this._maxPtDist=new Lr,this._minPtDist=new Lr,this._euclideanDist=new Rr,this._geom=null;var t=arguments[0];this._geom=t};Fr.prototype.filter=function(t){this._minPtDist.initialize(),Rr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Fr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fr.prototype.interfaces_=function(){return[ht]},Fr.prototype.getClass=function(){return Fr};var jr=function(){this._maxPtDist=new Lr,this._minPtDist=new Lr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};jr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,l=new E(s,u);this._minPtDist.initialize(),Rr.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},jr.prototype.isDone=function(){return!1},jr.prototype.isGeometryChanged=function(){return!1},jr.prototype.getMaxPointDistance=function(){return this._maxPtDist},jr.prototype.interfaces_=function(){return[Gt]},jr.prototype.getClass=function(){return jr};var zr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Br={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};zr.prototype.checkMaximumDistance=function(t,e,n){var r=new Dr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},zr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=zr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),zr.VERBOSE&&q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},zr.prototype.checkNegativeValid=function(){if(!(this._input instanceof ee||this._input instanceof ie||this._input instanceof qt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},zr.prototype.getErrorIndicator=function(){return this._errorIndicator},zr.prototype.checkMinimumDistance=function(t,e,n){var r=new Or(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},zr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},zr.prototype.getErrorLocation=function(){return this._errorLocation},zr.prototype.getPolygonLines=function(t){for(var e=new St,n=new Pr(e),r=Sr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},zr.prototype.getErrorMessage=function(){return this._errMsg},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},Br.VERBOSE.get=function(){return!1},Br.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zr,Br);var Ur=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Vr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Ur.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Ur.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Ur.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new H(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new H(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Ur.prototype.checkDistance=function(){var t=new zr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Ur.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Ur.prototype.checkPolygonal=function(){this._result instanceof ee||this._result instanceof ie||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Ur.prototype.getErrorIndicator=function(){return this._errorIndicator},Ur.prototype.getErrorLocation=function(){return this._errorLocation},Ur.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Ur.prototype.report=function(t){if(!Ur.VERBOSE)return null;q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Ur.prototype.getErrorMessage=function(){return this._errorMsg},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.isValidMsg=function(t,e,n){var r=new Ur(t,e,n);return r.isValid()?null:r.getErrorMessage()},Ur.isValid=function(t,e,n){return!!new Ur(t,e,n).isValid()},Vr.VERBOSE.get=function(){return!1},Vr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ur,Vr);var Gr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Gr.prototype.getCoordinates=function(){return this._pts},Gr.prototype.size=function(){return this._pts.length},Gr.prototype.getCoordinate=function(t){return this._pts[t]},Gr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Gr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Gr.prototype.setData=function(t){this._data=t},Gr.prototype.getData=function(){return this._data},Gr.prototype.toString=function(){return J.toLineString(new ce(this._pts))},Gr.prototype.interfaces_=function(){return[dn]},Gr.prototype.getClass=function(){return Gr};var qr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new St,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};qr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},qr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},qr.prototype.getIntersectionSegments=function(){return this._intSegments},qr.prototype.count=function(){return this._intersectionCount},qr.prototype.getIntersections=function(){return this._intersections},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},qr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},qr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},qr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},qr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},qr.prototype.interfaces_=function(){return[Qn]},qr.prototype.getClass=function(){return qr},qr.createAllIntersectionsFinder=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e},qr.createAnyIntersectionFinder=function(t){return new qr(t)},qr.createIntersectionCounter=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Wr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Wr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Wr.prototype.getIntersections=function(){return this._segInt.getIntersections()},Wr.prototype.isValid=function(){return this.execute(),this._isValid},Wr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Wr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new qr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new En;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Wr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ie(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Wr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.computeIntersections=function(t){var e=new Wr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Hr=function t(){this._nv=null;var e=arguments[0];this._nv=new Wr(t.toSegmentStrings(e))};Hr.prototype.checkValid=function(){this._nv.checkValid()},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.toSegmentStrings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Gr(r.getCoordinates(),r))}return e},Hr.checkValid=function(t){new Hr(t).checkValid()};var Xr=function(t){this._mapOp=t};Xr.prototype.map=function(t){for(var e=new St,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr},Xr.map=function(t,e){return new Xr(e).map(t)};var Zr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new St,this._resultLineList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Zr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Zr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Zr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Zr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ii.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Zr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Zr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Zr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Zr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ii.isResultOfOp(r,e)&&e===Ii.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr};var Yr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new St;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Yr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Yr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ii.INTERSECTION)){var r=n.getLabel();Ii.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Yr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr};var Qr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Qr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Qr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof re&&!r.isEmpty()||(n=!1);for(var i=new St,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof re||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new St;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Qr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Qr.prototype.getInputGeometry=function(){return this._inputGeom},Qr.prototype.transformMultiLineString=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Qr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Qr.prototype.transformMultiPoint=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qr.prototype.transformMultiPolygon=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qr.prototype.copy=function(t){return t.copy()},Qr.prototype.transformGeometryCollection=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},Qr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $t)return this.transformPoint(t,null);if(t instanceof ne)return this.transformMultiPoint(t,null);if(t instanceof re)return this.transformLinearRing(t,null);if(t instanceof Kt)return this.transformLineString(t,null);if(t instanceof Wt)return this.transformMultiLineString(t,null);if(t instanceof ee)return this.transformPolygon(t,null);if(t instanceof ie)return this.transformMultiPolygon(t,null);if(t instanceof qt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},Qr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr};var Kr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new An,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Kt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Kr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new E(o)),0===r&&this._isClosed&&t.set(t.size()-1,new E(o)))}},Kr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Kr.prototype.snapTo=function(t){var e=new kt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Kr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new E(i),!1)}},Kr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=m.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Kr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},Kr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Jr=function(t){this._srcGeom=t||null},$r={SNAP_PRECISION_FACTOR:{configurable:!0}};Jr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new ni(e,n).transform(this._srcGeom)},Jr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new ni(t,n,!0).transform(this._srcGeom),i=r;return e&&I(i,te)&&(i=r.buffer(0)),i},Jr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Jr.prototype.extractTargetCoordinates=function(t){for(var e=new h,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Jr.prototype.computeMinimumSegmentLength=function(t){for(var e=m.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Jr(t);r[0]=i.snapTo(e,n);var o=new Jr(e);return r[1]=o.snapTo(r[0],n),r},Jr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Jr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ge.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Jr.computeOverlaySnapTolerance(i),Jr.computeOverlaySnapTolerance(o))}},Jr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Jr.SNAP_PRECISION_FACTOR},Jr.snapToSelf=function(t,e,n){return new Jr(t).snapToSelf(e,n)},$r.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Jr,$r);var ti,ei,ni=(ei=function(t,e,n){ti.call(this),this._snapTolerance=t||null,this._snapPts=e||null,this._isSelfSnap=void 0!==n&&n},(ti=Qr)&&(ei.__proto__=ti),ei.prototype=Object.create(ti&&ti.prototype),ei.prototype.constructor=ei,ei.prototype.snapLine=function(t,e){var n=new Kr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},ei.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},ei.prototype.interfaces_=function(){return[]},ei.prototype.getClass=function(){return ei},ei),ri=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ri.prototype.getCommon=function(){return m.longBitsToDouble(this._commonBits)},ri.prototype.add=function(t){var e=m.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=ri.signExpBits(this._commonBits),this._isFirst=!1,null):ri.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ri.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=ri.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ri.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=m.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+m.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},ri.prototype.interfaces_=function(){return[]},ri.prototype.getClass=function(){return ri},ri.getBit=function(t,e){return 0!=(t&1<<e)?1:0},ri.signExpBits=function(t){return t>>52},ri.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},ri.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(ri.getBit(t,r)!==ri.getBit(e,r))return n;n++}return 52};var ii=function(){this._commonCoord=null,this._ccFilter=new ai},oi={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ii.prototype.addCommonBits=function(t){var e=new si(this._commonCoord);t.apply(e),t.geometryChanged()},ii.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new E(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new si(e);return t.apply(n),t.geometryChanged(),t},ii.prototype.getCommonCoordinate=function(){return this._commonCoord},ii.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},oi.CommonCoordinateFilter.get=function(){return ai},oi.Translater.get=function(){return si},Object.defineProperties(ii,oi);var ai=function(){this._commonBitsX=new ri,this._commonBitsY=new ri};ai.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ai.prototype.getCommonCoordinate=function(){return new E(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ai.prototype.interfaces_=function(){return[ht]},ai.prototype.getClass=function(){return ai};var si=function(){this.trans=null;var t=arguments[0];this.trans=t};si.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},si.prototype.isDone=function(){return!1},si.prototype.isGeometryChanged=function(){return!0},si.prototype.interfaces_=function(){return[Gt]},si.prototype.getClass=function(){return si};var ui=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ui.prototype.selfSnap=function(t){return new Jr(t).snapTo(t,this._snapTolerance)},ui.prototype.removeCommonBits=function(t){this._cbr=new ii,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ui.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ui.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ii.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ui.prototype.checkValid=function(t){t.isValid()||q.out.println("Snapped geometry is invalid")},ui.prototype.computeSnapTolerance=function(){this._snapTolerance=Jr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ui.prototype.snap=function(t){var e=this.removeCommonBits(t);return Jr.snap(e[0],e[1],this._snapTolerance)},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.overlayOp=function(t,e,n){return new ui(t,e).getResultGeometry(n)},ui.union=function(t,e){return ui.overlayOp(t,e,Ii.UNION)},ui.intersection=function(t,e){return ui.overlayOp(t,e,Ii.INTERSECTION)},ui.symDifference=function(t,e){return ui.overlayOp(t,e,Ii.SYMDIFFERENCE)},ui.difference=function(t,e){return ui.overlayOp(t,e,Ii.DIFFERENCE)};var li=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};li.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ii.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;r=t}if(!n)try{e=ui.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?r:t}return e},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.overlayOp=function(t,e,n){return new li(t,e).getResultGeometry(n)},li.union=function(t,e){return li.overlayOp(t,e,Ii.UNION)},li.intersection=function(t,e){return li.overlayOp(t,e,Ii.INTERSECTION)},li.symDifference=function(t,e){return li.overlayOp(t,e,Ii.SYMDIFFERENCE)},li.difference=function(t,e){return li.overlayOp(t,e,Ii.DIFFERENCE)};var ci=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ci.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var fi=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},pi={INSERT:{configurable:!0},DELETE:{configurable:!0}};fi.prototype.isDelete=function(){return this._eventType===fi.DELETE},fi.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},fi.prototype.getObject=function(){return this._obj},fi.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},fi.prototype.getInsertEvent=function(){return this._insertEvent},fi.prototype.isInsert=function(){return this._eventType===fi.INSERT},fi.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},fi.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},fi.prototype.interfaces_=function(){return[b]},fi.prototype.getClass=function(){return fi},pi.INSERT.get=function(){return 1},pi.DELETE.get=function(){return 2},Object.defineProperties(fi,pi);var hi=function(){};hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi};var di=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};di.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(di.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},di.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},di.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},di.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},di.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},di.prototype.hasProperIntersection=function(){return this._hasProper},di.prototype.hasIntersection=function(){return this._hasIntersection},di.prototype.isDone=function(){return this._isDone},di.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},di.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},di.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},di.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var gi=function(t){var e=function(){t.call(this),this.events=new St,this.nOverlaps=null};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){en.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof di&&I(arguments[0],xt)&&I(arguments[1],xt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&I(arguments[0],xt)&&arguments[1]instanceof di){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ci(n,i),a=new fi(e,n.getMinX(i),o);this.events.add(a),this.events.add(new fi(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hi),yi=function(){this._min=m.POSITIVE_INFINITY,this._max=m.NEGATIVE_INFINITY},Ai={NodeComparator:{configurable:!0}};yi.prototype.getMin=function(){return this._min},yi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},yi.prototype.getMax=function(){return this._max},yi.prototype.toString=function(){return J.toLineString(new E(this._min,0),new E(this._max,0))},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},Ai.NodeComparator.get=function(){return vi},Object.defineProperties(yi,Ai);var vi=function(){};vi.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},vi.prototype.interfaces_=function(){return[w]},vi.prototype.getClass=function(){return vi};var mi=function(t){var e=function(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yi),_i=function(t){var e=function(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yi),bi=function(){this._leaves=new St,this._root=null,this._level=0};bi.prototype.buildTree=function(){en.sort(this._leaves,new yi.NodeComparator);for(var t=this._leaves,e=null,n=new St;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},bi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new mi(t,e,n))},bi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},bi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},bi.prototype.printNode=function(t){q.out.println(J.toLineString(new E(t._min,this._level),new E(t._max,this._level)))},bi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},bi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new _i(t.get(n),t.get(n+1));e.add(i)}}},bi.prototype.interfaces_=function(){return[]},bi.prototype.getClass=function(){return bi};var xi=function(){this._items=new St};xi.prototype.visitItem=function(t){this._items.add(t)},xi.prototype.getItems=function(){return this._items},xi.prototype.interfaces_=function(){return[Ke]},xi.prototype.getClass=function(){return xi};var wi=function(){this._index=null;var t=arguments[0];if(!I(t,te))throw new v("Argument must be Polygonal");this._index=new Pi(t)},Ei={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};wi.prototype.locate=function(t){var e=new at(t),n=new Si(e);return this._index.query(t.y,t.y,n),e.getLocation()},wi.prototype.interfaces_=function(){return[Vn]},wi.prototype.getClass=function(){return wi},Ei.SegmentVisitor.get=function(){return Si},Ei.IntervalIndexedGeometry.get=function(){return Pi},Object.defineProperties(wi,Ei);var Si=function(){this._counter=null;var t=arguments[0];this._counter=t};Si.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Si.prototype.interfaces_=function(){return[Ke]},Si.prototype.getClass=function(){return Si};var Pi=function(){this._index=new bi;var t=arguments[0];this.init(t)};Pi.prototype.init=function(t){for(var e=Pr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Pi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new An(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Pi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new xi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi};var ki=function(t){var e=function(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new de,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new kr,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;C.NONE,r.getLocation(t,ke.ON)===C.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new di(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof re||this._parentGeom instanceof ee||this._parentGeom instanceof ie,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new di(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof $t){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,C.INTERIOR)}else if(arguments[0]instanceof E){var e=arguments[0];this.insertPoint(this._argIndex,e,C.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),C.EXTERIOR,C.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,C.INTERIOR,C.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],C.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],C.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ct.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ir(e,new Re(this._argIndex,C.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===C.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Ct.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new ir(r,new Re(this._argIndex,C.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],C.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Re(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new gi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ie&&(this._useBoundaryDeterminationRule=!1),e instanceof ee)this.addPolygon(e);else if(e instanceof Kt)this.addLineString(e);else if(e instanceof $t)this.addPoint(e);else if(e instanceof ne)this.addCollection(e);else if(e instanceof Wt)this.addCollection(e);else if(e instanceof ie)this.addCollection(e);else{if(!(e instanceof qt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return I(this._parentGeom,te)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new wi(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?C.BOUNDARY:C.INTERIOR},e}(He),Ci=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ki(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ki(0,e,r),this._arg[1]=new ki(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ki(0,i,a),this._arg[1]=new ki(1,o,a)}};Ci.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ci.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var Ti=function(){};Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.map=function(){if(arguments[0]instanceof ct&&I(arguments[1],Ti.MapOp)){for(var t=arguments[0],e=arguments[1],n=new St,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(I(arguments[0],_t)&&I(arguments[1],Ti.MapOp)){for(var o=arguments[0],a=arguments[1],s=new St,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},Ti.MapOp=function(){};var Ii=function(t){var e=function(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new kr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Yn,this._resultPolyList=new St,this._resultLineList=new St,this._resultPointList=new St,this._graph=new He(new Xn),this._geomFact=e.getFactory()};return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new St;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==C.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new St,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new St;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Hr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Xe(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Zr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Yr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,ke.RIGHT),i.getLocation(1,ke.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,ke.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,ke.LEFT,r.getLocation(i,ke.LEFT)),et.isTrue(!r.isNull(i,ke.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,ke.RIGHT,r.getLocation(i,ke.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ci);Ii.overlayOp=function(t,e,n){return new Ii(t,e).getResultGeometry(n)},Ii.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ii.createEmptyResult(Ii.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Xr.map(t,{interfaces_:function(){return[Ti.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),li.overlayOp(t,e,Ii.INTERSECTION)},Ii.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ii.createEmptyResult(Ii.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),li.overlayOp(t,e,Ii.SYMDIFFERENCE)},Ii.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ii.INTERSECTION:o=Math.min(r,i);break;case Ii.UNION:o=Math.max(r,i);break;case Ii.DIFFERENCE:o=r;break;case Ii.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ii.createEmptyResult=function(t,e,n,r){var i=null;switch(Ii.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ii.difference=function(t,e){return t.isEmpty()?Ii.createEmptyResult(Ii.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),li.overlayOp(t,e,Ii.DIFFERENCE))},Ii.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ii.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===C.BOUNDARY&&(i=C.INTERIOR),o===C.BOUNDARY&&(o=C.INTERIOR),a){case Ii.INTERSECTION:return i===C.INTERIOR&&o===C.INTERIOR;case Ii.UNION:return i===C.INTERIOR||o===C.INTERIOR;case Ii.DIFFERENCE:return i===C.INTERIOR&&o!==C.INTERIOR;case Ii.SYMDIFFERENCE:return i===C.INTERIOR&&o!==C.INTERIOR||i!==C.INTERIOR&&o===C.INTERIOR}return!1}},Ii.INTERSECTION=1,Ii.UNION=2,Ii.DIFFERENCE=3,Ii.SYMDIFFERENCE=4;var Mi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new kr,this._seg=new An;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Mi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Mi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?C.BOUNDARY:this._ptLocator.locate(t,this._g)},Mi.prototype.extractLinework=function(t){var e=new Oi;t.apply(e);var n=e.getLinework(),r=me.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var Oi=function(){this._linework=null,this._linework=new St};Oi.prototype.getLinework=function(){return this._linework},Oi.prototype.filter=function(t){if(t instanceof ee){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Oi.prototype.interfaces_=function(){return[Vt]},Oi.prototype.getClass=function(){return Oi};var Li=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Li.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Li.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Li.prototype.getPoints=function(t){for(var e=new St,n=Pr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Li.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var f=new E(l-u,c+s);r.add(f)}if(this._doRight){var p=new E(l+u,c-s);r.add(p)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li};var Ri=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new St;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Mi(this._geom[0],this._boundaryDistanceTolerance),new Mi(this._geom[1],this._boundaryDistanceTolerance),new Mi(this._geom[2],this._boundaryDistanceTolerance)]},Di={TOLERANCE:{configurable:!0}};Ri.prototype.reportResult=function(t,e,n){q.out.println("Overlay result invalid - A:"+C.toLocationSymbol(e[0])+" B:"+C.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+C.toLocationSymbol(e[2]))},Ri.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ri.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ri.hasLocation(this._location,C.BOUNDARY)||this.isValidResult(r,this._location)}},Ri.prototype.addTestPts=function(t){var e=new Li(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ri.prototype.isValidResult=function(t,e){var n=Ii.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===C.INTERIOR);return r||this.reportResult(t,e,n),r},Ri.prototype.getInvalidLocation=function(){return this._invalidLocation},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ri.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Jr.computeSizeBasedSnapTolerance(t),Jr.computeSizeBasedSnapTolerance(e))},Ri.isValid=function(t,e,n,r){return new Ri(t,e,r).isValid(n)},Di.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ri,Di);var Ni=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ni.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ni.prototype.combine=function(){for(var t=new St,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.combine=function(){if(1===arguments.length)return new Ni(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ni(Ni.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ni(Ni.createList(n,r,i)).combine()}},Ni.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ni.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new St;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new St;return a.add(r),a.add(i),a.add(o),a}};var Fi=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new St)},ji={STRTREE_NODE_CAPACITY:{configurable:!0}};Fi.prototype.reduceToGeometries=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next(),i=null;I(r,xt)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Fi.prototype.extractByEnvelope=function(t,e,n){for(var r=new St,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Fi.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ni.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Fi.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new un(Fi.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Fi.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Fi.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Fi.getGeometry(e,n),Fi.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Fi.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Fi.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Fi.prototype.unionActual=function(t,e){return Fi.restrictToPolygons(t.union(e))},Fi.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Fi.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new St,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Ni.combine(r)},Fi.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi},Fi.restrictToPolygons=function(t){if(I(t,te))return t;var e=Sr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Fi.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Fi.union=function(t){return new Fi(t).union()},ji.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Fi,ji);var zi=function(){};zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},zi.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ii.createEmptyResult(Ii.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),li.overlayOp(t,e,Ii.UNION)},t.GeoJSONReader=Se,t.GeoJSONWriter=Pe,t.OverlayOp=Ii,t.UnionOp=zi,t.BufferOp=Ar,Object.defineProperty(t,"__esModule",{value:!0})}(t.exports)})),a.register("dumn0",(function(e,n){t(e.exports,"featureEach",(function(){return r})),t(e.exports,"geomEach",(function(){return i}));a("chwG4");function r(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function i(t,e){var n,r,i,o,a,s,u,l,c,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,f))return!1;p++}}})),a.register("chwG4",(function(e,n){t(e.exports,"earthRadius",(function(){return r})),t(e.exports,"feature",(function(){return o})),t(e.exports,"point",(function(){return s})),t(e.exports,"lineString",(function(){return u})),t(e.exports,"featureCollection",(function(){return l})),t(e.exports,"radiansToLength",(function(){return c})),t(e.exports,"lengthToRadians",(function(){return f})),t(e.exports,"isObject",(function(){return h}));a("5qgrd");var r=6371008.8,i={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:1.0936*r};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function u(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function l(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function c(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}function f(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function h(t){return!!t&&t.constructor===Object}})),a.register("kJI5v",(function(e,n){t(e.exports,"geoAzimuthalEquidistant",(function(){return a("beMfU").default}));a("h0uIP"),a("hLSj3"),a("aDxTF"),a("2ZWpG"),a("gcFc4"),a("fHFJq"),a("fBjcj"),a("9ZBGI"),a("ifoJ8"),a("ceHXV"),a("fAN7G"),a("8I3fw"),a("6ZDBF"),a("cI8eJ"),a("beMfU"),a("5qQ49"),a("72erf"),a("1ABP2"),a("3Fpru"),a("gBlF0"),a("l2Yib"),a("lG6SP"),a("j0kxR"),a("63MZf"),a("7KngG"),a("c3shT"),a("5UffJ"),a("eFAPc"),a("94Qlu"),a("35RFk")})),a.register("h0uIP",(function(e,n){t(e.exports,"areaRingSum",(function(){return p})),t(e.exports,"areaStream",(function(){return d}));var r,i,o,s,u,l=a("feado"),c=a("hUxNI"),f=a("1KsV8"),p=(a("94Qlu"),l.default()),h=l.default(),d={point:f.default,lineStart:f.default,lineEnd:f.default,polygonStart:function(){p.reset(),d.lineStart=g,d.lineEnd=y},polygonEnd:function(){var t=+p;h.add(t<0?c.tau+t:t),this.lineStart=this.lineEnd=this.point=f.default},sphere:function(){h.add(c.tau)}};function g(){d.point=A}function y(){v(r,i)}function A(t,e){d.point=v,r=t,i=e,t*=c.radians,e*=c.radians,o=t,s=c.cos(e=e/2+c.quarterPi),u=c.sin(e)}function v(t,e){t*=c.radians,e=(e*=c.radians)/2+c.quarterPi;var n=t-o,r=n>=0?1:-1,i=r*n,a=c.cos(e),l=c.sin(e),f=u*l,h=s*a+f*c.cos(i),d=f*r*c.sin(i);p.add(c.atan2(d,h)),o=t,s=a,u=l}})),a.register("feado",(function(e,n){function r(){return new i}function i(){this.reset()}t(e.exports,"default",(function(){return r})),i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){a(o,t,this.t),a(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function a(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}})),a.register("hUxNI",(function(e,n){t(e.exports,"epsilon",(function(){return r})),t(e.exports,"epsilon2",(function(){return i})),t(e.exports,"pi",(function(){return o})),t(e.exports,"halfPi",(function(){return a})),t(e.exports,"quarterPi",(function(){return s})),t(e.exports,"tau",(function(){return u})),t(e.exports,"degrees",(function(){return l})),t(e.exports,"radians",(function(){return c})),t(e.exports,"abs",(function(){return f})),t(e.exports,"atan",(function(){return p})),t(e.exports,"atan2",(function(){return h})),t(e.exports,"cos",(function(){return d})),t(e.exports,"ceil",(function(){return g})),t(e.exports,"exp",(function(){return y})),t(e.exports,"log",(function(){return A})),t(e.exports,"pow",(function(){return v})),t(e.exports,"sin",(function(){return m})),t(e.exports,"sign",(function(){return _})),t(e.exports,"sqrt",(function(){return b})),t(e.exports,"tan",(function(){return x})),t(e.exports,"acos",(function(){return w})),t(e.exports,"asin",(function(){return E})),t(e.exports,"haversin",(function(){return S}));var r=1e-6,i=1e-12,o=Math.PI,a=o/2,s=o/4,u=2*o,l=180/o,c=o/180,f=Math.abs,p=Math.atan,h=Math.atan2,d=Math.cos,g=Math.ceil,y=Math.exp,A=(Math.floor,Math.log),v=Math.pow,m=Math.sin,_=Math.sign||function(t){return t>0?1:t<0?-1:0},b=Math.sqrt,x=Math.tan;function w(t){return t>1?0:t<-1?o:Math.acos(t)}function E(t){return t>1?a:t<-1?-a:Math.asin(t)}function S(t){return(t=m(t/2))*t}})),a.register("1KsV8",(function(e,n){function r(){}t(e.exports,"default",(function(){return r}))})),a.register("94Qlu",(function(e,n){function r(t,e){t&&o.hasOwnProperty(t.type)&&o[t.type](t,e)}t(e.exports,"default",(function(){return u}));var i={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)r(n[i].geometry,e)}},o={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){a(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)a(n[r],e,0)},Polygon:function(t,e){s(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)s(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)r(n[i],e)}};function a(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function s(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)a(t[n],e,1);e.polygonEnd()}function u(t,e){t&&i.hasOwnProperty(t.type)?i[t.type](t,e):r(t,e)}})),a.register("hLSj3",(function(t,e){var n=a("feado");a("h0uIP"),a("jfrbF"),a("hUxNI"),a("94Qlu"),n.default()})),a.register("jfrbF",(function(e,n){t(e.exports,"spherical",(function(){return i})),t(e.exports,"cartesian",(function(){return o})),t(e.exports,"cartesianDot",(function(){return s})),t(e.exports,"cartesianCross",(function(){return u})),t(e.exports,"cartesianAddInPlace",(function(){return l})),t(e.exports,"cartesianScale",(function(){return c})),t(e.exports,"cartesianNormalizeInPlace",(function(){return f}));var r=a("hUxNI");function i(t){return[r.atan2(t[1],t[0]),r.asin(t[2])]}function o(t){var e=t[0],n=t[1],i=r.cos(n);return[i*r.cos(e),i*r.sin(e),r.sin(n)]}function s(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function u(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function l(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function c(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function f(t){var e=r.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}})),a.register("aDxTF",(function(t,e){var n,r,i,o,s,u,l,c,f,p=a("hUxNI"),h=a("1KsV8"),d=(a("94Qlu"),{sphere:h.default,point:g,lineStart:A,lineEnd:_,polygonStart:function(){d.lineStart=b,d.lineEnd=x},polygonEnd:function(){d.lineStart=A,d.lineEnd=_}});function g(t,e){t*=p.radians,e*=p.radians;var n=p.cos(e);y(n*p.cos(t),n*p.sin(t),p.sin(e))}function y(t,e,a){++n,r+=(t-r)/n,i+=(e-i)/n,o+=(a-o)/n}function A(){d.point=v}function v(t,e){t*=p.radians,e*=p.radians;var n=p.cos(e);l=n*p.cos(t),c=n*p.sin(t),f=p.sin(e),d.point=m,y(l,c,f)}function m(t,e){t*=p.radians,e*=p.radians;var n=p.cos(e),r=n*p.cos(t),i=n*p.sin(t),o=p.sin(e),a=p.atan2(p.sqrt((a=c*o-f*i)*a+(a=f*r-l*o)*a+(a=l*i-c*r)*a),l*r+c*i+f*o);a,a*(l+(l=r)),a*(c+(c=i)),a*(f+(f=o)),y(l,c,f)}function _(){d.point=g}function b(){d.point=w}function x(){E(s,u),d.point=g}function w(t,e){s=t,u=e,t*=p.radians,e*=p.radians,d.point=E;var n=p.cos(e);l=n*p.cos(t),c=n*p.sin(t),f=p.sin(e),y(l,c,f)}function E(t,e){t*=p.radians,e*=p.radians;var n=p.cos(e),r=n*p.cos(t),i=n*p.sin(t),o=p.sin(e),a=c*o-f*i,s=f*r-l*o,u=l*i-c*r,h=p.sqrt(a*a+s*s+u*u),d=p.asin(h),g=h&&-d/h;g*a,g*s,g*u,d,d*(l+(l=r)),d*(c+(c=i)),d*(f+(f=o)),y(l,c,f)}})),a.register("2ZWpG",(function(e,n){t(e.exports,"circleStream",(function(){return o}));var r=a("jfrbF"),i=(a("aq6vQ"),a("hUxNI"));a("eFAPc");function o(t,e,n,o,a,u){if(n){var l=i.cos(e),c=i.sin(e),f=o*n;null==a?(a=e+o*i.tau,u=e-f/2):(a=s(l,a),u=s(l,u),(o>0?a<u:a>u)&&(a+=o*i.tau));for(var p,h=a;o>0?h>u:h<u;h-=f)p=r.spherical([l,-c*i.cos(h),-c*i.sin(h)]),t.point(p[0],p[1])}}function s(t,e){(e=r.cartesian(e))[0]-=t,r.cartesianNormalizeInPlace(e);var n=i.acos(-e[1]);return((-e[2]<0?-n:n)+i.tau-i.epsilon)%i.tau}})),a.register("aq6vQ",(function(e,n){function r(t){return function(){return t}}t(e.exports,"default",(function(){return r}))})),a.register("eFAPc",(function(e,n){t(e.exports,"rotateRadians",(function(){return s})),t(e.exports,"default",(function(){return f}));var r=a("ebJbd"),i=a("hUxNI");function o(t,e){return[t>i.pi?t-i.tau:t<-i.pi?t+i.tau:t,e]}function s(t,e,n){return(t%=i.tau)?e||n?r.default(l(t),c(e,n)):l(t):e||n?c(e,n):o}function u(t){return function(e,n){return[(e+=t)>i.pi?e-i.tau:e<-i.pi?e+i.tau:e,n]}}function l(t){var e=u(t);return e.invert=u(-t),e}function c(t,e){var n=function(t,e){var n=i.cos(e),u=i.cos(t)*n,l=i.sin(t)*n,c=i.sin(e),f=c*r+u*o;return[i.atan2(l*a-f*s,u*r-c*o),i.asin(f*a+l*s)]},r=i.cos(t),o=i.sin(t),a=i.cos(e),s=i.sin(e);return n.invert=function(t,e){var n=i.cos(e),u=i.cos(t)*n,l=i.sin(t)*n,c=i.sin(e),f=c*a-l*s;return[i.atan2(l*a+c*s,u*r+f*o),i.asin(f*r-u*o)]},n}function f(t){var e=function(e){return(e=t(e[0]*i.radians,e[1]*i.radians))[0]*=i.degrees,e[1]*=i.degrees,e};return t=s(t[0]*i.radians,t[1]*i.radians,t.length>2?t[2]*i.radians:0),e.invert=function(e){return(e=t.invert(e[0]*i.radians,e[1]*i.radians))[0]*=i.degrees,e[1]*=i.degrees,e},e}o.invert=o})),a.register("ebJbd",(function(e,n){function r(t,e){var n=function(n,r){return n=t(n,r),e(n[0],n[1])};return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}t(e.exports,"default",(function(){return r}))})),a.register("gcFc4",(function(e,n){t(e.exports,"clipExtent",(function(){return f}));var r=a("hUxNI"),i=a("4POY1"),o=a("6OUCl"),s=a("aMPEQ");a("fdnea");var u=a("2UhY7"),l=1e9,c=-1e9;function f(t,e,n,a){var f=function(r,i){return t<=r&&r<=n&&e<=i&&i<=a},p=function(r,i,o,s){var u=0,l=0;if(null==r||(u=h(r,o))!==(l=h(i,o))||g(r,i)<0^o>0)do{s.point(0===u||3===u?t:n,u>1?a:e)}while((u=(u+o+4)%4)!==l);else s.point(i[0],i[1])},h=function(i,o){return r.abs(i[0]-t)<r.epsilon?o>0?0:3:r.abs(i[0]-n)<r.epsilon?o>0?2:1:r.abs(i[1]-e)<r.epsilon?o>0?1:0:o>0?3:2},d=function(t,e){return g(t.x,e.x)},g=function(t,e){var n=h(t,1),r=h(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]};return function(r){var h,g,y,A,v,m,_,b,x,w,E,S=function(t,e){f(t,e)&&k.point(t,e)},P=function(r,i){var s=f(r,i);if(g&&y.push([r,i]),w)A=r,v=i,m=s,w=!1,s&&(k.lineStart(),k.point(r,i));else if(s&&x)k.point(r,i);else{var u=[_=Math.max(c,Math.min(l,_)),b=Math.max(c,Math.min(l,b))],p=[r=Math.max(c,Math.min(l,r)),i=Math.max(c,Math.min(l,i))];o.default(u,p,t,e,n,a)?(x||(k.lineStart(),k.point(u[0],u[1])),k.point(p[0],p[1]),s||k.lineEnd(),E=!1):s&&(k.lineStart(),k.point(r,i),E=!1)}_=r,b=i,x=s},k=r,C=i.default(),T={point:S,lineStart:function(){T.point=P,g&&g.push(y=[]),w=!0,x=!1,_=b=NaN},lineEnd:function(){h&&(P(A,v),m&&x&&C.rejoin(),h.push(C.result())),T.point=S,x&&k.lineEnd()},polygonStart:function(){k=C,h=[],g=[],E=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=g.length;n<r;++n)for(var i,o,s=g[n],u=1,l=s.length,c=s[0],f=c[0],p=c[1];u<l;++u)i=f,o=p,f=(c=s[u])[0],p=c[1],o<=a?p>a&&(f-i)*(a-o)>(p-o)*(t-i)&&++e:p<=a&&(f-i)*(a-o)<(p-o)*(t-i)&&--e;return e}(),n=E&&e,i=(h=u.default(h)).length;(n||i)&&(r.polygonStart(),n&&(r.lineStart(),p(null,null,1,r),r.lineEnd()),i&&s.default(h,d,e,p,r),r.polygonEnd()),k=r,h=g=y=null}};return T}}})),a.register("4POY1",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("1KsV8");function i(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r.default,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}})),a.register("6OUCl",(function(e,n){function r(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,f=e[0]-s,p=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<l)return;a<c&&(c=a)}else if(p>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>c)return;a>l&&(l=a)}else if(p>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*f,t[1]=u+l*p),c<1&&(e[0]=s+c*f,e[1]=u+c*p),!0}}}}}t(e.exports,"default",(function(){return r}))})),a.register("aMPEQ",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("ijeah");function i(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function o(t,e,n,o,a){var u,l,c=[],f=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,o=t[0],s=t[e];if(r.default(o,s)){for(a.lineStart(),u=0;u<e;++u)a.point((o=t[u])[0],o[1]);a.lineEnd()}else c.push(n=new i(o,t,null,!0)),f.push(n.o=new i(o,null,n,!1)),c.push(n=new i(s,t,null,!1)),f.push(n.o=new i(s,null,n,!0))}})),c.length){for(f.sort(e),s(c),s(f),u=0,l=f.length;u<l;++u)f[u].e=n=!n;for(var p,h,d=c[0];;){for(var g=d,y=!0;g.v;)if((g=g.n)===d)return;p=g.z,a.lineStart();do{if(g.v=g.o.v=!0,g.e){if(y)for(u=0,l=p.length;u<l;++u)a.point((h=p[u])[0],h[1]);else o(g.x,g.n.x,1,a);g=g.n}else{if(y)for(p=g.p.z,u=p.length-1;u>=0;--u)a.point((h=p[u])[0],h[1]);else o(g.x,g.p.x,-1,a);g=g.p}p=(g=g.o).z,y=!y}while(!g.v);a.lineEnd()}}}function s(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}})),a.register("ijeah",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("hUxNI");function i(t,e){return r.abs(t[0]-e[0])<r.epsilon&&r.abs(t[1]-e[1])<r.epsilon}})),a.register("fdnea",(function(e,n){t(e.exports,"merge",(function(){return a("2UhY7").default})),t(e.exports,"range",(function(){return a("dS4rp").default}));a("1VUMO"),a("jrQ4N"),a("4ObC7"),a("kULrJ"),a("58B3U"),a("i1s0G"),a("60Aop"),a("gpNXm"),a("sefXl"),a("ds5Ql"),a("69vHG"),a("gXlLZ"),a("luS4d"),a("4TvYp"),a("2UhY7"),a("63ZG6"),a("gwGrg"),a("d6h62"),a("7NO7Z"),a("dS4rp"),a("dZFRp"),a("1ZqBq"),a("6JXeG"),a("eYy66"),a("2YMX3"),a("TGcVM"),a("7qQW1")})),a.register("1VUMO",(function(e,n){t(e.exports,"default",(function(){return s}));var r=a("jrQ4N"),i=a("4ObC7").default(r.default),o=i.right,s=(i.left,o)})),a.register("jrQ4N",(function(e,n){function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}t(e.exports,"default",(function(){return r}))})),a.register("4ObC7",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("jrQ4N");function i(t){var e;return 1===t.length&&(e=t,t=function(t,n){return r.default(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}})),a.register("kULrJ",(function(t,e){a("gwGrg")})),a.register("gwGrg",(function(e,n){function r(t,e){return[t,e]}t(e.exports,"pair",(function(){return r}))})),a.register("58B3U",(function(t,e){})),a.register("i1s0G",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("TGcVM");function i(t,e){var n=r.default(t,e);return n?Math.sqrt(n):n}})),a.register("TGcVM",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("kPP5j");function i(t,e){var n,i,o=t.length,a=0,s=-1,u=0,l=0;if(null==e)for(;++s<o;)isNaN(n=r.default(t[s]))||(l+=(i=n-u)*(n-(u+=i/++a)));else for(;++s<o;)isNaN(n=r.default(e(t[s],s,t)))||(l+=(i=n-u)*(n-(u+=i/++a)));if(a>1)return l/(a-1)}})),a.register("kPP5j",(function(e,n){function r(t){return null===t?NaN:+t}t(e.exports,"default",(function(){return r}))})),a.register("60Aop",(function(e,n){function r(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}t(e.exports,"default",(function(){return r}))})),a.register("gpNXm",(function(t,e){a("hqn6M"),a("1VUMO"),a("igiW6"),a("60Aop"),a("iUgk2"),a("dS4rp"),a("eYy66"),a("69vHG")})),a.register("hqn6M",(function(e,n){t(e.exports,"slice",(function(){return i})),t(e.exports,"map",(function(){return o}));var r=Array.prototype,i=r.slice,o=r.map})),a.register("igiW6",(function(e,n){function r(t){return function(){return t}}t(e.exports,"default",(function(){return r}))})),a.register("iUgk2",(function(e,n){function r(t){return t}t(e.exports,"default",(function(){return r}))})),a.register("dS4rp",(function(e,n){function r(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}t(e.exports,"default",(function(){return r}))})),a.register("eYy66",(function(e,n){t(e.exports,"tickStep",(function(){return a}));var r=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function a(t,e,n){var a=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),u=a/s;return u>=r?s*=10:u>=i?s*=5:u>=o&&(s*=2),e<t?-s:s}})),a.register("69vHG",(function(e,n){function r(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}t(e.exports,"default",(function(){return r}))})),a.register("sefXl",(function(t,e){a("hqn6M"),a("jrQ4N"),a("kPP5j"),a("7NO7Z")})),a.register("7NO7Z",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("kPP5j");function i(t,e,n){if(null==n&&(n=r.default),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,o=(i-1)*e,a=Math.floor(o),s=+n(t[a],a,t);return s+(+n(t[a+1],a+1,t)-s)*(o-a)}}})),a.register("ds5Ql",(function(t,e){a("i1s0G")})),a.register("gXlLZ",(function(t,e){})),a.register("luS4d",(function(t,e){a("kPP5j")})),a.register("4TvYp",(function(t,e){a("jrQ4N"),a("kPP5j"),a("7NO7Z")})),a.register("2UhY7",(function(e,n){function r(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}t(e.exports,"default",(function(){return r}))})),a.register("63ZG6",(function(e,n){function r(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}t(e.exports,"default",(function(){return r}))})),a.register("d6h62",(function(t,e){})),a.register("dZFRp",(function(t,e){a("jrQ4N")})),a.register("1ZqBq",(function(t,e){})),a.register("6JXeG",(function(t,e){})),a.register("2YMX3",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("63ZG6");function i(t){if(!(a=t.length))return[];for(var e=-1,n=r.default(t,o),i=new Array(n);++e<n;)for(var a,s=-1,u=i[e]=new Array(a);++s<a;)u[s]=t[s][e];return i}function o(t){return t.length}})),a.register("7qQW1",(function(t,e){a("2YMX3")})),a.register("fHFJq",(function(t,e){a("iwzJU"),a("fBjcj"),a("hUxNI")})),a.register("iwzJU",(function(e,n){t(e.exports,"default",(function(){return u}));var r=a("feado"),i=a("jfrbF"),o=a("hUxNI"),s=r.default();function u(t,e){var n=e[0],r=e[1],a=[o.sin(n),-o.cos(n),0],u=0,l=0;s.reset();for(var c=0,f=t.length;c<f;++c)if(h=(p=t[c]).length)for(var p,h,d=p[h-1],g=d[0],y=d[1]/2+o.quarterPi,A=o.sin(y),v=o.cos(y),m=0;m<h;++m,g=b,A=w,v=E,d=_){var _=p[m],b=_[0],x=_[1]/2+o.quarterPi,w=o.sin(x),E=o.cos(x),S=b-g,P=S>=0?1:-1,k=P*S,C=k>o.pi,T=A*w;if(s.add(o.atan2(T*P*o.sin(k),v*E+T*o.cos(k))),u+=C?S+P*o.tau:S,C^g>=n^b>=n){var I=i.cartesianCross(i.cartesian(d),i.cartesian(_));i.cartesianNormalizeInPlace(I);var M=i.cartesianCross(a,I);i.cartesianNormalizeInPlace(M);var O=(C^S>=0?-1:1)*o.asin(M[2]);(r>O||r===O&&(I[0]||I[1]))&&(l+=C^S>=0?1:-1)}}return(u<-o.epsilon||u<o.epsilon&&s<-o.epsilon)^1&l}})),a.register("fBjcj",(function(e,n){t(e.exports,"default",(function(){return s}));var r=a("ceHXV"),i=[null,null],o={type:"LineString",coordinates:i};function s(t,e){return i[0]=t,i[1]=e,r.default(o)}})),a.register("ceHXV",(function(e,n){t(e.exports,"default",(function(){return y}));var r,i,o,s=a("feado"),u=a("hUxNI"),l=a("1KsV8"),c=a("94Qlu"),f=s.default(),p={sphere:l.default,point:l.default,lineStart:function(){p.point=d,p.lineEnd=h},lineEnd:l.default,polygonStart:l.default,polygonEnd:l.default};function h(){p.point=p.lineEnd=l.default}function d(t,e){t*=u.radians,e*=u.radians,r=t,i=u.sin(e),o=u.cos(e),p.point=g}function g(t,e){t*=u.radians,e*=u.radians;var n=u.sin(e),a=u.cos(e),s=u.abs(t-r),l=u.cos(s),c=a*u.sin(s),p=o*n-i*a*l,h=i*n+o*a*l;f.add(u.atan2(u.sqrt(c*c+p*p),h)),r=t,i=n,o=a}function y(t){return f.reset(),c.default(t,p),+f}})),a.register("9ZBGI",(function(t,e){a("fdnea");a("dS4rp"),a("hUxNI")})),a.register("ifoJ8",(function(t,e){a("hUxNI")})),a.register("fAN7G",(function(t,e){a("lN2m8"),a("94Qlu"),a("dsFij"),a("hnBYu"),a("aYjjo"),a("g0FPq"),a("lgcnS"),a("kgpIH")})),a.register("lN2m8",(function(e,n){function r(t){return t}t(e.exports,"default",(function(){return r}))})),a.register("dsFij",(function(e,n){t(e.exports,"default",(function(){return v}));var r,i,o,s,u=a("feado"),l=a("hUxNI"),c=a("1KsV8"),f=u.default(),p=u.default(),h={point:c.default,lineStart:c.default,lineEnd:c.default,polygonStart:function(){h.lineStart=d,h.lineEnd=A},polygonEnd:function(){h.lineStart=h.lineEnd=h.point=c.default,f.add(l.abs(p)),p.reset()},result:function(){var t=f/2;return f.reset(),t}};function d(){h.point=g}function g(t,e){h.point=y,r=o=t,i=s=e}function y(t,e){p.add(s*t-o*e),o=t,s=e}function A(){y(r,i)}var v=h})),a.register("hnBYu",(function(e,n){t(e.exports,"default",(function(){return l}));var r=a("1KsV8"),i=1/0,o=i,s=-i,u=s;var l={point:function(t,e){t<i&&(i=t);t>s&&(s=t);e<o&&(o=e);e>u&&(u=e)},lineStart:r.default,lineEnd:r.default,polygonStart:r.default,polygonEnd:r.default,result:function(){var t=[[i,o],[s,u]];return s=u=-(o=i=1/0),t}}})),a.register("aYjjo",(function(e,n){t(e.exports,"default",(function(){return C}));var r,i,o,s,u=a("hUxNI"),l=0,c=0,f=0,p=0,h=0,d=0,g=0,y=0,A=0,v={point:m,lineStart:_,lineEnd:w,polygonStart:function(){v.lineStart=E,v.lineEnd=S},polygonEnd:function(){v.point=m,v.lineStart=_,v.lineEnd=w},result:function(){var t=A?[g/A,y/A]:d?[p/d,h/d]:f?[l/f,c/f]:[NaN,NaN];return l=c=f=p=h=d=g=y=A=0,t}};function m(t,e){l+=t,c+=e,++f}function _(){v.point=b}function b(t,e){v.point=x,m(o=t,s=e)}function x(t,e){var n=t-o,r=e-s,i=u.sqrt(n*n+r*r);p+=i*(o+t)/2,h+=i*(s+e)/2,d+=i,m(o=t,s=e)}function w(){v.point=m}function E(){v.point=P}function S(){k(r,i)}function P(t,e){v.point=k,m(r=o=t,i=s=e)}function k(t,e){var n=t-o,r=e-s,i=u.sqrt(n*n+r*r);p+=i*(o+t)/2,h+=i*(s+e)/2,d+=i,g+=(i=s*t-o*e)*(o+t),y+=i*(s+e),A+=3*i,m(o=t,s=e)}var C=v})),a.register("g0FPq",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("hUxNI"),i=a("1KsV8");function o(t){this._context=t}o.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,r.tau)}},result:i.default}})),a.register("lgcnS",(function(e,n){t(e.exports,"default",(function(){return y}));var r,i,o,s,u,l=a("feado"),c=a("hUxNI"),f=a("1KsV8"),p=l.default(),h={point:f.default,lineStart:function(){h.point=d},lineEnd:function(){r&&g(i,o),h.point=f.default},polygonStart:function(){r=!0},polygonEnd:function(){r=null},result:function(){var t=+p;return p.reset(),t}};function d(t,e){h.point=g,i=s=t,o=u=e}function g(t,e){s-=t,u-=e,p.add(c.sqrt(s*s+u*u)),s=t,u=e}var y=h})),a.register("kgpIH",(function(e,n){function r(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}t(e.exports,"default",(function(){return r})),r.prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}}})),a.register("8I3fw",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("72erf");function i(){return r.default().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}})),a.register("72erf",(function(e,n){t(e.exports,"default",(function(){return u}));var r=a("hUxNI"),i=a("bgPcS"),o=a("1r60i");function s(t,e){var n=function(t,e){var n=r.sqrt(s-2*a*r.sin(e))/a;return[n*r.sin(t*=a),u-n*r.cos(t)]},i=r.sin(t),a=(i+r.sin(e))/2;if(r.abs(a)<r.epsilon)return o.cylindricalEqualAreaRaw(t);var s=1+i*(2*a-i),u=r.sqrt(s)/a;return n.invert=function(t,e){var n=u-e;return[r.atan2(t,r.abs(n))/a*r.sign(n),r.asin((s-(t*t+n*n)*a*a)/(2*a))]},n}function u(){return i.conicProjection(s).scale(155.424).center([0,33.6442])}})),a.register("bgPcS",(function(e,n){t(e.exports,"conicProjection",(function(){return o}));var r=a("hUxNI"),i=a("lG6SP");function o(t){var e=0,n=r.pi/3,o=i.projectionMutator(t),a=o(e,n);return a.parallels=function(t){return arguments.length?o(e=t[0]*r.radians,n=t[1]*r.radians):[e*r.degrees,n*r.degrees]},a}})),a.register("lG6SP",(function(e,n){t(e.exports,"default",(function(){return g})),t(e.exports,"projectionMutator",(function(){return y}));var r=a("jhVQJ"),i=a("hHtpw"),o=a("gcFc4"),s=a("ebJbd"),u=a("lN2m8"),l=a("hUxNI"),c=a("eFAPc"),f=a("35RFk"),p=a("l0kTU"),h=a("7iGiI"),d=f.transformer({point:function(t,e){this.stream.point(t*l.radians,e*l.radians)}});function g(t){return y((function(){return t}))()}function y(t){var e,n,a,f,g,y,A,v,m,_,b=function(t){return[(t=g(t[0]*l.radians,t[1]*l.radians))[0]*P+n,a-t[1]*P]},x=function(t){return(t=g.invert((t[0]-n)/P,(a-t[1])/P))&&[t[0]*l.degrees,t[1]*l.degrees]},w=function(t,r){return[(t=e(t,r))[0]*P+n,a-t[1]*P]},E=function(){g=s.default(f=c.rotateRadians(M,O,L),e);var t=e(T,I);return n=k-t[0]*P,a=C+t[1]*P,S()},S=function(){return m=_=null,b},P=150,k=480,C=250,T=0,I=0,M=0,O=0,L=0,R=null,D=r.default,N=null,F=u.default,j=.5,z=h.default(w,j);return b.stream=function(t){return m&&_===t?m:m=d(D(f,z(F(_=t))))},b.clipAngle=function(t){return arguments.length?(D=+t?i.default(R=t*l.radians,6*l.radians):(R=null,r.default),S()):R*l.degrees},b.clipExtent=function(t){return arguments.length?(F=null==t?(N=y=A=v=null,u.default):o.clipExtent(N=+t[0][0],y=+t[0][1],A=+t[1][0],v=+t[1][1]),S()):null==N?null:[[N,y],[A,v]]},b.scale=function(t){return arguments.length?(P=+t,E()):P},b.translate=function(t){return arguments.length?(k=+t[0],C=+t[1],E()):[k,C]},b.center=function(t){return arguments.length?(T=t[0]%360*l.radians,I=t[1]%360*l.radians,E()):[T*l.degrees,I*l.degrees]},b.rotate=function(t){return arguments.length?(M=t[0]%360*l.radians,O=t[1]%360*l.radians,L=t.length>2?t[2]%360*l.radians:0,E()):[M*l.degrees,O*l.degrees,L*l.degrees]},b.precision=function(t){return arguments.length?(z=h.default(w,j=t*t),S()):l.sqrt(j)},b.fitExtent=function(t,e){return p.fitExtent(b,t,e)},b.fitSize=function(t,e){return p.fitSize(b,t,e)},function(){return e=t.apply(this,arguments),b.invert=e.invert&&x,E()}}})),a.register("jhVQJ",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("7NCaR"),i=a("hUxNI"),o=r.default((function(){return!0}),(function(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,s){var u=a>0?i.pi:-i.pi,l=i.abs(a-n);i.abs(l-i.pi)<i.epsilon?(t.point(n,r=(r+s)/2>0?i.halfPi:-i.halfPi),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),e=0):o!==u&&l>=i.pi&&(i.abs(n-o)<i.epsilon&&(n-=o*i.epsilon),i.abs(a-u)<i.epsilon&&(a-=u*i.epsilon),r=function(t,e,n,r){var o,a,s=i.sin(t-n);return i.abs(s)>i.epsilon?i.atan((i.sin(e)*(a=i.cos(r))*i.sin(n)-i.sin(r)*(o=i.cos(e))*i.sin(t))/(o*a*s)):(e+r)/2}(n,r,a,s),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=a,r=s),o=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var o;if(null==t)o=n*i.halfPi,r.point(-i.pi,o),r.point(0,o),r.point(i.pi,o),r.point(i.pi,0),r.point(i.pi,-o),r.point(0,-o),r.point(-i.pi,-o),r.point(-i.pi,0),r.point(-i.pi,o);else if(i.abs(t[0]-e[0])>i.epsilon){var a=t[0]<e[0]?i.pi:-i.pi;o=n*a/2,r.point(-a,o),r.point(0,o),r.point(a,o)}else r.point(e[0],e[1])}),[-i.pi,-i.halfPi])})),a.register("7NCaR",(function(e,n){t(e.exports,"default",(function(){return l}));var r=a("4POY1"),i=a("aMPEQ"),o=a("hUxNI"),s=a("iwzJU");a("fdnea");var u=a("2UhY7");function l(t,e,n,o){return function(a,l){var p,h,d,g=function(e,n){var r=a(e,n);t(e=r[0],n=r[1])&&l.point(e,n)},y=function(t,e){var n=a(t,e);x.point(n[0],n[1])},A=function(){k.point=y,x.lineStart()},v=function(){k.point=g,x.lineEnd()},m=function(t,e){d.push([t,e]);var n=a(t,e);S.point(n[0],n[1])},_=function(){S.lineStart(),d=[]},b=function(){m(d[0][0],d[0][1]),S.lineEnd();var t,e,n,r,i=S.clean(),o=E.result(),a=o.length;if(d.pop(),p.push(d),d=null,a)if(1&i){if((e=(n=o[0]).length-1)>0){for(P||(l.polygonStart(),P=!0),l.lineStart(),t=0;t<e;++t)l.point((r=n[t])[0],r[1]);l.lineEnd()}}else a>1&&2&i&&o.push(o.pop().concat(o.shift())),h.push(o.filter(c))},x=e(l),w=a.invert(o[0],o[1]),E=r.default(),S=e(E),P=!1,k={point:g,lineStart:A,lineEnd:v,polygonStart:function(){k.point=m,k.lineStart=_,k.lineEnd=b,h=[],p=[]},polygonEnd:function(){k.point=g,k.lineStart=A,k.lineEnd=v,h=u.default(h);var t=s.default(p,w);h.length?(P||(l.polygonStart(),P=!0),i.default(h,f,t,n,l)):t&&(P||(l.polygonStart(),P=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),P&&(l.polygonEnd(),P=!1),h=p=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}};return k}}function c(t){return t.length>1}function f(t,e){return((t=t.x)[0]<0?t[1]-o.halfPi-o.epsilon:o.halfPi-t[1])-((e=e.x)[0]<0?e[1]-o.halfPi-o.epsilon:o.halfPi-e[1])}})),a.register("hHtpw",(function(e,n){t(e.exports,"default",(function(){return l}));var r=a("jfrbF"),i=a("2ZWpG"),o=a("hUxNI"),s=a("ijeah"),u=a("7NCaR");function l(t,e){var n=function(t,e){return o.cos(t)*o.cos(e)>c},a=function(t,e,n){var i=r.cartesian(t),a=r.cartesian(e),s=[1,0,0],u=r.cartesianCross(i,a),l=r.cartesianDot(u,u),f=u[0],p=l-f*f;if(!p)return!n&&t;var h=c*l/p,d=-c*f/p,g=r.cartesianCross(s,u),y=r.cartesianScale(s,h),A=r.cartesianScale(u,d);r.cartesianAddInPlace(y,A);var v=g,m=r.cartesianDot(y,v),_=r.cartesianDot(v,v),b=m*m-_*(r.cartesianDot(y,y)-1);if(!(b<0)){var x=o.sqrt(b),w=r.cartesianScale(v,(-m-x)/_);if(r.cartesianAddInPlace(w,y),w=r.spherical(w),!n)return w;var E,S=t[0],P=e[0],k=t[1],C=e[1];P<S&&(E=S,S=P,P=E);var T=P-S,I=o.abs(T-o.pi)<o.epsilon;if(!I&&C<k&&(E=k,k=C,C=E),I||T<o.epsilon?I?k+C>0^w[1]<(o.abs(w[0]-S)<o.epsilon?k:C):k<=w[1]&&w[1]<=C:T>o.pi^(S<=w[0]&&w[0]<=P)){var M=r.cartesianScale(v,(-m+x)/_);return r.cartesianAddInPlace(M,y),[w,r.spherical(M)]}}},l=function(e,n){var r=f?t:o.pi-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i},c=o.cos(t),f=c>0,p=o.abs(c)>o.epsilon;return u.default(n,(function(t){var e,r,i,u,c;return{lineStart:function(){u=i=!1,c=1},point:function(h,d){var g,y=[h,d],A=n(h,d),v=f?A?0:l(h,d):A?l(h+(h<0?o.pi:-o.pi),d):0;if(!e&&(u=i=A)&&t.lineStart(),A!==i&&(!(g=a(e,y))||s.default(e,g)||s.default(y,g))&&(y[0]+=o.epsilon,y[1]+=o.epsilon,A=n(y[0],y[1])),A!==i)c=0,A?(t.lineStart(),g=a(y,e),t.point(g[0],g[1])):(g=a(e,y),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(p&&e&&f^A){var m;v&r||!(m=a(y,e,!0))||(c=0,f?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!A||e&&s.default(e,y)||t.point(y[0],y[1]),e=y,i=A,r=v},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return c|(u&&i)<<1}}}),(function(n,r,o,a){i.circleStream(a,t,e,o,n,r)}),f?[0,-t]:[-o.pi,t-o.pi])}})),a.register("35RFk",(function(e,n){function r(t){return function(e){var n=new i;for(var r in t)n[r]=t[r];return n.stream=e,n}}function i(){}t(e.exports,"transformer",(function(){return r})),i.prototype={constructor:i,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}})),a.register("l0kTU",(function(e,n){t(e.exports,"fitExtent",(function(){return o})),t(e.exports,"fitSize",(function(){return s}));var r=a("94Qlu"),i=a("hnBYu");function o(t,e,n){var o=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=s&&t.clipExtent(null),r.default(n,t.stream(i.default));var u=i.default.result(),l=Math.min(o/(u[1][0]-u[0][0]),a/(u[1][1]-u[0][1])),c=+e[0][0]+(o-l*(u[1][0]+u[0][0]))/2,f=+e[0][1]+(a-l*(u[1][1]+u[0][1]))/2;return null!=s&&t.clipExtent(s),t.scale(150*l).translate([c,f])}function s(t,e,n){return o(t,[[0,0],e],n)}})),a.register("7iGiI",(function(e,n){t(e.exports,"default",(function(){return u}));var r=a("jfrbF"),i=a("hUxNI"),o=a("35RFk"),s=i.cos(30*i.radians);function u(t,e){return+e?function(t,e){function n(r,o,a,u,l,c,f,p,h,d,g,y,A,v){var m=f-r,_=p-o,b=m*m+_*_;if(b>4*e&&A--){var x=u+d,w=l+g,E=c+y,S=i.sqrt(x*x+w*w+E*E),P=i.asin(E/=S),k=i.abs(i.abs(E)-1)<i.epsilon||i.abs(a-h)<i.epsilon?(a+h)/2:i.atan2(w,x),C=t(k,P),T=C[0],I=C[1],M=T-r,O=I-o,L=_*M-m*O;(L*L/b>e||i.abs((m*M+_*O)/b-.5)>.3||u*d+l*g+c*y<s)&&(n(r,o,a,u,l,c,T,I,k,x/=S,w/=S,E,A,v),v.point(T,I),n(T,I,k,x,w,E,f,p,h,d,g,y,A,v))}}return function(e){var i,o,a,s,u,l,c,f,p,h,d,g,y=function(n,r){n=t(n,r),e.point(n[0],n[1])},A=function(){f=NaN,w.point=v,e.lineStart()},v=function(i,o){var a=r.cartesian([i,o]),s=t(i,o);n(f,p,c,h,d,g,f=s[0],p=s[1],c=i,h=a[0],d=a[1],g=a[2],16,e),e.point(f,p)},m=function(){w.point=y,e.lineEnd()},_=function(){A(),w.point=b,w.lineEnd=x},b=function(t,e){v(i=t,e),o=f,a=p,s=h,u=d,l=g,w.point=v},x=function(){n(f,p,c,h,d,g,o,a,i,s,u,l,16,e),w.lineEnd=m,m()},w={point:y,lineStart:A,lineEnd:m,polygonStart:function(){e.polygonStart(),w.lineStart=_},polygonEnd:function(){e.polygonEnd(),w.lineStart=A}};return w}}(t,e):function(t){return o.transformer({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}})),a.register("1r60i",(function(e,n){t(e.exports,"cylindricalEqualAreaRaw",(function(){return i}));var r=a("hUxNI");function i(t){var e=function(t,e){return[t*n,r.sin(e)/n]},n=r.cos(t);return e.invert=function(t,e){return[t/n,r.asin(e*n)]},e}})),a.register("6ZDBF",(function(t,e){a("hUxNI"),a("8I3fw"),a("72erf"),a("l0kTU")})),a.register("cI8eJ",(function(t,e){var n=a("hUxNI"),r=a("gTHa6"),i=(a("lG6SP"),r.azimuthalRaw((function(t){return n.sqrt(2/(1+t))})));i.invert=r.azimuthalInvert((function(t){return 2*n.asin(t/2)}))})),a.register("gTHa6",(function(e,n){t(e.exports,"azimuthalRaw",(function(){return i})),t(e.exports,"azimuthalInvert",(function(){return o}));var r=a("hUxNI");function i(t){return function(e,n){var i=r.cos(e),o=r.cos(n),a=t(i*o);return[a*o*r.sin(e),a*r.sin(n)]}}function o(t){return function(e,n){var i=r.sqrt(e*e+n*n),o=t(i),a=r.sin(o),s=r.cos(o);return[r.atan2(e*a,i*s),r.asin(i&&n*a/i)]}}})),a.register("beMfU",(function(e,n){t(e.exports,"default",(function(){return u}));var r=a("hUxNI"),i=a("gTHa6"),o=a("lG6SP"),s=i.azimuthalRaw((function(t){return(t=r.acos(t))&&t/r.sin(t)}));function u(){return o.default(s).scale(79.4188).clipAngle(179.999)}s.invert=i.azimuthalInvert((function(t){return t}))})),a.register("5qQ49",(function(t,e){a("hUxNI"),a("bgPcS"),a("j0kxR")})),a.register("j0kxR",(function(e,n){t(e.exports,"mercatorRaw",(function(){return s})),t(e.exports,"mercatorProjection",(function(){return u}));var r=a("hUxNI"),i=a("eFAPc"),o=a("lG6SP");function s(t,e){return[t,r.log(r.tan((r.halfPi+e)/2))]}function u(t){var e,n,a,u=function(){var o=r.pi*f(),u=l(i.default(l.rotate()).invert([0,0]));return h(null==d?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===s?[[Math.max(u[0]-o,d),e],[Math.min(u[0]+o,n),a]]:[[d,Math.max(u[1]-o,e)],[n,Math.min(u[1]+o,a)]])},l=o.default(t),c=l.center,f=l.scale,p=l.translate,h=l.clipExtent,d=null;return l.scale=function(t){return arguments.length?(f(t),u()):f()},l.translate=function(t){return arguments.length?(p(t),u()):p()},l.center=function(t){return arguments.length?(c(t),u()):c()},l.clipExtent=function(t){return arguments.length?(null==t?d=e=n=a=null:(d=+t[0][0],e=+t[0][1],n=+t[1][0],a=+t[1][1]),u()):null==d?null:[[d,e],[n,a]]},u()}s.invert=function(t,e){return[t,2*r.atan(r.exp(e))-r.halfPi]}})),a.register("1ABP2",(function(t,e){a("hUxNI"),a("bgPcS"),a("3Fpru")})),a.register("3Fpru",(function(e,n){t(e.exports,"equirectangularRaw",(function(){return r}));a("lG6SP");function r(t,e){return[t,e]}r.invert=r})),a.register("gBlF0",(function(t,e){var n=a("hUxNI"),r=a("gTHa6");a("lG6SP");function i(t,e){var r=n.cos(e),i=n.cos(t)*r;return[r*n.sin(t)/i,n.sin(e)/i]}i.invert=r.azimuthalInvert(n.atan)})),a.register("l2Yib",(function(t,e){a("gcFc4"),a("lN2m8"),a("35RFk"),a("l0kTU")})),a.register("63MZf",(function(t,e){a("lG6SP");var n=a("hUxNI");function r(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}r.invert=function(t,e){var r,i=e,o=25;do{var a=i*i,s=a*a;i-=r=(i*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-e)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while(n.abs(r)>n.epsilon&&--o>0);return[t/(.8707+(a=i*i)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),i]}})),a.register("7KngG",(function(t,e){var n=a("hUxNI"),r=a("gTHa6");a("lG6SP");function i(t,e){return[n.cos(e)*n.sin(t),n.sin(e)]}i.invert=r.azimuthalInvert(n.asin)})),a.register("c3shT",(function(t,e){var n=a("hUxNI"),r=a("gTHa6");a("lG6SP");function i(t,e){var r=n.cos(e),i=1+n.cos(t)*r;return[r*n.sin(t)/i,n.sin(e)/i]}i.invert=r.azimuthalInvert((function(t){return 2*n.atan(t)}))})),a.register("5UffJ",(function(t,e){var n=a("hUxNI");a("j0kxR");function r(t,e){return[n.log(n.tan((n.halfPi+e)/2)),-t]}r.invert=function(t,e){return[-e,2*n.atan(n.exp(t))-n.halfPi]}})),a.register("jlhKK",(function(e,i){n(e.exports),t(e.exports,"default",(function(){return l}));var o=a("gJOvW"),s=a("iPbZO"),u=a("dgBT2");var l=function(t,e){var n=u.getGeom(t),i=u.getGeom(e),a=t.properties||{},l=r(o).difference(n.coordinates,i.coordinates);return 0===l.length?null:1===l.length?s.polygon(l[0],a):s.multiPolygon(l,a)}})),a.register("gJOvW",(function(t,e){t.exports,t.exports=function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}},n=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t},r=function(t,e){return t>e?1:t<e?-1:0},i=function(t,e,n){for(var r=new f(null,null),i=r,o=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,null===(e=s).left)break}o.left=e,o=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(s=e.right,e.right=s.left,s.left=e,null===(e=s).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e},o=function(t,e,n,r){var o=new f(t,e);if(null===n)return o.left=o.right=null,o;var a=r(t,(n=i(t,n,r)).key);return a<0?(o.left=n.left,o.right=n,n.left=null):a>=0&&(o.right=n.right,o.left=n,n.right=null),o},a=function(t,e,n){var r=null,o=null;if(e){var a=n((e=i(t,e,n)).key,t);0===a?(r=e.left,o=e.right):a<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}},s=function(t,e,n){return null===e?t:(null===t||((e=i(t.key,e,n)).left=t),e)},u=function(t,e){for(var n=new f(null,null),r=n,i=0;i<t.length;i++)r=r.next=new f(t[i],e[i]);return r.next=null,n.next},l=function(t){for(var e=t,n=[],r=!1,i=new f(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next},c=function(t,e,n){for(var r=new f(null,null),i=r,o=t,a=e;null!==o&&null!==a;)n(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;return null!==o?i.next=o:null!==a&&(i.next=a),r.next},f=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function p(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&p(t.left,o,!1,r,i),t.right&&p(t.right,o,!0,r,i)}}var h,d=((h=function(t){void 0===t&&(t=r),this._root=null,this._size=0,this._comparator=t}).prototype.insert=function(t,e){return this._size++,this._root=o(t,e,this._root,this._comparator)},h.prototype.add=function(t,e){var n=new f(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=i(t,this._root,r),a=r(t,o.key);return 0===a?this._root=o:(a<0?(n.left=o.left,n.right=o,o.left=null):a>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},h.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},h.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=i(t,e,n)).key)?(null===e.left?r=e.right:(r=i(t,e.left,n)).right=e.right,this._size--,r):e},h.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=i(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},h.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},h.prototype.find=function(t){return this._root&&(this._root=i(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},h.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},h.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},h.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},h.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},h.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},h.prototype.min=function(){return this._root?this.minNode(this._root).key:null},h.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},h.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},h.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},h.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},h.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},h.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},h.prototype.clear=function(){return this._root=null,this._size=0,this},h.prototype.toList=function(){return l(this._root)},h.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&A(t,e,0,r-1,i),null===this._root)this._root=g(t,e,0,r),this._size=r;else{var o=c(this.toList(),u(t,e),i);r=this._size+r,this._root=y({head:o},0,r)}return this},h.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(h.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),h.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return p(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},h.prototype.update=function(t,e,n){var r=this._comparator,i=a(t,this._root,r),u=i.left,l=i.right;r(t,e)<0?l=o(e,n,l,r):u=o(e,n,u,r),this._root=s(u,l,r)},h.prototype.split=function(t){return a(t,this._root,this._comparator)},h);function g(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),a=t[o],s=e[o],u=new f(a,s);return u.left=g(t,e,n,o),u.right=g(t,e,o+1,r),u}return null}function y(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=y(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=y(t,i+1,n),a}return null}function A(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var u=t[a];t[a]=t[s],t[s]=u,u=e[a],e[a]=e[s],e[s]=u}A(t,e,n,s,i),A(t,e,s+1,r,i)}}var v=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},m=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var b=_*_,x=function(t,e){if(-_<t&&t<_&&-_<e&&e<_)return 0;var n=t-e;return n*n<b*t*e?0:t<e?-1:1},w=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new E,this.yRounder=new E}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),E=function(){function e(){t(this,e),this.tree=new d,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===x(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===x(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),S=new w,P=function(t,e){return t.x*e.y-t.y*e.x},k=function(t,e){return t.x*e.x+t.y*e.y},C=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=P(r,i);return x(o,0)},T=function(t){return Math.sqrt(k(t,t))},I=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return P(i,r)/T(i)/T(r)},M=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return k(i,r)/T(i)/T(r)},O=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},L=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},R=function(t,e,n,r){if(0===e.x)return L(n,r,t.x);if(0===r.x)return L(t,e,n.x);if(0===e.y)return O(n,r,t.y);if(0===r.y)return O(t,e,n.y);var i=P(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=P(o,e)/i,s=P(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}},D=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:F.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:I(e.point,t.point,i.point),cosine:M(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),u=s.sine,l=s.cosine;return o>=0&&u>=0?a<l?1:a>l?-1:0:o<0&&u<0?a<l?-1:a>l?1:0:u<o?-1:u>o?1:0}}}]),e}(),N=0,F=function(){function e(n,r,i,o){t(this,e),this.id=++N,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n<r){if(s<a&&s<u)return 1;if(s>a&&s>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var f=e.comparePoint(t.rightSE.point);return 0!==f?f:-1}if(n>r){if(a<s&&a<l)return-1;if(a>s&&a>l)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var h=t.comparePoint(e.rightSE.point);return h<0?1:h>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var y=u-a,A=i-n,v=l-s,m=o-r;if(y>A&&v<m)return 1;if(y<A&&v>m)return-1}return i>o?1:i<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=m(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,u=v(e,a)&&0===this.comparePoint(a),l=v(n,i)&&0===t.comparePoint(i),c=v(e,s)&&0===this.comparePoint(s),f=v(n,o)&&0===t.comparePoint(o);if(l&&u)return f&&!c?o:!f&&c?s:null;if(l)return c&&i.x===s.x&&i.y===s.y?null:i;if(u)return f&&o.x===a.x&&o.y===a.y?null:a;if(f&&c)return null;if(f)return o;if(c)return s;var p=R(i,this.vector(),a,t.vector());return null===p?null:v(r,p)?S.round(p.x,p.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new D(t,!0),o=new D(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new e(i,a,this.rings.slice(),this.windings.slice());return D.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),D.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,u=r.rings.length;s<u;s++){var l=r.rings[s],c=r.windings[s],f=n.rings.indexOf(l);-1===f?(n.rings.push(l),n.windings.push(c)):n.windings[f]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],u=e.indexOf(a);-1===u?(e.push(a),n.push(s)):n[u]+=s}for(var l=[],c=[],f=0,p=e.length;f<p;f++)if(0!==n[f]){var h=e[f],d=h.poly;if(-1===c.indexOf(d))if(h.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var g=l.indexOf(h.poly);-1!==g&&l.splice(g,1)}}for(var y=0,A=l.length;y<A;y++){var v=l[y].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(X.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===X.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(X.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,a,s=D.comparePoints(t,n);if(s<0)i=t,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,a=-1}return new e(new D(i,!0),new D(o,!1),[r],[a])}}]),e}(),j=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=S.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,u=n.length;s<u;s++){if("number"!=typeof n[s][0]||"number"!=typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=S.round(n[s][0],n[s][1]);l.x===a.x&&l.y===a.y||(this.segments.push(F.fromRing(a,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),a=l)}o.x===a.x&&o.y===a.y||this.segments.push(F.fromRing(a,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),z=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new j(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new j(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new z(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),U=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,u=o.rightSE,l=[s],c=s.point,f=[];a=s,s=u,l.push(s),s.point!==c;)for(;;){var p=s.getAvailableLinkedEvents();if(0===p.length){var h=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===p.length){u=p[0].otherSE;break}for(var g=null,y=0,A=f.length;y<A;y++)if(f[y].point===s.point){g=y;break}if(null===g){f.push({index:l.length,point:s.point});var v=s.getLeftmostComparator(a);u=p.sort(v)[0].otherSE;break}var m=f.splice(g)[0],_=l.splice(m.index);_.unshift(_[0].otherSE),n.push(new e(_.reverse()))}n.push(new e(l))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==C(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===C(a,t,s)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,f=[],p=l;p!=c;p+=u)f.push([e[p].x,e[p].y]);return f}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];D.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),V=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),G=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new V(i));else{var o=i.enclosingRing();o.poly||e.push(new V(o)),o.poly.addInterior(i)}}return e}}]),e}(),q=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.compare;t(this,e),this.queue=n,this.tree=new d(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var u=null;if(a){var l=a.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!a.isAnEndpoint(l)))for(var c=this._splitSafely(a,l),f=0,p=c.length;f<p;f++)n.push(c[f])}var h=null;if(s){var d=s.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(h=d),!s.isAnEndpoint(d)))for(var g=this._splitSafely(s,d),y=0,A=g.length;y<A;y++)n.push(g[y])}if(null!==u||null!==h){var v=null;v=null===u?h:null===h||D.comparePoints(u,h)<=0?u:h,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var m=e.split(v),_=0,b=m.length;_<b;_++)n.push(m[_])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var x=a.getIntersection(s);if(null!==x){if(!a.isAnEndpoint(x))for(var w=this._splitSafely(a,x),E=0,S=w.length;E<S;E++)n.push(w[E]);if(!s.isAnEndpoint(x))for(var P=this._splitSafely(s,x),k=0,C=P.length;k<C;k++)n.push(P[k])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),W=1e6,H=1e6,X=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){X.type=t,S.reset();for(var r=[new B(e,!0)],i=0,o=n.length;i<o;i++)r.push(new B(n[i],!1));if(X.numMultiPolys=r.length,"difference"===X.type)for(var a=r[0],s=1;s<r.length;)null!==m(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===X.type)for(var u=0,l=r.length;u<l;u++)for(var c=r[u],f=u+1,p=r.length;f<p;f++)if(null===m(c.bbox,r[f].bbox))return[];for(var h=new d(D.compare),g=0,y=r.length;g<y;g++)for(var A=r[g].getSweepEvents(),v=0,_=A.length;v<_;v++)if(h.insert(A[v]),h.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new q(h),x=h.size,w=h.pop();w;){var E=w.key;if(h.size===x){var P=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(P.id," ")+"[".concat(P.leftSE.point.x,", ").concat(P.leftSE.point.y,"] -> ")+"[".concat(P.rightSE.point.x,", ").concat(P.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(h.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>H)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var k=b.process(E),C=0,T=k.length;C<T;C++){var I=k[C];void 0===I.consumedBy&&h.insert(I)}x=h.size,w=h.pop()}S.reset();var M=U.factory(b.segments);return new G(M).getGeom()}}]),e}()),Z=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("union",t,n)},Y=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("intersection",t,n)},Q=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("xor",t,n)},K=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("difference",t,n)};return{union:Z,intersection:Y,xor:Q,difference:K}}()})),a.register("iPbZO",(function(e,n){t(e.exports,"polygon",(function(){return i})),t(e.exports,"multiPolygon",(function(){return o}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}})),a.register("dgBT2",(function(e,n){t(e.exports,"getCoord",(function(){return r})),t(e.exports,"getCoords",(function(){return i})),t(e.exports,"featureOf",(function(){return o})),t(e.exports,"getGeom",(function(){return s})),t(e.exports,"getType",(function(){return u}));a("gUL88");function r(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function i(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function s(t){return"Feature"===t.type?t.geometry:t}function u(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}})),a.register("gUL88",(function(e,n){t(e.exports,"isNumber",(function(){return r}));a("5qgrd");function r(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}})),a.register("h91qW",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return s}));var i=a("dgBT2"),o=a("iRDPh");var s=function(t,e,n){void 0===n&&(n={});var r=i.getCoord(t),a=i.getCoord(e),s=o.degreesToRadians(a[1]-r[1]),u=o.degreesToRadians(a[0]-r[0]),l=o.degreesToRadians(r[1]),c=o.degreesToRadians(a[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(l)*Math.cos(c);return o.radiansToLength(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}})),a.register("iRDPh",(function(e,n){t(e.exports,"radiansToLength",(function(){return o})),t(e.exports,"degreesToRadians",(function(){return s}));a("5qgrd");var r=6371008.8,i={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:r,metres:r,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:3440.069546436285,radians:1,yards:6967335.223679999};function o(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}function s(t){return t%360*Math.PI/180}})),a.register("9yBMj",(function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var o=function(){function t(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,t),i(this,"geoJson",void 0),i(this,"style",void 0),i(this,"original",void 0),i(this,"metadata",void 0),this.geoJson=e,this.style=r,this.original=o,this.metadata=a}var e,o,a;return e=t,(o=[{key:"getCoords",value:function(){return this.geoJson.geometry.coordinates}}])&&r(e.prototype,o),a&&r(e,a),t}();t.exports.default=o})),a.register("hZWkR",(function(t,e){"use strict";function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var i=function(){function t(e,n){var i=n.data,o=n.groundPoint,a=n.nebula,s=n.metadata;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"canceled",void 0),r(this,"data",void 0),r(this,"metadata",void 0),r(this,"groundPoint",void 0),r(this,"nativeEvent",void 0),r(this,"nebula",void 0),this.nativeEvent=e,this.data=i,this.groundPoint=o,this.nebula=a,this.metadata=s}var e,i,o;return e=t,(i=[{key:"stopPropagation",value:function(){this.nativeEvent.stopPropagation(),this.canceled=!0}}])&&n(e.prototype,i),o&&n(e,o),t}();t.exports.default=i})),a.register("eXd8F",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n,r=(n=a("wvaTc"))&&n.__esModule?n:{default:n},i=a("54CLb");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,r,o,a=(e=d,function(){var t,n=f(e);if(c()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function d(t){var e,n=t.getData,r=t.on,o=t.toNebulaFeature;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),h(l(e=a.call(this)),"getData",void 0),h(l(e),"toNebulaFeature",void 0),h(l(e),"id",void 0),h(l(e),"helperLayers",void 0),h(l(e),"usesMapEvents",!1),h(l(e),"enablePicking",!1),h(l(e),"enableSelection",!1),e.id=(0,i.default)(),e.getData=n,e.toNebulaFeature=o,e.helperLayers=[],r&&Object.keys(r).forEach((function(t){return e.on(t,r[t])})),e}return n=d,(r=[{key:"render",value:function(t){return null}}])&&s(n.prototype,r),o&&s(n,o),d}(r.default.EventEmitter);t.exports.default=d})),a.register("wvaTc",(function(t,e){var n,r=a("5qgrd"),i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,t.exports.once=function(t,e){return new Promise((function(n,r){var i=function(n){t.removeListener(e,o),r(n)},o=function(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))};v(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&v(t,"error",e,n)}(t,i,{once:!0})}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var l=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===t?"undefined":r.default(t)))}function f(t){return void 0===t._maxListeners?u.defaultMaxListeners:t._maxListeners}function p(t,e,n,r){var i,o,a,s;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=f(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function g(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):A(i,i.length)}function y(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function A(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===t?"undefined":r.default(t)));t.addEventListener(e,(function r(o){i.once&&t.removeEventListener(e,r),n(o)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},u.prototype.getMaxListeners=function(){return f(this)},u.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var l=u.length,c=A(u,l);for(n=0;n<l;++n)o(c[n],this,e)}return!0},u.prototype.addListener=function(t,e){return p(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return p(this,t,e,!0)},u.prototype.once=function(t,e){return c(e),this.on(t,d(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,d(this,t,e)),this},u.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},u.prototype.listeners=function(t){return g(this,t,!0)},u.prototype.rawListeners=function(t){return g(this,t,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},u.prototype.listenerCount=y,u.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}})),a.register("54CLb",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("9vt12"),i=a("5kEci");var o=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[o+s]=a[s];return e||i.default(a)}})),a.register("9vt12",(function(e,n){t(e.exports,"default",(function(){return o}));var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}})),a.register("5kEci",(function(e,n){t(e.exports,"default",(function(){return o}));for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);var o=function(t,e){var n=e||0,i=r;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")}})),a.register("dRvpn",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n=a("d6f4f"),r=s(a("eXd8F")),i=a("gQ5RH"),o=s(a("16bb2"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,r,a,s,u=(e=g,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function g(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),e=u.call(this,t),n=f(e),i=void 0,(r="deckCache")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e.deckCache=new o.default(t.getData,(function(e){return t.toNebulaFeature(e)})),e.enablePicking=!0,e}return r=g,(a=[{key:"render",value:function(t){t.nebula;var e=[0,0,0,255],r=this.deckCache,o=r.objects,a=r.updateTrigger;return new n.JunctionScatterplotLayer({id:"junctions-".concat(this.id),data:o,opacity:1,fp64:!1,pickable:!0,getPosition:function(t){return t.geoJson.geometry.coordinates},getFillColor:function(t){return(0,i.toDeckColor)(t.style.fillColor)||e},getStrokeColor:function(t){return(0,i.toDeckColor)(t.style.outlineColor)||(0,i.toDeckColor)(t.style.fillColor)||e},getRadius:function(t){return t.style.pointRadiusMeters+t.style.outlineRadiusMeters||1},getInnerRadius:function(t){return t.style.pointRadiusMeters||.5},parameters:{depthTest:!1,blend:!1},updateTriggers:{all:a},nebulaLayer:this})}}])&&l(r.prototype,a),s&&l(r,s),g}(r.default);t.exports.default=g})),a.register("d6f4f",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),Object.defineProperty(t.exports,"ArrowStyles",{enumerable:!0,get:function(){return n.ArrowStyles}}),Object.defineProperty(t.exports,"DEFAULT_ARROWS",{enumerable:!0,get:function(){return n.DEFAULT_ARROWS}}),Object.defineProperty(t.exports,"MAX_ARROWS",{enumerable:!0,get:function(){return n.MAX_ARROWS}}),Object.defineProperty(t.exports,"EditableGeoJsonLayer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t.exports,"EditableH3ClusterLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t.exports,"SelectionLayer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t.exports,"ElevatedEditHandleLayer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t.exports,"PathOutlineLayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t.exports,"PathMarkerLayer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t.exports,"JunctionScatterplotLayer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t.exports,"toDeckColor",{enumerable:!0,get:function(){return f.toDeckColor}});var n=a("8Ei0s"),r=p(a("9P0of")),i=p(a("9Td6e")),o=p(a("ba90z")),s=p(a("azGxt")),u=p(a("g6NgO")),l=p(a("4v7vs")),c=p(a("iIGDa")),f=a("b0r99");function p(t){return t&&t.__esModule?t:{default:t}}})),a.register("8Ei0s",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.MAX_ARROWS=t.exports.DEFAULT_ARROWS=t.exports.ArrowStyles=void 0;t.exports.ArrowStyles={NONE:0,FORWARD:1,BACKWARD:2,BOTH:3};t.exports.DEFAULT_ARROWS=1;t.exports.MAX_ARROWS=3})),a.register("9P0of",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n=a("lJ408"),r=a("8QjBj"),i=s(a("dQUSX")),o=s(a("jelOI"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function g(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=[0,0,0,153],b=[0,0,0,144],x=[0,0,0,255],w=[0,0,144,144],E=[144,144,144,255],S=[144,144,144,144],P=[192,0,0,255],k=[0,0,0,128],C=[124,0,192,255],T=[255,255,255,255],I=32*r.PROJECTED_PIXEL_SIZE_MULTIPLIER,M=n.DrawPolygonMode;function O(t){return t&&"function"==typeof t?function(e){return t(function(t){if(t.__source)return t.__source.object;if(t.sourceFeature)return t.sourceFeature.feature;return t}(e))}:t}function L(t){switch(t.properties.editHandleType){case"existing":return P;case"snap-source":return C;default:return k}}var R={mode:M,onEdit:function(){},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:r.PROJECTED_PIXEL_SIZE_MULTIPLIER,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,pickingLineWidthExtraPixels:0,lineWidthUnits:"pixels",lineJointRounded:!1,lineCapRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:function(t,e,n){return e?x:_},getFillColor:function(t,e,n){return e?w:b},getRadius:function(t){return t&&t.properties&&t.properties.radius||t&&t.properties&&t.properties.size||1},getLineWidth:function(t){return t&&t.properties&&t.properties.lineWidth||3},getTentativeLineColor:function(t){return E},getTentativeFillColor:function(t){return S},getTentativeLineWidth:function(t){return t&&t.properties&&t.properties.lineWidth||3},editHandleType:"point",editHandlePointRadiusScale:1,editHandlePointOutline:!0,editHandlePointStrokeWidth:2,editHandlePointRadiusUnits:"pixels",editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:L,getEditHandlePointOutlineColor:function(t){return T},getEditHandlePointRadius:function(t){switch(t.properties.editHandleType){case"existing":return 5;case"snap":return 7;default:return 3}},editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,editHandleIconSizeUnits:"pixels",getEditHandleIcon:function(t){return t.properties.editHandleType},getEditHandleIconSize:10,getEditHandleIconColor:L,getEditHandleIconAngle:0,billboard:!0},D={view:n.ViewMode,modify:n.ModifyMode,translate:new n.SnappableMode(new n.TranslateMode),transform:new n.SnappableMode(new n.TransformMode),scale:n.ScaleMode,rotate:n.RotateMode,duplicate:n.DuplicateMode,split:n.SplitPolygonMode,extrude:n.ExtrudeMode,elevation:n.ElevationMode,drawPoint:n.DrawPointMode,drawLineString:n.DrawLineStringMode,drawPolygon:n.DrawPolygonMode,drawRectangle:n.DrawRectangleMode,drawSquare:n.DrawSquareMode,drawRectangleFromCenter:n.DrawRectangleFromCenterMode,drawSquareFromCenter:n.DrawSquareFromCenterMode,drawCircleFromCenter:n.DrawCircleFromCenterMode,drawCircleByBoundingBox:n.DrawCircleByDiameterMode,drawEllipseByBoundingBox:n.DrawEllipseByBoundingBoxMode,drawRectangleUsing3Points:n.DrawRectangleUsingThreePointsMode,drawEllipseUsing3Points:n.DrawEllipseUsingThreePointsMode,draw90DegreePolygon:n.Draw90DegreePolygonMode,drawPolygonByDragging:n.DrawPolygonByDraggingMode},N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(s,t);var e,n,r,i,a=(e=s,function(){var t,n=A(e);if(y()){var r=A(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function s(){return p(this,s),a.apply(this,arguments)}return n=s,r=[{key:"renderLayers",value:function(){var t=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getPointRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),_subLayerProps:{linestrings:{billboard:this.props.billboard,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}},"polygons-stroke":{billboard:this.props.billboard,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels,type:o.default,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getPointRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode]}}),e=[new Sv(t)];return e=e.concat(this.createGuidesLayers(),this.createTooltipsLayers())}},{key:"initializeState",value:function(){d(A(s.prototype),"initializeState",this).call(this),this.setState({selectedFeatures:[],editHandles:[]})}},{key:"shouldUpdateState",value:function(t){return d(A(s.prototype),"shouldUpdateState",this).call(this,t)||t.changeFlags.stateChanged}},{key:"updateState",value:function(t){var e,n=t.props,r=t.oldProps,i=t.changeFlags,o=t.context;(d(A(s.prototype),"updateState",this).call(this,{oldProps:r,props:n,changeFlags:i,context:o}),!i.propsOrDataChanged||0!==Object.keys(r).length&&n.mode===r.mode)||("function"==typeof n.mode?e=new(0,n.mode):"string"==typeof n.mode?(e=D[n.mode],console.warn("Deprecated use of passing `mode` as a string. Pass the mode's class constructor instead.")):e=n.mode,e||(console.warn("No mode configured for ".concat(String(n.mode))),e=new M),e!==this.state.mode&&this.setState({mode:e,cursor:null}));var a=[];Array.isArray(n.selectedFeatureIndexes)&&(a=n.selectedFeatureIndexes.map((function(t){return n.data.features[t]}))),this.setState({selectedFeatures:a})}},{key:"getModeProps",value:function(t){var e=this;return{modeConfig:t.modeConfig,data:t.data,selectedIndexes:t.selectedFeatureIndexes,lastPointerMoveEvent:this.state.lastPointerMoveEvent,cursor:this.state.cursor,onEdit:function(n){e.setNeedsUpdate(),t.onEdit(n)},onUpdateCursor:function(t){e.setState({cursor:t})}}}},{key:"selectionAwareAccessor",value:function(t){var e=this;return"function"!=typeof t?t:function(n){return t(n,e.isFeatureSelected(n),e.props.mode)}}},{key:"isFeatureSelected",value:function(t){if(!this.props.data||!this.props.selectedFeatureIndexes)return!1;if(!this.props.selectedFeatureIndexes.length)return!1;var e=this.props.data.features.indexOf(t);return this.props.selectedFeatureIndexes.includes(e)}},{key:"getPickingInfo",value:function(t){var e=t.info;return t.sourceLayer.id.endsWith("guides")&&(e.isGuide=!0),e}},{key:"_updateAutoHighlight",value:function(t){if(null==t?void 0:t.sourceLayer)if(t.isGuide){var e,n=c(t.sourceLayer.getSubLayers());try{for(n.s();!(e=n.n()).done;)e.value.updateAutoHighlight(t)}catch(t){n.e(t)}finally{n.f()}}else t.sourceLayer.updateAutoHighlight(t)}},{key:"createGuidesLayers",value:function(){var t=this.getActiveMode().getGuides(this.getModeProps(this.props));if(!t||!t.features.length)return[];var e={linestrings:{billboard:this.props.billboard,autoHighlight:!1},"polygons-fill":{autoHighlight:!1},"polygons-stroke":{billboard:this.props.billboard}};return"icon"===this.props.editHandleType?e["points-icon"]={type:Rg,iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeUnits:this.props.editHandleIconSizeUnits,sizeScale:this.props.editHandleIconSizeScale,getIcon:O(this.props.getEditHandleIcon),getSize:O(this.props.getEditHandleIconSize),getColor:O(this.props.getEditHandleIconColor),getAngle:O(this.props.getEditHandleIconAngle)}:e["points-circle"]={type:zg,radiusScale:this.props.editHandlePointRadiusScale,stroked:this.props.editHandlePointOutline,getLineWidth:this.props.editHandlePointStrokeWidth,radiusUnits:this.props.editHandlePointRadiusUnits,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:O(this.props.getEditHandlePointRadius),getFillColor:O(this.props.getEditHandlePointColor),getLineColor:O(this.props.getEditHandlePointOutlineColor)},[new Sv(this.getSubLayerProps({id:"guides",data:t,fp64:this.props.fp64,_subLayerProps:e,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,getLineColor:O(this.props.getTentativeLineColor),getLineWidth:O(this.props.getTentativeLineWidth),getFillColor:O(this.props.getTentativeFillColor),pointType:"icon"===this.props.editHandleType?"icon":"circle",iconAtlas:this.props.editHandleIconAtlas}))]}},{key:"createTooltipsLayers",value:function(){var t=this.getActiveMode().getTooltips(this.getModeProps(this.props)),e=new pv(function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?l(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({getSize:I},this.getSubLayerProps({id:"tooltips",data:t})));return[e]}},{key:"onLayerClick",value:function(t){this.getActiveMode().handleClick(t,this.getModeProps(this.props))}},{key:"onLayerKeyUp",value:function(t){this.getActiveMode().handleKeyUp(t,this.getModeProps(this.props))}},{key:"onStartDragging",value:function(t){this.getActiveMode().handleStartDragging(t,this.getModeProps(this.props))}},{key:"onDragging",value:function(t){this.getActiveMode().handleDragging(t,this.getModeProps(this.props))}},{key:"onStopDragging",value:function(t){this.getActiveMode().handleStopDragging(t,this.getModeProps(this.props))}},{key:"onPointerMove",value:function(t){this.setState({lastPointerMoveEvent:t}),this.getActiveMode().handlePointerMove(t,this.getModeProps(this.props))}},{key:"getCursor",value:function(t){var e=t.isDragging;if(null===this.state)return null;var n=this.state.cursor;return n||(n=e?"grabbing":"grab"),n}},{key:"getActiveMode",value:function(){return this.state.mode}}],r&&h(n.prototype,r),i&&h(n,i),s}(i.default);t.exports.default=N,m(N,"layerName","EditableGeoJsonLayer"),m(N,"defaultProps",R)})),a.register("lJ408",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t.exports,"__esModule",{value:!0}),Object.defineProperty(t.exports,"GeoJsonEditMode",{enumerable:!0,get:function(){return i.GeoJsonEditMode}}),Object.defineProperty(t.exports,"ModifyMode",{enumerable:!0,get:function(){return o.ModifyMode}}),Object.defineProperty(t.exports,"ResizeCircleMode",{enumerable:!0,get:function(){return s.ResizeCircleMode}}),Object.defineProperty(t.exports,"TranslateMode",{enumerable:!0,get:function(){return u.TranslateMode}}),Object.defineProperty(t.exports,"ScaleMode",{enumerable:!0,get:function(){return l.ScaleMode}}),Object.defineProperty(t.exports,"RotateMode",{enumerable:!0,get:function(){return c.RotateMode}}),Object.defineProperty(t.exports,"DuplicateMode",{enumerable:!0,get:function(){return f.DuplicateMode}}),Object.defineProperty(t.exports,"ExtendLineStringMode",{enumerable:!0,get:function(){return p.ExtendLineStringMode}}),Object.defineProperty(t.exports,"SplitPolygonMode",{enumerable:!0,get:function(){return h.SplitPolygonMode}}),Object.defineProperty(t.exports,"ExtrudeMode",{enumerable:!0,get:function(){return d.ExtrudeMode}}),Object.defineProperty(t.exports,"ElevationMode",{enumerable:!0,get:function(){return g.ElevationMode}}),Object.defineProperty(t.exports,"TransformMode",{enumerable:!0,get:function(){return y.TransformMode}}),Object.defineProperty(t.exports,"DrawPointMode",{enumerable:!0,get:function(){return A.DrawPointMode}}),Object.defineProperty(t.exports,"DrawLineStringMode",{enumerable:!0,get:function(){return v.DrawLineStringMode}}),Object.defineProperty(t.exports,"DrawPolygonMode",{enumerable:!0,get:function(){return m.DrawPolygonMode}}),Object.defineProperty(t.exports,"DrawRectangleMode",{enumerable:!0,get:function(){return _.DrawRectangleMode}}),Object.defineProperty(t.exports,"DrawSquareMode",{enumerable:!0,get:function(){return b.DrawSquareMode}}),Object.defineProperty(t.exports,"DrawRectangleFromCenterMode",{enumerable:!0,get:function(){return x.DrawRectangleFromCenterMode}}),Object.defineProperty(t.exports,"DrawSquareFromCenterMode",{enumerable:!0,get:function(){return w.DrawSquareFromCenterMode}}),Object.defineProperty(t.exports,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return E.DrawCircleByDiameterMode}}),Object.defineProperty(t.exports,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return S.DrawCircleFromCenterMode}}),Object.defineProperty(t.exports,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return P.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(t.exports,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return k.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(t.exports,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return C.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(t.exports,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return T.Draw90DegreePolygonMode}}),Object.defineProperty(t.exports,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return I.DrawPolygonByDraggingMode}}),Object.defineProperty(t.exports,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return M.ImmutableFeatureCollection}}),Object.defineProperty(t.exports,"ViewMode",{enumerable:!0,get:function(){return O.ViewMode}}),Object.defineProperty(t.exports,"MeasureDistanceMode",{enumerable:!0,get:function(){return L.MeasureDistanceMode}}),Object.defineProperty(t.exports,"MeasureAreaMode",{enumerable:!0,get:function(){return R.MeasureAreaMode}}),Object.defineProperty(t.exports,"MeasureAngleMode",{enumerable:!0,get:function(){return D.MeasureAngleMode}}),Object.defineProperty(t.exports,"CompositeMode",{enumerable:!0,get:function(){return N.CompositeMode}}),Object.defineProperty(t.exports,"SnappableMode",{enumerable:!0,get:function(){return F.SnappableMode}}),Object.defineProperty(t.exports,"_memoize",{enumerable:!0,get:function(){return j.default}}),t.exports.utils=void 0;var r,i=a("ed261"),o=a("633qg"),s=a("8lmQa"),u=a("2i7l9"),l=a("8iJxM"),c=a("YsHem"),f=a("ftCxA"),p=a("8336T"),h=a("ixlO7"),d=a("i57E4"),g=a("idBVd"),y=a("amHrB"),A=a("90zJR"),v=a("iw7cl"),m=a("8fJUZ"),_=a("bRaIG"),b=a("50TUj"),x=a("bGEzk"),w=a("csOT4"),E=a("eFdRt"),S=a("RrPgi"),P=a("5KF1c"),k=a("gvXLP"),C=a("i23Id"),T=a("3ag13"),I=a("2xet6"),M=a("36osE"),O=a("gy2Mf"),L=a("jrgwg"),R=a("csL0G"),D=a("2zXmr"),N=a("4dSAf"),F=a("is4Ng"),j=(r=a("cNKaz"))&&r.__esModule?r:{default:r},z=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=B();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}r.default=t,e&&e.set(t,r);return r}(a("lbHm2"));function B(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return B=function(){return t},t}t.exports.utils=z})),a.register("ed261",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.getIntermediatePosition=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},t.exports.GeoJsonEditMode=void 0;var n=l(a("dkYRM")),r=l(a("jlhKK")),i=l(a("kyprt")),o=l(a("juk2q")),s=a("lbHm2"),u=a("36osE");function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d={type:"FeatureCollection",features:[]},g=[],y=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=[],(n="_clickSequence")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,a,l;return e=t,(a=[{key:"getGuides",value:function(t){return d}},{key:"getTooltips",value:function(t){return g}},{key:"getSelectedFeature",value:function(t){return 1===t.selectedIndexes.length?t.data.features[t.selectedIndexes[0]]:null}},{key:"getSelectedGeometry",value:function(t){var e=this.getSelectedFeature(t);return e?e.geometry:null}},{key:"getSelectedFeaturesAsFeatureCollection",value:function(t){var e=t.data.features;return{type:"FeatureCollection",features:t.selectedIndexes.map((function(t){return e[t]}))}}},{key:"getClickSequence",value:function(){return this._clickSequence}},{key:"addClickSequence",value:function(t){var e=t.mapCoords;this._clickSequence.push(e)}},{key:"resetClickSequence",value:function(){this._clickSequence=[]}},{key:"getTentativeGuide",value:function(t){return this.getGuides(t).features.find((function(t){return t.properties&&"tentative"===t.properties.guideType}))}},{key:"isSelectionPicked",value:function(t,e){if(!t.length)return!1;var n=(0,s.getNonGuidePicks)(t).map((function(t){return t.index})),r=(0,s.getPickedEditHandles)(t).map((function(t){return t.properties.featureIndex})),i=new Set([].concat(c(n),c(r)));return e.selectedIndexes.some((function(t){return i.has(t)}))}},{key:"rewindPolygon",value:function(t){var e=t.geometry;return"Polygon"===e.type||"MultiPolygon"===e.type?(0,o.default)(t):t}},{key:"getAddFeatureAction",value:function(t,e){var n=t,r="Feature"===n.type?n:{type:"Feature",properties:{},geometry:n},i=this.rewindPolygon(r),o=new u.ImmutableFeatureCollection(e).addFeature(i).getObject();return{updatedData:o,editType:"addFeature",editContext:{featureIndexes:[o.features.length-1]}}}},{key:"getAddManyFeaturesAction",value:function(t,e){var n,r=t.features,i=new u.ImmutableFeatureCollection(e),o=i.getObject().features.length,a=[],s=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=f(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(r);try{for(s.s();!(n=s.n()).done;){var l=n.value,c=l.properties,p=l.geometry;i=i.addFeature({type:"Feature",properties:c,geometry:p}),a.push(o+a.length)}}catch(t){s.e(t)}finally{s.f()}return{updatedData:i.getObject(),editType:"addFeature",editContext:{featureIndexes:a}}}},{key:"getAddFeatureOrBooleanPolygonAction",value:function(t,e){var o=t,a=this.getSelectedFeature(e),s=e.modeConfig;if(s&&s.booleanOperation){if(!a||"Polygon"!==a.geometry.type&&"MultiPolygon"!==a.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var l,c="Feature"===o.type?o:{type:"Feature",geometry:o};if("union"===s.booleanOperation)l=(0,n.default)(a,c);else if("difference"===s.booleanOperation)l=(0,r.default)(a,c);else{if("intersection"!==s.booleanOperation)return console.warn("Invalid booleanOperation ".concat(s.booleanOperation)),null;l=(0,i.default)(a,c)}if(!l)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var f=e.selectedIndexes[0];return{updatedData:new u.ImmutableFeatureCollection(e.data).replaceGeometry(f,l.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[f]}}}return this.getAddFeatureAction(t,e.data)}},{key:"createTentativeFeature",value:function(t){return null}},{key:"handleClick",value:function(t,e){}},{key:"handlePointerMove",value:function(t,e){var n=this.createTentativeFeature(e);n&&e.onEdit({updatedData:e.data,editType:"updateTentativeFeature",editContext:{feature:n}})}},{key:"handleStartDragging",value:function(t,e){}},{key:"handleStopDragging",value:function(t,e){}},{key:"handleDragging",value:function(t,e){}},{key:"handleKeyUp",value:function(t,e){"Escape"===t.key&&(this.resetClickSequence(),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}}])&&h(e.prototype,a),l&&h(e,l),t}();t.exports.GeoJsonEditMode=y})),a.register("dkYRM",(function(e,i){n(e.exports),t(e.exports,"default",(function(){return l}));var o=a("gJOvW"),s=a("dgBT2"),u=a("1JocD");var l=function(t,e,n){void 0===n&&(n={});var i=s.getGeom(t),a=s.getGeom(e),l=r(o).union(i.coordinates,a.coordinates);return 0===l.length?null:1===l.length?u.polygon(l[0],n.properties):u.multiPolygon(l,n.properties)}})),a.register("1JocD",(function(e,n){t(e.exports,"polygon",(function(){return i})),t(e.exports,"multiPolygon",(function(){return o}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}})),a.register("kyprt",(function(e,i){n(e.exports),t(e.exports,"default",(function(){return l}));var o=a("eM2ii"),s=a("dgBT2"),u=a("gJOvW");function l(t,e,n){void 0===n&&(n={});var i=s.getGeom(t),a=s.getGeom(e),l=r(u).intersection(i.coordinates,a.coordinates);return 0===l.length?null:1===l.length?o.polygon(l[0],n.properties):o.multiPolygon(l,n.properties)}})),a.register("eM2ii",(function(e,n){t(e.exports,"polygon",(function(){return i})),t(e.exports,"multiPolygon",(function(){return o}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}})),a.register("juk2q",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return h}));var i=a("5XQFC"),o=a("9zaHJ"),s=a("6a4Cf"),u=a("dgBT2"),l=a("lJgS4");function c(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return s.geomEach(t,(function(t){c(t,e)})),t;case"LineString":return f(u.getCoords(t),e),t;case"Polygon":return p(u.getCoords(t),e),t;case"MultiLineString":return u.getCoords(t).forEach((function(t){f(t,e)})),t;case"MultiPolygon":return u.getCoords(t).forEach((function(t){p(t,e)})),t;case"Point":case"MultiPoint":return t}}function f(t,e){o.default(t)===e&&t.reverse()}function p(t,e){o.default(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)o.default(t[n])===e&&t[n].reverse()}var h=function(t,e){if(e=e||{},!l.isObject(e))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=i.default(t));var o=[];switch(t.type){case"GeometryCollection":return s.geomEach(t,(function(t){c(t,n)})),t;case"FeatureCollection":return s.featureEach(t,(function(t){s.featureEach(c(t,n),(function(t){o.push(t)}))})),l.featureCollection(o)}return c(t,n)}})),a.register("5XQFC",(function(e,n){function r(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=i(t.properties),e.geometry=o(t.geometry),e}function i(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=i(r):e[n]=r})),e):e}function o(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return o(t)})),e):(e.coordinates=a(t.coordinates),e)}function a(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return a(t)}))}t(e.exports,"default",(function(){return s}));var s=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return r(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return r(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o(t);default:throw new Error("unknown GeoJSON type")}}})),a.register("9zaHJ",(function(e,n){t(e.exports,"default",(function(){return i}));var r=a("dgBT2");function i(t){for(var e,n,i=r.getCoords(t),o=0,a=1;a<i.length;)e=n||i[0],o+=((n=i[a])[0]-e[0])*(n[1]+e[1]),a++;return o>0}})),a.register("6a4Cf",(function(e,n){t(e.exports,"featureEach",(function(){return r})),t(e.exports,"geomEach",(function(){return i}));a("lJgS4");function r(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function i(t,e){var n,r,i,o,a,s,u,l,c,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,f))return!1;p++}}})),a.register("lJgS4",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"featureCollection",(function(){return s})),t(e.exports,"isObject",(function(){return l}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(t[0])||!u(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function l(t){return!!t&&t.constructor===Object}})),a.register("lbHm2",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];return Array.isArray(t)?[255*t[0],255*t[1],255*t[2],255*t[3]]:e},t.exports.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var i=0;i<e.length;i++)if(t(e[i],[].concat(p(n),[i]),r)){r(e,n);break}return!1},t.exports.generatePointsParallelToLinePoints=function(t,e,o){var a={type:"LineString",coordinates:[t,e]},u=(0,s.point)(o),l=(0,i.default)(u,a),c=(0,r.default)(t,e),f=(o[0]-t[0])*(e[1]-t[1])-(o[1]-t[1])*(e[0]-t[0])<0?c-90:c-270,p=(0,n.default)(e,l,f),h=(0,n.default)(t,l,f);return[p.geometry.coordinates,h.geometry.coordinates]},t.exports.distance2d=g,t.exports.mix=y,t.exports.nearestPointOnProjectedLine=function(t,e,n){var r=new l.default(n),i=t.geometry.coordinates.map((function(t){var e=f(t,3),n=e[0],i=e[1],o=e[2],a=void 0===o?0:o;return r.project([n,i,a])})),o=f(r.project(e.geometry.coordinates),2),a=o[0],s=o[1],u=1/0,c={};i.forEach((function(t,e){var n=f(t,2),r=n[0],o=n[1];if(0!==e){var l=f(i[e-1],2),p=l[0],h=l[1],d=h-o,g=r-p,y=p*o-r*h,A=d*d+g*g,v=Math.abs(d*a+g*s+y)/Math.sqrt(A);v<u&&(u=v,c={index:e,x0:(g*(g*a-d*s)-d*y)/A,y0:(d*(-g*a+d*s)-g*y)/A})}}));var p=c,h=p.index,d=p.x0,A=p.y0,v=f(i[h-1],3),m=v[0],_=v[1],b=v[2],x=void 0===b?0:b,w=f(i[h],3),E=w[0],S=w[1],P=w[2],k=void 0===P?0:P,C=g(m,_,E,S),T=g(m,_,d,A),I=y(x,k,T/C);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([d,A,I])},properties:{dist:u,index:h-1}}},t.exports.nearestPointOnLine=function(t,e,n){var r,i,a;n&&(a=new l.default(n));var c=(0,s.point)([1/0,1/0],{dist:1/0});return!(null===(r=t.geometry)||void 0===r?void 0:r.coordinates.length)||(null===(i=t.geometry)||void 0===i?void 0:i.coordinates.length)<2||(0,o.flattenEach)(t,(function(t){var n,r,i,o,l,f,p,h=(0,u.getCoords)(t),d=(0,u.getCoords)(e);if(h.length>1&&d.length){var g,y;a?(g=h.map((function(t){return a.project(t)})),y=a.project(d)):(g=h,y=d);for(var A=1;A<g.length;A++){if(g[A][0]!==g[A-1][0]){var v=(g[A][1]-g[A-1][1])/(g[A][0]-g[A-1][0]),m=g[A][1]-v*g[A][0];p=Math.abs(v*y[0]+m-y[1])/Math.sqrt(v*v+1)}else p=Math.abs(y[0]-g[A][0]);var _=Math.pow(g[A][1]-g[A-1][1],2)+Math.pow(g[A][0]-g[A-1][0],2),b=Math.pow(g[A][1]-y[1],2)+Math.pow(g[A][0]-y[0],2),x=Math.pow(g[A-1][1]-y[1],2)+Math.pow(g[A-1][0]-y[0],2),w=Math.pow(p,2),E=b-w+x-w;E>_&&(p=Math.sqrt(Math.min(b,x))),(null==n||n>p)&&(E>_?x<b?(r=0,i=1):(i=0,r=1):(r=Math.sqrt(x-w)/Math.sqrt(_),i=Math.sqrt(b-w)/Math.sqrt(_)),n=p,f=A)}var S=g[f-1][0]-g[f][0],P=g[f-1][1]-g[f][1];o=g[f-1][0]-S*r,l=g[f-1][1]-P*r}var k={x:o,y:l,idx:f-1,to:r,from:i};if(a){var C=a.unproject([k.x,k.y]);k={x:C[0],y:C[1],idx:f-1,to:r,from:i}}c=(0,s.point)([k.x,k.y],{dist:Math.abs(k.from-k.to),index:k.idx})})),c},t.exports.getPickedEditHandle=function(t){var e=A(t);return e.length?e[0]:null},t.exports.getPickedSnapSourceEditHandle=function(t){return A(t).find((function(t){return"snap-source"===t.properties.editHandleType}))},t.exports.getNonGuidePicks=function(t){return t&&t.filter((function(t){return!t.isGuide}))},t.exports.getPickedExistingEditHandle=function(t){return A(t).find((function(t){var e=t.properties;return e.featureIndex>=0&&"existing"===e.editHandleType}))},t.exports.getPickedIntermediateEditHandle=function(t){return A(t).find((function(t){var e=t.properties;return e.featureIndex>=0&&"intermediate"===e.editHandleType}))},t.exports.getPickedEditHandles=A,t.exports.getEditHandlesForGeometry=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"existing",r=[];switch(t.type){case"Point":r=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:n,positionIndexes:[],featureIndex:e},geometry:{type:"Point",coordinates:t.coordinates}}];break;case"MultiPoint":case"LineString":r=r.concat(v(t.coordinates,[],e,n));break;case"Polygon":case"MultiLineString":for(var i=0;i<t.coordinates.length;i++)r=r.concat(v(t.coordinates[i],[i],e,n)),"Polygon"===t.type&&(r=r.slice(0,-1));break;case"MultiPolygon":for(var o=0;o<t.coordinates.length;o++)for(var a=0;a<t.coordinates[o].length;a++)r=(r=r.concat(v(t.coordinates[o][a],[o,a],e,n))).slice(0,-1);break;default:throw Error("Unhandled geometry type: ".concat(t.type))}return r},t.exports.updateRectanglePosition=function(t,e,n){var r=t.geometry.coordinates;if(!r)return null;var i=r[0].slice(0,4);i[e%4]=n;var o=i[(e+2)%4],a=i[e%4];return i[(e+1)%4]=[a[0],o[1]],i[(e+3)%4]=[o[0],a[1]],[[].concat(p(i),[i[0]])]},t.exports.mapCoords=function t(e,n){if("number"==typeof e[0])return!isNaN(e[0])&&isFinite(e[0])?n(e):e;return e.map((function(e){return t(e,n)})).filter(Boolean)};var n=c(a("fkXdW")),r=c(a("2w221")),i=c(a("jbcah")),o=a("ltHp8"),s=a("eoCq7"),u=a("dgBT2"),l=c(a("1Ft0x"));function c(t){return t&&t.__esModule?t:{default:t}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function y(t,e,n){return e*n+t*(1-n)}function A(t){return t&&t.filter((function(t){return t.isGuide&&"editHandle"===t.object.properties.guideType})).map((function(t){return t.object}))||[]}function v(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"existing",i=[],o=0;o<t.length;o++){var a=t[o];i.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[].concat(p(e),[o]),featureIndex:n,editHandleType:r},geometry:{type:"Point",coordinates:a}})}return i}})),a.register("fkXdW",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return s}));var i=a("1Rtjz"),o=a("dgBT2");function s(t,e,n,r){void 0===r&&(r={});var a=o.getCoord(t),s=i.degreesToRadians(a[0]),u=i.degreesToRadians(a[1]),l=i.degreesToRadians(n),c=i.lengthToRadians(e,r.units),f=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(l)),p=s+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(f)),h=i.radiansToDegrees(p),d=i.radiansToDegrees(f);return i.point([h,d],r.properties)}})),a.register("1Rtjz",(function(e,n){t(e.exports,"point",(function(){return s})),t(e.exports,"lengthToRadians",(function(){return u})),t(e.exports,"radiansToDegrees",(function(){return l})),t(e.exports,"degreesToRadians",(function(){return c}));a("5qgrd");var r=6371008.8,i={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:r,metres:r,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:3440.069546436285,radians:1,yards:6967335.223679999};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function u(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function l(t){return 180*(t%(2*Math.PI))/Math.PI}function c(t){return t%360*Math.PI/180}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}})),a.register("2w221",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return s}));var i=a("3J6je"),o=a("dgBT2");function s(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=s(e,t);return n=(n+180)%360}(t,e);var r=o.getCoord(t),a=o.getCoord(e),u=i.degreesToRadians(r[0]),l=i.degreesToRadians(a[0]),c=i.degreesToRadians(r[1]),f=i.degreesToRadians(a[1]),p=Math.sin(l-u)*Math.cos(f),h=Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(l-u);return i.radiansToDegrees(Math.atan2(p,h))}})),a.register("3J6je",(function(e,n){t(e.exports,"radiansToDegrees",(function(){return r})),t(e.exports,"degreesToRadians",(function(){return i}));a("5qgrd");function r(t){return 180*(t%(2*Math.PI))/Math.PI}function i(t){return t%360*Math.PI/180}})),a.register("jbcah",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return p}));var i=a("h91qW"),o=a("lXDBu"),s=a("dgBT2"),u=a("eEVsR"),l=a("l8SWm");function c(t,e){return t[0]*e[0]+t[1]*e[1]}function f(t,e,n){return"planar"===n.method?l.default(t,e,n):i.default(t,e,n)}var p=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=o.point(t):"Point"===t.type?t=o.feature(t):s.featureOf(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=o.lineString(e):"LineString"===e.type?e=o.feature(e):s.featureOf(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return u.segmentEach(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],a=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=c([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return f(t,e,{method:r.method,units:"degrees"});var a=c(i,i);if(a<=o)return f(t,n,{method:r.method,units:"degrees"});var s=o/a,u=[e[0]+s*i[0],e[1]+s*i[1]];return f(t,u,{method:r.method,units:"degrees"})}(i,e,o,n);a<r&&(r=a)})),o.convertLength(r,"degrees",n.units)}})),a.register("lXDBu",(function(e,n){t(e.exports,"feature",(function(){return o})),t(e.exports,"point",(function(){return s})),t(e.exports,"lineString",(function(){return u})),t(e.exports,"convertLength",(function(){return c})),t(e.exports,"isObject",(function(){return p}));a("5qgrd");var r=6371008.8,i={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:r,metres:r,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:3440.069546436285,radians:1,yards:6967335.223679999};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function u(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function l(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function c(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return function(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}(l(t,e),n)}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function p(t){return!!t&&t.constructor===Object}})),a.register("eEVsR",(function(e,n){t(e.exports,"segmentEach",(function(){return u}));var r=a("lXDBu");function i(t,e,n){if(null!==t)for(var r,o,a,s,u,l,c,f,p=0,h=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,A=g?t.features.length:1,v=0;v<A;v++){u=(f=!!(c=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<u;m++){var _=0,b=0;if(null!==(s=f?c.geometries[m]:c)){l=s.coordinates;var x=s.type;switch(p=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],h,v,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(o=0;o<l[r].length-p;o++){if(!1===e(l[r][o],h,v,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,o=0;o<l[r].length;o++){for(a=0;a<l[r][o].length-p;a++){if(!1===e(l[r][o][a],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n,r,i,o,a,s,u,l,c,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,f))return!1;p++}}function s(t,e){o(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:s,coordinates:t.coordinates[l]};if(!1===e(r.feature(c,i),n,l))return!1}}))}function u(t,e){s(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,l=0,c=0,f=0;return!1!==i(t,(function(i,s,p,h,d){if(void 0===u||n>l||h>c||d>f)return u=i,l=n,c=h,f=d,void(a=0);var g=r.lineString([u,i],t.properties);if(!1===e(g,n,o,d,a))return!1;a++,u=i}))&&void 0}}}))}})),a.register("l8SWm",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("4S3He"),i=a("dgBT2");var o=function(t,e,n){void 0===n&&(n={});var o=i.getCoord(t),a=i.getCoord(e);a[0]+=a[0]-o[0]>180?-360:o[0]-a[0]>180?360:0;var s=function(t,e,n){var i=n=void 0===n?r.earthRadius:Number(n),o=t[1]*Math.PI/180,a=e[1]*Math.PI/180,s=a-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(l)>1e-11?s/l:Math.cos(o);return Math.sqrt(s*s+c*c*u*u)*i}(o,a);return r.convertLength(s,"meters",n.units)}})),a.register("4S3He",(function(e,n){t(e.exports,"earthRadius",(function(){return r})),t(e.exports,"convertLength",(function(){return s}));a("5qgrd");var r=6371008.8,i={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:1.0936*r};function o(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function s(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return function(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}(o(t,e),n)}})),a.register("36osE",(function(t,e){"use strict";function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ImmutableFeatureCollection=void 0;var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"featureCollection",void 0),this.featureCollection=e}var e,r,i;return e=t,(r=[{key:"getObject",value:function(){return this.featureCollection}},{key:"replacePosition",value:function(t,e,n){var r=this.featureCollection.features[t].geometry,i="Polygon"===r.type||"MultiPolygon"===r.type,a=o({},r,{coordinates:c(r.coordinates,e,n,i)});return this.replaceGeometry(t,a)}},{key:"removePosition",value:function(t,e){var n=this.featureCollection.features[t].geometry;if("Point"===n.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===n.type&&n.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===n.type&&n.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===n.type&&n.coordinates[0].length<5&&Array.isArray(e)&&0===e[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===n.type&&1===n.coordinates.length&&n.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===n.type&&1===n.coordinates.length&&n.coordinates[0][0].length<5&&Array.isArray(e)&&0===e[0]&&0===e[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");var r="Polygon"===n.type||"MultiPolygon"===n.type,i=o({},n,{coordinates:f(n.coordinates,e,r)});return function(t){switch(t.type){case"Polygon":!function(t){for(var e=t.coordinates,n=1;n<e.length;n++)h(e,n)&&n--}(t);break;case"MultiLineString":!function(t){for(var e=0;e<t.coordinates.length;e++)1===t.coordinates[e].length&&(t.coordinates.splice(e,1),e--)}(t);break;case"MultiPolygon":!function(t){for(var e=0;e<t.coordinates.length;e++){var n=t.coordinates[e];n[0].length<=3&&(t.coordinates.splice(e,1),e--);for(var r=1;r<n.length;r++)h(n,r)&&r--}}(t)}}(i),this.replaceGeometry(t,i)}},{key:"addPosition",value:function(t,e,n){var r=this.featureCollection.features[t].geometry;if("Point"===r.type)throw new Error("Unable to add a position to a Point feature");var i="Polygon"===r.type||"MultiPolygon"===r.type,a=o({},r,{coordinates:p(r.coordinates,e,n,i)});return this.replaceGeometry(t,a)}},{key:"replaceGeometry",value:function(e,r){var i=o({},this.featureCollection.features[e],{geometry:r});return new t(o({},this.featureCollection,{features:[].concat(n(this.featureCollection.features.slice(0,e)),[i],n(this.featureCollection.features.slice(e+1)))}))}},{key:"addFeature",value:function(t){return this.addFeatures([t])}},{key:"addFeatures",value:function(e){return new t(o({},this.featureCollection,{features:[].concat(n(this.featureCollection.features),n(e))}))}},{key:"deleteFeature",value:function(t){return this.deleteFeatures([t])}},{key:"deleteFeatures",value:function(e){var r=n(this.featureCollection.features);e.sort();for(var i=e.length-1;i>=0;i--){var a=e[i];a>=0&&a<r.length&&r.splice(a,1)}return new t(o({},this.featureCollection,{features:r}))}}])&&a(e.prototype,r),i&&a(e,i),t}();function l(t,e){if(2===t.length&&3===e.length){var n=e[2];return[t[0],t[1],n]}return t}function c(t,e,r,i){if(!e)return t;if(0===e.length)return l(r,t);if(1===e.length){var o=[].concat(n(t.slice(0,e[0])),[l(r,t[e[0]])],n(t.slice(e[0]+1)));return!i||0!==e[0]&&e[0]!==t.length-1||(o[0]=l(r,t[0]),o[t.length-1]=l(r,t[0])),o}return[].concat(n(t.slice(0,e[0])),[c(t[e[0]],e.slice(1,e.length),r,i)],n(t.slice(e[0]+1)))}function f(t,e,r){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");if(1===e.length){var i=[].concat(n(t.slice(0,e[0])),n(t.slice(e[0]+1)));return!r||0!==e[0]&&e[0]!==t.length-1||(0===e[0]?i[i.length-1]=i[0]:e[0]===t.length-1&&(i[0]=i[i.length-1])),i}return[].concat(n(t.slice(0,e[0])),[f(t[e[0]],e.slice(1,e.length),r)],n(t.slice(e[0]+1)))}function p(t,e,r,i){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");return 1===e.length?[].concat(n(t.slice(0,e[0])),[r],n(t.slice(e[0]))):[].concat(n(t.slice(0,e[0])),[p(t[e[0]],e.slice(1,e.length),r,i)],n(t.slice(e[0]+1)))}function h(t,e){return t[e].length<=3&&(t.splice(e,1),!0)}t.exports.ImmutableFeatureCollection=u})),a.register("633qg",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ModifyMode=void 0;var n=a("eoCq7"),r=a("lbHm2"),i=a("ed261"),o=a("36osE");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(A,t);var e,i,a,s,c=(e=A,function(){var t,n=g(e);if(d()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function A(){return f(this,A),c.apply(this,arguments)}return i=A,a=[{key:"getGuides",value:function(t){var e,i=this,o=[],a=t.data,s=t.lastPointerMoveEvent,c=a.features,f=s&&s.picks,p=s&&s.mapCoords,h=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=l(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(t.selectedIndexes);try{for(h.s();!(e=h.n()).done;){var d=e.value;if(d<c.length){var g=c[d].geometry;o.push.apply(o,u((0,r.getEditHandlesForGeometry)(g,d)))}else console.warn("selectedFeatureIndexes out of range ".concat(d))}}catch(t){h.e(t)}finally{h.f()}if(f&&f.length&&p){var y,A=!(0,r.getPickedExistingEditHandle)(f)&&f.find((function(t){return!t.isGuide}));if(A&&!A.object.geometry.type.includes("Point")&&(!(null===(y=t.modeConfig)||void 0===y?void 0:y.lockRectangles)||"Rectangle"!==A.object.properties.shape)&&t.selectedIndexes.includes(A.index)){var v=null,m=[],_=(0,n.point)(p);if((0,r.recursivelyTraverseNestedArrays)(A.object.geometry.coordinates,[],(function(e,r){var o=(0,n.lineString)(e),a=i.getNearestPoint(o,_,t.modeConfig&&t.modeConfig.viewport);(!v||a.properties.dist<v.properties.dist)&&(v=a,m=r)})),v){var b=v,x=b.geometry.coordinates,w=b.properties.index;o.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:A.index,positionIndexes:[].concat(u(m),[w+1])},geometry:{type:"Point",coordinates:x}})}}}return{type:"FeatureCollection",features:o}}},{key:"getNearestPoint",value:function(t,e,n){if(t.geometry.coordinates.some((function(t){return t.length>2}))){if(n)return(0,r.nearestPointOnProjectedLine)(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,r.nearestPointOnLine)(t,e,n)}},{key:"handleClick",value:function(t,e){var n=(0,r.getPickedExistingEditHandle)(t.picks),i=(0,r.getPickedIntermediateEditHandle)(t.picks);if(n){var a,s=n.properties,u=s.featureIndex,l=s.positionIndexes;try{a=new o.ImmutableFeatureCollection(e.data).removePosition(u,l).getObject()}catch(t){}a&&e.onEdit({updatedData:a,editType:"removePosition",editContext:{featureIndexes:[u],positionIndexes:l,position:n.geometry.coordinates}})}else if(i){var c,f=i.properties,p=f.featureIndex,h=f.positionIndexes,d=e.data.features[p];if(!(null===(c=e.modeConfig)||void 0===c?void 0:c.lockRectangles)||"Rectangle"!==(null==d?void 0:d.properties.shape)){var g=new o.ImmutableFeatureCollection(e.data).addPosition(p,h,i.geometry.coordinates).getObject();g&&e.onEdit({updatedData:g,editType:"addPosition",editContext:{featureIndexes:[p],positionIndexes:h,position:i.geometry.coordinates}})}}}},{key:"handleDragging",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.pointerDownPicks);n&&(t.cancelPan(),this._dragEditHandle("movePosition",e,n,t))}},{key:"_dragEditHandle",value:function(t,e,n,i){var a,s,u=n.properties,l=e.data.features[u.featureIndex];if((null===(a=e.modeConfig)||void 0===a?void 0:a.lockRectangles)&&"Rectangle"===l.properties.shape){var c=(0,r.updateRectanglePosition)(l,u.positionIndexes[1],i.mapCoords);s=new o.ImmutableFeatureCollection(e.data).replaceGeometry(u.featureIndex,{coordinates:c,type:"Polygon"}).getObject()}else s=new o.ImmutableFeatureCollection(e.data).replacePosition(u.featureIndex,u.positionIndexes,i.mapCoords).getObject();e.onEdit({updatedData:s,editType:t,editContext:{featureIndexes:[u.featureIndex],positionIndexes:u.positionIndexes,position:i.mapCoords}})}},{key:"handlePointerMove",value:function(t,e){var n=this.getCursor(t);e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,i=(0,r.getPickedIntermediateEditHandle)(t.picks);if(n.length&&i){var a=i.properties,s=new o.ImmutableFeatureCollection(e.data).addPosition(a.featureIndex,a.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:s,editType:"addPosition",editContext:{featureIndexes:[a.featureIndex],positionIndexes:a.positionIndexes,position:t.mapCoords}})}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,i=(0,r.getPickedEditHandle)(t.picks);n.length&&i&&this._dragEditHandle("finishMovePosition",e,i,t)}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,r.getPickedEditHandles)(e).length?"cell":null}}],a&&p(i.prototype,a),s&&p(i,s),A}(i.GeoJsonEditMode);t.exports.ModifyMode=A})),a.register("8lmQa",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ResizeCircleMode=void 0;var n=f(a("67Noe")),r=a("eoCq7"),i=f(a("cqRzY")),o=f(a("h91qW")),s=f(a("gvC1G")),u=a("lbHm2"),l=a("ed261"),c=a("36osE");function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(d,t);var e,a,l,f,p=(e=d,function(){var t,n=_(e);if(m()){var r=_(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return A(this,t)});function d(){var t;g(this,d);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return x(v(t=p.call.apply(p,[this].concat(n))),"_selectedEditHandle",void 0),x(v(t),"_isResizing",!1),t}return a=d,l=[{key:"getGuides",value:function(t){var e=this,n=[],i=t.selectedIndexes,o=t.lastPointerMoveEvent,a=o&&o.picks,s=o&&o.mapCoords;if(a&&a.length&&s&&1===i.length&&!this._isResizing){var l=a.find((function(t){return!t.isGuide}));if(l&&l.object.properties.shape&&l.object.properties.shape.includes("Circle")&&t.selectedIndexes.includes(l.index)){var c=null,f=[],p=(0,r.point)(s);if((0,u.recursivelyTraverseNestedArrays)(l.object.geometry.coordinates,[],(function(n,i){var o=(0,r.lineString)(n),a=e.getNearestPoint(o,p,t.modeConfig&&t.modeConfig.viewport);(!c||a.properties.dist<c.properties.dist)&&(c=a,f=i)})),c){var d=c,g=d.geometry.coordinates,y=d.properties.index;n.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:l.index,positionIndexes:[].concat(h(f),[y+1])},geometry:{type:"Point",coordinates:g}})}}}return{type:"FeatureCollection",features:n}}},{key:"getNearestPoint",value:function(t,e,r){if(t.geometry.coordinates.some((function(t){return t.length>2}))){if(r)return(0,u.nearestPointOnProjectedLine)(t,e,r);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,n.default)(t,e)}},{key:"handleDragging",value:function(t,e){var n=(0,u.getPickedEditHandle)(t.pointerDownPicks);if(n){t.cancelPan();var r=n.properties,a=this.getSelectedFeature(e),l=(0,s.default)(a).geometry.coordinates,f=Object.entries(a.geometry.coordinates[0]).length-1,p=Math.max((0,o.default)(l,t.mapCoords),.001),h={}.steps,d={steps:void 0===h?f:h},g=(0,i.default)(l,p,d).geometry,y=new c.ImmutableFeatureCollection(e.data).replaceGeometry(r.featureIndex,g).getObject();e.onEdit({updatedData:y,editType:"unionGeometry",editContext:{featureIndexes:[r.featureIndex]}})}}},{key:"handlePointerMove",value:function(t,e){if(!this._isResizing){var n=(0,u.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"intermediate"===n.properties.editHandleType?n:null}var r=this.getCursor(t);e.onUpdateCursor(r)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isResizing=!0)}},{key:"handleStopDragging",value:function(t,e){this._isResizing&&(this._selectedEditHandle=null,this._isResizing=!1)}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,u.getPickedEditHandles)(e).length?"cell":null}}],l&&y(a.prototype,l),f&&y(a,f),d}(l.GeoJsonEditMode);t.exports.ResizeCircleMode=w})),a.register("67Noe",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return p}));var i=a("2w221"),o=a("h91qW"),s=a("fkXdW"),u=a("hYu1V"),l=a("gkFW0"),c=a("cZleT"),f=a("dgBT2");var p=function(t,e,n){void 0===n&&(n={});var r=c.point([1/0,1/0],{dist:1/0}),a=0;return l.flattenEach(t,(function(t){for(var l=f.getCoords(t),p=0;p<l.length-1;p++){var h=c.point(l[p]);h.properties.dist=o.default(e,h,n);var d=c.point(l[p+1]);d.properties.dist=o.default(e,d,n);var g=o.default(h,d,n),y=Math.max(h.properties.dist,d.properties.dist),A=i.default(h,d),v=s.default(e,y,A+90,n),m=s.default(e,y,A-90,n),_=u.default(c.lineString([v.geometry.coordinates,m.geometry.coordinates]),c.lineString([h.geometry.coordinates,d.geometry.coordinates])),b=null;_.features.length>0&&((b=_.features[0]).properties.dist=o.default(e,b,n),b.properties.location=a+o.default(h,b,n)),h.properties.dist<r.properties.dist&&((r=h).properties.index=p,r.properties.location=a),d.properties.dist<r.properties.dist&&((r=d).properties.index=p+1,r.properties.location=a+g),b&&b.properties.dist<r.properties.dist&&((r=b).properties.index=p),a+=g}})),r}})),a.register("hYu1V",(function(e,i){n(e.exports),t(e.exports,"default",(function(){return p}));var o=a("kB9B6"),s=a("dgBT2"),u=a("8wdmb"),l=a("hRVUs"),c=a("cuFNC");function f(t,e){var n=s.getCoords(t),r=s.getCoords(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],a=n[0][1],u=n[1][0],l=n[1][1],c=r[0][0],f=r[0][1],p=r[1][0],h=r[1][1],d=(h-f)*(u-i)-(p-c)*(l-a),g=(p-c)*(a-f)-(h-f)*(i-c),y=(u-i)*(a-f)-(l-a)*(i-c);if(0===d)return null;var A=g/d,v=y/d;if(A>=0&&A<=1&&v>=0&&v<=1){var m=i+A*(u-i),_=a+A*(l-a);return o.point([m,_])}return null}var p=function(t,e){var n={},i=[];if("LineString"===t.type&&(t=o.feature(t)),"LineString"===e.type&&(e=o.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var a=f(t,e);return a&&i.push(a),o.featureCollection(i)}var p=r(c)();return p.load(u.default(e)),l.featureEach(u.default(t),(function(t){l.featureEach(p.search(t),(function(e){var r=f(t,e);if(r){var o=s.getCoords(r).join(",");n[o]||(n[o]=!0,i.push(r))}}))})),o.featureCollection(i)}})),a.register("kB9B6",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"featureCollection",(function(){return s})),t(e.exports,"isObject",(function(){return l}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(t[0])||!u(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function l(t){return!!t&&t.constructor===Object}})),a.register("8wdmb",(function(e,n){t(e.exports,"default",(function(){return s}));var r=a("g7xIi"),i=a("dgBT2"),o=a("85QeT");var s=function(t){if(!t)throw new Error("geojson is required");var e=[];return o.flattenEach(t,(function(t){!function(t,e){var n=[],o=t.geometry;if(null!==o){switch(o.type){case"Polygon":n=i.getCoords(o);break;case"LineString":n=[i.getCoords(o)]}n.forEach((function(n){var i=function(t,e){var n=[];return t.reduce((function(t,i){var o,a,s,u,l,c,f=r.lineString([t,i],e);return f.bbox=(a=i,s=(o=t)[0],u=o[1],l=a[0],c=a[1],[s<l?s:l,u<c?u:c,s>l?s:l,u>c?u:c]),n.push(f),i})),n}(n,t.properties);i.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),r.featureCollection(e)}})),a.register("g7xIi",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"featureCollection",(function(){return s})),t(e.exports,"isObject",(function(){return l}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(t[0])||!u(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function l(t){return!!t&&t.constructor===Object}})),a.register("85QeT",(function(e,n){t(e.exports,"flattenEach",(function(){return o}));var r=a("g7xIi");function i(t,e){var n,r,i,o,a,s,u,l,c,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,f))return!1;p++}}function o(t,e){i(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:s,coordinates:t.coordinates[l]};if(!1===e(r.feature(c,i),n,l))return!1}}))}})),a.register("hRVUs",(function(e,n){t(e.exports,"featureEach",(function(){return r}));a("kB9B6");function r(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}})),a.register("cuFNC",(function(t,e){var n=a("8fKkL"),r=a("cEgh8"),i=a("3tYR4"),o=a("13MRZ").default,s=i.featureEach,u=(i.coordEach,r.polygon,r.featureCollection);function l(t){var e=new n(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:o(t),n.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:o(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:o(t),e.push(t)})),n.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:o(t),n.prototype.remove.call(this,t,e)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){var e=n.prototype.search.call(this,this.toBBox(t));return u(e)},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=n.prototype.all.call(this);return u(t)},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=o(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=o(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=l,t.exports.default=l})),a.register("8fKkL",(function(t,e){t.exports,t.exports=function(){"use strict";var t=function(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-u*c/s+f)),Math.min(o,Math.floor(r+(s-u)*c/s+f)),a)}var p=n[r],h=i,d=o;for(e(n,i,r),a(n[o],p)>0&&e(n,i,o);h<d;){for(e(n,h,d),h++,d--;a(n[h],p)<0;)h++;for(;a(n[d],p)>0;)d--}0===a(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)},e=function(t,e,n){var r=t[e];t[e]=t[n],t[n]=r},n=function(t,e){return t<e?-1:t>e?1:0},r=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1},i=function(t,e){o(t,0,t.children.length,e,t)},o=function(t,e,n,r,i){i||(i=h(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(i,t.leaf?r(s):s)}return i},a=function(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t},s=function(t,e){return t.minX-e.minX},u=function(t,e){return t.minY-e.minY},l=function(t){return(t.maxX-t.minX)*(t.maxY-t.minY)},c=function(t){return t.maxX-t.minX+(t.maxY-t.minY)},f=function(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY},p=function(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY},h=function(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},d=function(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}},g=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},g.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;n.push(i)}}e=n.pop()}return!1},g.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},g.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},g.prototype.clear=function(){return this.data=h([]),this},g.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],n=l.pop(),o=!0),a.leaf){var c=r(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!f(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(u.push(a),l.push(n),n=0,i=a,a=a.children[0])}return this},g.prototype.toBBox=function(t){return t},g.prototype.compareMinX=function(t,e){return t.minX-e.minX},g.prototype.compareMinY=function(t,e){return t.minY-e.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(t){return this.data=t,this},g.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},g.prototype._build=function(t,e,n,r){var o,a=n-e+1,s=this._maxEntries;if(a<=s)return i(o=h(t.slice(e,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(o=h([])).leaf=!1,o.height=r;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));d(t,e,n,l,this.compareMinX);for(var c=e;c<=n;c+=l){var f=Math.min(c+l-1,n);d(t,c,f,u,this.compareMinY);for(var p=c;p<=f;p+=u){var g=Math.min(p+u-1,f);o.children.push(this._build(t,p,g,r-1))}}return i(o,this.toBBox),o},g.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],c=l(u),f=(p=t,h=u,(Math.max(h.maxX,p.maxX)-Math.min(h.minX,p.minX))*(Math.max(h.maxY,p.maxY)-Math.min(h.minY,p.minY))-c);f<o?(o=f,i=c<i?c:i,a=u):f===o&&c<i&&(i=c,a=u)}e=a||e.children[0]}var p,h;return e},g.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),a(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},g.prototype._split=function(t,e){var n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var a=this._chooseSplitIndex(n,o,r),s=h(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,i(n,this.toBBox),i(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},g.prototype._splitRoot=function(t,e){this.data=h([t,e]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,a,s,u,c,f,p=1/0,h=1/0,d=e;d<=n-e;d++){var g=o(t,0,d,this.toBBox),y=o(t,d,n,this.toBBox),A=(i=g,a=y,s=void 0,u=void 0,c=void 0,f=void 0,s=Math.max(i.minX,a.minX),u=Math.max(i.minY,a.minY),c=Math.min(i.maxX,a.maxX),f=Math.min(i.maxY,a.maxY),Math.max(0,c-s)*Math.max(0,f-u)),v=l(g)+l(y);A<p?(p=A,r=d,h=v<h?v:h):A===p&&v<h&&(h=v,r=d)}return r||n-e},g.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:s,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},g.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,s=o(t,0,e,i),u=o(t,n-e,n,i),l=c(s)+c(u),f=e;f<n-e;f++){var p=t.children[f];a(s,t.leaf?i(p):p),l+=c(s)}for(var h=n-e-1;h>=e;h--){var d=t.children[h];a(u,t.leaf?i(d):d),l+=c(u)}return l},g.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},g.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():i(t[e],this.toBBox)},g}()})),a.register("cEgh8",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return s})),t(e.exports,"polygon",(function(){return o})),t(e.exports,"featureCollection",(function(){return u})),t(e.exports,"isObject",(function(){return c}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!l(t[0])||!l(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function s(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function u(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function l(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function c(t){return!!t&&t.constructor===Object}})),a.register("3tYR4",(function(e,n){t(e.exports,"coordEach",(function(){return r})),t(e.exports,"featureEach",(function(){return i}));a("cEgh8");function r(t,e,n){if(null!==t)for(var i,o,a,s,u,l,c,f,p=0,h=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,A=g?t.features.length:1,v=0;v<A;v++){u=(f=!!(c=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<u;m++){var _=0,b=0;if(null!==(s=f?c.geometries[m]:c)){l=s.coordinates;var x=s.type;switch(p=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],h,v,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-p;o++){if(!1===e(l[i][o],h,v,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-p;a++){if(!1===e(l[i][o][a],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}})),a.register("gkFW0",(function(e,n){t(e.exports,"flattenEach",(function(){return o}));var r=a("cZleT");function i(t,e){var n,r,i,o,a,s,u,l,c,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,f))return!1;p++}}function o(t,e){i(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:s,coordinates:t.coordinates[l]};if(!1===e(r.feature(c,i),n,l))return!1}}))}})),a.register("cZleT",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"isObject",(function(){return u}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(t[0])||!s(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}})),a.register("cqRzY",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return s}));var i=a("fkXdW"),o=a("3QERd");var s=function(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,a=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},s=[],u=0;u<r;u++)s.push(i.default(t,e,-360*u/r,n).geometry.coordinates);return s.push(s[0]),o.polygon([s],a)}})),a.register("3QERd",(function(e,n){t(e.exports,"polygon",(function(){return i}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}})),a.register("2i7l9",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.TranslateMode=void 0;var n=f(a("2w221")),r=f(a("h91qW")),i=f(a("5rjzh")),o=a("eoCq7"),s=f(a("1Ft0x")),u=a("lbHm2"),l=a("ed261"),c=a("36osE");function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(b,t);var e,a,l,f,p=(e=b,function(){var t,n=v(e);if(A()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function b(){var t;h(this,b);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _(y(t=p.call.apply(p,[this].concat(n))),"_geometryBeforeTranslate",void 0),_(y(t),"_isTranslatable",void 0),t}return a=b,(l=[{key:"handleDragging",value:function(t,e){if(this._isTranslatable){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translating",e);n&&e.onEdit(n)}t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){this._isTranslatable=this.isSelectionPicked(t.pointerDownPicks||t.picks,e),this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translated",e);n&&e.onEdit(n),this._geometryBeforeTranslate=null}}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("move"):t.onUpdateCursor(null)}},{key:"getTranslateAction",value:function(t,e,a,l){var f=this;if(!this._geometryBeforeTranslate)return null;var p=new c.ImmutableFeatureCollection(l.data),h=l.selectedIndexes,d=l.modeConfig||{},g=d.viewport,y=d.screenSpace;if(g&&y)!function(){for(var n=g.project?g:new s.default(g),r=n.project(t),i=n.project(e),o=i[0]-r[0],a=i[1]-r[1],l=0;l<h.length;l++){var c=h[l],d=f._geometryBeforeTranslate.features[l],y=d.geometry.coordinates;y&&(y=(0,u.mapCoords)(y,(function(t){var e=n.project(t);return e?(e[0]+=o,e[1]+=a,n.unproject(e)):null})),p=p.replaceGeometry(c,{type:d.geometry.type,coordinates:y}))}}();else for(var A=(0,o.point)(t),v=(0,o.point)(e),m=(0,r.default)(A,v),_=(0,n.default)(A,v),b=(0,i.default)(this._geometryBeforeTranslate,m,_),x=0;x<h.length;x++){var w=h[x],E=b.features[x];p=p.replaceGeometry(w,E.geometry)}return{updatedData:p.getObject(),editType:a,editContext:{featureIndexes:h}}}}])&&d(a.prototype,l),f&&d(a,f),b}(l.GeoJsonEditMode);t.exports.TranslateMode=b})),a.register("5rjzh",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return c}));var i=a("8ajgE"),o=a("kEqDe"),s=a("dgBT2"),u=a("5XQFC"),l=a("jHby9");var c=function(t,e,n,r){if(r=r||{},!o.isObject(r))throw new Error("options is invalid");var a=r.units,c=r.zTranslation,f=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(c&&"number"!=typeof c&&isNaN(c))throw new Error("zTranslation is not a number");if(c=void 0!==c?c:0,0===e&&0===c)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==f&&void 0!==f||(t=u.default(t)),i.coordEach(t,(function(t){var r=s.getCoords(l.default(t,e,n,{units:a}));t[0]=r[0],t[1]=r[1],c&&3===t.length&&(t[2]+=c)})),t}})),a.register("8ajgE",(function(e,n){t(e.exports,"coordEach",(function(){return r}));a("kEqDe");function r(t,e,n){if(null!==t)for(var i,o,a,s,u,l,c,f,p=0,h=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,A=g?t.features.length:1,v=0;v<A;v++){u=(f=!!(c=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<u;m++){var _=0,b=0;if(null!==(s=f?c.geometries[m]:c)){l=s.coordinates;var x=s.type;switch(p=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],h,v,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-p;o++){if(!1===e(l[i][o],h,v,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-p;a++){if(!1===e(l[i][o][a],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}})),a.register("kEqDe",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"isObject",(function(){return u}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(t[0])||!s(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}})),a.register("jHby9",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("bF0xz"),i=a("dgBT2");var o=function(t,e,n,o){void 0===o&&(o={});var a=e<0,s=r.convertLength(Math.abs(e),o.units,"meters");a&&(s=-Math.abs(s));var u=i.getCoord(t),l=function(t,e,n,i){i=void 0===i?r.earthRadius:Number(i);var o=e/i,a=t[0]*Math.PI/180,s=r.degreesToRadians(t[1]),u=r.degreesToRadians(n),l=o*Math.cos(u),c=s+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var f=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),p=Math.abs(f)>1e-11?l/f:Math.cos(s),h=o*Math.sin(u)/p;return[(180*(a+h)/Math.PI+540)%360-180,180*c/Math.PI]}(u,s,n);return l[0]+=l[0]-u[0]>180?-360:u[0]-l[0]>180?360:0,r.point(l,o.properties)}})),a.register("bF0xz",(function(e,n){t(e.exports,"earthRadius",(function(){return r})),t(e.exports,"point",(function(){return s})),t(e.exports,"degreesToRadians",(function(){return l})),t(e.exports,"convertLength",(function(){return c}));a("5qgrd");var r=6371008.8,i={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:1.0936*r};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function u(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function l(t){return t%360*Math.PI/180}function c(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return function(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}(u(t,e),n)}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}})),a.register("8iJxM",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ScaleMode=void 0;var n=y(a("13MRZ")),r=y(a("lIofd")),i=y(a("2w221")),o=y(a("aMWv9")),s=a("eoCq7"),u=y(a("8r1vr")),l=a("ltHp8"),c=y(a("h91qW")),f=y(a("3dYIo")),p=a("dgBT2"),h=a("lbHm2"),d=a("ed261"),g=a("36osE");function y(t){return t&&t.__esModule?t:{default:t}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?w(t):e}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(A,t);var e,a,c,d,y=(e=A,function(){var t,n=S(e);if(E()){var r=S(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return x(this,t)});function A(){var t;_(this,A);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return k(w(t=y.call.apply(y,[this].concat(n))),"_geometryBeingScaled",void 0),k(w(t),"_selectedEditHandle",void 0),k(w(t),"_cornerGuidePoints",void 0),k(w(t),"_cursor",void 0),k(w(t),"_isScaling",!1),k(w(t),"_isSinglePointGeometrySelected",(function(t){var e=(t||{}).features;return!(!Array.isArray(e)||1!==e.length)&&"Point"===(0,p.getGeom)(e[0]).type})),k(w(t),"_getOppositeScaleHandle",(function(e){var n=e&&e.properties&&Array.isArray(e.properties.positionIndexes)&&e.properties.positionIndexes[0];if("number"!=typeof n)return null;var r=t._cornerGuidePoints.length,i=(n+r/2)%r;return t._cornerGuidePoints.find((function(t){return!!Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0]===i}))})),k(w(t),"_getUpdatedData",(function(t,e){for(var n=new g.ImmutableFeatureCollection(t.data),r=t.selectedIndexes,i=0;i<r.length;i++){var o=r[i],a=e.features[i];n=n.replaceGeometry(o,a.geometry)}return n.getObject()})),k(w(t),"isEditHandleSelected",(function(){return Boolean(t._selectedEditHandle)})),k(w(t),"getScaleAction",(function(e,n,r,i){if(!t._selectedEditHandle)return null;var o=t._getOppositeScaleHandle(t._selectedEditHandle),a=(0,p.getCoord)(o),s=T(a,e,n),u=(0,f.default)(t._geometryBeingScaled,s,{origin:a});return{updatedData:t._getUpdatedData(i,u),editType:r,editContext:{featureIndexes:i.selectedIndexes}}})),k(w(t),"updateCursor",(function(e){if(t._selectedEditHandle){t._cursor&&e.onUpdateCursor(t._cursor);var n=t.getSelectedFeaturesAsFeatureCollection(e),o=(0,r.default)(n),a=(0,i.default)(o,t._selectedEditHandle),s=a<0?a+180:a;s>=0&&s<=90||s>=180&&s<=270?(t._cursor="nesw-resize",e.onUpdateCursor("nesw-resize")):(t._cursor="nwse-resize",e.onUpdateCursor("nwse-resize"))}else e.onUpdateCursor(null),t._cursor=null})),t}return a=A,(c=[{key:"handlePointerMove",value:function(t,e){if(!this._isScaling){var n=(0,h.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"scale"===n.properties.editHandleType?n:null,this.updateCursor(e)}}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleDragging",value:function(t,e){if(this._isScaling){e.onUpdateCursor(this._cursor);var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaling",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handleStopDragging",value:function(t,e){if(this._isScaling){var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaled",e);n&&e.onEdit(n),e.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}},{key:"getGuides",value:function(t){this._cornerGuidePoints=[];var e=this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};var r=(0,o.default)((0,n.default)(e));r.properties.mode="scale";var i=[];return(0,l.coordEach)(r,(function(t,e){if(e<4){var n=(0,s.point)(t,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[e]});i.push(n)}})),this._cornerGuidePoints=i,(0,s.featureCollection)([(0,u.default)(r)].concat(v(this._cornerGuidePoints)))}}])&&b(a.prototype,c),d&&b(a,d),A}(d.GeoJsonEditMode);function T(t,e,n){var r=(0,c.default)(t,e);return(0,c.default)(t,n)/r}t.exports.ScaleMode=C})),a.register("lIofd",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return s}));var i=a("9JVSN"),o=a("iZE7M");var s=function(t,e){void 0===e&&(e={});var n=0,r=0,a=0;return i.coordEach(t,(function(t){n+=t[0],r+=t[1],a++}),!0),o.point([n/a,r/a],e.properties)}})),a.register("9JVSN",(function(e,n){t(e.exports,"coordEach",(function(){return r}));a("iZE7M");function r(t,e,n){if(null!==t)for(var i,o,a,s,u,l,c,f,p=0,h=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,A=g?t.features.length:1,v=0;v<A;v++){u=(f=!!(c=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<u;m++){var _=0,b=0;if(null!==(s=f?c.geometries[m]:c)){l=s.coordinates;var x=s.type;switch(p=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],h,v,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-p;o++){if(!1===e(l[i][o],h,v,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-p;a++){if(!1===e(l[i][o][a],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}})),a.register("iZE7M",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"isObject",(function(){return u}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(t[0])||!s(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}})),a.register("8r1vr",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return s})),t(e.exports,"polygonToLine",(function(){return u})),t(e.exports,"multiPolygonToLine",(function(){return l})),t(e.exports,"coordsToLine",(function(){return c}));var i=a("c1NtK"),o=a("dgBT2");function s(t,e){void 0===e&&(e={});var n=o.getGeom(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return u(n,e);case"MultiPolygon":return l(n,e);default:throw new Error("invalid poly")}}function u(t,e){return void 0===e&&(e={}),c(o.getGeom(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function l(t,e){void 0===e&&(e={});var n=o.getGeom(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},a=[];return n.forEach((function(t){a.push(c(t,r))})),i.featureCollection(a)}function c(t,e){return t.length>1?i.multiLineString(t,e):i.lineString(t[0],e)}})),a.register("c1NtK",(function(e,n){t(e.exports,"lineString",(function(){return i})),t(e.exports,"multiLineString",(function(){return s})),t(e.exports,"featureCollection",(function(){return o}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function o(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}})),a.register("3dYIo",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return y}));var i=a("5XQFC"),o=a("gvC1G"),s=a("lIofd"),u=a("gcTAZ"),l=a("51OLG"),c=a("l8SWm"),f=a("jHby9"),p=a("481bD"),h=a("7zffL"),d=a("dgBT2");function g(t,e,n){var r="Point"===d.getType(t);return n=function(t,e){null==e&&(e="centroid");if(Array.isArray(e)||"object"==typeof e)return d.getCoord(e);var n=t.bbox?t.bbox:u.default(t),r=n[0],i=n[1],a=n[2],l=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return h.point([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return h.point([a,i]);case"nw":case"northwest":case"westnorth":case"topleft":return h.point([r,l]);case"ne":case"northeast":case"eastnorth":case"topright":return h.point([a,l]);case"center":return o.default(t);case void 0:case null:case"centroid":return s.default(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||p.coordEach(t,(function(t){var r=c.default(n,t),i=l.default(n,t),o=r*e,a=d.getCoords(f.default(n,o,i));t[0]=a[0],t[1]=a[1],3===t.length&&(t[2]*=e)})),t}var y=function(t,e,n){if(n=n||{},!h.isObject(n))throw new Error("options is invalid");var r=n.origin,o=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var a=Array.isArray(r)||"object"==typeof r;return!0!==o&&(t=i.default(t)),"FeatureCollection"!==t.type||a?g(t,e,r):(p.featureEach(t,(function(n,i){t.features[i]=g(n,e,r)})),t)}})),a.register("gcTAZ",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("481bD");function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i;var o=i})),a.register("481bD",(function(e,n){t(e.exports,"coordEach",(function(){return r})),t(e.exports,"featureEach",(function(){return i}));a("7zffL");function r(t,e,n){if(null!==t)for(var i,o,a,s,u,l,c,f,p=0,h=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,A=g?t.features.length:1,v=0;v<A;v++){u=(f=!!(c=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<u;m++){var _=0,b=0;if(null!==(s=f?c.geometries[m]:c)){l=s.coordinates;var x=s.type;switch(p=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],h,v,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-p;o++){if(!1===e(l[i][o],h,v,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-p;a++){if(!1===e(l[i][o][a],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}})),a.register("7zffL",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"isObject",(function(){return u}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(t[0])||!s(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}})),a.register("51OLG",(function(e,n){t(e.exports,"default",(function(){return s}));var r=a("DTEO0"),i=a("dgBT2");function o(t,e){var n=r.degreesToRadians(t[1]),i=r.degreesToRadians(e[1]),o=r.degreesToRadians(e[0]-t[0]);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);var a=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),s=Math.atan2(o,a);return(r.radiansToDegrees(s)+360)%360}var s=function(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?o(i.getCoord(e),i.getCoord(t)):o(i.getCoord(t),i.getCoord(e)))>180?-(360-r):r}})),a.register("DTEO0",(function(e,n){t(e.exports,"radiansToDegrees",(function(){return r})),t(e.exports,"degreesToRadians",(function(){return i}));a("5qgrd");function r(t){return 180*(t%(2*Math.PI))/Math.PI}function i(t){return t%360*Math.PI/180}})),a.register("YsHem",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.RotateMode=void 0;var n=y(a("13MRZ")),r=y(a("lIofd")),i=y(a("2w221")),o=y(a("aMWv9")),s=y(a("h91qW")),u=a("ltHp8"),l=a("dgBT2"),c=a("eoCq7"),f=y(a("h53i1")),p=y(a("8r1vr")),h=a("lbHm2"),d=a("ed261"),g=a("36osE");function y(t){return t&&t.__esModule?t:{default:t}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(k,t);var e,a,y,A,P=(e=k,function(){var t,n=w(e);if(x()){var r=w(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _(this,t)});function k(){var t;v(this,k);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return S(b(t=P.call.apply(P,[this].concat(n))),"_selectedEditHandle",void 0),S(b(t),"_geometryBeingRotated",void 0),S(b(t),"_isRotating",!1),S(b(t),"_isSinglePointGeometrySelected",(function(t){var e=(t||{}).features;return!(!Array.isArray(e)||1!==e.length)&&"Point"===(0,l.getGeom)(e[0]).type})),S(b(t),"getIsRotating",(function(){return t._isRotating})),t}return a=k,(y=[{key:"getGuides",value:function(t){var e=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};if(this._isRotating)return(0,c.featureCollection)([(0,r.default)(e)]);var i=(0,o.default)((0,n.default)(e)),a=null,l=null,f=0;(0,u.coordEach)(i,(function(t){if(a){var e=(0,d.getIntermediatePosition)(t,a);(!l||e[1]>l[1])&&(l=e);var n=(0,s.default)(t,a);f=Math.max(f,n)}a=t}));var h=l&&[l[0],l[1]+f/1e3],g=(0,c.lineString)([l,h]),y=(0,c.point)(h,{guideType:"editHandle",editHandleType:"rotate"});return(0,c.featureCollection)([(0,p.default)(i),y,g])}},{key:"handleDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotating",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){if(!this._isRotating){var n=(0,h.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"rotate"===n.properties.editHandleType?n:null}this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotated",e);n&&e.onEdit(n),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}},{key:"updateCursor",value:function(t){this._selectedEditHandle?t.onUpdateCursor("crosshair"):t.onUpdateCursor(null)}},{key:"getRotateAction",value:function(t,e,n,o){if(!this._geometryBeingRotated)return null;for(var a=(0,r.default)(this._geometryBeingRotated),s=function(t,e,n){var r=(0,i.default)(t,e);return(0,i.default)(t,n)-r}(a,t,e),u=(0,f.default)(this._geometryBeingRotated,s,{pivot:a}),l=new g.ImmutableFeatureCollection(o.data),c=o.selectedIndexes,p=0;p<c.length;p++){var h=c[p],d=u.features[p];l=l.replaceGeometry(h,d.geometry)}return{updatedData:l.getObject(),editType:n,editContext:{featureIndexes:c}}}}])&&m(a.prototype,y),A&&m(a,A),k}(d.GeoJsonEditMode);t.exports.RotateMode=P})),a.register("h53i1",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return h}));var i=a("lIofd"),o=a("51OLG"),s=a("l8SWm"),u=a("jHby9"),l=a("5XQFC"),c=a("7BofK"),f=a("dgBT2"),p=a("4RPLn");var h=function(t,e,n){if(n=n||{},!p.isObject(n))throw new Error("options is invalid");var r=n.pivot,a=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=i.default(t)),!1!==a&&void 0!==a||(t=l.default(t)),c.coordEach(t,(function(t){var n=o.default(r,t)+e,i=s.default(r,t),a=f.getCoords(u.default(r,i,n));t[0]=a[0],t[1]=a[1]}))),t}})),a.register("7BofK",(function(e,n){t(e.exports,"coordEach",(function(){return r}));a("4RPLn");function r(t,e,n){if(null!==t)for(var i,o,a,s,u,l,c,f,p=0,h=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,A=g?t.features.length:1,v=0;v<A;v++){u=(f=!!(c=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<u;m++){var _=0,b=0;if(null!==(s=f?c.geometries[m]:c)){l=s.coordinates;var x=s.type;switch(p=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],h,v,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-p;o++){if(!1===e(l[i][o],h,v,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-p;a++){if(!1===e(l[i][o][a],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}})),a.register("4RPLn",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"isObject",(function(){return u}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(t[0])||!s(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}})),a.register("ftCxA",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DuplicateMode=void 0;var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(h,t);var e,n,a,f,p=(e=h,function(){var t,n=l(e);if(u()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return r(this,h),p.apply(this,arguments)}return n=h,(a=[{key:"handleStartDragging",value:function(t,e){o(l(h.prototype),"handleStartDragging",this).call(this,t,e),this._geometryBeforeTranslate&&e.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,e.data))}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("copy"):t.onUpdateCursor(null)}}])&&i(n.prototype,a),f&&i(n,f),h}(a("2i7l9").TranslateMode);t.exports.DuplicateMode=f})),a.register("8336T",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ExtendLineStringMode=void 0;var n=a("ed261"),r=a("36osE");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,i,a,p=(e=h,function(){var t,n=c(e);if(l()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return o(this,h),p.apply(this,arguments)}return n=h,(i=[{key:"getSingleSelectedLineString",value:function(t){var e=this.getSelectedGeometry(t);return e&&"LineString"===e.type?e:null}},{key:"handleClick",value:function(t,e){var n=e.selectedIndexes,i=this.getSingleSelectedLineString(e);if(i){var o=[i.coordinates.length],a=e.modeConfig;a&&a.drawAtFront&&(o=[0]);var s=n[0],u=new r.ImmutableFeatureCollection(e.data).addPosition(s,o,t.mapCoords).getObject();e.onEdit({updatedData:u,editType:"addPosition",editContext:{featureIndexes:[s],positionIndexes:o,position:t.mapCoords}})}else console.warn("ExtendLineStringMode only supported for single LineString selection")}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=this.getSingleSelectedLineString(t);if(!n)return e;var r=t.lastPointerMoveEvent&&t.lastPointerMoveEvent.mapCoords,i=null,o=t.modeConfig;return i=o&&o.drawAtFront?n.coordinates[0]:n.coordinates[n.coordinates.length-1],e.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[i,r]}}),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}])&&s(n.prototype,i),a&&s(n,a),h}(n.GeoJsonEditMode);t.exports.ExtendLineStringMode=p})),a.register("ixlO7",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.SplitPolygonMode=void 0;var n=y(a("9udG3")),r=y(a("jlhKK")),i=y(a("61ZcP")),o=y(a("hYu1V")),s=a("eoCq7"),u=y(a("2w221")),l=y(a("h91qW")),c=y(a("fkXdW")),f=y(a("8r1vr")),p=y(a("67Noe")),h=a("lbHm2"),d=a("ed261"),g=a("36osE");function y(t){return t&&t.__esModule?t:{default:t}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(_,t);var e,a,d,y,A=(e=_,function(){var t,n=P(e);if(S()){var r=P(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return E(this,t)});function _(){return x(this,_),A.apply(this,arguments)}return a=_,(d=[{key:"calculateMapCoords",value:function(t,e,n){var r=n.modeConfig;if(!r||!r.lock90Degree||!t.length)return e;if(1===t.length){var i=t[0],o=this.getSelectedGeometry(n),a=(0,f.default)(o),d="FeatureCollection"===a.type?a.features:[a],g=Number.MAX_SAFE_INTEGER,y=null;if(d.forEach((function(t){var e=(0,p.default)(t,i),n=(0,l.default)(e,i);g>n&&(g=n,y=e)})),y){var A=(0,u.default)(i,y),v=(0,l.default)(i,e,{units:"meters"});return(0,c.default)(i,v,A,{units:"meters"}).geometry.coordinates}return e}var _=t[t.length-1],b=m((0,h.generatePointsParallelToLinePoints)(t[t.length-2],_,e),1)[0];return(0,p.default)((0,s.lineString)([_,b]),e).geometry.coordinates}},{key:"getGuides",value:function(t){var e=this.getClickSequence(),n={type:"FeatureCollection",features:[]};if(0===e.length||!t.lastPointerMoveEvent)return n;var r=t.lastPointerMoveEvent.mapCoords;return n.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(v(e),[this.calculateMapCoords(e,r,t)])}}),n}},{key:"handleClick",value:function(t,e){var r=this.getTentativeGuide(e),i=this.getSelectedGeometry(e);if(i){var a=this.getClickSequence();r&&"LineString"===r.geometry.type?a.push(r.geometry.coordinates[r.geometry.coordinates.length-1]):this.addClickSequence(t);var s={type:"Point",coordinates:a[a.length-1]},u=(0,n.default)(s,i);if(a.length>1&&r&&!u){if(this.resetClickSequence(),0===(0,o.default)(r,i).features.length)return;var l=this.splitPolygon(r,e);l&&e.onEdit(l)}}else console.warn("A polygon must be selected for splitting")}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"splitPolygon",value:function(t,e){var n=this.getSelectedGeometry(e),o=e.selectedIndexes[0],a=e.modeConfig||{},s=a.gap,u=void 0===s?.1:s,l=a.units,c=void 0===l?"centimeters":l;0===u&&(u=.1,c="centimeters");var f=(0,i.default)(t,u,{units:c}),p=(0,r.default)(n,f);if(!p)return console.warn("Canceling edit. Split Polygon erased"),null;var h=p.geometry,d=h.type,y=h.coordinates,A=[];return A="Polygon"===d?y.map((function(t){return[t]})):y.reduce((function(t,e){return e.forEach((function(e){t.push([e])})),t}),[]),{updatedData:new g.ImmutableFeatureCollection(e.data).replaceGeometry(o,{type:"MultiPolygon",coordinates:A}).getObject(),editType:"split",editContext:{featureIndexes:[o]}}}}])&&w(a.prototype,d),y&&w(a,y),_}(d.GeoJsonEditMode);t.exports.SplitPolygonMode=C})),a.register("9udG3",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return o}));var i=a("dgBT2");function o(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=i.getCoord(t),o=i.getGeom(e),a=o.type,u=e.bbox,l=o.coordinates;if(u&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,u))return!1;"Polygon"===a&&(l=[l]);for(var c=!1,f=0;f<l.length&&!c;f++)if(s(r,l[f][0],n.ignoreBoundary)){for(var p=!1,h=1;h<l[f].length&&!p;)s(r,l[f][h],!n.ignoreBoundary)&&(p=!0),h++;p||(c=!0)}return c}function s(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!n;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(r=!r)}return r}})),a.register("i57E4",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ExtrudeMode=void 0;var n,r=(n=a("2w221"))&&n.__esModule?n:{default:n},i=a("lbHm2"),o=a("633qg"),s=a("36osE");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(f,t);var e,n,o,a,u=(e=f,function(){var t,n=v(e);if(A()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function f(){var t;h(this,f);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _(y(t=u.call.apply(u,[this].concat(n))),"isPointAdded",!1),t}return n=f,(o=[{key:"handleDragging",value:function(t,e){var n=(0,i.getPickedEditHandle)(t.pointerDownPicks);if(n){var r=n.properties.featureIndex,o=n.properties.positionIndexes,a=this.coordinatesSize(o,r,e.data);o=this.isPointAdded?this.nextPositionIndexes(o,a):o;var u=this.getPointForPositionIndexes(this.prevPositionIndexes(o,a),r,e.data),l=this.getPointForPositionIndexes(o,r,e.data);if(u&&l){var f=c((0,i.generatePointsParallelToLinePoints)(u,l,t.mapCoords),2),p=f[0],h=f[1],d=new s.ImmutableFeatureCollection(e.data).replacePosition(r,this.prevPositionIndexes(o,a),h).replacePosition(r,o,p).getObject();e.onEdit({updatedData:d,editType:"extruding",editContext:{featureIndexes:[r],positionIndexes:this.nextPositionIndexes(o,a),position:p}}),t.cancelPan()}}}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,i.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var o=r.properties,a=o.positionIndexes,u=o.featureIndex,l=this.coordinatesSize(a,u,e.data),c=this.getPointForPositionIndexes(this.prevPositionIndexes(a,l),u,e.data),f=this.getPointForPositionIndexes(a,u,e.data);if(c&&f){var p=new s.ImmutableFeatureCollection(e.data);this.isOrthogonal(a,u,l,e.data)||(p=p.addPosition(u,a,f)),this.isOrthogonal(this.prevPositionIndexes(a,l),u,l,e.data)||(p=p.addPosition(u,a,c),this.isPointAdded=!0),e.onEdit({updatedData:p.getObject(),editType:"startExtruding",editContext:{featureIndexes:[u],positionIndexes:a,position:c}})}}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,i.getPickedEditHandle)(t.pointerDownPicks);if(n.length&&r){var o=r.properties.featureIndex,a=r.properties.positionIndexes,u=this.coordinatesSize(a,o,e.data);a=this.isPointAdded?this.nextPositionIndexes(a,u):a;var l=this.getPointForPositionIndexes(this.prevPositionIndexes(a,u),o,e.data),f=this.getPointForPositionIndexes(a,o,e.data);if(l&&f){var p=c((0,i.generatePointsParallelToLinePoints)(l,f,t.mapCoords),2),h=p[0],d=p[1],g=new s.ImmutableFeatureCollection(e.data).replacePosition(o,this.prevPositionIndexes(a,u),d).replacePosition(o,a,h).getObject();e.onEdit({updatedData:g,editType:"extruded",editContext:{featureIndexes:[o],positionIndexes:a,position:h}})}}this.isPointAdded=!1}},{key:"coordinatesSize",value:function(t,e,n){var r=n.features,i=0;if(Array.isArray(t)){var o=r[e].geometry.coordinates;if(3===t.length){var a=c(t,2),s=a[0],u=a[1];o.length&&o[s].length&&(i=o[s][u].length)}else{var l=c(t,1)[0];o.length&&o[l].length&&(i=o[l].length)}}return i}},{key:"getBearing",value:function(t,e){var n=(0,r.default)(t,e);return n<0?Math.floor(360+n):Math.floor(n)}},{key:"isOrthogonal",value:function(t,e,n,r){if(!Array.isArray(t))return!1;t[t.length-1]===n-1&&(t[t.length-1]=0);var i=this.getPointForPositionIndexes(this.prevPositionIndexes(t,n),e,r),o=this.getPointForPositionIndexes(this.nextPositionIndexes(t,n),e,r),a=this.getPointForPositionIndexes(t,e,r),s=this.getBearing(a,i),u=this.getBearing(a,o);return[89,90,91,269,270,271].includes(Math.abs(s-u))}},{key:"nextPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=l(t);return n.length&&(n[n.length-1]=n[n.length-1]===e-1?0:n[n.length-1]+1),n}},{key:"prevPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=l(t);return n.length&&(n[n.length-1]=0===n[n.length-1]?e-2:n[n.length-1]-1),n}},{key:"getPointForPositionIndexes",value:function(t,e,n){var r,i=n.features;if(Array.isArray(t)){var o=i[e].geometry.coordinates;if(3===t.length){var a=c(t,3),s=a[0],u=a[1],l=a[2];o.length&&o[s].length&&(r=o[s][u][l])}else{var f=c(t,2),p=f[0],h=f[1];o.length&&o[p].length&&(r=o[p][h])}}return r}}])&&d(n.prototype,o),a&&d(n,a),f}(o.ModifyMode);t.exports.ExtrudeMode=b})),a.register("idBVd",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ElevationMode=void 0;var n=a("lbHm2");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=t.pointerDownScreenCoords,n=t.screenCoords;return 10*(e[1]-n[1])}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(g,t);var e,r,a,h,d=(e=g,function(){var t,n=c(e);if(l()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function g(){return i(this,g),d.apply(this,arguments)}return r=g,h=[{key:"calculateElevationChangeWithViewport",value:function(t,e){var n=e.pointerDownScreenCoords,r=e.screenCoords;return 156543.03392*Math.cos(t.latitude*Math.PI/180)/Math.pow(2,t.zoom)*(n[1]-r[1])/2}}],(a=[{key:"makeElevatedEvent",value:function(t,e,n){var r=n.modeConfig||{},i=r.minElevation,o=void 0===i?0:i,a=r.maxElevation,s=void 0===a?2e4:a,u=r.calculateElevationChange,l=void 0===u?p:u;if(!t.pointerDownScreenCoords)return t;var c=3===e.length?e[2]:0;return c+=l({pointerDownScreenCoords:t.pointerDownScreenCoords,screenCoords:t.screenCoords}),c=Math.min(c,s),c=Math.max(c,o),Object.assign({},t,{mapCoords:[e[0],e[1],c]})}},{key:"handlePointerMove",value:function(t,e){var r=(0,n.getPickedEditHandle)(t.pointerDownPicks),i=r?r.geometry.coordinates:t.mapCoords;s(c(g.prototype),"handlePointerMove",this).call(this,this.makeElevatedEvent(t,i,e),e)}},{key:"handleStopDragging",value:function(t,e){var r=(0,n.getPickedEditHandle)(t.picks),i=r?r.geometry.coordinates:t.mapCoords;s(c(g.prototype),"handleStopDragging",this).call(this,this.makeElevatedEvent(t,i,e),e)}},{key:"getCursor",value:function(t){var e=s(c(g.prototype),"getCursor",this).call(this,t);return"cell"===e&&(e="ns-resize"),e}}])&&o(r.prototype,a),h&&o(r,h),g}(a("633qg").ModifyMode);t.exports.ElevationMode=h})),a.register("amHrB",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.TransformMode=void 0;var n=a("eoCq7"),r=a("2i7l9"),i=a("8iJxM"),o=a("YsHem");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(v,t);var e,a,s,y,A=(e=v,function(){var t,n=d(e);if(h()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function v(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),A.call(this,[new r.TranslateMode,new i.ScaleMode,new o.RotateMode])}return a=v,s=[{key:"handlePointerMove",value:function(t,e){var n=null;f(d(v.prototype),"handlePointerMove",this).call(this,t,function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({},e,{onUpdateCursor:function(t){n=t||n}})),e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=null,o=null,a=[];this._modes.forEach((function(t){t instanceof r.TranslateMode?o=t:(t instanceof i.ScaleMode&&(n=t),a.push(t))})),n instanceof i.ScaleMode&&!n.isEditHandleSelected()&&a.push(o),a.filter(Boolean).forEach((function(n){return n.handleStartDragging(t,e)}))}},{key:"getGuides",value:function(t){var e=f(d(v.prototype),"getGuides",this).call(this,t),r=(this._modes||[]).find((function(t){return t instanceof o.RotateMode}));if(r instanceof o.RotateMode){var i=e.features.filter((function(t){var e=t.properties||{},n=e.editHandleType,i=[e.mode];return r.getIsRotating()&&i.push(n),!i.includes("scale")}));e=(0,n.featureCollection)(i)}return e}}],s&&c(a.prototype,s),y&&c(a,y),v}(a("4dSAf").CompositeMode);t.exports.TransformMode=y})),a.register("4dSAf",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.CompositeMode=void 0;var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,o,a,h=(e=d,function(){var t,n=f(e);if(c()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function d(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),e=h.call(this),n=l(e),i=void 0,(r="_modes")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e._modes=t,e}return n=d,o=[{key:"_coalesce",value:function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0;r<this._modes.length&&(e=t(this._modes[r]),!(n?n(e):e));r++);return e}},{key:"handleClick",value:function(t,e){this._coalesce((function(n){return n.handleClick(t,e)}))}},{key:"handlePointerMove",value:function(t,e){return this._coalesce((function(n){return n.handlePointerMove(t,e)}))}},{key:"handleStartDragging",value:function(t,e){return this._coalesce((function(n){return n.handleStartDragging(t,e)}))}},{key:"handleStopDragging",value:function(t,e){return this._coalesce((function(n){return n.handleStopDragging(t,e)}))}},{key:"handleDragging",value:function(t,e){return this._coalesce((function(n){return n.handleDragging(t,e)}))}},{key:"getGuides",value:function(t){var e,n=[],o=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=i(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this._modes);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push.apply(n,r(a.getGuides(t).features))}}catch(t){o.e(t)}finally{o.f()}return{type:"FeatureCollection",features:n}}}],o&&s(n.prototype,o),a&&s(n,a),d}(a("ed261").GeoJsonEditMode);t.exports.CompositeMode=h})),a.register("90zJR",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawPointMode=void 0;var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(h,t);var e,n,a,f,p=(e=h,function(){var t,n=l(e);if(u()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return r(this,h),p.apply(this,arguments)}return n=h,(a=[{key:"createTentativeFeature",value:function(t){var e=t.lastPointerMoveEvent;return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:(e?[e.mapCoords]:[])[0]}}}},{key:"handleClick",value:function(t,e){var n={type:"Point",coordinates:t.mapCoords};e.onEdit(this.getAddFeatureAction(n,e.data))}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),o(l(h.prototype),"handlePointerMove",this).call(this,t,e)}}])&&i(n.prototype,a),f&&i(n,f),h}(a("ed261").GeoJsonEditMode);t.exports.DrawPointMode=f})),a.register("iw7cl",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawLineStringMode=void 0;var n=a("lbHm2");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,r,o,a,h=(e=d,function(){var t,n=f(e);if(c()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function d(){return s(this,d),h.apply(this,arguments)}return r=d,(o=[{key:"handleClick",value:function(t,e){var r=t.picks,o=(0,n.getPickedEditHandle)(r),a=!1;o||(this.addClickSequence(t),a=!0);var s=this.getClickSequence();if(s.length>1&&o&&Array.isArray(o.properties.positionIndexes)&&o.properties.positionIndexes[0]===s.length-1){var u={type:"LineString",coordinates:i(s)};this.resetClickSequence();var l=this.getAddFeatureAction(u,e.data);l&&e.onEdit(l)}else a&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>1){var r={type:"LineString",coordinates:i(n)};this.resetClickSequence();var o=this.getAddFeatureAction(r,e.data);o&&e.onEdit(o)}}}},{key:"getGuides",value:function(t){var e,n,r=t.lastPointerMoveEvent,o=this.getClickSequence(),a=r?[r.mapCoords]:[],s={type:"FeatureCollection",features:[]};o.length>0&&(n={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(i(o),a)}}),n&&s.features.push(n);var u=o.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=s.features).push.apply(e,i(u)),s}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}])&&u(r.prototype,o),a&&u(r,a),d}(a("ed261").GeoJsonEditMode);t.exports.DrawLineStringMode=h})),a.register("8fJUZ",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawPolygonMode=void 0;var n,r=(n=a("hYu1V"))&&n.__esModule?n:{default:n},i=a("eoCq7"),o=a("lbHm2");function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(A,t);var e,n,a,s,l=(e=A,function(){var t,n=g(e);if(d()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function A(){return c(this,A),l.apply(this,arguments)}return n=A,(a=[{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 1===r.length||2===r.length?e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(u(r),i)}}:r.length>2&&(e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(u(r),i,[r[0]])]}}),e}},{key:"getGuides",value:function(t){var e,n=this.getClickSequence(),r={type:"FeatureCollection",features:[]},i=this.createTentativeFeature(t);i&&r.features.push(i);var o=n.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=r.features).push.apply(e,u(o)),r}},{key:"handleClick",value:function(t,e){var n=t.picks,a=(0,o.getPickedEditHandle)(n),s=this.getClickSequence(),l=!1;if(s.length>2&&e.modeConfig&&e.modeConfig.preventOverlappingLines){var c=(0,i.lineString)([s[s.length-1],t.mapCoords]),f=(0,i.lineString)(u(s.slice(0,s.length-1)));(0,r.default)(c,f).features.length>0&&(l=!0)}var p=!1;if(a||l||(this.addClickSequence(t),p=!0),s.length>2&&a&&Array.isArray(a.properties.positionIndexes)&&(0===a.properties.positionIndexes[0]||a.properties.positionIndexes[0]===s.length-1)){var h={type:"Polygon",coordinates:[[].concat(u(s),[s[0]])]};this.resetClickSequence();var d=this.getAddFeatureOrBooleanPolygonAction(h,e);d&&e.onEdit(d)}else p&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>2){var r={type:"Polygon",coordinates:[[].concat(u(n),[n[0]])]};this.resetClickSequence();var i=this.getAddFeatureOrBooleanPolygonAction(r,e);i&&e.onEdit(i)}}}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),p(g(A.prototype),"handlePointerMove",this).call(this,t,e)}}])&&f(n.prototype,a),s&&f(n,s),A}(a("ed261").GeoJsonEditMode);t.exports.DrawPolygonMode=A})),a.register("bRaIG",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawRectangleMode=void 0;var n,r=(n=a("aMWv9"))&&n.__esModule?n:{default:n};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,i,a,p=(e=h,function(){var t,n=c(e);if(l()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return o(this,h),p.apply(this,arguments)}return n=h,(i=[{key:"getTwoClickPolygon",value:function(t,e,n){var i=(0,r.default)([t[0],t[1],e[0],e[1]]);return i.properties=i.properties||{},i.properties.shape="Rectangle",i}}])&&s(n.prototype,i),a&&s(n,a),h}(a("eTr14").TwoClickPolygonMode);t.exports.DrawRectangleMode=p})),a.register("eTr14",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.TwoClickPolygonMode=void 0;var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(h,t);var e,n,a,f,p=(e=h,function(){var t,n=l(e);if(u()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return r(this,h),p.apply(this,arguments)}return n=h,(a=[{key:"handleClick",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw||(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"handleStartDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),t.cancelPan())}},{key:"handleStopDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"checkAndFinishPolygon",value:function(t){var e=this.getClickSequence(),n=this.getTentativeGuide(t);if(e.length>1&&n&&"Polygon"===n.geometry.type){var r={type:"Feature",properties:{shape:n.properties.shape},geometry:{type:"Polygon",coordinates:n.geometry.coordinates}},i=this.getAddFeatureOrBooleanPolygonAction(r,t);this.resetClickSequence(),i&&t.onEdit(i)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),i={type:"FeatureCollection",features:[]};if(0===r.length)return i;var o=r[0],a=e.mapCoords,s=this.getTwoClickPolygon(o,a,n);return s&&i.features.push({type:"Feature",properties:{shape:s.properties&&s.properties.shape,guideType:"tentative"},geometry:s.geometry}),i}},{key:"getTwoClickPolygon",value:function(t,e,n){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),o(l(h.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 1===r.length&&(e=this.getTwoClickPolygon(r[0],i[0],t.modeConfig)),e}}])&&i(n.prototype,a),f&&i(n,f),h}(a("ed261").GeoJsonEditMode);t.exports.TwoClickPolygonMode=f})),a.register("50TUj",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawSquareMode=void 0;var n=s(a("aMWv9")),r=s(a("h91qW")),i=s(a("lbpAq")),o=a("eoCq7");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(y,t);var e,a,s,u,g=(e=y,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function y(){return l(this,y),g.apply(this,arguments)}return a=y,(s=[{key:"getTwoClickPolygon",value:function(t,e,a){var s=[e[0],t[1]],u=[t[0],e[1]],l=(0,r.default)((0,o.point)(s),(0,o.point)(t)),c=(0,r.default)((0,o.point)(u),(0,o.point)(t)),f=l<=c?l:c,p=l<=c?s:u,h=(0,o.lineString)([p,e]),d=(0,i.default)(h,f).geometry.coordinates,g=(0,n.default)([t[0],t[1],d[0],d[1]]);return g.properties=g.properties||{},g.properties.shape="Square",g}}])&&c(a.prototype,s),u&&c(a,u),y}(a("eTr14").TwoClickPolygonMode);t.exports.DrawSquareMode=g})),a.register("lbpAq",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return c}));var i=a("2w221"),o=a("fkXdW"),s=a("h91qW"),u=a("4GTRK"),l=a("dgBT2");function c(t,e,n){void 0===n&&(n={});for(var r=l.getGeom(t).coordinates,a=0,c=0;c<r.length&&!(e>=a&&c===r.length-1);c++){if(a>=e){var f=e-a;if(f){var p=i.default(r[c],r[c-1])-180;return o.default(r[c],f,p,n)}return u.point(r[c])}a+=s.default(r[c],r[c+1],n)}return u.point(r[r.length-1])}})),a.register("4GTRK",(function(e,n){t(e.exports,"point",(function(){return i}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!o(t[0])||!o(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}})),a.register("bGEzk",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawRectangleFromCenterMode=void 0;var n,r=(n=a("aMWv9"))&&n.__esModule?n:{default:n};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,i,a,p=(e=h,function(){var t,n=c(e);if(l()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return o(this,h),p.apply(this,arguments)}return n=h,(i=[{key:"getTwoClickPolygon",value:function(t,e,n){var i=t[0]>e[0]?t[0]+Math.abs(t[0]-e[0]):t[0]-Math.abs(t[0]-e[0]),o=t[1]>e[1]?t[1]+Math.abs(t[1]-e[1]):t[1]-Math.abs(t[1]-e[1]),a=(0,r.default)([i,o,e[0],e[1]]);return a.properties=a.properties||{},a.properties.shape="Rectangle",a}}])&&s(n.prototype,i),a&&s(n,a),h}(a("eTr14").TwoClickPolygonMode);t.exports.DrawRectangleFromCenterMode=p})),a.register("csOT4",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawSquareFromCenterMode=void 0;var n=s(a("aMWv9")),r=s(a("h91qW")),i=s(a("lbpAq")),o=a("eoCq7");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(y,t);var e,a,s,u,g=(e=y,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function y(){return l(this,y),g.apply(this,arguments)}return a=y,(s=[{key:"getTwoClickPolygon",value:function(t,e,a){var s=[e[0],t[1]],u=[t[0],e[1]],l=(0,r.default)((0,o.point)(s),(0,o.point)(t)),c=(0,r.default)((0,o.point)(u),(0,o.point)(t)),f=l<=c?l:c,p=l<=c?s:u,h=(0,o.lineString)([p,e]),d=(0,i.default)(h,f).geometry.coordinates,g=t[0]>d[0]?t[0]+Math.abs(t[0]-d[0]):t[0]-Math.abs(t[0]-d[0]),y=t[1]>d[1]?t[1]+Math.abs(t[1]-d[1]):t[1]-Math.abs(t[1]-d[1]),A=(0,n.default)([g,y,d[0],d[1]]);return A.properties=A.properties||{},A.properties.shape="Square",A}}])&&c(a.prototype,s),u&&c(a,u),y}(a("eTr14").TwoClickPolygonMode);t.exports.DrawSquareFromCenterMode=g})),a.register("eFdRt",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawCircleByDiameterMode=void 0;var n=o(a("cqRzY")),r=o(a("h91qW")),i=a("ed261");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(g,t);var e,o,a,s,d=(e=g,function(){var t,n=p(e);if(f()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function g(){return u(this,g),d.apply(this,arguments)}return o=g,a=[{key:"getTwoClickPolygon",value:function(t,e,o){var a=(o||{}).steps,s=void 0===a?64:a,u={steps:s};s<4&&(console.warn("Minimum steps to draw a circle is 4 "),u.steps=4);var l=(0,i.getIntermediatePosition)(t,e),c=Math.max((0,r.default)(t,l),.001),f=(0,n.default)(l,c,u);return f.properties=f.properties||{},f.properties.shape="Circle",f}}],a&&l(o.prototype,a),s&&l(o,s),g}(a("eTr14").TwoClickPolygonMode);t.exports.DrawCircleByDiameterMode=d})),a.register("RrPgi",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawCircleFromCenterMode=void 0;var n=i(a("cqRzY")),r=i(a("h91qW"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,i,o,a,h=(e=d,function(){var t,n=f(e);if(c()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function d(){return s(this,d),h.apply(this,arguments)}return i=d,o=[{key:"getTwoClickPolygon",value:function(t,e,i){var o=(i||{}).steps,a=void 0===o?64:o,s={steps:a};a<4&&(console.warn("Minimum steps to draw a circle is 4 "),s.steps=4);var u=Math.max((0,r.default)(t,e),.001),l=(0,n.default)(t,u,s);return l.properties=l.properties||{},l.properties.shape="Circle",l}}],o&&u(i.prototype,o),a&&u(i,a),d}(a("eTr14").TwoClickPolygonMode);t.exports.DrawCircleFromCenterMode=h})),a.register("5KF1c",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawEllipseByBoundingBoxMode=void 0;var n=u(a("aMWv9")),r=u(a("h91qW")),i=u(a("5sztP")),o=a("eoCq7"),s=a("ed261");function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(A,t);var e,a,u,l,y=(e=A,function(){var t,n=d(e);if(h()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function A(){return c(this,A),y.apply(this,arguments)}return a=A,(u=[{key:"getTwoClickPolygon",value:function(t,e,a){var u=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),f=Math.max(t[1],e[1]),p=(0,n.default)([u,l,c,f]).geometry.coordinates[0],h=(0,s.getIntermediatePosition)(t,e),d=Math.max((0,r.default)((0,o.point)(p[0]),(0,o.point)(p[1])),.001),g=Math.max((0,r.default)((0,o.point)(p[0]),(0,o.point)(p[3])),.001);return(0,i.default)(h,d,g)}}])&&f(a.prototype,u),l&&f(a,l),A}(a("eTr14").TwoClickPolygonMode);t.exports.DrawEllipseByBoundingBoxMode=y})),a.register("5sztP",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return c}));var i=a("dHGfS"),o=a("jHby9"),s=a("h53i1"),u=a("dgBT2");function l(t){var e=t*Math.PI/180;return Math.tan(e)}var c=function(t,e,n,r){var a=(r=r||{}).steps||64,c=r.units||"kilometers",f=r.angle||0,p=r.pivot||t,h=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!i.isObject(r))throw new Error("options must be an object");if(!i.isNumber(a))throw new Error("steps must be a number");if(!i.isNumber(f))throw new Error("angle must be a number");var d=u.getCoord(t);if("degrees"===c)var g=i.degreesToRadians(f);else e=o.default(t,e,90,{units:c}),n=o.default(t,n,0,{units:c}),e=u.getCoord(e)[0]-d[0],n=u.getCoord(n)[1]-d[1];for(var y=[],A=0;A<a;A+=1){var v=-360*A/a,m=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(l(v),2)),_=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(l(v),2));if(v<-90&&v>=-270&&(m=-m),v<-180&&v>=-360&&(_=-_),"degrees"===c){var b=m*Math.cos(g)+_*Math.sin(g),x=_*Math.cos(g)-m*Math.sin(g);m=b,_=x}y.push([m+d[0],_+d[1]])}return y.push(y[0]),"degrees"===c?i.polygon([y],h):s.default(i.polygon([y],h),f,{pivot:p})}})),a.register("dHGfS",(function(e,n){t(e.exports,"polygon",(function(){return i})),t(e.exports,"isNumber",(function(){return s})),t(e.exports,"degreesToRadians",(function(){return o})),t(e.exports,"isObject",(function(){return u}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function o(t){return t%360*Math.PI/180}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}})),a.register("gvXLP",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawEllipseUsingThreePointsMode=void 0;var n=u(a("h91qW")),r=u(a("5sztP")),i=u(a("2w221")),o=a("eoCq7"),s=a("ed261");function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(A,t);var e,a,u,l,y=(e=A,function(){var t,n=d(e);if(h()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function A(){return c(this,A),y.apply(this,arguments)}return a=A,u=[{key:"getThreeClickPolygon",value:function(t,e,a,u){var l=(0,s.getIntermediatePosition)(t,e),c=Math.max((0,n.default)(l,(0,o.point)(a)),.001),f=Math.max((0,n.default)(t,e),.001)/2,p={angle:(0,i.default)(t,e)};return(0,r.default)(l,c,f,p)}}],u&&f(a.prototype,u),l&&f(a,l),A}(a("5sSI3").ThreeClickPolygonMode);t.exports.DrawEllipseUsingThreePointsMode=y})),a.register("5sSI3",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ThreeClickPolygonMode=void 0;var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(h,t);var e,n,a,f,p=(e=h,function(){var t,n=l(e);if(u()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return r(this,h),p.apply(this,arguments)}return n=h,(a=[{key:"handleClick",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence(),r=this.getTentativeGuide(e);if(n.length>2&&r&&"Polygon"===r.geometry.type){var i=this.getAddFeatureOrBooleanPolygonAction(r.geometry,e);this.resetClickSequence(),i&&e.onEdit(i)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),i={type:"FeatureCollection",features:[]};if(0===r.length)return i;var o=e.mapCoords;if(1===r.length)i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[0],o]}});else{var a=this.getThreeClickPolygon(r[0],r[1],o,n);a&&i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:a.geometry})}return i}},{key:"getThreeClickPolygon",value:function(t,e,n,r){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),o(l(h.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 2===r.length&&(e=this.getThreeClickPolygon(r[0],r[1],i[0],t.modeConfig)),e}}])&&i(n.prototype,a),f&&i(n,f),h}(a("ed261").GeoJsonEditMode);t.exports.ThreeClickPolygonMode=f})),a.register("i23Id",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawRectangleUsingThreePointsMode=void 0;var n=a("lbHm2");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,r,o,a,h=(e=d,function(){var t,n=f(e);if(c()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function d(){return s(this,d),h.apply(this,arguments)}return r=d,(o=[{key:"getThreeClickPolygon",value:function(t,e,r,o){var a=i((0,n.generatePointsParallelToLinePoints)(t,e,r),2);return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[t,e,a[0],a[1],t]]}}}}])&&u(r.prototype,o),a&&u(r,a),d}(a("5sSI3").ThreeClickPolygonMode);t.exports.DrawRectangleUsingThreePointsMode=h})),a.register("3ag13",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.Draw90DegreePolygonMode=void 0;var n=l(a("fkXdW")),r=l(a("2w221")),i=l(a("hYu1V")),o=l(a("h91qW")),s=a("eoCq7"),u=a("lbHm2");function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function v(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(d,t);var e,a,l,c,h=(e=d,function(){var t,n=_(e);if(m()){var r=_(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return v(this,t)});function d(){return g(this,d),h.apply(this,arguments)}return a=d,(l=[{key:"createTentativeFeature",value:function(t){var e,n=this.getClickSequence(),r=t.lastPointerMoveEvent.mapCoords;if(1===n.length)e=r;else{var i=n[n.length-2],o=n[n.length-1];e=p((0,u.generatePointsParallelToLinePoints)(i,o,r),1)[0]}return n.length<3?{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(f(n),[e])}}:{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(f(n),[e,n[0]])]}}}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]};if(0===this.getClickSequence().length||!t.lastPointerMoveEvent)return e;var n=this.createTentativeFeature(t);return e.features.push(n),e.features=e.features.concat((0,u.getEditHandlesForGeometry)(n.geometry,-1)),e.features=e.features.slice(0,-1),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),A(_(d.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"handleClick",value:function(t,e){var n=t.picks,r=this.getTentativeGuide(e);this.addClickSequence(t);var i=this.getClickSequence();if(r){if(3===i.length&&"LineString"===r.geometry.type){var o=r.geometry;i[i.length-1]=o.coordinates[o.coordinates.length-1]}else if(i.length>3&&"Polygon"===r.geometry.type){var a=r.geometry;i[i.length-1]=a.coordinates[0][a.coordinates[0].length-2];var s=(0,u.getPickedEditHandle)(n);if(s&&Array.isArray(s.properties.positionIndexes)&&(0===s.properties.positionIndexes[1]||s.properties.positionIndexes[1]===a.coordinates[0].length-3)){var l={type:"Polygon",coordinates:this.finalizedCoordinates(f(a.coordinates[0]))};this.resetClickSequence();var c=this.getAddFeatureOrBooleanPolygonAction(l,e);c&&e.onEdit(c)}}var p={screenCoords:[-1,-1],mapCoords:t.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:function(){},sourceEvent:null};this.handlePointerMove(p,e)}}},{key:"finalizedCoordinates",value:function(t){var e=[[].concat(f(t.slice(0,-2)),[t[0]])],n=this.getIntermediatePoint(f(t));if(n)e=[[].concat(f(t.slice(0,-2)),[n,t[0]])];else{var r=f(t);r.splice(-3,1),(n=this.getIntermediatePoint(f(r)))&&(e=[[].concat(f(t.slice(0,-3)),[n,t[0]])])}return e}},{key:"getIntermediatePoint",value:function(t){var e;if(t.length>4){var a=f(t),u=a[0],l=a[1],c=(0,r.default)(u,l),p=t[t.length-3],h=t[t.length-4],d=(0,r.default)(p,h),g={first:[],second:[]};[1,2,3].forEach((function(t){var e=c+90*t;g.first.push(e>180?e-360:e);var n=d+90*t;g.second.push(n>180?n-360:n)}));var y=(0,o.default)((0,s.point)(u),(0,s.point)(p));[0,1,2].forEach((function(t){var r=(0,s.lineString)([u,(0,n.default)(u,y,g.first[t]).geometry.coordinates]);[0,1,2].forEach((function(t){var o=(0,s.lineString)([p,(0,n.default)(p,y,g.second[t]).geometry.coordinates]),a=(0,i.default)(r,o);a&&a.features.length&&(e=a.features[0].geometry.coordinates)}))}))}return e}}])&&y(a.prototype,l),c&&y(a,c),d}(a("ed261").GeoJsonEditMode);t.exports.Draw90DegreePolygonMode=x})),a.register("2xet6",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.DrawPolygonByDraggingMode=void 0;var n,r=(n=a("3ULrn"))&&n.__esModule?n:{default:n},i=a("lbHm2");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(A,t);var e,n,o,a,u=(e=A,function(){var t,n=d(e);if(h()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function A(){var t;l(this,A);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return y(p(t=u.call.apply(u,[this].concat(n))),"handleDraggingThrottled",null),t}return n=A,(o=[{key:"handleClick",value:function(t,e){}},{key:"handleStartDragging",value:function(t,e){t.cancelPan(),e.modeConfig&&e.modeConfig.throttleMs?this.handleDraggingThrottled=(0,r.default)(this.handleDraggingAux,e.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}},{key:"handleStopDragging",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),n.length>2){var r={type:"Polygon",coordinates:[[].concat(s(n),[n[0]])]};this.resetClickSequence();var i=this.getAddFeatureOrBooleanPolygonAction(r,e);i&&e.onEdit(i)}}},{key:"handleDraggingAux",value:function(t,e){var n=t.picks;(0,i.getPickedEditHandle)(n)||this.addClickSequence(t)}},{key:"handleDragging",value:function(t,e){this.handleDraggingThrottled&&this.handleDraggingThrottled(t,e)}}])&&c(n.prototype,o),a&&c(n,a),A}(a("8fJUZ").DrawPolygonMode);t.exports.DrawPolygonByDraggingMode=A})),a.register("3ULrn",(function(t,n){var r=a("5qgrd"),i="Expected a function",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,f="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,h=f||p||Function("return this")(),d=Object.prototype.toString,g=Math.max,y=Math.min,A=function(){return h.Date.now()};function v(t,e,n){var r,o,a,s,u,l,c=function(e){var n=r,i=o;return r=o=void 0,v=e,s=t.apply(i,n)},f=function(t){return v=t,u=setTimeout(E,e),b?c(t):s},p=function(t){var n=t-l;return void 0===l||n>=e||n<0||x&&t-v>=a},h=function(t){return u=void 0,w&&r?c(t):(r=o=void 0,s)},d=function(){var t=A(),n=p(t);if(r=arguments,o=this,l=t,n){if(void 0===u)return f(l);if(x)return u=setTimeout(E,e),c(l)}return void 0===u&&(u=setTimeout(E,e)),s},v=0,b=!1,x=!1,w=!0;if("function"!=typeof t)throw new TypeError(i);function E(){var t=A();if(p(t))return h(t);u=setTimeout(E,function(t){var n=e-(t-l);return x?y(n,a-(t-v)):n}(t))}return e=_(e)||0,m(n)&&(b=!!n.leading,a=(x="maxWait"in n)?g(_(n.maxWait)||0,e):a,w="trailing"in n?!!n.trailing:w),d.cancel=function(){void 0!==u&&clearTimeout(u),v=0,r=l=o=u=void 0},d.flush=function(){return void 0===u?s:h(A())},d}function m(t){var e=void 0===t?"undefined":r.default(t);return!!t&&("object"==e||"function"==e)}function _(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":r.default(t))||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==d.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=u.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}t.exports=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(i);return m(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),v(t,e,{leading:r,maxWait:e,trailing:o})}})),a.register("gy2Mf",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.ViewMode=void 0;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(a,t);var e,n=(e=a,function(){var t,n=s(e);if(o()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i(this,t)});function a(){return r(this,a),n.apply(this,arguments)}return a}(a("ed261").GeoJsonEditMode);t.exports.ViewMode=l})),a.register("jrgwg",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.MeasureDistanceMode=void 0;var n=o(a("h91qW")),r=o(a("L7cxt")),i=a("lbHm2");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(v,t);var e,o,a,s,l=(e=v,function(){var t,n=g(e);if(d()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function v(){var t;c(this,v);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return A(h(t=l.call.apply(l,[this].concat(r))),"_isMeasuringSessionFinished",!1),A(h(t),"_currentTooltips",[]),A(h(t),"_currentDistance",0),A(h(t),"_calculateDistanceForTooltip",(function(t){var e=t.positionA,r=t.positionB,i=t.modeConfig||{},o=i.turfOptions,a=i.measurementCallback,s=(0,n.default)(e,r,o);return a&&a(s),s})),t}return o=v,(a=[{key:"_formatTooltip",value:function(t,e){var n=e||{},r=n.formatTooltip,i=n.turfOptions,o=i&&i.units||"kilometers";return r?r(t):"".concat(parseFloat(t).toFixed(2)," ").concat(o)}},{key:"handleClick",value:function(t,e){var n=e.modeConfig,o=e.data,a=e.onEdit,s=(n||{}).centerTooltipsOnLine,u=void 0!==s&&s;this._isMeasuringSessionFinished&&(this._isMeasuringSessionFinished=!1,this.resetClickSequence(),this._currentTooltips=[],this._currentDistance=0);var l=t.picks,c=(0,i.getPickedEditHandle)(l),f=!1;c||(this.addClickSequence(t),f=!0);var p=this.getClickSequence();if(p.length>1&&c&&Array.isArray(c.properties.positionIndexes)&&c.properties.positionIndexes[0]===p.length-1)this._isMeasuringSessionFinished=!0;else if(f){if(p.length>1){this._currentDistance+=this._calculateDistanceForTooltip({positionA:p[p.length-2],positionB:p[p.length-1],modeConfig:n});var h=u?(0,r.default)(p[p.length-2],p[p.length-1]).geometry.coordinates:t.mapCoords;this._currentTooltips.push({position:h,text:this._formatTooltip(this._currentDistance,n)})}a({updatedData:o,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}}},{key:"handleKeyUp",value:function(t,e){if(!this._isMeasuringSessionFinished){t.stopPropagation();var n=t.key,r=this.getClickSequence().length;switch(n){case"Escape":this._isMeasuringSessionFinished=!0,1===r&&(this.resetClickSequence(),this._currentTooltips=[]),e.onUpdateCursor("cell");break;case"Enter":this.handleClick(e.lastPointerMoveEvent,e),this._isMeasuringSessionFinished=!0}}}},{key:"getGuides",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n&&!this._isMeasuringSessionFinished?[n.mapCoords]:[],o={type:"FeatureCollection",features:[]};r.length>0&&o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(u(r),i)}});var a=r.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=o.features).push.apply(e,u(a)),o}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getTooltips",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,i=(n||{}).centerTooltipsOnLine,o=void 0!==i&&i,a=this.getClickSequence();if(a.length>0&&e&&!this._isMeasuringSessionFinished){var s=this._calculateDistanceForTooltip({positionA:a[a.length-1],positionB:e.mapCoords,modeConfig:t.modeConfig}),l=o?(0,r.default)(a[a.length-1],e.mapCoords).geometry.coordinates:e.mapCoords;return[].concat(u(this._currentTooltips),[{position:l,text:this._formatTooltip(this._currentDistance+s,n)}])}return this._currentTooltips}}])&&f(o.prototype,a),s&&f(o,s),v}(a("ed261").GeoJsonEditMode);t.exports.MeasureDistanceMode=v})),a.register("L7cxt",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return u}));var i=a("2w221"),o=a("fkXdW"),s=a("h91qW");var u=function(t,e){var n=s.default(t,e),r=i.default(t,e);return o.default(t,n/2,r)}})),a.register("csL0G",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.MeasureAreaMode=void 0;var n=o(a("3eatQ")),r=o(a("lIofd")),i=a("8fJUZ");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A=[],v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(v,t);var e,i,o,a,s=(e=v,function(){var t,n=g(e);if(d()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function v(){return c(this,v),s.apply(this,arguments)}return i=v,o=[{key:"handleClick",value:function(t,e){var n=function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({},e,{onEdit:function(){}});p(g(v.prototype),"handleClick",this).call(this,t,n)}},{key:"getTooltips",value:function(t){var e=this.getTentativeGuide(t);if(e&&"Polygon"===e.geometry.type){var i,o=t.modeConfig||{},a=o.formatTooltip,s=o.measurementCallback,u=(0,r.default)(e),l=(0,n.default)(e);return i=a?a(l):"".concat(parseFloat(l).toFixed(2)," ").concat("sq. m"),s&&s(l),[{position:u.geometry.coordinates,text:i}]}return A}}],o&&f(i.prototype,o),a&&f(i,a),v}(i.DrawPolygonMode);t.exports.MeasureAreaMode=v})),a.register("3eatQ",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return s}));var i=a("brih2"),o=6378137;function s(t){return i.geomReduce(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return u(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=u(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function u(t){var e=0;if(t&&t.length>0){e+=Math.abs(l(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(l(t[n]))}return e}function l(t){var e,n,r,i,a,s,u=0,l=t.length;if(l>2){for(s=0;s<l;s++)s===l-2?(r=l-2,i=l-1,a=0):s===l-1?(r=l-1,i=0,a=1):(r=s,i=s+1,a=s+2),e=t[r],n=t[i],u+=(c(t[a][0])-c(e[0]))*Math.sin(c(n[1]));u=u*o*o/2}return u}function c(t){return t*Math.PI/180}})),a.register("brih2",(function(e,n){t(e.exports,"geomReduce",(function(){return i}));a("hGfdY");function r(t,e){var n,r,i,o,a,s,u,l,c,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,f))return!1;p++}}function i(t,e,n){var i=n;return r(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)})),i}})),a.register("hGfdY",(function(e,n){t(e.exports,"feature",(function(){return r})),t(e.exports,"point",(function(){return i})),t(e.exports,"lineString",(function(){return o})),t(e.exports,"isObject",(function(){return u}));a("5qgrd");function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(t[0])||!s(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}})),a.register("2zXmr",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.MeasureAngleMode=void 0;var n=s(a("2w221")),r=s(a("gvC1G")),i=s(a("cNKaz")),o=a("ed261");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=[],_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(c,t);var e,o,a,s,u=(e=c,function(){var t,n=y(e);if(g()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function c(){var t;f(this,c);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return v(d(t=u.call.apply(u,[this].concat(o))),"_getTooltips",(0,i.default)((function(t){var e=t.modeConfig,i=t.vertex,o=t.point1,a=t.point2,s=m;if(i&&o&&a){var u,l=e||{},c=l.formatTooltip,f=l.measurementCallback,p=(0,n.default)(i,o),h=(0,n.default)(i,a),d=Math.abs(p-h);d>180&&(d=360-d),u=c?c(d):"".concat(parseFloat(d).toFixed(2)," ").concat("deg"),f&&f(d),s=[{position:(0,r.default)({type:"FeatureCollection",features:[o,a].map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t}}}))}).geometry.coordinates,text:u}]}return s}))),t}return o=c,(a=[{key:"handleClick",value:function(t,e){this.getClickSequence().length>=3&&this.resetClickSequence(),this.addClickSequence(t)}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getPoints",value:function(t){var e=this.getClickSequence(),n=l(e);return e.length<3&&t.lastPointerMoveEvent&&n.push(t.lastPointerMoveEvent.mapCoords),n}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=e.features,r=this.getPoints(t);return r.length>2?n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0],r[2]]}}):r.length>1&&n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0]]}}),e}},{key:"getTooltips",value:function(t){var e=this.getPoints(t);return this._getTooltips({modeConfig:t.modeConfig,vertex:e[0],point1:e[1],point2:e[2]})}}])&&p(o.prototype,a),s&&p(o,s),c}(o.GeoJsonEditMode);t.exports.MeasureAngleMode=_})),a.register("cNKaz",(function(t,e){"use strict";function n(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){var e,r={};return function(i){for(var o in i)if(!n(i[o],r[o])){e=t(i),r=i;break}return e}}})),a.register("is4Ng",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.SnappableMode=void 0;var n=a("lbHm2");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(A,t);var e,r,a,s,y=(e=A,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function A(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,A),g(f(e=y.call(this)),"_handler",void 0),e._handler=t,e}return r=A,a=[{key:"_getSnappedMouseEvent",value:function(t,e,n){return Object.assign(t,{mapCoords:n.geometry.coordinates,pointerDownMapCoords:e&&e.geometry.coordinates})}},{key:"_getPickedSnapTarget",value:function(t){return(0,n.getPickedEditHandles)(t).find((function(t){return"snap-target"===t.properties.editHandleType}))}},{key:"_getPickedSnapSource",value:function(t){return(0,n.getPickedSnapSourceEditHandle)(t)}},{key:"_getUpdatedSnapSourceHandle",value:function(t,e){var n=t.properties,r=n.featureIndex,i=n.positionIndexes;if(!Array.isArray(i))return t;var o=e.features[r];return function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?u(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({},t,{geometry:{type:"Point",coordinates:i.reduce((function(t,e){return t[e]}),o.geometry.coordinates)}})}},{key:"_getSnapTargets",value:function(t){var e=(t.modeConfig||{}).additionalSnapTargets;return e=e||[],[].concat(i(t.data.features),i(e))}},{key:"_getSnapTargetHandles",value:function(t){for(var e=[],r=this._getSnapTargets(t),o=0;o<r.length;o++)if(!t.selectedIndexes.includes(o)){var a=r[o].geometry;e.push.apply(e,i((0,n.getEditHandlesForGeometry)(a,o,"snap-target")))}return e}},{key:"getGuides",value:function(t){var e=t.modeConfig,r=t.lastPointerMoveEvent,a=(e||{}).enableSnapping,s={type:"FeatureCollection",features:i(this._handler.getGuides(t).features)};if(!a)return s;var u,l=r&&this._getPickedSnapSource(r.pointerDownPicks);if(l)return(u=s.features).push.apply(u,i(this._getSnapTargetHandles(t)).concat([this._getUpdatedSnapSourceHandle(l,t.data)])),s;var c,f=t.data.features,p=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(t.selectedIndexes);try{for(p.s();!(c=p.n()).done;){var h=c.value;if(h<f.length){var d,g=f[h].geometry;(d=s.features).push.apply(d,i((0,n.getEditHandlesForGeometry)(g,h,"snap-source")))}}}catch(t){p.e(t)}finally{p.f()}return s}},{key:"_getSnapAwareEvent",value:function(t,e){var n=this._getPickedSnapSource(e.lastPointerMoveEvent.pointerDownPicks),r=this._getPickedSnapTarget(t.picks);return n&&r?this._getSnappedMouseEvent(t,n,r):t}},{key:"handleStartDragging",value:function(t,e){this._handler.handleStartDragging(t,e)}},{key:"handleStopDragging",value:function(t,e){this._handler.handleStopDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handleDragging",value:function(t,e){this._handler.handleDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handlePointerMove",value:function(t,e){this._handler.handlePointerMove(this._getSnapAwareEvent(t,e),e)}}],a&&l(r.prototype,a),s&&l(r,s),A}(a("ed261").GeoJsonEditMode);t.exports.SnappableMode=y})),a.register("8QjBj",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.UNIT=t.exports.PROJECTED_PIXEL_SIZE_MULTIPLIER=void 0;t.exports.PROJECTED_PIXEL_SIZE_MULTIPLIER=2/3;t.exports.UNIT={common:0,meters:1,pixels:2}})),a.register("dQUSX",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=arguments,n=function(n){var i=null!=e[n]?e[n]:{};n%2?r(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))},i=1;i<arguments.length;i++)n(i);return t}function o(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var d=["anyclick","pointermove","panstart","panmove","panend","keyup"],g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(g,t);var e,n,r,a,h=(e=g,function(){var t,n=f(e);if(c()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function g(){return s(this,g),h.apply(this,arguments)}return n=g,(r=[{key:"onLayerClick",value:function(t){}},{key:"onStartDragging",value:function(t){}},{key:"onStopDragging",value:function(t){}},{key:"onDragging",value:function(t){}},{key:"onPointerMove",value:function(t){}},{key:"onLayerKeyUp",value:function(t){}},{key:"initializeState",value:function(){this.setState({_editableLayerState:{pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,eventHandler:this._forwardEventToCurrentLayer.bind(this)}}),this._addEventHandlers()}},{key:"finalizeState",value:function(){this._removeEventHandlers()}},{key:"_addEventHandlers",value:function(){var t,e=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=o(d);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.on(i,n,{priority:100})}}catch(t){r.e(t)}finally{r.f()}}},{key:"_removeEventHandlers",value:function(){var t,e=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=o(d);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.off(i,n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_forwardEventToCurrentLayer",value:function(t){var e=this.getCurrentLayer(),n=e["_on".concat(t.type)].bind(e);n?n(t):console.warn("no handler for mjolnir.js event ".concat(t.type))}},{key:"_onanyclick",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.getPicks(n);this.onLayerClick({mapCoords:r,screenCoords:n,picks:i,sourceEvent:e})}},{key:"_onkeyup",value:function(t){var e=t.srcEvent;this.onLayerKeyUp(e)}},{key:"_onpanstart",value:function(t){var e=this.getScreenCoords(t.srcEvent),n=this.getMapCoords(e),r=this.getPicks(e);this.setState({_editableLayerState:i({},this.state._editableLayerState,{pointerDownScreenCoords:e,pointerDownMapCoords:n,pointerDownPicks:r})}),this.onStartDragging({picks:r,screenCoords:e,mapCoords:n,pointerDownScreenCoords:e,pointerDownMapCoords:n,cancelPan:t.stopImmediatePropagation,sourceEvent:t.srcEvent})}},{key:"_onpanmove",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,a=i.pointerDownScreenCoords,s=i.pointerDownMapCoords,u=this.getPicks(n);this.onDragging({screenCoords:n,mapCoords:r,picks:u,pointerDownPicks:o,pointerDownScreenCoords:a,pointerDownMapCoords:s,sourceEvent:e,cancelPan:t.stopImmediatePropagation})}},{key:"_onpanend",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),o=this.state._editableLayerState,a=o.pointerDownPicks,s=o.pointerDownScreenCoords,u=o.pointerDownMapCoords,l=this.getPicks(n);this.onStopDragging({picks:l,screenCoords:n,mapCoords:r,pointerDownPicks:a,pointerDownScreenCoords:s,pointerDownMapCoords:u,sourceEvent:e}),this.setState({_editableLayerState:i({},this.state._editableLayerState,{pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null})})}},{key:"_onpointermove",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,a=i.pointerDownScreenCoords,s=i.pointerDownMapCoords,u=this.getPicks(n);this.onPointerMove({screenCoords:n,mapCoords:r,picks:u,pointerDownPicks:o,pointerDownScreenCoords:a,pointerDownMapCoords:s,sourceEvent:e})}},{key:"getPicks",value:function(t){return this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth})}},{key:"getScreenCoords",value:function(t){return[t.clientX-this.context.gl.canvas.getBoundingClientRect().left,t.clientY-this.context.gl.canvas.getBoundingClientRect().top]}},{key:"getMapCoords",value:function(t){return this.context.viewport.unproject([t[0],t[1]])}}])&&u(n.prototype,r),a&&u(n,a),g}(wg);t.exports.default=g,h(g,"layerName","EditableLayer")})),a.register("jelOI",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n=a("b0r99");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?p(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=h({},zy.defaultProps,{pickingLineWidthExtraPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER}}),y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(g,t);var e,r,a,p,d=(e=g,function(){var t,n=c(e);if(l()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function g(){return i(this,g),d.apply(this,arguments)}return r=g,(a=[{key:"getShaders",value:function(){var t,e=s(c(g.prototype),"getShaders",this).call(this);return e.vs=(0,n.insertBefore)(e.vs,"vec3 width;","\n       if(picking_uActive){\n        widthPixels.xy += pickingLineWidthExtraPixels;\n       }\n      "),h({},e,{inject:h({},e.inject||{},{"vs:#decl":((null===(t=e.inject)||void 0===t?void 0:t["vs:#decl"])||"").concat("uniform float pickingLineWidthExtraPixels;")})})}},{key:"draw",value:function(t){s(c(g.prototype),"draw",this).call(this,h({},t,{uniforms:h({},t.uniforms,{pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels})}))}}])&&o(r.prototype,a),p&&o(r,p),g}(zy);t.exports.default=y,y.defaultProps=g,y.layerName="EditablePathLayer"})),a.register("b0r99",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];return Array.isArray(t)?[255*t[0],255*t[1],255*t[2],255*t[3]]:e},t.exports.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var i=0;i<e.length;i++)if(t(e[i],[].concat((o=n,function(t){if(Array.isArray(t))return f(t)}(o)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(o)||c(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[i]),r)){r(e,n);break}var o;return!1},t.exports.generatePointsParallelToLinePoints=function(t,e,a){var s={type:"LineString",coordinates:[t,e]},u=(0,o.point)(a),l=(0,i.default)(u,s),c=(0,r.default)(t,e),f=(a[0]-t[0])*(e[1]-t[1])-(a[1]-t[1])*(e[0]-t[0])<0?c-90:c-270,p=(0,n.default)(e,l,f),h=(0,n.default)(t,l,f);return[p.geometry.coordinates,h.geometry.coordinates]},t.exports.distance2d=p,t.exports.mix=h,t.exports.nearestPointOnProjectedLine=function(t,e,n){var r=new s.default(n),i=t.geometry.coordinates.map((function(t){var e=l(t,3),n=e[0],i=e[1],o=e[2],a=void 0===o?0:o;return r.project([n,i,a])})),o=l(r.project(e.geometry.coordinates),2),a=o[0],u=o[1],c=1/0,f={};i.forEach((function(t,e){var n=l(t,2),r=n[0],o=n[1];if(0!==e){var s=l(i[e-1],2),p=s[0],h=s[1],d=h-o,g=r-p,y=p*o-r*h,A=d*d+g*g,v=Math.abs(d*a+g*u+y)/Math.sqrt(A);v<c&&(c=v,f={index:e,x0:(g*(g*a-d*u)-d*y)/A,y0:(d*(-g*a+d*u)-g*y)/A})}}));var d=f,g=d.index,y=d.x0,A=d.y0,v=l(i[g-1],3),m=v[0],_=v[1],b=v[2],x=void 0===b?0:b,w=l(i[g],3),E=w[0],S=w[1],P=w[2],k=void 0===P?0:P,C=p(m,_,E,S),T=p(m,_,y,A),I=h(x,k,T/C);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([y,A,I])},properties:{dist:c,index:g-1}}},t.exports.insertBefore=function(t,e,n){var r=t.indexOf(e);return r<0?t:t.slice(0,r)+n+t.slice(r)};var n=u(a("fkXdW")),r=u(a("2w221")),i=u(a("jbcah")),o=a("eoCq7"),s=u(a("1Ft0x"));function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function h(t,e,n){return e*n+t*(1-n)}})),a.register("9Td6e",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n=a("8V977"),r=a("lJ408"),i=a("5IlTQ"),o=a("8QjBj"),s=l(a("9P0of")),u=l(a("dQUSX"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function y(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?_(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=r.ViewMode,E={type:"FeatureCollection",features:[]},S=b({mode:w},s.default.defaultProps,{data:[],selectedIndexes:[],filled:!1,stroked:!0,lineWidthScale:o.PROJECTED_PIXEL_SIZE_MULTIPLIER,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"pixels",getHexagons:function(t){return t.hexIds},getEditedCluster:function(t,e){return e?b({},e,{hexIds:t}):{hexIds:t}},resolution:9}),P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(l,t);var e,r,o,a,u=(e=l,function(){var t,n=v(e);if(A()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)});function l(){return h(this,l),u.apply(this,arguments)}return r=l,o=[{key:"initializeState",value:function(){g(v(l.prototype),"initializeState",this).call(this),this.setState({tentativeHexagonIDs:[]})}},{key:"getDerivedHexagonIDs",value:function(t){return(0,i.polyfill)(t,this.props.resolution,!0)}},{key:"getDerivedHexagonID",value:function(t){return(0,i.geoToH3)(t[1],t[0],this.props.resolution)}},{key:"renderLayers",value:function(){var t=this;return[new s.default(this.getSubLayerProps({id:"editable-geojson",mode:this.props.mode,data:E,selectedFeatureIndexes:[],onEdit:function(e){var n=e.editType,r=e.editContext;switch(n){case"updateTentativeFeature":if("Polygon"===r.feature.geometry.type){var i=r.feature.geometry.coordinates,o=t.getDerivedHexagonIDs(i);t.setState({tentativeHexagonIDs:o})}else if("Point"===r.feature.geometry.type){var a=r.feature.geometry.coordinates,s=t.getDerivedHexagonID(a);t.setState({tentativeHexagonIDs:[s]})}break;case"addFeature":var u=f(t.props.data),l=t.props.modeConfig;if(l&&l.booleanOperation)if(1!==t.props.selectedIndexes.length)console.warn("booleanOperation only supported for single cluster selection");else{var c,p=new Set(t.getSelectedHexIDs()),h=new Set(t.state.tentativeHexagonIDs);switch(l.booleanOperation){case"union":default:c=f(new Set([].concat(f(p),f(h))));break;case"intersection":c=f(p).filter((function(t){return h.has(t)}));break;case"difference":c=f(p).filter((function(t){return!h.has(t)}))}var d=t.props.selectedIndexes[0],g=t.props.data[d];u[d]=t.props.getEditedCluster(c,g)}else u.push(t.props.getEditedCluster(t.state.tentativeHexagonIDs,null));t.setState({tentativeHexagonIDs:[]}),t.props.onEdit({updatedData:u})}}})),new n.default(this.getSubLayerProps({id:"hexagons",data:this.props.data,getHexagons:this.props.getHexagons})),new n.default(this.getSubLayerProps({id:"tentative-hexagons",data:[{hexIds:this.state.tentativeHexagonIDs}],getHexagons:function(t){return t.hexIds}}))]}},{key:"getSelectedHexIDs",value:function(){var t=this,e=[];return this.props.selectedIndexes.forEach((function(n){var r=t.props.data[n],i=t.props.getHexagons(r);e=e.concat(i)})),e}},{key:"getCursor",value:function(t){var e=t.isDragging,n=(this.state||{}).cursor;return n||(n=e?"grabbing":"grab"),n}}],o&&d(r.prototype,o),a&&d(r,a),l}(u.default);t.exports.default=P,x(P,"layerName","EditableH3ClusterLayer"),x(P,"defaultProps",S)})),a.register("8V977",(function(e,n){t(e.exports,"default",(function(){return l}));var r=a("hE9gS"),i=a("1joaW"),o=a("ijozg"),s=a("pGAoq"),u=a("5IlTQ"),l=function(t){"use strict";r.default(n,t);var e=i.default(n);function n(){return o.default(this,n),e.apply(this,arguments)}return s.default(n,[{key:"updateState",value:function(t){var e=t.props,n=(t.oldProps,t.changeFlags);if(n.dataChanged||n.updateTriggers&&n.updateTriggers.getHexagons){var r=e.data,i=e.getHexagons,o=[],a=cd(r),s=a.iterable,l=a.objectInfo,c=!0,f=!1,p=void 0;try{for(var h,d=s[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var g=h.value;l.index++;var y=i(g,l),A=u.h3SetToMultiPolygon(y,!0),v=!0,m=!1,_=void 0;try{for(var b,x=A[Symbol.iterator]();!(v=(b=x.next()).done);v=!0){var w=b.value;o.push(this.getSubLayerRow({polygon:w},g,l.index))}}catch(t){m=!0,_=t}finally{try{v||null==x.return||x.return()}finally{if(m)throw _}}}}catch(t){f=!0,p=t}finally{try{c||null==d.return||d.return()}finally{if(f)throw p}}this.setState({polygons:o})}}},{key:"indexToBounds",value:function(){return{data:this.state.polygons,getPolygon:function(t){return t.polygon}}}}]),n}(a("gxutc").default);l.defaultProps={getHexagons:{type:"accessor",value:function(t){return t.hexagons}}},l.layerName="H3ClusterLayer"})),a.register("5IlTQ",(function(e,n){t(e.exports,"geoToH3",(function(){return C})),t(e.exports,"polyfill",(function(){return T})),t(e.exports,"h3SetToMultiPolygon",(function(){return I}));var r=function(t){var e,n=function(t){var e,n=b["_"+t];return e="Cannot call unknown function "+t+", make sure it is exported",n||_("Assertion failed: "+e),n},r=function(t,e,r,s,u){var l={string:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2);e=at(n),o(t,e,n)}return e},array:function(t){var e=at(t.length);return a(t,e),e}};var c=n(t),f=[],p=0;if(s)for(var h=0;h<s.length;h++){var d=l[r[h]];d?(0===p&&(p=ut()),f[h]=d(s[h])):f[h]=s[h]}var g,y=c.apply(null,f);return g=y,y="string"===e?i(g):"boolean"===e?Boolean(g):g,0!==p&&st(p),y},i=function(t,e){return t?function(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.subarray&&j)return j.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var s=63&t[e++];if(192!=(224&a)){var u=63&t[e++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var l=a-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}(I,t,e):""},o=function(t,e,n){return function(t,e,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),s<=127){if(n>=o)break;e[n++]=s}else if(s<=2047){if(n+1>=o)break;e[n++]=192|s>>6,e[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;e[n++]=224|s>>12,e[n++]=128|s>>6&63,e[n++]=128|63&s}else{if(n+3>=o)break;e[n++]=240|s>>18,e[n++]=128|s>>12&63,e[n++]=128|s>>6&63,e[n++]=128|63&s}}return e[n]=0,n-i}(t,I,e,n)},a=function(t,e){T.set(t,e)},s=function(t,e){return t%e>0&&(t+=e-t%e),t},u=function(t){C=t,b.HEAP8=T=new Int8Array(t),b.HEAP16=M=new Int16Array(t),b.HEAP32=O=new Int32Array(t),b.HEAPU8=I=new Uint8Array(t),b.HEAPU16=new Uint16Array(t),b.HEAPU32=new Uint32Array(t),b.HEAPF32=L=new Float32Array(t),b.HEAPF64=R=new Float64Array(t)},l=function(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var n=e.func;"number"==typeof n?void 0===e.arg?b.dynCall_v(n):b.dynCall_vi(n,e.arg):n(void 0===e.arg?null:e.arg)}else e()}},c=function(t){B.unshift(t)},f=function(t){G.unshift(t)},p=function(t){return String.prototype.startsWith?t.startsWith(tt):0===t.indexOf(tt)},h=function(t){return t},d=function(t){return t.replace(/\b__Z[\w\d_]+/g,(function(t){return t===t?t:t+" ["+t+"]"}))},g=function(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()},y=function(){return T.length},A=function(t){try{var e=new ArrayBuffer(t);if(e.byteLength!=t)return;return new Int8Array(e).set(T),ot(e),u(e),1}catch(t){}},v=function(t){if(p(t))return function(t){try{for(var e=rt(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}catch(t){throw new Error("Converting base64 string to bytes failed.")}}(t.slice(tt.length))},m=function(t){function e(){nt||(nt=!0,F||(l(U),l(V),b.onRuntimeInitialized&&b.onRuntimeInitialized(),function(){if(b.postRun)for("function"==typeof b.postRun&&(b.postRun=[b.postRun]);b.postRun.length;)f(b.postRun.shift());l(G)}()))}t=t||E,Z>0||(!function(){if(b.preRun)for("function"==typeof b.preRun&&(b.preRun=[b.preRun]);b.preRun.length;)c(b.preRun.shift());l(B)}(),Z>0||(b.setStatus?(b.setStatus("Running..."),setTimeout((function(){setTimeout((function(){b.setStatus("")}),1),e()}),1)):e()))},_=function(t){throw b.onAbort&&b.onAbort(t),P(t+=""),k(t),F=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."},b=void 0!==(t=t||{})?t:{},x={};for(e in b)b.hasOwnProperty(e)&&(x[e]=b[e]);var w,E=[],S="";document.currentScript&&(S=document.currentScript.src),S=0!==S.indexOf("blob:")?S.substr(0,S.lastIndexOf("/")+1):"",w=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)e(r.response);else{var i=v(t);i?e(i.buffer):n()}},r.onerror=n,r.send(null)};var P=b.print||console.log.bind(console),k=b.printErr||console.warn.bind(console);for(e in x)x.hasOwnProperty(e)&&(b[e]=x[e]);x=null,b.arguments&&(E=b.arguments);var C,T,I,M,O,L,R,D=0,N=function(){return D},F=!1,j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,z=("undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),b.TOTAL_MEMORY||33554432);z=(C=b.buffer?b.buffer:new ArrayBuffer(z)).byteLength,u(C),O[6004]=5266928;var B=[],U=[],V=[],G=[],q=Math.abs,W=Math.ceil,H=Math.floor,X=Math.min,Z=0,Y=null,Q=null;b.preloadedImages={},b.preloadedAudios={};var K,J,$=null,tt="data:application/octet-stream;base64,";$="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var et,nt,rt="function"==typeof atob?atob:function(t){var e,n,r,i,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=s.indexOf(t.charAt(l++))<<2|(i=s.indexOf(t.charAt(l++)))>>4,n=(15&i)<<4|(o=s.indexOf(t.charAt(l++)))>>2,r=(3&o)<<6|(a=s.indexOf(t.charAt(l++))),u+=String.fromCharCode(e),64!==o&&(u+=String.fromCharCode(n)),64!==a&&(u+=String.fromCharCode(r))}while(l<t.length);return u},it=function(t,e,n){var r=function(t,e,n,r){var o,a;0|i(t|=0,e|=0,n|=0,r|=0,0)&&(a=1+(0|xe(3*n|0,n+1|0))|0,re(0|r,0,a<<3|0),(o=0|Xt(a,4))&&(Re(t,e,n,r,o,a,0),Ht(o)))},i=function(t,e,n,r,i){t|=0,e|=0,n|=0,i|=0;var a,s=0,u=0,l=0,c=0,f=0,p=0,h=0,d=0;if(a=Le,Le=Le+16|0,d=a,se[(s=r|=0)>>2]=t,se[s+4>>2]=e,(s=0!=(0|i))&&(se[i>>2]=0),0|it(t,e))return Le=a,0|(d=1);se[d>>2]=0;t:do{if((0|n)>=1)if(s)for(f=0,p=1,h=1,u=0,s=t;;){if(!(u|f)){if(0==(0|(s=0|o(s,e,4,d)))&0==(0|(e=0|Pe()))){s=2;break t}if(0|it(s,e)){s=1;break t}}if(0==(0|(s=0|o(s,e,0|se[16+(f<<2)>>2],d)))&0==(0|(e=0|Pe()))){s=2;break t}if(se[(t=r+(h<<3)|0)>>2]=s,se[t+4>>2]=e,se[i+(h<<2)>>2]=p,t=(0|(u=u+1|0))==(0|p),c=6==(0|(l=f+1|0)),0|it(s,e)){s=1;break t}if((0|(p=p+(c&t&1)|0))>(0|n)){s=0;break}f=t?c?0:l:f,h=h+1|0,u=t?0:u}else for(f=0,p=1,h=1,u=0,s=t;;){if(!(u|f)){if(0==(0|(s=0|o(s,e,4,d)))&0==(0|(e=0|Pe()))){s=2;break t}if(0|it(s,e)){s=1;break t}}if(0==(0|(s=0|o(s,e,0|se[16+(f<<2)>>2],d)))&0==(0|(e=0|Pe()))){s=2;break t}if(se[(t=r+(h<<3)|0)>>2]=s,se[t+4>>2]=e,t=(0|(u=u+1|0))==(0|p),c=6==(0|(l=f+1|0)),0|it(s,e)){s=1;break t}if((0|(p=p+(c&t&1)|0))>(0|n)){s=0;break}f=t?c?0:l:f,h=h+1|0,u=t?0:u}else s=0}while(0);return Le=a,0|(d=s)},o=function(t,e,n,r){t|=0,e|=0,n|=0;var i,o,a=0,s=0,c=0,f=0,h=0,d=0,g=0;if((0|se[(r|=0)>>2])>0){a=0;do{n=0|L(n),a=a+1|0}while((0|a)<(0|se[r>>2]))}i=0|Jt(0|t,0|e,45),Pe(),o=127&i,s=0|ot(t,e),a=0|Jt(0|t,0|e,52),Pe(),a&=15;t:do{if(a)for(;;){if(d=0|Jt(0|t,0|e,0|(h=3*(15-a|0)|0)),Pe(),d&=7,g=0==(0|ct(a)),a=a+-1|0,f=0|$t(7,0,0|h),e&=~(0|Pe()),t=(h=0|$t(0|se[(g?464:48)+(28*d|0)+(n<<2)>>2],0,0|h))|t&~f,e|=0|Pe(),!(n=0|se[(g?672:256)+(28*d|0)+(n<<2)>>2])){n=0;break t}if(!a){c=6;break}}else c=6}while(0);6==(0|c)&&(g=0|se[880+(28*o|0)+(n<<2)>>2],t|=d=0|$t(0|g,0,45),e=0|Pe()|-1040385&e,n=0|se[4304+(28*o|0)+(n<<2)>>2],127==(127&g|0)&&(g=0|$t(0|se[880+(28*o|0)+20>>2],0,45),e=0|Pe()|-1040385&e,n=0|se[4304+(28*o|0)+20>>2],t=0|st(g|t,e),e=0|Pe(),se[r>>2]=1+(0|se[r>>2]))),c=0|Jt(0|t,0|e,45),Pe(),c&=127;t:do{if(0|u(c)){e:do{if(1==(0|ot(t,e))){if((0|o)!=(0|c)){if(0|p(c,0|se[7728+(28*o|0)>>2])){t=0|lt(t,e),s=1,e=0|Pe();break}t=0|st(t,e),s=1,e=0|Pe();break}switch(0|s){case 5:t=0|lt(t,e),e=0|Pe(),se[r>>2]=5+(0|se[r>>2]),s=0;break e;case 3:t=0|st(t,e),e=0|Pe(),se[r>>2]=1+(0|se[r>>2]),s=0;break e;default:return g=0,Se(0|(d=0)),0|g}}else s=0}while(0);if((0|n)>0){a=0;do{t=0|at(t,e),e=0|Pe(),a=a+1|0}while((0|a)!=(0|n))}if((0|o)!=(0|c)){if(!(0|l(c))){if(0!=(0|s)|5!=(0|ot(t,e)))break;se[r>>2]=1+(0|se[r>>2]);break}switch(127&i){case 8:case 118:break t}3!=(0|ot(t,e))&&(se[r>>2]=1+(0|se[r>>2]))}}else if((0|n)>0){a=0;do{t=0|st(t,e),e=0|Pe(),a=a+1|0}while((0|a)!=(0|n))}}while(0);return se[r>>2]=((0|se[r>>2])+n|0)%6|0,g=t,Se(0|(d=e)),0|g},a=function(t,e,n){e|=0,n|=0;var r,o,a,u,l,c=0,f=0,p=0,h=0,d=0,g=0,y=0,v=0,m=0,_=0,b=0,x=0,w=0,E=0,S=0,P=0,k=0,C=0,T=0,I=0,M=0,O=0,L=0,R=0,D=0;if(l=Le,Le=Le+112|0,o=l+80|0,g=l+72|0,a=l,u=l+56|0,(D=0|Wt(32+(se[(y=(t|=0)+8|0)>>2]<<5)|0))||ke(22848,22448,800,22456),Ct(t,D),c=0|se[(p=t)+4>>2],se[(d=g)>>2]=se[p>>2],se[d+4>>2]=c,kt(g,o),d=0|A(o,e),c=0|se[g>>2],(0|(p=0|se[y>>2]))>0){h=0|se[t+12>>2],f=0;do{c=(0|se[h+(f<<3)>>2])+c|0,f=f+1|0}while((0|f)!=(0|p))}if(f=0|Xt(r=(d=(0|d)<(0|c)?c:d)+12|0,8),v=0|Xt(r,8),se[o>>2]=0,R=0|se[(L=t)+4>>2],se[(c=g)>>2]=se[L>>2],se[c+4>>2]=R,0|(c=0|s(g,r,e,o,f,v)))return Ht(f),Ht(v),Ht(D),Le=l,0|(D=c);t:do{if((0|se[y>>2])>0){for(p=t+12|0,c=0;h=0|s((0|se[p>>2])+(c<<3)|0,r,e,o,f,v),c=c+1|0,!(0|h);)if((0|c)>=(0|se[y>>2]))break t;return Ht(f),Ht(v),Ht(D),Le=l,0|(D=h)}}while(0);(0|d)>-12&&re(0|v,0,((0|r)>1?r:1)<<3|0);t:do{if((0|se[o>>2])>0){R=((0|r)<0)<<31>>31,C=f,T=v,I=f,M=f,O=v,L=f,c=f,E=f,S=v,P=v,k=v,f=v;e:for(;;){for(w=0|se[o>>2],b=0,x=0,p=0;;){d=(h=a)+56|0;do{se[h>>2]=0,h=h+4|0}while((0|h)<(0|d));if(g=0|se[(e=C+(b<<3)|0)>>2],e=0|se[e+4>>2],0|i(g,e,1,a,0)){d=(h=a)+56|0;do{se[h>>2]=0,h=h+4|0}while((0|h)<(0|d));0|(h=0|Xt(7,4))&&(Re(g,e,1,a,h,7,0),Ht(h))}_=0;do{v=0|se[(m=a+(_<<3)|0)>>2],m=0|se[m+4>>2];n:do{if(!(0==(0|v)&0==(0|m))){if(g=0|Kt(0|v,0|m,0|r,0|R),Pe(),!(0==(0|(e=0|se[(d=h=n+(g<<3)|0)>>2]))&0==(0|(d=0|se[d+4>>2]))))for(y=0;;){if((0|y)>(0|r))break e;if((0|e)==(0|v)&(0|d)==(0|m))break n;if(0==(0|(e=0|se[(d=h=n+((g=(g+1|0)%(0|r)|0)<<3)|0)>>2]))&0==(0|(d=0|se[d+4>>2])))break;y=y+1|0}0==(0|v)&0==(0|m)||(dt(v,m,u),0|Tt(t,D,u)&&(se[(y=h)>>2]=v,se[y+4>>2]=m,se[(y=T+(p<<3)|0)>>2]=v,se[y+4>>2]=m,p=p+1|0))}}while(0);_=_+1|0}while(_>>>0<7);if((0|(x=x+1|0))>=(0|w))break;b=b+1|0}if((0|w)>0&&re(0|I,0,w<<3|0),se[o>>2]=p,!((0|p)>0))break t;v=f,m=k,_=L,b=P,x=S,w=T,f=E,k=c,P=M,S=I,E=v,c=m,L=O,O=_,M=b,I=x,T=C,C=w}return Ht(M),Ht(O),Ht(D),Le=l,0|(D=-1)}c=v}while(0);return Ht(D),Ht(f),Ht(c),Le=l,0|(D=0)},s=function(t,e,n,r,i,o){e|=0,n|=0,r|=0,i|=0,o|=0;var a,s,u,l,c,f,p,h,d,g=0,y=0,A=0,m=0,_=0,b=0,x=0,w=0,E=0,S=0,P=0,k=0,C=0,T=0;if(d=Le,Le=Le+48|0,f=d+32|0,p=d+16|0,h=d,(0|(g=0|se[(t|=0)>>2]))<=0)return Le=d,0|(k=0);a=t+4|0,s=f+8|0,u=p+8|0,l=h+8|0,c=((0|e)<0)<<31>>31,P=0;t:for(;;){E=(y=0|se[a>>2])+(P<<4)|0,se[f>>2]=se[E>>2],se[f+4>>2]=se[E+4>>2],se[f+8>>2]=se[E+8>>2],se[f+12>>2]=se[E+12>>2],(0|P)==(g+-1|0)?(se[p>>2]=se[y>>2],se[p+4>>2]=se[y+4>>2],se[p+8>>2]=se[y+8>>2],se[p+12>>2]=se[y+12>>2]):(E=y+(P+1<<4)|0,se[p>>2]=se[E>>2],se[p+4>>2]=se[E+4>>2],se[p+8>>2]=se[E+8>>2],se[p+12>>2]=se[E+12>>2]),E=0|v(f,p,n);e:do{if((0|E)>0){S=+(0|E),w=0;n:for(;;){T=+(E-w|0),C=+(0|w),ue[h>>3]=+ue[f>>3]*T/S+ +ue[p>>3]*C/S,ue[l>>3]=+ue[s>>3]*T/S+ +ue[u>>3]*C/S,b=0|ft(h,n),x=0|Pe(),y=0|Kt(0|b,0|x,0|e,0|c),Pe(),m=0|se[(A=g=o+(y<<3)|0)>>2],A=0|se[A+4>>2];r:do{if(0==(0|m)&0==(0|A))k=14;else for(_=0;;){if((0|_)>(0|e)){g=1;break r}if((0|m)==(0|b)&(0|A)==(0|x)){g=7;break r}if(0==(0|(m=0|se[(A=g=o+((y=(y+1|0)%(0|e)|0)<<3)|0)>>2]))&0==(0|(A=0|se[A+4>>2]))){k=14;break}_=_+1|0}}while(0);switch(14==(0|k)&&(k=0,0==(0|b)&0==(0|x)?g=7:(se[g>>2]=b,se[g+4>>2]=x,g=0|se[r>>2],se[(_=i+(g<<3)|0)>>2]=b,se[_+4>>2]=x,se[r>>2]=g+1,g=0)),7&g){case 7:case 0:break;default:break n}if((0|E)<=(0|(w=w+1|0))){k=8;break e}}if(0|g){g=-1,k=20;break t}}else k=8}while(0);if(8==(0|k)&&(k=0),(0|(P=P+1|0))>=(0|(g=0|se[t>>2]))){g=0,k=20;break}}return 20==(0|k)?(Le=d,0|g):0},u=function(t){return 0|se[7728+(28*(t|=0)|0)+16>>2]},l=function(t){return 4==(0|(t|=0))|117==(0|t)|0},c=function(t){return 0|se[11152+(216*(0|se[(t|=0)>>2])|0)+(72*(0|se[t+4>>2])|0)+(24*(0|se[t+8>>2])|0)+(se[t+12>>2]<<3)>>2]},f=function(t){return 0|se[11152+(216*(0|se[(t|=0)>>2])|0)+(72*(0|se[t+4>>2])|0)+(24*(0|se[t+8>>2])|0)+(se[t+12>>2]<<3)+4>>2]},p=function(t,e){return e|=0,(0|se[7728+(28*(t|=0)|0)+20>>2])==(0|e)?0|(e=1):0|(e=(0|se[7728+(28*t|0)+24>>2])==(0|e))},h=function(t,e){return 0|se[880+(28*(t|=0)|0)+((e|=0)<<2)>>2]},d=function(t,e){return e|=0,(0|se[880+(28*(t|=0)|0)>>2])==(0|e)?0|(e=0):(0|se[880+(28*t|0)+4>>2])==(0|e)?0|(e=1):(0|se[880+(28*t|0)+8>>2])==(0|e)?0|(e=2):(0|se[880+(28*t|0)+12>>2])==(0|e)?0|(e=3):(0|se[880+(28*t|0)+16>>2])==(0|e)?0|(e=4):(0|se[880+(28*t|0)+20>>2])==(0|e)?0|(e=5):0|((0|se[880+(28*t|0)+24>>2])==(0|e)?6:7)},g=function(t){return+ue[(t|=0)+16>>3]<+ue[t+24>>3]|0},y=function(t,e){t|=0;var n,r,i=0;return(i=+ue[(e|=0)>>3])>=+ue[t+8>>3]&&i<=+ue[t>>3]?(n=+ue[t+16>>3],i=+ue[t+24>>3],e=(r=+ue[e+8>>3])>=i,t=r<=n&1,n<i?e&&(t=1):e||(t=0),0|(e=0!=(0|t))):0|(e=0)},A=function(t,e){t|=0,e|=0;var n,r,i,o,a,s,u=0,l=0;o=Le,Le=Le+288|0,n=o+264|0,r=o+96|0,l=(u=i=o)+96|0;do{se[u>>2]=0,u=u+4|0}while((0|u)<(0|l));return yt(e,i),l=0|se[(u=i)>>2],u=0|se[u+4>>2],dt(l,u,n),gt(l,u,r),a=+K(n,r+8|0),ue[n>>3]=+ue[t>>3],ue[(u=n+8|0)>>3]=+ue[t+16>>3],ue[r>>3]=+ue[t+8>>3],ue[(l=r+8|0)>>3]=+ue[t+24>>3],s=+K(n,r),l=~~+be(+s*s/+te(+ +fe(+(+ue[u>>3]-+ue[l>>3])/(+ue[n>>3]-+ue[r>>3])),3)/(a*(2.59807621135*a)*.8)),Le=o,0|(0==(0|l)?1:l)},v=function(t,e,n){t|=0,e|=0,n|=0;var r,i,o,a,s,u=0,l=0;a=Le,Le=Le+288|0,r=a+264|0,i=a+96|0,l=(u=o=a)+96|0;do{se[u>>2]=0,u=u+4|0}while((0|u)<(0|l));return yt(n,o),u=0|se[(l=o)>>2],l=0|se[l+4>>2],dt(u,l,r),gt(u,l,i),s=+K(r,i+8|0),l=~~+be(+ +K(t,e)/(2*s)),Le=a,0|(0==(0|l)?1:l)},m=function(t,e,n,r){e|=0,n|=0,r|=0,se[(t|=0)>>2]=e,se[t+4>>2]=n,se[t+8>>2]=r},_=function(t){var e,n=0,r=0,i=0,o=0,a=0;n=0|se[(t|=0)>>2],r=0|se[(e=t+4|0)>>2],(0|n)<0&&(r=r-n|0,se[e>>2]=r,se[(a=t+8|0)>>2]=(0|se[a>>2])-n,se[t>>2]=0,n=0),(0|r)<0?(n=n-r|0,se[t>>2]=n,o=(0|se[(a=t+8|0)>>2])-r|0,se[a>>2]=o,se[e>>2]=0,r=0):(a=o=t+8|0,o=0|se[o>>2]),(0|o)<0&&(n=n-o|0,se[t>>2]=n,r=r-o|0,se[e>>2]=r,se[a>>2]=0,o=0),(0|(i=(0|o)<(0|(i=(0|r)<(0|n)?r:n))?o:i))<=0||(se[t>>2]=n-i,se[e>>2]=r-i,se[a>>2]=o-i)},b=function(t,e){e|=0;var n,r;r=0|se[(t|=0)+8>>2],n=+((0|se[t+4>>2])-r|0),ue[e>>3]=+((0|se[t>>2])-r|0)-.5*n,ue[e+8>>3]=.8660254037844386*n},x=function(t,e,n){t|=0,e|=0,se[(n|=0)>>2]=(0|se[e>>2])+(0|se[t>>2]),se[n+4>>2]=(0|se[e+4>>2])+(0|se[t+4>>2]),se[n+8>>2]=(0|se[e+8>>2])+(0|se[t+8>>2])},w=function(t,e,n){t|=0,e|=0,se[(n|=0)>>2]=(0|se[t>>2])-(0|se[e>>2]),se[n+4>>2]=(0|se[t+4>>2])-(0|se[e+4>>2]),se[n+8>>2]=(0|se[t+8>>2])-(0|se[e+8>>2])},E=function(t,e){e|=0;var n,r=0;r=0|xe(0|se[(t|=0)>>2],e),se[t>>2]=r,n=0|xe(0|se[(r=t+4|0)>>2],e),se[r>>2]=n,e=0|xe(0|se[(t=t+8|0)>>2],e),se[t>>2]=e},S=function(t){var e,n,r=0,i=0,o=0,a=0,s=0;s=(0|(n=0|se[(t|=0)>>2]))<0,t=(t=(i=(0|(a=((e=(0|(o=(0|se[t+4>>2])-(s?n:0)|0))<0)?0-o|0:0)+((0|se[t+8>>2])-(s?n:0))|0))<0)?0:a)-((o=(0|(i=(0|t)<(0|(i=(0|(r=(e?0:o)-(i?a:0)|0))<(0|(a=(s?0:n)-(e?o:0)-(i?a:0)|0))?r:a))?t:i))>0)?i:0)|0,r=r-(o?i:0)|0;t:do{switch(a-(o?i:0)|0){case 0:switch(0|r){case 0:return 0|(s=0==(0|t)?0:1==(0|t)?1:7);case 1:return 0|(s=0==(0|t)?2:1==(0|t)?3:7);default:break t}case 1:switch(0|r){case 0:return 0|(s=0==(0|t)?4:1==(0|t)?5:7);case 1:if(t)break t;return 0|(t=6);default:break t}}}while(0);return 0|(s=7)},P=function(t){var e,n,r=0,i=0,o=0,a=0,s=0;i=0|se[(e=(t|=0)+8|0)>>2],r=(0|se[t>>2])-i|0,i=(0|se[(n=t+4|0)>>2])-i|0,o=0|qt(+((3*r|0)-i|0)/7),se[t>>2]=o,r=0|qt(+((i<<1)+r|0)/7),se[n>>2]=r,se[e>>2]=0,i=r-o|0,(0|o)<0?(s=0-o|0,se[n>>2]=i,se[e>>2]=s,se[t>>2]=0,r=i,o=0,i=s):i=0,(0|r)<0&&(o=o-r|0,se[t>>2]=o,i=i-r|0,se[e>>2]=i,se[n>>2]=0,r=0),s=o-i|0,a=r-i|0,(0|i)<0?(se[t>>2]=s,se[n>>2]=a,se[e>>2]=0,r=a,a=s,i=0):a=o,(0|(o=(0|i)<(0|(o=(0|r)<(0|a)?r:a))?i:o))<=0||(se[t>>2]=a-o,se[n>>2]=r-o,se[e>>2]=i-o)},k=function(t){var e,n,r=0,i=0,o=0,a=0,s=0;i=0|se[(e=(t|=0)+8|0)>>2],r=(0|se[t>>2])-i|0,i=(0|se[(n=t+4|0)>>2])-i|0,o=0|qt(+((r<<1)+i|0)/7),se[t>>2]=o,r=0|qt(+((3*i|0)-r|0)/7),se[n>>2]=r,se[e>>2]=0,i=r-o|0,(0|o)<0?(s=0-o|0,se[n>>2]=i,se[e>>2]=s,se[t>>2]=0,r=i,o=0,i=s):i=0,(0|r)<0&&(o=o-r|0,se[t>>2]=o,i=i-r|0,se[e>>2]=i,se[n>>2]=0,r=0),s=o-i|0,a=r-i|0,(0|i)<0?(se[t>>2]=s,se[n>>2]=a,se[e>>2]=0,r=a,a=s,i=0):a=o,(0|(o=(0|i)<(0|(o=(0|r)<(0|a)?r:a))?i:o))<=0||(se[t>>2]=a-o,se[n>>2]=r-o,se[e>>2]=i-o)},C=function(t){var e,n,r,i=0,o=0,a=0,s=0;i=0|se[(t|=0)>>2],o=0|se[(n=t+4|0)>>2],a=0|se[(r=t+8|0)>>2],s=o+(3*i|0)|0,se[t>>2]=s,o=a+(3*o|0)|0,se[n>>2]=o,i=(3*a|0)+i|0,se[r>>2]=i,a=o-s|0,(0|s)<0?(i=i-s|0,se[n>>2]=a,se[r>>2]=i,se[t>>2]=0,o=a,a=0):a=s,(0|o)<0&&(a=a-o|0,se[t>>2]=a,i=i-o|0,se[r>>2]=i,se[n>>2]=0,o=0),e=a-i|0,s=o-i|0,(0|i)<0?(se[t>>2]=e,se[n>>2]=s,se[r>>2]=0,a=e,i=0):s=o,(0|(o=(0|i)<(0|(o=(0|s)<(0|a)?s:a))?i:o))<=0||(se[t>>2]=a-o,se[n>>2]=s-o,se[r>>2]=i-o)},T=function(t){var e,n,r,i=0,o=0,a=0,s=0;s=0|se[(t|=0)>>2],a=(3*(i=0|se[(n=t+4|0)>>2])|0)+s|0,s=(o=0|se[(r=t+8|0)>>2])+(3*s|0)|0,se[t>>2]=s,se[n>>2]=a,i=(3*o|0)+i|0,se[r>>2]=i,o=a-s|0,(0|s)<0?(i=i-s|0,se[n>>2]=o,se[r>>2]=i,se[t>>2]=0,s=0):o=a,(0|o)<0&&(s=s-o|0,se[t>>2]=s,i=i-o|0,se[r>>2]=i,se[n>>2]=0,o=0),e=s-i|0,a=o-i|0,(0|i)<0?(se[t>>2]=e,se[n>>2]=a,se[r>>2]=0,s=e,i=0):a=o,(0|(o=(0|i)<(0|(o=(0|a)<(0|s)?a:s))?i:o))<=0||(se[t>>2]=s-o,se[n>>2]=a-o,se[r>>2]=i-o)},I=function(t,e){t|=0;var n,r,i,o=0,a=0,s=0;((e|=0)+-1|0)>>>0>=6||(s=(0|se[15472+(12*e|0)>>2])+(0|se[t>>2])|0,se[t>>2]=s,i=t+4|0,a=(0|se[15472+(12*e|0)+4>>2])+(0|se[i>>2])|0,se[i>>2]=a,r=t+8|0,e=(0|se[15472+(12*e|0)+8>>2])+(0|se[r>>2])|0,se[r>>2]=e,o=a-s|0,(0|s)<0?(e=e-s|0,se[i>>2]=o,se[r>>2]=e,se[t>>2]=0,a=0):(o=a,a=s),(0|o)<0&&(a=a-o|0,se[t>>2]=a,e=e-o|0,se[r>>2]=e,se[i>>2]=0,o=0),n=a-e|0,s=o-e|0,(0|e)<0?(se[t>>2]=n,se[i>>2]=s,se[r>>2]=0,a=n,e=0):s=o,(0|(o=(0|e)<(0|(o=(0|s)<(0|a)?s:a))?e:o))<=0||(se[t>>2]=a-o,se[i>>2]=s-o,se[r>>2]=e-o))},M=function(t){var e,n,r,i=0,o=0,a=0,s=0;s=0|se[(t|=0)>>2],a=(i=0|se[(n=t+4|0)>>2])+s|0,s=(o=0|se[(r=t+8|0)>>2])+s|0,se[t>>2]=s,se[n>>2]=a,i=o+i|0,se[r>>2]=i,o=a-s|0,(0|s)<0?(i=i-s|0,se[n>>2]=o,se[r>>2]=i,se[t>>2]=0,a=0):(o=a,a=s),(0|o)<0&&(a=a-o|0,se[t>>2]=a,i=i-o|0,se[r>>2]=i,se[n>>2]=0,o=0),e=a-i|0,s=o-i|0,(0|i)<0?(se[t>>2]=e,se[n>>2]=s,se[r>>2]=0,a=e,i=0):s=o,(0|(o=(0|i)<(0|(o=(0|s)<(0|a)?s:a))?i:o))<=0||(se[t>>2]=a-o,se[n>>2]=s-o,se[r>>2]=i-o)},O=function(t){var e,n,r,i=0,o=0,a=0,s=0;i=0|se[(t|=0)>>2],a=0|se[(n=t+4|0)>>2],o=0|se[(r=t+8|0)>>2],s=a+i|0,se[t>>2]=s,a=o+a|0,se[n>>2]=a,i=o+i|0,se[r>>2]=i,o=a-s|0,(0|s)<0?(i=i-s|0,se[n>>2]=o,se[r>>2]=i,se[t>>2]=0,a=0):(o=a,a=s),(0|o)<0&&(a=a-o|0,se[t>>2]=a,i=i-o|0,se[r>>2]=i,se[n>>2]=0,o=0),e=a-i|0,s=o-i|0,(0|i)<0?(se[t>>2]=e,se[n>>2]=s,se[r>>2]=0,a=e,i=0):s=o,(0|(o=(0|i)<(0|(o=(0|s)<(0|a)?s:a))?i:o))<=0||(se[t>>2]=a-o,se[n>>2]=s-o,se[r>>2]=i-o)},L=function(t){switch(0|(t|=0)){case 1:t=5;break;case 5:t=4;break;case 4:t=6;break;case 6:t=2;break;case 2:t=3;break;case 3:t=1}return 0|t},R=function(t){switch(0|(t|=0)){case 1:t=3;break;case 3:t=2;break;case 2:t=6;break;case 6:t=4;break;case 4:t=5;break;case 5:t=1}return 0|t},D=function(t){var e,n,r,i=0,o=0,a=0,s=0;i=0|se[(t|=0)>>2],o=0|se[(n=t+4|0)>>2],a=0|se[(r=t+8|0)>>2],s=o+(i<<1)|0,se[t>>2]=s,o=a+(o<<1)|0,se[n>>2]=o,i=(a<<1)+i|0,se[r>>2]=i,a=o-s|0,(0|s)<0?(i=i-s|0,se[n>>2]=a,se[r>>2]=i,se[t>>2]=0,o=a,a=0):a=s,(0|o)<0&&(a=a-o|0,se[t>>2]=a,i=i-o|0,se[r>>2]=i,se[n>>2]=0,o=0),e=a-i|0,s=o-i|0,(0|i)<0?(se[t>>2]=e,se[n>>2]=s,se[r>>2]=0,a=e,i=0):s=o,(0|(o=(0|i)<(0|(o=(0|s)<(0|a)?s:a))?i:o))<=0||(se[t>>2]=a-o,se[n>>2]=s-o,se[r>>2]=i-o)},N=function(t){var e,n,r,i=0,o=0,a=0,s=0;s=0|se[(t|=0)>>2],a=((i=0|se[(n=t+4|0)>>2])<<1)+s|0,s=(o=0|se[(r=t+8|0)>>2])+(s<<1)|0,se[t>>2]=s,se[n>>2]=a,i=(o<<1)+i|0,se[r>>2]=i,o=a-s|0,(0|s)<0?(i=i-s|0,se[n>>2]=o,se[r>>2]=i,se[t>>2]=0,s=0):o=a,(0|o)<0&&(s=s-o|0,se[t>>2]=s,i=i-o|0,se[r>>2]=i,se[n>>2]=0,o=0),e=s-i|0,a=o-i|0,(0|i)<0?(se[t>>2]=e,se[n>>2]=a,se[r>>2]=0,s=e,i=0):a=o,(0|(o=(0|i)<(0|(o=(0|a)<(0|s)?a:s))?i:o))<=0||(se[t>>2]=s-o,se[n>>2]=a-o,se[r>>2]=i-o)},F=function(t,e){e|=0;var n,r,i,o=0,a=0,s=0;return i=(0|(r=(0|se[(t|=0)>>2])-(0|se[e>>2])|0))<0,n=(0|(a=(0|se[t+4>>2])-(0|se[e+4>>2])-(i?r:0)|0))<0,e=(e=(t=(0|(s=(i?0-r|0:0)+(0|se[t+8>>2])-(0|se[e+8>>2])+(n?0-a|0:0)|0))<0)?0:s)-((a=(0|(t=(0|e)<(0|(t=(0|(o=(n?0:a)-(t?s:0)|0))<(0|(s=(i?0:r)-(n?a:0)-(t?s:0)|0))?o:s))?e:t))>0)?t:0)|0,o=o-(a?t:0)|0,0|((0|(t=(0|(t=s-(a?t:0)|0))>-1?t:0-t|0))>(0|(e=(0|(o=(0|o)>-1?o:0-o|0))>(0|(e=(0|e)>-1?e:0-e|0))?o:e))?t:e)},j=function(t){var e,n,r,i;n=(i=0|se[(e=(t|=0)+8|0)>>2])-(0|se[t>>2])|0,se[t>>2]=n,t=(0|se[(r=t+4|0)>>2])-i|0,se[r>>2]=t,se[e>>2]=0-(t+n)},z=function(t){var e,n,r=0,i=0,o=0,a=0,s=0;r=0-(i=0|se[(t|=0)>>2])|0,se[t>>2]=r,se[(e=t+8|0)>>2]=0,a=(o=0|se[(n=t+4|0)>>2])+i|0,(0|i)>0?(se[n>>2]=a,se[e>>2]=i,se[t>>2]=0,r=0,o=a):i=0,(0|o)<0?(s=r-o|0,se[t>>2]=s,i=i-o|0,se[e>>2]=i,se[n>>2]=0,a=s-i|0,r=0-i|0,(0|i)<0?(se[t>>2]=a,se[n>>2]=r,se[e>>2]=0,o=r,i=0):(o=0,a=s)):a=r,(0|(r=(0|i)<(0|(r=(0|o)<(0|a)?o:a))?i:r))<=0||(se[t>>2]=a-r,se[n>>2]=o-r,se[e>>2]=i-r)},B=function(t,e,n){var r,i;r=Le,Le=Le+16|0,U(t|=0,e|=0,n|=0,i=r),function(t,e){t|=0;var n,r,i,o,a=0,s=0,u=0,l=0,c=0,f=0,p=0;se[(o=8+(e|=0)|0)>>2]=0,r=+ue[t>>3],l=+fe(+r),i=+ue[t+8>>3],l+=.5*(c=+fe(+i)/.8660254037844386),l-=+(0|(a=~~l)),c-=+(0|(t=~~c));do{if(l<.5){if(l<.3333333333333333){if(se[e>>2]=a,c<.5*(l+1)){se[e+4>>2]=t;break}t=t+1|0,se[e+4>>2]=t;break}if(t=(1&!(c<(p=1-l)))+t|0,se[e+4>>2]=t,p<=c&c<2*l){a=a+1|0,se[e>>2]=a;break}se[e>>2]=a;break}if(!(l<.6666666666666666)){if(a=a+1|0,se[e>>2]=a,c<.5*l){se[e+4>>2]=t;break}t=t+1|0,se[e+4>>2]=t;break}if(c<1-l){if(se[e+4>>2]=t,2*l-1<c){se[e>>2]=a;break}}else t=t+1|0,se[e+4>>2]=t;a=a+1|0,se[e>>2]=a}while(0);do{if(r<0){if(1&t){a=~~(+(0|a)-(2*(+((f=0|Zt(0|a,((0|a)<0)<<31>>31|0,0|(f=(t+1|0)/2|0),((0|f)<0)<<31>>31|0))>>>0)+4294967296*+(0|Pe()))+1)),se[e>>2]=a;break}a=~~(+(0|a)-2*(+((f=0|Zt(0|a,((0|a)<0)<<31>>31|0,0|(f=(0|t)/2|0),((0|f)<0)<<31>>31|0))>>>0)+4294967296*+(0|Pe()))),se[e>>2]=a;break}}while(0);f=e+4|0,i<0&&(a=a-((t<<1|1)/2|0)|0,se[e>>2]=a,t=0-t|0,se[f>>2]=t),s=t-a|0,(0|a)<0?(u=0-a|0,se[f>>2]=s,se[o>>2]=u,se[e>>2]=0,t=s,a=0):u=0,(0|t)<0&&(a=a-t|0,se[e>>2]=a,u=u-t|0,se[o>>2]=u,se[f>>2]=0,t=0),n=a-u|0,s=t-u|0,(0|u)<0&&(se[e>>2]=n,se[f>>2]=s,se[o>>2]=0,t=s,a=n,u=0),(0|(s=(0|u)<(0|(s=(0|t)<(0|a)?t:a))?u:s))<=0||(se[e>>2]=a-s,se[f>>2]=t-s,se[o>>2]=u-s)}(i,n+4|0),Le=r},U=function(t,e,n,r){e|=0,n|=0,r|=0;var i,o=0,a=0,s=0,u=0;if(i=Le,Le=Le+32|0,Rt(t|=0,a=i),se[n>>2]=0,o=+Lt(15888,a),(s=+Lt(15912,a))<o&&(se[n>>2]=1,o=s),(s=+Lt(15936,a))<o&&(se[n>>2]=2,o=s),(s=+Lt(15960,a))<o&&(se[n>>2]=3,o=s),(s=+Lt(15984,a))<o&&(se[n>>2]=4,o=s),(s=+Lt(16008,a))<o&&(se[n>>2]=5,o=s),(s=+Lt(16032,a))<o&&(se[n>>2]=6,o=s),(s=+Lt(16056,a))<o&&(se[n>>2]=7,o=s),(s=+Lt(16080,a))<o&&(se[n>>2]=8,o=s),(s=+Lt(16104,a))<o&&(se[n>>2]=9,o=s),(s=+Lt(16128,a))<o&&(se[n>>2]=10,o=s),(s=+Lt(16152,a))<o&&(se[n>>2]=11,o=s),(s=+Lt(16176,a))<o&&(se[n>>2]=12,o=s),(s=+Lt(16200,a))<o&&(se[n>>2]=13,o=s),(s=+Lt(16224,a))<o&&(se[n>>2]=14,o=s),(s=+Lt(16248,a))<o&&(se[n>>2]=15,o=s),(s=+Lt(16272,a))<o&&(se[n>>2]=16,o=s),(s=+Lt(16296,a))<o&&(se[n>>2]=17,o=s),(s=+Lt(16320,a))<o&&(se[n>>2]=18,o=s),(s=+Lt(16344,a))<o&&(se[n>>2]=19,o=s),(s=+Ae(+(1-.5*o)))<1e-16)return se[r>>2]=0,se[r+4>>2]=0,se[r+8>>2]=0,se[r+12>>2]=0,void(Le=i);if(n=0|se[n>>2],o=+ue[16368+(24*n|0)>>3],o=+Y(o-+Y(+J(15568+(n<<4)|0,t))),u=0|ct(e)?+Y(o+-.3334731722518321):o,o=+ye(+s)/.381966011250105,(0|e)>0){a=0;do{o*=2.6457513110645907,a=a+1|0}while((0|a)!=(0|e))}s=+de(+u)*o,ue[r>>3]=s,u=+ge(+u)*o,ue[r+8>>3]=u,Le=i},V=function(t,e,n,r,i){e|=0,n|=0,r|=0,i|=0;var o=0,a=0;if((o=+It(t|=0))<1e-16)return e=15568+(e<<4)|0,se[i>>2]=se[e>>2],se[i+4>>2]=se[e+4>>2],se[i+8>>2]=se[e+8>>2],void(se[i+12>>2]=se[e+12>>2]);if(a=+_e(+ +ue[t+8>>3],+ +ue[t>>3]),(0|n)>0){t=0;do{o/=2.6457513110645907,t=t+1|0}while((0|t)!=(0|n))}r?(o/=3,n=0==(0|ct(n)),o=+me(.381966011250105*(n?o:o/2.6457513110645907))):(o=+me(.381966011250105*o),0|ct(n)&&(a=+Y(a+.3334731722518321))),$(15568+(e<<4)|0,+Y(+ue[16368+(24*e|0)>>3]-a),o,i)},G=function(t,e,n,r,i){t|=0,e|=0,n|=0,r|=0,i|=0;var o,a,s,u,l,c,f,p,h,d,g,y,A,v,m,w,S,P,k,C,T,I,O=0,L=0,R=0,D=0,N=0,F=0;if(I=Le,Le=Le+272|0,D=I+240|0,k=I,C=I+224|0,T=I+208|0,g=I+176|0,y=I+160|0,A=I+192|0,v=I+144|0,m=I+128|0,w=I+112|0,S=I+96|0,P=I+80|0,se[(O=I+256|0)>>2]=e,se[D>>2]=se[t>>2],se[D+4>>2]=se[t+4>>2],se[D+8>>2]=se[t+8>>2],se[D+12>>2]=se[t+12>>2],q(D,O,k),se[i>>2]=0,(0|(D=r+n+(5==(0|r)&1)|0))<=(0|n))Le=I;else{a=C+4|0,s=g+4|0,u=n+5|0,l=16848+((o=0|se[O>>2])<<2)|0,c=16928+(o<<2)|0,f=m+8|0,p=w+8|0,h=S+8|0,d=T+4|0,R=n;t:for(;;){L=k+(((0|R)%5|0)<<4)|0,se[T>>2]=se[L>>2],se[T+4>>2]=se[L+4>>2],se[T+8>>2]=se[L+8>>2],se[T+12>>2]=se[L+12>>2];do{}while(2==(0|W(T,o,0,1)));if((0|R)>(0|n)&0!=(0|ct(e))){if(se[g>>2]=se[T>>2],se[g+4>>2]=se[T+4>>2],se[g+8>>2]=se[T+8>>2],se[g+12>>2]=se[T+12>>2],b(a,y),r=0|se[g>>2],O=0|se[17008+(80*r|0)+(se[C>>2]<<2)>>2],se[g>>2]=se[18608+(80*r|0)+(20*O|0)>>2],(0|(L=0|se[18608+(80*r|0)+(20*O|0)+16>>2]))>0){t=0;do{M(s),t=t+1|0}while((0|t)<(0|L))}switch(L=18608+(80*r|0)+(20*O|0)+4|0,se[A>>2]=se[L>>2],se[A+4>>2]=se[L+4>>2],se[A+8>>2]=se[L+8>>2],E(A,3*(0|se[l>>2])|0),x(s,A,s),_(s),b(s,v),N=+(0|se[c>>2]),ue[m>>3]=3*N,ue[f>>3]=0,F=-1.5*N,ue[w>>3]=F,ue[p>>3]=2.598076211353316*N,ue[S>>3]=F,ue[h>>3]=-2.598076211353316*N,0|se[17008+(80*(0|se[g>>2])|0)+(se[T>>2]<<2)>>2]){case 1:t=w,r=m;break;case 3:t=S,r=w;break;case 2:t=m,r=S;break;default:t=12;break t}Mt(y,v,r,t,P),V(P,0|se[g>>2],o,1,i+8+(se[i>>2]<<4)|0),se[i>>2]=1+(0|se[i>>2])}if((0|R)<(0|u)&&(b(d,g),V(g,0|se[T>>2],o,1,i+8+(se[i>>2]<<4)|0),se[i>>2]=1+(0|se[i>>2])),se[C>>2]=se[T>>2],se[C+4>>2]=se[T+4>>2],se[C+8>>2]=se[T+8>>2],se[C+12>>2]=se[T+12>>2],(0|(R=R+1|0))>=(0|D)){t=3;break}}3!=(0|t)?12==(0|t)&&ke(22474,22521,581,22531):Le=I}},q=function(t,e,n){t|=0,e|=0,n|=0;var r,i=0,o=0,a=0,s=0,u=0;r=Le,Le=Le+128|0,o=r,s=20208,u=(a=i=r+64|0)+60|0;do{se[a>>2]=se[s>>2],a=a+4|0,s=s+4|0}while((0|a)<(0|u));s=20272,u=(a=o)+60|0;do{se[a>>2]=se[s>>2],a=a+4|0,s=s+4|0}while((0|a)<(0|u));i=(u=0==(0|ct(0|se[e>>2])))?i:o,D(o=t+4|0),N(o),0|ct(0|se[e>>2])&&(T(o),se[e>>2]=1+(0|se[e>>2])),se[n>>2]=se[t>>2],x(o,i,e=n+4|0),_(e),se[n+16>>2]=se[t>>2],x(o,i+12|0,e=n+20|0),_(e),se[n+32>>2]=se[t>>2],x(o,i+24|0,e=n+36|0),_(e),se[n+48>>2]=se[t>>2],x(o,i+36|0,e=n+52|0),_(e),se[n+64>>2]=se[t>>2],x(o,i+48|0,n=n+68|0),_(n),Le=r},W=function(t,e,n,r){n|=0,r|=0;var i,o,a,s,u,l,c=0,f=0,p=0,h=0,d=0;if(l=Le,Le=Le+32|0,u=l+12|0,o=l,d=(t|=0)+4|0,h=0|se[16928+((e|=0)<<2)>>2],h=(s=0!=(0|r))?3*h|0:h,c=0|se[d>>2],i=0|se[(a=t+8|0)>>2],s){if((0|(c=i+c+(r=0|se[(f=t+12|0)>>2])|0))==(0|h))return Le=l,0|(d=1);p=f}else c=i+c+(r=0|se[(p=t+12|0)>>2])|0;if((0|c)<=(0|h))return Le=l,0|(d=0);do{if((0|r)>0){if(r=0|se[t>>2],(0|i)>0){f=18608+(80*r|0)+60|0,r=t;break}r=18608+(80*r|0)+40|0,n?(m(u,h,0,0),w(d,u,o),O(o),x(o,u,d),f=r,r=t):(f=r,r=t)}else f=18608+(80*(0|se[t>>2])|0)+20|0,r=t}while(0);if(se[r>>2]=se[f>>2],(0|se[(c=f+16|0)>>2])>0){r=0;do{M(d),r=r+1|0}while((0|r)<(0|se[c>>2]))}return t=f+4|0,se[u>>2]=se[t>>2],se[u+4>>2]=se[t+4>>2],se[u+8>>2]=se[t+8>>2],e=0|se[16848+(e<<2)>>2],E(u,s?3*e|0:e),x(d,u,d),_(d),r=s&&((0|se[a>>2])+(0|se[d>>2])+(0|se[p>>2])|0)==(0|h)?1:2,Le=l,0|(d=r)},H=function(t,e){t|=0,e|=0;var n=0;do{n=0|W(t,e,0,1)}while(2==(0|n));return 0|n},X=function(t,e,n,r,i){t|=0,e|=0,n|=0,r|=0,i|=0;var o,a,s,u,l,c,f,p,h,d,g,y,A,v,m,_,x,w,E=0,S=0,P=0,k=0,C=0;if(w=Le,Le=Le+240|0,v=w+208|0,m=w,_=w+192|0,x=w+176|0,h=w+160|0,d=w+144|0,g=w+128|0,y=w+112|0,A=w+96|0,se[(E=w+224|0)>>2]=e,se[v>>2]=se[t>>2],se[v+4>>2]=se[t+4>>2],se[v+8>>2]=se[t+8>>2],se[v+12>>2]=se[t+12>>2],Z(v,E,m),se[i>>2]=0,(0|(p=r+n+(6==(0|r)&1)|0))<=(0|n))Le=w;else{a=n+6|0,s=16928+((o=0|se[E>>2])<<2)|0,u=d+8|0,l=g+8|0,c=y+8|0,f=_+4|0,S=0,P=n,r=-1;t:for(;;){if(t=m+((E=(0|P)%6|0)<<4)|0,se[_>>2]=se[t>>2],se[_+4>>2]=se[t+4>>2],se[_+8>>2]=se[t+8>>2],se[_+12>>2]=se[t+12>>2],t=S,S=0|W(_,o,0,1),(0|P)>(0|n)&0!=(0|ct(e))&&(1!=(0|t)&&(0|se[_>>2])!=(0|r))){switch(b(m+(((E+5|0)%6|0)<<4)+4|0,x),b(m+(E<<4)+4|0,h),k=+(0|se[s>>2]),ue[d>>3]=3*k,ue[u>>3]=0,C=-1.5*k,ue[g>>3]=C,ue[l>>3]=2.598076211353316*k,ue[y>>3]=C,ue[c>>3]=-2.598076211353316*k,E=0|se[v>>2],0|se[17008+(80*E|0)+(((0|r)==(0|E)?0|se[_>>2]:r)<<2)>>2]){case 1:t=g,r=d;break;case 3:t=y,r=g;break;case 2:t=d,r=y;break;default:t=8;break t}Mt(x,h,r,t,A),0|Ot(x,A)||0|Ot(h,A)||(V(A,0|se[v>>2],o,1,i+8+(se[i>>2]<<4)|0),se[i>>2]=1+(0|se[i>>2]))}if((0|P)<(0|a)&&(b(f,x),V(x,0|se[_>>2],o,1,i+8+(se[i>>2]<<4)|0),se[i>>2]=1+(0|se[i>>2])),(0|(P=P+1|0))>=(0|p)){t=3;break}r=0|se[_>>2]}3!=(0|t)?8==(0|t)&&ke(22557,22521,746,22602):Le=w}},Z=function(t,e,n){t|=0,e|=0,n|=0;var r,i=0,o=0,a=0,s=0,u=0;r=Le,Le=Le+160|0,o=r,s=20336,u=(a=i=r+80|0)+72|0;do{se[a>>2]=se[s>>2],a=a+4|0,s=s+4|0}while((0|a)<(0|u));s=20416,u=(a=o)+72|0;do{se[a>>2]=se[s>>2],a=a+4|0,s=s+4|0}while((0|a)<(0|u));i=(u=0==(0|ct(0|se[e>>2])))?i:o,D(o=t+4|0),N(o),0|ct(0|se[e>>2])&&(T(o),se[e>>2]=1+(0|se[e>>2])),se[n>>2]=se[t>>2],x(o,i,e=n+4|0),_(e),se[n+16>>2]=se[t>>2],x(o,i+12|0,e=n+20|0),_(e),se[n+32>>2]=se[t>>2],x(o,i+24|0,e=n+36|0),_(e),se[n+48>>2]=se[t>>2],x(o,i+36|0,e=n+52|0),_(e),se[n+64>>2]=se[t>>2],x(o,i+48|0,e=n+68|0),_(e),se[n+80>>2]=se[t>>2],x(o,i+60|0,n=n+84|0),_(n),Le=r},Y=function(t){var e;return e=(t=+t)<0?t+6.283185307179586:t,+(t>=6.283185307179586?e+-6.283185307179586:e)},Q=function(t,e){return e|=0,+fe(+(+ue[(t|=0)>>3]-+ue[e>>3]))<17453292519943298e-27?0|(e=+fe(+(+ue[t+8>>3]-+ue[e+8>>3]))<17453292519943298e-27):0|(e=0)},K=function(t,e){t|=0;var n,r,i,o=0;return r=+ue[(e|=0)>>3],n=+ue[t>>3],o=(i=+ge(.5*(r-n)))*i+(o=+ge(.5*(+ue[e+8>>3]-+ue[t+8>>3])))*(+de(+r)*+de(+n)*o),12742.01436183695*+_e(+ +pe(+o),+ +pe(+(1-o)))},J=function(t,e){t|=0;var n,r,i,o,a;return o=+ue[(e|=0)>>3],r=+de(+o),i=+ue[e+8>>3]-+ue[t+8>>3],a=r*+ge(+i),n=+ue[t>>3],+ +_e(+a,+(+ge(+o)*+de(+n)-+de(+i)*(r*+ge(+n))))},$=function(t,e,n,r){t|=0,e=+e,r|=0;var i=0,o=0,a=0,s=0;if((n=+n)<1e-16)return se[r>>2]=se[t>>2],se[r+4>>2]=se[t+4>>2],se[r+8>>2]=se[t+8>>2],void(se[r+12>>2]=se[t+12>>2]);o=e<0?e+6.283185307179586:e,o=e>=6.283185307179586?o+-6.283185307179586:o;do{if(!(o<1e-16)){if(i=+fe(+(o+-3.141592653589793))<1e-16,e=+ue[t>>3],i){e-=n,ue[r>>3]=e,i=r;break}if(a=+de(+n),n=+ge(+n),e=a*+ge(+e)+ +de(+o)*(n*+de(+e)),e=+ve(+((e=e>1?1:e)<-1?-1:e)),ue[r>>3]=e,+fe(+(e+-1.5707963267948966))<1e-16)return ue[r>>3]=1.5707963267948966,void(ue[r+8>>3]=0);if(+fe(+(e+1.5707963267948966))<1e-16)return ue[r>>3]=-1.5707963267948966,void(ue[r+8>>3]=0);if(s=+de(+e),o=n*+ge(+o)/s,n=+ue[t>>3],e=(a-+ge(+e)*+ge(+n))/+de(+n)/s,a=o>1?1:o,e=e>1?1:e,(e=+ue[t+8>>3]+ +_e(+(a<-1?-1:a),+(e<-1?-1:e)))>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);return void(ue[r+8>>3]=e)}e=+ue[t>>3]+n,ue[r>>3]=e,i=r}while(0);if(+fe(+(e+-1.5707963267948966))<1e-16)return ue[i>>3]=1.5707963267948966,void(ue[r+8>>3]=0);if(+fe(+(e+1.5707963267948966))<1e-16)return ue[i>>3]=-1.5707963267948966,void(ue[r+8>>3]=0);if((e=+ue[t+8>>3])>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);ue[r+8>>3]=e},tt=function(t,e,n){t|=0,n|=0;var r,i,o,a,s=0,u=0,l=0,c=0,f=0,p=0;return p=+ue[(e|=0)>>3],o=+ue[t>>3],f=+ge(.5*(p-o)),l=+ue[e+8>>3],i=+ue[t+8>>3],c=+ge(.5*(l-i)),r=+de(+o),a=+de(+p),c=2*+_e(+ +pe(+(c=f*f+c*(a*r*c))),+ +pe(+(1-c))),f=+ue[n>>3],p=+ge(.5*(f-p)),s=+ue[n+8>>3],l=+ge(.5*(s-l)),u=+de(+f),l=2*+_e(+ +pe(+(l=p*p+l*(a*u*l))),+ +pe(+(1-l))),f=+ge(.5*(o-f)),s=+ge(.5*(i-s)),s=2*+_e(+ +pe(+(s=f*f+s*(r*u*s))),+ +pe(+(1-s))),4*+me(+ +pe(+ +ye(.5*(u=.5*(c+l+s)))*+ye(.5*(u-c))*+ye(.5*(u-l))*+ye(.5*(u-s))))},et=function(t,e){return e=0|Jt(0|(t|=0),0|(e|=0),45),Pe(),127&e|0},nt=function(t,e){var n=0,r=0,i=0,o=0,a=0,s=0;if(!(!0&134217728==(-16777216&(e|=0)|0)))return 0|(e=0);if(a=0|Jt(0|(t|=0),0|e,45),Pe(),(a&=127)>>>0>121)return 0|(e=0);n=0|Jt(0|t,0|e,52),Pe(),n&=15;do{if(0|n){for(i=1,r=0;;){if(o=0|Jt(0|t,0|e,3*(15-i|0)|0),Pe(),0!=(0|(o&=7))&(1^r)){if(1==(0|o)&0!=(0|u(a))){s=0,r=13;break}r=1}if(7==(0|o)){s=0,r=13;break}if(!(i>>>0<n>>>0)){r=9;break}i=i+1|0}if(9==(0|r)){if(15!=(0|n))break;return 0|(s=1)}if(13==(0|r))return 0|s}}while(0);for(;;){if(s=0|Jt(0|t,0|e,3*(14-n|0)|0),Pe(),!(7==(7&s|0)&!0)){s=0,r=13;break}if(!(n>>>0<14)){s=1,r=13;break}n=n+1|0}return 13==(0|r)?0|s:0},rt=function(t,e,n){n|=0;var r=0,i=0;if(r=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),(0|(r&=15))>=(0|n)){if((0|r)!=(0|n))if(n>>>0<=15){if(t|=i=0|$t(0|n,0,52),e=0|Pe()|-15728641&e,(0|r)>(0|n))do{i=0|$t(7,0,3*(14-n|0)|0),n=n+1|0,t|=i,e=0|Pe()|e}while((0|n)<(0|r))}else e=0,t=0}else e=0,t=0;return Se(0|e),0|t},it=function(t,e){var n=0,r=0,i=0;if(i=0|Jt(0|(t|=0),0|(e|=0),45),Pe(),!(0|u(127&i)))return 0|(i=0);i=0|Jt(0|t,0|e,52),Pe(),i&=15;t:do{if(i)for(r=1;;){if(n=0|Jt(0|t,0|e,3*(15-r|0)|0),Pe(),0|(n&=7))break t;if(!(r>>>0<i>>>0)){n=0;break}r=r+1|0}else n=0}while(0);return 0|(i=0==(0|n)&1)},ot=function(t,e){var n=0,r=0,i=0;if(i=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),!(i&=15))return 0|(i=0);for(r=1;;){if(n=0|Jt(0|t,0|e,3*(15-r|0)|0),Pe(),0|(n&=7)){r=5;break}if(!(r>>>0<i>>>0)){n=0,r=5;break}r=r+1|0}return 5==(0|r)?0|n:0},at=function(t,e){var n=0,r=0,i=0,o=0,a=0,s=0,u=0;if(u=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),!(u&=15))return u=t,Se(0|(s=e)),0|u;for(s=1,n=0;;){r=0|$t(7,0,0|(o=3*(15-s|0)|0)),i=0|Pe(),a=0|Jt(0|t,0|e,0|o),Pe(),t=(o=0|$t(0|L(7&a),0,0|o))|t&~r,e=(a=0|Pe())|e&~i;t:do{if(!n)if(0==(o&r|0)&0==(a&i|0))n=0;else if(r=0|Jt(0|t,0|e,52),Pe(),r&=15){n=1;e:for(;;){switch(a=0|Jt(0|t,0|e,3*(15-n|0)|0),Pe(),7&a){case 1:break e;case 0:break;default:n=1;break t}if(!(n>>>0<r>>>0)){n=1;break t}n=n+1|0}for(n=1;;){if(i=0|Jt(0|t,0|e,0|(a=3*(15-n|0)|0)),Pe(),o=0|$t(7,0,0|a),e&=~(0|Pe()),t=t&~o|(a=0|$t(0|L(7&i),0,0|a)),e=0|e|Pe(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<u>>>0))break;s=s+1|0}return Se(0|e),0|t},st=function(t,e){var n=0,r=0,i=0,o=0,a=0;if(r=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),!(r&=15))return r=t,Se(0|(n=e)),0|r;for(n=1;a=0|Jt(0|t,0|e,0|(o=3*(15-n|0)|0)),Pe(),i=0|$t(7,0,0|o),e&=~(0|Pe()),t=(o=0|$t(0|L(7&a),0,0|o))|t&~i,e=0|Pe()|e,n>>>0<r>>>0;)n=n+1|0;return Se(0|e),0|t},ut=function(t,e){var n=0,r=0,i=0,o=0,a=0,s=0,u=0;if(u=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),!(u&=15))return u=t,Se(0|(s=e)),0|u;for(s=1,n=0;;){r=0|$t(7,0,0|(o=3*(15-s|0)|0)),i=0|Pe(),a=0|Jt(0|t,0|e,0|o),Pe(),t=(o=0|$t(0|R(7&a),0,0|o))|t&~r,e=(a=0|Pe())|e&~i;t:do{if(!n)if(0==(o&r|0)&0==(a&i|0))n=0;else if(r=0|Jt(0|t,0|e,52),Pe(),r&=15){n=1;e:for(;;){switch(a=0|Jt(0|t,0|e,3*(15-n|0)|0),Pe(),7&a){case 1:break e;case 0:break;default:n=1;break t}if(!(n>>>0<r>>>0)){n=1;break t}n=n+1|0}for(n=1;;){if(o=0|$t(7,0,0|(i=3*(15-n|0)|0)),a=e&~(0|Pe()),e=0|Jt(0|t,0|e,0|i),Pe(),t=t&~o|(e=0|$t(0|R(7&e),0,0|i)),e=0|a|Pe(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<u>>>0))break;s=s+1|0}return Se(0|e),0|t},lt=function(t,e){var n=0,r=0,i=0,o=0,a=0;if(r=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),!(r&=15))return r=t,Se(0|(n=e)),0|r;for(n=1;o=0|$t(7,0,0|(a=3*(15-n|0)|0)),i=e&~(0|Pe()),e=0|Jt(0|t,0|e,0|a),Pe(),t=(e=0|$t(0|R(7&e),0,0|a))|t&~o,e=0|Pe()|i,n>>>0<r>>>0;)n=n+1|0;return Se(0|e),0|t},ct=function(t){return(0|(t|=0))%2|0},ft=function(t,e){t|=0;var n,r;return r=Le,Le=Le+16|0,n=r,(e|=0)>>>0<=15&&2146435072!=(2146435072&se[t+4>>2]|0)&&2146435072!=(2146435072&se[t+8+4>>2]|0)?(B(t,e,n),e=0|function(t,e){t|=0;var n,r=0,i=0,o=0,a=0,s=0,l=0,h=0,d=0;if(n=Le,Le=Le+64|0,l=n+40|0,i=n+24|0,o=n+12|0,a=n,$t(0|(e|=0),0,52),r=134225919|Pe(),!e)return(0|se[t+4>>2])>2||(0|se[t+8>>2])>2||(0|se[t+12>>2])>2?(l=0,Se(0|(s=0)),Le=n,0|l):($t(0|c(t),0,45),s=0|Pe()|r,l=-1,Se(0|s),Le=n,0|l);if(se[l>>2]=se[t>>2],se[l+4>>2]=se[t+4>>2],se[l+8>>2]=se[t+8>>2],se[l+12>>2]=se[t+12>>2],s=l+4|0,(0|e)>0)for(t=-1;se[i>>2]=se[s>>2],se[i+4>>2]=se[s+4>>2],se[i+8>>2]=se[s+8>>2],1&e?(P(s),se[o>>2]=se[s>>2],se[o+4>>2]=se[s+4>>2],se[o+8>>2]=se[s+8>>2],C(o)):(k(s),se[o>>2]=se[s>>2],se[o+4>>2]=se[s+4>>2],se[o+8>>2]=se[s+8>>2],T(o)),w(i,o,a),_(a),h=0|$t(7,0,0|(d=3*(15-e|0)|0)),r&=~(0|Pe()),t=(d=0|$t(0|S(a),0,0|d))|t&~h,r=0|Pe()|r,(0|e)>1;)e=e+-1|0;else t=-1;t:do{if((0|se[s>>2])<=2&&(0|se[l+8>>2])<=2&&(0|se[l+12>>2])<=2){if(i=0|c(l),e=0|$t(0|i,0,45),e|=t,t=0|Pe()|-1040385&r,a=0|f(l),!(0|u(i))){if((0|a)<=0)break;for(o=0;;){if(i=0|Jt(0|e,0|t,52),Pe(),i&=15)for(r=1;l=0|Jt(0|e,0|t,0|(d=3*(15-r|0)|0)),Pe(),h=0|$t(7,0,0|d),t&=~(0|Pe()),e=e&~h|(d=0|$t(0|L(7&l),0,0|d)),t=0|t|Pe(),r>>>0<i>>>0;)r=r+1|0;if((0|(o=o+1|0))==(0|a))break t}}o=0|Jt(0|e,0|t,52),Pe(),o&=15;e:do{if(o){r=1;n:for(;;){switch(d=0|Jt(0|e,0|t,3*(15-r|0)|0),Pe(),7&d){case 1:break n;case 0:break;default:break e}if(!(r>>>0<o>>>0))break e;r=r+1|0}if(0|p(i,0|se[l>>2]))for(r=1;h=0|$t(7,0,0|(l=3*(15-r|0)|0)),d=t&~(0|Pe()),t=0|Jt(0|e,0|t,0|l),Pe(),e=e&~h|(t=0|$t(0|R(7&t),0,0|l)),t=0|d|Pe(),r>>>0<o>>>0;)r=r+1|0;else for(r=1;l=0|Jt(0|e,0|t,0|(d=3*(15-r|0)|0)),Pe(),h=0|$t(7,0,0|d),t&=~(0|Pe()),e=e&~h|(d=0|$t(0|L(7&l),0,0|d)),t=0|t|Pe(),r>>>0<o>>>0;)r=r+1|0}}while(0);if((0|a)>0){r=0;do{e=0|at(e,t),t=0|Pe(),r=r+1|0}while((0|r)!=(0|a))}}else e=0,t=0}while(0);return d=e,Se(0|(h=t)),Le=n,0|d}(n,e),t=0|Pe()):(t=0,e=0),Se(0|t),Le=r,0|e},pt=function(t,e,n){var r,i=0,o=0,a=0;if(r=(n|=0)+4|0,o=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),o&=15,a=0|Jt(0|t,0|e,45),Pe(),i=0==(0|o),0|u(127&a)){if(i)return 0|(a=1);i=1}else{if(i)return 0|(a=0);i=0==(0|se[r>>2])&&0==(0|se[n+8>>2])?0!=(0|se[n+12>>2])&1:1}for(n=1;1&n?C(r):T(r),a=0|Jt(0|t,0|e,3*(15-n|0)|0),Pe(),I(r,7&a),n>>>0<o>>>0;)n=n+1|0;return 0|i},ht=function(t,e,n){n|=0;var r,i,o=0,a=0,s=0,l=0,c=0,f=0;i=Le,Le=Le+16|0,r=i,f=0|Jt(0|(t|=0),0|(e|=0),45),Pe(),f&=127;t:do{if(0!=(0|u(f))&&(s=0|Jt(0|t,0|e,52),Pe(),s&=15,0!=(0|s))){o=1;e:for(;;){switch(c=0|Jt(0|t,0|e,3*(15-o|0)|0),Pe(),7&c){case 5:break e;case 0:break;default:o=e;break t}if(!(o>>>0<s>>>0)){o=e;break t}o=o+1|0}for(a=1,o=e;l=0|$t(7,0,0|(e=3*(15-a|0)|0)),c=o&~(0|Pe()),o=0|Jt(0|t,0|o,0|e),Pe(),t=t&~l|(o=0|$t(0|R(7&o),0,0|e)),o=0|c|Pe(),a>>>0<s>>>0;)a=a+1|0}else o=e}while(0);if(c=7728+(28*f|0)|0,se[n>>2]=se[c>>2],se[n+4>>2]=se[c+4>>2],se[n+8>>2]=se[c+8>>2],se[n+12>>2]=se[c+12>>2],0|pt(t,o,n)){if(l=n+4|0,se[r>>2]=se[l>>2],se[r+4>>2]=se[l+4>>2],se[r+8>>2]=se[l+8>>2],s=0|Jt(0|t,0|o,52),Pe(),c=15&s,1&s?(T(l),s=c+1|0):s=c,0|u(f)){t:do{if(c)for(e=1;;){if(a=0|Jt(0|t,0|o,3*(15-e|0)|0),Pe(),0|(a&=7)){o=a;break t}if(!(e>>>0<c>>>0)){o=0;break}e=e+1|0}else o=0}while(0);o=4==(0|o)&1}else o=0;if(0|W(n,s,o,0)){if(0|u(f))do{}while(0!=(0|W(n,s,0,0)));(0|s)!=(0|c)&&k(l)}else(0|s)!=(0|c)&&(se[l>>2]=se[r>>2],se[l+4>>2]=se[r+4>>2],se[l+8>>2]=se[r+8>>2]);Le=i}else Le=i},dt=function(t,e,n){n|=0;var r,i;r=Le,Le=Le+16|0,ht(t|=0,e|=0,i=r),e=0|Jt(0|t,0|e,52),Pe(),function(t,e,n){var r,i;e|=0,n|=0,r=Le,Le=Le+16|0,b(4+(t|=0)|0,i=r),V(i,0|se[t>>2],e,0,n),Le=r}(i,15&e,n),Le=r},gt=function(t,e,n){n|=0;var r,i,o=0,a=0;i=Le,Le=Le+16|0,ht(t|=0,e|=0,r=i),o=0|Jt(0|t,0|e,45),Pe(),o=0==(0|u(127&o)),a=0|Jt(0|t,0|e,52),Pe(),a&=15;t:do{if(!o){if(0|a)for(o=1;;){if(!(0==((0|$t(7,0,3*(15-o|0)|0))&t|0)&0==((0|Pe())&e|0)))break t;if(!(o>>>0<a>>>0))break;o=o+1|0}return G(r,a,0,5,n),void(Le=i)}}while(0);X(r,a,0,6,n),Le=i},yt=function(t,e){e|=0;var n,r=0,i=0,o=0,a=0,s=0,l=0;if($t(0|(t|=0),0,52),n=134225919|Pe(),(0|t)<1){i=0,r=0;do{0|u(i)&&($t(0|i,0,45),s=0|n|Pe(),se[(t=e+(r<<3)|0)>>2]=-1,se[t+4>>2]=s,r=r+1|0),i=i+1|0}while(122!=(0|i))}else{s=0,r=0;do{if(0|u(s)){for($t(0|s,0,45),i=1,o=-1,a=0|n|Pe();o&=~(l=0|$t(7,0,3*(15-i|0)|0)),a&=~(0|Pe()),(0|i)!=(0|t);)i=i+1|0;se[(l=e+(r<<3)|0)>>2]=o,se[l+4>>2]=a,r=r+1|0}s=s+1|0}while(122!=(0|s))}},At=function(t,e,n,i){var o,a=0,s=0,u=0,l=0,c=0;if(o=Le,Le=Le+64|0,u=o,(0|(t|=0))==(0|(n|=0))&(0|(e|=0))==(0|(i|=0))|!1|134217728!=(2013265920&e|0)|!1|134217728!=(2013265920&i|0))return Le=o,0|(u=0);if(a=0|Jt(0|t,0|e,52),Pe(),a&=15,s=0|Jt(0|n,0|i,52),Pe(),(0|a)!=(15&s|0))return Le=o,0|(u=0);if(s=a+-1|0,a>>>0>1&&(c=0|rt(t,e,s),l=0|Pe(),(0|c)==(0|(s=0|rt(n,i,s)))&(0|l)==(0|Pe()))){if(a=0|Jt(0|t,0|e,0|(s=3*(15^a)|0)),Pe(),a&=7,s=0|Jt(0|n,0|i,0|s),Pe(),0==(0|a)|0==(0|(s&=7)))return Le=o,0|(c=1);if((0|se[21136+(a<<2)>>2])==(0|s))return Le=o,0|(c=1);if((0|se[21168+(a<<2)>>2])==(0|s))return Le=o,0|(c=1)}s=(a=u)+56|0;do{se[a>>2]=0,a=a+4|0}while((0|a)<(0|s));return r(t,e,1,u),a=(0|se[(c=u)>>2])==(0|n)&&(0|se[c+4>>2])==(0|i)||(0|se[(c=u+8|0)>>2])==(0|n)&&(0|se[c+4>>2])==(0|i)||(0|se[(c=u+16|0)>>2])==(0|n)&&(0|se[c+4>>2])==(0|i)||(0|se[(c=u+24|0)>>2])==(0|n)&&(0|se[c+4>>2])==(0|i)||(0|se[(c=u+32|0)>>2])==(0|n)&&(0|se[c+4>>2])==(0|i)||(0|se[(c=u+40|0)>>2])==(0|n)&&(0|se[c+4>>2])==(0|i)?1:1&((0|se[(a=u+48|0)>>2])==(0|n)?(0|se[a+4>>2])==(0|i):0),Le=o,0|(c=a)},vt=function(t,e,n){n|=0;var r,i,o,a,s=0;if(o=Le,Le=Le+16|0,i=o,s=0|Jt(0|(t|=0),0|(e|=0),56),Pe(),-1==(0|(e=0|Nt(r=(a=!0&268435456==(2013265920&e|0))?t:0,t=a?-2130706433&e|134217728:0,7&s))))return se[n>>2]=0,void(Le=o);ht(r,t,i),s=0|Jt(0|r,0|t,52),Pe(),s&=15,0|it(r,t)?G(i,s,e,2,n):X(i,s,e,2,n),Le=o},mt=function(t){t|=0;var e,n,r=0;return(e=0|Xt(1,12))||ke(22691,22646,49,22704),0|(r=0|se[(n=t+4|0)>>2])?(se[(r=r+8|0)>>2]=e,se[n>>2]=e,0|e):(0|se[t>>2]&&ke(22721,22646,61,22744),se[(r=t)>>2]=e,se[n>>2]=e,0|e)},_t=function(t,e){t|=0,e|=0;var n,r;return(r=0|Wt(24))||ke(22758,22646,78,22772),se[r>>2]=se[e>>2],se[r+4>>2]=se[e+4>>2],se[r+8>>2]=se[e+8>>2],se[r+12>>2]=se[e+12>>2],se[r+16>>2]=0,0|(n=0|se[(e=t+4|0)>>2])?(se[n+16>>2]=r,se[e>>2]=r,0|r):(0|se[t>>2]&&ke(22787,22646,82,22772),se[t>>2]=r,se[e>>2]=r,0|r)},bt=function(t){var e,n,r=0,i=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,h=0,d=0,g=0,y=0,A=0,v=0,m=0,_=0,b=0,x=0,w=0,E=0,S=0,P=0,k=0,C=0,T=0,I=0,M=0,O=0;if(0|se[(a=(t|=0)+8|0)>>2])return 0|(O=1);if(!(o=0|se[t>>2]))return 0|(O=0);r=o,i=0;do{i=i+1|0,r=0|se[r+8>>2]}while(0!=(0|r));if(i>>>0<2)return 0|(O=0);(n=0|Wt(i<<2))||ke(22807,22646,317,22826),(e=0|Wt(i<<5))||ke(22848,22646,321,22826),se[t>>2]=0,se[(E=t+4|0)>>2]=0,se[a>>2]=0,i=0,I=0,w=0,h=0;t:for(;;){if(p=0|se[o>>2]){s=0,u=p;do{if(c=+ue[u+8>>3],r=u,u=0|se[u+16>>2],l=+ue[(a=(f=0==(0|u))?p:u)+8>>3],+fe(+(c-l))>3.141592653589793){O=14;break}s+=(l-c)*(+ue[r>>3]+ +ue[a>>3])}while(!f);if(14==(0|O)){O=0,s=0,r=p;do{x=+ue[r+8>>3],C=0|se[(T=r+16|0)>>2],b=+ue[(C=0==(0|C)?p:C)+8>>3],s+=(+ue[r>>3]+ +ue[C>>3])*((b<0?b+6.283185307179586:b)-(x<0?x+6.283185307179586:x)),r=0|se[(0==(0|r)?o:T)>>2]}while(0!=(0|r))}s>0?(se[n+(I<<2)>>2]=o,I=I+1|0,a=w,r=h):O=19}else O=19;if(19==(0|O)){O=0;do{if(!i){if(h){a=E,u=h+8|0,r=o,i=t;break}if(0|se[t>>2]){O=27;break t}a=E,u=t,r=o,i=t;break}if(0|se[(r=i+8|0)>>2]){O=21;break t}if(!(i=0|Xt(1,12))){O=23;break t}se[r>>2]=i,a=i+4|0,u=i,r=h}while(0);if(se[u>>2]=o,se[a>>2]=o,u=e+(w<<5)|0,f=0|se[o>>2]){for(ue[(p=e+(w<<5)+8|0)>>3]=17976931348623157e292,ue[(h=e+(w<<5)+24|0)>>3]=17976931348623157e292,ue[u>>3]=-17976931348623157e292,ue[(d=e+(w<<5)+16|0)>>3]=-17976931348623157e292,m=17976931348623157e292,_=-17976931348623157e292,a=0,g=f,c=17976931348623157e292,A=17976931348623157e292,v=-17976931348623157e292,l=-17976931348623157e292;s=+ue[g>>3],x=+ue[g+8>>3],g=0|se[g+16>>2],b=+ue[((y=0==(0|g))?f:g)+8>>3],s<c&&(ue[p>>3]=s,c=s),x<A&&(ue[h>>3]=x,A=x),s>v?ue[u>>3]=s:s=v,x>l&&(ue[d>>3]=x,l=x),m=x>0&x<m?x:m,_=x<0&x>_?x:_,a|=+fe(+(x-b))>3.141592653589793,!y;)v=s;a&&(ue[d>>3]=_,ue[h>>3]=m)}else se[u>>2]=0,se[u+4>>2]=0,se[u+8>>2]=0,se[u+12>>2]=0,se[u+16>>2]=0,se[u+20>>2]=0,se[u+24>>2]=0,se[u+28>>2]=0;a=w+1|0}if(o=0|se[(T=o+8|0)>>2],se[T>>2]=0,!o){O=45;break}w=a,h=r}if(21==(0|O))ke(22624,22646,35,22658);else if(23==(0|O))ke(22678,22646,37,22658);else if(27==(0|O))ke(22721,22646,61,22744);else if(45==(0|O)){t:do{if((0|I)>0){for(T=0==(0|a),k=a<<2,C=0==(0|t),P=0,r=0;;){if(S=0|se[n+(P<<2)>>2],T)O=73;else{if(!(w=0|Wt(k))){O=50;break}if(!(E=0|Wt(k))){O=52;break}e:do{if(C)i=0;else{for(a=0,i=0,u=t;o=e+(a<<5)|0,0|xt(0|se[u>>2],o,0|se[S>>2])?(se[w+(i<<2)>>2]=u,se[E+(i<<2)>>2]=o,y=i+1|0):y=i,u=0|se[u+8>>2];)a=a+1|0,i=y;if((0|y)>0)if(o=0|se[w>>2],1==(0|y))i=o;else for(d=0,g=-1,i=o,h=o;;){for(f=0|se[h>>2],o=0,u=0;p=(0|(a=0|se[se[w+(u<<2)>>2]>>2]))==(0|f)?o:o+(1&(0|xt(a,0|se[E+(u<<2)>>2],0|se[f>>2])))|0,(0|(u=u+1|0))!=(0|y);)o=p;if(i=(a=(0|p)>(0|g))?h:i,(0|(o=d+1|0))==(0|y))break e;d=o,g=a?p:g,h=0|se[w+(o<<2)>>2]}else i=0}}while(0);if(Ht(w),Ht(E),i){if(o=0|se[(a=i+4|0)>>2])i=o+8|0;else if(0|se[i>>2]){O=70;break}se[i>>2]=S,se[a>>2]=S}else O=73}if(73==(0|O)){if(O=0,0|(r=0|se[S>>2]))do{E=r,r=0|se[r+16>>2],Ht(E)}while(0!=(0|r));Ht(S),r=2}if((0|(P=P+1|0))>=(0|I)){M=r;break t}}50==(0|O)?ke(22863,22646,249,22882):52==(0|O)?ke(22901,22646,252,22882):70==(0|O)&&ke(22721,22646,61,22744)}else M=0}while(0);return Ht(n),Ht(e),0|(O=M)}return 0},xt=function(t,e,n){t|=0;var r,i=0,o=0,a=0,s=0,u=0,l=0,c=0;if(!(0|y(e|=0,n|=0)))return 0|(t=0);if(e=0|g(e),r=+ue[n>>3],i=e&(i=+ue[n+8>>3])<0?i+6.283185307179586:i,!(t=0|se[t>>2]))return 0|(t=0);if(e){e=0,n=t;t:for(;;){for(;s=+ue[n>>3],l=+ue[n+8>>3],c=0|se[(n=n+16|0)>>2],a=+ue[(c=0==(0|c)?t:c)>>3],o=+ue[c+8>>3],s>a?(u=s,s=l):(u=a,a=s,s=o,o=l),r<a|r>u;)if(!(n=0|se[n>>2])){n=22;break t}if(i=(s=s<0?s+6.283185307179586:s)==i|(l=o<0?o+6.283185307179586:o)==i?i+-2220446049250313e-31:i,((l+=(r-a)/(u-a)*(s-l))<0?l+6.283185307179586:l)>i&&(e^=1),!(n=0|se[n>>2])){n=22;break}}if(22==(0|n))return 0|e}else{e=0,n=t;t:for(;;){for(;s=+ue[n>>3],l=+ue[n+8>>3],c=0|se[(n=n+16|0)>>2],a=+ue[(c=0==(0|c)?t:c)>>3],o=+ue[c+8>>3],s>a?(u=s,s=l):(u=a,a=s,s=o,o=l),r<a|r>u;)if(!(n=0|se[n>>2])){n=22;break t}if(o+(r-a)/(u-a)*(s-o)>(i=s==i|o==i?i+-2220446049250313e-31:i)&&(e^=1),!(n=0|se[n>>2])){n=22;break}}if(22==(0|n))return 0|e}return 0},wt=function(t,e,n,r,i){n|=0,r|=0,i|=0;var o,a,s,l,c=0,f=0,p=0,h=0,g=0,y=0,A=0,v=0,m=0,b=0;if(l=Le,Le=Le+32|0,b=l+16|0,s=l,c=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),c&=15,A=0|Jt(0|n,0|r,52),Pe(),(0|c)!=(15&A|0))return Le=l,0|(b=1);if(g=0|Jt(0|t,0|e,45),Pe(),g&=127,y=0|Jt(0|n,0|r,45),Pe(),A=(0|g)!=(0|(y&=127))){if(7==(0|(p=0|d(g,y))))return Le=l,0|(b=2);7==(0|(h=0|d(y,g)))?ke(22925,22949,151,22959):(v=p,f=h)}else v=0,f=0;o=0|u(g),a=0|u(y),se[b>>2]=0,se[b+4>>2]=0,se[b+8>>2]=0,se[b+12>>2]=0;do{if(v){if(p=(0|(y=0|se[4304+(28*g|0)+(v<<2)>>2]))>0,a)if(p){g=0,h=n,p=r;do{h=0|ut(h,p),p=0|Pe(),1==(0|(f=0|R(f)))&&(f=0|R(1)),g=g+1|0}while((0|g)!=(0|y));y=f,g=h,h=p}else y=f,g=n,h=r;else if(p){g=0,h=n,p=r;do{h=0|lt(h,p),p=0|Pe(),f=0|R(f),g=g+1|0}while((0|g)!=(0|y));y=f,g=h,h=p}else y=f,g=n,h=r;if(pt(g,h,b),A||ke(22972,22949,181,22959),(p=0!=(0|o))&(f=0!=(0|a))&&ke(22999,22949,182,22959),p){if(f=0|ot(t,e),0|ae[22032+(7*f|0)+v>>0]){c=3;break}g=h=0|se[21200+(28*f|0)+(v<<2)>>2],m=26}else if(f){if(f=0|ot(g,h),0|ae[22032+(7*f|0)+y>>0]){c=4;break}g=0,h=0|se[21200+(28*y|0)+(f<<2)>>2],m=26}else f=0;if(26==(0|m))if((0|h)<=-1&&ke(23030,22949,212,22959),(0|g)<=-1&&ke(23053,22949,213,22959),(0|h)>0){p=b+4|0,f=0;do{O(p),f=f+1|0}while((0|f)!=(0|h));f=g}else f=g;if(se[s>>2]=0,se[s+4>>2]=0,se[s+8>>2]=0,I(s,v),0|c)for(;0|ct(c)?C(s):T(s),(0|c)>1;)c=c+-1|0;if((0|f)>0){c=0;do{O(s),c=c+1|0}while((0|c)!=(0|f))}x(m=b+4|0,s,m),_(m),m=50}else if(pt(n,r,b),0!=(0|o)&0!=(0|a))if((0|y)!=(0|g)&&ke(23077,22949,243,22959),f=0|ot(t,e),c=0|ot(n,r),0|ae[22032+(7*f|0)+c>>0])c=5;else if((0|(f=0|se[21200+(28*f|0)+(c<<2)>>2]))>0){p=b+4|0,c=0;do{O(p),c=c+1|0}while((0|c)!=(0|f));m=50}else m=50;else m=50}while(0);return 50==(0|m)&&(c=b+4|0,se[i>>2]=se[c>>2],se[i+4>>2]=se[c+4>>2],se[i+8>>2]=se[c+8>>2],c=0),Le=l,0|(b=c)},Et=function(t,e,n,r){n|=0,r|=0;var i,o,a=0,s=0,c=0,f=0,p=0,g=0,y=0,A=0,v=0,m=0,b=0,x=0,E=0;if(o=Le,Le=Le+48|0,c=o+36|0,f=o+24|0,p=o+12|0,g=o,s=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),s&=15,A=0|Jt(0|t,0|e,45),Pe(),i=0|u(A&=127),$t(0|s,0,52),b=134225919|Pe(),se[(m=r)>>2]=-1,se[m+4>>2]=b,!s)return(0|se[n>>2])>1||(0|se[n+4>>2])>1||(0|se[n+8>>2])>1||127==(0|(a=0|h(A,0|S(n))))?(Le=o,0|(b=1)):(v=0|$t(0|a,0,45),m=0|Pe(),m=-1040385&se[(A=r)+4>>2]|m,se[(b=r)>>2]=se[A>>2]|v,se[b+4>>2]=m,Le=o,0|(b=0));for(se[c>>2]=se[n>>2],se[c+4>>2]=se[n+4>>2],se[c+8>>2]=se[n+8>>2];se[f>>2]=se[c>>2],se[f+4>>2]=se[c+4>>2],se[f+8>>2]=se[c+8>>2],0|ct(s)?(P(c),se[p>>2]=se[c>>2],se[p+4>>2]=se[c+4>>2],se[p+8>>2]=se[c+8>>2],C(p)):(k(c),se[p>>2]=se[c>>2],se[p+4>>2]=se[c+4>>2],se[p+8>>2]=se[c+8>>2],T(p)),w(f,p,g),_(g),x=0|se[(m=r)>>2],m=0|se[m+4>>2],n=0|$t(7,0,0|(E=3*(15-s|0)|0)),m&=~(0|Pe()),E=0|$t(0|S(g),0,0|E),m=0|Pe()|m,se[(b=r)>>2]=E|x&~n,se[b+4>>2]=m,(0|s)>1;)s=s+-1|0;t:do{if((0|se[c>>2])<=1&&(0|se[c+4>>2])<=1&&(0|se[c+8>>2])<=1){s=0|S(c),g=127==(0|(f=0|h(A,s)))?0:0|u(f);e:do{if(s){if(i){if(c=21408+(28*(0|ot(t,e))|0)+(s<<2)|0,(0|(c=0|se[c>>2]))>0){n=0;do{s=0|L(s),n=n+1|0}while((0|n)!=(0|c))}if(1==(0|s)){a=3;break t}127==(0|(n=0|h(A,s)))&&ke(23104,22949,376,23134),0|u(n)?ke(23147,22949,377,23134):(v=c,y=s,a=n)}else v=0,y=s,a=f;if((0|(p=0|se[4304+(28*A|0)+(y<<2)>>2]))<=-1&&ke(23178,22949,384,23134),!g){if((0|v)<=-1&&ke(23030,22949,417,23134),0|v){s=0,n=0|se[(c=r)>>2],c=0|se[c+4>>2];do{n=0|st(n,c),c=0|Pe(),se[(E=r)>>2]=n,se[E+4>>2]=c,s=s+1|0}while((0|s)<(0|v))}if((0|p)<=0){s=54;break}for(s=0,n=0|se[(c=r)>>2],c=0|se[c+4>>2];;)if(n=0|st(n,c),c=0|Pe(),se[(E=r)>>2]=n,se[E+4>>2]=c,(0|(s=s+1|0))==(0|p)){s=54;break e}}if(7==(0|(f=0|d(a,A)))&&ke(22925,22949,393,23134),n=0|se[(s=r)>>2],s=0|se[s+4>>2],(0|p)>0){c=0;do{n=0|st(n,s),s=0|Pe(),se[(E=r)>>2]=n,se[E+4>>2]=s,c=c+1|0}while((0|c)!=(0|p))}if(n=0|ot(n,s),E=0|l(a),(0|(n=0|se[(E?21824:21616)+(28*f|0)+(n<<2)>>2]))<=-1&&ke(23030,22949,412,23134),n){s=0,c=0|se[(f=r)>>2],f=0|se[f+4>>2];do{c=0|at(c,f),f=0|Pe(),se[(E=r)>>2]=c,se[E+4>>2]=f,s=s+1|0}while((0|s)<(0|n));s=54}else s=54}else if(0!=(0|i)&0!=(0|g))if(s=21408+(28*(E=0|ot(t,e))|0)+((0|ot(0|se[(s=r)>>2],0|se[s+4>>2]))<<2)|0,(0|(s=0|se[s>>2]))<=-1&&ke(23201,22949,433,23134),s){a=0,n=0|se[(c=r)>>2],c=0|se[c+4>>2];do{n=0|st(n,c),c=0|Pe(),se[(E=r)>>2]=n,se[E+4>>2]=c,a=a+1|0}while((0|a)<(0|s));a=f,s=54}else a=f,s=55;else a=f,s=54}while(0);if(54==(0|s)&&g&&(s=55),55==(0|s)&&1==(0|ot(0|se[(E=r)>>2],0|se[E+4>>2]))){a=4;break}b=0|se[(E=r)>>2],E=-1040385&se[E+4>>2],x=0|$t(0|a,0,45),E=0|E|Pe(),se[(a=r)>>2]=b|x,se[a+4>>2]=E,a=0}else a=2}while(0);return Le=o,0|(E=a)},St=function(t,e){var n=0;if(!(e|=0))return 0|(n=1);n=t|=0,t=1;do{t=0|xe(0==(1&e|0)?1:n,t),e>>=1,n=0|xe(n,n)}while(0!=(0|e));return 0|t},Pt=function(t,e,n){t|=0;var r,i,o=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0;if(!(0|y(e|=0,n|=0)))return 0|(p=0);if(e=0|g(e),i=+ue[n>>3],o=e&(o=+ue[n+8>>3])<0?o+6.283185307179586:o,(0|(p=0|se[t>>2]))<=0)return 0|(p=0);if(r=0|se[t+4>>2],e){e=0,n=-1,t=0;t:for(;;){for(f=t;u=+ue[r+(f<<4)>>3],c=+ue[r+(f<<4)+8>>3],s=+ue[r+((t=(n+2|0)%(0|p)|0)<<4)>>3],a=+ue[r+(t<<4)+8>>3],u>s?(l=u,u=c):(l=s,s=u,u=a,a=c),i<s|i>l;){if(!((0|(n=f+1|0))<(0|p))){n=22;break t}t=f,f=n,n=t}if(o=(u=u<0?u+6.283185307179586:u)==o|(c=a<0?a+6.283185307179586:a)==o?o+-2220446049250313e-31:o,((c+=(i-s)/(l-s)*(u-c))<0?c+6.283185307179586:c)>o&&(e^=1),(0|(t=f+1|0))>=(0|p)){n=22;break}n=f}if(22==(0|n))return 0|e}else{e=0,n=-1,t=0;t:for(;;){for(f=t;u=+ue[r+(f<<4)>>3],c=+ue[r+(f<<4)+8>>3],s=+ue[r+((t=(n+2|0)%(0|p)|0)<<4)>>3],a=+ue[r+(t<<4)+8>>3],u>s?(l=u,u=c):(l=s,s=u,u=a,a=c),i<s|i>l;){if(!((0|(n=f+1|0))<(0|p))){n=22;break t}t=f,f=n,n=t}if(a+(i-s)/(l-s)*(u-a)>(o=u==o|a==o?o+-2220446049250313e-31:o)&&(e^=1),(0|(t=f+1|0))>=(0|p)){n=22;break}n=f}if(22==(0|n))return 0|e}return 0},kt=function(t,e){e|=0;var n,r,i,o,a,s=0,u=0,l=0,c=0,f=0,p=0,h=0,d=0,g=0,y=0,A=0,v=0;if(!(r=0|se[(t|=0)>>2]))return se[e>>2]=0,se[e+4>>2]=0,se[e+8>>2]=0,se[e+12>>2]=0,se[e+16>>2]=0,se[e+20>>2]=0,se[e+24>>2]=0,void(se[e+28>>2]=0);if(ue[(i=e+8|0)>>3]=17976931348623157e292,ue[(o=e+24|0)>>3]=17976931348623157e292,ue[e>>3]=-17976931348623157e292,ue[(a=e+16|0)>>3]=-17976931348623157e292,!((0|r)<=0)){for(n=0|se[t+4>>2],d=17976931348623157e292,g=-17976931348623157e292,y=0,t=-1,c=17976931348623157e292,f=17976931348623157e292,h=-17976931348623157e292,u=-17976931348623157e292,A=0;s=+ue[n+(A<<4)>>3],p=+ue[n+(A<<4)+8>>3],l=+ue[n+(((0|(t=t+2|0))==(0|r)?0:t)<<4)+8>>3],s<c&&(ue[i>>3]=s,c=s),p<f&&(ue[o>>3]=p,f=p),s>h?ue[e>>3]=s:s=h,p>u&&(ue[a>>3]=p,u=p),d=p>0&p<d?p:d,g=p<0&p>g?p:g,y|=+fe(+(p-l))>3.141592653589793,(0|(t=A+1|0))!=(0|r);)v=A,h=s,A=t,t=v;y&&(ue[a>>3]=g,ue[o>>3]=d)}},Ct=function(t,e){e|=0;var n,r=0,i=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,h=0,d=0,g=0,y=0,A=0,v=0,m=0,_=0,b=0,x=0,w=0;if(g=0|se[(t|=0)>>2]){if(ue[(y=e+8|0)>>3]=17976931348623157e292,ue[(A=e+24|0)>>3]=17976931348623157e292,ue[e>>3]=-17976931348623157e292,ue[(v=e+16|0)>>3]=-17976931348623157e292,(0|g)>0){for(o=0|se[t+4>>2],h=17976931348623157e292,d=-17976931348623157e292,i=0,r=-1,l=17976931348623157e292,c=17976931348623157e292,p=-17976931348623157e292,s=-17976931348623157e292,m=0;a=+ue[o+(m<<4)>>3],f=+ue[o+(m<<4)+8>>3],u=+ue[o+(((0|(x=r+2|0))==(0|g)?0:x)<<4)+8>>3],a<l&&(ue[y>>3]=a,l=a),f<c&&(ue[A>>3]=f,c=f),a>p?ue[e>>3]=a:a=p,f>s&&(ue[v>>3]=f,s=f),h=f>0&f<h?f:h,d=f<0&f>d?f:d,i|=+fe(+(f-u))>3.141592653589793,(0|(r=m+1|0))!=(0|g);)x=m,p=a,m=r,r=x;i&&(ue[v>>3]=d,ue[A>>3]=h)}}else se[e>>2]=0,se[e+4>>2]=0,se[e+8>>2]=0,se[e+12>>2]=0,se[e+16>>2]=0,se[e+20>>2]=0,se[e+24>>2]=0,se[e+28>>2]=0;if(!((0|(r=0|se[(x=t+8|0)>>2]))<=0)){n=t+12|0,b=0;do{if(o=0|se[n>>2],i=b,A=e+((b=b+1|0)<<5)|0,v=0|se[o+(i<<3)>>2]){if(ue[(m=e+(b<<5)+8|0)>>3]=17976931348623157e292,ue[(t=e+(b<<5)+24|0)>>3]=17976931348623157e292,ue[A>>3]=-17976931348623157e292,ue[(_=e+(b<<5)+16|0)>>3]=-17976931348623157e292,(0|v)>0){for(g=0|se[o+(i<<3)+4>>2],h=17976931348623157e292,d=-17976931348623157e292,o=0,i=-1,y=0,l=17976931348623157e292,c=17976931348623157e292,f=-17976931348623157e292,s=-17976931348623157e292;a=+ue[g+(y<<4)>>3],p=+ue[g+(y<<4)+8>>3],u=+ue[g+(((0|(i=i+2|0))==(0|v)?0:i)<<4)+8>>3],a<l&&(ue[m>>3]=a,l=a),p<c&&(ue[t>>3]=p,c=p),a>f?ue[A>>3]=a:a=f,p>s&&(ue[_>>3]=p,s=p),h=p>0&p<h?p:h,d=p<0&p>d?p:d,o|=+fe(+(p-u))>3.141592653589793,(0|(i=y+1|0))!=(0|v);)w=y,y=i,f=a,i=w;o&&(ue[_>>3]=d,ue[t>>3]=h)}}else se[A>>2]=0,se[A+4>>2]=0,se[A+8>>2]=0,se[A+12>>2]=0,se[A+16>>2]=0,se[A+20>>2]=0,se[A+24>>2]=0,se[A+28>>2]=0,r=0|se[x>>2]}while((0|b)<(0|r))}},Tt=function(t,e,n){var r=0,i=0,o=0;if(!(0|Pt(t|=0,e|=0,n|=0)))return 0|(i=0);if((0|se[(i=t+8|0)>>2])<=0)return 0|(i=1);for(r=t+12|0,t=0;;){if(o=t,t=t+1|0,0|Pt((0|se[r>>2])+(o<<3)|0,e+(t<<5)|0,n)){t=0,r=6;break}if((0|t)>=(0|se[i>>2])){t=1,r=6;break}}return 6==(0|r)?0|t:0},It=function(t){var e,n;return n=+ue[(t|=0)>>3],e=+ue[t+8>>3],+ +pe(+(n*n+e*e))},Mt=function(t,e,n,r,i){e|=0,n|=0,r|=0,i|=0;var o,a,s,u,l,c,f,p=0;u=+ue[(t|=0)>>3],s=+ue[e>>3]-u,a=+ue[t+8>>3],o=+ue[e+8>>3]-a,c=+ue[n>>3],p=((p=+ue[r>>3]-c)*(a-(f=+ue[n+8>>3]))-(u-c)*(l=+ue[r+8>>3]-f))/(s*l-o*p),ue[i>>3]=u+s*p,ue[i+8>>3]=a+o*p},Ot=function(t,e){return e|=0,+ue[(t|=0)>>3]!=+ue[e>>3]?0|(e=0):0|(e=+ue[t+8>>3]==+ue[e+8>>3])},Lt=function(t,e){e|=0;var n,r,i;return+((i=+ue[(t|=0)>>3]-+ue[e>>3])*i+(r=+ue[t+8>>3]-+ue[e+8>>3])*r+(n=+ue[t+16>>3]-+ue[e+16>>3])*n)},Rt=function(t,e){e|=0;var n,r,i=0;i=+ue[(t|=0)>>3],n=+de(+i),i=+ge(+i),ue[e+16>>3]=i,i=+ue[t+8>>3],r=n*+de(+i),ue[e>>3]=r,i=n*+ge(+i),ue[e+8>>3]=i},Dt=function(t,e){var n,r,i,o=0,a=0,s=0,c=0,f=0;if(i=Le,Le=Le+32|0,r=i,ht(t|=0,e|=0,n=i+16|0),s=0|et(t,e),f=0|ot(t,e),function(t,e){t=7728+(28*(t|=0)|0)|0,se[(e|=0)>>2]=se[t>>2],se[e+4>>2]=se[t+4>>2],se[e+8>>2]=se[t+8>>2],se[e+12>>2]=se[t+12>>2]}(s,r),e=0|function(t,e){t|=0;var n=0,r=0;if((e|=0)>>>0>20)return-1;do{if((0|se[11152+(216*e|0)>>2])!=(0|t))if((0|se[11152+(216*e|0)+8>>2])!=(0|t))if((0|se[11152+(216*e|0)+16>>2])!=(0|t))if((0|se[11152+(216*e|0)+24>>2])!=(0|t))if((0|se[11152+(216*e|0)+32>>2])!=(0|t))if((0|se[11152+(216*e|0)+40>>2])!=(0|t))if((0|se[11152+(216*e|0)+48>>2])!=(0|t))if((0|se[11152+(216*e|0)+56>>2])!=(0|t))if((0|se[11152+(216*e|0)+64>>2])!=(0|t))if((0|se[11152+(216*e|0)+72>>2])!=(0|t))if((0|se[11152+(216*e|0)+80>>2])!=(0|t))if((0|se[11152+(216*e|0)+88>>2])!=(0|t))if((0|se[11152+(216*e|0)+96>>2])!=(0|t))if((0|se[11152+(216*e|0)+104>>2])!=(0|t))if((0|se[11152+(216*e|0)+112>>2])!=(0|t))if((0|se[11152+(216*e|0)+120>>2])!=(0|t))if((0|se[11152+(216*e|0)+128>>2])!=(0|t)){if((0|se[11152+(216*e|0)+136>>2])!=(0|t)){if((0|se[11152+(216*e|0)+144>>2])==(0|t)){t=0,n=2,r=0;break}if((0|se[11152+(216*e|0)+152>>2])==(0|t)){t=0,n=2,r=1;break}if((0|se[11152+(216*e|0)+160>>2])==(0|t)){t=0,n=2,r=2;break}if((0|se[11152+(216*e|0)+168>>2])==(0|t)){t=1,n=2,r=0;break}if((0|se[11152+(216*e|0)+176>>2])==(0|t)){t=1,n=2,r=1;break}if((0|se[11152+(216*e|0)+184>>2])==(0|t)){t=1,n=2,r=2;break}if((0|se[11152+(216*e|0)+192>>2])==(0|t)){t=2,n=2,r=0;break}if((0|se[11152+(216*e|0)+200>>2])==(0|t)){t=2,n=2,r=1;break}if((0|se[11152+(216*e|0)+208>>2])==(0|t)){t=2,n=2,r=2;break}return-1}t=2,n=1,r=2}else t=2,n=1,r=1;else t=2,n=1,r=0;else t=1,n=1,r=2;else t=1,n=1,r=1;else t=1,n=1,r=0;else t=0,n=1,r=2;else t=0,n=1,r=1;else t=0,n=1,r=0;else t=2,n=0,r=2;else t=2,n=0,r=1;else t=2,n=0,r=0;else t=1,n=0,r=2;else t=1,n=0,r=1;else t=1,n=0,r=0;else t=0,n=0,r=2;else t=0,n=0,r=1;else t=0,n=0,r=0}while(0);return 0|se[11152+(216*e|0)+(72*n|0)+(24*t|0)+(r<<3)+4>>2]}(s,0|se[n>>2]),!(0|u(s)))return Le=i,0|(f=e);switch(0|s){case 4:t=0,o=14;break;case 14:t=1,o=14;break;case 24:t=2,o=14;break;case 38:t=3,o=14;break;case 49:t=4,o=14;break;case 58:t=5,o=14;break;case 63:t=6,o=14;break;case 72:t=7,o=14;break;case 83:t=8,o=14;break;case 97:t=9,o=14;break;case 107:t=10,o=14;break;case 117:t=11,o=14;break;default:c=0,a=0}return 14==(0|o)&&(c=0|se[22096+(24*t|0)+8>>2],a=0|se[22096+(24*t|0)+16>>2]),(0|(t=0|se[n>>2]))!=(0|se[r>>2])&&(s=0|l(s))|(0|(t=0|se[n>>2]))==(0|a)&&(e=(e+1|0)%6|0),3==(0|f)&(0|t)==(0|a)?(Le=i,0|(f=(e+5|0)%6|0)):5==(0|f)&(0|t)==(0|c)?(Le=i,0|(f=(e+1|0)%6|0)):(Le=i,0|(f=e))},Nt=function(t,e,n){n|=0;var r,i=0;return i=0|it(t|=0,e|=0),(n+-1|0)>>>0>5||1==(0|n)&(r=0!=(0|i))?0|(n=-1):(i=0|Dt(t,e),r?0|(n=(5-i+(0|se[22384+(n<<2)>>2])|0)%5|0):0|(n=(6-i+(0|se[22416+(n<<2)>>2])|0)%6|0))},Ft=function(t,e,n){t|=0,n|=0;var r=0;(0|(e|=0))>0?(r=0|Xt(e,4),se[t>>2]=r,r||ke(23230,23253,40,23267)):se[t>>2]=0,se[t+4>>2]=e,se[t+8>>2]=0,se[t+12>>2]=n},jt=function(t){var e,n,r,i=0,o=0,a=0,s=0;e=(t|=0)+4|0,n=t+12|0,r=t+8|0;t:for(;;){for(o=0|se[e>>2],i=0;;){if((0|i)>=(0|o))break t;if(a=0|se[t>>2],s=0|se[a+(i<<2)>>2])break;i=i+1|0}i=a+(~~(+fe(+ +he(10,+ +(15-(0|se[n>>2])|0))*(+ue[s>>3]+ +ue[s+8>>3]))%+(0|o))>>>0<<2)|0,o=0|se[i>>2];e:do{if(0|o){if(a=s+32|0,(0|o)==(0|s))se[i>>2]=se[a>>2];else{if(!(i=0|se[(o=o+32|0)>>2]))break;for(;(0|i)!=(0|s);)if(!(i=0|se[(o=i+32|0)>>2]))break e;se[o>>2]=se[a>>2]}Ht(s),se[r>>2]=(0|se[r>>2])-1}}while(0)}Ht(0|se[t>>2])},zt=function(t){var e,n=0,r=0;for(e=0|se[(t|=0)+4>>2],r=0;;){if((0|r)>=(0|e)){n=0,r=4;break}if(n=0|se[(0|se[t>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return 4==(0|r)?0|n:0},Bt=function(t,e){e|=0;var n=0,r=0,i=0,o=0;if(n=~~(+fe(+ +he(10,+ +(15-(0|se[(t|=0)+12>>2])|0))*(+ue[e>>3]+ +ue[e+8>>3]))%+(0|se[t+4>>2]))>>>0,n=(0|se[t>>2])+(n<<2)|0,!(r=0|se[n>>2]))return 0|(o=1);o=e+32|0;do{if((0|r)!=(0|e)){if(!(n=0|se[r+32>>2]))return 0|(o=1);for(i=n;;){if((0|i)==(0|e)){i=8;break}if(!(n=0|se[i+32>>2])){n=1,i=10;break}r=i,i=n}if(8==(0|i)){se[r+32>>2]=se[o>>2];break}if(10==(0|i))return 0|n}else se[n>>2]=se[o>>2]}while(0);return Ht(e),se[(o=t+8|0)>>2]=(0|se[o>>2])-1,0|(o=0)},Ut=function(t,e,n){t|=0,e|=0,n|=0;var r,i=0,o=0,a=0;(r=0|Wt(40))||ke(23283,23253,98,23296),se[r>>2]=se[e>>2],se[r+4>>2]=se[e+4>>2],se[r+8>>2]=se[e+8>>2],se[r+12>>2]=se[e+12>>2],se[(o=r+16|0)>>2]=se[n>>2],se[o+4>>2]=se[n+4>>2],se[o+8>>2]=se[n+8>>2],se[o+12>>2]=se[n+12>>2],se[r+32>>2]=0,o=~~(+fe(+ +he(10,+ +(15-(0|se[t+12>>2])|0))*(+ue[e>>3]+ +ue[e+8>>3]))%+(0|se[t+4>>2]))>>>0,o=(0|se[t>>2])+(o<<2)|0,i=0|se[o>>2];do{if(i){for(;!(0|Q(i,e)&&0|Q(i+16|0,n));)if(o=0|se[i+32>>2],!(0|se[(i=0==(0|o)?i:o)+32>>2])){a=10;break}if(10==(0|a)){se[i+32>>2]=r;break}return Ht(r),0|(a=i)}se[o>>2]=r}while(0);return se[(a=t+8|0)>>2]=1+(0|se[a>>2]),0|(a=r)},Vt=function(t,e,n){e|=0,n|=0;var r=0,i=0;if(i=~~(+fe(+ +he(10,+ +(15-(0|se[(t|=0)+12>>2])|0))*(+ue[e>>3]+ +ue[e+8>>3]))%+(0|se[t+4>>2]))>>>0,!(i=0|se[(0|se[t>>2])+(i<<2)>>2]))return 0|(n=0);if(!n){for(t=i;;){if(0|Q(t,e)){r=10;break}if(!(t=0|se[t+32>>2])){t=0,r=10;break}}if(10==(0|r))return 0|t}for(t=i;;){if(0|Q(t,e)&&0|Q(t+16|0,n)){r=10;break}if(!(t=0|se[t+32>>2])){t=0,r=10;break}}return 10==(0|r)?0|t:0},Gt=function(t,e){e|=0;var n=0;if(n=~~(+fe(+ +he(10,+ +(15-(0|se[(t|=0)+12>>2])|0))*(+ue[e>>3]+ +ue[e+8>>3]))%+(0|se[t+4>>2]))>>>0,!(t=0|se[(0|se[t>>2])+(n<<2)>>2]))return 0|(n=0);for(;;){if(0|Q(t,e)){e=5;break}if(!(t=0|se[t+32>>2])){t=0,e=5;break}}return 5==(0|e)?0|t:0},qt=function(t){return 0|~~+function(t){return+ +ie(+(t=+t))}(t=+t)},Wt=function(t){t|=0;var e,n=0,r=0,i=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,h=0,d=0,g=0,y=0,A=0,v=0,m=0,_=0,b=0;e=Le,Le=Le+16|0,h=e;do{if(t>>>0<245){if(t=(c=t>>>0<11?16:t+11&-8)>>>3,3&(r=(p=0|se[5829])>>>t)|0)return i=0|se[(r=(t=23356+((n=(1&r^1)+t|0)<<1<<2)|0)+8|0)>>2],(0|(a=0|se[(o=i+8|0)>>2]))==(0|t)?se[5829]=p&~(1<<n):(se[a+12>>2]=t,se[r>>2]=a),b=n<<3,se[i+4>>2]=3|b,se[(b=i+b+4|0)>>2]=1|se[b>>2],Le=e,0|(b=o);if(c>>>0>(f=0|se[5831])>>>0){if(0|r)return n=((n=r<<t&((n=2<<t)|0-n))&0-n)-1|0,a=0|se[(t=(n=23356+((i=((r=(n>>>=u=n>>>12&16)>>>5&8)|u|(a=(n>>>=r)>>>2&4)|(t=(n>>>=a)>>>1&2)|(i=(n>>>=t)>>>1&1))+(n>>>i)|0)<<1<<2)|0)+8|0)>>2],(0|(r=0|se[(u=a+8|0)>>2]))==(0|n)?(t=p&~(1<<i),se[5829]=t):(se[r+12>>2]=n,se[t>>2]=r,t=p),s=(b=i<<3)-c|0,se[a+4>>2]=3|c,se[(o=a+c|0)+4>>2]=1|s,se[a+b>>2]=s,0|f&&(i=0|se[5834],r=23356+((n=f>>>3)<<1<<2)|0,t&(n=1<<n)?n=0|se[(t=r+8|0)>>2]:(se[5829]=t|n,n=r,t=r+8|0),se[t>>2]=i,se[n+12>>2]=i,se[i+8>>2]=n,se[i+12>>2]=r),se[5831]=s,se[5834]=o,Le=e,0|(b=u);if(a=0|se[5830]){for(r=(a&0-a)-1|0,r=l=0|se[23620+(((i=(r>>>=o=r>>>12&16)>>>5&8)|o|(s=(r>>>=i)>>>2&4)|(u=(r>>>=s)>>>1&2)|(l=(r>>>=u)>>>1&1))+(r>>>l)<<2)>>2],u=l,l=(-8&se[l+4>>2])-c|0;(t=0|se[r+16>>2])||(t=0|se[r+20>>2]);)r=t,u=(o=(s=(-8&se[t+4>>2])-c|0)>>>0<l>>>0)?t:u,l=o?s:l;if((s=u+c|0)>>>0>u>>>0){o=0|se[u+24>>2],n=0|se[u+12>>2];do{if((0|n)==(0|u)){if(!(n=0|se[(t=u+20|0)>>2])&&!(n=0|se[(t=u+16|0)>>2])){r=0;break}for(;;)if(r=0|se[(i=n+20|0)>>2])n=r,t=i;else{if(!(r=0|se[(i=n+16|0)>>2]))break;n=r,t=i}se[t>>2]=0,r=n}else r=0|se[u+8>>2],se[r+12>>2]=n,se[n+8>>2]=r,r=n}while(0);do{if(0|o){if(n=0|se[u+28>>2],(0|u)==(0|se[(t=23620+(n<<2)|0)>>2])){if(se[t>>2]=r,!r){se[5830]=a&~(1<<n);break}}else if(se[((0|se[(b=o+16|0)>>2])==(0|u)?b:o+20|0)>>2]=r,!r)break;se[r+24>>2]=o,0|(n=0|se[u+16>>2])&&(se[r+16>>2]=n,se[n+24>>2]=r),0|(n=0|se[u+20>>2])&&(se[r+20>>2]=n,se[n+24>>2]=r)}}while(0);return l>>>0<16?(b=l+c|0,se[u+4>>2]=3|b,se[(b=u+b+4|0)>>2]=1|se[b>>2]):(se[u+4>>2]=3|c,se[s+4>>2]=1|l,se[s+l>>2]=l,0|f&&(i=0|se[5834],r=23356+((n=f>>>3)<<1<<2)|0,(n=1<<n)&p?n=0|se[(t=r+8|0)>>2]:(se[5829]=n|p,n=r,t=r+8|0),se[t>>2]=i,se[n+12>>2]=i,se[i+8>>2]=n,se[i+12>>2]=r),se[5831]=l,se[5834]=s),Le=e,0|(b=u+8|0)}p=c}else p=c}else p=c}else if(t>>>0<=4294967231)if(c=-8&(t=t+11|0),i=0|se[5830]){o=0-c|0,l=(t>>>=8)?c>>>0>16777215?31:c>>>((l=14-((u=((y=t<<(p=(t+1048320|0)>>>16&8))+520192|0)>>>16&4)|p|(l=((y<<=u)+245760|0)>>>16&2))+(y<<l>>>15)|0)+7|0)&1|l<<1:0,r=0|se[23620+(l<<2)>>2];t:do{if(r)for(t=0,u=c<<(31==(0|l)?0:25-(l>>>1)|0),a=0;;){if((s=(-8&se[r+4>>2])-c|0)>>>0<o>>>0){if(!s){t=r,o=0,y=65;break t}t=r,o=s}if(a=0==(0|(y=0|se[r+20>>2]))|(0|y)==(0|(r=0|se[r+16+(u>>>31<<2)>>2]))?a:y,!r){r=a,y=61;break}u<<=1}else r=0,t=0,y=61}while(0);if(61==(0|y)){if(0==(0|r)&0==(0|t)){if(!(t=((t=2<<l)|0-t)&i)){p=c;break}p=(t&0-t)-1|0,t=0,r=0|se[23620+(((a=(p>>>=s=p>>>12&16)>>>5&8)|s|(u=(p>>>=a)>>>2&4)|(l=(p>>>=u)>>>1&2)|(r=(p>>>=l)>>>1&1))+(p>>>r)<<2)>>2]}r?y=65:(u=t,s=o)}if(65==(0|y))for(a=r;;){if(o=(r=(p=(-8&se[a+4>>2])-c|0)>>>0<o>>>0)?p:o,t=r?a:t,(r=0|se[a+16>>2])||(r=0|se[a+20>>2]),!r){u=t,s=o;break}a=r}if(0!=(0|u)&&s>>>0<((0|se[5831])-c|0)>>>0&&(f=u+c|0)>>>0>u>>>0){a=0|se[u+24>>2],n=0|se[u+12>>2];do{if((0|n)==(0|u)){if(!(n=0|se[(t=u+20|0)>>2])&&!(n=0|se[(t=u+16|0)>>2])){n=0;break}for(;;)if(r=0|se[(o=n+20|0)>>2])n=r,t=o;else{if(!(r=0|se[(o=n+16|0)>>2]))break;n=r,t=o}se[t>>2]=0}else b=0|se[u+8>>2],se[b+12>>2]=n,se[n+8>>2]=b}while(0);do{if(a){if(t=0|se[u+28>>2],(0|u)==(0|se[(r=23620+(t<<2)|0)>>2])){if(se[r>>2]=n,!n){i&=~(1<<t),se[5830]=i;break}}else if(se[((0|se[(b=a+16|0)>>2])==(0|u)?b:a+20|0)>>2]=n,!n)break;se[n+24>>2]=a,0|(t=0|se[u+16>>2])&&(se[n+16>>2]=t,se[t+24>>2]=n),(t=0|se[u+20>>2])&&(se[n+20>>2]=t,se[t+24>>2]=n)}}while(0);t:do{if(s>>>0<16)b=s+c|0,se[u+4>>2]=3|b,se[(b=u+b+4|0)>>2]=1|se[b>>2];else{if(se[u+4>>2]=3|c,se[f+4>>2]=1|s,se[f+s>>2]=s,n=s>>>3,s>>>0<256){r=23356+(n<<1<<2)|0,(t=0|se[5829])&(n=1<<n)?n=0|se[(t=r+8|0)>>2]:(se[5829]=t|n,n=r,t=r+8|0),se[t>>2]=f,se[n+12>>2]=f,se[f+8>>2]=n,se[f+12>>2]=r;break}if(n=23620+((r=(n=s>>>8)?s>>>0>16777215?31:s>>>((r=14-((m=((b=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(r=((b<<=m)+245760|0)>>>16&2))+(b<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,se[f+28>>2]=r,se[(t=f+16|0)+4>>2]=0,se[t>>2]=0,!(i&(t=1<<r))){se[5830]=i|t,se[n>>2]=f,se[f+24>>2]=n,se[f+12>>2]=f,se[f+8>>2]=f;break}n=0|se[n>>2];e:do{if((-8&se[n+4>>2]|0)!=(0|s)){for(i=s<<(31==(0|r)?0:25-(r>>>1)|0);t=0|se[(r=n+16+(i>>>31<<2)|0)>>2];){if((-8&se[t+4>>2]|0)==(0|s)){n=t;break e}i<<=1,n=t}se[r>>2]=f,se[f+24>>2]=n,se[f+12>>2]=f,se[f+8>>2]=f;break t}}while(0);b=0|se[(_=n+8|0)>>2],se[b+12>>2]=f,se[_>>2]=f,se[f+8>>2]=b,se[f+12>>2]=n,se[f+24>>2]=0}}while(0);return Le=e,0|(b=u+8|0)}p=c}else p=c;else p=-1}while(0);if((r=0|se[5831])>>>0>=p>>>0)return n=r-p|0,t=0|se[5834],n>>>0>15?(b=t+p|0,se[5834]=b,se[5831]=n,se[b+4>>2]=1|n,se[t+r>>2]=n,se[t+4>>2]=3|p):(se[5831]=0,se[5834]=0,se[t+4>>2]=3|r,se[(b=t+r+4|0)>>2]=1|se[b>>2]),Le=e,0|(b=t+8|0);if((s=0|se[5832])>>>0>p>>>0)return m=s-p|0,se[5832]=m,_=(b=0|se[5835])+p|0,se[5835]=_,se[_+4>>2]=1|m,se[b+4>>2]=3|p,Le=e,0|(b=b+8|0);if(0|se[5947]?t=0|se[5949]:(se[5949]=4096,se[5948]=4096,se[5950]=-1,se[5951]=-1,se[5952]=0,se[5940]=0,se[5947]=-16&h^1431655768,t=4096),u=p+48|0,(c=(a=t+(l=p+47|0)|0)&(o=0-t|0))>>>0<=p>>>0)return Le=e,0|(b=0);if(0|(t=0|se[5939])&&(h=(f=0|se[5937])+c|0)>>>0<=f>>>0|h>>>0>t>>>0)return Le=e,0|(b=0);t:do{if(4&se[5940])n=0,y=143;else{r=0|se[5835];e:do{if(r){for(i=23764;!((h=0|se[i>>2])>>>0<=r>>>0&&(h+(0|se[i+4>>2])|0)>>>0>r>>>0);){if(!(t=0|se[i+8>>2])){y=128;break e}i=t}if((n=a-s&o)>>>0<2147483647)if((0|(t=0|oe(0|n)))==((0|se[i>>2])+(0|se[i+4>>2])|0)){if(-1!=(0|t)){s=n,a=t,y=145;break t}}else i=t,y=136;else n=0}else y=128}while(0);do{if(128==(0|y))if(-1!=(0|(r=0|oe(0)))&&(n=r,g=(n=(0==((g=(d=0|se[5948])+-1|0)&n|0)?0:(g+n&0-d)-n|0)+c|0)+(d=0|se[5937])|0,n>>>0>p>>>0&n>>>0<2147483647)){if(0|(h=0|se[5939])&&g>>>0<=d>>>0|g>>>0>h>>>0){n=0;break}if((0|(t=0|oe(0|n)))==(0|r)){s=n,a=r,y=145;break t}i=t,y=136}else n=0}while(0);do{if(136==(0|y)){if(r=0-n|0,!(u>>>0>n>>>0&n>>>0<2147483647&-1!=(0|i))){if(-1==(0|i)){n=0;break}s=n,a=i,y=145;break t}if((t=l-n+(t=0|se[5949])&0-t)>>>0>=2147483647){s=n,a=i,y=145;break t}if(-1==(0|oe(0|t))){oe(0|r),n=0;break}s=t+n|0,a=i,y=145;break t}}while(0);se[5940]=4|se[5940],y=143}}while(0);if(143==(0|y)&&c>>>0<2147483647&&!(-1==(0|(m=0|oe(0|c)))|1^(v=(A=(g=0|oe(0))-m|0)>>>0>(p+40|0)>>>0)|m>>>0<g>>>0&-1!=(0|m)&-1!=(0|g)^1)&&(s=v?A:n,a=m,y=145),145==(0|y)){n=(0|se[5937])+s|0,se[5937]=n,n>>>0>(0|se[5938])>>>0&&(se[5938]=n),l=0|se[5835];t:do{if(l){for(n=23764;;){if((0|a)==((t=0|se[n>>2])+(r=0|se[n+4>>2])|0)){y=154;break}if(!(i=0|se[n+8>>2]))break;n=i}if(154==(0|y)&&(_=n+4|0,0==(8&se[n+12>>2]|0))&&a>>>0>l>>>0&t>>>0<=l>>>0){se[_>>2]=r+s,_=l+(m=0==(7&(m=l+8|0)|0)?0:0-m&7)|0,m=(b=(0|se[5832])+s|0)-m|0,se[5835]=_,se[5832]=m,se[_+4>>2]=1|m,se[l+b+4>>2]=40,se[5836]=se[5951];break}for(a>>>0<(0|se[5833])>>>0&&(se[5833]=a),r=a+s|0,n=23764;;){if((0|se[n>>2])==(0|r)){y=162;break}if(!(t=0|se[n+8>>2]))break;n=t}if(162==(0|y)&&0==(8&se[n+12>>2]|0)){se[n>>2]=a,se[(f=n+4|0)>>2]=(0|se[f>>2])+s,c=(f=a+(0==(7&(f=a+8|0)|0)?0:0-f&7)|0)+p|0,u=(n=r+(0==(7&(n=r+8|0)|0)?0:0-n&7)|0)-f-p|0,se[f+4>>2]=3|p;e:do{if((0|l)==(0|n))b=(0|se[5832])+u|0,se[5832]=b,se[5835]=c,se[c+4>>2]=1|b;else{if((0|se[5834])==(0|n)){b=(0|se[5831])+u|0,se[5831]=b,se[5834]=c,se[c+4>>2]=1|b,se[c+b>>2]=b;break}if(1==(3&(t=0|se[n+4>>2])|0)){s=-8&t,i=t>>>3;n:do{if(t>>>0<256){if(t=0|se[n+8>>2],(0|(r=0|se[n+12>>2]))==(0|t)){se[5829]=se[5829]&~(1<<i);break}se[t+12>>2]=r,se[r+8>>2]=t;break}a=0|se[n+24>>2],t=0|se[n+12>>2];do{if((0|t)==(0|n)){if(t=0|se[(i=(r=n+16|0)+4|0)>>2])r=i;else if(!(t=0|se[r>>2])){t=0;break}for(;;)if(i=0|se[(o=t+20|0)>>2])t=i,r=o;else{if(!(i=0|se[(o=t+16|0)>>2]))break;t=i,r=o}se[r>>2]=0}else b=0|se[n+8>>2],se[b+12>>2]=t,se[t+8>>2]=b}while(0);if(!a)break;i=23620+((r=0|se[n+28>>2])<<2)|0;do{if((0|se[i>>2])==(0|n)){if(se[i>>2]=t,0|t)break;se[5830]=se[5830]&~(1<<r);break n}if(se[((0|se[(b=a+16|0)>>2])==(0|n)?b:a+20|0)>>2]=t,!t)break n}while(0);if(se[t+24>>2]=a,0|(i=0|se[(r=n+16|0)>>2])&&(se[t+16>>2]=i,se[i+24>>2]=t),!(r=0|se[r+4>>2]))break;se[t+20>>2]=r,se[r+24>>2]=t}while(0);n=n+s|0,o=s+u|0}else o=u;if(se[(n=n+4|0)>>2]=-2&se[n>>2],se[c+4>>2]=1|o,se[c+o>>2]=o,n=o>>>3,o>>>0<256){r=23356+(n<<1<<2)|0,(t=0|se[5829])&(n=1<<n)?n=0|se[(t=r+8|0)>>2]:(se[5829]=t|n,n=r,t=r+8|0),se[t>>2]=c,se[n+12>>2]=c,se[c+8>>2]=n,se[c+12>>2]=r;break}n=o>>>8;do{if(n){if(o>>>0>16777215){i=31;break}i=o>>>((i=14-((m=((b=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(i=((b<<=m)+245760|0)>>>16&2))+(b<<i>>>15)|0)+7|0)&1|i<<1}else i=0}while(0);if(n=23620+(i<<2)|0,se[c+28>>2]=i,se[(t=c+16|0)+4>>2]=0,se[t>>2]=0,!((t=0|se[5830])&(r=1<<i))){se[5830]=t|r,se[n>>2]=c,se[c+24>>2]=n,se[c+12>>2]=c,se[c+8>>2]=c;break}n=0|se[n>>2];n:do{if((-8&se[n+4>>2]|0)!=(0|o)){for(i=o<<(31==(0|i)?0:25-(i>>>1)|0);t=0|se[(r=n+16+(i>>>31<<2)|0)>>2];){if((-8&se[t+4>>2]|0)==(0|o)){n=t;break n}i<<=1,n=t}se[r>>2]=c,se[c+24>>2]=n,se[c+12>>2]=c,se[c+8>>2]=c;break e}}while(0);b=0|se[(_=n+8|0)>>2],se[b+12>>2]=c,se[_>>2]=c,se[c+8>>2]=b,se[c+12>>2]=n,se[c+24>>2]=0}}while(0);return Le=e,0|(b=f+8|0)}for(n=23764;!((t=0|se[n>>2])>>>0<=l>>>0&&(b=t+(0|se[n+4>>2])|0)>>>0>l>>>0);)n=0|se[n+8>>2];n=(t=(t=(o=b+-47|0)+(0==(7&(t=o+8|0)|0)?0:0-t&7)|0)>>>0<(o=l+16|0)>>>0?l:t)+8|0,_=a+(m=0==(7&(m=a+8|0)|0)?0:0-m&7)|0,m=(r=s+-40|0)-m|0,se[5835]=_,se[5832]=m,se[_+4>>2]=1|m,se[a+r+4>>2]=40,se[5836]=se[5951],se[(r=t+4|0)>>2]=27,se[n>>2]=se[5941],se[n+4>>2]=se[5942],se[n+8>>2]=se[5943],se[n+12>>2]=se[5944],se[5941]=a,se[5942]=s,se[5944]=0,se[5943]=n,n=t+24|0;do{_=n,se[(n=n+4|0)>>2]=7}while((_+8|0)>>>0<b>>>0);if((0|t)!=(0|l)){if(a=t-l|0,se[r>>2]=-2&se[r>>2],se[l+4>>2]=1|a,se[t>>2]=a,n=a>>>3,a>>>0<256){r=23356+(n<<1<<2)|0,(t=0|se[5829])&(n=1<<n)?n=0|se[(t=r+8|0)>>2]:(se[5829]=t|n,n=r,t=r+8|0),se[t>>2]=l,se[n+12>>2]=l,se[l+8>>2]=n,se[l+12>>2]=r;break}if(r=23620+((i=(n=a>>>8)?a>>>0>16777215?31:a>>>((i=14-((m=((b=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(i=((b<<=m)+245760|0)>>>16&2))+(b<<i>>>15)|0)+7|0)&1|i<<1:0)<<2)|0,se[l+28>>2]=i,se[l+20>>2]=0,se[o>>2]=0,!((n=0|se[5830])&(t=1<<i))){se[5830]=n|t,se[r>>2]=l,se[l+24>>2]=r,se[l+12>>2]=l,se[l+8>>2]=l;break}n=0|se[r>>2];e:do{if((-8&se[n+4>>2]|0)!=(0|a)){for(i=a<<(31==(0|i)?0:25-(i>>>1)|0);t=0|se[(r=n+16+(i>>>31<<2)|0)>>2];){if((-8&se[t+4>>2]|0)==(0|a)){n=t;break e}i<<=1,n=t}se[r>>2]=l,se[l+24>>2]=n,se[l+12>>2]=l,se[l+8>>2]=l;break t}}while(0);b=0|se[(_=n+8|0)>>2],se[b+12>>2]=l,se[_>>2]=l,se[l+8>>2]=b,se[l+12>>2]=n,se[l+24>>2]=0}}else 0==(0|(b=0|se[5833]))|a>>>0<b>>>0&&(se[5833]=a),se[5941]=a,se[5942]=s,se[5944]=0,se[5838]=se[5947],se[5837]=-1,se[5842]=23356,se[5841]=23356,se[5844]=23364,se[5843]=23364,se[5846]=23372,se[5845]=23372,se[5848]=23380,se[5847]=23380,se[5850]=23388,se[5849]=23388,se[5852]=23396,se[5851]=23396,se[5854]=23404,se[5853]=23404,se[5856]=23412,se[5855]=23412,se[5858]=23420,se[5857]=23420,se[5860]=23428,se[5859]=23428,se[5862]=23436,se[5861]=23436,se[5864]=23444,se[5863]=23444,se[5866]=23452,se[5865]=23452,se[5868]=23460,se[5867]=23460,se[5870]=23468,se[5869]=23468,se[5872]=23476,se[5871]=23476,se[5874]=23484,se[5873]=23484,se[5876]=23492,se[5875]=23492,se[5878]=23500,se[5877]=23500,se[5880]=23508,se[5879]=23508,se[5882]=23516,se[5881]=23516,se[5884]=23524,se[5883]=23524,se[5886]=23532,se[5885]=23532,se[5888]=23540,se[5887]=23540,se[5890]=23548,se[5889]=23548,se[5892]=23556,se[5891]=23556,se[5894]=23564,se[5893]=23564,se[5896]=23572,se[5895]=23572,se[5898]=23580,se[5897]=23580,se[5900]=23588,se[5899]=23588,se[5902]=23596,se[5901]=23596,se[5904]=23604,se[5903]=23604,_=a+(m=0==(7&(m=a+8|0)|0)?0:0-m&7)|0,m=(b=s+-40|0)-m|0,se[5835]=_,se[5832]=m,se[_+4>>2]=1|m,se[a+b+4>>2]=40,se[5836]=se[5951]}while(0);if((n=0|se[5832])>>>0>p>>>0)return m=n-p|0,se[5832]=m,_=(b=0|se[5835])+p|0,se[5835]=_,se[_+4>>2]=1|m,se[b+4>>2]=3|p,Le=e,0|(b=b+8|0)}return se[(b=23312)>>2]=12,Le=e,0|(b=0)},Ht=function(t){var e=0,n=0,r=0,i=0,o=0,a=0,s=0,u=0;if(t|=0){n=t+-8|0,i=0|se[5833],u=n+(e=-8&(t=0|se[t+-4>>2]))|0;do{if(1&t)s=n,a=n;else{if(r=0|se[n>>2],!(3&t))return;if(o=r+e|0,(a=n+(0-r)|0)>>>0<i>>>0)return;if((0|se[5834])==(0|a)){if(3!=(3&(e=0|se[(t=u+4|0)>>2])|0)){s=a,e=o;break}return se[5831]=o,se[t>>2]=-2&e,se[a+4>>2]=1|o,void(se[a+o>>2]=o)}if(n=r>>>3,r>>>0<256){if(t=0|se[a+8>>2],(0|(e=0|se[a+12>>2]))==(0|t)){se[5829]=se[5829]&~(1<<n),s=a,e=o;break}se[t+12>>2]=e,se[e+8>>2]=t,s=a,e=o;break}i=0|se[a+24>>2],t=0|se[a+12>>2];do{if((0|t)==(0|a)){if(t=0|se[(n=(e=a+16|0)+4|0)>>2])e=n;else if(!(t=0|se[e>>2])){t=0;break}for(;;)if(n=0|se[(r=t+20|0)>>2])t=n,e=r;else{if(!(n=0|se[(r=t+16|0)>>2]))break;t=n,e=r}se[e>>2]=0}else s=0|se[a+8>>2],se[s+12>>2]=t,se[t+8>>2]=s}while(0);if(i){if(e=0|se[a+28>>2],(0|se[(n=23620+(e<<2)|0)>>2])==(0|a)){if(se[n>>2]=t,!t){se[5830]=se[5830]&~(1<<e),s=a,e=o;break}}else if(se[((0|se[(s=i+16|0)>>2])==(0|a)?s:i+20|0)>>2]=t,!t){s=a,e=o;break}se[t+24>>2]=i,0|(n=0|se[(e=a+16|0)>>2])&&(se[t+16>>2]=n,se[n+24>>2]=t),(e=0|se[e+4>>2])?(se[t+20>>2]=e,se[e+24>>2]=t,s=a,e=o):(s=a,e=o)}else s=a,e=o}}while(0);if(!(a>>>0>=u>>>0)&&1&(r=0|se[(t=u+4|0)>>2])){if(2&r)se[t>>2]=-2&r,se[s+4>>2]=1|e,se[a+e>>2]=e,i=e;else{if((0|se[5835])==(0|u)){if(u=(0|se[5832])+e|0,se[5832]=u,se[5835]=s,se[s+4>>2]=1|u,(0|s)!=(0|se[5834]))return;return se[5834]=0,void(se[5831]=0)}if((0|se[5834])==(0|u))return u=(0|se[5831])+e|0,se[5831]=u,se[5834]=a,se[s+4>>2]=1|u,void(se[a+u>>2]=u);i=(-8&r)+e|0,n=r>>>3;do{if(r>>>0<256){if(e=0|se[u+8>>2],(0|(t=0|se[u+12>>2]))==(0|e)){se[5829]=se[5829]&~(1<<n);break}se[e+12>>2]=t,se[t+8>>2]=e;break}o=0|se[u+24>>2],t=0|se[u+12>>2];do{if((0|t)==(0|u)){if(t=0|se[(n=(e=u+16|0)+4|0)>>2])e=n;else if(!(t=0|se[e>>2])){n=0;break}for(;;)if(n=0|se[(r=t+20|0)>>2])t=n,e=r;else{if(!(n=0|se[(r=t+16|0)>>2]))break;t=n,e=r}se[e>>2]=0,n=t}else n=0|se[u+8>>2],se[n+12>>2]=t,se[t+8>>2]=n,n=t}while(0);if(0|o){if(t=0|se[u+28>>2],(0|se[(e=23620+(t<<2)|0)>>2])==(0|u)){if(se[e>>2]=n,!n){se[5830]=se[5830]&~(1<<t);break}}else if(se[((0|se[(r=o+16|0)>>2])==(0|u)?r:o+20|0)>>2]=n,!n)break;se[n+24>>2]=o,0|(e=0|se[(t=u+16|0)>>2])&&(se[n+16>>2]=e,se[e+24>>2]=n),0|(t=0|se[t+4>>2])&&(se[n+20>>2]=t,se[t+24>>2]=n)}}while(0);if(se[s+4>>2]=1|i,se[a+i>>2]=i,(0|s)==(0|se[5834]))return void(se[5831]=i)}if(t=i>>>3,i>>>0<256)return n=23356+(t<<1<<2)|0,(e=0|se[5829])&(t=1<<t)?t=0|se[(e=n+8|0)>>2]:(se[5829]=e|t,t=n,e=n+8|0),se[e>>2]=s,se[t+12>>2]=s,se[s+8>>2]=t,void(se[s+12>>2]=n);t=23620+((r=(t=i>>>8)?i>>>0>16777215?31:i>>>((r=14-((o=((u=t<<(a=(t+1048320|0)>>>16&8))+520192|0)>>>16&4)|a|(r=((u<<=o)+245760|0)>>>16&2))+(u<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,se[s+28>>2]=r,se[s+20>>2]=0,se[s+16>>2]=0,e=0|se[5830],n=1<<r;t:do{if(e&n){t=0|se[t>>2];e:do{if((-8&se[t+4>>2]|0)!=(0|i)){for(r=i<<(31==(0|r)?0:25-(r>>>1)|0);e=0|se[(n=t+16+(r>>>31<<2)|0)>>2];){if((-8&se[e+4>>2]|0)==(0|i)){t=e;break e}r<<=1,t=e}se[n>>2]=s,se[s+24>>2]=t,se[s+12>>2]=s,se[s+8>>2]=s;break t}}while(0);u=0|se[(a=t+8|0)>>2],se[u+12>>2]=s,se[a>>2]=s,se[s+8>>2]=u,se[s+12>>2]=t,se[s+24>>2]=0}else se[5830]=e|n,se[t>>2]=s,se[s+24>>2]=t,se[s+12>>2]=s,se[s+8>>2]=s}while(0);if(u=(0|se[5837])-1|0,se[5837]=u,!(0|u)){for(t=23772;t=0|se[t>>2];)t=t+8|0;se[5837]=-1}}}},Xt=function(t,e){e|=0;var n=0;return(t|=0)?(n=0|xe(e,t),(e|t)>>>0>65535&&(n=((n>>>0)/(t>>>0)|0)==(0|e)?n:-1)):n=0,(t=0|Wt(n))&&3&se[t+-4>>2]?(re(0|t,0,0|n),0|t):0|t},Zt=function(t,e,n,r){return 0|(Se(0|(r=(e|=0)-(r|=0)-((n|=0)>>>0>(t|=0)>>>0|0)>>>0)),t-n>>>0|0)},Yt=function(t){return 0|((t|=0)?31-(0|Ee(t^t-1))|0:32)},Qt=function(t,e,n,r,i){i|=0;var o=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,h=0,d=0;if(c=t|=0,a=n|=0,s=p=r|=0,!(l=u=e|=0))return o=0!=(0|i),s?o?(se[i>>2]=0|t,se[i+4>>2]=0&e,i=0,0|(Se(0|(p=0)),i)):(i=0,0|(Se(0|(p=0)),i)):(o&&(se[i>>2]=(c>>>0)%(a>>>0),se[i+4>>2]=0),i=(c>>>0)/(a>>>0)>>>0,0|(Se(0|(p=0)),i));o=0==(0|s);do{if(a){if(!o){if((o=(0|Ee(0|s))-(0|Ee(0|l))|0)>>>0<=31){a=f=o+1|0,t=c>>>(f>>>0)&(e=o-31>>31)|l<<(s=31-o|0),e&=l>>>(f>>>0),o=0,s=c<<s;break}return i?(se[i>>2]=0|t,se[i+4>>2]=u|0&e,i=0,0|(Se(0|(p=0)),i)):(i=0,0|(Se(0|(p=0)),i))}if((o=a-1|0)&a|0){a=s=33+(0|Ee(0|a))-(0|Ee(0|l))|0,t=(f=32-s|0)-1>>31&l>>>((h=s-32|0)>>>0)|(l<<f|c>>>(s>>>0))&(e=h>>31),e&=l>>>(s>>>0),o=c<<(d=64-s|0)&(u=f>>31),s=(l<<d|c>>>(h>>>0))&u|c<<f&s-33>>31;break}return 0|i&&(se[i>>2]=o&c,se[i+4>>2]=0),1==(0|a)?(d=0|t,0|(Se(0|(h=u|0&e)),d)):(h=l>>>((d=0|Yt(0|a))>>>0)|0,d=l<<32-d|c>>>(d>>>0)|0,0|(Se(0|h),d))}if(o)return 0|i&&(se[i>>2]=(l>>>0)%(a>>>0),se[i+4>>2]=0),d=(l>>>0)/(a>>>0)>>>0,0|(Se(0|(h=0)),d);if(!c)return 0|i&&(se[i>>2]=0,se[i+4>>2]=(l>>>0)%(s>>>0)),d=(l>>>0)/(s>>>0)>>>0,0|(Se(0|(h=0)),d);if(!((o=s-1|0)&s))return 0|i&&(se[i>>2]=0|t,se[i+4>>2]=o&l|0&e),h=0,d=l>>>((0|Yt(0|s))>>>0),0|(Se(0|h),d);if((o=(0|Ee(0|s))-(0|Ee(0|l))|0)>>>0<=30){a=e=o+1|0,t=l<<(s=31-o|0)|c>>>(e>>>0),e=l>>>(e>>>0),o=0,s=c<<s;break}return i?(se[i>>2]=0|t,se[i+4>>2]=u|0&e,d=0,0|(Se(0|(h=0)),d)):(d=0,0|(Se(0|(h=0)),d))}while(0);if(a){l=0|function(t,e,n,r){return 0|(Se((e|=0)+(r|=0)+((n=(t|=0)+(n|=0)>>>0)>>>0<t>>>0|0)>>>0|0),0|n)}(0|(f=0|n),0|(c=p|0&r),-1,-1),n=0|Pe(),u=s,s=0;do{r=u,u=o>>>31|u<<1,o=s|o<<1,Zt(0|l,0|n,0|(r=t<<1|r>>>31|0),0|(p=t>>>31|e<<1|0)),s=1&(h=(d=0|Pe())>>31|((0|d)<0?-1:0)<<1),t=0|Zt(0|r,0|p,h&f|0,(((0|d)<0?-1:0)>>31|((0|d)<0?-1:0)<<1)&c|0),e=0|Pe(),a=a-1|0}while(0!=(0|a));l=u,u=0}else l=s,u=0,s=0;return a=0,0|i&&(se[i>>2]=t,se[i+4>>2]=e),d=-2&(o<<1|0)|s,0|(Se(0|(h=(0|o)>>>31|(l|a)<<1|0&(a<<1|o>>>31)|u)),d)},Kt=function(t,e,n,r){var i,o;return o=Le,Le=Le+16|0,Qt(t|=0,e|=0,n|=0,r|=0,i=0|o),Le=o,0|(Se(0|se[i+4>>2]),0|se[i>>2])},Jt=function(t,e,n){return t|=0,e|=0,(0|(n|=0))<32?(Se(e>>>n|0),t>>>n|(e&(1<<n)-1)<<32-n):(Se(0),e>>>n-32|0)},$t=function(t,e,n){return t|=0,e|=0,(0|(n|=0))<32?(Se(e<<n|(t&(1<<n)-1<<32-n)>>>32-n|0),t<<n):(Se(t<<n-32|0),0)},te=function(t,e){return e=+e,(t=+t)!=t?+e:e!=e?+t:+we(+t,+e)},ee=function(t){return(t=+t)>=0?+ce(t+.5):+be(t-.5)},ne=function(t,e,n){t|=0,e|=0;var r,i,o=0;if((0|(n|=0))>=8192)return Ie(0|t,0|e,0|n),0|t;if(i=0|t,r=t+n|0,(3&t)==(3&e)){for(;3&t;){if(!n)return 0|i;ae[t>>0]=0|ae[e>>0],t=t+1|0,e=e+1|0,n=n-1|0}for(o=(n=-4&r|0)-64|0;(0|t)<=(0|o);)se[t>>2]=se[e>>2],se[t+4>>2]=se[e+4>>2],se[t+8>>2]=se[e+8>>2],se[t+12>>2]=se[e+12>>2],se[t+16>>2]=se[e+16>>2],se[t+20>>2]=se[e+20>>2],se[t+24>>2]=se[e+24>>2],se[t+28>>2]=se[e+28>>2],se[t+32>>2]=se[e+32>>2],se[t+36>>2]=se[e+36>>2],se[t+40>>2]=se[e+40>>2],se[t+44>>2]=se[e+44>>2],se[t+48>>2]=se[e+48>>2],se[t+52>>2]=se[e+52>>2],se[t+56>>2]=se[e+56>>2],se[t+60>>2]=se[e+60>>2],t=t+64|0,e=e+64|0;for(;(0|t)<(0|n);)se[t>>2]=se[e>>2],t=t+4|0,e=e+4|0}else for(n=r-4|0;(0|t)<(0|n);)ae[t>>0]=0|ae[e>>0],ae[t+1>>0]=0|ae[e+1>>0],ae[t+2>>0]=0|ae[e+2>>0],ae[t+3>>0]=0|ae[e+3>>0],t=t+4|0,e=e+4|0;for(;(0|t)<(0|r);)ae[t>>0]=0|ae[e>>0],t=t+1|0,e=e+1|0;return 0|i},re=function(t,e,n){e|=0;var r,i=0,o=0,a=0;if(r=(t|=0)+(n|=0)|0,e&=255,(0|n)>=67){for(;3&t;)ae[t>>0]=e,t=t+1|0;for(a=e|e<<8|e<<16|e<<24,o=(i=-4&r|0)-64|0;(0|t)<=(0|o);)se[t>>2]=a,se[t+4>>2]=a,se[t+8>>2]=a,se[t+12>>2]=a,se[t+16>>2]=a,se[t+20>>2]=a,se[t+24>>2]=a,se[t+28>>2]=a,se[t+32>>2]=a,se[t+36>>2]=a,se[t+40>>2]=a,se[t+44>>2]=a,se[t+48>>2]=a,se[t+52>>2]=a,se[t+56>>2]=a,se[t+60>>2]=a,t=t+64|0;for(;(0|t)<(0|i);)se[t>>2]=a,t=t+4|0}for(;(0|t)<(0|r);)ae[t>>0]=e,t=t+1|0;return r-n|0},ie=function(t){return(t=+t)>=0?+ce(t+.5):+be(t-.5)},oe=function(t){t|=0;var e,n,r;return r=0|Te(),(0|t)>0&(0|(e=(n=0|se[le>>2])+t|0))<(0|n)|(0|e)<0?(Oe(0|e),Ce(12),-1):(0|e)>(0|r)&&!(0|Me(0|e))?(Ce(12),-1):(se[le>>2]=e,0|n)},ae=new t.Int8Array(n),se=new t.Int32Array(n),ue=(new t.Uint8Array(n),new t.Float32Array(n),new t.Float64Array(n)),le=0|e.p,ce=t.Math.floor,fe=t.Math.abs,pe=t.Math.sqrt,he=t.Math.pow,de=t.Math.cos,ge=t.Math.sin,ye=t.Math.tan,Ae=t.Math.acos,ve=t.Math.asin,me=t.Math.atan,_e=t.Math.atan2,be=t.Math.ceil,xe=t.Math.imul,we=t.Math.min,Ee=t.Math.clz32,Se=e.b,Pe=e.c,ke=e.d,Ce=e.e,Te=e.f,Ie=e.g,Me=e.h,Oe=e.i,Le=24048;function Re(t,e,n,r,i,a,s){n|=0,r|=0,i|=0,a|=0,s|=0;var u,l,c=0,f=0,p=0,h=0,d=0;if(l=Le,Le=Le+16|0,u=l,0==(0|(t|=0))&0==(0|(e|=0)))Le=l;else{if(c=0|Kt(0|t,0|e,0|a,((0|a)<0)<<31>>31|0),Pe(),!(0==(0|(d=0|se[(h=f=r+(c<<3)|0)>>2]))&0==(0|(h=0|se[h+4>>2]))|(p=(0|d)==(0|t)&(0|h)==(0|e))))do{p=(0|(h=0|se[(d=f=r+((c=(c+1|0)%(0|a)|0)<<3)|0)>>2]))==(0|t)&(0|(d=0|se[d+4>>2]))==(0|e)}while(!(0==(0|h)&0==(0|d)|p));c=i+(c<<2)|0,p&&(0|se[c>>2])<=(0|s)||(se[(d=f)>>2]=t,se[d+4>>2]=e,se[c>>2]=s,(0|s)>=(0|n)||(d=s+1|0,se[u>>2]=0,Re(h=0|o(t,e,2,u),0|Pe(),n,r,i,a,d),se[u>>2]=0,Re(h=0|o(t,e,3,u),0|Pe(),n,r,i,a,d),se[u>>2]=0,Re(h=0|o(t,e,1,u),0|Pe(),n,r,i,a,d),se[u>>2]=0,Re(h=0|o(t,e,5,u),0|Pe(),n,r,i,a,d),se[u>>2]=0,Re(h=0|o(t,e,4,u),0|Pe(),n,r,i,a,d),se[u>>2]=0,Re(h=0|o(t,e,6,u),0|Pe(),n,r,i,a,d))),Le=l}}function De(t,e,n,r){n|=0,r|=0;var i,o=0,a=0,s=0,l=0,c=0,f=0;if(s=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),(0|n)<16&(0|(s&=15))<=(0|n)){if((0|s)==(0|n))return se[(n=r)>>2]=t,void(se[n+4>>2]=e);if(i=(0|(c=0|St(7,n-s|0)))/7|0,l=0|Jt(0|t,0|e,45),Pe(),0|u(127&l)){t:do{if(s)for(a=1;;){if(o=0|Jt(0|t,0|e,3*(15-a|0)|0),Pe(),0|(o&=7))break t;if(!(a>>>0<s>>>0)){o=0;break}a=a+1|0}else o=0}while(0);a=0==(0|o)}else a=0;if(f=0|$t(s+1|0,0,52),o=0|Pe()|-15728641&e,De(e=(f|t)&~(e=0|$t(7,0,0|(l=3*(14-s|0)|0))),s=o&~(0|Pe()),n,r),o=r+(i<<3)|0,!a)return De((f=0|$t(1,0,0|l))|e,0|Pe()|s,n,o),f=o+(i<<3)|0,De((c=0|$t(2,0,0|l))|e,0|Pe()|s,n,f),f=f+(i<<3)|0,De((c=0|$t(3,0,0|l))|e,0|Pe()|s,n,f),f=f+(i<<3)|0,De((c=0|$t(4,0,0|l))|e,0|Pe()|s,n,f),f=f+(i<<3)|0,De((c=0|$t(5,0,0|l))|e,0|Pe()|s,n,f),void De((c=0|$t(6,0,0|l))|e,0|Pe()|s,n,f+(i<<3)|0);a=o+(i<<3)|0,(0|c)>6&&(re(0|o,0,(f=(a>>>0>(c=o+8|0)>>>0?a:c)+-1+(0-o)|0)+8&-8|0),o=c+(f>>>3<<3)|0),De((f=0|$t(2,0,0|l))|e,0|Pe()|s,n,o),f=o+(i<<3)|0,De((c=0|$t(3,0,0|l))|e,0|Pe()|s,n,f),f=f+(i<<3)|0,De((c=0|$t(4,0,0|l))|e,0|Pe()|s,n,f),f=f+(i<<3)|0,De((c=0|$t(5,0,0|l))|e,0|Pe()|s,n,f),De((c=0|$t(6,0,0|l))|e,0|Pe()|s,n,f+(i<<3)|0)}}return{___uremdi3:Kt,_bitshift64Lshr:Jt,_bitshift64Shl:$t,_calloc:Xt,_cellAreaKm2:function(t,e){var n,r,i,o=0;if(i=Le,Le=Le+192|0,r=i,dt(t|=0,e|=0,n=i+168|0),gt(t,e,r),(0|(e=0|se[r>>2]))>0){if(o=+tt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1!=(0|e)){t=1;do{o+=+tt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e))}}else o=0;return Le=i,40589732.49931477*o},_cellAreaM2:function(t,e){var n,r,i,o=0;if(i=Le,Le=Le+192|0,r=i,dt(t|=0,e|=0,n=i+168|0),gt(t,e,r),(0|(e=0|se[r>>2]))>0){if(o=+tt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1!=(0|e)){t=1;do{o+=+tt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e))}}else o=0;return Le=i,40589732499314.77*o},_cellAreaRads2:function(t,e){var n,r,i,o=0;if(i=Le,Le=Le+192|0,r=i,dt(t|=0,e|=0,n=i+168|0),gt(t,e,r),(0|(e=0|se[r>>2]))<=0)return Le=i,+(o=0);if(o=+tt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1==(0|e))return Le=i,+o;t=1;do{o+=+tt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e));return Le=i,+o},_compact:function(t,e,n){e|=0;var r,i=0,o=0,a=0,s=0,l=0,c=0,f=0,p=0,h=0,d=0,g=0,y=0,A=0,v=0,m=0,_=0,b=0,x=0,w=0,E=0,S=0;if(!(n|=0))return 0|(E=0);if(i=0|se[(o=t|=0)>>2],!0&0==(15728640&(o=0|se[o+4>>2])|0)){if((0|n)<=0)return 0|(E=0);if(se[(E=e)>>2]=i,se[E+4>>2]=o,1==(0|n))return 0|(E=0);i=1;do{w=0|se[(x=t+(i<<3)|0)+4>>2],se[(E=e+(i<<3)|0)>>2]=se[x>>2],se[E+4>>2]=w,i=i+1|0}while((0|i)!=(0|n));return 0|(i=0)}if(!(w=0|Wt(x=n<<3)))return 0|(E=-3);if(ne(0|w,0|t,0|x),!(r=0|Xt(n,8)))return Ht(w),0|(E=-3);i=n;t:for(;;){p=0|se[(s=w)>>2],s=0|se[s+4>>2],_=0|Jt(0|p,0|s,52),Pe(),b=(_&=15)+-1|0,m=(0|i)>0;e:do{if(m){if(v=((0|i)<0)<<31>>31,y=0|$t(0|b,0,52),A=0|Pe(),b>>>0>15)for(o=0,t=p,n=s;;){if(!(0==(0|t)&0==(0|n))){if(a=0|Jt(0|t,0|n,52),Pe(),l=(0|(a&=15))<(0|b),a=(0|a)==(0|b),n=0|Kt(0|(f=l?0:a?t:0),0|(t=l?0:a?n:0),0|i,0|v),Pe(),0==(0|(c=0|se[(l=a=r+(n<<3)|0)>>2]))&0==(0|(l=0|se[l+4>>2])))n=f;else for(y=0,g=n,d=l,n=f;;){if((0|y)>(0|i)){E=41;break t}if((0|c)==(0|n)&(-117440513&d|0)==(0|t)){f=0|Jt(0|c,0|d,56),Pe(),h=(f&=7)+1|0,A=0|Jt(0|c,0|d,45),Pe();n:do{if(0|u(127&A)){if(c=0|Jt(0|c,0|d,52),Pe(),!(c&=15)){l=6;break}for(l=1;;){if(!(0==((A=0|$t(7,0,3*(15-l|0)|0))&n|0)&0==((0|Pe())&t|0))){l=7;break n}if(!(l>>>0<c>>>0)){l=6;break}l=l+1|0}}else l=7}while(0);if((f+2|0)>>>0>l>>>0){E=51;break t}A=0|$t(0|h,0,56),t=0|Pe()|-117440513&t,se[(l=a)>>2]=0,se[l+4>>2]=0,l=g,n|=A}else l=(g+1|0)%(0|i)|0;if(0==(0|(c=0|se[(d=a=r+(l<<3)|0)>>2]))&0==(0|(d=0|se[d+4>>2])))break;y=y+1|0,g=l}se[(A=a)>>2]=n,se[A+4>>2]=t}if((0|(o=o+1|0))>=(0|i))break e;t=0|se[(n=w+(o<<3)|0)>>2],n=0|se[n+4>>2]}for(o=0,t=p,n=s;;){if(!(0==(0|t)&0==(0|n))){if(l=0|Jt(0|t,0|n,52),Pe(),(0|(l&=15))>=(0|b)){if((0|l)!=(0|b)&&(t|=y,n=-15728641&n|A,l>>>0>=_>>>0)){a=b;do{g=0|$t(7,0,3*(14-a|0)|0),a=a+1|0,t|=g,n=0|Pe()|n}while(a>>>0<l>>>0)}}else t=0,n=0;if(l=0|Kt(0|t,0|n,0|i,0|v),Pe(),!(0==(0|(f=0|se[(c=a=r+(l<<3)|0)>>2]))&0==(0|(c=0|se[c+4>>2]))))for(g=0;;){if((0|g)>(0|i)){E=41;break t}if((0|f)==(0|t)&(-117440513&c|0)==(0|n)){h=0|Jt(0|f,0|c,56),Pe(),d=(h&=7)+1|0,S=0|Jt(0|f,0|c,45),Pe();n:do{if(0|u(127&S)){if(f=0|Jt(0|f,0|c,52),Pe(),!(f&=15)){c=6;break}for(c=1;;){if(!(0==((S=0|$t(7,0,3*(15-c|0)|0))&t|0)&0==((0|Pe())&n|0))){c=7;break n}if(!(c>>>0<f>>>0)){c=6;break}c=c+1|0}}else c=7}while(0);if((h+2|0)>>>0>c>>>0){E=51;break t}S=0|$t(0|d,0,56),n=0|Pe()|-117440513&n,se[(d=a)>>2]=0,se[d+4>>2]=0,t|=S}else l=(l+1|0)%(0|i)|0;if(0==(0|(f=0|se[(c=a=r+(l<<3)|0)>>2]))&0==(0|(c=0|se[c+4>>2])))break;g=g+1|0}se[(S=a)>>2]=t,se[S+4>>2]=n}if((0|(o=o+1|0))>=(0|i))break e;t=0|se[(n=w+(o<<3)|0)>>2],n=0|se[n+4>>2]}}}while(0);if((i+5|0)>>>0<11){E=99;break}if(!(A=0|Xt((0|i)/6|0,8))){E=58;break}e:do{if(m){g=0,d=0;do{if(!(0==(0|(o=0|se[(t=l=r+(g<<3)|0)>>2]))&0==(0|(t=0|se[t+4>>2])))){c=0|Jt(0|o,0|t,56),Pe(),n=(c&=7)+1|0,f=-117440513&t,S=0|Jt(0|o,0|t,45),Pe();n:do{if(0|u(127&S)){if(h=0|Jt(0|o,0|t,52),Pe(),0|(h&=15))for(a=1;;){if(!(0==(o&(S=0|$t(7,0,3*(15-a|0)|0))|0)&0==(f&(0|Pe())|0)))break n;if(!(a>>>0<h>>>0))break;a=a+1|0}o|=t=0|$t(0|n,0,56),t=0|Pe()|f,se[(n=l)>>2]=o,se[n+4>>2]=t,n=c+2|0}}while(0);7==(0|n)&&(se[(S=A+(d<<3)|0)>>2]=o,se[S+4>>2]=-117440513&t,d=d+1|0)}g=g+1|0}while((0|g)!=(0|i));if(m){if(y=((0|i)<0)<<31>>31,h=0|$t(0|b,0,52),g=0|Pe(),b>>>0>15)for(t=0,o=0;;){do{if(!(0==(0|p)&0==(0|s))){for(c=0|Jt(0|p,0|s,52),Pe(),a=(0|(c&=15))<(0|b),c=(0|c)==(0|b),a=0|Kt(0|(l=a?0:c?p:0),0|(c=a?0:c?s:0),0|i,0|y),Pe(),n=0;;){if((0|n)>(0|i)){E=98;break t}if((-117440513&(f=0|se[(S=r+(a<<3)|0)+4>>2])|0)==(0|c)&&(0|se[S>>2])==(0|l)){E=70;break}if((0|se[(S=r+((a=(a+1|0)%(0|i)|0)<<3)|0)>>2])==(0|l)&&(0|se[S+4>>2])==(0|c))break;n=n+1|0}if(70==(0|E)&&(E=0,!0&100663296==(117440512&f|0)))break;se[(S=e+(o<<3)|0)>>2]=p,se[S+4>>2]=s,o=o+1|0}}while(0);if((0|(t=t+1|0))>=(0|i)){i=d;break e}p=0|se[(s=w+(t<<3)|0)>>2],s=0|se[s+4>>2]}for(t=0,o=0;;){do{if(!(0==(0|p)&0==(0|s))){if(c=0|Jt(0|p,0|s,52),Pe(),(0|(c&=15))>=(0|b))if((0|c)!=(0|b))if(n=p|h,a=-15728641&s|g,c>>>0<_>>>0)c=a;else{l=b;do{S=0|$t(7,0,3*(14-l|0)|0),l=l+1|0,n|=S,a=0|Pe()|a}while(l>>>0<c>>>0);c=a}else n=p,c=s;else n=0,c=0;for(l=0|Kt(0|n,0|c,0|i,0|y),Pe(),a=0;;){if((0|a)>(0|i)){E=98;break t}if((-117440513&(f=0|se[(S=r+(l<<3)|0)+4>>2])|0)==(0|c)&&(0|se[S>>2])==(0|n)){E=93;break}if((0|se[(S=r+((l=(l+1|0)%(0|i)|0)<<3)|0)>>2])==(0|n)&&(0|se[S+4>>2])==(0|c))break;a=a+1|0}if(93==(0|E)&&(E=0,!0&100663296==(117440512&f|0)))break;se[(S=e+(o<<3)|0)>>2]=p,se[S+4>>2]=s,o=o+1|0}}while(0);if((0|(t=t+1|0))>=(0|i)){i=d;break e}p=0|se[(s=w+(t<<3)|0)>>2],s=0|se[s+4>>2]}}else o=0,i=d}else o=0,i=0}while(0);if(re(0|r,0,0|x),ne(0|w,0|A,i<<3|0),Ht(A),!i)break;e=e+(o<<3)|0}return 41==(0|E)?(Ht(w),Ht(r),0|(S=-1)):51==(0|E)?(Ht(w),Ht(r),0|(S=-2)):58==(0|E)?(Ht(w),Ht(r),0|(S=-3)):98==(0|E)?(Ht(A),Ht(w),Ht(r),0|(S=-1)):(99==(0|E)&&ne(0|e,0|w,i<<3|0),Ht(w),Ht(r),0|(S=0))},_destroyLinkedPolygon:function(t){var e=0,n=0,r=0,i=0;if(t|=0)for(r=1;;){if(0|(e=0|se[t>>2]))do{if(0|(n=0|se[e>>2]))do{i=n,n=0|se[n+16>>2],Ht(i)}while(0!=(0|n));i=e,e=0|se[e+8>>2],Ht(i)}while(0!=(0|e));if(e=t,t=0|se[t+8>>2],r||Ht(e),!t)break;r=0}},_edgeLengthKm:function(t){return+ +ue[20752+((t|=0)<<3)>>3]},_edgeLengthM:function(t){return+ +ue[20880+((t|=0)<<3)>>3]},_emscripten_replace_memory:function(t){return ae=new Int8Array(t),new Uint8Array(t),se=new Int32Array(t),new Float32Array(t),ue=new Float64Array(t),n=t,!0},_exactEdgeLengthKm:function(t,e){var n,r,i=0,o=0,a=0,s=0,u=0,l=0;if(r=Le,Le=Le+176|0,vt(t|=0,e|=0,n=r),(0|(t=0|se[n>>2]))<=1)return Le=r,+(a=0);e=t+-1|0,t=0,i=0,o=+ue[n+8>>3],a=+ue[n+16>>3];do{u=o,o=+ue[n+8+((t=t+1|0)<<4)>>3],l=+ge(.5*(o-u)),s=a,a=+ue[n+8+(t<<4)+8>>3],s=l*l+(s=+ge(.5*(a-s)))*(+de(+u)*+de(+o)*s),i+=2*+_e(+ +pe(+s),+ +pe(+(1-s)))}while((0|t)!=(0|e));return Le=r,+(l=6371.007180918475*i)},_exactEdgeLengthM:function(t,e){var n,r,i=0,o=0,a=0,s=0,u=0,l=0;if(r=Le,Le=Le+176|0,vt(t|=0,e|=0,n=r),(0|(t=0|se[n>>2]))<=1)return Le=r,+(a=0);e=t+-1|0,t=0,i=0,o=+ue[n+8>>3],a=+ue[n+16>>3];do{u=o,o=+ue[n+8+((t=t+1|0)<<4)>>3],l=+ge(.5*(o-u)),s=a,a=+ue[n+8+(t<<4)+8>>3],s=l*l+(s=+ge(.5*(a-s)))*(+de(+u)*+de(+o)*s),i+=2*+_e(+ +pe(+s),+ +pe(+(1-s)))}while((0|t)!=(0|e));return Le=r,+(l=6371007.180918475*i)},_exactEdgeLengthRads:function(t,e){var n,r,i=0,o=0,a=0,s=0,u=0,l=0;if(r=Le,Le=Le+176|0,vt(t|=0,e|=0,n=r),(0|(t=0|se[n>>2]))<=1)return Le=r,+(a=0);e=t+-1|0,t=0,i=0,o=+ue[n+8>>3],a=+ue[n+16>>3];do{u=o,o=+ue[n+8+((t=t+1|0)<<4)>>3],l=+ge(.5*(o-u)),s=a,a=+ue[n+8+(t<<4)+8>>3],s=l*l+(s=+ge(.5*(a-s)))*(+de(+o)*+de(+u)*s),i+=2*+_e(+ +pe(+s),+ +pe(+(1-s)))}while((0|t)<(0|e));return Le=r,+i},_experimentalH3ToLocalIj:function(t,e,n,r,i){i|=0;var o,a;return a=Le,Le=Le+16|0,(t=0|wt(t|=0,e|=0,n|=0,r|=0,o=a))||(!function(t,e){var n;e|=0,n=0|se[8+(t|=0)>>2],se[e>>2]=(0|se[t>>2])-n,se[e+4>>2]=(0|se[t+4>>2])-n}(o,i),t=0),Le=a,0|t},_experimentalLocalIjToH3:function(t,e,n,r){t|=0,e|=0,r|=0;var i,o;return i=Le,Le=Le+16|0,function(t,e){e|=0;var n,r,i,o=0,a=0,s=0;a=0|se[(t|=0)>>2],se[e>>2]=a,t=0|se[t+4>>2],se[(r=e+4|0)>>2]=t,se[(i=e+8|0)>>2]=0,o=t-a|0,(0|a)<0?(t=0-a|0,se[r>>2]=o,se[i>>2]=t,se[e>>2]=0,a=0):(o=t,t=0),(0|o)<0&&(a=a-o|0,se[e>>2]=a,t=t-o|0,se[i>>2]=t,se[r>>2]=0,o=0),n=a-t|0,s=o-t|0,(0|t)<0?(se[e>>2]=n,se[r>>2]=s,se[i>>2]=0,o=s,s=n,t=0):s=a,(0|(a=(0|t)<(0|(a=(0|o)<(0|s)?o:s))?t:a))<=0||(se[e>>2]=s-a,se[r>>2]=o-a,se[i>>2]=t-a)}(n|=0,o=i),r=0|Et(t,e,o,r),Le=i,0|r},_free:Ht,_geoToH3:ft,_getDestinationH3IndexFromUnidirectionalEdge:function(t,e){t|=0;var n,r,i=0;return n=Le,Le=Le+16|0,i=n,!0&268435456==(2013265920&(e|=0)|0)?(r=0|Jt(0|t,0|e,56),Pe(),se[i>>2]=0,i=0|o(t,-2130706433&e|134217728,7&r,i),e=0|Pe(),Se(0|e),Le=n,0|i):(i=0,Se(0|(e=0)),Le=n,0|i)},_getH3IndexesFromUnidirectionalEdge:function(t,e,n){t|=0;var r,i,a,s,u=0;a=Le,Le=Le+16|0,r=a,s=!0&268435456==(2013265920&(e|=0)|0),i=-2130706433&e|134217728,se[(u=n|=0)>>2]=s?t:0,se[u+4>>2]=s?i:0,s?(e=0|Jt(0|t,0|e,56),Pe(),se[r>>2]=0,t=0|o(t,i,7&e,r),e=0|Pe()):(t=0,e=0),se[(u=n+8|0)>>2]=t,se[u+4>>2]=e,Le=a},_getH3UnidirectionalEdge:function(t,e,n,r){var i,a,s=0,u=0,l=0,c=0,f=0;if(a=Le,Le=Le+16|0,i=a,!(0|At(t|=0,e|=0,n|=0,r|=0)))return c=0,Se(0|(l=0)),Le=a,0|c;for(l=-2130706433&e,s=(s=0==(0|it(t,e)))?1:2;se[i>>2]=0,u=s+1|0,!((0|(f=0|o(t,e,s,i)))==(0|n)&(0|Pe())==(0|r));){if(!(u>>>0<7)){s=0,t=0,c=6;break}s=u}return 6==(0|c)?(Se(0|s),Le=a,0|t):(f=0|$t(0|s,0,56),c=0|l|Pe()|268435456,f|=t,Se(0|c),Le=a,0|f)},_getH3UnidirectionalEdgeBoundary:vt,_getH3UnidirectionalEdgesFromHexagon:function(t,e,n){n|=0;var r,i=0;r=0==(0|it(t|=0,e|=0)),e&=-2130706433,se[(i=n)>>2]=r?t:0,se[i+4>>2]=r?285212672|e:0,se[(i=n+8|0)>>2]=t,se[i+4>>2]=301989888|e,se[(i=n+16|0)>>2]=t,se[i+4>>2]=318767104|e,se[(i=n+24|0)>>2]=t,se[i+4>>2]=335544320|e,se[(i=n+32|0)>>2]=t,se[i+4>>2]=352321536|e,se[(n=n+40|0)>>2]=t,se[n+4>>2]=369098752|e},_getOriginH3IndexFromUnidirectionalEdge:function(t,e){t|=0;var n;return Se(0|((n=!0&268435456==(2013265920&(e|=0)|0))?-2130706433&e|134217728:0)),0|(n?t:0)},_getPentagonIndexes:yt,_getRes0Indexes:function(t){t|=0;var e=0,n=0,r=0;e=0;do{$t(0|e,0,45),r=134225919|Pe(),se[(n=t+(e<<3)|0)>>2]=-1,se[n+4>>2]=r,e=e+1|0}while(122!=(0|e))},_h3Distance:function(t,e,n,r){n|=0,r|=0;var i,o,a;return a=Le,Le=Le+32|0,o=a,t=0==(0|wt(t|=0,e|=0,t,e,i=a+12|0))&&0==(0|wt(t,e,n,r,o))?0|F(i,o):-1,Le=a,0|t},_h3GetBaseCell:et,_h3GetFaces:function t(e,n,r){r|=0;var i,o=0,a=0,s=0,l=0,c=0,f=0,p=0,h=0;i=Le,Le=Le+128|0,p=i+112|0,s=i+96|0,h=i,a=0|Jt(0|(e|=0),0|(n|=0),52),Pe(),c=15&a,se[p>>2]=c,l=0|Jt(0|e,0|n,45),Pe(),l&=127;t:do{if(0|u(l)){if(0|c)for(o=1;;){if(!(0==((f=0|$t(7,0,3*(15-o|0)|0))&e|0)&0==((0|Pe())&n|0))){a=0;break t}if(!(o>>>0<c>>>0))break;o=o+1|0}if(!(1&a))return f=0|$t(c+1|0,0,52),h=0|Pe()|-15728641&n,t((f|e)&~(p=0|$t(7,0,3*(14-c|0)|0)),h&~(0|Pe()),r),void(Le=i);a=1}else a=0}while(0);ht(e,n,s),a?(q(s,p,h),f=5):(Z(s,p,h),f=6);t:do{if(0|u(l))if(c)for(o=1;;){if(!(0==((l=0|$t(7,0,3*(15-o|0)|0))&e|0)&0==((0|Pe())&n|0))){o=8;break t}if(!(o>>>0<c>>>0)){o=20;break}o=o+1|0}else o=20;else o=8}while(0);if(re(0|r,-1,0|o),a){a=0;do{for(H(s=h+(a<<4)|0,0|se[p>>2]),s=0|se[s>>2],o=0;!(-1==(0|(c=0|se[(l=r+(o<<2)|0)>>2]))|(0|c)==(0|s));)o=o+1|0;se[l>>2]=s,a=a+1|0}while((0|a)!=(0|f))}else{a=0;do{for(W(s=h+(a<<4)|0,0|se[p>>2],0,1),s=0|se[s>>2],o=0;!(-1==(0|(c=0|se[(l=r+(o<<2)|0)>>2]))|(0|c)==(0|s));)o=o+1|0;se[l>>2]=s,a=a+1|0}while((0|a)!=(0|f))}Le=i},_h3GetResolution:function(t,e){return e=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),15&e|0},_h3IndexesAreNeighbors:At,_h3IsPentagon:it,_h3IsResClassIII:function(t,e){return e=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),1&e|0},_h3IsValid:nt,_h3Line:function(t,e,n,r,i){n|=0,r|=0,i|=0;var o,a=0,s=0,u=0,l=0,c=0,f=0,p=0,h=0,d=0,g=0,y=0,A=0,v=0,m=0,_=0,b=0,x=0;if(o=Le,Le=Le+48|0,s=o+12|0,b=o,0==(0|wt(t|=0,e|=0,t,e,a=o+24|0))&&0==(0|wt(t,e,n,r,s))){if((0|(_=0|F(a,s)))<0)return Le=o,0|(b=_);for(se[a>>2]=0,se[a+4>>2]=0,se[a+8>>2]=0,se[s>>2]=0,se[s+4>>2]=0,se[s+8>>2]=0,wt(t,e,t,e,a),wt(t,e,n,r,s),j(a),j(s),_?(d=+(0|_),m=a,n=f=0|se[a>>2],r=p=0|se[(A=a+4|0)>>2],a=h=0|se[(v=a+8|0)>>2],g=+((0|se[s>>2])-f|0)/d,y=+((0|se[s+4>>2])-p|0)/d,d=+((0|se[s+8>>2])-h|0)/d):(A=r=a+4|0,v=h=a+8|0,m=a,n=0|se[a>>2],r=0|se[r>>2],a=0|se[h>>2],g=0,y=0,d=0),se[b>>2]=n,se[(h=b+4|0)>>2]=r,se[(p=b+8|0)>>2]=a,f=0;;){x=g*(l=+(0|f))+ +(0|n),u=y*l+ +(0|se[A>>2]),l=d*l+ +(0|se[v>>2]),r=~~+ee(+x),s=~~+ee(+u),n=~~+ee(+l),x=+fe(+(+(0|r)-x)),u=+fe(+(+(0|s)-u)),l=+fe(+(+(0|n)-l));do{if(!(x>u&x>l)){if(c=0-r|0,u>l){a=c-n|0;break}a=s,n=c-s|0;break}r=0-(s+n)|0,a=s}while(0);if(se[b>>2]=r,se[h>>2]=a,se[p>>2]=n,z(b),Et(t,e,b,i+(f<<3)|0),(0|f)==(0|_))break;f=f+1|0,n=0|se[m>>2]}return Le=o,0|(b=0)}return Le=o,0|(b=-1)},_h3LineSize:function(t,e,n,r){n|=0,r|=0;var i,o,a;return a=Le,Le=Le+32|0,o=a,t=0==(0|wt(t|=0,e|=0,t,e,i=a+12|0))&&0==(0|wt(t,e,n,r,o))?0|F(i,o):-1,Le=a,(t>>>31^1)+t|0},_h3SetToLinkedGeo:function(t,e,n){n|=0;var r,i,o,a=0;if(o=Le,Le=Le+32|0,r=o,function(t,e,n){t|=0,n|=0;var r,i,o=0,a=0,s=0,u=0,l=0;if(i=Le,Le=Le+176|0,r=i,(0|(e|=0))<1)return Ft(n,0,0),void(Le=i);u=0|Jt(0|se[(u=t)>>2],0|se[u+4>>2],52),Pe(),Ft(n,(0|e)>6?e:6,15&u),u=0;do{if(gt(0|se[(o=t+(u<<3)|0)>>2],0|se[o+4>>2],r),(0|(o=0|se[r>>2]))>0){l=0;do{s=r+8+(l<<4)|0,(a=0|Vt(n,o=r+8+(((0|(l=l+1|0))%(0|o)|0)<<4)|0,s))?Bt(n,a):Ut(n,s,o),o=0|se[r>>2]}while((0|l)<(0|o))}u=u+1|0}while((0|u)!=(0|e));Le=i}(t|=0,e|=0,i=o+16|0),se[n>>2]=0,se[n+4>>2]=0,se[n+8>>2]=0,!(t=0|zt(i)))return bt(n),jt(i),void(Le=o);do{e=0|mt(n);do{_t(e,t),a=t+16|0,se[r>>2]=se[a>>2],se[r+4>>2]=se[a+4>>2],se[r+8>>2]=se[a+8>>2],se[r+12>>2]=se[a+12>>2],Bt(i,t),t=0|Gt(i,r)}while(0!=(0|t));t=0|zt(i)}while(0!=(0|t));bt(n),jt(i),Le=o},_h3ToCenterChild:function(t,e,n){n|=0;var r=0,i=0;if(r=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),(0|n)<16&(0|(r&=15))<=(0|n)){if((0|r)!=(0|n)&&(t|=i=0|$t(0|n,0,52),e=0|Pe()|-15728641&e,(0|r)<(0|n)))do{i=0|$t(7,0,3*(14-r|0)|0),r=r+1|0,t&=~i,e&=~(0|Pe())}while((0|r)<(0|n))}else e=0,t=0;return Se(0|e),0|t},_h3ToChildren:De,_h3ToGeo:dt,_h3ToGeoBoundary:gt,_h3ToParent:rt,_h3UnidirectionalEdgeIsValid:function(t,e){var n=0;if(!(!0&268435456==(2013265920&(e|=0)|0)))return 0|(n=0);switch(n=0|Jt(0|(t|=0),0|e,56),Pe(),7&n){case 0:case 7:return 0|(n=0)}return!0&16777216==(117440512&e|0)&0!=(0|it(t,n=-2130706433&e|134217728))?0|(n=0):0|(n=0|nt(t,n))},_hexAreaKm2:function(t){return+ +ue[20496+((t|=0)<<3)>>3]},_hexAreaM2:function(t){return+ +ue[20624+((t|=0)<<3)>>3]},_hexRing:function(t,e,n,r){t|=0,e|=0,r|=0;var i,a=0,s=0,u=0,l=0,c=0,f=0,p=0;if(i=Le,Le=Le+16|0,p=i,!(n|=0))return se[(p=r)>>2]=t,se[p+4>>2]=e,Le=i,0|(p=0);se[p>>2]=0;t:do{if(0|it(t,e))t=1;else{if(s=(0|n)>0){a=0,f=t;do{if(0==(0|(f=0|o(f,e,4,p)))&0==(0|(e=0|Pe()))){t=2;break t}if(a=a+1|0,0|it(f,e)){t=1;break t}}while((0|a)<(0|n));if(se[(c=r)>>2]=f,se[c+4>>2]=e,c=n+-1|0,s){s=0,u=1,a=f,t=e;do{if(0==(0|(a=0|o(a,t,2,p)))&0==(0|(t=0|Pe()))){t=2;break t}if(se[(l=r+(u<<3)|0)>>2]=a,se[l+4>>2]=t,u=u+1|0,0|it(a,t)){t=1;break t}s=s+1|0}while((0|s)<(0|n));l=0,s=u;do{if(0==(0|(a=0|o(a,t,3,p)))&0==(0|(t=0|Pe()))){t=2;break t}if(se[(u=r+(s<<3)|0)>>2]=a,se[u+4>>2]=t,s=s+1|0,0|it(a,t)){t=1;break t}l=l+1|0}while((0|l)<(0|n));u=0;do{if(0==(0|(a=0|o(a,t,1,p)))&0==(0|(t=0|Pe()))){t=2;break t}if(se[(l=r+(s<<3)|0)>>2]=a,se[l+4>>2]=t,s=s+1|0,0|it(a,t)){t=1;break t}u=u+1|0}while((0|u)<(0|n));u=0;do{if(0==(0|(a=0|o(a,t,5,p)))&0==(0|(t=0|Pe()))){t=2;break t}if(se[(l=r+(s<<3)|0)>>2]=a,se[l+4>>2]=t,s=s+1|0,0|it(a,t)){t=1;break t}u=u+1|0}while((0|u)<(0|n));u=0;do{if(0==(0|(a=0|o(a,t,4,p)))&0==(0|(t=0|Pe()))){t=2;break t}if(se[(l=r+(s<<3)|0)>>2]=a,se[l+4>>2]=t,s=s+1|0,0|it(a,t)){t=1;break t}u=u+1|0}while((0|u)<(0|n));for(u=0;;){if(0==(0|(a=0|o(a,t,6,p)))&0==(0|(t=0|Pe()))){t=2;break t}if((0|u)!=(0|c)){if(se[(l=r+(s<<3)|0)>>2]=a,se[l+4>>2]=t,0|it(a,t)){t=1;break t}s=s+1|0}if((0|(u=u+1|0))>=(0|n)){u=f,s=e;break}}}else u=f,a=f,s=e,t=e}else se[(u=r)>>2]=t,se[u+4>>2]=e,u=t,a=t,s=e,t=e;t=1&((0|u)!=(0|a)|(0|s)!=(0|t))}}while(0);return Le=i,0|(p=t)},_i64Subtract:Zt,_kRing:r,_kRingDistances:function(t,e,n,r,o){var a;if(0|i(t|=0,e|=0,n|=0,r|=0,o|=0)){if(a=1+(0|xe(3*n|0,n+1|0))|0,re(0|r,0,a<<3|0),0|o)return re(0|o,0,a<<2|0),void Re(t,e,n,r,o,a,0);(o=0|Xt(a,4))&&(Re(t,e,n,r,o,a,0),Ht(o))}},_llvm_minnum_f64:te,_llvm_round_f64:ee,_malloc:Wt,_maxFaceCount:function(t,e){var n=0,r=0;if(r=0|Jt(0|(t|=0),0|(e|=0),45),Pe(),!(0|u(127&r)))return 0|(r=2);if(r=0|Jt(0|t,0|e,52),Pe(),!(r&=15))return 0|(r=5);for(n=1;;){if(!(0==((0|$t(7,0,3*(15-n|0)|0))&t|0)&0==((0|Pe())&e|0))){n=2,t=6;break}if(!(n>>>0<r>>>0)){n=5,t=6;break}n=n+1|0}return 6==(0|t)?0|n:0},_maxH3ToChildrenSize:function(t,e,n){return n|=0,t=0|Jt(0|(t|=0),0|(e|=0),52),Pe(),(0|n)<16&(0|(t&=15))<=(0|n)?0|(n=0|St(7,n-t|0)):0|(n=0)},_maxKringSize:function(t){return 1+(0|xe(3*(t|=0)|0,t+1|0))|0},_maxPolyfillSize:function(t,e){e|=0;var n,r=0,i=0,o=0,a=0,s=0;if(n=Le,Le=Le+48|0,o=n+8|0,i=n,a=0|se[(s=t|=0)+4>>2],se[(r=i)>>2]=se[s>>2],se[r+4>>2]=a,kt(i,o),o=0|A(o,e),e=0|se[i>>2],(0|(i=0|se[t+8>>2]))<=0)return Le=n,0|(s=(s=(a=(0|o)<(0|(s=e)))?s:o)+12|0);r=0|se[t+12>>2],t=0;do{e=(0|se[r+(t<<3)>>2])+e|0,t=t+1|0}while((0|t)<(0|i));return Le=n,0|(s=(s=(s=(0|o)<(0|e))?e:o)+12|0)},_maxUncompactSize:function(t,e,n){t|=0,n|=0;var r=0,i=0,o=0,a=0;if((0|(e|=0))<=0)return 0|(n=0);if((0|n)>=16){for(r=0;;){if(!(0==(0|se[(a=t+(r<<3)|0)>>2])&0==(0|se[a+4>>2]))){r=-1,i=13;break}if((0|(r=r+1|0))>=(0|e)){r=0,i=13;break}}if(13==(0|i))return 0|r}r=0,a=0;t:for(;;){o=0|se[(i=t+(a<<3)|0)>>2],i=0|se[i+4>>2];do{if(!(0==(0|o)&0==(0|i))){if(i=0|Jt(0|o,0|i,52),Pe(),(0|(i&=15))>(0|n)){r=-1,i=13;break t}if((0|i)==(0|n)){r=r+1|0;break}r=(0|St(7,n-i|0))+r|0;break}}while(0);if((0|(a=a+1|0))>=(0|e)){i=13;break}}return 13==(0|i)?0|r:0},_memcpy:ne,_memset:re,_numHexagons:function(t){var e;return t=0|se[(e=21008+((t|=0)<<3)|0)>>2],Se(0|se[e+4>>2]),0|t},_pentagonIndexCount:function(){return 12},_pointDistKm:K,_pointDistM:function(t,e){t|=0;var n,r,i,o=0;return r=+ue[(e|=0)>>3],n=+ue[t>>3],o=(i=+ge(.5*(r-n)))*i+(o=+ge(.5*(+ue[e+8>>3]-+ue[t+8>>3])))*(+de(+r)*+de(+n)*o),12742014.36183695*+_e(+ +pe(+o),+ +pe(+(1-o)))},_pointDistRads:function(t,e){t|=0;var n,r,i,o=0;return r=+ue[(e|=0)>>3],n=+ue[t>>3],o=(i=+ge(.5*(r-n)))*i+(o=+ge(.5*(+ue[e+8>>3]-+ue[t+8>>3])))*(+de(+r)*+de(+n)*o),2*+_e(+ +pe(+o),+ +pe(+(1-o)))},_polyfill:function(t,e,n){var r,i=0,o=0,s=0,u=0,l=0;if(r=Le,Le=Le+48|0,i=r+8|0,o=r,0|a(t|=0,e|=0,n|=0)){if(s=0|se[(l=t)+4>>2],se[(u=o)>>2]=se[l>>2],se[u+4>>2]=s,kt(o,i),u=0|A(i,e),e=0|se[o>>2],(0|(s=0|se[t+8>>2]))>0){o=0|se[t+12>>2],i=0;do{e=(0|se[o+(i<<3)>>2])+e|0,i=i+1|0}while((0|i)!=(0|s))}(0|(e=(0|u)<(0|e)?e:u))<=-12||re(0|n,0,8+(((0|(l=e+11|0))>0?l:0)<<3)|0),Le=r}else Le=r},_res0IndexCount:function(){return 122},_round:ie,_sbrk:oe,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(t,e,n,r,i){t|=0,n|=0,r|=0,i|=0;var o=0,a=0,s=0,u=0,l=0,c=0;if((0|(e|=0))<=0)return 0|(i=0);if((0|i)>=16){for(o=0;;){if(!(0==(0|se[(c=t+(o<<3)|0)>>2])&0==(0|se[c+4>>2]))){o=14;break}if((0|(o=o+1|0))>=(0|e)){a=0,o=16;break}}if(14==(0|o))return 0|((0|r)>0?-2:-1);if(16==(0|o))return 0|a}o=0,c=0;t:for(;;){a=0|se[(s=l=t+(c<<3)|0)>>2],s=0|se[s+4>>2];do{if(!(0==(0|a)&0==(0|s))){if((0|o)>=(0|r)){a=-1,o=16;break t}if(u=0|Jt(0|a,0|s,52),Pe(),(0|(u&=15))>(0|i)){a=-2,o=16;break t}if((0|u)==(0|i)){se[(l=n+(o<<3)|0)>>2]=a,se[l+4>>2]=s,o=o+1|0;break}if((0|(a=(0|St(7,i-u|0))+o|0))>(0|r)){a=-1,o=16;break t}De(0|se[l>>2],0|se[l+4>>2],i,n+(o<<3)|0),o=a}}while(0);if((0|(c=c+1|0))>=(0|e)){a=0,o=16;break}}return 16==(0|o)?0|a:0},establishStackSpace:function(t,e){Le=t|=0},stackAlloc:function(t){var e;return e=Le,Le=(Le=Le+(t|=0)|0)+15&-16,0|e},stackRestore:function(t){Le=t|=0},stackSave:function(){return 0|Le}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:_,b:function(t){D=t},c:N,d:function(t,e,n,r){_("Assertion failed: "+i(t)+", at: "+[e?i(e):"unknown filename",n,r?i(r):"unknown function"])},e:function(t){return b.___errno_location&&(O[b.___errno_location()>>2]=t),t},f:y,g:function(t,e,n){I.set(I.subarray(e,e+n),t)},h:function(t){var e=y(),n=16777216,r=2130706432;if(t>r)return!1;for(var i=Math.max(e,16777216);i<t;)i=i<=536870912?s(2*i,n):Math.min(s((3*i+2147483648)/4,n),r);return!!A(i)},i:function(t){_("OOM")},j:h,k:d,l:A,m:g,n:function(){var t=g();return b.extraStackTrace&&(t+="\n"+b.extraStackTrace()),d(t)},o:24032,p:24016},C),ot=(b.___uremdi3=it.___uremdi3,b._bitshift64Lshr=it._bitshift64Lshr,b._bitshift64Shl=it._bitshift64Shl,b._calloc=it._calloc,b._cellAreaKm2=it._cellAreaKm2,b._cellAreaM2=it._cellAreaM2,b._cellAreaRads2=it._cellAreaRads2,b._compact=it._compact,b._destroyLinkedPolygon=it._destroyLinkedPolygon,b._edgeLengthKm=it._edgeLengthKm,b._edgeLengthM=it._edgeLengthM,b._emscripten_replace_memory=it._emscripten_replace_memory),at=(b._exactEdgeLengthKm=it._exactEdgeLengthKm,b._exactEdgeLengthM=it._exactEdgeLengthM,b._exactEdgeLengthRads=it._exactEdgeLengthRads,b._experimentalH3ToLocalIj=it._experimentalH3ToLocalIj,b._experimentalLocalIjToH3=it._experimentalLocalIjToH3,b._free=it._free,b._geoToH3=it._geoToH3,b._getDestinationH3IndexFromUnidirectionalEdge=it._getDestinationH3IndexFromUnidirectionalEdge,b._getH3IndexesFromUnidirectionalEdge=it._getH3IndexesFromUnidirectionalEdge,b._getH3UnidirectionalEdge=it._getH3UnidirectionalEdge,b._getH3UnidirectionalEdgeBoundary=it._getH3UnidirectionalEdgeBoundary,b._getH3UnidirectionalEdgesFromHexagon=it._getH3UnidirectionalEdgesFromHexagon,b._getOriginH3IndexFromUnidirectionalEdge=it._getOriginH3IndexFromUnidirectionalEdge,b._getPentagonIndexes=it._getPentagonIndexes,b._getRes0Indexes=it._getRes0Indexes,b._h3Distance=it._h3Distance,b._h3GetBaseCell=it._h3GetBaseCell,b._h3GetFaces=it._h3GetFaces,b._h3GetResolution=it._h3GetResolution,b._h3IndexesAreNeighbors=it._h3IndexesAreNeighbors,b._h3IsPentagon=it._h3IsPentagon,b._h3IsResClassIII=it._h3IsResClassIII,b._h3IsValid=it._h3IsValid,b._h3Line=it._h3Line,b._h3LineSize=it._h3LineSize,b._h3SetToLinkedGeo=it._h3SetToLinkedGeo,b._h3ToCenterChild=it._h3ToCenterChild,b._h3ToChildren=it._h3ToChildren,b._h3ToGeo=it._h3ToGeo,b._h3ToGeoBoundary=it._h3ToGeoBoundary,b._h3ToParent=it._h3ToParent,b._h3UnidirectionalEdgeIsValid=it._h3UnidirectionalEdgeIsValid,b._hexAreaKm2=it._hexAreaKm2,b._hexAreaM2=it._hexAreaM2,b._hexRing=it._hexRing,b._i64Subtract=it._i64Subtract,b._kRing=it._kRing,b._kRingDistances=it._kRingDistances,b._llvm_minnum_f64=it._llvm_minnum_f64,b._llvm_round_f64=it._llvm_round_f64,b._malloc=it._malloc,b._maxFaceCount=it._maxFaceCount,b._maxH3ToChildrenSize=it._maxH3ToChildrenSize,b._maxKringSize=it._maxKringSize,b._maxPolyfillSize=it._maxPolyfillSize,b._maxUncompactSize=it._maxUncompactSize,b._memcpy=it._memcpy,b._memset=it._memset,b._numHexagons=it._numHexagons,b._pentagonIndexCount=it._pentagonIndexCount,b._pointDistKm=it._pointDistKm,b._pointDistM=it._pointDistM,b._pointDistRads=it._pointDistRads,b._polyfill=it._polyfill,b._res0IndexCount=it._res0IndexCount,b._round=it._round,b._sbrk=it._sbrk,b._sizeOfCoordIJ=it._sizeOfCoordIJ,b._sizeOfGeoBoundary=it._sizeOfGeoBoundary,b._sizeOfGeoCoord=it._sizeOfGeoCoord,b._sizeOfGeoPolygon=it._sizeOfGeoPolygon,b._sizeOfGeofence=it._sizeOfGeofence,b._sizeOfH3Index=it._sizeOfH3Index,b._sizeOfLinkedGeoPolygon=it._sizeOfLinkedGeoPolygon,b._uncompact=it._uncompact,b.establishStackSpace=it.establishStackSpace,b.stackAlloc=it.stackAlloc),st=b.stackRestore=it.stackRestore,ut=b.stackSave=it.stackSave;if(b.asm=it,b.cwrap=function(t,e,i,o){var a=(i=i||[]).every((function(t){return"number"===t}));return"string"!==e&&a&&!o?n(t):function(){return r(t,e,i,arguments)}},b.setValue=function(t,e,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":T[t>>0]=e;break;case"i16":M[t>>1]=e;break;case"i32":O[t>>2]=e;break;case"i64":J=[e>>>0,(K=e,+q(K)>=1?K>0?(0|X(+H(K/4294967296),4294967295))>>>0:~~+W((K-+(~~K>>>0))/4294967296)>>>0:0)],O[t>>2]=J[0],O[t+4>>2]=J[1];break;case"float":L[t>>2]=e;break;case"double":R[t>>3]=e;break;default:_("invalid type for setValue: "+n)}},b.getValue=function(t,e,n){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return T[t>>0];case"i16":return M[t>>1];case"i32":case"i64":return O[t>>2];case"float":return L[t>>2];case"double":return R[t>>3];default:_("invalid type for getValue: "+e)}return null},b.getTempRet0=N,$){p($)||(et=$,$=b.locateFile?b.locateFile(et,S):S+et),Z++,b.monitorRunDependencies&&b.monitorRunDependencies(Z);var lt=function(t){t.byteLength&&(t=new Uint8Array(t)),I.set(t,8),b.memoryInitializerRequest&&delete b.memoryInitializerRequest.response,function(t){if(Z--,b.monitorRunDependencies&&b.monitorRunDependencies(Z),0==Z&&(null!==Y&&(clearInterval(Y),Y=null),Q)){var e=Q;Q=null,e()}}()},ct=function(){w($,lt,(function(){throw"could not load memory initializer "+$}))},ft=v($);if(ft)lt(ft.buffer);else if(b.memoryInitializerRequest){var pt=function(){var t=b.memoryInitializerRequest,e=t.response;if(200!==t.status&&0!==t.status){var n=v(b.memoryInitializerRequestURL);if(!n)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+t.status+", retrying "+$),void ct();e=n.buffer}lt(e)};b.memoryInitializerRequest.response?setTimeout(pt,0):b.memoryInitializerRequest.addEventListener("load",pt)}else ct()}if(Q=function t(){nt||m(),nt||(Q=t)},b.run=m,b.abort=_,b.preInit)for("function"==typeof b.preInit&&(b.preInit=[b.preInit]);b.preInit.length>0;)b.preInit.pop()();return m(),t}("object"==typeof r?r:{}),i="number",o={};[["sizeOfH3Index",i],["sizeOfGeoCoord",i],["sizeOfGeoBoundary",i],["sizeOfGeoPolygon",i],["sizeOfGeofence",i],["sizeOfLinkedGeoPolygon",i],["sizeOfCoordIJ",i],["h3IsValid",i,[i,i]],["geoToH3",i,[i,i,i]],["h3ToGeo",null,[i,i,i]],["h3ToGeoBoundary",null,[i,i,i]],["maxKringSize",i,[i]],["kRing",null,[i,i,i,i]],["kRingDistances",null,[i,i,i,i,i]],["hexRing",null,[i,i,i,i]],["maxPolyfillSize",i,[i,i]],["polyfill",null,[i,i,i]],["h3SetToLinkedGeo",null,[i,i,i]],["destroyLinkedPolygon",null,[i]],["compact",i,[i,i,i]],["uncompact",i,[i,i,i,i,i]],["maxUncompactSize",i,[i,i,i]],["h3IsPentagon",i,[i,i]],["h3IsResClassIII",i,[i,i]],["h3GetBaseCell",i,[i,i]],["h3GetResolution",i,[i,i]],["maxFaceCount",i,[i,i]],["h3GetFaces",null,[i,i,i]],["h3ToParent",i,[i,i,i]],["h3ToChildren",null,[i,i,i,i]],["h3ToCenterChild",i,[i,i,i]],["maxH3ToChildrenSize",i,[i,i,i]],["h3IndexesAreNeighbors",i,[i,i,i,i]],["getH3UnidirectionalEdge",i,[i,i,i,i]],["getOriginH3IndexFromUnidirectionalEdge",i,[i,i]],["getDestinationH3IndexFromUnidirectionalEdge",i,[i,i]],["h3UnidirectionalEdgeIsValid",i,[i,i]],["getH3IndexesFromUnidirectionalEdge",null,[i,i,i]],["getH3UnidirectionalEdgesFromHexagon",null,[i,i,i]],["getH3UnidirectionalEdgeBoundary",null,[i,i,i]],["h3Distance",i,[i,i,i,i]],["h3Line",i,[i,i,i,i,i]],["h3LineSize",i,[i,i,i,i]],["experimentalH3ToLocalIj",i,[i,i,i,i,i]],["experimentalLocalIjToH3",i,[i,i,i,i]],["hexAreaM2",i,[i]],["hexAreaKm2",i,[i]],["edgeLengthM",i,[i]],["edgeLengthKm",i,[i]],["pointDistM",i,[i,i]],["pointDistKm",i,[i,i]],["pointDistRads",i,[i,i]],["cellAreaM2",i,[i,i]],["cellAreaKm2",i,[i,i]],["cellAreaRads2",i,[i,i]],["exactEdgeLengthM",i,[i,i]],["exactEdgeLengthKm",i,[i,i]],["exactEdgeLengthRads",i,[i,i]],["numHexagons",i,[i]],["getRes0Indexes",null,[i]],["res0IndexCount",i],["getPentagonIndexes",null,[i,i]],["pentagonIndexCount",i]].forEach((function(t){o[t[0]]=r.cwrap.apply(r,t)}));var a=16,s=o.sizeOfH3Index(),u=o.sizeOfGeoCoord(),l=(o.sizeOfGeoBoundary(),o.sizeOfGeoPolygon()),c=o.sizeOfGeofence(),f=o.sizeOfLinkedGeoPolygon();o.sizeOfCoordIJ();function p(t){if("number"!=typeof t||t<0||t>15||Math.floor(t)!==t)throw new Error("Invalid resolution: "+t)}var h=/[^0-9a-fA-F]/;function d(t){if(Array.isArray(t)&&2===t.length&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if("string"!=typeof t||h.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),a);return[parseInt(t.substring(t.length-8),a),e]}function g(t){if(t>=0)return t.toString(a);var e=A(8,(t&=2147483647).toString(a));return e=(parseInt(e[0],a)+8).toString(a)+e.substring(1)}function y(t,e){return g(e)+A(8,g(t))}function A(t,e){for(var n=t-e.length,r="",i=0;i<n;i++)r+="0";return r+=e}function v(t,e,n){for(var i=t.length,o=r._calloc(i,u),a=n?1:0,s=n?0:1,l=0;l<2*i;l+=2)r.HEAPF64.set([t[l/2][a],t[l/2][s]].map(M),o/8+l);return r.HEAPU32.set([i,o],e/4),e}function m(t){return[t,r.getTempRet0()]}function _(t){var e=m(t),n=e[0],r=e[1];return r?y(n,r):null}function b(t,e){void 0===e&&(e=0);var n=r.getValue(t+4*e*2,"i32"),i=r.getValue(t+4*(2*e+1),"i32");return i?y(n,i):null}function x(t,e,n){r.HEAPU32.set(d(t),e/4+2*n)}function w(t,e){for(var n=[],r=0;r<e;r++){var i=b(t,r);null!==i&&n.push(i)}return n}function E(t,e){for(var n=e.length,r=0;r<n;r++)x(e[r],t,r)}function S(t){return 180*r.getValue(t,"double")/Math.PI}function P(t){return[S(t),S(t+8)]}function k(t){return[S(t+8),S(t)]}function C(t,e,n){var i=r._malloc(u);r.HEAPF64.set([t,e].map(M),i/8);var a=_(o.geoToH3(i,n));return r._free(i),a}function T(t,e,n){if(p(e),n=Boolean(n),0===t.length||0===t[0].length)return[];"number"==typeof t[0][0]&&(t=[t]);var i=function(t,e){var n,i=t.length-1,o=r._calloc(l),a=0+c,s=a+4;if(v(t[0],o+0,e),i>0){n=r._calloc(i,c);for(var u=0;u<i;u++)v(t[u+1],n+c*u,e)}return r.setValue(o+a,i,"i32"),r.setValue(o+s,n,"i32"),o}(t,n),a=o.maxPolyfillSize(i,e),u=r._calloc(a,s);o.polyfill(i,e,u);var f=w(u,a);return r._free(u),function(t){var e=0+c,n=e+4;r._free(r.getValue(t+0+4,"i8*"));var i=r.getValue(t+e,"i32");if(i>0){for(var o=r.getValue(t+n,"i32"),a=0;a<i;a++)r._free(r.getValue(o+c*a+4,"i8*"));r._free(o)}r._free(t)}(i),f}function I(t,e){if(!t||!t.length)return[];var n=t.length,i=r._calloc(n,s);E(i,t);var a=r._calloc(f),u=a;o.h3SetToLinkedGeo(i,n,a);var l=function(t,e){for(var n,i,o,a,s=[],u=e?k:P;t;){for(s.push(n=[]),i=r.getValue(t,"i8*");i;){for(n.push(o=[]),a=r.getValue(i,"i8*");a;)o.push(u(a)),a=r.getValue(a+16,"i8*");e&&o.push(o[0]),i=r.getValue(i+8,"i8*")}t=r.getValue(t+8,"i8*")}return s}(a,e);return o.destroyLinkedPolygon(u),r._free(u),r._free(i),l}function M(t){return t*Math.PI/180}})),a.register("gxutc",(function(e,n){t(e.exports,"default",(function(){return c}));var r=a("11zLF"),i=a("hE9gS"),o=a("1joaW"),s=a("ijozg"),u=a("pGAoq"),l=r.default({},MA.defaultProps),c=function(t){"use strict";i.default(n,t);var e=o.default(n);function n(){return s.default(this,n),e.apply(this,arguments)}return u.default(n,[{key:"indexToBounds",value:function(){return null}},{key:"renderLayers",value:function(){var t=this.props,e=t.elevationScale,n=t.extruded,r=t.wireframe,i=t.filled,o=t.stroked,a=t.lineWidthUnits,s=t.lineWidthScale,u=t.lineWidthMinPixels,l=t.lineWidthMaxPixels,c=t.lineJointRounded,f=t.lineMiterLimit,p=t.lineDashJustified,h=t.getElevation,d=t.getFillColor,g=t.getLineColor,y=t.getLineWidth,A=this.props,v=A.updateTriggers,m=A.material,_=A.transitions;return new(this.getSubLayerClass("cell",MA))({filled:i,wireframe:r,extruded:n,elevationScale:e,stroked:o,lineWidthUnits:a,lineWidthScale:s,lineWidthMinPixels:u,lineWidthMaxPixels:l,lineJointRounded:c,lineMiterLimit:f,lineDashJustified:p,material:m,transitions:_,getElevation:h,getFillColor:d,getLineColor:g,getLineWidth:y},this.getSubLayerProps({id:"cell",updateTriggers:{getElevation:v.getElevation,getFillColor:v.getFillColor,getLineColor:v.getLineColor,getLineWidth:v.getLineWidth}}),this.indexToBounds())}}]),n}(wg);c.layerName="GeoCellLayer",c.defaultProps=l})),a.register("ba90z",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=t.exports.SELECTION_TYPE=void 0;var n,r=a("eoCq7"),i=l(a("61ZcP")),o=l(a("jlhKK")),s=a("lJ408"),u=l(a("9P0of"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?f(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}function h(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E={NONE:null,RECTANGLE:"rectangle",POLYGON:"polygon"};t.exports.SELECTION_TYPE=E;var S=(w(n={},E.RECTANGLE,s.DrawRectangleMode),w(n,E.POLYGON,s.DrawPolygonMode),n),P=w({},E.RECTANGLE,{dragToDraw:!0}),k={selectionType:E.RECTANGLE,layerIds:[],onSelect:function(){}},C={type:"FeatureCollection",features:[]},T="selection-blocker",I=["lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","lineWidthUnits","lineJointRounded","lineCapRounded","lineMiterLimit","pointRadiusScale","pointRadiusMinPixels","pointRadiusMaxPixels","lineDashJustified","getLineColor","getFillColor","getRadius","getLineWidth","getLineDashArray","getTentativeLineDashArray","getTentativeLineColor","getTentativeFillColor","getTentativeLineWidth"],M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(f,t);var e,n,a,l,c=(e=f,function(){var t,n=b(e);if(_()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return m(this,t)});function f(){return A(this,f),c.apply(this,arguments)}return n=f,a=[{key:"_selectRectangleObjects",value:function(t){var e=this.props,n=e.layerIds,r=e.onSelect,i=d(this.context.viewport.project(t[0][0]),2),o=i[0],a=i[1],s=d(this.context.viewport.project(t[0][2]),2),u=s[0],l=s[1];r({pickingInfos:this.context.deck.pickObjects({x:Math.min(o,u),y:Math.min(a,l),width:Math.abs(u-o),height:Math.abs(l-a),layerIds:n})})}},{key:"_selectPolygonObjects",value:function(t){var e,n=this,a=this.props,s=a.layerIds,u=a.onSelect,l=t[0].map((function(t){return n.context.viewport.project(t)})),c=l.map((function(t){return t[0]})),f=l.map((function(t){return t[1]})),p=Math.min.apply(Math,h(c)),d=Math.min.apply(Math,h(f)),g=Math.max.apply(Math,h(c)),y=Math.max.apply(Math,h(f)),A=(0,r.polygon)(t),v=(0,i.default)(A,50);try{e=(0,o.default)(v,A)}catch(t){return void console.log("turfDifference() error",t)}this.setState({pendingPolygonSelection:{bigPolygon:e}});var m="".concat(this.props.id,"-").concat(T);setTimeout((function(){var t=n.context.deck.pickObjects({x:p,y:d,width:g-p,height:y-d,layerIds:[m].concat(h(s))});u({pickingInfos:t.filter((function(t){return t.layer.id!==n.props.id}))})}),250)}},{key:"renderLayers",value:function(){var t=this,e=this.state.pendingPolygonSelection,n=S[this.props.selectionType]||s.ViewMode,r=P[this.props.selectionType],i={};I.forEach((function(e){void 0!==t.props[e]&&(i[e]=t.props[e])}));var o=[new u.default(this.getSubLayerProps(p({id:"selection-geojson",pickable:!0,mode:n,modeConfig:r,selectedFeatureIndexes:[],data:C,onEdit:function(e){var n=e.updatedData;if("addFeature"===e.editType){var r=n.features[0].geometry.coordinates;t.props.selectionType===E.RECTANGLE?t._selectRectangleObjects(r):t.props.selectionType===E.POLYGON&&t._selectPolygonObjects(r)}}},i)))];if(e){var a=e.bigPolygon;o.push(new MA(this.getSubLayerProps({id:T,pickable:!0,stroked:!1,opacity:1,data:[a],getLineColor:function(t){return[0,0,0,1]},getFillColor:function(t){return[0,0,0,1]},getPolygon:function(t){return t.geometry.coordinates}})))}return o}},{key:"shouldUpdateState",value:function(t){var e=t.changeFlags,n=e.stateChanged,r=e.propsOrDataChanged;return n||r}}],a&&v(n.prototype,a),l&&v(n,l),f}(wg);t.exports.default=M,w(M,"layerName","SelectionLayer"),w(M,"defaultProps",k)})),a.register("azGxt",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,n,l,c,f=(e=p,function(){var t,n=s(e);if(a()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function p(){return r(this,p),f.apply(this,arguments)}return n=p,(l=[{key:"renderLayers",value:function(){return[new zg(Object.assign({},this.props,{id:"".concat(this.props.id,"-ScatterplotLayer"),data:this.props.data})),new Ng(Object.assign({},this.props,{id:"".concat(this.props.id,"-LineLayer"),data:this.props.data,pickable:!1,getSourcePosition:function(t){var e=t.position;return[e[0],e[1],0]},getTargetPosition:function(t){var e=t.position;return[e[0],e[1],e[2]||0]},getColor:[150,150,150,200],getStrokeWidth:3}))]}}])&&i(n.prototype,l),c&&i(n,c),p}(wg);t.exports.default=c,l(c,"layerName","ElevatedEditHandleLayer"),l(c,"defaultProps",{})})),a.register("g6NgO",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n=o(a("4uWiN")),r=o(a("f3F1n")),i=a("8QjBj");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){var e=t.source,n=t.code,r=void 0===n?"":n;return e.replace(/}[^{}]*$/,r.concat("\n}\n"))}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(A,t);var e,o,a,s,g=(e=A,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function A(){return u(this,A),g.apply(this,arguments)}return o=A,(a=[{key:"getShaders",value:function(){var t=c(h(A.prototype),"getShaders",this).call(this);return Object.assign({},t,{modules:t.modules.concat([r.default]),vs:y({source:t.vs,code:"  outline_setUV(gl_Position);\n  outline_setZLevel(instanceZLevel);\n"}),fs:y({source:t.fs,code:"  gl_FragColor = outline_filterColor(gl_FragColor);\n"})})}},{key:"initializeState",value:function(t){c(h(A.prototype),"initializeState",this).call(this,t),this.setState({outlineFramebuffer:new Gr(t.gl),dummyTexture:new Zn(t.gl)}),this.state.attributeManager.addInstanced({instanceZLevel:{size:1,type:n.default.UNSIGNED_BYTE,accessor:"getZLevel"}})}},{key:"draw",value:function(t){t.moduleParameters,t.parameters;var e=t.uniforms,r=(t.context,this.props),o=r.jointRounded,a=r.capRounded,s=r.billboard,u=r.miterLimit,l=r.widthUnits,c=r.widthScale,f=r.widthMinPixels,p=r.widthMaxPixels;e=Object.assign({},e,{jointType:Number(o),capType:Number(a),billboard:s,widthUnits:i.UNIT[l],widthScale:c,miterLimit:u,widthMinPixels:f,widthMaxPixels:p});var h=this.state,d=h.outlineFramebuffer,g=h.dummyTexture;d.resize(),d.clear({color:!0,depth:!0}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!0,outlineShadowmap:g}),this.state.model.draw({uniforms:Object.assign({},e,{jointType:0,widthScale:1.3*this.props.widthScale}),parameters:{depthTest:!1,blendEquation:n.default.MAX},framebuffer:d}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!1,outlineShadowmap:d}),this.state.model.draw({uniforms:Object.assign({},e,{jointType:Number(o),capType:Number(a),widthScale:this.props.widthScale}),parameters:{depthTest:!1}})}}])&&l(o.prototype,a),s&&l(o,s),A}(zy);t.exports.default=A,g(A,"layerName","PathOutlineLayer"),g(A,"defaultProps",{getZLevel:function(){return 0}})})),a.register("4uWiN",(function(e,r){n(e.exports),t(e.exports,"default",(function(){return i}));var i={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}})),a.register("f3F1n",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n={outlineEnabled:!1,outlineRenderShadowmap:!1,outlineShadowmap:null};var r={name:"outline",vs:"attribute float instanceZLevel;\nvarying float outline_vzLevel;\nvarying vec4 outline_vPosition;\n\n// Set the z level for the outline shadowmap rendering\nvoid outline_setZLevel(float zLevel) {\n  outline_vzLevel = zLevel;\n}\n\n// Store an adjusted position for texture2DProj\nvoid outline_setUV(vec4 position) {\n  // mat4(\n  //   0.5, 0.0, 0.0, 0.0,\n  //   0.0, 0.5, 0.0, 0.0,\n  //   0.0, 0.0, 0.5, 0.0,\n  //   0.5, 0.5, 0.5, 1.0\n  // ) * position;\n  outline_vPosition = vec4(position.xyz * 0.5 + position.w * 0.5, position.w);\n}\n",fs:"uniform bool outline_uEnabled;\nuniform bool outline_uRenderOutlines;\nuniform sampler2D outline_uShadowmap;\n\nvarying float outline_vzLevel;\n// varying vec2 outline_vUV;\nvarying vec4 outline_vPosition;\n\nconst float OUTLINE_Z_LEVEL_ERROR = 0.01;\n\n// Return a darker color in shadowmap\nvec4 outline_filterShadowColor(vec4 color) {\n  return vec4(outline_vzLevel / 255., outline_vzLevel / 255., outline_vzLevel / 255., 1.);\n}\n\n// Return a darker color if in shadowmap\nvec4 outline_filterDarkenColor(vec4 color) {\n  if (outline_uEnabled) {\n    float maxZLevel;\n    if (outline_vPosition.q > 0.0) {\n      maxZLevel = texture2DProj(outline_uShadowmap, outline_vPosition).r * 255.;\n    } else {\n      discard;\n    }\n    if (maxZLevel < outline_vzLevel + OUTLINE_Z_LEVEL_ERROR) {\n      vec4(color.rgb * 0.5, color.a);\n    } else {\n      discard;\n    }\n  }\n  return color;\n}\n\n// if enabled and rendering outlines - Render depth to shadowmap\n// if enabled and rendering colors - Return a darker color if in shadowmap\n// if disabled, just return color\nvec4 outline_filterColor(vec4 color) {\n  if (outline_uEnabled) {\n    return outline_uRenderOutlines ?\n      outline_filterShadowColor(color) :\n      outline_filterDarkenColor(color);\n  }\n  return color;\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,e=t.outlineEnabled,r=t.outlineRenderShadowmap,i=t.outlineShadowmap,o={};return void 0!==e&&(o.outline_uEnabled=e),void 0!==r&&(o.outline_uRenderOutlines=r),void 0!==i&&(o.outline_uShadowmap=i),o}};t.exports.default=r})),a.register("4v7vs",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n=a("69sV8"),r=u(a("g6NgO")),i=u(a("f8oxq")),o=u(a("hof0L")),s=a("dKRuQ");function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=n.default,_={mesh:new i.default({headSize:.2,tailWidth:.05})},b=Object.assign({},r.default.defaultProps,{MarkerLayer:m,markerLayerProps:_,sizeScale:100,fp64:!1,highlightIndex:-1,highlightPoint:null,getPath:function(t){return t.path},getColor:function(t){return t.color},getMarkerColor:function(t){return[0,0,0,255]},getDirection:function(t){return t.direction},getMarkerPercentages:function(t,e){return e.lineLength>.1?[.25,.5,.75]:[.5]}}),x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(f,t);var e,n,a,u,l=(e=f,function(){var t,n=y(e);if(g()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)});function f(){return p(this,f),l.apply(this,arguments)}return n=f,a=[{key:"initializeState",value:function(){this.state={markers:[],mesh:new i.default({headSize:.2,tailWidth:.05}),closestPoint:null}}},{key:"projectFlat",value:function(t,e,n,r){if(n===Ta.METER_OFFSETS){var i=c(e.metersToLngLatDelta(t),2),o=i[0],a=i[1],s=c(r,2),u=s[0],l=s[1];return e.projectFlat([u+o,a+l])}if(n===Ta.LNGLAT_OFFSETS){var f=c(t,2),p=f[0],h=f[1],d=c(r,2),g=d[0],y=d[1];return e.projectFlat([g+p,h+y])}return e.projectFlat(t)}},{key:"updateState",value:function(t){var e=this,n=t.props,r=t.oldProps,i=t.changeFlags;if(i.dataChanged||i.updateTriggersChanged){var a=this.props,s=a.data,u=a.getPath,l=a.getDirection,c=a.getMarkerColor,f=a.getMarkerPercentages,p=a.coordinateSystem,h=a.coordinateOrigin,d=this.context.viewport;this.state.markers=(0,o.default)({data:s,getPath:u,getDirection:l,getColor:c,getMarkerPercentages:f,projectFlat:function(t){return e.projectFlat(t,d,p,h)}}),this._recalculateClosestPoint()}i.propsChanged&&n.point!==r.point&&this._recalculateClosestPoint()}},{key:"_recalculateClosestPoint",value:function(){var t=this.props,e=t.highlightPoint,n=t.highlightIndex;if(e&&n>=0){var r=this.props.data[n],i=this.props.getPath(r),o=(0,s.getClosestPointOnPolyline)({points:i,p:e}).point;this.state.closestPoints=[{position:o}]}else this.state.closestPoints=[]}},{key:"getPickingInfo",value:function(t){var e=t.info;return Object.assign(e,{object:e.object&&e.object.path||e.object})}},{key:"renderLayers",value:function(){return[new r.default(this.props,this.getSubLayerProps({id:"paths",data:this.props.data})),new this.props.MarkerLayer(this.getSubLayerProps(Object.assign({},this.props.markerLayerProps,{id:"markers",data:this.state.markers,getOrientation:function(t){return[0,-t.angle,0]},getColor:function(t){return t.color},sizeScale:this.props.sizeScale,fp64:this.props.fp64,pickable:!1,parameters:{blend:!1,depthTest:!1}}))),this.state.closestPoints&&new zg({id:"".concat(this.props.id,"-highlight"),data:this.state.closestPoints,fp64:this.props.fp64})]}}],a&&h(n.prototype,a),u&&h(n,u),f}(wg);t.exports.default=x,v(x,"layerName","PathMarkerLayer"),v(x,"defaultProps",b)})),a.register("69sV8",(function(e,n){t(e.exports,"default",(function(){return A}));var r=a("hE9gS"),i=a("1joaW"),o=a("ijozg"),s=a("pGAoq"),u=a("fj4bz"),l=a("8YVeo"),c=a("11zLF"),f=a("jk1kF"),p=a("bpqeA"),h=a("9Z3lS");function d(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),Ca.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function g(t,e){if(t.attributes)return d(t.attributes,e),t instanceof wa?t:new wa(t);if(t.positions||t.POSITION)return d(t,e),new wa({attributes:t});throw Error("Invalid mesh")}var y={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},A=function(t){"use strict";r.default(n,t);var e=i.default(n);function n(){return o.default(this,n),e.apply(this,arguments)}return s.default(n,[{key:"getShaders",value:function(){var t=!Zt(this.context.gl),e={};return zr(this.context.gl,Nr)&&(e.DERIVATIVES_AVAILABLE=1),u.default(l.default(n.prototype),"getShaders",this).call(this,{vs:p.default,fs:h.default,modules:[es,ra,ns],transpileToGLSL100:t,defines:e})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:f.MATRIX_ATTRIBUTES}),this.setState({emptyTexture:new Zn(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(u.default(l.default(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),e.mesh!==r.mesh||i.extensionsChanged){if(this.state.model&&this.state.model.delete(),e.mesh){this.state.model=this.getModel(e.mesh);var o=e.mesh.attributes||e.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==r.texture&&this.setTexture(e.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){u.default(l.default(n.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete()}},{key:"draw",value:function(t){var e=t.uniforms;if(this.state.model){var n=this.context.viewport,r=this.props,i=r.sizeScale,o=r.coordinateSystem,a=r._instanced;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!a||f.shouldComposeModelMatrix(n,o),flatShading:!this.state.hasNormals}).draw()}}},{key:"getModel",value:function(t){var e=new fa(this.context.gl,c.default({},this.getShaders(),{id:this.props.id,geometry:g(t,this.props._useMeshColors),isInstanced:!0})),n=this.props.texture,r=this.state.emptyTexture;return e.setUniforms({sampler:n||r,hasTexture:Boolean(n)}),e}},{key:"setTexture",value:function(t){var e=this.state,n=e.emptyTexture,r=e.model;r&&r.setUniforms({sampler:t||n,hasTexture:Boolean(t)})}}]),n}(xg);A.layerName="SimpleMeshLayer",A.defaultProps=y})),a.register("jk1kF",(function(e,n){t(e.exports,"MATRIX_ATTRIBUTES",(function(){return u})),t(e.exports,"shouldComposeModelMatrix",(function(){return l}));var r=Math.PI/180,i=new Float32Array(16),o=new Float32Array(12);function a(t,e,n){var i=e[0]*r,o=e[1]*r,a=e[2]*r,s=Math.sin(a),u=Math.sin(i),l=Math.sin(o),c=Math.cos(a),f=Math.cos(i),p=Math.cos(o),h=n[0],d=n[1],g=n[2];t[0]=h*p*f,t[1]=h*l*f,t[2]=h*-u,t[3]=d*(-l*c+p*u*s),t[4]=d*(p*c+l*u*s),t[5]=d*f*s,t[6]=g*(l*s+p*u*c),t[7]=g*(-p*s+l*u*c),t[8]=g*f*c}function s(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var u={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(t,e){var n=e.startRow,r=e.endRow,u=this.props,l=u.data,c=u.getOrientation,f=u.getScale,p=u.getTranslation,h=u.getTransformMatrix,d=Array.isArray(h),g=d&&16===h.length,y=Array.isArray(f),A=Array.isArray(c),v=Array.isArray(p),m=g||!d&&Boolean(h(l[0]));t.constant=m?g:A&&y&&v;var _=t.value;if(t.constant){var b;if(m)i.set(h),b=s(i);else a(b=o,c,f),b.set(p,9);t.value=new Float32Array(b)}else{var x=n*t.size,w=cd(l,n,r),E=w.iterable,S=w.objectInfo,P=!0,k=!1,C=void 0;try{for(var T,I=E[Symbol.iterator]();!(P=(T=I.next()).done);P=!0){var M=T.value;S.index++;var O=void 0;if(m)i.set(g?h:h(M,S)),O=s(i);else a(O=o,A?c:c(M,S),y?f:f(M,S)),O.set(v?p:p(M,S),9);_[x++]=O[0],_[x++]=O[1],_[x++]=O[2],_[x++]=O[3],_[x++]=O[4],_[x++]=O[5],_[x++]=O[6],_[x++]=O[7],_[x++]=O[8],_[x++]=O[9],_[x++]=O[10],_[x++]=O[11]}}catch(t){k=!0,C=t}finally{try{P||null==I.return||I.return()}finally{if(k)throw C}}}}};function l(t,e){return e===Ta.CARTESIAN||e===Ta.METER_OFFSETS||e===Ta.DEFAULT&&!t.isGeospatial}})),a.register("bpqeA",(function(e,n){t(e.exports,"default",(function(){return r}));var r="#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n"})),a.register("9Z3lS",(function(e,n){t(e.exports,"default",(function(){return r}));var r="#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"})),a.register("f8oxq",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,t);var e,n=(e=u,function(){var t,n=a(e);if(o()){var r=a(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i(this,t)});function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,u),n.call(this,Object.assign({},t,{attributes:l(t)}))}return u}(wa);function l(t){for(var e=t.length,n=void 0===e?1:e,r=t.headSize,i=void 0===r?.2:r,o=t.tailWidth,a=void 0===o?.05:o,s=t.tailStart,u=void 0===s?.05:s,l=[.5,1,0,.5-i/2,1-i,0,.5+i/2,1-i,0,.5-a/2,u,0,.5+a/2,1-i,0,.5+a/2,u,0,.5-a/2,u,0,.5-a/2,1-i,0,.5+a/2,1-i,0],c=new Array(l.length),f=0;f<l.length/3;f++){var p=3*f;c[p+0]=(l[p+0]-.5)*n,c[p+1]=(l[p+1]-.5)*n,c[p+2]=0}return{positions:new Float32Array(c),normals:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]),texCoords:new Float32Array(l)}}t.exports.default=u})),a.register("hof0L",(function(t,e){"use strict";function n(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].distance(t[n+1]);return e}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){var e,r=t.data,u=t.getPath,l=void 0===u?function(t){return t.path}:u,c=t.getDirection,f=void 0===c?function(t){return t.direction}:c,p=t.getColor,h=void 0===p?function(t){return o}:p,d=t.getMarkerPercentages,g=void 0===d?function(t,e){return[.5]}:d,y=t.projectFlat,A=[],v=n(r);try{for(v.s();!(e=v.n()).done;){var m,_=e.value,b=l(_),x=f(_)||a,w=h(_),E=b.map((function(t){return new sc(t)})),S=E.slice(0).reverse(),P=i(E),k=n(g(_,{lineLength:P}));try{for(k.s();!(m=k.n()).done;){var C=m.value;if(x.forward){var T=s({path:E,percentage:C,lineLength:P,color:w,object:_,projectFlat:y});A.push(T)}if(x.backward){var I=s({path:S,percentage:C,lineLength:P,color:w,object:_,projectFlat:y});A.push(I)}}}catch(t){k.e(t)}finally{k.f()}}}catch(t){v.e(t)}finally{v.f()}return A};var o=[0,0,0,255],a={forward:!0,backward:!1};function s(t){var e=t.path,n=t.percentage,r=t.lineLength,i=t.color,o=t.object,a=t.projectFlat,s=r*n,u=0,l=0,c=0;for(c=0;c<e.length-1&&!((u+=e[c].distance(e[c+1]))>s);c++)l=u;c===e.length-1&&(c-=1);var f=s-l,p=e[c+1].clone().subtract(e[c]).normalize().clone().multiply(new sc(f,f)).add(e[c]),h=180*new sc(a(e[c+1])).subtract(a(e[c])).verticalAngle()/Math.PI;return{position:[p.x,p.y,0],angle:h,color:i,object:o}}})),a.register("dKRuQ",(function(t,e){"use strict";function n(t){var e=t.p,n=t.p1,r=t.p2,i=t.clampToLine,o=void 0===i||i,a=new Ac(r).subtract(n),s=new Ac(e).subtract(n),u=a.dot(s);return o&&(u=Gl(u,0,1)),a.lerp(u)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.getClosestPointOnLine=n,t.exports.getClosestPointOnPolyline=function(t){var e=t.p,r=t.points;e=new Ac(e);for(var i=null,o=1/0,a=-1,s=0;s<r.length-1;++s){var u=r[s],l=r[s+1],c=n({p:e,p1:u,p2:l}),f=e.distanceSquared(c);f<o&&(o=f,i=c,a=s)}return{point:i,index:a,p1:r[a],p2:r[a+1],distanceSquared:o,distance:Math.sqrt(o)}}})),a.register("iIGDa",(function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=arguments,n=function(n){var i=null!=e[n]?e[n]:{};n%2?r(Object(i),!0).forEach((function(e){f(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))},i=1;i<arguments.length;i++)n(i);return t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(h,t);var e,n,r,f,p=(e=h,function(){var t,n=l(e);if(u()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return o(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"renderLayers",value:function(){var t=this.props,e=t.id,n=t.getFillColor,r=t.getStrokeColor,o=t.getInnerRadius,a=t.updateTriggers;return[new zg(i({},this.props,{id:"".concat(e,"-full"),data:this.props.data,getLineColor:r,updateTriggers:i({},a,{getStrokeColor:a.getStrokeColor})})),new zg(i({},this.props,{id:"".concat(e,"-inner"),data:this.props.data,getFillColor:n,getRadius:o,pickable:!1,updateTriggers:i({},a,{getFillColor:a.getFillColor,getRadius:a.getInnerRadius})}))]}}])&&a(n.prototype,r),f&&a(n,f),h}(wg);t.exports.default=p,f(p,"layerName","JunctionScatterplotLayer"),f(p,"defaultProps",i({},zg.defaultProps,{getFillColor:function(t){return[0,0,0,255]},getStrokeColor:function(t){return[255,255,255,255]},getInnerRadius:function(t){return 1}}))})),a.register("gQ5RH",(function(t,e){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];return Array.isArray(t)?[255*t[0],255*t[1],255*t[2],255*t[3]]:e},t.exports.recursivelyTraverseNestedArrays=function t(e,r,i){if(!Array.isArray(e[0]))return!0;for(var o=0;o<e.length;o++)if(t(e[o],[].concat((a=r,function(t){if(Array.isArray(t))return n(t)}(a)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(a)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[o]),i)){i(e,r);break}var a;return!1}})),a.register("16bb2",(function(t,e){"use strict";function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"objects",void 0),r(this,"originals",void 0),r(this,"updateTrigger",void 0),r(this,"_idToPosition",void 0),r(this,"_getData",void 0),r(this,"_convert",void 0),this.objects=[],this.originals=[],this.updateTrigger=0,this._idToPosition=new Map,this._getData=e,this._convert=n}var e,i,o;return e=t,i=[{key:"updateAllDeckObjects",value:function(){var t=this;this._getData&&this._convert&&(this.originals.length=0,this.objects.length=0,this._idToPosition.clear(),this._getData().forEach((function(e){t._idToPosition.set(e.id,t.objects.length),t.originals.push(e),t.objects.push(t._convert(e))})),this.triggerUpdate())}},{key:"updateDeckObjectsByIds",value:function(t){var e=this;this._getData&&this._convert&&(t.forEach((function(t){var n=e._idToPosition.get(t);void 0!==n&&(e.objects[n]=e._convert(e.originals[n]))})),this.triggerUpdate())}},{key:"triggerUpdate",value:function(){this.updateTrigger++}},{key:"getDeckObjectById",value:function(t){var e=this._idToPosition.get(t);return void 0!==e?this.objects[e]:null}},{key:"getOriginalById",value:function(t){var e=this._idToPosition.get(t);return void 0!==e?this.originals[e]:null}}],i&&n(e.prototype,i),o&&n(e,o),t}();t.exports.default=i})),a.register("exBpP",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n=s(a("eXd8F")),r=a("gQ5RH"),i=a("5lYgw"),o=s(a("16bb2"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,a,s,u=(e=g,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function g(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),e=u.call(this,t),n=f(e),i=void 0,(r="deckCache")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e.deckCache=new o.default(t.getData,(function(e){return t.toNebulaFeature(e)})),e}return n=g,(a=[{key:"render",value:function(t){var e=t.nebula,n=[0,0,0,255],o=this.deckCache,a=o.objects,s=o.updateTrigger,u=e.props.viewport.zoom;return new pv({id:"texts-".concat(this.id),data:a,opacity:1,fp64:!1,pickable:!1,getText:function(t){return t.style.text},getPosition:function(t){return t.geoJson.geometry.coordinates},getColor:function(t){return(0,r.toDeckColor)(t.style.fillColor)||n},sizeScale:1/Math.pow(2,20-u),getSize:i.PROJECTED_PIXEL_SIZE_MULTIPLIER,updateTriggers:{all:s},nebulaLayer:this})}}])&&l(n.prototype,a),s&&l(n,s),g}(n.default);t.exports.default=g})),a.register("5lYgw",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.PROJECTED_PIXEL_SIZE_MULTIPLIER=void 0;t.exports.PROJECTED_PIXEL_SIZE_MULTIPLIER=2/3})),a.register("C59bL",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n,r=a("d6f4f"),i=l(a("4uWiN")),o=l(a("eXd8F")),s=a("gQ5RH"),u=l(a("16bb2"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=(A(n={},Pv.ArrowStyles.NONE,{forward:!1,backward:!1}),A(n,Pv.ArrowStyles.FORWARD,{forward:!0,backward:!1}),A(n,Pv.ArrowStyles.BACKWARD,{forward:!1,backward:!0}),A(n,Pv.ArrowStyles.BOTH,{forward:!0,backward:!0}),n),m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(c,t);var e,n,o,a,l=(e=c,function(){var t,n=g(e);if(d()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function c(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),A(h(e=l.call(this,t)),"deckCache",void 0),A(h(e),"noBlend",void 0),A(h(e),"highlightColor",void 0),A(h(e),"arrowSize",void 0),A(h(e),"jointRounded",void 0),A(h(e),"capRounded",void 0),A(h(e),"dashed",void 0),A(h(e),"markerLayerProps",void 0),e.deckCache=new u.default(t.getData,(function(e){return t.toNebulaFeature(e)})),e.enableSelection=!0;var n=t.enablePicking,r=void 0===n||n,i=t.noBlend,o=void 0!==i&&i,a=t.jointRounded,s=void 0===a||a,f=t.capRounded,p=void 0===f||f,d=t.dashed,g=void 0!==d&&d,y=t.markerLayerProps,v=void 0===y?null:y;return Object.assign(h(e),{enablePicking:r,noBlend:o,jointRounded:s,capRounded:p,dashed:g,markerLayerProps:v}),e}return n=c,(o=[{key:"getMouseOverSegment",value:function(){return null}},{key:"_calcMarkerPercentages",value:function(t){var e=t.style.arrowPercentages;return e||((t.style.arrowStyle||Pv.DEFAULT_STYLE.arrowStyle)===Pv.ArrowStyles.NONE?[]:[[.5],[.33,.66],[.25,.5,.75]][Math.min(t.style.arrowCount||Pv.DEFAULT_STYLE.arrowCount,Pv.MAX_ARROWS)-1])}},{key:"_getHighlightedObjectIndex",value:function(t){var e=t.nebula.deckglMouseOverInfo;if(e){var n=e.originalLayer,r=e.index;if(n===this)return r}return-1}},{key:"render",value:function(t){var e=t.nebula,n=[0,0,0,255],o=this.deckCache,a=o.objects,u=o.updateTrigger;return new r.PathMarkerLayer({id:"segments-".concat(this.id),data:a,opacity:1,fp64:!1,jointRounded:this.jointRounded,capRounded:this.capRounded,pickable:!0,sizeScale:this.arrowSize||6,parameters:{depthTest:!1,blend:!this.noBlend,blendEquation:i.default.MAX},getPath:function(t){return t.geoJson.geometry.coordinates},getColor:function(t){return(0,s.toDeckColor)(t.style.lineColor,n)},getWidth:function(t){return t.style.lineWidthMeters||1},getZLevel:function(t){return 255*t.style.zLevel},getDirection:function(t){return v[t.style.arrowStyle]},getMarkerColor:function(t){return(0,s.toDeckColor)(t.style.arrowColor,n)},getMarkerPercentages:this._calcMarkerPercentages,updateTriggers:{all:u},highlightedObjectIndex:this._getHighlightedObjectIndex({nebula:e}),highlightColor:(0,s.toDeckColor)(this.highlightColor),dashJustified:this.dashed,getDashArray:this.dashed?function(t){return t.style.dashArray}:null,markerLayerProps:this.markerLayerProps||r.PathMarkerLayer.defaultProps.markerLayerProps,nebulaLayer:this})}}])&&f(n.prototype,o),a&&f(n,a),c}(o.default);t.exports.default=m}));var Pv={};Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.DEFAULT_STYLE=Pv.MAX_ARROWS=Pv.DEFAULT_ARROWS=Pv.ArrowStyles=void 0;var kv={NONE:0,FORWARD:1,BACKWARD:2,BOTH:3};Pv.ArrowStyles=kv;Pv.DEFAULT_ARROWS=1;Pv.MAX_ARROWS=3;var Cv={arrowColor:[0,0,0,1],arrowCount:1,arrowStyle:kv.NONE,fillColor:[0,0,0,1],lineColor:[0,0,0,1],lineWidthMeters:5,outlineRadiusMeters:0,opacity:1,zLevel:0};Pv.DEFAULT_STYLE=Cv,a.register("bgBmX",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var n=a("wvaTc"),r=u(a("barne")),i=u(a("OxgNg")),o=u(a("hZWkR")),s=u(a("eXd8F"));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"props",void 0),p(this,"deckgl",void 0),p(this,"mainContainer",void 0),p(this,"deckglMouseOverInfo",void 0),p(this,"_deckDrawer",void 0),p(this,"_mouseWasDown",void 0),p(this,"wmViewport",void 0),p(this,"queryObjectEvents",new n.EventEmitter),p(this,"forceUpdate",void 0),p(this,"inited",void 0),p(this,"_onMouseEvent",(function(t){if(e._isNebulaEvent(t)){"mousedown"===t.type&&(e._mouseWasDown=!0);var n=e.mainContainer?e.mainContainer.getBoundingClientRect():{},r=n.top,i=void 0===r?0:r,o=n.left,a=void 0===o?0:o,s=new Proxy(t,{get:function(t,e){if("offsetX"===e)return t.pageX-a;if("offsetY"===e)return t.pageY-i;if("type"===e)return t.type.replace("pointer","mouse");var n=t[e];return"function"==typeof n?n.bind(t):n}});e._handleDeckGLEvent(s)}}))}var e,a,u;return e=t,(a=[{key:"init",value:function(t){var e=this;this.props=t,this.wmViewport=new lf(this.props.viewport),["click","mousemove","mouseup","mousedown"].forEach((function(t){return r.default.addEventListener(t,e._onMouseEvent,!0)}))}},{key:"detach",value:function(){var t=this;["click","mousemove","mouseup","mousedown"].forEach((function(e){return r.default.removeEventListener(e,t._onMouseEvent,!0)}))}},{key:"updateProps",value:function(t){this.props=t;var e=this.props.viewport;this.wmViewport=new lf(e)}},{key:"log",value:function(t){var e=this.props.logger;e&&e.info&&e.info("Nebula: "+t)}},{key:"updateAllDeckObjects",value:function(){this.getAllLayers().forEach((function(t){t&&t.deckCache&&t.deckCache.updateAllDeckObjects()})),this.forceUpdate()}},{key:"updateDeckObjectsByIds",value:function(t){this.getAllLayers().forEach((function(e){e&&e.deckCache&&e.deckCache.updateDeckObjectsByIds(t)})),this.forceUpdate()}},{key:"rerenderLayers",value:function(){this.updateAllDeckObjects()}},{key:"_isNebulaEvent",value:function(t){var e=t.buttons,n=t.target,r=t.type,i=this.props.viewport;if(this._mouseWasDown&&"mouseup"===r)return this._mouseWasDown=!1,!0;if("mousemove"===r&&e>0)return!0;if(!n.getBoundingClientRect)return!1;var o=n.getBoundingClientRect();return Math.round(o.width)===Math.round(i.width)&&Math.round(o.height)===Math.round(i.height)}},{key:"getMouseGroundPosition",value:function(t){return this.wmViewport.unproject([t.offsetX,t.offsetY])}},{key:"unprojectMousePosition",value:function(t){return this.wmViewport.unproject(t)}},{key:"_handleDeckGLEvent",value:function(t){var e=this.deckgl,n=this.props,a=n.onMapMouseEvent,s=n.selectionType,u=n.eventFilter,l=!0,c="auto";if(t&&e&&s){this._deckDrawer||(this._deckDrawer=new i.default(this));var f=this.getMouseGroundPosition(t);if(u&&!u(f,t))return;this._deckDrawer.handleEvent(t,f,s).redraw&&this.forceUpdate()}else{if(t&&e&&(!t.buttons||"mousemove"!==t.type)){var p=e.props.layers.filter((function(t){return t&&t.props&&t.props.nebulaLayer&&t.props.nebulaLayer.enablePicking})).map((function(t){return t.id})),h=e.pickObject({x:t.offsetX,y:t.offsetY,radius:5,layerIds:p});if(this.queryObjectEvents.emit("pick",{event:t,pickingInfo:h}),h){l=!1;var d=h.index,g=h.lngLat;if(u&&!u(g,t))return;var y=h.layer,A=h.object;y&&y.props&&y.props.nebulaLayer&&y.props.nebulaLayer.eventHandler&&y.props.nebulaLayer.eventHandler(t,h);var v=A.original||y.props.nebulaLayer&&y.props.nebulaLayer.deckCache&&y.props.nebulaLayer.deckCache.originals[d];if(v){this.deckglMouseOverInfo={originalLayer:y.props.nebulaLayer,index:d};var m=new o.default(t,{data:v,metadata:A.metadata,groundPoint:g,nebula:this});y.props.nebulaLayer.emit(t.type,m),this.forceUpdate()}c="pointer"}}if(r.default.documentElement&&(r.default.documentElement.style.cursor=c),l){this.deckglMouseOverInfo=null;var _=this.getMouseGroundPosition(t);if(u&&!u(_,t))return;var b=new o.default(t,{groundPoint:_,nebula:this});this.getAllLayers().filter((function(t){return t&&t.usesMapEvents})).forEach((function(t){return t.emit("mapMouseEvent",b)})),this.getAllLayers().filter((function(t){return t&&t.props&&t.props.nebulaLayer&&t.props.nebulaLayer.mapMouseEvent})).forEach((function(t){return t.props.nebulaLayer.mapMouseEvent(b,t)})),a&&a(t,_)}}}},{key:"getExtraDeckLayers",value:function(){var t=[];return this._deckDrawer&&t.push.apply(t,l(this._deckDrawer.render())),t}},{key:"renderDeckLayers",value:function(){var t=this;return this.getAllLayers().map((function(e){return e instanceof s.default?e.render({nebula:t}):e})).filter(Boolean)}},{key:"getAllLayers",value:function(){var t=[];return this.props.layers.filter(Boolean).forEach((function(e){t.push(e),e instanceof s.default&&t.push.apply(t,l(e.helperLayers))})),t.filter(Boolean)}},{key:"getRenderedLayers",value:function(){return[].concat(l(this.renderDeckLayers()),l(this.getExtraDeckLayers()))}},{key:"updateAndGetRenderedLayers",value:function(t,e,n){return this.inited?(this.updateProps({layers:t,viewport:e}),this.forceUpdate=function(){return n.forceUpdate()}):(this.inited=!0,this.init({layers:t,viewport:e}),this.forceUpdate=function(){return n.forceUpdate()},this.updateAllDeckObjects()),this.getRenderedLayers()}},{key:"setDeck",value:function(t){t&&(this.deckgl=t)}},{key:"setMainContainer",value:function(t){t&&(this.mainContainer=t)}}])&&f(e.prototype,a),u&&f(e,u),t}();t.exports.default=h})),a.register("barne",(function(t,n){var r,i=void 0!==e?e:"undefined"!=typeof window?window:{},o=a("aqbQf");"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),t.exports=r})),a.register("c9wMV",(function(t,n){var r=a("5qgrd");(function(){var i,o=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},a=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r},s=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},u=function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t},l=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0},c=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},f=function(t,e){return!!(null==t?0:t.length)&&_(t,e,0)>-1},p=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},h=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},d=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},g=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},y=function(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},A=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},v=function(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r},m=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},_=function(t,e,n){return e==e?G(t,e,n):m(t,x,n)},b=function(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1},x=function(t){return t!=t},w=function(t,e){var n=null==t?0:t.length;return n?k(t,e)/n:ot},E=function(t){return function(e){return null==e?i:e[t]}},S=function(t){return function(e){return null==t?i:t[e]}},P=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n},k=function(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n},C=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},T=function(t){return t?t.slice(0,H(t)+1).replace(Qt,""):t},I=function(t){return function(e){return t(e)}},M=function(t,e){return h(e,(function(e){return t[e]}))},O=function(t,e){return t.has(e)},L=function(t,e){for(var n=-1,r=t.length;++n<r&&_(e,t[n],0)>-1;);return n},R=function(t,e){for(var n=t.length;n--&&_(e,t[n],0)>-1;);return n},D=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r},N=function(t){return"\\"+Je[t]},F=function(t){return He.test(t)},j=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},z=function(t,e){return function(n){return t(e(n))}},B=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==K||(t[n]=K,o[i++]=n)}return o},U=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},V=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n},G=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1},q=function(t){return F(t)?X(t):yn(t)},W=function(t){return F(t)?Z(t):function(t){return t.split("")}(t)},H=function(t){for(var e=t.length;e--&&Kt.test(t.charAt(e)););return e},X=function(t){for(var e=qe.lastIndex=0;qe.test(t);)++e;return e},Z=function(t){return t.match(qe)||[]},Y="Expected a function",Q="__lodash_hash_undefined__",K="__lodash_placeholder__",J=16,$=32,tt=64,et=128,nt=256,rt=1/0,it=9007199254740991,ot=NaN,at=4294967295,st=[["ary",et],["bind",1],["bindKey",2],["curry",8],["curryRight",J],["flip",512],["partial",$],["partialRight",tt],["rearg",nt]],ut="[object Arguments]",lt="[object Array]",ct="[object Boolean]",ft="[object Date]",pt="[object Error]",ht="[object Function]",dt="[object GeneratorFunction]",gt="[object Map]",yt="[object Number]",At="[object Object]",vt="[object Promise]",mt="[object RegExp]",_t="[object Set]",bt="[object String]",xt="[object Symbol]",wt="[object WeakMap]",Et="[object ArrayBuffer]",St="[object DataView]",Pt="[object Float32Array]",kt="[object Float64Array]",Ct="[object Int8Array]",Tt="[object Int16Array]",It="[object Int32Array]",Mt="[object Uint8Array]",Ot="[object Uint8ClampedArray]",Lt="[object Uint16Array]",Rt="[object Uint32Array]",Dt=/\b__p \+= '';/g,Nt=/\b(__p \+=) '' \+/g,Ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,jt=/&(?:amp|lt|gt|quot|#39);/g,zt=/[&<>"']/g,Bt=RegExp(jt.source),Ut=RegExp(zt.source),Vt=/<%-([\s\S]+?)%>/g,Gt=/<%([\s\S]+?)%>/g,qt=/<%=([\s\S]+?)%>/g,Wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ht=/^\w*$/,Xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zt=/[\\^$.*+?()[\]{}|]/g,Yt=RegExp(Zt.source),Qt=/^\s+/,Kt=/\s/,Jt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$t=/\{\n\/\* \[wrapped with (.+)\] \*/,te=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ne=/[()=,{}\[\]\/\s]/,re=/\\(\\)?/g,ie=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oe=/\w*$/,ae=/^[-+]0x[0-9a-f]+$/i,se=/^0b[01]+$/i,ue=/^\[object .+?Constructor\]$/,le=/^0o[0-7]+$/i,ce=/^(?:0|[1-9]\d*)$/,fe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pe=/($^)/,he=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ge="\\u2700-\\u27bf",ye="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",ve="\\ufe0e\\ufe0f",me="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_e="['’]",be="[\\ud800-\\udfff]",xe="["+me+"]",we="["+de+"]",Ee="\\d+",Se="[\\u2700-\\u27bf]",Pe="["+ye+"]",ke="[^\\ud800-\\udfff"+me+Ee+ge+ye+Ae+"]",Ce="\\ud83c[\\udffb-\\udfff]",Te="[^\\ud800-\\udfff]",Ie="(?:\\ud83c[\\udde6-\\uddff]){2}",Me="[\\ud800-\\udbff][\\udc00-\\udfff]",Oe="["+Ae+"]",Le="(?:"+Pe+"|"+ke+")",Re="(?:"+Oe+"|"+ke+")",De="(?:['’](?:d|ll|m|re|s|t|ve))?",Ne="(?:['’](?:D|LL|M|RE|S|T|VE))?",Fe="(?:"+we+"|"+Ce+")"+"?",je="[\\ufe0e\\ufe0f]?",ze=je+Fe+("(?:\\u200d(?:"+[Te,Ie,Me].join("|")+")"+je+Fe+")*"),Be="(?:"+[Se,Ie,Me].join("|")+")"+ze,Ue="(?:"+[Te+we+"?",we,Ie,Me,be].join("|")+")",Ve=RegExp(_e,"g"),Ge=RegExp(we,"g"),qe=RegExp(Ce+"(?="+Ce+")|"+Ue+ze,"g"),We=RegExp([Oe+"?"+Pe+"+"+De+"(?="+[xe,Oe,"$"].join("|")+")",Re+"+"+Ne+"(?="+[xe,Oe+Le,"$"].join("|")+")",Oe+"?"+Le+"+"+De,Oe+"+"+Ne,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ee,Be].join("|"),"g"),He=RegExp("[\\u200d\\ud800-\\udfff"+de+ve+"]"),Xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ze=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ye=-1,Qe={};Qe[Pt]=Qe[kt]=Qe[Ct]=Qe[Tt]=Qe[It]=Qe[Mt]=Qe[Ot]=Qe[Lt]=Qe[Rt]=!0,Qe[ut]=Qe[lt]=Qe[Et]=Qe[ct]=Qe[St]=Qe[ft]=Qe[pt]=Qe[ht]=Qe[gt]=Qe[yt]=Qe[At]=Qe[mt]=Qe[_t]=Qe[bt]=Qe[wt]=!1;var Ke={};Ke[ut]=Ke[lt]=Ke[Et]=Ke[St]=Ke[ct]=Ke[ft]=Ke[Pt]=Ke[kt]=Ke[Ct]=Ke[Tt]=Ke[It]=Ke[gt]=Ke[yt]=Ke[At]=Ke[mt]=Ke[_t]=Ke[bt]=Ke[xt]=Ke[Mt]=Ke[Ot]=Ke[Lt]=Ke[Rt]=!0,Ke[pt]=Ke[ht]=Ke[wt]=!1;var Je={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$e=parseFloat,tn=parseInt,en="object"==typeof e&&e&&e.Object===Object&&e,nn="object"==typeof self&&self&&self.Object===Object&&self,rn=en||nn||Function("return this")(),on=n&&!n.nodeType&&n,an=on&&t&&!t.nodeType&&t,sn=an&&an.exports===on,un=sn&&en.process,ln=function(){try{var t=an&&an.require&&an.require("util").types;return t||un&&un.binding&&un.binding("util")}catch(t){}}(),cn=ln&&ln.isArrayBuffer,fn=ln&&ln.isDate,pn=ln&&ln.isMap,hn=ln&&ln.isRegExp,dn=ln&&ln.isSet,gn=ln&&ln.isTypedArray,yn=E("length"),An=S({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),vn=S({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),mn=S({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),_n=function t(e){var n,S,G=function(t){if(qi(t)&&!Hs(t)&&!(t instanceof Kt)){if(t instanceof Z)return t;if(Ro.call(t,"__wrapped__"))return Ai(t)}return new Z(t)},X=function(){},Z=function(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i},Kt=function(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=at,this.__views__=[]},de=function(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}},ge=function(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}},ye=function(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}},Ae=function(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ye;++e<n;)this.add(t[e])},ve=function(t){var e=this.__data__=new ge(t);this.size=e.size},me=function(t,e){var n=Hs(t),r=!n&&Ws(t),i=!n&&!r&&Zs(t),o=!n&&!r&&!i&&$s(t),a=n||r||i||o,s=a?C(t.length,ko):[],u=s.length;for(var l in t)!e&&!Ro.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Yr(l,u))||s.push(l);return s},_e=function(t){var e=t.length;return e?t[Mn(0,e-1)]:i},be=function(t,e){return hi(ur(t),Ie(e,0,t.length))},xe=function(t){return hi(ur(t))},we=function(t,e,n){(n!==i&&!Ni(t[e],n)||n===i&&!(e in t))&&Ce(t,e,n)},Ee=function(t,e,n){var r=t[e];Ro.call(t,e)&&Ni(r,n)&&(n!==i||e in t)||Ce(t,e,n)},Se=function(t,e){for(var n=t.length;n--;)if(Ni(t[n][0],e))return n;return-1},Pe=function(t,e,n,r){return La(t,(function(t,i,o){e(r,t,n(t),o)})),r},ke=function(t,e){return t&&lr(e,io(e),t)},Ce=function(t,e,n){"__proto__"==e&&Jo?Jo(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Te=function(t,e){for(var n=-1,r=e.length,o=_o(r),a=null==t;++n<r;)o[n]=a?i:no(t,e[n]);return o},Ie=function(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t},Me=function(t,e,n){var r=n.length;if(null==t)return!r;for(t=So(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0},Oe=function(t,e,n){if("function"!=typeof t)throw new Co(Y);return rs((function(){t.apply(i,n)}),e)},Le=function(t,e,n,r){var i=-1,o=f,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=h(e,I(n))),r?(o=p,a=!1):e.length>=200&&(o=O,a=!1,e=new Ae(e));t:for(;++i<s;){var c=t[i],d=null==n?c:n(c);if(c=r||0!==c?c:0,a&&d==d){for(var g=l;g--;)if(e[g]===d)continue t;u.push(c)}else o(e,d,r)||u.push(c)}return u},Re=function(t,e){var n=!0;return La(t,(function(t,r,i){return n=!!e(t,r,i)})),n},De=function(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(u===i?s==s&&!Zi(s):n(s,u)))var u=s,l=a}return l},Ne=function(t,e){var n=[];return La(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n},Fe=function(t,e){return t&&Na(t,e,io)},je=function(t,e){return t&&Fa(t,e,io)},ze=function(t,e){return c(e,(function(e){return Bi(t[e])}))},Be=function(t,e){for(var n=0,r=(e=$n(e,t)).length;null!=t&&n<r;)t=t[di(e[n++])];return n&&n==r?t:i},Ue=function(t,e,n){var r=e(t);return Hs(t)?r:d(r,n(t))},qe=function(t){return null==t?t===i?"[object Undefined]":"[object Null]":Ko&&Ko in So(t)?Gr(t):ai(t)},He=function(t,e){return t>e},Je=function(t,e){return null!=t&&Ro.call(t,e)},en=function(t,e){return null!=t&&e in So(t)},nn=function(t,e,n){for(var r=n?p:f,o=t[0].length,a=t.length,s=a,u=_o(a),l=1/0,c=[];s--;){var d=t[s];s&&e&&(d=h(d,I(e))),l=ca(d.length,l),u[s]=!n&&(e||o>=120&&d.length>=120)?new Ae(s&&d):i}d=t[0];var g=-1,y=u[0];t:for(;++g<o&&c.length<l;){var A=d[g],v=e?e(A):A;if(A=n||0!==A?A:0,!(y?O(y,v):r(c,v,n))){for(s=a;--s;){var m=u[s];if(!(m?O(m,v):r(t[s],v,n)))continue t}y&&y.push(v),c.push(A)}}return c},on=function(t,e,n){e=$n(e,t);var r=null==(t=ui(t,e))?t:t[di(xi(e))];return null==r?i:o(r,t,n)},an=function(t){return qi(t)&&qe(t)==ut},un=function(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=So(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var l=(u=n[o])[0],c=t[l],f=u[1];if(s&&u[2]){if(c===i&&!(l in t))return!1}else{var p=new ve;if(r)var h=r(c,f,l,t,e,p);if(!(h===i?ja(f,c,3,r,p):h))return!1}}return!0},ln=function(t){return!(!Gi(t)||ti(t))&&(Bi(t)?Bo:ue).test(gi(t))},yn=function(t){return"function"==typeof t?t:null==t?po:"object"==typeof t?Hs(t)?Sn(t[0],t[1]):En(t):Ao(t)},bn=function(t){if(!ei(t))return ua(t);var e=[];for(var n in So(t))Ro.call(t,n)&&"constructor"!=n&&e.push(n);return e},xn=function(t,e){return t<e},wn=function(t,e){var n=-1,r=Fi(t)?_o(t.length):[];return La(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},En=function(t){var e=Ur(t);return 1==e.length&&e[0][2]?ri(e[0][0],e[0][1]):function(n){return n===t||un(n,t,e)}},Sn=function(t,e){return Kr(t)&&ni(e)?ri(di(t),e):function(n){var r=no(n,t);return r===i&&r===e?ro(n,t):ja(e,r,3)}},Pn=function(t,e){var n=t.length;if(n)return Yr(e+=e<0?n:0,n)?t[e]:i},kn=function(t,e,n){e=e.length?h(e,(function(t){return Hs(t)?function(e){return Be(e,1===t.length?t[0]:t)}:t})):[po];var r=-1;return e=h(e,I(zr())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(wn(t,(function(t,n,i){return{criteria:h(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return or(t,e,n)}))},Cn=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Be(t,a);n(s,a)&&Nn(o,$n(a,t),s)}return o},Tn=function(t,e,n,r){var i=r?b:_,o=-1,a=e.length,s=t;for(t===e&&(e=ur(e)),n&&(s=h(t,I(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Zo.call(s,u,1),Zo.call(t,u,1);return t},In=function(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Yr(i)?Zo.call(t,i,1):Wn(t,i)}}return t},Mn=function(t,e){return t+ra(ha()*(e-t+1))},On=function(t,e){var n="";if(!t||e<1||e>it)return n;do{e%2&&(n+=t),(e=ra(e/2))&&(t+=t)}while(e);return n},Ln=function(t,e){return is(si(t,e,po),t+"")},Rn=function(t){return _e(so(t))},Dn=function(t,e){var n=so(t);return hi(n,Ie(e,0,n.length))},Nn=function(t,e,n,r){if(!Gi(t))return t;for(var o=-1,a=(e=$n(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var l=di(e[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var f=u[l];(c=r?r(f,l,u):i)===i&&(c=Gi(f)?f:Yr(e[o+1])?[]:{})}Ee(u,l,c),u=u[l]}return t},Fn=function(t){return hi(so(t))},jn=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=_o(i);++r<i;)o[r]=t[r+e];return o},zn=function(t,e){var n;return La(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n},Bn=function(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Zi(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Un(t,e,po,n)},Un=function(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,l=Zi(e),c=e===i;o<a;){var f=ra((o+a)/2),p=n(t[f]),h=p!==i,d=null===p,g=p==p,y=Zi(p);if(s)var A=r||g;else A=c?g&&(r||h):u?g&&h&&(r||!d):l?g&&h&&!d&&(r||!y):!d&&!y&&(r?p<=e:p<e);A?o=f+1:a=f}return ca(a,4294967294)},Vn=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ni(s,u)){var u=s;o[i++]=0===a?0:a}}return o},Gn=function(t){return"number"==typeof t?t:Zi(t)?ot:+t},qn=function(t,e,n){var r=-1,i=f,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=p;else if(o>=200){var l=e?null:Ha(t);if(l)return U(l);a=!1,i=O,u=new Ae}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=u.length;d--;)if(u[d]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s},Wn=function(t,e){return e=$n(e,t),null==(t=ui(t,e))||delete t[di(xi(e))]},Hn=function(t,e,n,r){return Nn(t,e,n(Be(t,e)),r)},Xn=function(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?jn(t,r?0:o,r?o+1:i):jn(t,r?o+1:0,r?i:o)},Zn=function(t,e){var n=t;return n instanceof Kt&&(n=n.value()),g(e,(function(t,e){return e.func.apply(e.thisArg,d([t],e.args))}),n)},Yn=function(t,e,n){var r=t.length;if(r<2)return r?qn(t[0]):[];for(var i=-1,o=_o(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Le(o[i]||a,t[s],e,n));return qn(Da(o,1),e,n)},Qn=function(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var u=r<a?e[r]:i;n(s,t[r],u)}return s},Kn=function(t){return ji(t)?t:[]},Jn=function(t){return"function"==typeof t?t:po},$n=function(t,e){return Hs(t)?t:Kr(t,e)?[t]:os(eo(t))},tr=function(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:jn(t,e,n)},er=function(t,e){if(e)return t.slice();var n=t.length,r=qo?qo(n):new t.constructor(n);return t.copy(r),r},nr=function(t){var e=new t.constructor(t.byteLength);return new Go(e).set(new Go(t)),e},rr=function(t,e){var n=e?nr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},ir=function(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=Zi(t),s=e!==i,u=null===e,l=e==e,c=Zi(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&t<e||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0},or=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=ir(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index},ar=function(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=la(o-a,0),c=_o(u+l),f=!r;++s<u;)c[s]=e[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c},sr=function(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=la(o-s,0),f=_o(c+l),p=!r;++i<c;)f[i]=t[i];for(var h=i;++u<l;)f[h+u]=e[u];for(;++a<s;)(p||i<o)&&(f[h+n[a]]=t[i++]);return f},ur=function(t,e){var n=-1,r=t.length;for(e||(e=_o(r));++n<r;)e[n]=t[n];return e},lr=function(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):i;l===i&&(l=t[u]),o?Ce(n,u,l):Ee(n,u,l)}return n},cr=function(t,e){return function(n,r){var i=Hs(n)?a:Pe,o=e?e():{};return i(n,t,zr(r,2),o)}},fr=function(t){return Ln((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&Qr(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=So(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))},pr=function(t,e){return function(n,r){if(null==n)return n;if(!Fi(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=So(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}},hr=function(t){return function(e,n,r){for(var i=-1,o=So(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}},dr=function(t){return function(e){e=eo(e);var n=F(e)?W(e):i,r=n?n[0]:e.charAt(0),o=n?tr(n,1).join(""):e.slice(1);return r[t]()+o}},gr=function(t){return function(e){return g(co(lo(e).replace(Ve,"")),t,"")}},yr=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ma(t.prototype),r=t.apply(n,e);return Gi(r)?r:n}},Ar=function(t){return function(e,n,r){var o=So(e);if(!Fi(e)){var a=zr(n,3);e=io(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}},vr=function(t){return Rr((function(e){var n=e.length,r=n,o=Z.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Co(Y);if(o&&!s&&"wrapper"==Fr(a))var s=new Z([],!0)}for(r=s?r:n;++r<n;){a=e[r];var u=Fr(a),l="wrapper"==u?Za(a):i;s=l&&$r(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Fr(l[0])].apply(s,l[3]):1==a.length&&$r(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Hs(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))},mr=function(t,e){return function(n,r){return function(t,e,n,r){return Fe(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}},_r=function(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Va(n),r=Va(r)):(n=Gn(n),r=Gn(r)),o=t(n,r)}return o}},br=function(t){return Rr((function(e){return e=h(e,I(zr())),Ln((function(n){var r=this;return t(e,(function(t){return o(t,r,n)}))}))}))},xr=function(t,e){var n=(e=e===i?" ":Va(e)).length;if(n<2)return n?On(e,t):e;var r=On(e,na(t/q(e)));return F(e)?tr(W(r),0,t).join(""):r.slice(0,t)},wr=function(t){return function(e,n,r){return r&&"number"!=typeof r&&Qr(e,n,r)&&(n=r=i),e=Qi(e),n===i?(n=e,e=0):n=Qi(n),function(t,e,n,r){for(var i=-1,o=la(na((e-t)/(n||1)),0),a=_o(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r=r===i?e<n?1:-1:Qi(r),t)}},Er=function(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=$i(e),n=$i(n)),t(e,n)}},Sr=function(t,e,n,r,o,a,s,u,l,c){var f=8&e;e|=f?$:tt,4&(e&=~(f?tt:$))||(e&=-4);var p=[t,e,o,f?a:i,f?s:i,f?i:a,f?i:s,u,l,c],h=n.apply(i,p);return $r(t)&&ns(h,p),h.placeholder=r,fi(h,t,e)},Pr=function(t){var e=Eo[t];return function(t,n){if(t=$i(t),(n=null==n?0:ca(Ki(n),292))&&aa(t)){var r=(eo(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return+((r=(eo(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}},kr=function(t){return function(e){var n=Ka(e);return n==gt?j(e):n==_t?V(e):function(t,e){return h(e,(function(e){return[e,t[e]]}))}(e,t(e))}},Cr=function(t,e,n,r,a,s,u,l){var c=2&e;if(!c&&"function"!=typeof t)throw new Co(Y);var f=r?r.length:0;if(f||(e&=-97,r=a=i),u=u===i?u:la(Ki(u),0),l=l===i?l:Ki(l),f-=a?a.length:0,e&tt){var p=r,h=a;r=a=i}var d=c?i:Za(t),g=[t,e,n,r,a,p,h,s,u,l];if(d&&ii(g,d),t=g[0],e=g[1],n=g[2],r=g[3],a=g[4],!(l=g[9]=g[9]===i?c?0:t.length:la(g[9]-f,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||e==J?function(t,e,n){var r=yr(t);return function a(){for(var s=arguments.length,u=_o(s),l=s,c=jr(a);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:B(u,c);return(s-=f.length)<n?Sr(t,e,Wa,a.placeholder,i,u,f,i,i,n-s):o(this&&this!==rn&&this instanceof a?r:t,this,u)}}(t,e,l):e!=$&&33!=e||a.length?Wa.apply(i,g):function(t,e,n,r){var i=1&e,a=yr(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=r.length,f=_o(c+u),p=this&&this!==rn&&this instanceof e?a:t;++l<c;)f[l]=r[l];for(;u--;)f[l++]=arguments[++s];return o(p,i?n:this,f)}}(t,e,n,r);else var y=function(t,e,n){var r=1&e,i=yr(t);return function e(){return(this&&this!==rn&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return fi((d?Ba:ns)(y,g),t,e)},Tr=function(t,e,n,r){return t===i||Ni(t,Mo[n])&&!Ro.call(r,n)?e:t},Ir=function(t){return Hi(t)?i:t},Mr=function(t,e,n,r,o,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t),f=a.get(e);if(c&&f)return c==e&&f==t;var p=-1,h=!0,d=2&n?new Ae:i;for(a.set(t,e),a.set(e,t);++p<u;){var g=t[p],y=e[p];if(r)var v=s?r(y,g,p,e,t,a):r(g,y,p,t,e,a);if(v!==i){if(v)continue;h=!1;break}if(d){if(!A(e,(function(t,e){if(!O(d,e)&&(g===t||o(g,t,n,r,a)))return d.push(e)}))){h=!1;break}}else if(g!==y&&!o(g,y,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h},Or=function(t,e,n,r,i,o,a){switch(n){case St:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Et:return!(t.byteLength!=e.byteLength||!o(new Go(t),new Go(e)));case ct:case ft:case yt:return Ni(+t,+e);case pt:return t.name==e.name&&t.message==e.message;case mt:case bt:return t==e+"";case gt:var s=j;case _t:var u=1&r;if(s||(s=U),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=Mr(s(t),s(e),r,i,o,a);return a.delete(t),c;case xt:if(Ta)return Ta.call(t)==Ta.call(e)}return!1},Lr=function(t,e,n,r,o,a){var s=1&n,u=Dr(t),l=u.length;if(l!=Dr(e).length&&!s)return!1;for(var c=l;c--;){var f=u[c];if(!(s?f in e:Ro.call(e,f)))return!1}var p=a.get(t),h=a.get(e);if(p&&h)return p==e&&h==t;var d=!0;a.set(t,e),a.set(e,t);for(var g=s;++c<l;){var y=t[f=u[c]],A=e[f];if(r)var v=s?r(A,y,f,e,t,a):r(y,A,f,t,e,a);if(!(v===i?y===A||o(y,A,n,r,a):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var m=t.constructor,_=e.constructor;m==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _||(d=!1)}return a.delete(t),a.delete(e),d},Rr=function(t){return is(si(t,i,_i),t+"")},Dr=function(t){return Ue(t,io,Ya)},Nr=function(t){return Ue(t,oo,Qa)},Fr=function(t){for(var e=t.name+"",n=xa[e],r=Ro.call(xa,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e},jr=function(t){return(Ro.call(G,"placeholder")?G:t).placeholder},zr=function(){var t=G.iteratee||ho;return t=t===ho?yn:t,arguments.length?t(arguments[0],arguments[1]):t},Br=function(t,e){var n=t.__data__;return Jr(e)?n["string"==typeof e?"string":"hash"]:n.map},Ur=function(t){for(var e=io(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ni(i)]}return e},Vr=function(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return ln(n)?n:i},Gr=function(t){var e=Ro.call(t,Ko),n=t[Ko];try{t[Ko]=i;var r=!0}catch(t){}var o=Fo.call(t);return r&&(e?t[Ko]=n:delete t[Ko]),o},qr=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ca(e,t+a);break;case"takeRight":t=la(t,e-a)}}return{start:t,end:e}},Wr=function(t,e,n){for(var r=-1,i=(e=$n(e,t)).length,o=!1;++r<i;){var a=di(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Vi(i)&&Yr(a,i)&&(Hs(t)||Ws(t))},Hr=function(t){return"function"!=typeof t.constructor||ei(t)?{}:Ma(Wo(t))},Xr=function(t,e,n){var r,i,o,a=t.constructor;switch(e){case Et:return nr(t);case ct:case ft:return new a(+t);case St:return function(t,e){var n=e?nr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case Pt:case kt:case Ct:case Tt:case It:case Mt:case Ot:case Lt:case Rt:return rr(t,n);case gt:return new a;case yt:case bt:return new a(t);case mt:return(o=new(i=t).constructor(i.source,oe.exec(i))).lastIndex=i.lastIndex,o;case _t:return new a;case xt:return r=t,Ta?So(Ta.call(r)):{}}},Zr=function(t){return Hs(t)||Ws(t)||!!(Yo&&t&&t[Yo])},Yr=function(t,e){var n=void 0===t?"undefined":r.default(t);return!!(e=null==e?it:e)&&("number"==n||"symbol"!=n&&ce.test(t))&&t>-1&&t%1==0&&t<e},Qr=function(t,e,n){if(!Gi(n))return!1;var i=void 0===e?"undefined":r.default(e);return!!("number"==i?Fi(n)&&Yr(e,n.length):"string"==i&&e in n)&&Ni(n[e],t)},Kr=function(t,e){if(Hs(t))return!1;var n=void 0===t?"undefined":r.default(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Zi(t))||(Ht.test(t)||!Wt.test(t)||null!=e&&t in So(e))},Jr=function(t){var e=void 0===t?"undefined":r.default(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},$r=function(t){var e=Fr(t),n=G[e];if("function"!=typeof n||!(e in Kt.prototype))return!1;if(t===n)return!0;var r=Za(n);return!!r&&t===r[0]},ti=function(t){return!!No&&No in t},ei=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Mo)},ni=function(t){return t==t&&!Gi(t)},ri=function(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in So(n)))}},ii=function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==et&&8==n||r==et&&n==nt&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var u=t[3];t[3]=u?ar(u,s,e[4]):s,t[4]=u?B(t[3],K):e[4]}return(s=e[5])&&(u=t[5],t[5]=u?sr(u,s,e[6]):s,t[6]=u?B(t[5],K):e[6]),(s=e[7])&&(t[7]=s),r&et&&(t[8]=null==t[8]?e[8]:ca(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},oi=function(t){var e=[];if(null!=t)for(var n in So(t))e.push(n);return e},ai=function(t){return Fo.call(t)},si=function(t,e,n){return e=la(e===i?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=la(r.length-e,0),s=_o(a);++i<a;)s[i]=r[e+i];i=-1;for(var u=_o(e+1);++i<e;)u[i]=r[i];return u[e]=n(s),o(t,this,u)}},ui=function(t,e){return e.length<2?t:Be(t,jn(e,0,-1))},li=function(t,e){for(var n=t.length,r=ca(e.length,n),o=ur(t);r--;){var a=e[r];t[r]=Yr(a,n)?o[a]:i}return t},ci=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},fi=function(t,e,n){var r=e+"";return is(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Jt,"{\n/* [wrapped with "+e+"] */\n")}(r,yi(function(t){var e=t.match($t);return e?e[1].split(te):[]}(r),n)))},pi=function(t){var e=0,n=0;return function(){var r=fa(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}},hi=function(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Mn(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t},di=function(t){if("string"==typeof t||Zi(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},gi=function(t){if(null!=t){try{return Lo.call(t)}catch(t){}try{return t+""}catch(t){}}return""},yi=function(t,e){return s(st,(function(n){var r="_."+n[0];e&n[1]&&!f(t,r)&&t.push(r)})),t.sort()},Ai=function(t){if(t instanceof Kt)return t.clone();var e=new Z(t.__wrapped__,t.__chain__);return e.__actions__=ur(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},vi=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ki(n);return i<0&&(i=la(r+i,0)),m(t,zr(e,3),i)},mi=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=Ki(n),o=n<0?la(r+o,0):ca(o,r-1)),m(t,zr(e,3),o,!0)},_i=function(t){return(null==t?0:t.length)?Da(t,1):[]},bi=function(t){return t&&t.length?t[0]:i},xi=function(t){var e=null==t?0:t.length;return e?t[e-1]:i},wi=function(t,e){return t&&t.length&&e&&e.length?Tn(t,e):t},Ei=function(t){return null==t?t:da.call(t)},Si=function(t){if(!t||!t.length)return[];var e=0;return t=c(t,(function(t){if(ji(t))return e=la(t.length,e),!0})),C(e,(function(e){return h(t,E(e))}))},Pi=function(t,e){if(!t||!t.length)return[];var n=Si(t);return null==e?n:h(n,(function(t){return o(e,i,t)}))},ki=function(t){var e=G(t);return e.__chain__=!0,e},Ci=function(t,e){return e(t)},Ti=function(t,e){return(Hs(t)?s:La)(t,zr(e,3))},Ii=function(t,e){return(Hs(t)?u:Ra)(t,zr(e,3))},Mi=function(t,e){return(Hs(t)?h:wn)(t,zr(e,3))},Oi=function(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Cr(t,et,i,i,i,i,e)},Li=function(t,e){var n;if("function"!=typeof e)throw new Co(Y);return t=Ki(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}},Ri=function(t,e,n){var r,o,a,s,u,l,c=0,f=!1,p=!1,h=!0;if("function"!=typeof t)throw new Co(Y);function d(e){var n=r,a=o;return r=o=i,c=e,s=t.apply(a,n)}function g(t){return c=t,u=rs(A,e),f?d(t):s}function y(t){var n=t-l;return l===i||n>=e||n<0||p&&t-c>=a}function A(){var t=Os();if(y(t))return v(t);u=rs(A,function(t){var n=e-(t-l);return p?ca(n,a-(t-c)):n}(t))}function v(t){return u=i,h&&r?d(t):(r=o=i,s)}function m(){var t=Os(),n=y(t);if(r=arguments,o=this,l=t,n){if(u===i)return g(l);if(p)return qa(u),u=rs(A,e),d(l)}return u===i&&(u=rs(A,e)),s}return e=$i(e)||0,Gi(n)&&(f=!!n.leading,a=(p="maxWait"in n)?la($i(n.maxWait)||0,e):a,h="trailing"in n?!!n.trailing:h),m.cancel=function(){u!==i&&qa(u),c=0,r=l=o=u=i},m.flush=function(){return u===i?s:v(Os())},m},Di=function(t){if("function"!=typeof t)throw new Co(Y);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}},Ni=function(t,e){return t===e||t!=t&&e!=e},Fi=function(t){return null!=t&&Vi(t.length)&&!Bi(t)},ji=function(t){return qi(t)&&Fi(t)},zi=function(t){if(!qi(t))return!1;var e=qe(t);return e==pt||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Hi(t)},Bi=function(t){if(!Gi(t))return!1;var e=qe(t);return e==ht||e==dt||"[object AsyncFunction]"==e||"[object Proxy]"==e},Ui=function(t){return"number"==typeof t&&t==Ki(t)},Vi=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=it},Gi=function(t){var e=void 0===t?"undefined":r.default(t);return null!=t&&("object"==e||"function"==e)},qi=function(t){return null!=t&&"object"==typeof t},Wi=function(t){return"number"==typeof t||qi(t)&&qe(t)==yt},Hi=function(t){if(!qi(t)||qe(t)!=At)return!1;var e=Wo(t);if(null===e)return!0;var n=Ro.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lo.call(n)==jo},Xi=function(t){return"string"==typeof t||!Hs(t)&&qi(t)&&qe(t)==bt},Zi=function(t){return"symbol"==(void 0===t?"undefined":r.default(t))||qi(t)&&qe(t)==xt},Yi=function(t){if(!t)return[];if(Fi(t))return Xi(t)?W(t):ur(t);if(Qo&&t[Qo])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Qo]());var e=Ka(t);return(e==gt?j:e==_t?U:so)(t)},Qi=function(t){return t?(t=$i(t))===rt||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},Ki=function(t){var e=Qi(t),n=e%1;return e==e?n?e-n:e:0},Ji=function(t){return t?Ie(Ki(t),0,at):0},$i=function(t){if("number"==typeof t)return t;if(Zi(t))return ot;if(Gi(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Gi(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=T(t);var n=se.test(t);return n||le.test(t)?tn(t.slice(2),n?2:8):ae.test(t)?ot:+t},to=function(t){return lr(t,oo(t))},eo=function(t){return null==t?"":Va(t)},no=function(t,e,n){var r=null==t?i:Be(t,e);return r===i?n:r},ro=function(t,e){return null!=t&&Wr(t,e,en)},io=function(t){return Fi(t)?me(t):bn(t)},oo=function(t){return Fi(t)?me(t,!0):function(t){if(!Gi(t))return oi(t);var e=ei(t),n=[];for(var r in t)("constructor"!=r||!e&&Ro.call(t,r))&&n.push(r);return n}(t)},ao=function(t,e){if(null==t)return{};var n=h(Nr(t),(function(t){return[t]}));return e=zr(e),Cn(t,n,(function(t,n){return e(t,n[0])}))},so=function(t){return null==t?[]:M(t,io(t))},uo=function(t){return Su(eo(t).toLowerCase())},lo=function(t){return(t=eo(t))&&t.replace(fe,An).replace(Ge,"")},co=function(t,e,n){return t=eo(t),(e=n?i:e)===i?function(t){return Xe.test(t)}(t)?function(t){return t.match(We)||[]}(t):function(t){return t.match(ee)||[]}(t):t.match(e)||[]},fo=function(t){return function(){return t}},po=function(t){return t},ho=function(t){return yn("function"==typeof t?t:Oa(t,1))},go=function(t,e,n){var r=io(e),i=ze(e,r);null!=n||Gi(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=ze(e,io(e)));var o=!(Gi(n)&&"chain"in n&&!n.chain),a=Bi(t);return s(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=ur(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,d([this.value()],arguments))})})),t},yo=function(){},Ao=function(t){return Kr(t)?E(di(t)):function(t){return function(e){return Be(e,t)}}(t)},vo=function(){return[]},mo=function(){return!1},_o=(e=null==e?rn:_n.defaults(rn.Object(),e,_n.pick(rn,Ze))).Array,bo=e.Date,xo=e.Error,wo=e.Function,Eo=e.Math,So=e.Object,Po=e.RegExp,ko=e.String,Co=e.TypeError,To=_o.prototype,Io=wo.prototype,Mo=So.prototype,Oo=e["__core-js_shared__"],Lo=Io.toString,Ro=Mo.hasOwnProperty,Do=0,No=(n=/[^.]+$/.exec(Oo&&Oo.keys&&Oo.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Fo=Mo.toString,jo=Lo.call(So),zo=rn._,Bo=Po("^"+Lo.call(Ro).replace(Zt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uo=sn?e.Buffer:i,Vo=e.Symbol,Go=e.Uint8Array,qo=Uo?Uo.allocUnsafe:i,Wo=z(So.getPrototypeOf,So),Ho=So.create,Xo=Mo.propertyIsEnumerable,Zo=To.splice,Yo=Vo?Vo.isConcatSpreadable:i,Qo=Vo?Vo.iterator:i,Ko=Vo?Vo.toStringTag:i,Jo=function(){try{var t=Vr(So,"defineProperty");return t({},"",{}),t}catch(t){}}(),$o=e.clearTimeout!==rn.clearTimeout&&e.clearTimeout,ta=bo&&bo.now!==rn.Date.now&&bo.now,ea=e.setTimeout!==rn.setTimeout&&e.setTimeout,na=Eo.ceil,ra=Eo.floor,ia=So.getOwnPropertySymbols,oa=Uo?Uo.isBuffer:i,aa=e.isFinite,sa=To.join,ua=z(So.keys,So),la=Eo.max,ca=Eo.min,fa=bo.now,pa=e.parseInt,ha=Eo.random,da=To.reverse,ga=Vr(e,"DataView"),ya=Vr(e,"Map"),Aa=Vr(e,"Promise"),va=Vr(e,"Set"),ma=Vr(e,"WeakMap"),_a=Vr(So,"create"),ba=ma&&new ma,xa={},wa=gi(ga),Ea=gi(ya),Sa=gi(Aa),Pa=gi(va),ka=gi(ma),Ca=Vo?Vo.prototype:i,Ta=Ca?Ca.valueOf:i,Ia=Ca?Ca.toString:i,Ma=(S=function(){},function(t){if(!Gi(t))return{};if(Ho)return Ho(t);S.prototype=t;var e=new S;return S.prototype=i,e});function Oa(t,e,n,r,o,a){var u,l=1&e,c=2&e,f=4&e;if(n&&(u=o?n(t,r,o,a):n(t)),u!==i)return u;if(!Gi(t))return t;var p=Hs(t);if(p){if(u=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ro.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return ur(t,u)}else{var h=Ka(t),d=h==ht||h==dt;if(Zs(t))return er(t,l);if(h==At||h==ut||d&&!o){if(u=c||d?{}:Hr(t),!l)return c?function(t,e){return lr(t,Qa(t),e)}(t,function(t,e){return t&&lr(e,oo(e),t)}(u,t)):function(t,e){return lr(t,Ya(t),e)}(t,ke(u,t))}else{if(!Ke[h])return o?t:{};u=Xr(t,h,l)}}a||(a=new ve);var g=a.get(t);if(g)return g;a.set(t,u),Js(t)?t.forEach((function(r){u.add(Oa(r,e,n,r,t,a))})):Qs(t)&&t.forEach((function(r,i){u.set(i,Oa(r,e,n,i,t,a))}));var y=p?i:(f?c?Nr:Dr:c?oo:io)(t);return s(y||t,(function(r,i){y&&(r=t[i=r]),Ee(u,i,Oa(r,e,n,i,t,a))})),u}G.templateSettings={escape:Vt,evaluate:Gt,interpolate:qt,variable:"",imports:{_:G}},(G.prototype=X.prototype).constructor=G,Z.prototype=Ma(X.prototype),Z.prototype.constructor=Z,Kt.prototype=Ma(X.prototype),Kt.prototype.constructor=Kt,de.prototype.clear=function(){this.__data__=_a?_a(null):{},this.size=0},de.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},de.prototype.get=function(t){var e=this.__data__;if(_a){var n=e[t];return n===Q?i:n}return Ro.call(e,t)?e[t]:i},de.prototype.has=function(t){var e=this.__data__;return _a?e[t]!==i:Ro.call(e,t)},de.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_a&&e===i?Q:e,this},ge.prototype.clear=function(){this.__data__=[],this.size=0},ge.prototype.delete=function(t){var e=this.__data__,n=Se(e,t);return!(n<0)&&(n==e.length-1?e.pop():Zo.call(e,n,1),--this.size,!0)},ge.prototype.get=function(t){var e=this.__data__,n=Se(e,t);return n<0?i:e[n][1]},ge.prototype.has=function(t){return Se(this.__data__,t)>-1},ge.prototype.set=function(t,e){var n=this.__data__,r=Se(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},ye.prototype.clear=function(){this.size=0,this.__data__={hash:new de,map:new(ya||ge),string:new de}},ye.prototype.delete=function(t){var e=Br(this,t).delete(t);return this.size-=e?1:0,e},ye.prototype.get=function(t){return Br(this,t).get(t)},ye.prototype.has=function(t){return Br(this,t).has(t)},ye.prototype.set=function(t,e){var n=Br(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ae.prototype.add=Ae.prototype.push=function(t){return this.__data__.set(t,Q),this},Ae.prototype.has=function(t){return this.__data__.has(t)},ve.prototype.clear=function(){this.__data__=new ge,this.size=0},ve.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ve.prototype.get=function(t){return this.__data__.get(t)},ve.prototype.has=function(t){return this.__data__.has(t)},ve.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ge){var r=n.__data__;if(!ya||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ye(r)}return n.set(t,e),this.size=n.size,this};var La=pr(Fe),Ra=pr(je,!0);function Da(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Zr),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Da(s,e-1,n,r,i):d(i,s):r||(i[i.length]=s)}return i}var Na=hr(),Fa=hr(!0);function ja(t,e,n,r,i){return t===e||(null==t||null==e||!qi(t)&&!qi(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var a=Hs(t),s=Hs(e),u=a?lt:Ka(t),l=s?lt:Ka(e),c=(u=u==ut?At:u)==At,f=(l=l==ut?At:l)==At,p=u==l;if(p&&Zs(t)){if(!Zs(e))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new ve),a||$s(t)?Mr(t,e,n,r,i,o):Or(t,e,u,n,r,i,o);if(!(1&n)){var h=c&&Ro.call(t,"__wrapped__"),d=f&&Ro.call(e,"__wrapped__");if(h||d){var g=h?t.value():t,y=d?e.value():e;return o||(o=new ve),i(g,y,n,r,o)}}return!!p&&(o||(o=new ve),Lr(t,e,n,r,i,o))}(t,e,n,r,ja,i))}function za(t,e,n,r,o){t!==e&&Na(e,(function(a,s){if(o||(o=new ve),Gi(a))!function(t,e,n,r,o,a,s){var u=ci(t,n),l=ci(e,n),c=s.get(l);if(c)we(t,n,c);else{var f=a?a(u,l,n+"",t,e,s):i,p=f===i;if(p){var h=Hs(l),d=!h&&Zs(l),g=!h&&!d&&$s(l);f=l,h||d||g?Hs(u)?f=u:ji(u)?f=ur(u):d?(p=!1,f=er(l,!0)):g?(p=!1,f=rr(l,!0)):f=[]:Hi(l)||Ws(l)?(f=u,Ws(u)?f=to(u):Gi(u)&&!Bi(u)||(f=Hr(l))):p=!1}p&&(s.set(l,f),o(f,l,r,a,s),s.delete(l)),we(t,n,f)}}(t,e,s,n,za,r,o);else{var u=r?r(ci(t,s),a,s+"",t,e,o):i;u===i&&(u=a),we(t,s,u)}}),oo)}var Ba=ba?function(t,e){return ba.set(t,e),t}:po,Ua=Jo?function(t,e){return Jo(t,"toString",{configurable:!0,enumerable:!1,value:fo(e),writable:!0})}:po;function Va(t){if("string"==typeof t)return t;if(Hs(t))return h(t,Va)+"";if(Zi(t))return Ia?Ia.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}var Ga=Ln,qa=$o||function(t){return rn.clearTimeout(t)};function Wa(t,e,n,r,o,a,s,u,l,c){var f=e&et,p=1&e,h=2&e,d=24&e,g=512&e,y=h?i:yr(t);return function i(){for(var A=arguments.length,v=_o(A),m=A;m--;)v[m]=arguments[m];if(d)var _=jr(i),b=D(v,_);if(r&&(v=ar(v,r,o,d)),a&&(v=sr(v,a,s,d)),A-=b,d&&A<c){var x=B(v,_);return Sr(t,e,Wa,i.placeholder,n,v,x,u,l,c-A)}var w=p?n:this,E=h?w[t]:t;return A=v.length,u?v=li(v,u):g&&A>1&&v.reverse(),f&&l<A&&(v.length=l),this&&this!==rn&&this instanceof i&&(E=y||yr(E)),E.apply(w,v)}}var Ha=va&&1/U(new va([,-0]))[1]==rt?function(t){return new va(t)}:yo;function Xa(t,e,n,r,o,a){return Gi(t)&&Gi(e)&&(a.set(e,t),za(t,e,i,Xa,a),a.delete(e)),t}var Za=ba?function(t){return ba.get(t)}:yo,Ya=ia?function(t){return null==t?[]:(t=So(t),c(ia(t),(function(e){return Xo.call(t,e)})))}:vo,Qa=ia?function(t){for(var e=[];t;)d(e,Ya(t)),t=Wo(t);return e}:vo,Ka=qe;(ga&&Ka(new ga(new ArrayBuffer(1)))!=St||ya&&Ka(new ya)!=gt||Aa&&Ka(Aa.resolve())!=vt||va&&Ka(new va)!=_t||ma&&Ka(new ma)!=wt)&&(Ka=function(t){var e=qe(t),n=e==At?t.constructor:i,r=n?gi(n):"";if(r)switch(r){case wa:return St;case Ea:return gt;case Sa:return vt;case Pa:return _t;case ka:return wt}return e});var Ja,$a,ts,es=Oo?Bi:mo,ns=pi(Ba),rs=ea||function(t,e){return rn.setTimeout(t,e)},is=pi(Ua),os=(Ja=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Xt,(function(t,n,r,i){e.push(r?i.replace(re,"$1"):n||t)})),e},$a=Fs(Ja,(function(t){return 500===ts.size&&ts.clear(),t})),ts=$a.cache,$a),as=Ln((function(t,e){return ji(t)?Le(t,Da(e,1,ji,!0)):[]})),ss=Ln((function(t,e){var n=xi(e);return ji(n)&&(n=i),ji(t)?Le(t,Da(e,1,ji,!0),zr(n,2)):[]})),us=Ln((function(t,e){var n=xi(e);return ji(n)&&(n=i),ji(t)?Le(t,Da(e,1,ji,!0),i,n):[]})),ls=Ln((function(t){var e=h(t,Kn);return e.length&&e[0]===t[0]?nn(e):[]})),cs=Ln((function(t){var e=xi(t),n=h(t,Kn);return e===xi(n)?e=i:n.pop(),n.length&&n[0]===t[0]?nn(n,zr(e,2)):[]})),fs=Ln((function(t){var e=xi(t),n=h(t,Kn);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?nn(n,i,e):[]})),ps=Ln(wi),hs=Rr((function(t,e){var n=null==t?0:t.length,r=Te(t,e);return In(t,h(e,(function(t){return Yr(t,n)?+t:t})).sort(ir)),r})),ds=Ln((function(t){return qn(Da(t,1,ji,!0))})),gs=Ln((function(t){var e=xi(t);return ji(e)&&(e=i),qn(Da(t,1,ji,!0),zr(e,2))})),ys=Ln((function(t){var e=xi(t);return e="function"==typeof e?e:i,qn(Da(t,1,ji,!0),i,e)})),As=Ln((function(t,e){return ji(t)?Le(t,e):[]})),vs=Ln((function(t){return Yn(c(t,ji))})),ms=Ln((function(t){var e=xi(t);return ji(e)&&(e=i),Yn(c(t,ji),zr(e,2))})),_s=Ln((function(t){var e=xi(t);return e="function"==typeof e?e:i,Yn(c(t,ji),i,e)})),bs=Ln(Si),xs=Ln((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,Pi(t,n)})),ws=Rr((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return Te(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Kt&&Yr(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Ci,args:[o],thisArg:i}),new Z(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),Es=cr((function(t,e,n){Ro.call(t,n)?++t[n]:Ce(t,n,1)})),Ss=Ar(vi),Ps=Ar(mi),ks=cr((function(t,e,n){Ro.call(t,n)?t[n].push(e):Ce(t,n,[e])})),Cs=Ln((function(t,e,n){var r=-1,i="function"==typeof e,a=Fi(t)?_o(t.length):[];return La(t,(function(t){a[++r]=i?o(e,t,n):on(t,e,n)})),a})),Ts=cr((function(t,e,n){Ce(t,n,e)})),Is=cr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ms=Ln((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Qr(t,e[0],e[1])?e=[]:n>2&&Qr(e[0],e[1],e[2])&&(e=[e[0]]),kn(t,Da(e,1),[])})),Os=ta||function(){return rn.Date.now()},Ls=Ln((function(t,e,n){var r=1;if(n.length){var i=B(n,jr(Ls));r|=$}return Cr(t,r,e,n,i)})),Rs=Ln((function(t,e,n){var r=3;if(n.length){var i=B(n,jr(Rs));r|=$}return Cr(e,r,t,n,i)}));var Ds=Ln((function(t,e){return Oe(t,1,e)})),Ns=Ln((function(t,e,n){return Oe(t,$i(e)||0,n)}));function Fs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Co(Y);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Fs.Cache||ye),n}Fs.Cache=ye;var js,zs=Ga((function(t,e){var n=(e=1==e.length&&Hs(e[0])?h(e[0],I(zr())):h(Da(e,1),I(zr()))).length;return Ln((function(r){for(var i=-1,a=ca(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return o(t,this,r)}))})),Bs=Ln((function(t,e){var n=B(e,jr(Bs));return Cr(t,$,i,e,n)})),Us=Ln((function(t,e){var n=B(e,jr(Us));return Cr(t,tt,i,e,n)})),Vs=Rr((function(t,e){return Cr(t,nt,i,i,i,e)})),Gs=Er(He),qs=Er((function(t,e){return t>=e})),Ws=an(function(){return arguments}())?an:function(t){return qi(t)&&Ro.call(t,"callee")&&!Xo.call(t,"callee")},Hs=_o.isArray,Xs=cn?I(cn):function(t){return qi(t)&&qe(t)==Et},Zs=oa||mo,Ys=fn?I(fn):function(t){return qi(t)&&qe(t)==ft},Qs=pn?I(pn):function(t){return qi(t)&&Ka(t)==gt},Ks=hn?I(hn):function(t){return qi(t)&&qe(t)==mt},Js=dn?I(dn):function(t){return qi(t)&&Ka(t)==_t},$s=gn?I(gn):function(t){return qi(t)&&Vi(t.length)&&!!Qe[qe(t)]},tu=Er(xn),eu=Er((function(t,e){return t<=e})),nu=fr((function(t,e){if(ei(e)||Fi(e))lr(e,io(e),t);else for(var n in e)Ro.call(e,n)&&Ee(t,n,e[n])})),ru=fr((function(t,e){lr(e,oo(e),t)})),iu=fr((function(t,e,n,r){lr(e,oo(e),t,r)})),ou=fr((function(t,e,n,r){lr(e,io(e),t,r)})),au=Rr(Te),su=Ln((function(t,e){t=So(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&Qr(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=oo(a),u=-1,l=s.length;++u<l;){var c=s[u],f=t[c];(f===i||Ni(f,Mo[c])&&!Ro.call(t,c))&&(t[c]=a[c])}return t})),uu=Ln((function(t){return t.push(i,Xa),o(hu,i,t)})),lu=mr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Fo.call(e)),t[e]=n}),fo(po)),cu=mr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Fo.call(e)),Ro.call(t,e)?t[e].push(n):t[e]=[n]}),zr),fu=Ln(on),pu=fr((function(t,e,n){za(t,e,n)})),hu=fr((function(t,e,n,r){za(t,e,n,r)})),du=Rr((function(t,e){var n={};if(null==t)return n;var r=!1;e=h(e,(function(e){return e=$n(e,t),r||(r=e.length>1),e})),lr(t,Nr(t),n),r&&(n=Oa(n,7,Ir));for(var i=e.length;i--;)Wn(n,e[i]);return n})),gu=Rr((function(t,e){return null==t?{}:function(t,e){return Cn(t,e,(function(e,n){return ro(t,n)}))}(t,e)})),yu=kr(io),Au=kr(oo),vu=gr((function(t,e,n){return e=e.toLowerCase(),t+(n?uo(e):e)})),mu=gr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),_u=gr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),bu=dr("toLowerCase"),xu=gr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),wu=gr((function(t,e,n){return t+(n?" ":"")+Su(e)})),Eu=gr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Su=dr("toUpperCase"),Pu=Ln((function(t,e){try{return o(t,i,e)}catch(t){return zi(t)?t:new xo(t)}})),ku=Rr((function(t,e){return s(e,(function(e){e=di(e),Ce(t,e,Ls(t[e],t))})),t})),Cu=vr(),Tu=vr(!0),Iu=Ln((function(t,e){return function(n){return on(n,t,e)}})),Mu=Ln((function(t,e){return function(n){return on(t,n,e)}})),Ou=br(h),Lu=br(l),Ru=br(A),Du=wr(),Nu=wr(!0),Fu=_r((function(t,e){return t+e}),0),ju=Pr("ceil"),zu=_r((function(t,e){return t/e}),1),Bu=Pr("floor"),Uu=_r((function(t,e){return t*e}),1),Vu=Pr("round"),Gu=_r((function(t,e){return t-e}),0);return G.after=function(t,e){if("function"!=typeof e)throw new Co(Y);return t=Ki(t),function(){if(--t<1)return e.apply(this,arguments)}},G.ary=Oi,G.assign=nu,G.assignIn=ru,G.assignInWith=iu,G.assignWith=ou,G.at=au,G.before=Li,G.bind=Ls,G.bindAll=ku,G.bindKey=Rs,G.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Hs(t)?t:[t]},G.chain=ki,G.chunk=function(t,e,n){e=(n?Qr(t,e,n):e===i)?1:la(Ki(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,a=0,s=_o(na(r/e));o<r;)s[a++]=jn(t,o,o+=e);return s},G.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},G.concat=function(){var t=arguments.length;if(!t)return[];for(var e=_o(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return d(Hs(n)?ur(n):[n],Da(e,1))},G.cond=function(t){var e=null==t?0:t.length,n=zr();return t=e?h(t,(function(t){if("function"!=typeof t[1])throw new Co(Y);return[n(t[0]),t[1]]})):[],Ln((function(n){for(var r=-1;++r<e;){var i=t[r];if(o(i[0],this,n))return o(i[1],this,n)}}))},G.conforms=function(t){return function(t){var e=io(t);return function(n){return Me(n,t,e)}}(Oa(t,1))},G.constant=fo,G.countBy=Es,G.create=function(t,e){var n=Ma(t);return null==e?n:ke(n,e)},G.curry=function t(e,n,r){var o=Cr(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},G.curryRight=function t(e,n,r){var o=Cr(e,J,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},G.debounce=Ri,G.defaults=su,G.defaultsDeep=uu,G.defer=Ds,G.delay=Ns,G.difference=as,G.differenceBy=ss,G.differenceWith=us,G.drop=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===i?1:Ki(e),jn(t,e<0?0:e,r)):[]},G.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===i?1:Ki(e),jn(t,0,(e=r-e)<0?0:e)):[]},G.dropRightWhile=function(t,e){return t&&t.length?Xn(t,zr(e,3),!0,!0):[]},G.dropWhile=function(t,e){return t&&t.length?Xn(t,zr(e,3),!0):[]},G.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Qr(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=Ki(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:Ki(r))<0&&(r+=o),r=n>r?0:Ji(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},G.filter=function(t,e){return(Hs(t)?c:Ne)(t,zr(e,3))},G.flatMap=function(t,e){return Da(Mi(t,e),1)},G.flatMapDeep=function(t,e){return Da(Mi(t,e),rt)},G.flatMapDepth=function(t,e,n){return n=n===i?1:Ki(n),Da(Mi(t,e),n)},G.flatten=_i,G.flattenDeep=function(t){return(null==t?0:t.length)?Da(t,rt):[]},G.flattenDepth=function(t,e){return(null==t?0:t.length)?Da(t,e=e===i?1:Ki(e)):[]},G.flip=function(t){return Cr(t,512)},G.flow=Cu,G.flowRight=Tu,G.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},G.functions=function(t){return null==t?[]:ze(t,io(t))},G.functionsIn=function(t){return null==t?[]:ze(t,oo(t))},G.groupBy=ks,G.initial=function(t){return(null==t?0:t.length)?jn(t,0,-1):[]},G.intersection=ls,G.intersectionBy=cs,G.intersectionWith=fs,G.invert=lu,G.invertBy=cu,G.invokeMap=Cs,G.iteratee=ho,G.keyBy=Ts,G.keys=io,G.keysIn=oo,G.map=Mi,G.mapKeys=function(t,e){var n={};return e=zr(e,3),Fe(t,(function(t,r,i){Ce(n,e(t,r,i),t)})),n},G.mapValues=function(t,e){var n={};return e=zr(e,3),Fe(t,(function(t,r,i){Ce(n,r,e(t,r,i))})),n},G.matches=function(t){return En(Oa(t,1))},G.matchesProperty=function(t,e){return Sn(t,Oa(e,1))},G.memoize=Fs,G.merge=pu,G.mergeWith=hu,G.method=Iu,G.methodOf=Mu,G.mixin=go,G.negate=Di,G.nthArg=function(t){return t=Ki(t),Ln((function(e){return Pn(e,t)}))},G.omit=du,G.omitBy=function(t,e){return ao(t,Di(zr(e)))},G.once=function(t){return Li(2,t)},G.orderBy=function(t,e,n,r){return null==t?[]:(Hs(e)||(e=null==e?[]:[e]),Hs(n=r?i:n)||(n=null==n?[]:[n]),kn(t,e,n))},G.over=Ou,G.overArgs=zs,G.overEvery=Lu,G.overSome=Ru,G.partial=Bs,G.partialRight=Us,G.partition=Is,G.pick=gu,G.pickBy=ao,G.property=Ao,G.propertyOf=function(t){return function(e){return null==t?i:Be(t,e)}},G.pull=ps,G.pullAll=wi,G.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Tn(t,e,zr(n,2)):t},G.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Tn(t,e,i,n):t},G.pullAt=hs,G.range=Du,G.rangeRight=Nu,G.rearg=Vs,G.reject=function(t,e){return(Hs(t)?c:Ne)(t,Di(zr(e,3)))},G.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=zr(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return In(t,i),n},G.rest=function(t,e){if("function"!=typeof t)throw new Co(Y);return e=e===i?e:Ki(e),Ln(t,e)},G.reverse=Ei,G.sampleSize=function(t,e,n){return e=(n?Qr(t,e,n):e===i)?1:Ki(e),(Hs(t)?be:Dn)(t,e)},G.set=function(t,e,n){return null==t?t:Nn(t,e,n)},G.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Nn(t,e,n,r)},G.shuffle=function(t){return(Hs(t)?xe:Fn)(t)},G.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Qr(t,e,n)?(e=0,n=r):(e=null==e?0:Ki(e),n=n===i?r:Ki(n)),jn(t,e,n)):[]},G.sortBy=Ms,G.sortedUniq=function(t){return t&&t.length?Vn(t):[]},G.sortedUniqBy=function(t,e){return t&&t.length?Vn(t,zr(e,2)):[]},G.split=function(t,e,n){return n&&"number"!=typeof n&&Qr(t,e,n)&&(e=n=i),(n=n===i?at:n>>>0)?(t=eo(t))&&("string"==typeof e||null!=e&&!Ks(e))&&!(e=Va(e))&&F(t)?tr(W(t),0,n):t.split(e,n):[]},G.spread=function(t,e){if("function"!=typeof t)throw new Co(Y);return e=null==e?0:la(Ki(e),0),Ln((function(n){var r=n[e],i=tr(n,0,e);return r&&d(i,r),o(t,this,i)}))},G.tail=function(t){var e=null==t?0:t.length;return e?jn(t,1,e):[]},G.take=function(t,e,n){return t&&t.length?(e=n||e===i?1:Ki(e),jn(t,0,e<0?0:e)):[]},G.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===i?1:Ki(e),jn(t,(e=r-e)<0?0:e,r)):[]},G.takeRightWhile=function(t,e){return t&&t.length?Xn(t,zr(e,3),!1,!0):[]},G.takeWhile=function(t,e){return t&&t.length?Xn(t,zr(e,3)):[]},G.tap=function(t,e){return e(t),t},G.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Co(Y);return Gi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ri(t,e,{leading:r,maxWait:e,trailing:i})},G.thru=Ci,G.toArray=Yi,G.toPairs=yu,G.toPairsIn=Au,G.toPath=function(t){return Hs(t)?h(t,di):Zi(t)?[t]:ur(os(eo(t)))},G.toPlainObject=to,G.transform=function(t,e,n){var r=Hs(t),i=r||Zs(t)||$s(t);if(e=zr(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Gi(t)&&Bi(o)?Ma(Wo(t)):{}}return(i?s:Fe)(t,(function(t,r,i){return e(n,t,r,i)})),n},G.unary=function(t){return Oi(t,1)},G.union=ds,G.unionBy=gs,G.unionWith=ys,G.uniq=function(t){return t&&t.length?qn(t):[]},G.uniqBy=function(t,e){return t&&t.length?qn(t,zr(e,2)):[]},G.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?qn(t,i,e):[]},G.unset=function(t,e){return null==t||Wn(t,e)},G.unzip=Si,G.unzipWith=Pi,G.update=function(t,e,n){return null==t?t:Hn(t,e,Jn(n))},G.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Hn(t,e,Jn(n),r)},G.values=so,G.valuesIn=function(t){return null==t?[]:M(t,oo(t))},G.without=As,G.words=co,G.wrap=function(t,e){return Bs(Jn(e),t)},G.xor=vs,G.xorBy=ms,G.xorWith=_s,G.zip=bs,G.zipObject=function(t,e){return Qn(t||[],e||[],Ee)},G.zipObjectDeep=function(t,e){return Qn(t||[],e||[],Nn)},G.zipWith=xs,G.entries=yu,G.entriesIn=Au,G.extend=ru,G.extendWith=iu,go(G,G),G.add=Fu,G.attempt=Pu,G.camelCase=vu,G.capitalize=uo,G.ceil=ju,G.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=$i(n))==n?n:0),e!==i&&(e=(e=$i(e))==e?e:0),Ie($i(t),e,n)},G.clone=function(t){return Oa(t,4)},G.cloneDeep=function(t){return Oa(t,5)},G.cloneDeepWith=function(t,e){return Oa(t,5,e="function"==typeof e?e:i)},G.cloneWith=function(t,e){return Oa(t,4,e="function"==typeof e?e:i)},G.conformsTo=function(t,e){return null==e||Me(t,e,io(e))},G.deburr=lo,G.defaultTo=function(t,e){return null==t||t!=t?e:t},G.divide=zu,G.endsWith=function(t,e,n){t=eo(t),e=Va(e);var r=t.length,o=n=n===i?r:Ie(Ki(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},G.eq=Ni,G.escape=function(t){return(t=eo(t))&&Ut.test(t)?t.replace(zt,vn):t},G.escapeRegExp=function(t){return(t=eo(t))&&Yt.test(t)?t.replace(Zt,"\\$&"):t},G.every=function(t,e,n){var r=Hs(t)?l:Re;return n&&Qr(t,e,n)&&(e=i),r(t,zr(e,3))},G.find=Ss,G.findIndex=vi,G.findKey=function(t,e){return v(t,zr(e,3),Fe)},G.findLast=Ps,G.findLastIndex=mi,G.findLastKey=function(t,e){return v(t,zr(e,3),je)},G.floor=Bu,G.forEach=Ti,G.forEachRight=Ii,G.forIn=function(t,e){return null==t?t:Na(t,zr(e,3),oo)},G.forInRight=function(t,e){return null==t?t:Fa(t,zr(e,3),oo)},G.forOwn=function(t,e){return t&&Fe(t,zr(e,3))},G.forOwnRight=function(t,e){return t&&je(t,zr(e,3))},G.get=no,G.gt=Gs,G.gte=qs,G.has=function(t,e){return null!=t&&Wr(t,e,Je)},G.hasIn=ro,G.head=bi,G.identity=po,G.includes=function(t,e,n,r){t=Fi(t)?t:so(t),n=n&&!r?Ki(n):0;var i=t.length;return n<0&&(n=la(i+n,0)),Xi(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&_(t,e,n)>-1},G.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ki(n);return i<0&&(i=la(r+i,0)),_(t,e,i)},G.inRange=function(t,e,n){return e=Qi(e),n===i?(n=e,e=0):n=Qi(n),function(t,e,n){return t>=ca(e,n)&&t<la(e,n)}(t=$i(t),e,n)},G.invoke=fu,G.isArguments=Ws,G.isArray=Hs,G.isArrayBuffer=Xs,G.isArrayLike=Fi,G.isArrayLikeObject=ji,G.isBoolean=function(t){return!0===t||!1===t||qi(t)&&qe(t)==ct},G.isBuffer=Zs,G.isDate=Ys,G.isElement=function(t){return qi(t)&&1===t.nodeType&&!Hi(t)},G.isEmpty=function(t){if(null==t)return!0;if(Fi(t)&&(Hs(t)||"string"==typeof t||"function"==typeof t.splice||Zs(t)||$s(t)||Ws(t)))return!t.length;var e=Ka(t);if(e==gt||e==_t)return!t.size;if(ei(t))return!bn(t).length;for(var n in t)if(Ro.call(t,n))return!1;return!0},G.isEqual=function(t,e){return ja(t,e)},G.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?ja(t,e,i,n):!!r},G.isError=zi,G.isFinite=function(t){return"number"==typeof t&&aa(t)},G.isFunction=Bi,G.isInteger=Ui,G.isLength=Vi,G.isMap=Qs,G.isMatch=function(t,e){return t===e||un(t,e,Ur(e))},G.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,un(t,e,Ur(e),n)},G.isNaN=function(t){return Wi(t)&&t!=+t},G.isNative=function(t){if(es(t))throw new xo("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ln(t)},G.isNil=function(t){return null==t},G.isNull=function(t){return null===t},G.isNumber=Wi,G.isObject=Gi,G.isObjectLike=qi,G.isPlainObject=Hi,G.isRegExp=Ks,G.isSafeInteger=function(t){return Ui(t)&&t>=-9007199254740991&&t<=it},G.isSet=Js,G.isString=Xi,G.isSymbol=Zi,G.isTypedArray=$s,G.isUndefined=function(t){return t===i},G.isWeakMap=function(t){return qi(t)&&Ka(t)==wt},G.isWeakSet=function(t){return qi(t)&&"[object WeakSet]"==qe(t)},G.join=function(t,e){return null==t?"":sa.call(t,e)},G.kebabCase=mu,G.last=xi,G.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=Ki(n))<0?la(r+o,0):ca(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):m(t,x,o,!0)},G.lowerCase=_u,G.lowerFirst=bu,G.lt=tu,G.lte=eu,G.max=function(t){return t&&t.length?De(t,po,He):i},G.maxBy=function(t,e){return t&&t.length?De(t,zr(e,2),He):i},G.mean=function(t){return w(t,po)},G.meanBy=function(t,e){return w(t,zr(e,2))},G.min=function(t){return t&&t.length?De(t,po,xn):i},G.minBy=function(t,e){return t&&t.length?De(t,zr(e,2),xn):i},G.stubArray=vo,G.stubFalse=mo,G.stubObject=function(){return{}},G.stubString=function(){return""},G.stubTrue=function(){return!0},G.multiply=Uu,G.nth=function(t,e){return t&&t.length?Pn(t,Ki(e)):i},G.noConflict=function(){return rn._===this&&(rn._=zo),this},G.noop=yo,G.now=Os,G.pad=function(t,e,n){t=eo(t);var r=(e=Ki(e))?q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return xr(ra(i),n)+t+xr(na(i),n)},G.padEnd=function(t,e,n){t=eo(t);var r=(e=Ki(e))?q(t):0;return e&&r<e?t+xr(e-r,n):t},G.padStart=function(t,e,n){t=eo(t);var r=(e=Ki(e))?q(t):0;return e&&r<e?xr(e-r,n)+t:t},G.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),pa(eo(t).replace(Qt,""),e||0)},G.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Qr(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=Qi(t),e===i?(e=t,t=0):e=Qi(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=ha();return ca(t+o*(e-t+$e("1e-"+((o+"").length-1))),e)}return Mn(t,e)},G.reduce=function(t,e,n){var r=Hs(t)?g:P,i=arguments.length<3;return r(t,zr(e,4),n,i,La)},G.reduceRight=function(t,e,n){var r=Hs(t)?y:P,i=arguments.length<3;return r(t,zr(e,4),n,i,Ra)},G.repeat=function(t,e,n){return e=(n?Qr(t,e,n):e===i)?1:Ki(e),On(eo(t),e)},G.replace=function(){var t=arguments,e=eo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},G.result=function(t,e,n){var r=-1,o=(e=$n(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[di(e[r])];a===i&&(r=o,a=n),t=Bi(a)?a.call(t):a}return t},G.round=Vu,G.runInContext=t,G.sample=function(t){return(Hs(t)?_e:Rn)(t)},G.size=function(t){if(null==t)return 0;if(Fi(t))return Xi(t)?q(t):t.length;var e=Ka(t);return e==gt||e==_t?t.size:bn(t).length},G.snakeCase=xu,G.some=function(t,e,n){var r=Hs(t)?A:zn;return n&&Qr(t,e,n)&&(e=i),r(t,zr(e,3))},G.sortedIndex=function(t,e){return Bn(t,e)},G.sortedIndexBy=function(t,e,n){return Un(t,e,zr(n,2))},G.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Bn(t,e);if(r<n&&Ni(t[r],e))return r}return-1},G.sortedLastIndex=function(t,e){return Bn(t,e,!0)},G.sortedLastIndexBy=function(t,e,n){return Un(t,e,zr(n,2),!0)},G.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Bn(t,e,!0)-1;if(Ni(t[n],e))return n}return-1},G.startCase=wu,G.startsWith=function(t,e,n){return t=eo(t),n=null==n?0:Ie(Ki(n),0,t.length),e=Va(e),t.slice(n,n+e.length)==e},G.subtract=Gu,G.sum=function(t){return t&&t.length?k(t,po):0},G.sumBy=function(t,e){return t&&t.length?k(t,zr(e,2)):0},G.template=function(t,e,n){var r=G.templateSettings;n&&Qr(t,e,n)&&(e=i),t=eo(t),e=iu({},e,r,Tr);var o,a,s=iu({},e.imports,r.imports,Tr),u=io(s),l=M(s,u),c=0,f=e.interpolate||pe,p="__p += '",h=Po((e.escape||pe).source+"|"+f.source+"|"+(f===qt?ie:pe).source+"|"+(e.evaluate||pe).source+"|$","g"),d="//# sourceURL="+(Ro.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ye+"]")+"\n";t.replace(h,(function(e,n,r,i,s,u){return r||(r=i),p+=t.slice(c,u).replace(he,N),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),p+="';\n";var g=Ro.call(e,"variable")&&e.variable;if(g){if(ne.test(g))throw new xo("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(Dt,""):p).replace(Nt,"$1").replace(Ft,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Pu((function(){return wo(u,d+"return "+p).apply(i,l)}));if(y.source=p,zi(y))throw y;return y},G.times=function(t,e){if((t=Ki(t))<1||t>it)return[];var n=at,r=ca(t,at);e=zr(e),t-=at;for(var i=C(r,e);++n<t;)e(n);return i},G.toFinite=Qi,G.toInteger=Ki,G.toLength=Ji,G.toLower=function(t){return eo(t).toLowerCase()},G.toNumber=$i,G.toSafeInteger=function(t){return t?Ie(Ki(t),-9007199254740991,it):0===t?t:0},G.toString=eo,G.toUpper=function(t){return eo(t).toUpperCase()},G.trim=function(t,e,n){if((t=eo(t))&&(n||e===i))return T(t);if(!t||!(e=Va(e)))return t;var r=W(t),o=W(e),a=L(r,o),s=R(r,o)+1;return tr(r,a,s).join("")},G.trimEnd=function(t,e,n){if((t=eo(t))&&(n||e===i))return t.slice(0,H(t)+1);if(!t||!(e=Va(e)))return t;var r=W(t),o=R(r,W(e))+1;return tr(r,0,o).join("")},G.trimStart=function(t,e,n){if((t=eo(t))&&(n||e===i))return t.replace(Qt,"");if(!t||!(e=Va(e)))return t;var r=W(t),o=L(r,W(e));return tr(r,o).join("")},G.truncate=function(t,e){var n=30,r="...";if(Gi(e)){var o="separator"in e?e.separator:o;n="length"in e?Ki(e.length):n,r="omission"in e?Va(e.omission):r}var a=(t=eo(t)).length;if(F(t)){var s=W(t);a=s.length}if(n>=a)return t;var u=n-q(r);if(u<1)return r;var l=s?tr(s,0,u).join(""):t.slice(0,u);if(o===i)return l+r;if(s&&(u+=l.length-u),Ks(o)){if(t.slice(u).search(o)){var c,f=l;for(o.global||(o=Po(o.source,eo(oe.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var p=c.index;l=l.slice(0,p===i?u:p)}}else if(t.indexOf(Va(o),u)!=u){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+r},G.unescape=function(t){return(t=eo(t))&&Bt.test(t)?t.replace(jt,mn):t},G.uniqueId=function(t){var e=++Do;return eo(t)+e},G.upperCase=Eu,G.upperFirst=Su,G.each=Ti,G.eachRight=Ii,G.first=bi,go(G,(js={},Fe(G,(function(t,e){Ro.call(G.prototype,e)||(js[e]=t)})),js),{chain:!1}),G.VERSION="4.17.21",s(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){G[t].placeholder=G})),s(["drop","take"],(function(t,e){Kt.prototype[t]=function(n){n=n===i?1:la(Ki(n),0);var r=this.__filtered__&&!e?new Kt(this):this.clone();return r.__filtered__?r.__takeCount__=ca(n,r.__takeCount__):r.__views__.push({size:ca(n,at),type:t+(r.__dir__<0?"Right":"")}),r},Kt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),s(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Kt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:zr(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),s(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Kt.prototype[t]=function(){return this[n](1).value()[0]}})),s(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Kt.prototype[t]=function(){return this.__filtered__?new Kt(this):this[n](1)}})),Kt.prototype.compact=function(){return this.filter(po)},Kt.prototype.find=function(t){return this.filter(t).head()},Kt.prototype.findLast=function(t){return this.reverse().find(t)},Kt.prototype.invokeMap=Ln((function(t,e){return"function"==typeof t?new Kt(this):this.map((function(n){return on(n,t,e)}))})),Kt.prototype.reject=function(t){return this.filter(Di(zr(t)))},Kt.prototype.slice=function(t,e){t=Ki(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Kt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=Ki(e))<0?n.dropRight(-e):n.take(e-t)),n)},Kt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Kt.prototype.toArray=function(){return this.take(at)},Fe(Kt.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=G[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(G.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Kt,l=s[0],c=u||Hs(e),f=function(t){var e=o.apply(G,d([t],s));return r&&p?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var p=this.__chain__,h=!!this.__actions__.length,g=a&&!p,y=u&&!h;if(!a&&c){e=y?e:new Kt(this);var A=t.apply(e,s);return A.__actions__.push({func:Ci,args:[f],thisArg:i}),new Z(A,p)}return g&&y?t.apply(this,s):(A=this.thru(f),g?r?A.value()[0]:A.value():A)})})),s(["pop","push","shift","sort","splice","unshift"],(function(t){var e=To[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);G.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Hs(i)?i:[],t)}return this[n]((function(n){return e.apply(Hs(n)?n:[],t)}))}})),Fe(Kt.prototype,(function(t,e){var n=G[e];if(n){var r=n.name+"";Ro.call(xa,r)||(xa[r]=[]),xa[r].push({name:e,func:n})}})),xa[Wa(i,2).name]=[{name:"wrapper",func:i}],Kt.prototype.clone=function(){var t=new Kt(this.__wrapped__);return t.__actions__=ur(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ur(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ur(this.__views__),t},Kt.prototype.reverse=function(){if(this.__filtered__){var t=new Kt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Kt.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Hs(t),r=e<0,i=n?t.length:0,o=qr(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,p=0,h=ca(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return Zn(t,this.__actions__);var d=[];t:for(;u--&&p<h;){for(var g=-1,y=t[l+=e];++g<f;){var A=c[g],v=A.iteratee,m=A.type,_=v(y);if(2==m)y=_;else if(!_){if(1==m)continue t;break t}}d[p++]=y}return d},G.prototype.at=ws,G.prototype.chain=function(){return ki(this)},G.prototype.commit=function(){return new Z(this.value(),this.__chain__)},G.prototype.next=function(){this.__values__===i&&(this.__values__=Yi(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},G.prototype.plant=function(t){for(var e,n=this;n instanceof X;){var r=Ai(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},G.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Kt){var e=t;return this.__actions__.length&&(e=new Kt(this)),(e=e.reverse()).__actions__.push({func:Ci,args:[Ei],thisArg:i}),new Z(e,this.__chain__)}return this.thru(Ei)},G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=function(){return Zn(this.__wrapped__,this.__actions__)},G.prototype.first=G.prototype.head,Qo&&(G.prototype[Qo]=function(){return this}),G}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(rn._=_n,define((function(){return _n}))):an?((an.exports=_n)._=_n,on._=_n):rn._=_n}).call(void 0)})),a.register("dmVj1",(function(t,e){"use strict";t.exports=a("1NAlz")})),a.register("1NAlz",(function(e,n){t(e.exports,"Children",(function(){return r}),(function(t){return r=t})),t(e.exports,"Component",(function(){return i}),(function(t){return i=t})),t(e.exports,"Fragment",(function(){return o}),(function(t){return o=t})),t(e.exports,"Profiler",(function(){return s}),(function(t){return s=t})),t(e.exports,"PureComponent",(function(){return u}),(function(t){return u=t})),t(e.exports,"StrictMode",(function(){return l}),(function(t){return l=t})),t(e.exports,"Suspense",(function(){return c}),(function(t){return c=t})),t(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(function(){return f}),(function(t){return f=t})),t(e.exports,"cloneElement",(function(){return p}),(function(t){return p=t})),t(e.exports,"createContext",(function(){return h}),(function(t){return h=t})),t(e.exports,"createElement",(function(){return d}),(function(t){return d=t})),t(e.exports,"createFactory",(function(){return g}),(function(t){return g=t})),t(e.exports,"createRef",(function(){return y}),(function(t){return y=t})),t(e.exports,"forwardRef",(function(){return A}),(function(t){return A=t})),t(e.exports,"isValidElement",(function(){return v}),(function(t){return v=t})),t(e.exports,"lazy",(function(){return m}),(function(t){return m=t})),t(e.exports,"memo",(function(){return _}),(function(t){return _=t})),t(e.exports,"useCallback",(function(){return b}),(function(t){return b=t})),t(e.exports,"useContext",(function(){return x}),(function(t){return x=t})),t(e.exports,"useDebugValue",(function(){return w}),(function(t){return w=t})),t(e.exports,"useEffect",(function(){return E}),(function(t){return E=t})),t(e.exports,"useImperativeHandle",(function(){return S}),(function(t){return S=t})),t(e.exports,"useLayoutEffect",(function(){return P}),(function(t){return P=t})),t(e.exports,"useMemo",(function(){return k}),(function(t){return k=t})),t(e.exports,"useReducer",(function(){return C}),(function(t){return C=t})),t(e.exports,"useRef",(function(){return T}),(function(t){return T=t})),t(e.exports,"useState",(function(){return I}),(function(t){return I=t})),t(e.exports,"version",(function(){return M}),(function(t){return M=t}));var r,i,o,s,u,l,c,f,p,h,d,g,y,A,v,m,_,b,x,w,E,S,P,k,C,T,I,M,O=a("5qgrd"),L=a("7JwYr"),R="function"==typeof Symbol&&Symbol.for,D=R?Symbol.for("react.element"):60103,N=R?Symbol.for("react.portal"):60106,F=R?Symbol.for("react.fragment"):60107,j=R?Symbol.for("react.strict_mode"):60108,z=R?Symbol.for("react.profiler"):60114,B=R?Symbol.for("react.provider"):60109,U=R?Symbol.for("react.context"):60110,V=R?Symbol.for("react.forward_ref"):60112,G=R?Symbol.for("react.suspense"):60113,q=R?Symbol.for("react.memo"):60115,W=R?Symbol.for("react.lazy"):60116,H="function"==typeof Symbol&&Symbol.iterator;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y={};function Q(t,e,n){this.props=t,this.context=e,this.refs=Y,this.updater=n||Z}function K(){}function J(t,e,n){this.props=t,this.context=e,this.refs=Y,this.updater=n||Z}Q.prototype.isReactComponent={},Q.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(X(85));this.updater.enqueueSetState(this,t,e,"setState")},Q.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},K.prototype=Q.prototype;var $=J.prototype=new K;$.constructor=J,L($,Q.prototype),$.isPureReactComponent=!0;var tt={current:null},et=Object.prototype.hasOwnProperty,nt={key:!0,ref:!0,__self:!0,__source:!0};function rt(t,e,n){var r,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)et.call(e,r)&&!nt.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:D,type:t,key:o,ref:a,props:i,_owner:tt.current}}function it(t){return"object"==typeof t&&null!==t&&t.$$typeof===D}var ot=/\/+/g,at=[];function st(t,e,n,r){if(at.length){var i=at.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function ut(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>at.length&&at.push(t)}function lt(t,e,n,r){var i=void 0===t?"undefined":O.default(t);"undefined"!==i&&"boolean"!==i||(t=null);var o=!1;if(null===t)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case D:case N:o=!0}}if(o)return n(r,t,""===e?"."+ft(t,0):e),1;if(o=0,e=""===e?".":e+":",Array.isArray(t))for(var a=0;a<t.length;a++){var s=e+ft(i=t[a],a);o+=lt(i,s,n,r)}else if(null===t||"object"!=typeof t?s=null:s="function"==typeof(s=H&&t[H]||t["@@iterator"])?s:null,"function"==typeof s)for(t=s.call(t),a=0;!(i=t.next()).done;)o+=lt(i=i.value,s=e+ft(i,a++),n,r);else if("object"===i)throw n=""+t,Error(X(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return o}function ct(t,e,n){return null==t?0:lt(t,"",e,n)}function ft(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function pt(t,e){t.func.call(t.context,e,t.count++)}function ht(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?dt(t,r,n,(function(t){return t})):null!=t&&(it(t)&&(t=function(t,e){return{$$typeof:D,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(ot,"$&/")+"/")+n)),r.push(t))}function dt(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(ot,"$&/")+"/"),ct(t,ht,e=st(e,o,r,i)),ut(e)}var gt={current:null};function yt(){var t=gt.current;if(null===t)throw Error(X(321));return t}r={map:function(t,e,n){if(null==t)return t;var r=[];return dt(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;ct(t,pt,e=st(null,null,e,n)),ut(e)},count:function(t){return ct(t,(function(){return null}),null)},toArray:function(t){var e=[];return dt(t,e,null,(function(t){return t})),e},only:function(t){if(!it(t))throw Error(X(143));return t}},i=Q,o=F,s=z,u=J,l=j,c=G,f={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:tt,IsSomeRendererActing:{current:!1},assign:L},p=function(t,e,n){if(null==t)throw Error(X(267,t));var r=L({},t.props),i=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=tt.current),void 0!==e.key&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)et.call(e,u)&&!nt.hasOwnProperty(u)&&(r[u]=void 0===e[u]&&void 0!==s?s[u]:e[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:D,type:t.type,key:i,ref:o,props:r,_owner:a}},h=function(t,e){return void 0===e&&(e=null),(t={$$typeof:U,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:B,_context:t},t.Consumer=t},d=rt,g=function(t){var e=rt.bind(null,t);return e.type=t,e},y=function(){return{current:null}},A=function(t){return{$$typeof:V,render:t}},v=it,m=function(t){return{$$typeof:W,_ctor:t,_status:-1,_result:null}},_=function(t,e){return{$$typeof:q,type:t,compare:void 0===e?null:e}},b=function(t,e){return yt().useCallback(t,e)},x=function(t,e){return yt().useContext(t,e)},w=function(){},E=function(t,e){return yt().useEffect(t,e)},S=function(t,e,n){return yt().useImperativeHandle(t,e,n)},P=function(t,e){return yt().useLayoutEffect(t,e)},k=function(t,e){return yt().useMemo(t,e)},C=function(t,e,n){return yt().useReducer(t,e,n)},T=function(t){return yt().useRef(t)},I=function(t){return yt().useState(t)},M="16.14.0"})),a.register("k1UaX",(function(e,i){n(e.exports),t(e.exports,"isStyledComponent",(function(){return T})),t(e.exports,"css",(function(){return wt})),t(e.exports,"ThemeContext",(function(){return Yt})),t(e.exports,"ThemeConsumer",(function(){return Qt})),t(e.exports,"ThemeProvider",(function(){return Kt})),t(e.exports,"ServerStyleSheet",(function(){return Jt})),t(e.exports,"StyleSheetManager",(function(){return ee})),t(e.exports,"StyleSheetContext",(function(){return $t})),t(e.exports,"StyleSheetConsumer",(function(){return te})),t(e.exports,"createGlobalStyle",(function(){return se})),t(e.exports,"keyframes",(function(){return le})),t(e.exports,"withTheme",(function(){return ce})),t(e.exports,"__DO_NOT_USE_OR_YOU_WILL_BE_HAUNTED_BY_SPOOKY_GHOSTS",(function(){return fe})),t(e.exports,"default",(function(){return pe}));var o,s=a("5qgrd"),u=a("lxQaN"),l=a("6v9mf"),c=a("6cds3"),f=a("eIYXV"),p=a("6TZpS"),h=a("chUsf"),d=a("74Uv8"),g=a("3tzQP"),y=a("a8i8g"),A=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},v="function"==typeof Symbol&&"symbol"===s.default(Symbol.iterator)?function(t){return void 0===t?"undefined":s.default(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":s.default(t)},m=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=(o=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}},function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}),b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s.default(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},w=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},E=function(t){return"object"===(void 0===t?"undefined":v(t))&&t.constructor===Object},S=Object.freeze([]),P=Object.freeze({});function k(t){return"function"==typeof t}function C(t){return t.displayName||t.name||"Component"}function T(t){return t&&"string"==typeof t.styledComponentId}var I="data-styled",M="data-styled-version",O="undefined"!=typeof window&&"HTMLElement"in window,L="boolean"==typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||void 0!==y&&void 0||!1,R={};var D=function(t){function e(n){m(this,e);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=w(this,t.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+n+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return w(a)}return x(e,t),e}(Error),N=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,F=function(t){var e=""+(t||""),n=[];return e.replace(N,(function(t,e,r){return n.push({componentId:e,matchIndex:r}),t})),n.map((function(t,r){var i=t.componentId,o=t.matchIndex,a=n[r+1];return{componentId:i,cssFromDOM:a?e.slice(o,a.matchIndex):e.slice(o)}}))},j=/^\s*\/\/.*$/gm,z=new(r(u))({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),B=new(r(u))({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),U=[],V=function(t){if(-2===t){var e=U;return U=[],e}},G=r(l)((function(t){U.push(t)})),q=void 0,W=void 0,H=void 0,X=function(t,e,n){return e>0&&-1!==n.slice(0,e).indexOf(W)&&n.slice(e-W.length,e)!==W?"."+q:t};B.use([function(t,e,n){2===t&&n.length&&n[0].lastIndexOf(W)>0&&(n[0]=n[0].replace(H,X))},G,V]),z.use([G,V]);var Z=function(t){return z("",t)};function Y(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",i=t.join("").replace(j,""),o=e&&n?n+" "+e+" { "+i+" }":i;return q=r,W=e,H=new RegExp("\\"+W+"\\b","g"),B(n||!e?"":e,o)}var Q=function(){return"undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null},K=function(t,e,n){n&&((t[e]||(t[e]=Object.create(null)))[n]=!0)},J=function(t,e){t[e]=Object.create(null)},$=function(t){return function(e,n){return void 0!==t[e]&&t[e][n]}},tt=function(t){var e="";for(var n in t)e+=Object.keys(t[n]).join(" ")+" ";return e.trim()},et=function(t){if(t.sheet)return t.sheet;for(var e=t.ownerDocument.styleSheets.length,n=0;n<e;n+=1){var r=t.ownerDocument.styleSheets[n];if(r.ownerNode===t)return r}throw new D(10)},nt=function(t,e,n){if(!e)return!1;var r=t.cssRules.length;try{t.insertRule(e,n<=r?n:r)}catch(t){return!1}return!0},rt=function(t){return"\n/* sc-component-id: "+t+" */\n"},it=function(t,e){for(var n=0,r=0;r<=e;r+=1)n+=t[r];return n},ot=function(t,e){return function(n){var r=Q();return"<style "+[r&&'nonce="'+r+'"','data-styled="'+tt(e)+'"','data-styled-version="4.4.1"',n].filter(Boolean).join(" ")+">"+t()+"</style>"}},at=function(t,e){return function(){var n,i=((n={})["data-styled"]=tt(e),n["data-styled-version"]="4.4.1",n),o=Q();return o&&(i.nonce=o),r(c).createElement("style",b({},i,{dangerouslySetInnerHTML:{__html:t()}}))}},st=function(t){return function(){return Object.keys(t)}},ut=function(t,e){return t.createTextNode(rt(e))},lt=function t(e,n){var r=void 0===e?Object.create(null):e,i=void 0===n?Object.create(null):n,o=function(t){var e=i[t];return void 0!==e?e:i[t]=[""]},a=function(){var t="";for(var e in i){var n=i[e][0];n&&(t+=rt(e)+n)}return t},s={clone:function(){var e=function(t){var e=Object.create(null);for(var n in t)e[n]=b({},t[n]);return e}(r),n=Object.create(null);for(var o in i)n[o]=[i[o][0]];return t(e,n)},css:a,getIds:st(i),hasNameForId:$(r),insertMarker:o,insertRules:function(t,e,n){o(t)[0]+=e.join(" "),K(r,t,n)},removeRules:function(t){var e=i[t];void 0!==e&&(e[0]="",J(r,t))},sealed:!1,styleTag:null,toElement:at(a,r),toHTML:ot(a,r)};return s},ct=function(t,e,n,r,i){if(O&&!n){var o=function(t,e,n){var r=document;t?r=t.ownerDocument:e&&(r=e.ownerDocument);var i=r.createElement("style");i.setAttribute(I,""),i.setAttribute(M,"4.4.1");var o=Q();if(o&&i.setAttribute("nonce",o),i.appendChild(r.createTextNode("")),t&&!e)t.appendChild(i);else{if(!e||!t||!e.parentNode)throw new D(6);e.parentNode.insertBefore(i,n?e:e.nextSibling)}return i}(t,e,r);return L?function(t,e){var n=Object.create(null),r=Object.create(null),i=void 0!==e,o=!1,a=function(e){var i=r[e];return void 0!==i?i:(r[e]=ut(t.ownerDocument,e),t.appendChild(r[e]),n[e]=Object.create(null),r[e])},s=function(){var t="";for(var e in r)t+=r[e].data;return t};return{clone:function(){throw new D(5)},css:s,getIds:st(r),hasNameForId:$(n),insertMarker:a,insertRules:function(t,r,s){for(var u=a(t),l=[],c=r.length,f=0;f<c;f+=1){var p=r[f],h=i;if(h&&-1!==p.indexOf("@import"))l.push(p);else{h=!1;var d=f===c-1?"":" ";u.appendData(""+p+d)}}K(n,t,s),i&&l.length>0&&(o=!0,e().insertRules(t+"-import",l))},removeRules:function(a){var s=r[a];if(void 0!==s){var u=ut(t.ownerDocument,a);t.replaceChild(u,s),r[a]=u,J(n,a),i&&o&&e().removeRules(a+"-import")}},sealed:!1,styleTag:t,toElement:at(s,n),toHTML:ot(s,n)}}(o,i):function(t,e){var n=Object.create(null),r=Object.create(null),i=[],o=void 0!==e,a=!1,s=function(t){var e=r[t];return void 0!==e?e:(r[t]=i.length,i.push(0),J(n,t),r[t])},u=function(){var e=et(t).cssRules,n="";for(var o in r){n+=rt(o);for(var a=r[o],s=it(i,a),u=s-i[a];u<s;u+=1){var l=e[u];void 0!==l&&(n+=l.cssText)}}return n};return{clone:function(){throw new D(5)},css:u,getIds:st(r),hasNameForId:$(n),insertMarker:s,insertRules:function(r,u,l){for(var c=s(r),f=et(t),p=it(i,c),h=0,d=[],g=u.length,y=0;y<g;y+=1){var A=u[y],v=o;v&&-1!==A.indexOf("@import")?d.push(A):nt(f,A,p+h)&&(v=!1,h+=1)}o&&d.length>0&&(a=!0,e().insertRules(r+"-import",d)),i[c]+=h,K(n,r,l)},removeRules:function(s){var u=r[s];if(void 0!==u&&!1!==t.isConnected){var l=i[u];!function(t,e,n){for(var r=e-n,i=e;i>r;i-=1)t.deleteRule(i)}(et(t),it(i,u)-1,l),i[u]=0,J(n,s),o&&a&&e().removeRules(s+"-import")}},sealed:!1,styleTag:t,toElement:at(u,n),toHTML:ot(u,n)}}(o,i)}return lt()},ft=/\s+/,pt=void 0;pt=O?L?40:1e3:-1;var ht=0,dt=void 0,gt=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O?document.head:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m(this,t),this.getImportRuleTag=function(){var t=e.importRuleTag;if(void 0!==t)return t;var n=e.tags[0];return e.importRuleTag=ct(e.target,n?n.styleTag:null,e.forceServer,!0)},ht+=1,this.id=ht,this.forceServer=r,this.target=r?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return t.prototype.rehydrate=function(){if(!O||this.forceServer)return this;var t=[],e=[],n=!1,r=document.querySelectorAll('style[data-styled][data-styled-version="4.4.1"]'),i=r.length;if(!i)return this;for(var o=0;o<i;o+=1){var a=r[o];n||(n=!!a.getAttribute("data-styled-streamed"));for(var s,u=(a.getAttribute(I)||"").trim().split(ft),l=u.length,c=0;c<l;c+=1)s=u[c],this.rehydratedNames[s]=!0;e.push.apply(e,F(a.textContent)),t.push(a)}var f=e.length;if(!f)return this;var p=this.makeTag(null);!function(t,e,n){for(var r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.componentId,s=o.cssFromDOM,u=Z(s);t.insertRules(a,u)}for(var l=0,c=e.length;l<c;l+=1){var f=e[l];f.parentNode&&f.parentNode.removeChild(f)}}(p,t,e),this.capacity=Math.max(1,pt-f),this.tags.push(p);for(var h=0;h<f;h+=1)this.tagMap[e[h].componentId]=p;return this},t.reset=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];dt=new t(void 0,e).rehydrate()},t.prototype.clone=function(){var e=new t(this.target,this.forceServer);return this.clones.push(e),e.tags=this.tags.map((function(t){for(var n=t.getIds(),r=t.clone(),i=0;i<n.length;i+=1)e.tagMap[n[i]]=r;return r})),e.rehydratedNames=b({},this.rehydratedNames),e.deferred=b({},this.deferred),e},t.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach((function(t){t.sealed=!0}))},t.prototype.makeTag=function(t){var e=t?t.styleTag:null;return ct(this.target,e,this.forceServer,!1,this.getImportRuleTag)},t.prototype.getTagForId=function(t){var e=this.tagMap[t];if(void 0!==e&&!e.sealed)return e;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=pt,n=this.makeTag(n),this.tags.push(n)),this.tagMap[t]=n},t.prototype.hasId=function(t){return void 0!==this.tagMap[t]},t.prototype.hasNameForId=function(t,e){if(void 0===this.ignoreRehydratedNames[t]&&this.rehydratedNames[e])return!0;var n=this.tagMap[t];return void 0!==n&&n.hasNameForId(t,e)},t.prototype.deferredInject=function(t,e){if(void 0===this.tagMap[t]){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].deferredInject(t,e);this.getTagForId(t).insertMarker(t),this.deferred[t]=e}},t.prototype.inject=function(t,e,n){for(var r=this.clones,i=0;i<r.length;i+=1)r[i].inject(t,e,n);var o=this.getTagForId(t);if(void 0!==this.deferred[t]){var a=this.deferred[t].concat(e);o.insertRules(t,a,n),this.deferred[t]=void 0}else o.insertRules(t,e,n)},t.prototype.remove=function(t){var e=this.tagMap[t];if(void 0!==e){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].remove(t);e.removeRules(t),this.ignoreRehydratedNames[t]=!0,this.deferred[t]=void 0}},t.prototype.toHTML=function(){return this.tags.map((function(t){return t.toHTML()})).join("")},t.prototype.toReactElements=function(){var t=this.id;return this.tags.map((function(e,n){var r="sc-"+t+"-"+n;return c.cloneElement(e.toElement(),{key:r})}))},_(t,null,[{key:"master",get:function(){return dt||(dt=(new t).rehydrate())}},{key:"instance",get:function(){return t.master}}]),t}(),yt=function(){function t(e,n){var r=this;m(this,t),this.inject=function(t){t.hasNameForId(r.id,r.name)||t.inject(r.id,r.rules,r.name)},this.toString=function(){throw new D(12,String(r.name))},this.name=e,this.rules=n,this.id="sc-keyframes-"+e}return t.prototype.getName=function(){return this.name},t}(),At=/([A-Z])/g,vt=/^ms-/;function mt(t){return t.replace(At,"-$1").toLowerCase().replace(vt,"-ms-")}var _t=function(t){return null==t||!1===t||""===t},bt=function t(e,n){var r=[];return Object.keys(e).forEach((function(n){if(!_t(e[n])){if(E(e[n]))return r.push.apply(r,t(e[n],n)),r;if(k(e[n]))return r.push(mt(n)+":",e[n],";"),r;r.push(mt(n)+": "+(i=n,(null==(o=e[n])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||i in f.default?String(o).trim():o+"px")+";"))}var i,o;return r})),n?[n+" {"].concat(r,["}"]):r};function xt(t,e,n){if(Array.isArray(t)){for(var r,i=[],o=0,a=t.length;o<a;o+=1)null!==(r=xt(t[o],e,n))&&(Array.isArray(r)?i.push.apply(i,r):i.push(r));return i}return _t(t)?null:T(t)?"."+t.styledComponentId:k(t)?"function"!=typeof(s=t)||s.prototype&&s.prototype.isReactComponent||!e?t:xt(t(e),e,n):t instanceof yt?n?(t.inject(n),t.getName()):t:E(t)?bt(t):t.toString();var s}function wt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return k(t)||E(t)?xt(A(S,[t].concat(n))):xt(A(t,n))}function Et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P;if(!p.isValidElementType(e))throw new D(1,String(e));var r=function(){return t(e,n,wt.apply(void 0,arguments))};return r.withConfig=function(r){return Et(t,e,b({},n,r))},r.attrs=function(r){return Et(t,e,b({},n,{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r}function St(t){for(var e,n=0|t.length,r=0|n,i=0;n>=4;)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+((1540483477*(e>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&t.charCodeAt(i+2))<<16;case 2:r^=(255&t.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return((r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16))^r>>>15)>>>0}var Pt=function(t){return String.fromCharCode(t+(t>25?39:97))};function kt(t){var e="",n=void 0;for(n=t;n>52;n=Math.floor(n/52))e=Pt(n%52)+e;return Pt(n%52)+e}function Ct(t,e){for(var n=0;n<t.length;n+=1){var r=t[n];if(Array.isArray(r)&&!Ct(r,e))return!1;if(k(r)&&!T(r))return!1}return!e.some((function(t){return k(t)||function(t){for(var e in t)if(k(t[e]))return!0;return!1}(t)}))}var Tt,It=function(t){return kt(St(t))},Mt=function(){function t(e,n,r){m(this,t),this.rules=e,this.isStatic=Ct(e,n),this.componentId=r,gt.master.hasId(r)||gt.master.deferredInject(r,[])}return t.prototype.generateAndInjectStyles=function(t,e){var n=this.isStatic,r=this.componentId,i=this.lastClassName;if(O&&n&&"string"==typeof i&&e.hasNameForId(r,i))return i;var o=xt(this.rules,t,e),a=It(this.componentId+o.join(""));return e.hasNameForId(r,a)||e.inject(this.componentId,Y(o,"."+a,void 0,r),a),this.lastClassName=a,a},t.generateName=function(t){return It(t)},t}(),Ot=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P,r=!!n&&t.theme===n.theme,i=t.theme&&!r?t.theme:e||n.theme;return i},Lt=/[[\].#*$><+~=|^:(),"'`-]+/g,Rt=/(^-|-$)/g;function Dt(t){return t.replace(Lt,"-").replace(Rt,"")}function Nt(t){return"string"==typeof t&&!0}var Ft={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},jt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},zt=((Tt={})[p.ForwardRef]={$$typeof:!0,render:!0},Tt),Bt=Object.defineProperty,Ut=Object.getOwnPropertyNames,Vt=Object.getOwnPropertySymbols,Gt=void 0===Vt?function(){return[]}:Vt,qt=Object.getOwnPropertyDescriptor,Wt=Object.getPrototypeOf,Ht=Object.prototype,Xt=Array.prototype;function Zt(t,e,n){if("string"!=typeof e){var r=Wt(e);r&&r!==Ht&&Zt(t,r,n);for(var i=Xt.concat(Ut(e),Gt(e)),o=zt[t.$$typeof]||Ft,a=zt[e.$$typeof]||Ft,s=i.length,u=void 0,l=void 0;s--;)if(l=i[s],!(jt[l]||n&&n[l]||a&&a[l]||o&&o[l])&&(u=qt(e,l)))try{Bt(t,l,u)}catch(t){}return t}return t}var Yt=c.createContext(),Qt=Yt.Consumer,Kt=function(t){function e(n){m(this,e);var r=w(this,t.call(this,n));return r.getContext=h.default(r.getContext.bind(r)),r.renderInner=r.renderInner.bind(r),r}return x(e,t),e.prototype.render=function(){return this.props.children?r(c).createElement(Yt.Consumer,null,this.renderInner):null},e.prototype.renderInner=function(t){var e=this.getContext(this.props.theme,t);return r(c).createElement(Yt.Provider,{value:e},this.props.children)},e.prototype.getTheme=function(t,e){if(k(t))return t(e);if(null===t||Array.isArray(t)||"object"!==(void 0===t?"undefined":v(t)))throw new D(8);return b({},e,t)},e.prototype.getContext=function(t,e){return this.getTheme(t,e)},e}(c.Component),Jt=function(){function t(){m(this,t),this.masterSheet=gt.master,this.instance=this.masterSheet.clone(),this.sealed=!1}return t.prototype.seal=function(){if(!this.sealed){var t=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(t,1),this.sealed=!0}},t.prototype.collectStyles=function(t){if(this.sealed)throw new D(2);return r(c).createElement(ee,{sheet:this.instance},t)},t.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},t.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},t.prototype.interleaveWithNodeStream=function(t){throw new D(3)},t}(),$t=c.createContext(),te=$t.Consumer,ee=function(t){function e(n){m(this,e);var r=w(this,t.call(this,n));return r.getContext=h.default(r.getContext),r}return x(e,t),e.prototype.getContext=function(t,e){if(t)return t;if(e)return new gt(e);throw new D(4)},e.prototype.render=function(){var t=this.props,e=t.children,n=t.sheet,i=t.target;return r(c).createElement($t.Provider,{value:this.getContext(n,i)},e)},e}(c.Component),ne={};var re=function(t){function e(){m(this,e);var n=w(this,t.call(this));return n.attrs={},n.renderOuter=n.renderOuter.bind(n),n.renderInner=n.renderInner.bind(n),n}return x(e,t),e.prototype.render=function(){return r(c).createElement(te,null,this.renderOuter)},e.prototype.renderOuter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt.master;return this.styleSheet=t,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():r(c).createElement(Qt,null,this.renderInner)},e.prototype.renderInner=function(t){var e=this.props.forwardedComponent,n=e.componentStyle,r=e.defaultProps,i=(e.displayName,e.foldedComponentIds),o=e.styledComponentId,a=e.target,s=void 0;s=n.isStatic?this.generateAndInjectStyles(P,this.props):this.generateAndInjectStyles(Ot(this.props,t,r)||P,this.props);var u=this.props.as||this.attrs.as||a,l=Nt(u),f={},p=b({},this.props,this.attrs),h=void 0;for(h in p)"forwardedComponent"!==h&&"as"!==h&&("forwardedRef"===h?f.ref=p[h]:"forwardedAs"===h?f.as=p[h]:l&&!d.default(h)||(f[h]=p[h]));return this.props.style&&this.attrs.style&&(f.style=b({},this.attrs.style,this.props.style)),f.className=Array.prototype.concat(i,o,s!==o?s:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),c.createElement(u,f)},e.prototype.buildExecutionContext=function(t,e,n){var r=this,i=b({},e,{theme:t});return n.length?(this.attrs={},n.forEach((function(t){var e,n=t,o=!1,a=void 0,s=void 0;for(s in k(n)&&(n=n(i),o=!0),n)a=n[s],o||!k(a)||(e=a)&&e.prototype&&e.prototype.isReactComponent||T(a)||(a=a(i)),r.attrs[s]=a,i[s]=a})),i):i},e.prototype.generateAndInjectStyles=function(t,e){var n=e.forwardedComponent,r=n.attrs,i=n.componentStyle;n.warnTooManyClasses;return i.isStatic&&!r.length?i.generateAndInjectStyles(P,this.styleSheet):i.generateAndInjectStyles(this.buildExecutionContext(t,e,r),this.styleSheet)},e}(c.Component);function ie(t,e,n){var i=T(t),o=!Nt(t),a=e.displayName,s=void 0===a?function(t){return Nt(t)?"styled."+t:"Styled("+C(t)+")"}(t):a,u=e.componentId,l=void 0===u?function(t,e,n){var r="string"!=typeof e?"sc":Dt(e),i=(ne[r]||0)+1;ne[r]=i;var o=r+"-"+t.generateName(r+i);return n?n+"-"+o:o}(Mt,e.displayName,e.parentComponentId):u,f=e.ParentComponent,p=void 0===f?re:f,h=e.attrs,d=void 0===h?S:h,y=e.displayName&&e.componentId?Dt(e.displayName)+"-"+e.componentId:e.componentId||l,A=i&&t.attrs?Array.prototype.concat(t.attrs,d).filter(Boolean):d,v=new Mt(i?t.componentStyle.rules.concat(n):n,A,y),m=void 0,_=function(t,e){return r(c).createElement(p,b({},t,{forwardedComponent:m,forwardedRef:e}))};return _.displayName=s,(m=r(c).forwardRef(_)).displayName=s,m.attrs=A,m.componentStyle=v,m.foldedComponentIds=i?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):S,m.styledComponentId=y,m.target=i?t.target:t,m.withComponent=function(t){var r=e.componentId,i=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(e,["componentId"]),o=r&&r+"-"+(Nt(t)?t:Dt(C(t)));return ie(t,b({},i,{attrs:A,componentId:o,ParentComponent:p}),n)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?g.default(t.defaultProps,e):e}}),m.toString=function(){return"."+m.styledComponentId},o&&Zt(m,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}var oe=function(t){return Et(ie,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){oe[t]=oe(t)}));var ae=function(){function t(e,n){m(this,t),this.rules=e,this.componentId=n,this.isStatic=Ct(e,S),gt.master.hasId(n)||gt.master.deferredInject(n,[])}return t.prototype.createStyles=function(t,e){var n=Y(xt(this.rules,t,e),"");e.inject(this.componentId,n)},t.prototype.removeStyles=function(t){var e=this.componentId;t.hasId(e)&&t.remove(e)},t.prototype.renderStyles=function(t,e){this.removeStyles(e),this.createStyles(t,e)},t}();function se(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var o=wt.apply(void 0,[t].concat(n)),a="sc-global-"+St(JSON.stringify(o)),s=new ae(o,a),u=function(t){function e(n){m(this,e);var r=w(this,t.call(this,n)),i=r.constructor,o=i.globalStyle,a=i.styledComponentId;return O&&(window.scCGSHMRCache[a]=(window.scCGSHMRCache[a]||0)+1),r.state={globalStyle:o,styledComponentId:a},r}return x(e,t),e.prototype.componentWillUnmount=function(){window.scCGSHMRCache[this.state.styledComponentId]&&(window.scCGSHMRCache[this.state.styledComponentId]-=1),0===window.scCGSHMRCache[this.state.styledComponentId]&&this.state.globalStyle.removeStyles(this.styleSheet)},e.prototype.render=function(){var t=this;return r(c).createElement(te,null,(function(e){t.styleSheet=e||gt.master;var n=t.state.globalStyle;return n.isStatic?(n.renderStyles(R,t.styleSheet),null):r(c).createElement(Qt,null,(function(e){var r=t.constructor.defaultProps,i=b({},t.props);return void 0!==e&&(i.theme=Ot(t.props,e,r)),n.renderStyles(i,t.styleSheet),null}))}))},e}(r(c).Component);return u.globalStyle=s,u.styledComponentId=a,u}O&&(window.scCGSHMRCache={});var ue=function(t){return t.replace(/\s|\\n/g,"")};function le(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=wt.apply(void 0,[t].concat(n)),o=kt(St(ue(JSON.stringify(i))));return new yt(o,Y(i,o,"@keyframes"))}var ce=function(t){var e=r(c).forwardRef((function(e,n){return r(c).createElement(Qt,null,(function(i){var o=t.defaultProps,a=Ot(e,i,o);return r(c).createElement(t,b({},e,{theme:a,ref:n}))}))}));return Zt(e,t),e.displayName="WithTheme("+C(t)+")",e},fe={StyleSheet:gt},pe=oe})),a.register("lxQaN",(function(t,e){t.exports=function t(e){"use strict";var n=function(t,e,n){var i=e.trim().split(y),o=i,a=i.length,s=t.length;switch(s){case 0:case 1:for(var u=0,l=0===s?"":t[0]+" ";u<a;++u)o[u]=r(l,o[u],n,s).trim();break;default:u=0;var c=0;for(o=[];u<a;++u)for(var f=0;f<s;++f)o[c++]=r(t[f]+" ",i[u],n,s).trim()}return o},r=function(t,e,n,r){var i=e,o=i.charCodeAt(0);switch(o<33&&(o=(i=i.trim()).charCodeAt(0)),o){case Q:switch(wt+r){case 0:case 1:if(0===t.trim().length)break;default:return i.replace(A,"$1"+t.trim())}break;case et:if(103!==i.charCodeAt(1))return t.trim()+i.replace(A,"$1"+t.trim());if(St>0&&wt>0)return i.replace(v,"$1").replace(A,"$1"+Gt);default:if(n*wt>0&&i.indexOf("\f")>0)return i.replace(A,(t.charCodeAt(0)===et?"":"$1")+t.trim())}return t+i},i=function(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10),i=t.substring(n+1,t.length-1);return Ot(2!==e?r:r.replace(O,"$1"),i,e)},o=function(t,e){var n=Wt(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(I," or ($1)").substring(4):"("+e+")"},a=function(t,e,n,r,i,o,a,s,u,l){for(var c,f=0,p=e;f<Mt;++f)switch(c=It[f].call(Xt,t,p,n,r,i,o,a,s,u,l)){case void 0:case!1:case!0:case null:break;default:p=c}if(p!==e)return p},s=function(t,e,n,r){for(var i=e+1;i<n;++i)switch(r.charCodeAt(i)){case it:if(t===$&&r.charCodeAt(i-1)===$&&e+2!==i)return i+1;break;case W:if(t===it)return i+1}return i},u=/^\0+/g,l=/[\0\r\f]/g,c=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,h=/,+\s*(?![^(]*[)])/g,d=/ +\s*(?![^(]*[)])/g,g=/ *[\0] */g,y=/,\r+?/g,A=/([\t\r\n ])*\f?&/g,v=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,m=/\W+/g,_=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,x=/:(read-only)/g,w=/\s+(?=[{\];=:>])/g,E=/([[}=:>])\s+/g,S=/(\{[^{]+?);(?=\})/g,P=/\s{2,}/g,k=/([^\(])(:+) */g,C=/[svh]\w+-[tblr]{2}/,T=/\(\s*(.*)\s*\)/g,I=/([\s\S]*?);/g,M=/-self|flex-/g,O=/[^]*?(:[rp][el]a[\w-]+)[^]*/,L=/stretch|:\s*\w+\-(?:conte|avail)/,R=/([^-])(image-set\()/,D="-webkit-",N="-moz-",F="-ms-",j=59,z=125,B=123,U=40,V=41,G=91,q=93,W=10,H=13,X=9,Z=64,Y=32,Q=38,K=45,J=95,$=42,tt=44,et=58,nt=39,rt=34,it=47,ot=62,at=43,st=126,ut=0,lt=12,ct=11,ft=107,pt=109,ht=115,dt=112,gt=111,yt=105,At=99,vt=100,mt=112,_t=1,bt=1,xt=0,wt=1,Et=1,St=1,Pt=0,kt=0,Ct=0,Tt=[],It=[],Mt=0,Ot=null,Lt=-2,Rt=-1,Dt=0,Nt=1,Ft=2,jt=3,zt=0,Bt=1,Ut="",Vt="",Gt="";function qt(t,e,r,c,f){for(var p,h,d=0,y=0,A=0,v=0,m=0,w=0,E=0,S=0,P=0,C=0,I=0,M=0,O=0,L=0,R=0,J=0,Pt=0,It=0,Ot=0,Lt=r.length,Rt=Lt-1,Ht="",Xt="",Zt="",Yt="",Qt="",Kt="";R<Lt;){if(E=r.charCodeAt(R),R===Rt&&y+v+A+d!==0&&(0!==y&&(E=y===it?W:it),v=A=d=0,Lt++,Rt++),y+v+A+d===0){if(R===Rt&&(J>0&&(Xt=Xt.replace(l,"")),Xt.trim().length>0)){switch(E){case Y:case X:case j:case H:case W:break;default:Xt+=r.charAt(R)}E=j}if(1===Pt)switch(E){case B:case z:case j:case rt:case nt:case U:case V:case tt:Pt=0;case X:case H:case W:case Y:break;default:for(Pt=0,Ot=R,m=E,R--,E=j;Ot<Lt;)switch(r.charCodeAt(Ot++)){case W:case H:case j:++R,E=m,Ot=Lt;break;case et:J>0&&(++R,E=m);case B:Ot=Lt}}switch(E){case B:for(m=(Xt=Xt.trim()).charCodeAt(0),I=1,Ot=++R;R<Lt;){switch(E=r.charCodeAt(R)){case B:I++;break;case z:I--;break;case it:switch(w=r.charCodeAt(R+1)){case $:case it:R=s(w,R,Rt,r)}break;case G:E++;case U:E++;case rt:case nt:for(;R++<Rt&&r.charCodeAt(R)!==E;);}if(0===I)break;R++}if(Zt=r.substring(Ot,R),m===ut&&(m=(Xt=Xt.replace(u,"").trim()).charCodeAt(0)),m===Z){switch(J>0&&(Xt=Xt.replace(l,"")),w=Xt.charCodeAt(1)){case vt:case pt:case ht:case K:p=e;break;default:p=Tt}if(Ot=(Zt=qt(e,p,Zt,w,f+1)).length,Ct>0&&0===Ot&&(Ot=Xt.length),Mt>0&&(p=n(Tt,Xt,It),h=a(jt,Zt,p,e,bt,_t,Ot,w,f,c),Xt=p.join(""),void 0!==h&&0===(Ot=(Zt=h.trim()).length)&&(w=0,Zt="")),Ot>0)switch(w){case ht:Xt=Xt.replace(T,o);case vt:case pt:case K:Zt=Xt+"{"+Zt+"}";break;case ft:Zt=(Xt=Xt.replace(_,"$1 $2"+(Bt>0?Ut:"")))+"{"+Zt+"}",Zt=1===Et||2===Et&&i("@"+Zt,3)?"@"+D+Zt+"@"+Zt:"@"+Zt;break;default:Zt=Xt+Zt,c===mt&&(Yt+=Zt,Zt="")}else Zt=""}else Zt=qt(e,n(e,Xt,It),Zt,c,f+1);Qt+=Zt,M=0,Pt=0,L=0,J=0,It=0,O=0,Xt="",Zt="",E=r.charCodeAt(++R);break;case z:case j:if((Ot=(Xt=(J>0?Xt.replace(l,""):Xt).trim()).length)>1)switch(0===L&&((m=Xt.charCodeAt(0))===K||m>96&&m<123)&&(Ot=(Xt=Xt.replace(" ",":")).length),Mt>0&&void 0!==(h=a(Nt,Xt,e,t,bt,_t,Yt.length,c,f,c))&&0===(Ot=(Xt=h.trim()).length)&&(Xt="\0\0"),m=Xt.charCodeAt(0),w=Xt.charCodeAt(1),m){case ut:break;case Z:if(w===yt||w===At){Kt+=Xt+r.charAt(R);break}default:if(Xt.charCodeAt(Ot-1)===et)break;Yt+=Wt(Xt,m,w,Xt.charCodeAt(2))}M=0,Pt=0,L=0,J=0,It=0,Xt="",E=r.charCodeAt(++R)}}switch(E){case H:case W:if(y+v+A+d+kt===0)switch(C){case V:case nt:case rt:case Z:case st:case ot:case $:case at:case it:case K:case et:case tt:case j:case B:case z:break;default:L>0&&(Pt=1)}y===it?y=0:wt+M===0&&c!==ft&&Xt.length>0&&(J=1,Xt+="\0"),Mt*zt>0&&a(Dt,Xt,e,t,bt,_t,Yt.length,c,f,c),_t=1,bt++;break;case j:case z:if(y+v+A+d===0){_t++;break}default:switch(_t++,Ht=r.charAt(R),E){case X:case Y:if(v+d+y===0)switch(S){case tt:case et:case X:case Y:Ht="";break;default:E!==Y&&(Ht=" ")}break;case ut:Ht="\\0";break;case lt:Ht="\\f";break;case ct:Ht="\\v";break;case Q:v+y+d===0&&wt>0&&(It=1,J=1,Ht="\f"+Ht);break;case 108:if(v+y+d+xt===0&&L>0)switch(R-L){case 2:S===dt&&r.charCodeAt(R-3)===et&&(xt=S);case 8:P===gt&&(xt=P)}break;case et:v+y+d===0&&(L=R);break;case tt:y+A+v+d===0&&(J=1,Ht+="\r");break;case rt:case nt:0===y&&(v=v===E?0:0===v?E:v);break;case G:v+y+A===0&&d++;break;case q:v+y+A===0&&d--;break;case V:v+y+d===0&&A--;break;case U:v+y+d===0&&(0===M&&(2*S+3*P==533||(I=0,M=1)),A++);break;case Z:y+A+v+d+L+O===0&&(O=1);break;case $:case it:if(v+d+A>0)break;switch(y){case 0:switch(2*E+3*r.charCodeAt(R+1)){case 235:y=it;break;case 220:Ot=R,y=$}break;case $:E===it&&S===$&&Ot+2!==R&&(33===r.charCodeAt(Ot+2)&&(Yt+=r.substring(Ot,R+1)),Ht="",y=0)}}if(0===y){if(wt+v+d+O===0&&c!==ft&&E!==j)switch(E){case tt:case st:case ot:case at:case V:case U:if(0===M){switch(S){case X:case Y:case W:case H:Ht+="\0";break;default:Ht="\0"+Ht+(E===tt?"":"\0")}J=1}else switch(E){case U:L+7===R&&108===S&&(L=0),M=++I;break;case V:0==(M=--I)&&(J=1,Ht+="\0")}break;case X:case Y:switch(S){case ut:case B:case z:case j:case tt:case lt:case X:case Y:case W:case H:break;default:0===M&&(J=1,Ht+="\0")}}Xt+=Ht,E!==Y&&E!==X&&(C=E)}}P=S,S=E,R++}if(Ot=Yt.length,Ct>0&&0===Ot&&0===Qt.length&&0===e[0].length==0&&(c!==pt||1===e.length&&(wt>0?Vt:Gt)===e[0])&&(Ot=e.join(",").length+2),Ot>0){if(p=0===wt&&c!==ft?function(t){for(var e,n,r=0,i=t.length,o=Array(i);r<i;++r){for(var a=t[r].split(g),s="",u=0,c=0,f=0,p=0,h=a.length;u<h;++u)if(!(0===(c=(n=a[u]).length)&&h>1)){if(f=s.charCodeAt(s.length-1),p=n.charCodeAt(0),e="",0!==u)switch(f){case $:case st:case ot:case at:case Y:case U:break;default:e=" "}switch(p){case Q:n=e+Vt;case st:case ot:case at:case Y:case V:case U:break;case G:n=e+n+Vt;break;case et:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(St>0){n=e+n.substring(8,c-1);break}default:(u<1||a[u-1].length<1)&&(n=e+Vt+n)}break;case tt:e="";default:n=c>1&&n.indexOf(":")>0?e+n.replace(k,"$1"+Vt+"$2"):e+n+Vt}s+=n}o[r]=s.replace(l,"").trim()}return o}(e):e,Mt>0&&void 0!==(h=a(Ft,Yt,p,t,bt,_t,Ot,c,f,c))&&0===(Yt=h).length)return Kt+Yt+Qt;if(Yt=p.join(",")+"{"+Yt+"}",Et*xt!=0){switch(2!==Et||i(Yt,2)||(xt=0),xt){case gt:Yt=Yt.replace(x,":"+N+"$1")+Yt;break;case dt:Yt=Yt.replace(b,"::"+D+"input-$1")+Yt.replace(b,"::"+N+"$1")+Yt.replace(b,":"+F+"input-$1")+Yt}xt=0}}return Kt+Yt+Qt}function Wt(t,e,n,r){var o,a=0,s=t+";",u=2*e+3*n+4*r;if(944===u)return function(t){var e=t.length,n=t.indexOf(":",9)+1,r=t.substring(0,n).trim(),o=t.substring(n,e-1).trim();switch(t.charCodeAt(9)*Bt){case 0:break;case K:if(110!==t.charCodeAt(10))break;default:var a=o.split((o="",h)),s=0;for(n=0,e=a.length;s<e;n=0,++s){for(var u=a[s],l=u.split(d);u=l[n];){var c=u.charCodeAt(0);if(1===Bt&&(c>Z&&c<90||c>96&&c<123||c===J||c===K&&u.charCodeAt(1)!==K)&&isNaN(parseFloat(u))+(-1!==u.indexOf("("))===1)switch(u){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:u+=Ut}l[n++]=u}o+=(0===s?"":",")+l.join(" ")}}return o=r+o+";",1===Et||2===Et&&i(o,1)?D+o+o:o}(s);if(0===Et||2===Et&&!i(s,1))return s;switch(u){case 1015:return 97===s.charCodeAt(10)?D+s+s:s;case 951:return 116===s.charCodeAt(3)?D+s+s:s;case 963:return 110===s.charCodeAt(5)?D+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return D+s+s;case 978:return D+s+N+s+s;case 1019:case 983:return D+s+N+s+F+s+s;case 883:return s.charCodeAt(8)===K?D+s+s:s.indexOf("image-set(",11)>0?s.replace(R,"$1"+D+"$2")+s:s;case 932:if(s.charCodeAt(4)===K)switch(s.charCodeAt(5)){case 103:return D+"box-"+s.replace("-grow","")+D+s+F+s.replace("grow","positive")+s;case 115:return D+s+F+s.replace("shrink","negative")+s;case 98:return D+s+F+s.replace("basis","preferred-size")+s}return D+s+F+s+s;case 964:return D+s+F+"flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return o=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),D+"box-pack"+o+D+s+F+"flex-pack"+o+s;case 1005:return f.test(s)?s.replace(c,":"+D)+s.replace(c,":"+N)+s:s;case 1e3:switch(a=(o=s.substring(13).trim()).indexOf("-")+1,o.charCodeAt(0)+o.charCodeAt(a)){case 226:o=s.replace(C,"tb");break;case 232:o=s.replace(C,"tb-rl");break;case 220:o=s.replace(C,"lr");break;default:return s}return D+s+F+o+s;case 1017:if(-1===s.indexOf("sticky",9))return s;case 975:switch(a=(s=t).length-10,u=(o=(33===s.charCodeAt(a)?s.substring(0,a):s).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|o.charCodeAt(7))){case 203:if(o.charCodeAt(8)<111)break;case 115:s=s.replace(o,D+o)+";"+s;break;case 207:case 102:s=s.replace(o,D+(u>102?"inline-":"")+"box")+";"+s.replace(o,D+o)+";"+s.replace(o,F+o+"box")+";"+s}return s+";";case 938:if(s.charCodeAt(5)===K)switch(s.charCodeAt(6)){case 105:return o=s.replace("-items",""),D+s+D+"box-"+o+F+"flex-"+o+s;case 115:return D+s+F+"flex-item-"+s.replace(M,"")+s;default:return D+s+F+"flex-line-pack"+s.replace("align-content","").replace(M,"")+s}break;case 973:case 989:if(s.charCodeAt(3)!==K||122===s.charCodeAt(4))break;case 931:case 953:if(!0===L.test(t))return 115===(o=t.substring(t.indexOf(":")+1)).charCodeAt(0)?Wt(t.replace("stretch","fill-available"),e,n,r).replace(":fill-available",":stretch"):s.replace(o,D+o)+s.replace(o,N+o.replace("fill-",""))+s;break;case 962:if(s=D+s+(102===s.charCodeAt(5)?F+s:"")+s,n+r===211&&105===s.charCodeAt(13)&&s.indexOf("transform",10)>0)return s.substring(0,s.indexOf(";",27)+1).replace(p,"$1"+D+"$2")+s}return s}function Ht(t){for(var e in t){var n=t[e];switch(e){case"keyframe":Bt=0|n;break;case"global":St=0|n;break;case"cascade":wt=0|n;break;case"compress":Pt=0|n;break;case"semicolon":kt=0|n;break;case"preserve":Ct=0|n;break;case"prefix":Ot=null,n?"function"!=typeof n?Et=1:(Et=2,Ot=n):Et=0}}return Ht}function Xt(e,n){if(void 0!==this&&this.constructor===Xt)return t(e);var r=e,i=r.charCodeAt(0);i<33&&(i=(r=r.trim()).charCodeAt(0)),Bt>0&&(Ut=r.replace(m,i===G?"":"-")),i=1,1===wt?Gt=r:Vt=r;var o,s=[Gt];Mt>0&&void 0!==(o=a(Rt,n,s,s,bt,_t,0,0,0,0))&&"string"==typeof o&&(n=o);var u=qt(Tt,s,n,0,0);return Mt>0&&void 0!==(o=a(Lt,u,s,s,bt,_t,u.length,0,0,0))&&"string"!=typeof(u=o)&&(i=0),Ut="",Gt="",Vt="",xt=0,bt=1,_t=1,Pt*i==0?u:u.replace(l,"").replace(w,"").replace(E,"$1").replace(S,"$1").replace(P," ")}return Xt.use=function t(e){switch(e){case void 0:case null:Mt=It.length=0;break;default:if("function"==typeof e)It[Mt++]=e;else if("object"==typeof e)for(var n=0,r=e.length;n<r;++n)t(e[n]);else zt=0|!!e}return t},Xt.set=Ht,void 0!==e&&Ht(e),Xt}(null)})),a.register("6v9mf",(function(t,e){t.exports=function(){"use strict";return function(t){var e=function(e){if(e)try{t(e+"}")}catch(t){}},n="/*|*/",r=n+"}";return function(i,o,a,s,u,l,c,f,p,h){switch(i){case 1:if(0===p&&64===o.charCodeAt(0))return t(o+";"),"";break;case 2:if(0===f)return o+n;break;case 3:switch(f){case 102:case 112:return t(a[0]+o),"";default:return o+(0===h?n:"")}case-2:o.split(r).forEach(e)}}}}()})),a.register("eIYXV",(function(e,n){t(e.exports,"default",(function(){return r}));var r={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}})),a.register("6TZpS",(function(t,e){"use strict";t.exports=a("icfor")})),a.register("icfor",(function(e,n){var r,i,o,a,s,u,l,c,f,p,h,d,g,y,A,v,m,_,b,x,w,E,S,P,k,C,T,I;t(e.exports,"AsyncMode",(function(){return r}),(function(t){return r=t})),t(e.exports,"ConcurrentMode",(function(){return i}),(function(t){return i=t})),t(e.exports,"ContextConsumer",(function(){return o}),(function(t){return o=t})),t(e.exports,"ContextProvider",(function(){return a}),(function(t){return a=t})),t(e.exports,"Element",(function(){return s}),(function(t){return s=t})),t(e.exports,"ForwardRef",(function(){return u}),(function(t){return u=t})),t(e.exports,"Fragment",(function(){return l}),(function(t){return l=t})),t(e.exports,"Lazy",(function(){return c}),(function(t){return c=t})),t(e.exports,"Memo",(function(){return f}),(function(t){return f=t})),t(e.exports,"Portal",(function(){return p}),(function(t){return p=t})),t(e.exports,"Profiler",(function(){return h}),(function(t){return h=t})),t(e.exports,"StrictMode",(function(){return d}),(function(t){return d=t})),t(e.exports,"Suspense",(function(){return g}),(function(t){return g=t})),t(e.exports,"isAsyncMode",(function(){return y}),(function(t){return y=t})),t(e.exports,"isConcurrentMode",(function(){return A}),(function(t){return A=t})),t(e.exports,"isContextConsumer",(function(){return v}),(function(t){return v=t})),t(e.exports,"isContextProvider",(function(){return m}),(function(t){return m=t})),t(e.exports,"isElement",(function(){return _}),(function(t){return _=t})),t(e.exports,"isForwardRef",(function(){return b}),(function(t){return b=t})),t(e.exports,"isFragment",(function(){return x}),(function(t){return x=t})),t(e.exports,"isLazy",(function(){return w}),(function(t){return w=t})),t(e.exports,"isMemo",(function(){return E}),(function(t){return E=t})),t(e.exports,"isPortal",(function(){return S}),(function(t){return S=t})),t(e.exports,"isProfiler",(function(){return P}),(function(t){return P=t})),t(e.exports,"isStrictMode",(function(){return k}),(function(t){return k=t})),t(e.exports,"isSuspense",(function(){return C}),(function(t){return C=t})),t(e.exports,"isValidElementType",(function(){return T}),(function(t){return T=t})),t(e.exports,"typeOf",(function(){return I}),(function(t){return I=t}));var M="function"==typeof Symbol&&Symbol.for,O=M?Symbol.for("react.element"):60103,L=M?Symbol.for("react.portal"):60106,R=M?Symbol.for("react.fragment"):60107,D=M?Symbol.for("react.strict_mode"):60108,N=M?Symbol.for("react.profiler"):60114,F=M?Symbol.for("react.provider"):60109,j=M?Symbol.for("react.context"):60110,z=M?Symbol.for("react.async_mode"):60111,B=M?Symbol.for("react.concurrent_mode"):60111,U=M?Symbol.for("react.forward_ref"):60112,V=M?Symbol.for("react.suspense"):60113,G=M?Symbol.for("react.suspense_list"):60120,q=M?Symbol.for("react.memo"):60115,W=M?Symbol.for("react.lazy"):60116,H=M?Symbol.for("react.block"):60121,X=M?Symbol.for("react.fundamental"):60117,Z=M?Symbol.for("react.responder"):60118,Y=M?Symbol.for("react.scope"):60119;function Q(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case O:switch(t=t.type){case z:case B:case R:case N:case D:case V:return t;default:switch(t=t&&t.$$typeof){case j:case U:case W:case q:case F:return t;default:return e}}case L:return e}}}function K(t){return Q(t)===B}r=z,i=B,o=j,a=F,s=O,u=U,l=R,c=W,f=q,p=L,h=N,d=D,g=V,y=function(t){return K(t)||Q(t)===z},A=K,v=function(t){return Q(t)===j},m=function(t){return Q(t)===F},_=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===O},b=function(t){return Q(t)===U},x=function(t){return Q(t)===R},w=function(t){return Q(t)===W},E=function(t){return Q(t)===q},S=function(t){return Q(t)===L},P=function(t){return Q(t)===N},k=function(t){return Q(t)===D},C=function(t){return Q(t)===V},T=function(t){return"string"==typeof t||"function"==typeof t||t===R||t===B||t===N||t===D||t===V||t===G||"object"==typeof t&&null!==t&&(t.$$typeof===W||t.$$typeof===q||t.$$typeof===F||t.$$typeof===j||t.$$typeof===U||t.$$typeof===X||t.$$typeof===Z||t.$$typeof===Y||t.$$typeof===H)},I=Q})),a.register("chUsf",(function(e,n){t(e.exports,"default",(function(){return o}));var r=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function i(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(i=t[n],o=e[n],!(i===o||r(i)&&r(o)))return!1;var i,o;return!0}var o=function(t,e){var n;void 0===e&&(e=i);var r,o=[],a=!1;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return a&&n===this&&e(i,o)||(r=t.apply(this,i),a=!0,n=this,o=i),r}}})),a.register("74Uv8",(function(e,n){t(e.exports,"default",(function(){return o}));var r=a("eUhG2"),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,o=r.default((function(t){return i.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}))})),a.register("eUhG2",(function(e,n){t(e.exports,"default",(function(){return r}));var r=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}})),a.register("3tzQP",(function(e,n){t(e.exports,"default",(function(){return u}));var r=a("lDyeS");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function o(t,e,n,r){var i=r.propertyIsEnumerable(e)?"enumerable":"nonenumerable";"enumerable"===i&&(t[e]=n),"nonenumerable"===i&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function s(t,e,n){if(!r.isPlainObject(e))return n&&r.isArray(n)&&n.forEach((function(n){e=n(t,e)})),e;var a={};r.isPlainObject(t)&&(a=i(Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)).reduce((function(n,i){var a=t[i];return(!r.isSymbol(i)&&!Object.getOwnPropertyNames(e).includes(i)||r.isSymbol(i)&&!Object.getOwnPropertySymbols(e).includes(i))&&o(n,i,a,t),n}),{}));return i(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)).reduce((function(i,a){var u=e[a],l=r.isPlainObject(t)?t[a]:void 0;return n&&r.isArray(n)&&n.forEach((function(t){u=t(l,u)})),void 0!==l&&r.isPlainObject(u)&&(u=s(l,u,n)),o(i,a,u,e),i}),a)}var u=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=null,o=t;return r.isPlainObject(t)&&t.extensions&&1===Object.keys(t).length&&(o={},i=t.extensions),e.reduce((function(t,e){return s(t,e,i)}),o)}})),a.register("lDyeS",(function(e,n){function r(t){return Object.prototype.toString.call(t).slice(8,-1)}function i(t){return"Undefined"===r(t)}function o(t){return"Null"===r(t)}function a(t){return"Object"===r(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function s(t){return"Array"===r(t)}function u(t){return"Symbol"===r(t)}t(e.exports,"isPlainObject",(function(){return a})),t(e.exports,"isArray",(function(){return s})),t(e.exports,"isSymbol",(function(){return u}));var l,c,f,p,h;l=o,c=i})),a.register("jmURU",(function(e,i){n(e.exports),t(e.exports,"useDropzone",(function(){return v})),t(e.exports,"default",(function(){return y}));var o=a("6cds3");a("iwtM4");var s=a("7EsgY"),u=a("bHh0p");function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?f(r,!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var g=o.forwardRef((function(t,e){var n=t.children,i=v(d(t,["children"])),a=i.open,s=d(i,["open"]);return o.useImperativeHandle(e,(function(){return{open:a}}),[a]),r(o).createElement(o.Fragment,null,n(p({},s,{open:a})))}));g.displayName="Dropzone",g.propTypes={children:r(Tv).func,accept:r(Tv).oneOfType([r(Tv).string,r(Tv).arrayOf(r(Tv).string)]),multiple:r(Tv).bool,preventDropOnDocument:r(Tv).bool,noClick:r(Tv).bool,noKeyboard:r(Tv).bool,noDrag:r(Tv).bool,noDragEventsBubbling:r(Tv).bool,minSize:r(Tv).number,maxSize:r(Tv).number,disabled:r(Tv).bool,getFilesFromEvent:r(Tv).func,onFileDialogCancel:r(Tv).func,onDragEnter:r(Tv).func,onDragLeave:r(Tv).func,onDragOver:r(Tv).func,onDrop:r(Tv).func,onDropAccepted:r(Tv).func,onDropRejected:r(Tv).func};var y=g,A={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],rejectedFiles:[]};function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.accept,n=t.disabled,r=void 0!==n&&n,i=t.getFilesFromEvent,a=void 0===i?s.fromEvent:i,f=t.maxSize,g=void 0===f?1/0:f,y=t.minSize,v=void 0===y?0:y,_=t.multiple,b=void 0===_||_,x=t.onDragEnter,w=t.onDragLeave,E=t.onDragOver,S=t.onDrop,P=t.onDropAccepted,k=t.onDropRejected,C=t.onFileDialogCancel,T=t.preventDropOnDocument,I=void 0===T||T,M=t.noClick,O=void 0!==M&&M,L=t.noKeyboard,R=void 0!==L&&L,D=t.noDrag,N=void 0!==D&&D,F=t.noDragEventsBubbling,j=void 0!==F&&F,z=o.useRef(null),B=o.useRef(null),U=o.useReducer(m,A),V=c(U,2),G=V[0],q=V[1],W=G.isFocused,H=G.isFileDialogActive,X=G.draggedFiles,Z=o.useCallback((function(){B.current&&(q({type:"openDialog"}),B.current.value=null,B.current.click())}),[q]),Y=function(){H&&setTimeout((function(){B.current&&(B.current.files.length||(q({type:"closeDialog"}),"function"==typeof C&&C()))}),300)};o.useEffect((function(){return window.addEventListener("focus",Y,!1),function(){window.removeEventListener("focus",Y,!1)}}),[B,H,C]);var Q=o.useCallback((function(t){z.current&&z.current.isEqualNode(t.target)&&(32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),Z()))}),[z,B]),K=o.useCallback((function(){q({type:"focus"})}),[]),J=o.useCallback((function(){q({type:"blur"})}),[]),$=o.useCallback((function(){O||(u.isIeOrEdge()?setTimeout(Z,0):Z())}),[B,O]),tt=o.useRef([]),et=function(t){z.current&&z.current.contains(t.target)||(t.preventDefault(),tt.current=[])};o.useEffect((function(){return I&&(document.addEventListener("dragover",u.onDocumentDragOver,!1),document.addEventListener("drop",et,!1)),function(){I&&(document.removeEventListener("dragover",u.onDocumentDragOver),document.removeEventListener("drop",et))}}),[z,I]);var nt=o.useCallback((function(t){t.preventDefault(),t.persist(),lt(t),-1===tt.current.indexOf(t.target)&&(tt.current=[].concat(l(tt.current),[t.target])),u.isEvtWithFiles(t)&&Promise.resolve(a(t)).then((function(e){u.isPropagationStopped(t)&&!j||(q({draggedFiles:e,isDragActive:!0,type:"setDraggedFiles"}),x&&x(t))}))}),[a,x,j]),rt=o.useCallback((function(t){if(t.preventDefault(),t.persist(),lt(t),t.dataTransfer)try{t.dataTransfer.dropEffect="copy"}catch(t){}return u.isEvtWithFiles(t)&&E&&E(t),!1}),[E,j]),it=o.useCallback((function(t){t.preventDefault(),t.persist(),lt(t);var e=tt.current.filter((function(e){return e!==t.target&&z.current&&z.current.contains(e)}));tt.current=e,e.length>0||(q({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),u.isEvtWithFiles(t)&&w&&w(t))}),[z,w,j]),ot=o.useCallback((function(t){t.preventDefault(),t.persist(),lt(t),tt.current=[],u.isEvtWithFiles(t)&&Promise.resolve(a(t)).then((function(n){if(!u.isPropagationStopped(t)||j){var r=[],i=[];n.forEach((function(t){u.fileAccepted(t,e)&&u.fileMatchSize(t,v,g)?r.push(t):i.push(t)})),!b&&r.length>1&&i.push.apply(i,l(r.splice(0))),q({acceptedFiles:r,rejectedFiles:i,type:"setFiles"}),S&&S(r,i,t),i.length>0&&k&&k(i,t),r.length>0&&P&&P(r,t)}})),q({type:"reset"})}),[b,e,v,g,a,S,P,k,j]),at=function(t){return r?null:t},st=function(t){return R?null:at(t)},ut=function(t){return N?null:at(t)},lt=function(t){j&&t.stopPropagation()},ct=o.useMemo((function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.refKey,n=void 0===e?"ref":e,i=t.onKeyDown,o=t.onFocus,a=t.onBlur,s=t.onClick,l=t.onDragEnter,c=t.onDragOver,f=t.onDragLeave,g=t.onDrop,y=d(t,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return p(h({onKeyDown:st(u.composeEventHandlers(i,Q)),onFocus:st(u.composeEventHandlers(o,K)),onBlur:st(u.composeEventHandlers(a,J)),onClick:at(u.composeEventHandlers(s,$)),onDragEnter:ut(u.composeEventHandlers(l,nt)),onDragOver:ut(u.composeEventHandlers(c,rt)),onDragLeave:ut(u.composeEventHandlers(f,it)),onDrop:ut(u.composeEventHandlers(g,ot))},n,z),r||R?{}:{tabIndex:0},{},y)}}),[z,Q,K,J,$,nt,rt,it,ot,R,N,r]),ft=o.useCallback((function(t){t.stopPropagation()}),[]),pt=o.useMemo((function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.refKey,r=void 0===n?"ref":n,i=t.onChange,o=t.onClick,a=d(t,["refKey","onChange","onClick"]),s=h({accept:e,multiple:b,type:"file",style:{display:"none"},onChange:at(u.composeEventHandlers(i,ot)),onClick:at(u.composeEventHandlers(o,ft)),autoComplete:"off",tabIndex:-1},r,B);return p({},s,{},a)}}),[B,e,b,ot,r]),ht=X.length,dt=ht>0&&u.allFilesAccepted({files:X,accept:e,minSize:v,maxSize:g,multiple:b}),gt=ht>0&&!dt;return p({},G,{isDragAccept:dt,isDragReject:gt,isFocused:W&&!r,getRootProps:ct,getInputProps:pt,rootRef:z,inputRef:B,open:at(Z)})}function m(t,e){switch(e.type){case"focus":return p({},t,{isFocused:!0});case"blur":return p({},t,{isFocused:!1});case"openDialog":return p({},t,{isFileDialogActive:!0});case"closeDialog":return p({},t,{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive;return p({},t,{draggedFiles:e.draggedFiles,isDragActive:n});case"setFiles":return p({},t,{acceptedFiles:e.acceptedFiles,rejectedFiles:e.rejectedFiles});case"reset":return p({},t,{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],rejectedFiles:[]});default:return t}}}));var Tv={};Tv=a("lrct3")(),a.register("iwtM4",(function(e,n){t(e.exports,"fromEvent",(function(){return a("7EsgY").fromEvent}));a("7EsgY")})),a.register("7EsgY",(function(e,n){t(e.exports,"fromEvent",(function(){return s}));var r=a("15BpE"),i=a("kxrSa"),o=[".DS_Store","Thumbs.db"];function s(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,(n=t,n.dataTransfer&&t.dataTransfer?l(t.dataTransfer,t.type):u(t))];var n}))}))}function u(t){return(null!==t.target&&t.target.files?f(t.target.files):[]).map((function(t){return i.toFileWithPath(t)}))}function l(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return t.items?(n=f(t.items).filter((function(t){return"file"===t.kind})),"drop"!==e?[2,n]:[4,Promise.all(n.map(p))]):[3,2];case 1:return[2,c(h(r.sent()))];case 2:return[2,c(f(t.files).map((function(t){return i.toFileWithPath(t)})))]}}))}))}function c(t){return t.filter((function(t){return-1===o.indexOf(t.name)}))}function f(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function p(t){if("function"!=typeof t.webkitGetAsEntry)return d(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?y(e):d(t)}function h(t){return t.reduce((function(t,e){return r.__spread(t,Array.isArray(e)?h(e):[e])}),[])}function d(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=i.toFileWithPath(e);return Promise.resolve(n)}function g(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,t.isDirectory?y(t):A(t)]}))}))}function y(t){var e=t.createReader();return new Promise((function(t,n){var i=[];!function o(){var a=this;e.readEntries((function(e){return r.__awaiter(a,void 0,void 0,(function(){var a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:if(e.length)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return a=r.sent(),t(a),[3,4];case 3:return s=r.sent(),n(s),[3,4];case 4:return[3,6];case 5:u=Promise.all(e.map(g)),i.push(u),o(),r.label=6;case 6:return[2]}}))}))}),(function(t){n(t)}))}()}))}function A(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,new Promise((function(e,n){t.file((function(n){var r=i.toFileWithPath(n,t.fullPath);e(r)}),(function(t){n(t)}))}))]}))}))}})),a.register("15BpE",(function(e,n){t(e.exports,"__awaiter",(function(){return r})),t(e.exports,"__generator",(function(){return i})),t(e.exports,"__spread",(function(){return a}));function r(t,e,n,r){return new(n||(n=Promise))((function(i,o){var a=function(t){try{u(r.next(t))}catch(t){o(t)}},s=function(t){try{u(r.throw(t))}catch(t){o(t)}},u=function(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)};u((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,i,o,a=function(t){return function(e){return s([t,e])}},s=function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}},u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}Object.create})),a.register("kxrSa",(function(e,n){t(e.exports,"toFileWithPath",(function(){return i}));var r=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function i(t,e){var n=function(t){var e=t.name;if(e&&-1!==e.lastIndexOf(".")&&!t.type){var n=e.split(".").pop().toLowerCase(),i=r.get(n);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}(t);if("string"!=typeof n.path){var i=t.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof e?e:"string"==typeof i&&i.length>0?i:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}})),a.register("bHh0p",(function(e,n){t(e.exports,"fileAccepted",(function(){return i})),t(e.exports,"fileMatchSize",(function(){return o})),t(e.exports,"allFilesAccepted",(function(){return u})),t(e.exports,"isPropagationStopped",(function(){return l})),t(e.exports,"isEvtWithFiles",(function(){return c})),t(e.exports,"onDocumentDragOver",(function(){return f})),t(e.exports,"isIeOrEdge",(function(){return d})),t(e.exports,"composeEventHandlers",(function(){return g}));var r=a("duq8h");function i(t,e){return"application/x-moz-file"===t.type||r.default(t,e)}function o(t,e,n){if(s(t.size)){if(s(e)&&s(n))return t.size>=e&&t.size<=n;if(s(e))return t.size>=e;if(s(n))return t.size<=n}return!0}function s(t){return null!=t}function u(t){var e=t.files,n=t.accept,r=t.minSize,a=t.maxSize;return!(!t.multiple&&e.length>1)&&e.every((function(t){return i(t,n)&&o(t,r,a)}))}function l(t){return"function"==typeof t.isPropagationStopped?t.isPropagationStopped():void 0!==t.cancelBubble&&t.cancelBubble}function c(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,(function(t){return"Files"===t||"application/x-moz-file"===t})):!!t.target&&!!t.target.files}function f(t){t.preventDefault()}function p(t){return-1!==t.indexOf("MSIE")||-1!==t.indexOf("Trident/")}function h(t){return-1!==t.indexOf("Edge/")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return p(t)||h(t)}function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.some((function(e){return!l(t)&&e&&e.apply(void 0,[t].concat(r)),l(t)}))}}})),a.register("duq8h",(function(e,n){var r;t(e.exports,"default",(function(){return r}),(function(t){return r=t})),r=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some((function(t){var e=t.trim().toLowerCase();return"."===e.charAt(0)?r.toLowerCase().endsWith(e):e.endsWith("/*")?o===e.replace(/\/.*$/,""):i===e}))}return!0}})),a.register("gIPYo",(function(t,e){var n=a("5qgrd");t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e){t.exports=a("6cds3")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseModalBackground=void 0;var r,i,o,a=(r=["\n  display: flex;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 30;\n  background-color: rgba(0, 0, 0, 0.5);\n  align-items: center;\n  justify-content: center;\n"],i=["\n  display: flex;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 30;\n  background-color: rgba(0, 0, 0, 0.5);\n  align-items: center;\n  justify-content: center;\n"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(i)}}))),s=(o=n(2))&&o.__esModule?o:{default:o};e.BaseModalBackground=s.default.div.withConfig({displayName:"baseStyles__BaseModalBackground",componentId:"sc-12bzkqq-0"})(a)},function(t,e){t.exports=a("k1UaX")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Consumer=e.Provider=void 0;var r,i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext({}),o=i.Provider,a=i.Consumer;e.Provider=o,e.Consumer=a},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseModalBackground=e.ModalProvider=void 0;var i=n(1),o=r(n(5)),a=r(n(6));e.ModalProvider=o.default,e.BaseModalBackground=i.BaseModalBackground,e.default=a.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o,a=(o=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}},function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}),s=r(0),u=(i=s)&&i.__esModule?i:{default:i},l=r(1),c=r(3),f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={modalNode:null,BackgroundComponent:l.BaseModalBackground},n.setModalNode=n.setModalNode.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":n.default(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),a(e,[{key:"setModalNode",value:function(t){this.setState({modalNode:t})}},{key:"render",value:function(){return u.default.createElement(c.Provider,{value:{modalNode:this.state.modalNode,BackgroundComponent:this.state.BackgroundComponent}},this.props.children,u.default.createElement("div",{ref:this.setModalNode}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.backgroundComponent!==e.BackgroundComponent&&t.backgroundComponent?{BackgroundComponent:t.backgroundComponent}:null}}]),e}();e.default=f},function(t,e,r){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}},o=function(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},u=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":n.default(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)};Object.defineProperty(e,"__esModule",{value:!0});var l,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=(l=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}},function(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}),p=o(["",""],["",""]),h=o([""],[""]),d=r(0),g=i(d),y=i(r(7)),A=r(2),v=i(A),m=r(3),_=function(t){function e(t){a(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={isOpen:!1},n.node=null,n.prevBodyOverflow=null,n.onKeydown=n.onKeydown.bind(n),n.onBackgroundClick=n.onBackgroundClick.bind(n),n.cleanUp=n.cleanUp.bind(n),n}return u(e,d.Component),f(e,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.setState({isOpen:this.props.isOpen})}},{key:"componentDidUpdate",value:function(t,e){e.isOpen!==this.state.isOpen&&(this.state.isOpen?this.state.isOpen&&(document.addEventListener("keydown",this.onKeydown),this.props.allowScroll||(this.prevBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden"),this.props.afterOpen&&this.props.afterOpen()):(this.cleanUp(),this.props.afterClose&&this.props.afterClose())),t.isOpen!==this.props.isOpen&&(this.props.isOpen?this.handleChange("beforeOpen",{isOpen:!0}):this.handleChange("beforeClose",{isOpen:!1}))}},{key:"handleChange",value:function(t,e){var n=this;if(this.props[t])try{this.props[t]().then((function(){return n.setState(e)}))}catch(t){this.setState(e)}else this.setState(e)}},{key:"componentWillUnmount",value:function(){this.props.isOpen&&this.cleanUp()}},{key:"cleanUp",value:function(){document.removeEventListener("keydown",this.onKeydown),this.props.allowScroll||(document.body.style.overflow=this.prevBodyOverflow||"")}},{key:"onKeydown",value:function(t){"Escape"===t.key&&this.props.onEscapeKeydown&&this.props.onEscapeKeydown(t)}},{key:"onBackgroundClick",value:function(t){this.node===t.target&&this.props.onBackgroundClick&&this.props.onBackgroundClick(t)}},{key:"render",value:function(){var t,e=this,n=this.props,r=n.WrapperComponent,i=n.children,o=(n.onBackgroundClick,n.onEscapeKeydown,n.allowScroll,n.beforeOpen,n.afterOpen,n.beforeClose,n.afterClose,n.backgroundProps),a=(n.isOpen,function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(n,["WrapperComponent","children","onBackgroundClick","onEscapeKeydown","allowScroll","beforeOpen","afterOpen","beforeClose","afterClose","backgroundProps","isOpen"])),s=this.state.isOpen;return t=r?g.default.createElement(r,a,i):i,g.default.createElement(m.Consumer,null,(function(n){var r=n.modalNode,i=n.BackgroundComponent;return r&&i&&s?y.default.createPortal(g.default.createElement(i,c({},o,{onClick:e.onBackgroundClick,ref:function(t){e.node=t}}),t),r):null}))}}],[{key:"styled",value:function(){var t=v.default.div.withConfig({displayName:"Modal__styles",componentId:"sc-1q9xwty-0"})(p,A.css.apply(void 0,arguments))||v.default.div.withConfig({displayName:"Modal__styles",componentId:"sc-1q9xwty-1"})(h);return function(n){function r(){return a(this,r),s(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return u(r,d.Component),f(r,[{key:"render",value:function(){return g.default.createElement(e,c({WrapperComponent:t},this.props))}}]),r}()}}]),e}();_.defaultProps={backgroundProps:{}},e.default=_},function(t,e){t.exports=a("9nHRL")}])})),a.register("jcncr",(function(t,e){
/*! clipboard-copy. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */t.exports=function(t){if(navigator.clipboard)return navigator.clipboard.writeText(t).catch((function(t){throw void 0!==t?t:new DOMException("The request is not allowed","NotAllowedError")}));var e=document.createElement("span");e.textContent=t,e.style.whiteSpace="pre",e.style.webkitUserSelect="auto",e.style.userSelect="all",document.body.appendChild(e);var n=window.getSelection(),r=window.document.createRange();n.removeAllRanges(),r.selectNode(e),n.addRange(r);var i=!1;try{i=window.document.execCommand("copy")}catch(t){console.log("error",t)}return n.removeAllRanges(),window.document.body.removeChild(e),i?Promise.resolve():Promise.reject(new DOMException("The request is not allowed","NotAllowedError"))}})),a.register("asTPE",(function(t,e){var n;t.exports,n=function(){return function t(e,n,r){var i,o,a=function(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),i=r.length,o=0,a=new Uint8Array(i);o<i;++o)a[o]=r.charCodeAt(o);return new g([a],{type:n})},s=function(t,e){if("download"in h)return h.href=t,h.setAttribute("download",y),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout((function(){h.click(),document.body.removeChild(h),!0===e&&setTimeout((function(){u.URL.revokeObjectURL(h.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,l)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,l)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)},u=window,l="application/octet-stream",c=r||l,f=e,p=!n&&!r&&f,h=document.createElement("a"),d=function(t){return String(t)},g=u.Blob||u.MozBlob||u.WebKitBlob||d,y=n||"download";if(g=g.call?g.bind(u):Blob,"true"===String(this)&&(c=(f=[f,c])[0],f=f[1]),p&&p.length<2048&&(y=p.split("/").pop().split("?")[0],h.href=p,-1!==h.href.indexOf(p))){var A=new XMLHttpRequest;return A.open("GET",p,!0),A.responseType="blob",A.onload=function(e){t(e.target.response,y,l)},setTimeout((function(){A.send()}),0),A}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(f)){if(!(f.length>2096103.424&&g!==d))return navigator.msSaveBlob?navigator.msSaveBlob(a(f),y):s(f);c=(f=a(f)).type||l}else if(/([\x80-\xff])/.test(f)){for(var v=0,m=new Uint8Array(f.length),_=m.length;v<_;++v)m[v]=f.charCodeAt(v);f=new g([m],{type:c})}if(i=f instanceof g?f:new g([f],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(i,y);if(u.URL)s(u.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===d)try{return s("data:"+c+";base64,"+u.btoa(i))}catch(t){return s("data:"+c+","+encodeURIComponent(i))}(o=new FileReader).onload=function(t){s(this.result)},o.readAsDataURL(i)}return!0}},"function"==typeof define&&define.amd?define([],n):t.exports=n()})),a.register("RJQNM",(function(t,e){var n=a("9wLUZ"),r=a("4R2nv").tag;function i(t,e){return function(i){if(!i.properties||!o.valid(i.geometry))return"";var a=o.any(i.geometry);if(!a)return"";var s="",c="";if(t.simplestyle){var f=function(t){var e="";t["marker-symbol"]&&(e=e+"ms"+t["marker-symbol"]);t["marker-color"]&&(e=e+"mc"+t["marker-color"].replace("#",""));t["marker-size"]&&(e=e+"ms"+t["marker-size"]);t.stroke&&(e=e+"s"+t.stroke.replace("#",""));t["stroke-width"]&&(e=e+"sw"+t["stroke-width"].toString().replace(".",""));t["stroke-opacity"]&&(e=e+"mo"+t["stroke-opacity"].toString().replace(".",""));t.fill&&(e=e+"f"+t.fill.replace("#",""));t["fill-opacity"]&&(e=e+"fo"+t["fill-opacity"].toString().replace(".",""));return e}(i.properties);f&&(o.isPoint(i.geometry)&&function(t){return!!(t["marker-size"]||t["marker-symbol"]||t["marker-color"])}(i.properties)?(-1===e.indexOf(f)&&(s=function(t,e){return r("Style",{id:e},r("IconStyle",r("Icon",r("href",function(t){var e=t["marker-size"]||"medium",n=t["marker-symbol"]?"-"+t["marker-symbol"]:"",r=(t["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+e.charAt(0)+n+"+"+r+".png"}(t))))+r("hotSpot",{xunits:"fraction",yunits:"fraction",x:"0.5",y:"0.5"},""))}(i.properties,f),e.push(f)),c=r("styleUrl","#"+f)):(o.isPolygon(i.geometry)||o.isLine(i.geometry))&&function(t){for(var e in t)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[e])return!0}(i.properties)&&(-1===e.indexOf(f)&&(s=function(t,e){var n=r("LineStyle",r("color",l(t.stroke,t["stroke-opacity"])||"ff555555")+r("width",{},void 0===t["stroke-width"]?2:t["stroke-width"])),i="";(t.fill||t["fill-opacity"])&&(i=r("PolyStyle",r("color",{},l(t.fill,t["fill-opacity"])||"88555555")));return r("Style",{id:e},n+i)}(i.properties,f),e.push(f)),c=r("styleUrl","#"+f)))}var p={};return i.id&&(p.id=i.id),s+r("Placemark",p,function(t,e){return t[e.name]?r("name",n(t[e.name])):""}(i.properties,t)+function(t,e){return t[e.description]?r("description",n(t[e.description])):""}(i.properties,t)+function(t){return r("ExtendedData",{},function(t){var e=[];for(var n in t)t[n]?e.push([n,t[n]]):e.push([n,""]);return e}(t).map(u).join(""))}(i.properties)+function(t,e){return t[e.timestamp]?r("TimeStamp",r("when",n(t[e.timestamp]))):""}(i.properties,t)+a+c)}}t.exports=function(t,e){return'<?xml version="1.0" encoding="UTF-8"?>'+r("kml",{xmlns:"http://www.opengis.net/kml/2.2"},r("Document",function(t){return void 0!==t.documentName?r("name",t.documentName):""}(e=e||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"})+function(t){return void 0!==t.documentDescription?r("description",t.documentDescription):""}(e)+function(t,e){if(!t.type)return"";var n=[];switch(t.type){case"FeatureCollection":return t.features?t.features.map(i(e,n)).join(""):"";case"Feature":return i(e,n)(t);default:return i(e,n)({type:"Feature",geometry:t,properties:{}})}}(t,e)))};var o={Point:function(t){return r("Point",r("coordinates",t.coordinates.join(",")))},LineString:function(t){return r("LineString",r("coordinates",s(t.coordinates)))},Polygon:function(t){if(!t.coordinates.length)return"";var e=t.coordinates[0],n=t.coordinates.slice(1),i=r("outerBoundaryIs",r("LinearRing",r("coordinates",s(e)))),o=n.map((function(t){return r("innerBoundaryIs",r("LinearRing",r("coordinates",s(t))))})).join("");return r("Polygon",i+o)},MultiPoint:function(t){return t.coordinates.length?r("MultiGeometry",t.coordinates.map((function(t){return o.Point({coordinates:t})})).join("")):""},MultiPolygon:function(t){return t.coordinates.length?r("MultiGeometry",t.coordinates.map((function(t){return o.Polygon({coordinates:t})})).join("")):""},MultiLineString:function(t){return t.coordinates.length?r("MultiGeometry",t.coordinates.map((function(t){return o.LineString({coordinates:t})})).join("")):""},GeometryCollection:function(t){return r("MultiGeometry",t.geometries.map(o.any).join(""))},valid:function(t){return t&&t.type&&(t.coordinates||"GeometryCollection"===t.type&&t.geometries&&t.geometries.every(o.valid))},any:function(t){return o[t.type]?o[t.type](t):""},isPoint:function(t){return"Point"===t.type||"MultiPoint"===t.type},isPolygon:function(t){return"Polygon"===t.type||"MultiPolygon"===t.type},isLine:function(t){return"LineString"===t.type||"MultiLineString"===t.type}};function s(t){return t.map((function(t){return t.join(",")})).join(" ")}function u(t){return r("Data",{name:t[0]},r("value",{},n(t[1]?t[1].toString():"")))}function l(t,e){if("string"!=typeof t)return"";if(3===(t=t.replace("#","").toLowerCase()).length)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(6!==t.length)return"";var n=t[0]+t[1],r=t[2]+t[3],i=t[4]+t[5],o="ff";return"number"==typeof e&&e>=0&&e<=1&&((o=(255*e).toString(16)).indexOf(".")>-1&&(o=o.substr(0,o.indexOf("."))),o.length<2&&(o="0"+o)),o+i+r+n}})),a.register("9wLUZ",(function(t,e){(t.exports=function t(e,n){var r;if(null!=e)return n=(n||"").replace(/[^&"<>\']/g,""),r="([&\"<>'])".replace(new RegExp("["+n+"]","g"),""),e.replace(new RegExp(r,"g"),(function(e,n){return t.map[n]}))}).map={">":"&gt;","<":"&lt;","'":"&apos;",'"':"&quot;","&":"&amp;"}})),a.register("4R2nv",(function(e,n){var r;t(e.exports,"tag",(function(){return r}),(function(t){return r=t}));var i=a("9wLUZ");function o(t){return Object.keys(t).length?" "+Object.keys(t).map((function(e){return e+'="'+i(t[e])+'"'})).join(" "):""}r=function(t,e,n){(Array.isArray(e)||"string"==typeof e)&&(n=e,e={});Array.isArray(n)&&(n="\n"+n.map((function(t){return"  "+t})).join("\n")+"\n");return"<"+t+o(e)+">"+n+"</"+t+">"}})),a.register("dToYb",(function(t,e){t.exports=a("9FZDf")(a("17QCl").getBundleURL("3ZyPG")+a("lGKbD").resolve("eOPGU")).then((function(){return a("cNIke")}))})),a.register("9FZDf",(function(t,e){"use strict";var n=a("9jW6n");t.exports=n((function(t){return new Promise((function(e,n){var r=document.getElementsByTagName("script");if([].concat(r).some((function(e){return e.src===t})))e();else{var i=document.createElement("link");i.href=t,i.rel="preload",i.as="script",document.head.appendChild(i);var o=document.createElement("script");o.async=!0,o.type="text/javascript",o.charset="utf-8",o.src=t,o.onerror=function(e){var r=new TypeError("Failed to fetch dynamically imported module: ".concat(t,". Error: ").concat(e.message));o.onerror=o.onload=null,o.remove(),n(r)},o.onload=function(){o.onerror=o.onload=null,e()},document.getElementsByTagName("head")[0].appendChild(o)}}))}))})),a.register("9jW6n",(function(t,e){"use strict";var n={},r={},i={};function o(t){switch(t){case"preload":return r;case"prefetch":return i;default:return n}}t.exports=function(t,e){return function(n){var r=o(e);return r[n]?r[n]:r[n]=t.apply(null,arguments).catch((function(t){throw delete r[n],t}))}}})),a("lGKbD").register(JSON.parse('{"3ZyPG":"index.js","cAG3R":"logo.0a6936ba.svg","eOPGU":"web-vitals.0b293820.js","i20An":"index.css"}'));var Iv;Iv=a("a58XM");var Mv=a("6cds3"),Ov=a("9nHRL");c=a("1zCSZ"),Yn=a("cqwPg"),yt=a("11zLF"),Qn=a("4Z8U5");a("17QCl").getBundleURL("3ZyPG"),a("lGKbD").resolve("cAG3R");c=a("1zCSZ"),Yn=a("cqwPg"),f=a("gj7DP"),Qn=a("4Z8U5"),Mv=a("6cds3"),yt=a("11zLF"),c=a("1zCSZ"),Mv=a("6cds3"),Mv=a("6cds3");var Lv="undefined"!=typeof window?Mv.useLayoutEffect:Mv.useEffect;f=a("gj7DP"),Mv=a("6cds3");function Rv(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}function Dv(t){return t?"function"==typeof t?Mv.createElement(rf,{},t):Array.isArray(t)?t.map(Dv):t.type===r(Mv).Fragment?Dv(t.props.children):(Rv(t.type,rf),t):t}f=a("gj7DP"),Mv=a("6cds3"),Mv=a("6cds3");var Nv={position:"absolute",zIndex:-1};function Fv(t,e){return t?"function"==typeof t?t(e):Array.isArray(t)?t.map((function(t){return Fv(t,e)})):(r=(n=t)&&n.type,(i=r&&r.defaultProps)&&i.mapStyle?(e.style=Nv,Mv.cloneElement(t,e)):function(t){var e=t&&t.type;return e&&e.deckGLViewProps}(t)?Mv.cloneElement(t,e):t):t;var n,r,i}var jv={mixBlendMode:null};function zv(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}var Bv=Mv.forwardRef((function(t,e){var n=Mv.useRef({}).current,i=c.default(Mv.useState(0),2),o=i[0],a=i[1];n.forceUpdate=a;var s=Mv.useRef(null),u=Mv.useRef(null),l=Mv.useMemo((function(){return n=(e=t).children,i=e.layers,o=e.views,a=[],s=[],u={},r(Mv).Children.forEach(Dv(n),(function(t){if(t){var e=t.type;if(Rv(e,xg)){var n=function(t,e){var n={},r=t.defaultProps||{};for(var i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}(e,t.props);s.push(n)}else a.push(t);if(e!==rf&&Rv(e,rf)&&t.props.id){var r=new e(t.props);u[r.id]=r}}})),Object.keys(u).length>0&&(Array.isArray(o)?o.forEach((function(t){u[t.id]=t})):o&&(u[o.id]=o),o=Object.values(u)),{layers:i=s.length>0?f.default(s).concat(f.default(i)):i,children:a,views:o};var e,n,i,o,a,s,u}),[t.layers,t.views,t.children]),p=!0,h=function(e){return p&&t.viewState?(n.viewStateUpdateRequested=e,null):(n.viewStateUpdateRequested=null,t.onViewStateChange(e))},d=function(e){p?n.interactionStateUpdateRequested=e:(n.interactionStateUpdateRequested=null,t.onInteractionStateChange(e))},g=Mv.useMemo((function(){var e=yt.default({},t,{style:null,width:"100%",height:"100%",layers:l.layers,views:l.views,onViewStateChange:h,onInteractionStateChange:d});return n.deck&&n.deck.setProps(e),e}),[t]);Mv.useEffect((function(){return n.deck=function(t,e){var n=new(e.Deck||rd)(yt.default({},e,{style:null,width:"100%",height:"100%",_customRender:function(e){t.redrawReason=e;var r=n.viewManager.getViewports();t.lastRenderedViewports!==r?t.forceUpdate((function(t){return t+1})):zv(t)}}));return n}(n,yt.default({},g,{parent:s.current,canvas:u.current})),function(){return n.deck.finalize()}}),[]),Lv((function(){zv(n);var t=n.viewStateUpdateRequested,e=n.interactionStateUpdateRequested;t&&h(t),e&&d(e)})),Mv.useImperativeHandle(e,(function(){return function(t){var e={pickObject:function(e){return t.deck.pickObject(e)},pickMultipleObjects:function(e){return t.deck.pickMultipleObjects(e)},pickObjects:function(e){return t.deck.pickObjects(e)}};return Object.defineProperty(e,"deck",{get:function(){return t.deck}}),e}(n)}),[]);var y=(n.deck||{}).viewManager,A=y&&y.getViewports(),v=t.ContextProvider,m=t.width,_=t.height,b=t.id,x=t.style,w=Mv.useMemo((function(){return function(t){var e=t.width,n=t.height,r=t.style,i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},o={left:0,top:0};if(r)for(var a in r)a in jv?o[a]=r[a]:i[a]=r[a];return{containerStyle:i,canvasStyle:o}}({width:m,height:_,style:x})}),[m,_,x]),E=w.containerStyle,S=w.canvasStyle;if(!n.viewStateUpdateRequested&&n.lastRenderedViewports===A||n.version!==o){n.lastRenderedViewports=A,n.version=o;var P=function(t){var e=t.children,n=t.deck,r=t.ContextProvider,i=(n||{}).viewManager;if(!i||!i.views.length)return[];var o={},a=i.views[0].id,s=!0,u=!1,l=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value,d=a,g=h;Rv(h.type,rf)&&(d=h.props.id||a,g=h.props.children);var y=i.getViewport(d),A=i.getViewState(d);y&&(g=Fv(g,{x:y.x,y:y.y,width:y.width,height:y.height,viewport:y,viewState:A}),o[d]||(o[d]={viewport:y,children:[]}),o[d].children.push(g))}}catch(t){u=!0,l=t}finally{try{s||null==p.return||p.return()}finally{if(u)throw l}}return Object.keys(o).map((function(t){var e=o[t],i=e.viewport,a=e.children,s={position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height},u="view-".concat(t),l=Mv.createElement.apply(void 0,["div",{key:u,id:u,style:s}].concat(f.default(a)));if(r){var c={viewport:i,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:function(e){e.viewId=t,n._onViewStateChange(e)}};return Mv.createElement(r,{key:u,value:c},l)}return l}))}({children:l.children,deck:n.deck,ContextProvider:v}),k=Mv.createElement("canvas",{key:"canvas",id:b||"deckgl-overlay",ref:u,style:S});n.control=Mv.createElement("div",{id:"".concat(b||"deckgl","-wrapper"),ref:s,style:E},[k,P])}return p=!1,n.control}));Bv.propTypes=rd.getPropTypes(r(Tv)),Bv.defaultProps=rd.defaultProps;var Uv=Bv;Yn=a("cqwPg"),Qn=a("4Z8U5"),f=a("gj7DP");function Vv(t){var e,n=0,r=0,i=0,o=0,a=0,s=0,u=0,l=0,c=0,p=new Set,h=!0,d=!1,g=void 0;try{for(var y,A=t[Symbol.iterator]();!(h=(y=A.next()).done);h=!0){var v=y.value.geometry;switch(v.type){case"Point":r++,n++,p.add(v.coordinates.length);break;case"MultiPoint":r++,n+=v.coordinates.length;var m=!0,_=!1,b=void 0;try{for(var x,w=v.coordinates[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var E=x.value;p.add(E.length)}}catch(t){_=!0,b=t}finally{try{m||null==w.return||w.return()}finally{if(_)throw b}}break;case"LineString":a++,i+=v.coordinates.length,o++;var S=!0,P=!1,k=void 0;try{for(var C,T=v.coordinates[Symbol.iterator]();!(S=(C=T.next()).done);S=!0){var I=C.value;p.add(I.length)}}catch(t){P=!0,k=t}finally{try{S||null==T.return||T.return()}finally{if(P)throw k}}break;case"MultiLineString":a++;var M=!0,O=!1,L=void 0;try{for(var R,D=v.coordinates[Symbol.iterator]();!(M=(R=D.next()).done);M=!0){var N=R.value;i+=N.length,o++;var F=!0,j=!1,z=void 0;try{for(var B,U=N[Symbol.iterator]();!(F=(B=U.next()).done);F=!0){var V=B.value;p.add(V.length)}}catch(t){j=!0,z=t}finally{try{F||null==U.return||U.return()}finally{if(j)throw z}}}}catch(t){O=!0,L=t}finally{try{M||null==D.return||D.return()}finally{if(O)throw L}}break;case"Polygon":c++,u++,l+=v.coordinates.length;var G=v.coordinates.flat();s+=G.length;var q=!0,W=!1,H=void 0;try{for(var X,Z=G[Symbol.iterator]();!(q=(X=Z.next()).done);q=!0){var Y=X.value;p.add(Y.length)}}catch(t){W=!0,H=t}finally{try{q||null==Z.return||Z.return()}finally{if(W)throw H}}break;case"MultiPolygon":c++;var Q=!0,K=!1,J=void 0;try{for(var $,tt=v.coordinates[Symbol.iterator]();!(Q=($=tt.next()).done);Q=!0){var et=$.value;u++,l+=et.length;var nt=et.flat();s+=nt.length;var rt=!0,it=!1,ot=void 0;try{for(var at,st=nt[Symbol.iterator]();!(rt=(at=st.next()).done);rt=!0){var ut=at.value;p.add(ut.length)}}catch(t){it=!0,ot=t}finally{try{rt||null==st.return||st.return()}finally{if(it)throw ot}}}}catch(t){K=!0,J=t}finally{try{Q||null==tt.return||tt.return()}finally{if(K)throw J}}break;default:throw new Error("Unsupported geometry type: ".concat(v.type))}}}catch(t){d=!0,g=t}finally{try{h||null==A.return||A.return()}finally{if(d)throw g}}return{coordLength:p.size>0?(e=Math).max.apply(e,f.default(p)):2,pointPositionsCount:n,pointFeaturesCount:r,linePositionsCount:i,linePathsCount:o,lineFeaturesCount:a,polygonPositionsCount:s,polygonObjectsCount:u,polygonRingsCount:l,polygonFeaturesCount:c}}f=a("gj7DP"),yt=a("11zLF");function Gv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{coordLength:2,fixRingWinding:!0};return t.map((function(t){return Xv(t,e)}))}function qv(t,e,n,r){var i;n.push(e.length),(i=e).push.apply(i,f.default(t));for(var o=t.length;o<r.coordLength;o++)e.push(0)}function Wv(t,e,n,r){n.push(e.length);var i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l,c=s.value;(l=e).push.apply(l,f.default(c));for(var p=c.length;p<r.coordLength;p++)e.push(0)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}function Hv(t,e,n,r,i){var o=0,a=[],s=[],u=!0,l=!1,c=void 0;try{for(var f,p=t[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,d=qg(h.map((function(t){return t.slice(0,2)})).flat()),g=d<0;i.fixRingWinding&&(0===o&&!g||o>0&&g)&&(h.reverse(),d=-d),a.push(d),Wv(h,e,s,i),o++}}catch(t){l=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}o>0&&(r.push(a),n.push(s))}function Xv(t,e){var n=t.geometry;if("GeometryCollection"===n.type)throw new Error("GeometryCollection type not supported");var r,i,o=[],a=[];switch(n.type){case"Point":i="Point",qv(n.coordinates,o,a,e);break;case"MultiPoint":i="Point",n.coordinates.map((function(t){return qv(t,o,a,e)}));break;case"LineString":i="LineString",Wv(n.coordinates,o,a,e);break;case"MultiLineString":i="LineString",n.coordinates.map((function(t){return Wv(t,o,a,e)}));break;case"Polygon":i="Polygon",r=[],Hv(n.coordinates,o,a,r,e);break;case"MultiPolygon":i="Polygon",r=[],n.coordinates.map((function(t){return Hv(t,o,a,r,e)}));break;default:throw new Error("Unknown type: ".concat(i))}return yt.default({},t,{geometry:{type:i,indices:a,data:o,areas:r}})}yt=a("11zLF");function Zv(t,e,n){var r=Yv(t),i=Object.keys(r).filter((function(t){return r[t]!==Array}));return function(t,e,n){var r=e.pointPositionsCount,i=e.pointFeaturesCount,o=e.linePositionsCount,a=e.linePathsCount,s=e.lineFeaturesCount,u=e.polygonPositionsCount,l=e.polygonObjectsCount,c=e.polygonRingsCount,f=e.polygonFeaturesCount,p=e.propArrayTypes,h=e.coordLength,d=n.numericPropKeys,g=void 0===d?[]:d,y=n.PositionDataType,A=void 0===y?Float32Array:y,v=t[0]&&"id"in t[0],m=t.length>65535?Uint32Array:Uint16Array,_={type:"Point",positions:new A(r*h),globalFeatureIds:new m(r),featureIds:i>65535?new Uint32Array(r):new Uint16Array(r),numericProps:{},properties:[],fields:[]},b={type:"LineString",pathIndices:o>65535?new Uint32Array(a+1):new Uint16Array(a+1),positions:new A(o*h),globalFeatureIds:new m(o),featureIds:s>65535?new Uint32Array(o):new Uint16Array(o),numericProps:{},properties:[],fields:[]},x={type:"Polygon",polygonIndices:u>65535?new Uint32Array(l+1):new Uint16Array(l+1),primitivePolygonIndices:u>65535?new Uint32Array(c+1):new Uint16Array(c+1),positions:new A(u*h),triangles:[],globalFeatureIds:new m(u),featureIds:f>65535?new Uint32Array(u):new Uint16Array(u),numericProps:{},properties:[],fields:[]},w=!0,E=!1,S=void 0,P=!0,k=!1,C=void 0;try{for(var T,I=[_,b,x][Symbol.iterator]();!(P=(T=I.next()).done);P=!0){var M=T.value;try{for(var O,L=g[Symbol.iterator]();!(w=(O=L.next()).done);w=!0){var R=O.value,D=p[R];M.numericProps[R]=new D(M.positions.length/h)}}catch(t){E=!0,S=t}finally{try{w||null==L.return||L.return()}finally{if(E)throw S}}}}catch(t){k=!0,C=t}finally{try{P||null==I.return||I.return()}finally{if(k)throw C}}b.pathIndices[a]=o,x.polygonIndices[l]=u,x.primitivePolygonIndices[c]=u;var N={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0},F=!0,j=!1,z=void 0;try{for(var B,U=t[Symbol.iterator]();!(F=(B=U.next()).done);F=!0){var V=B.value,G=V.geometry,q=V.properties||{};switch(G.type){case"Point":Qv(G,_,N,h,q),_.properties.push(nm(q,g)),v&&_.fields.push({id:V.id}),N.pointFeature++;break;case"LineString":Kv(G,b,N,h,q),b.properties.push(nm(q,g)),v&&b.fields.push({id:V.id}),N.lineFeature++;break;case"Polygon":Jv(G,x,N,h,q),x.properties.push(nm(q,g)),v&&x.fields.push({id:V.id}),N.polygonFeature++;break;default:throw new Error("Invalid geometry type")}N.feature++}}catch(t){j=!0,z=t}finally{try{F||null==U.return||U.return()}finally{if(j)throw z}}return function(t,e,n,r){return{points:yt.default({},t,{positions:{value:t.positions,size:r},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:tm(t.numericProps,1)}),lines:yt.default({},e,{positions:{value:e.positions,size:r},pathIndices:{value:e.pathIndices,size:1},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:tm(e.numericProps,1)}),polygons:yt.default({},n,{positions:{value:n.positions,size:r},polygonIndices:{value:n.polygonIndices,size:1},primitivePolygonIndices:{value:n.primitivePolygonIndices,size:1},triangles:{value:new Uint32Array(n.triangles),size:1},globalFeatureIds:{value:n.globalFeatureIds,size:1},featureIds:{value:n.featureIds,size:1},numericProps:tm(n.numericProps,1)})}}(_,b,x,h)}(t,yt.default({propArrayTypes:r},e),{numericPropKeys:n&&n.numericPropKeys||i,PositionDataType:n?n.PositionDataType:Float32Array})}function Yv(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.properties)for(var u in s.properties){var l=s.properties[u];e[u]=rm(l,e[u])}}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}function Qv(t,e,n,r,i){e.positions.set(t.data,n.pointPosition*r);var o=t.data.length/r;em(e,i,n.pointPosition,o),e.globalFeatureIds.fill(n.feature,n.pointPosition,n.pointPosition+o),e.featureIds.fill(n.pointFeature,n.pointPosition,n.pointPosition+o),n.pointPosition+=o}function Kv(t,e,n,r,i){e.positions.set(t.data,n.linePosition*r);var o=t.data.length/r;em(e,i,n.linePosition,o),e.globalFeatureIds.fill(n.feature,n.linePosition,n.linePosition+o),e.featureIds.fill(n.lineFeature,n.linePosition,n.linePosition+o);for(var a=0,s=t.indices.length;a<s;++a){var u=t.indices[a],l=a===s-1?t.data.length:t.indices[a+1];e.pathIndices[n.linePath++]=n.linePosition,n.linePosition+=(l-u)/r}}function Jv(t,e,n,r,i){e.positions.set(t.data,n.polygonPosition*r);var o=t.data.length/r;em(e,i,n.polygonPosition,o),e.globalFeatureIds.fill(n.feature,n.polygonPosition,n.polygonPosition+o),e.featureIds.fill(n.polygonFeature,n.polygonPosition,n.polygonPosition+o);for(var a=0,s=t.indices.length;a<s;++a){var u=n.polygonPosition;e.polygonIndices[n.polygonObject++]=u;for(var l=t.areas[a],c=t.indices[a],f=t.indices[a+1],p=0,h=c.length;p<h;++p){var d=c[p],g=p===h-1?void 0===f?t.data.length:f[0]:c[p+1];e.primitivePolygonIndices[n.polygonRing++]=n.polygonPosition,n.polygonPosition+=(g-d)/r}$v(e,l,c,{startPosition:u,endPosition:n.polygonPosition,coordLength:r})}}function $v(t,e,n,r){for(var i=r.startPosition,o=r.endPosition,a=r.coordLength,s=i*a,u=o*a,l=t.positions.subarray(s,u),c=n[0],f=Hg(l,n.slice(1).map((function(t){return(t-c)/a})),a,e),p=0,h=f.length;p<h;++p)t.triangles.push(i+f[p])}function tm(t,e){var n={};for(var r in t)n[r]={value:t[r],size:e};return n}function em(t,e,n,r){for(var i in t.numericProps)if(i in e){var o=e[i];t.numericProps[i].fill(o,n,n+r)}}function nm(t,e){var n={};for(var r in t)e.includes(r)||(n[r]=t[r]);return n}function rm(t,e){return e!==Array&&Number.isFinite(t)?e===Float64Array||Math.fround(t)!==t?Float64Array:Float32Array:Array}var im={};c=a("1zCSZ"),Qn=a("4Z8U5");!function(t){"use strict";var e=function(t){return t&&t.normalize&&t.normalize(),t&&t.textContent||""},n=function(t,e){var n=t.getElementsByTagName(e);return n.length?n[0]:null},i=function(t){var r={};if(t){var i=n(t,"line");if(i){var o=e(n(i,"color")),a=parseFloat(e(n(i,"opacity"))),s=parseFloat(e(n(i,"width")));o&&(r.stroke=o),isNaN(a)||(r["stroke-opacity"]=a),isNaN(s)||(r["stroke-width"]=96*s/25.4)}}return r},o=function(t,r){var i,o,a={};for(o=0;o<r.length;o++)(i=n(t,r[o]))&&(a[r[o]]=e(i));return a},a=function(t){for(var n=o(t,["name","cmt","desc","type","time","keywords"]),r=t.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/GpxExtensions/v3","*"),i=0;i<r.length;i++){var a=r[i];a.parentNode.parentNode===t&&(n[a.tagName.replace(":","_")]=e(a))}var s=t.getElementsByTagName("link");s.length&&(n.links=[]);for(var u=0;u<s.length;u++)n.links.push(Object.assign({href:s[u].getAttribute("href")},o(s[u],["text","type"])));return n},s=function(t){var r=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))],i=n(t,"ele"),o=n(t,"time");if(i){var a=parseFloat(e(i));isNaN(a)||r.push(a)}return{coordinates:r,time:o?e(o):null,extendedValues:P(n(t,"extensions"))}},u=function(t){var e=l(t,"rtept");if(e)return{type:"Feature",properties:Object.assign(a(t),i(n(t,"extensions")),{_gpxType:"rte"}),geometry:{type:"LineString",coordinates:e.line}}},l=function(t,e){var n=t.getElementsByTagName(e);if(!(n.length<2)){for(var r=[],i=[],o={},a=0;a<n.length;a++){var u=s(n[a]);r.push(u.coordinates),u.time&&i.push(u.time);for(var l=0;l<u.extendedValues.length;l++){var f=c.default(u.extendedValues[l],2),p=f[0],h=f[1],d="heart"===p?p:p.replace("gpxtpx:","")+"s";o[d]||(o[d]=Array(n.length).fill(null)),o[d][a]=h}}return{line:r,times:i,extendedValues:o}}},f=function(t){for(var e=t.getElementsByTagName("trkseg"),n=[],r=[],o=[],s=0;s<e.length;s++){var u=l(e[s],"trkpt");u&&(o.push(u),u.times&&u.times.length&&r.push(u.times))}if(0!==o.length){for(var f=o.length>1,p=Object.assign(a(t),i(u(t,"extensions")),{_gpxType:"trk"},r.length?{coordinateProperties:{times:f?r:r[0]}}:{}),h=0;h<o.length;h++){var d=o[h];n.push(d.line);var g=!0,y=!1,A=void 0;try{for(var v,m=Object.entries(d.extendedValues)[Symbol.iterator]();!(g=(v=m.next()).done);g=!0){var _=c.default(v.value,2),b=_[0],x=_[1];p.coordinateProperties||(p.coordinateProperties={});var w=p.coordinateProperties;f?(w[b]||(w[b]=o.map((function(t){return new Array(t.line.length).fill(null)}))),w[b][h]=x):w[b]=x}}catch(t){y=!0,A=t}finally{try{g||null==m.return||m.return()}finally{if(y)throw A}}}return{type:"Feature",properties:p,geometry:f?{type:"MultiLineString",coordinates:n}:{type:"LineString",coordinates:n[0]}}}},p=r(Qn).mark((function t(e){var n,i,l,c,p,h,d,g,y;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getElementsByTagName("trk"),i=e.getElementsByTagName("rte"),l=e.getElementsByTagName("wpt"),c=0;case 2:if(!(c<n.length)){t.next=11;break}if(p=f(n[c]),t.t0=p,!t.t0){t.next=8;break}return t.next=8,p;case 8:c++,t.next=2;break;case 11:h=0;case 12:if(!(h<i.length)){t.next=21;break}if(d=u(i[h]),t.t1=d,!t.t1){t.next=18;break}return t.next=18,d;case 18:h++,t.next=12;break;case 21:g=0;case 22:if(!(g<l.length)){t.next=28;break}return t.next=25,y=l[g],{type:"Feature",properties:Object.assign(a(y),o(y,["sym"])),geometry:{type:"Point",coordinates:s(y).coordinates}};case 25:g++,t.next=22;break;case 28:case 29:case"end":return t.stop()}}),t)})),h=function(t,e){var r=[],i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=c.default(s.value,2),f=l[0],p=l[1],h=n(t,f);if(!h){var d=t.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/ActivityExtension/v2",f);d.length&&(h=d[0])}var g=parseFloat(d(h));isNaN(g)||r.push([p,g])}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r},d=function(t){var r=e(n(t,"LongitudeDegrees")),i=e(n(t,"LatitudeDegrees"));if(!r.length||!i.length)return null;var o,a=[parseFloat(r),parseFloat(i)],s=n(t,"AltitudeMeters"),u=n(t,"HeartRateBpm"),l=n(t,"Time");return s&&(o=parseFloat(e(s)),isNaN(o)||a.push(o)),{coordinates:a,time:l?e(l):null,heartRate:u?parseFloat(e(u)):null,extensions:h(t,k)}},g=function(t,e){var n=t.getElementsByTagName(e),r=[],i=[],o=[];if(n.length<2)return null;for(var a={extendedProperties:{}},s=0;s<n.length;s++){var u=d(n[s]);if(null!==u){r.push(u.coordinates),u.time&&i.push(u.time),u.heartRate&&o.push(u.heartRate);var l=!0,f=!1,p=void 0;try{for(var h,g=u.extensions[Symbol.iterator]();!(l=(h=g.next()).done);l=!0){var y=c.default(h.value,2),A=y[0],v=y[1];a.extendedProperties[A]||(a.extendedProperties[A]=Array(n.length).fill(null)),a.extendedProperties[A][s]=v}}catch(t){f=!0,p=t}finally{try{l||null==g.return||g.return()}finally{if(f)throw p}}}}return Object.assign(a,{line:r,times:i,heartRates:o})},y=function(t){var r,i=t.getElementsByTagName("Track"),o=[],a=[],s=[],u=[],l=function(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=c.default(o.value,2),u=s[0],l=s[1];e[u]=l}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}(h(t,C)),f=n(t,"Name");f&&(l.name=e(f));for(var p=0;p<i.length;p++)(r=g(i[p],"Trackpoint"))&&(o.push(r.line),r.times.length&&a.push(r.times),r.heartRates.length&&s.push(r.heartRates),u.push(r.extendedProperties));for(var d=0;d<u.length;d++){var y=u[d];for(var A in y)1===i.length?l[A]=r.extendedProperties[A]:(l[A]||(l[A]=o.map((function(t){return Array(t.length).fill(null)}))),l[A][d]=y[A])}if(0!==o.length)return(a.length||s.length)&&(l.coordinateProperties=Object.assign(a.length?{times:1===o.length?a[0]:a}:{},s.length?{heart:1===o.length?s[0]:s}:{})),{type:"Feature",properties:l,geometry:{type:1===o.length?"LineString":"MultiLineString",coordinates:1===o.length?o[0]:o}}},A=r(Qn).mark((function t(e){var n,i,o,a,s,u;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getElementsByTagName("Lap"),i=0;case 2:if(!(i<n.length)){t.next=11;break}if(o=y(n[i]),t.t0=o,!t.t0){t.next=8;break}return t.next=8,o;case 8:i++,t.next=2;break;case 11:a=e.getElementsByTagName("Courses"),s=0;case 13:if(!(s<a.length)){t.next=22;break}if(u=y(a[s]),t.t1=u,!t.t1){t.next=19;break}return t.next=19,u;case 19:s++,t.next=13;break;case 22:case"end":return t.stop()}}),t)})),v=function(t){if(!t||!t.length)return 0;for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e},m=function(t){return t.replace(T,"").split(",").map(parseFloat)},_=function(t){return t.replace(I,"").split(M).map(m)},b=function(t,r,i){var o=e(n(r,"color"))||"",a="stroke"==i||"fill"===i?i:i+"-color";"#"===o.substr(0,1)&&(o=o.substr(1)),6===o.length||3===o.length?t[a]=o:8===o.length&&(t[i+"-opacity"]=parseInt(o.substr(0,2),16)/255,t[a]="#"+o.substr(6,2)+o.substr(4,2)+o.substr(2,2))},x=function(t,r,i,o){var a=parseFloat(e(n(r,i)));isNaN(a)||(t[o]=a)},w=function(t){var n=t.getElementsByTagName("coord"),r=[],i=[];0===n.length&&(n=t.getElementsByTagName("gx:coord"));for(var o=0;o<n.length;o++)r.push(e(n[o]).split(" ").map(parseFloat));for(var a=t.getElementsByTagName("when"),s=0;s<a.length;s++)i.push(e(a[s]));return{coords:r,times:i}},E=function(t,r,i,o){var a,s=R(t),u={},l=e(n(t,"name")),c=e(n(t,"address")),f=e(n(t,"styleUrl")),p=e(n(t,"description")),h=n(t,"TimeSpan"),d=n(t,"TimeStamp"),g=n(t,"ExtendedData"),y=n(t,"IconStyle"),A=n(t,"LabelStyle"),v=n(t,"LineStyle"),m=n(t,"PolyStyle"),_=n(t,"visibility");if(l&&(u.name=l),c&&(u.address=c),f){"#"!==f[0]&&(f="#"+f),u.styleUrl=f,r[f]&&(u.styleHash=r[f]),i[f]&&(u.styleMapHash=i[f],u.styleHash=r[i[f].normal]);var w=o[u.styleHash];w&&(y||(y=n(w,"IconStyle")),A||(A=n(w,"LabelStyle")),v||(v=n(w,"LineStyle")),m||(m=n(w,"PolyStyle")))}if(p&&(u.description=p),h){var E=e(n(h,"begin")),S=e(n(h,"end"));u.timespan={begin:E,end:S}}if(d&&(u.timestamp=e(n(d,"when"))),y){b(u,y,"icon"),x(u,y,"scale","icon-scale"),x(u,y,"heading","icon-heading");var P=n(y,"hotSpot");if(P){var k=parseFloat(P.getAttribute("x")),C=parseFloat(P.getAttribute("y"));isNaN(k)||isNaN(C)||(u["icon-offset"]=[k,C])}var T=n(y,"Icon");if(T){var I=e(n(T,"href"));I&&(u.icon=I)}}if(A&&(b(u,A,"label"),x(u,A,"scale","label-scale")),v&&(b(u,v,"stroke"),x(u,v,"width","stroke-width")),m){b(u,m,"fill");var M=e(n(m,"fill")),O=e(n(m,"outline"));M&&(u["fill-opacity"]="1"===M?u["fill-opacity"]||1:0),O&&(u["stroke-opacity"]="1"===O?u["stroke-opacity"]||1:0)}if(g){var L=g.getElementsByTagName("Data"),D=g.getElementsByTagName("SimpleData");for(a=0;a<L.length;a++)u[L[a].getAttribute("name")]=e(n(L[a],"value"));for(a=0;a<D.length;a++)u[D[a].getAttribute("name")]=e(D[a])}_&&(u.visibility=e(_)),s.coordTimes.length&&(u.coordinateProperties={times:1===s.coordTimes.length?s.coordTimes[0]:s.coordTimes});var N={type:"Feature",geometry:0===s.geoms.length?null:1===s.geoms.length?s.geoms[0]:{type:"GeometryCollection",geometries:s.geoms},properties:u};return t.getAttribute("id")&&(N.id=t.getAttribute("id")),N},S=r(Qn).mark((function t(i){var o,a,s,u,l,c,f,p,h,d,g,y,A,m,_,b;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o={},a={},s={},u=i.getElementsByTagName("Placemark"),l=i.getElementsByTagName("Style"),c=i.getElementsByTagName("StyleMap"),f=0;f<l.length;f++)p=l[f],h=v(O(p)).toString(16),(d=p.getAttribute("id"))||"CascadingStyle"!==p.parentNode.tagName.replace("gx:","")||(d=p.parentNode.getAttribute("kml:id")||p.parentNode.getAttribute("id")),o["#"+d]=h,a[h]=p;for(g=0;g<c.length;g++){for(o["#"+c[g].getAttribute("id")]=v(O(c[g])).toString(16),y=c[g].getElementsByTagName("Pair"),A={},m=0;m<y.length;m++)A[e(n(y[m],"key"))]=e(n(y[m],"styleUrl"));s["#"+c[g].getAttribute("id")]=A}_=0;case 4:if(!(_<u.length)){t.next=13;break}if(b=E(u[_],o,s,a),t.t0=b,!t.t0){t.next=10;break}return t.next=10,b;case 10:_++,t.next=4;break;case 13:case"end":return t.stop()}}),t)}));function P(t){var n=[];if(null!==t)for(var r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];if(1===i.nodeType){var o=["heart","gpxtpx:hr","hr"].includes(i.nodeName)?"heart":i.nodeName;if("gpxtpx:TrackPointExtension"===o)n=n.concat(P(i));else{var a=e(i);n.push([o,isNaN(a)?a:parseFloat(a)])}}}return n}var k=[["heartRate","heartRates"],["Cadence","cadences"],["Speed","speeds"],["Watts","watts"]],C=[["TotalTimeSeconds","totalTimeSeconds"],["DistanceMeters","distanceMeters"],["MaximumSpeed","maxSpeed"],["AverageHeartRateBpm","avgHeartRate"],["MaximumHeartRateBpm","maxHeartRate"],["AvgSpeed","avgSpeed"],["AvgWatts","avgWatts"],["MaxWatts","maxWatts"]],T=/\s*/g,I=/^\s*|\s*$/g,M=/\s+/;function O(t){if(void 0!==t.xml)return t.xml;if(t.tagName){for(var e=t.tagName,n=0;n<t.attributes.length;n++)e+=t.attributes[n].name+t.attributes[n].value;for(var r=0;r<t.childNodes.length;r++)e+=O(t.childNodes[r]);return e}return"#text"===t.nodeName?(t.nodeValue||t.value||"").trim():"#cdata-section"===t.nodeName?t.nodeValue:""}var L=["Polygon","LineString","Point","Track","gx:Track"];function R(t){var r,i,o,a,s,u=[],l=[];if(n(t,"MultiGeometry"))return R(n(t,"MultiGeometry"));if(n(t,"MultiTrack"))return R(n(t,"MultiTrack"));if(n(t,"gx:MultiTrack"))return R(n(t,"gx:MultiTrack"));for(o=0;o<L.length;o++)if(i=t.getElementsByTagName(L[o]))for(a=0;a<i.length;a++)if(r=i[a],"Point"===L[o])u.push({type:"Point",coordinates:m(e(n(r,"coordinates")))});else if("LineString"===L[o])u.push({type:"LineString",coordinates:_(e(n(r,"coordinates")))});else if("Polygon"===L[o]){var c=r.getElementsByTagName("LinearRing"),f=[];for(s=0;s<c.length;s++)f.push(_(e(n(c[s],"coordinates"))));u.push({type:"Polygon",coordinates:f})}else if("Track"===L[o]||"gx:Track"===L[o]){var p=w(r);u.push({type:"LineString",coordinates:p.coords}),p.times.length&&l.push(p.times)}return{geoms:u,coordTimes:l}}t.gpx=function(t){return{type:"FeatureCollection",features:Array.from(p(t))}},t.gpxGen=p,t.kml=function(t){return{type:"FeatureCollection",features:Array.from(S(t))}},t.kmlGen=S,t.tcx=function(t){return{type:"FeatureCollection",features:Array.from(A(t))}},t.tcxGen=A,Object.defineProperty(t,"__esModule",{value:!0})}(im);var om,am={name:"KML (Keyhole Markup Language)",id:"kml",module:"kml",version:"3.1.8",extensions:["kml"],mimeTypes:["application/vnd.google-earth.kml+xml"],text:!0,tests:['<?xml version="1.0" encoding="UTF-8"?>\n<kml xmlns="http://www.opengis.net/kml/2.2">'],parse:(om=Yn.default(r(Qn).mark((function t(e,n){return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",sm((new TextDecoder).decode(e),n));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return om.apply(this,arguments)}),parseTextSync:sm,options:{kml:{},gis:{format:"geojson"}}};function sm(t,e){var n,r,i=(new DOMParser).parseFromString(t,"text/xml"),o=im.kml(i);if("object-row-table"===(null==e||null===(n=e.kml)||void 0===n?void 0:n.type))return o.features;switch(null==e||null===(r=e.gis)||void 0===r?void 0:r.format){case"geojson":return o;case"binary":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fixRingWinding:!0},n=Vv(t),r=n.coordLength,i=e.fixRingWinding;return Zv(Gv(t,{coordLength:r,fixRingWinding:i}),n,{numericPropKeys:e.numericPropKeys,PositionDataType:e.PositionDataType||Float32Array})}(o.features);case"raw":return i;default:throw new Error}}function um(){return um=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},um.apply(this,arguments)}function lm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cm(t,e){if(t){if("string"==typeof t)return lm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lm(t,e):void 0}}function fm(t){return function(t){if(Array.isArray(t))return lm(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||cm(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Mv=a("6cds3"),Mv=a("6cds3");function pm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||cm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Mv=a("6cds3"),Mv=a("6cds3");a("1Ft0x");var hm,dm,gm=(dm=function(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n},"undefined"!=typeof Map?Map:(hm=function(){this.__entries__=[]},Object.defineProperty(hm.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),hm.prototype.get=function(t){var e=dm(this.__entries__,t),n=this.__entries__[e];return n&&n[1]},hm.prototype.set=function(t,e){var n=dm(this.__entries__,t);~n?this.__entries__[n][1]=e:this.__entries__.push([t,e])},hm.prototype.delete=function(t){var e=this.__entries__,n=dm(e,t);~n&&e.splice(n,1)},hm.prototype.has=function(t){return!!~dm(this.__entries__,t)},hm.prototype.clear=function(){this.__entries__.splice(0)},hm.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},hm)),ym="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Am=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),vm="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Am):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var mm,_m=["top","right","bottom","left","width","height","size","weight"],bm="undefined"!=typeof MutationObserver,xm=((mm=function(){var t,e,n,r,i,o,a,s;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(t=this.refresh.bind(this),e=20,n=function(){o&&(o=!1,t()),a&&i()},r=function(){vm(n)},i=function(){var t=Date.now();if(o){if(t-s<2)return;a=!0}else o=!0,a=!1,setTimeout(r,e);s=t},o=!1,a=!1,s=0,i)}).prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},mm.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},mm.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},mm.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},mm.prototype.connect_=function(){ym&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),bm?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},mm.prototype.disconnect_=function(){ym&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},mm.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;_m.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},mm.getInstance=function(){return this.instance_||(this.instance_=new mm),this.instance_},mm.instance_=null,mm),wm=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Em=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Am},Sm=Mm(0,0,0,0);function Pm(t){return parseFloat(t)||0}function km(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+Pm(t["border-"+n+"-width"])}),0)}function Cm(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Sm;var r=Em(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=Pm(o)}return e}(r),o=i.left+i.right,a=i.top+i.bottom,s=Pm(r.width),u=Pm(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=km(r,"left","right")+o),Math.round(u+a)!==n&&(u-=km(r,"top","bottom")+a)),!function(t){return t===Em(t).document.documentElement}(t)){var l=Math.round(s+o)-e,c=Math.round(u+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return Mm(i.left,i.top,s,u)}var Tm="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Em(t).SVGGraphicsElement}:function(t){return t instanceof Em(t).SVGElement&&"function"==typeof t.getBBox};function Im(t){return ym?Tm(t)?function(t){var e=t.getBBox();return Mm(0,0,e.width,e.height)}(t):Cm(t):Sm}function Mm(t,e,n,r){return{x:t,y:e,width:n,height:r}}var Om,Lm,Rm=((Om=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Mm(0,0,0,0),this.target=t}).prototype.isActive=function(){var t=Im(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},Om.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},Om),Dm=function(t,e){var n,r,i,o,a,s,u,l=(r=(n=e).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(s.prototype),wm(u,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),u);wm(this,{target:t,contentRect:l})},Nm=((Lm=function(t,e,n){if(this.activeObservations_=[],this.observations_=new gm,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}).prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Em(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Rm(t)),this.controller_.addObserver(this),this.controller_.refresh())}},Lm.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Em(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},Lm.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Lm.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},Lm.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Dm(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},Lm.prototype.clearActive=function(){this.activeObservations_.splice(0)},Lm.prototype.hasActive=function(){return this.activeObservations_.length>0},Lm),Fm="undefined"!=typeof WeakMap?new WeakMap:new gm,jm=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=xm.getInstance(),r=new Nm(e,n,this);Fm.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){jm.prototype[t]=function(){var e;return(e=Fm.get(this))[t].apply(e,arguments)}}));var zm=void 0!==Am.ResizeObserver?Am.ResizeObserver:jm;function Bm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Um(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vm(t,e,n){return e&&Um(t.prototype,e),n&&Um(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}"undefined"!=typeof window&&window,void 0!==e||window;var Gm="undefined"!=typeof document?document:{};function qm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wm(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?qm(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}function Hm(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xm(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Xm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Zm=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ym(t){if(!t)return null;if("string"==typeof t)return t;t.toJS&&(t=t.toJS());var e,n={},r=Hm(t.layers);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i.id]=i}}catch(t){r.e(t)}finally{r.f()}var o=t.layers.map((function(t){var e=n[t.ref],r=null;if("interactive"in t&&delete(r=Wm({},t)).interactive,e){delete(r=r||Wm({},t)).ref;var i,o=Hm(Zm);try{for(o.s();!(i=o.n()).done;){var a=i.value;a in e&&(r[a]=e[a])}}catch(t){o.e(t)}finally{o.f()}}return r||t}));return Wm(Wm({},t),{},{layers:o})}Bt=a("a8i8g");var Qm={container:Tv.object,gl:Tv.object,mapboxApiAccessToken:Tv.string,mapboxApiUrl:Tv.string,attributionControl:Tv.bool,preserveDrawingBuffer:Tv.bool,reuseMaps:Tv.bool,transformRequest:Tv.func,mapOptions:Tv.object,mapStyle:Tv.oneOfType([Tv.string,Tv.object]),preventStyleDiffing:Tv.bool,visible:Tv.bool,asyncRender:Tv.bool,onLoad:Tv.func,onError:Tv.func,width:Tv.number,height:Tv.number,viewState:Tv.object,longitude:Tv.number,latitude:Tv.number,zoom:Tv.number,bearing:Tv.number,pitch:Tv.number,altitude:Tv.number},Km={container:Gm.body,mapboxApiAccessToken:function(){var t=null;if("undefined"!=typeof window&&window.location){var e=window.location.search.match(/access_token=([^&\/]*)/);t=e&&e[1]}t||void 0===Bt||(t=t||void 0);return t||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0,asyncRender:!1,onLoad:function(){},onError:function(t){t&&console.error(t.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function Jm(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";t.debug&&Tv.checkPropTypes(Qm,t,"prop",e)}var $m=function(){function t(e){var n=this;if(Bm(this,t),mt(this,"props",Km),mt(this,"width",0),mt(this,"height",0),mt(this,"_fireLoadEvent",(function(){n.props.onLoad({type:"load",target:n._map})})),mt(this,"_handleError",(function(t){n.props.onError(t)})),!e.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=e.mapboxgl,t.initialized||(t.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(e)}return Vm(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(t){return this._update(this.props,t),this}},{key:"redraw",value:function(){var t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(e){this._map=t.savedMap;var n=this._map.getContainer(),r=e.container;for(r.classList.add("mapboxgl-map");n.childNodes.length>0;)r.appendChild(n.childNodes[0]);this._map._container=r,t.savedMap=null,e.mapStyle&&this._map.setStyle(Ym(e.mapStyle),{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(e){if(e.reuseMaps&&t.savedMap)this._reuse(e);else{if(e.gl){var n=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=n,e.gl}}var r={container:e.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:Ym(e.mapStyle),interactive:!1,trackResize:!1,attributionControl:e.attributionControl,preserveDrawingBuffer:e.preserveDrawingBuffer};e.transformRequest&&(r.transformRequest=e.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},r,e.mapOptions)),this._map.once("load",this._fireLoadEvent),this._map.on("error",this._handleError)}return this}},{key:"_destroy",value:function(){this._map&&(this.props.reuseMaps&&!t.savedMap?(t.savedMap=this._map,this._map.off("load",this._fireLoadEvent),this._map.off("error",this._handleError),this._map.off("styledata",this._fireLoadEvent)):this._map.remove(),this._map=null)}},{key:"_initialize",value:function(t){var e=this;Jm(t=Object.assign({},Km,t),"Mapbox"),this.mapboxgl.accessToken=t.mapboxApiAccessToken||Km.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=t.mapboxApiUrl,this._create(t);var n=t.container;Object.defineProperty(n,"offsetWidth",{configurable:!0,get:function(){return e.width}}),Object.defineProperty(n,"clientWidth",{configurable:!0,get:function(){return e.width}}),Object.defineProperty(n,"offsetHeight",{configurable:!0,get:function(){return e.height}}),Object.defineProperty(n,"clientHeight",{configurable:!0,get:function(){return e.height}});var r=this._map.getCanvas();r&&(r.style.outline="none"),this._updateMapViewport({},t),this._updateMapSize({},t),this.props=t}},{key:"_update",value:function(t,e){if(this._map){Jm(e=Object.assign({},this.props,e),"Mapbox");var n=this._updateMapViewport(t,e),r=this._updateMapSize(t,e);this._updateMapStyle(t,e),e.asyncRender||!n&&!r||this.redraw(),this.props=e}}},{key:"_updateMapStyle",value:function(t,e){t.mapStyle!==e.mapStyle&&this._map.setStyle(Ym(e.mapStyle),{diff:!e.preventStyleDiffing})}},{key:"_updateMapSize",value:function(t,e){var n=t.width!==e.width||t.height!==e.height;return n&&(this.width=e.width,this.height=e.height,this._map.resize()),n}},{key:"_updateMapViewport",value:function(t,e){var n=this._getViewState(t),r=this._getViewState(e),i=r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude;return i&&(this._map.jumpTo(this._viewStateToMapboxProps(r)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude)),i}},{key:"_getViewState",value:function(t){var e=t.viewState||t,n=e.longitude,r=e.latitude,i=e.zoom,o=e.pitch,a=void 0===o?0:o,s=e.bearing,u=void 0===s?0:s,l=e.altitude;return{longitude:n,latitude:r,zoom:i,pitch:a,bearing:u,altitude:void 0===l?1.5:l}}},{key:"_checkStyleSheet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==Gm)try{var e=Gm.createElement("div");e.className="mapboxgl-map",e.style.display="none",Gm.body.appendChild(e);var n="static"!==window.getComputedStyle(e).position;if(!n){var r=Gm.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(t,"/mapbox-gl.css")),Gm.head.appendChild(r)}}catch(t){}}},{key:"_viewStateToMapboxProps",value:function(t){return{center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}}}]),t}();mt($m,"initialized",!1),mt($m,"propTypes",Qm),mt($m,"defaultProps",Km),mt($m,"savedMap",null);var t_={};vt=a("5qgrd");t_=function(){"use strict";var t,e,n,r=function(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=i(a),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i};return r(["exports"],(function(t){var e=function(t,e){return t(e={exports:{}},e.exports),e.exports},n=function(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r},r=function(t,e){this.x=t,this.y=e},i=function(t,e,n,r){var i=new ei(t,e,n,r);return function(t){return i.solve(t)}},o=function(t,e,n){return Math.min(n,Math.max(e,t))},a=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},s=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t},u=function(){return ai++},l=function(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()},c=function(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},f=function(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))},p=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},h=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r},d=function(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r},g=function(t){pi[t]||("undefined"!=typeof console&&console.warn(t),pi[t]=!0)},y=function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)},A=function(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)e+=((a=t[i]).x-(o=t[n]).x)*(o.y+a.y);return e},v=function(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope},m=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e},_=function(t){if(null==hi){var e=t.navigator?t.navigator.userAgent:null;hi=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return hi},b=function(t){try{var e=ri[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}},x=function(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,fi),t.isContextLost())return;mi.supported=!0}catch(t){}t.deleteTexture(e),_i=!0},w=function(t){return 0===t.indexOf("mapbox:")},E=function(t){return Ei.test(t)},S=function(t){var e=t.match(Si);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}},P=function(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e},k=function(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(ri.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}},C=function(){ri.caches&&!ki&&(ki=ri.caches.open("mapbox-tiles"))},T=function(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)},I=function(){return null==Li&&(Li=ri.OffscreenCanvas&&new ri.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof ri.createImageBitmap),Li},M=function(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))},O=function(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}},L=function(t){var e=t.value;return e?[new io(t.key,e,"constants have been deprecated as of v8")]:[]},R=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t},D=function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t},N=function(t,e){return{kind:"array",itemType:t,N:e}},F=function(t,e){return e.some((function(e){return e.kind===t.kind}))},j=function(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===(void 0===t?"undefined":vt.default(t))}))},z=function(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."},B=function(t){var e=void 0===t?"undefined":vt.default(t);return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof wo||t instanceof Po||t instanceof ko?t.toString():JSON.stringify(t)},U=function(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])},V=function(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])},G=function(t,e){var n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*8192),Math.round(r*i*8192)]},q=function(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]},W=function(t,e){for(var n,r,i,o,a,s,u,l=!1,c=0,f=e.length;c<f;c++)for(var p=e[c],h=0,d=p.length;h<d-1;h++){if((o=(n=t)[0]-(r=p[h])[0])*(u=n[1]-(i=p[h+1])[1])-(s=n[0]-i[0])*(a=n[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;q(t,p[h],p[h+1])&&(l=!l)}return l},H=function(t,e){for(var n=0;n<e.length;n++)if(W(t,e[n]))return!0;return!1},X=function(t,e,n,r){var i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0},Z=function(t,e,n){for(var r=0,i=n;r<i.length;r+=1)for(var o=i[r],a=0;a<o.length-1;++a)if(0!=(f=[(c=o[a+1])[0]-(l=o[a])[0],c[1]-l[1]])[0]*(p=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-f[1]*p[0]&&X(s,u,l,c)&&X(l,c,s,u))return!0;var s,u,l,c,f,p;return!1},Y=function(t,e){for(var n=0;n<t.length;++n)if(!W(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(Z(t[r],t[r+1],e))return!1;return!0},Q=function(t,e){for(var n=0;n<e.length;n++)if(Y(t,e[n]))return!0;return!1},K=function(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=G(t[i][a],n);U(e,s),o.push(s)}r.push(o)}return r},J=function(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=K(t[i],e,n);r.push(o)}return r},$=function(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===o&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o}U(e,t)},tt=function(t,e,n,r){for(var i=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[],s=0,u=t;s<u.length;s+=1)for(var l=0,c=u[s];l<c.length;l+=1){var f=c[l],p=[f.x+o[0],f.y+o[1]];$(p,e,n,i),a.push(p)}return a},et=function(t,e,n,r){for(var i,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=0,l=t;u<l.length;u+=1){for(var c=[],f=0,p=l[u];f<p.length;f+=1){var h=p[f],d=[h.x+a[0],h.y+a[1]];U(e,d),c.push(d)}s.push(c)}if(e[2]-e[0]<=o/2){(i=e)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var g=0,y=s;g<y.length;g+=1)for(var A=0,v=y[g];A<v.length;A+=1)$(v[A],e,n,o)}return s},nt=function(t,e){for(var n,r=t.length-1,i=0,o=r,a=0;i<=o;)if((n=t[a=Math.floor((i+o)/2)])<=e){if(a===r||e<t[a+1])return a;i=a+1}else{if(!(n>e))throw new Mo("Input is not a number.");o=a-1}return 0},rt=function(t,e,n){return t*(1-n)+e*n},it=function(t){return t>.008856451679035631?Math.pow(t,1/3):t/Qo+4/29},ot=function(t){return t>6/29?t*t*t:Qo*(t-4/29)},at=function(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)},st=function(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},ut=function(t){var e=st(t.r),n=st(t.g),r=st(t.b),i=it((.4124564*e+.3575761*n+.1804375*r)/.95047),o=it((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-it((.0193339*e+.119192*n+.9503041*r)/1.08883)),alpha:t.a}},lt=function(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*ot(e),n=.95047*ot(n),r=1.08883*ot(r),new wo(at(3.2404542*n-1.5371385*e-.4985314*r),at(-.969266*n+1.8760108*e+.041556*r),at(.0556434*n-.2040259*e+1.0572252*r),t.alpha)},ct=function(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)},ft=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)},pt=function(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind},ht=function(t,e,n,r){return 0===r.compare(e,n)},dt=function(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=fo,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,go);if(!o)return null;if(!pt(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+mo(o.type)+"'.");var a=e.parse(t[2],2,go);if(!a)return null;if(!pt(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+mo(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+mo(o.type)+"' and '"+mo(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Lo(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Lo(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,yo)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=To(o),u=To(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Mo('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=To(o),c=To(a);if("string"!==l.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},i}()},gt=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=z(n,r,i,a);if(s)throw new Mo(s);return new wo(n/255*a,r/255*a,i/255*a,a)},yt=function(t,e){return t in e},At=function(t,e){var n=e[t];return void 0===n?null:n},mt=function(t){return{type:t}},_t=function(t){return{result:"success",value:t}},bt=function(t){return{result:"error",value:t}},xt=function(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]},wt=function(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1},Et=function(t){return!!t.expression&&t.expression.interpolated},St=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":void 0===t?"undefined":vt.default(t)},Pt=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},kt=function(t){return t},Ct=function(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0},Tt=function(t,e,n,r,i){return Ct((void 0===n?"undefined":vt.default(n))===i?r[n]:void 0,t.default,e.default)},It=function(t,e,n){if("number"!==St(n))return Ct(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=nt(t.stops.map((function(t){return t[0]})),n);return t.stops[i][1]},Mt=function(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==St(n))return Ct(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=nt(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=Yo[e.type]||kt;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=ea[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)},Ot=function(t,e,n){return"color"===e.type?n=wo.parse(n):"formatted"===e.type?n=Po.fromString(n.toString()):"resolvedImage"===e.type?n=ko.fromString(n.toString()):St(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Ct(n,t.default,e.default)},Lt=function(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ma},Rt=function(t,e){var n,r,i=new Xo(ma,[],e?(r={color:po,string:co,number:lo,enum:co,boolean:fo,formatted:Ao,resolvedImage:vo},"array"===(n=e).type?N(r[n.value]||go,n.length):r[n.type]):void 0),o=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return o?_t(new _a(o,e)):bt(i.errors)},Dt=function(t,e){if("error"===(t=Rt(t,e)).result)return t;var n=t.value.expression,r=Go(n);if(!r&&!xt(e))return bt([new ao("","data expressions not supported")]);var i=Wo(n,["zoom"]);if(!i&&!wt(e))return bt([new ao("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof ia)n=t(e.result);else if(e instanceof ra)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof Zo||e instanceof na)&&e.input instanceof Bo&&"zoom"===e.input.name&&(n=e);return n instanceof ao||e.eachChild((function(e){var r=t(e);r instanceof ao?n=r:!n&&r?n=new ao("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new ao("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||i?o instanceof ao?bt([o]):o instanceof na&&!Et(e)?bt([new ao("",'"interpolate" expressions cannot be used with this property')]):_t(o?new xa(r?"camera":"composite",t.value,o.labels,o instanceof na?o.interpolation:void 0):new ba(r?"constant":"source",t.value)):bt([new ao("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])},Nt=function(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=St(n);if("object"!==u)return[new io(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],f=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=ne;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new io(e,n[l],'unknown property "'+l+'"'));continue}p=ne}s=s.concat(p({key:(e?e+".":e)+l,value:n[l],valueSpec:f,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var h in r)i[h]||r[h].required&&void 0===r[h].default&&void 0===n[h]&&s.push(new io(e,n,'missing required property "'+h+'"'));return s},Ft=function(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||ne;if("array"!==St(e))return[new io(o,e,"array expected, "+St(e)+" found")];if(n.length&&e.length!==n.length)return[new io(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new io(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===St(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u},jt=function(t){var e=t.key,n=t.value,r=t.valueSpec,i=St(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new io(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new io(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new io(e,n,n+" is greater than the maximum value "+r.maximum)]:[]},zt=function(t){var e,n,r,i=t.valueSpec,o=D(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===St(t.value.stops)&&"array"===St(t.value.stops[0])&&"object"===St(t.value.stops[0][0]),c=Nt({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new io(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(Ft({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:f})),"array"===St(n)&&0===n.length&&e.push(new io(t.key,n,"array must have at least one stop")),e},default:function(t){return ne({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new io(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new io(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Et(t.valueSpec)&&c.push(new io(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!xt(t.valueSpec)?c.push(new io(t.key,t.value,"property functions not supported")):s&&!wt(t.valueSpec)&&c.push(new io(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new io(t.key,t.value,'"property" property is required')),c;function f(t){var e=[],o=t.value,s=t.key;if("array"!==St(o))return[new io(s,o,"array expected, "+St(o)+" found")];if(2!==o.length)return[new io(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==St(o[0]))return[new io(s,o,"object expected, "+St(o[0])+" found")];if(void 0===o[0].zoom)return[new io(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new io(s,o,"object stop key must have value")];if(r&&r>D(o[0].zoom))return[new io(s,o[0].zoom,"stop zoom values must appear in ascending order")];D(o[0].zoom)!==r&&(r=D(o[0].zoom),n=void 0,a={}),e=e.concat(Nt({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:jt,value:p}}))}else e=e.concat(p({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Lt(oo(o[1]))?e.concat([new io(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(ne({key:s+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function p(t,r){var s=St(t.value),u=D(t.value),l=null!==t.value?t.value:r;if(e){if(s!==e)return[new io(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new io(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return xt(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new io(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new io(t.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new io(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new io(t.key,l,"integer expected, found "+u)]}},Bt=function(t){var e=("property"===t.expressionContext?Dt:Rt)(oo(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new io(""+t.key+e.key,t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new io(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!qo(n))return[new io(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!qo(n))return[new io(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Wo(n,["zoom","feature-state"]))return[new io(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Go(n))return[new io(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]},Ut=function(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(D(n))&&i.push(new io(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(D(n))&&i.push(new io(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i},Vt=function(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};Ea(t)||(t=Pa(t));var e=Rt(t,Sa);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var n=1;n<e.length;n++)if(t(e[n]))return!0;return!1}(t)}},Gt=function(t,e){return t<e?-1:t>e?1:0},qt=function(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}},Wt=function(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return(void 0===t?"undefined":vt.default(t))!=vt.default(e[0])}))?["filter-in-large",t,["literal",e.sort(Gt)]]:["filter-in-small",t,["literal",e]]}},Ht=function(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}},Xt=function(t){return["!",t]},Zt=function(t){return Ea(oo(t.value))?Bt(R({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==St(n))return[new io(r,n,"array expected, "+St(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new io(r,n,"filter array must have at least 1 element")];switch(a=a.concat(Ut({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),D(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===D(n[1])&&a.push(new io(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new io(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=St(n[1]))&&a.push(new io(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=St(n[s]),"$type"===D(n[1])?a=a.concat(Ut({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new io(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=St(n[1]),2!==n.length?a.push(new io(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new io(r+"[1]",n[1],"string expected, "+i+" found"));break;case"within":i=St(n[1]),2!==n.length?a.push(new io(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==i&&a.push(new io(r+"[1]",n[1],"object expected, "+i+" found"))}return a}(t)},Yt=function(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return ne({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new io(n,o,'unknown property "'+a+'"')];if("string"===St(o)&&xt(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new io(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var f=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new io(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Pt(oo(o))&&"identity"===D(o.type)&&f.push(new io(n,o,'"text-font" does not support identity functions'))),f.concat(ne({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))},Qt=function(t){return Yt(t,"paint")},Kt=function(t){return Yt(t,"layout")},Jt=function(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new io(r,n,'either "type" or "ref" is required'));var a,s=D(n.type),u=D(n.ref);if(n.id)for(var l=D(n.id),c=0;c<t.arrayIndex;c++){var f=i.layers[c];D(f.id)===l&&e.push(new io(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new io(r,n[t],'"'+t+'" is prohibited for ref layers'))})),i.layers.forEach((function(t){D(t.id)===u&&(a=t)})),a?a.ref?e.push(new io(r,n.ref,"ref cannot reference another ref layer")):s=D(a.type):e.push(new io(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],h=p&&D(p.type);p?"vector"===h&&"raster"===s?e.push(new io(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===h&&"raster"!==s?e.push(new io(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==h||n["source-layer"]?"raster-dem"===h&&"hillshade"!==s?e.push(new io(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===h&&p.lineMetrics||e.push(new io(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new io(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new io(r,n.source,'source "'+n.source+'" not found'))}else e.push(new io(r,n,'missing required property "source"'));return e=e.concat(Nt({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ne({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:Zt,layout:function(t){return Nt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Kt(R({layerType:s},t))}}})},paint:function(t){return Nt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Qt(R({layerType:s},t))}}})}}}))},$t=function(t){var e=t.value,n=t.key,r=St(e);return"string"!==r?[new io(n,e,"string expected, "+r+" found")]:[]},te=function(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new io(n,e,'"type" is required')];var o,a=D(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Nt({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:ka});case"geojson":if(o=Nt({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:ka}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,Bt({key:n+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,Bt({key:n+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return Nt({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Nt({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new io(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ut({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}},ee=function(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=St(e);if(void 0===e)return o;if("object"!==a)return o.concat([new io("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?ne({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?ne({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new io(s,e[s],'unknown property "'+s+'"')])}return o},ne=function(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Pt(D(e))?zt(t):n.expression&&Lt(oo(e))?Bt(t):n.type&&Ca[n.type]?Ca[n.type](t):Nt(R({},t,{valueSpec:n.type?r[n.type]:n}))},re=function(t){var e=t.value,n=t.key,r=$t(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new io(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new io(n,e,'"glyphs" url must include a "{range}" token'))),r},ie=function(t,e){void 0===e&&(e=ro);var n=[];return n=n.concat(ne({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:re,"*":function(){return[]}}})),t.constants&&(n=n.concat(L({key:"constants",value:t.constants,style:t,styleSpec:e}))),oe(n)},oe=function(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))},ae=function(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return oe(t.apply(this,e))}},se=function(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1)t.fire(new eo(new Error(i[r].message))),n=!0;return n},ue=function(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c},le=function(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Na[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}},ce=function(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)},fe=function(t){return Da&&t instanceof Da},pe=function(t){for(var e=0,n=t;e<n.length;e+=1)if(he(n[e].charCodeAt(0)))return!0;return!1},he=function(t){return!(746!==t&&747!==t&&(t<4352||!(Ua["Bopomofo Extended"](t)||Ua.Bopomofo(t)||Ua["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Ua["CJK Compatibility Ideographs"](t)||Ua["CJK Compatibility"](t)||Ua["CJK Radicals Supplement"](t)||Ua["CJK Strokes"](t)||!(!Ua["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Ua["CJK Unified Ideographs Extension A"](t)||Ua["CJK Unified Ideographs"](t)||Ua["Enclosed CJK Letters and Months"](t)||Ua["Hangul Compatibility Jamo"](t)||Ua["Hangul Jamo Extended-A"](t)||Ua["Hangul Jamo Extended-B"](t)||Ua["Hangul Jamo"](t)||Ua["Hangul Syllables"](t)||Ua.Hiragana(t)||Ua["Ideographic Description Characters"](t)||Ua.Kanbun(t)||Ua["Kangxi Radicals"](t)||Ua["Katakana Phonetic Extensions"](t)||Ua.Katakana(t)&&12540!==t||!(!Ua["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Ua["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Ua["Unified Canadian Aboriginal Syllabics"](t)||Ua["Unified Canadian Aboriginal Syllabics Extended"](t)||Ua["Vertical Forms"](t)||Ua["Yijing Hexagram Symbols"](t)||Ua["Yi Syllables"](t)||Ua["Yi Radicals"](t))))},de=function(t){return!(he(t)||(e=t,Ua["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Ua["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Ua["Letterlike Symbols"](e)||Ua["Number Forms"](e)||Ua["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Ua["Control Pictures"](e)&&9251!==e||Ua["Optical Character Recognition"](e)||Ua["Enclosed Alphanumerics"](e)||Ua["Geometric Shapes"](e)||Ua["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Ua["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Ua["CJK Symbols and Punctuation"](e)||Ua.Katakana(e)||Ua["Private Use Area"](e)||Ua["CJK Compatibility Forms"](e)||Ua["Small Form Variants"](e)||Ua["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e},ge=function(t){return t>=1424&&t<=2303||Ua["Arabic Presentation Forms-A"](t)||Ua["Arabic Presentation Forms-B"](t)},ye=function(t,e){return!(!e&&ge(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Ua.Khmer(t))},Ae=function(t){for(var e=0,n=t;e<n.length;e+=1)if(ge(n[e].charCodeAt(0)))return!0;return!1},ve=function(){Ha.fire(new to("pluginStateChange",{pluginStatus:Ga,pluginURL:qa}))},me=function(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map((function(t){var i=ds[t.type].BYTES_PER_ELEMENT,o=n=_e(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:_e(n,Math.max(r,e)),alignment:e}},_e=function(t,e){return Math.ceil(t/e)*e},be=function(t,e){return 256*(t=o(Math.floor(t),0,255))+o(Math.floor(e),0,255)},xe=function(t){var e=+t;return!isNaN(e)&&e<=ru?e:tu(String(t))},we=function(t,e,n){var r=t[e];t[e]=t[n],t[n]=r},Ee=function(t){return[be(255*t.r,255*t.g),be(255*t.b,255*t.a)]},Se=function(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]},Pe=function(t,e,n){var r={color:{source:bs,composite:js},number:{source:Ls,composite:bs}},i={"line-pattern":{source:xs,composite:xs},"fill-pattern":{source:xs,composite:xs},"fill-extrusion-pattern":{source:xs,composite:xs}}[t];return i&&i[n]||r[e][n]},ke=function(t){for(var e=8192/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],a=0;a<i.length;a++){var s=i[a],u=Math.round(s.x*e),l=Math.round(s.y*e);s.x=o(u,Du,Ru),s.y=o(l,Du,Ru),(u<s.x||u>s.x+1||l<s.y||l>s.y+1)&&g("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n},Ce=function(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?ke(t):[]}},Te=function(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)},Ie=function(t,e){for(var n=0;n<t.length;n++)if(ze(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(ze(t,e[r]))return!0;return!!Re(t,e)},Me=function(t,e,n){return!!ze(t,e)||!!Ne(e,t,n)},Oe=function(t,e){if(1===t.length)return je(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(ze(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(je(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Re(t,e[a]))return!0;return!1},Le=function(t,e,n){if(t.length>1){if(Re(t,e))return!0;for(var r=0;r<e.length;r++)if(Ne(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(Ne(t[i],e,n))return!0;return!1},Re=function(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(De(r,i,e[o],e[o+1]))return!0;return!1},De=function(t,e,n,r){return y(t,n,r)!==y(e,n,r)&&y(t,e,n)!==y(t,e,r)},Ne=function(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Fe(t,e[i-1],e[i])<r)return!0;return!1},Fe=function(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))},je=function(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(r=n[s]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o},ze=function(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n},Be=function(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=y(t,e,n[0]);return o!==y(t,e,n[1])||o!==y(t,e,n[2])||o!==y(t,e,n[3])},Ue=function(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)},Ve=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},Ge=function(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=ni.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++)a.push(t[s].sub(o));return a},qe=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},We=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],g=e[12],y=e[13],A=e[14],v=e[15],m=n[0],_=n[1],b=n[2],x=n[3];return t[0]=m*r+_*s+b*f+x*g,t[1]=m*i+_*u+b*p+x*y,t[2]=m*o+_*l+b*h+x*A,t[3]=m*a+_*c+b*d+x*v,t[4]=(m=n[4])*r+(_=n[5])*s+(b=n[6])*f+(x=n[7])*g,t[5]=m*i+_*u+b*p+x*y,t[6]=m*o+_*l+b*h+x*A,t[7]=m*a+_*c+b*d+x*v,t[8]=(m=n[8])*r+(_=n[9])*s+(b=n[10])*f+(x=n[11])*g,t[9]=m*i+_*u+b*p+x*y,t[10]=m*o+_*l+b*h+x*A,t[11]=m*a+_*c+b*d+x*v,t[12]=(m=n[12])*r+(_=n[13])*s+(b=n[14])*f+(x=n[15])*g,t[13]=m*i+_*u+b*p+x*y,t[14]=m*o+_*l+b*h+x*A,t[15]=m*a+_*c+b*d+x*v,t},He=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},Xe=function(t,e){var n=He([],[t.x,t.y,0,1],e);return new ni(n[0]/n[3],n[1]/n[3])},Ze=function(t,e,n,r){var i=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t},Ye=function(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=Ze({},{width:r,height:i},n);Qe(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}},Qe=function(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,f=0;f<i.width*o;f++)s[c+f]=a[l+f];return e},Ke=function(t){var e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new Zu({width:n,height:r}),o=function(n,r,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<r;++a,s+=4*n)for(var u=0,l=0;u<n;u++,l+=4){var c=u/(n-1),f=t.clips[a];o(s,l,f.start*(1-c)+f.end*c)}else for(var p=0,h=0;p<n;p++,h+=4)o(0,h,p/(n-1));return i},Je=function(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,f=c?e[0]*n:t.length,p=$e(t,0,f,n,!0),h=[];if(!p||p.next===p.prev)return h;if(c&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=$e(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(cn(a));for(s.sort(an),i=0;i<s.length;i++)sn(s[i],n),n=tn(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return il(p,h,n,r,i,l),h},$e=function(t,e,n,r,i){var o,a;if(i===wn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=_n(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=_n(o,t[o],t[o+1],a);return a&&dn(a,a.next)&&(bn(a),a=a.next),a},tn=function(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!dn(r,r.next)&&0!==hn(r.prev,r,r.next))r=r.next;else{if(bn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e},en=function(t){var e=t.prev,n=t,r=t.next;if(hn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(fn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&hn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0},nn=function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(hn(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=ln(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=ln(s,u,e,n,r),f=t.prevZ,p=t.nextZ;f&&f.z>=l&&p&&p.z<=c;){if(f!==t.prev&&f!==t.next&&fn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&hn(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&fn(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&hn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=l;){if(f!==t.prev&&f!==t.next&&fn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&hn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&fn(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&hn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0},rn=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!dn(i,o)&&gn(i,r,r.next,o)&&vn(i,o)&&vn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),bn(r),bn(r.next),r=t=o),r=r.next}while(r!==t);return tn(r)},on=function(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&pn(a,s)){var u=mn(a,s);return a=tn(a,a.next),u=tn(u,u.next),il(a,e,n,r,i,o),void il(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)},an=function(t,e){return t.x-e.x},sn=function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&fn(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),vn(r,t)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&un(n,r)))&&(n=r,p=u)),r=r.next}while(r!==l);return n}(t,e)){var n=mn(e,t);tn(e,e.next),tn(n,n.next)}},un=function(t,e){return hn(t.prev,t,e.prev)<0&&hn(e.next,t,t.next)<0},ln=function(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1},cn=function(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n},fn=function(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0},pn=function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&gn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(vn(t,e)&&vn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(hn(t.prev,t,e.prev)||hn(t,e.prev,e))||dn(t,e)&&hn(t.prev,t,t.next)>0&&hn(e.prev,e,e.next)>0)},hn=function(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)},dn=function(t,e){return t.x===e.x&&t.y===e.y},gn=function(t,e,n,r){var i=An(hn(t,e,n)),o=An(hn(t,e,r)),a=An(hn(n,r,t)),s=An(hn(n,r,e));return i!==o&&a!==s||!(0!==i||!yn(t,n,e))||!(0!==o||!yn(t,r,e))||!(0!==a||!yn(n,t,r))||!(0!==s||!yn(n,e,r))},yn=function(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)},An=function(t){return t>0?1:t<0?-1:0},vn=function(t,e){return hn(t.prev,t,t.next)<0?hn(t,e,t.next)>=0&&hn(t,t.prev,e)>=0:hn(t,e,t.prev)<0||hn(t,t.next,e)<0},mn=function(t,e){var n=new xn(t.i,t.x,t.y),r=new xn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r},_n=function(t,e,n,r){var i=new xn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i},bn=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},xn=function(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1},wn=function(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i},En=function(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var f=e[n],p=r,h=i;for(Sn(e,r,n),o(e[i],f)>0&&Sn(e,r,i);p<h;){for(Sn(e,p,h),p++,h--;o(e[p],f)<0;)p++;for(;o(e[h],f)>0;)h--}0===o(e[r],f)?Sn(e,r,h):Sn(e,++h,i),h<=n&&(r=h+1),n<=h&&(i=h-1)}}(t,e,n||0,r||t.length-1,i||Pn)},Sn=function(t,e,n){var r=t[e];t[e]=t[n],t[n]=r},Pn=function(t,e){return t<e?-1:t>e?1:0},kn=function(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=A(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(En(o[u],e,1,o[u].length-1,Cn),o[u]=o[u].slice(0,e));return o},Cn=function(t,e){return e.area-t.area},Tn=function(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i},In=function(t,e,n,r,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{},i.availableImages),f=l.evaluate({zoom:r},n,{},i.availableImages),p=l.evaluate({zoom:r+1},n,{},i.availableImages);f=f&&f.name?f.name:f,p=p&&p.name?p.name:p,o[c=c&&c.name?c.name:c]=!0,o[f]=!0,o[p]=!0,n.patterns[u.id]={min:c,mid:f,max:p}}}return n},Mn=function(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(On,this,e)},On=function(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)},Ln=function(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r},Rn=function(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Dn,this,e),this.length=this._features.length},Dn=function(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))},Nn=function(t,e,n){if(3===t){var r=new hl(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}},Fn=function(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*yl)+a,i*yl*2,o*yl*2,Math.round(s))},jn=function(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)},zn=function(t,e){return t.x*e.x+t.y*e.y},Bn=function(t,e){if(1===t.length){for(var n,r=0,i=e[r++];!n||i.equals(n);)if(!(n=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=n.sub(i),u=o.sub(i),l=a.sub(i),c=zn(s,s),f=zn(s,u),p=zn(u,u),h=zn(l,s),d=zn(l,u),g=c*p-f*f,y=(p*h-f*d)/g,A=(c*d-f*h)/g,v=i.z*(1-y-A)+n.z*y+o.z*A;if(isFinite(v))return v}return 1/0}for(var m=1/0,_=0,b=e;_<b.length;_+=1)m=Math.min(m,b[_].z);return m},Un=function(t,e){return e>0?e+2*t:t},Vn=function(t,e,n){return t.sections.forEach((function(t){var r,i,o;t.text=(r=t.text,i=n,"uppercase"===(o=e.layout.get("text-transform").evaluate(i,{}))?r=r.toLocaleUpperCase():"lowercase"===o&&(r=r.toLocaleLowerCase()),Ya.applyArabicShaping&&(r=Ya.applyArabicShaping(r)),r)})),t},Gn=function(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length},qn=function(t){return t.type===Gn.Bytes?t.readVarint()+t.pos:t.pos+1},Wn=function(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)},Hn=function(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]},Xn=function(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])},Zn=function(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])},Yn=function(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])},Qn=function(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])},Kn=function(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])},Jn=function(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])},$n=function(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])},tr=function(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])},er=function(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])},nr=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]},rr=function(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24},ir=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)},or=function(t,e,n){1===t&&n.readMessage(ar,e)},ar=function(t,e,n){if(3===t){var r=n.readMessage(sr,{}),i=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new Xu({width:i+6,height:o+6},r.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:u}})}},sr=function(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())},ur=function(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var f=c[l],p=a.length-1;p>=0;p--){var h=a[p];if(!(f.w>h.w||f.h>h.h)){if(f.x=h.x,f.y=h.y,u=Math.max(u,f.y+f.h),s=Math.max(s,f.x+f.w),f.w===h.w&&f.h===h.h){var d=a.pop();p<a.length&&(a[p]=d)}else f.h===h.h?(h.x+=f.w,h.w-=f.w):f.w===h.w?(h.y+=f.h,h.h-=f.h):(a.push({x:h.x+f.w,y:h.y,w:h.w-f.w,h:f.h}),h.y+=f.h,h.h-=f.h);break}}return{w:s,h:u,fill:e/(s*u)||0}},lr=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g){var y,A=Yl.fromFeature(t,i);f===Xl.vertical&&A.verticalizePunctuation();var v=Ya.processBidirectionalText,m=Ya.processStyledBidirectionalText;if(v&&1===A.sections.length){y=[];for(var _=0,b=v(A.toString(),dr(A,l,o,e,r,h,d));_<b.length;_+=1){var x=b[_],w=new Yl;w.text=x,w.sections=A.sections;for(var E=0;E<x.length;E++)w.sectionIndex.push(0);y.push(w)}}else if(m){y=[];for(var S=0,P=m(A.text,A.sectionIndex,dr(A,l,o,e,r,h,d));S<P.length;S+=1){var k=P[S],C=new Yl;C.text=k[0],C.sectionIndex=k[1],C.sections=A.sections,y.push(C)}}else y=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(i,s)),i=s}return i<r.length&&n.push(t.substring(i,r.length)),n}(A,dr(A,l,o,e,r,h,d));var T=[],I={positionedLines:T,text:A.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:f,iconsInText:!1,verticalizable:!1};return function(t,e,n,r,i,o,a,s,u,l,c,f){for(var p=0,h=-17,d=0,g=0,y="right"===s?1:"left"===s?0:.5,A=0,v=0,m=i;v<m.length;v+=1){var _=m[v];_.trim();var b=_.getMaxScale(),x=24*(b-1),w={positionedGlyphs:[],lineOffset:0};t.positionedLines[A]=w;var E=w.positionedGlyphs,S=0;if(_.length()){for(var P=0;P<_.length();P++){var k=_.getSection(P),C=_.getSectionIndex(P),T=_.getCharCode(P),I=0,M=null,O=null,L=null,R=24,D=!(u===Xl.horizontal||!c&&!he(T)||c&&(Ql[T]||(q=T,Ua.Arabic(q)||Ua["Arabic Supplement"](q)||Ua["Arabic Extended-A"](q)||Ua["Arabic Presentation Forms-A"](q)||Ua["Arabic Presentation Forms-B"](q))));if(k.imageName){var N=r[k.imageName];if(!N)continue;L=k.imageName,t.iconsInText=t.iconsInText||!0,O=N.paddedRect;var F=N.displaySize;k.scale=24*k.scale/f,I=x+(24-F[1]*k.scale),R=(M={width:F[0],height:F[1],left:1,top:-3,advance:D?F[1]:F[0]}).advance;var j=D?F[0]*k.scale-24*b:F[1]*k.scale-24*b;j>0&&j>S&&(S=j)}else{var z=n[k.fontStack],B=z&&z[T];if(B&&B.rect)O=B.rect,M=B.metrics;else{var U=e[k.fontStack],V=U&&U[T];if(!V)continue;M=V.metrics}I=24*(b-k.scale)}D?(t.verticalizable=!0,E.push({glyph:T,imageName:L,x:p,y:h+I,vertical:D,scale:k.scale,fontStack:k.fontStack,sectionIndex:C,metrics:M,rect:O}),p+=R*k.scale+l):(E.push({glyph:T,imageName:L,x:p,y:h+I,vertical:D,scale:k.scale,fontStack:k.fontStack,sectionIndex:C,metrics:M,rect:O}),p+=M.advance*k.scale+l)}0!==E.length&&(d=Math.max(p-l,d),yr(E,0,E.length-1,y,S)),p=0;var G=o*b+S;w.lineOffset=Math.max(S,x),h+=G,g=Math.max(G,g),++A}else h+=o,++A}var q,W=h- -17,H=gr(a),X=H.horizontalAlign,Z=H.verticalAlign;(function(t,e,n,r,i,o,a,s,u){var l,c=(e-n)*i;l=o!==a?-s*r- -17:(-r*u+.5)*a;for(var f=0,p=t;f<p.length;f+=1)for(var h=0,d=p[f].positionedGlyphs;h<d.length;h+=1){var g=d[h];g.x+=c,g.y+=l}})(t.positionedLines,y,X,Z,d,g,o,W,i.length),t.top+=-Z*W,t.bottom=t.top+W,t.left+=-X*d,t.right=t.left+d}(I,e,n,r,y,a,s,u,f,l,p,g),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(T)&&I},cr=function(t,e,n,r,i,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*24/o+i:0}var s=n[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+i:0},fr=function(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n},pr=function(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r},hr=function(t,e,n,r,i,o){for(var a=null,s=fr(e,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],f=fr(e-c.x,n,i,o)+c.badness;f<=s&&(a=c,s=f)}return{index:t,x:e,priorBreak:a,badness:s}},dr=function(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u=[],l=function(t,e,n,r,i,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=cr(t.getCharCode(s),u,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),c=t.text.indexOf("​")>=0,f=0,p=0;p<t.length();p++){var h=t.getSection(p),d=t.getCharCode(p);if(Ql[d]||(f+=cr(d,h,r,i,e,a)),p<t.length()-1){var g=!((s=d)<11904||!(Ua["Bopomofo Extended"](s)||Ua.Bopomofo(s)||Ua["CJK Compatibility Forms"](s)||Ua["CJK Compatibility Ideographs"](s)||Ua["CJK Compatibility"](s)||Ua["CJK Radicals Supplement"](s)||Ua["CJK Strokes"](s)||Ua["CJK Symbols and Punctuation"](s)||Ua["CJK Unified Ideographs Extension A"](s)||Ua["CJK Unified Ideographs"](s)||Ua["Enclosed CJK Letters and Months"](s)||Ua["Halfwidth and Fullwidth Forms"](s)||Ua.Hiragana(s)||Ua["Ideographic Description Characters"](s)||Ua["Kangxi Radicals"](s)||Ua["Katakana Phonetic Extensions"](s)||Ua.Katakana(s)||Ua["Vertical Forms"](s)||Ua["Yi Radicals"](s)||Ua["Yi Syllables"](s)));(Kl[d]||g||h.imageName)&&u.push(hr(p+1,f,l,u,pr(d,t.getCharCode(p+1),g&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(hr(t.length(),f,l,u,0,!0))},gr=function(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}},yr=function(t,e,n,r,i){if(r||i)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*r,s=e;s<=n;s++)t[s].x-=a,t[s].y+=i},Ar=function(t,e,n,r,i,o){var a,s=t.image;if(s.content){var u=s.content,l=s.pixelRatio||1;a=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,f,p,h,d=e.left*o,g=e.right*o;"width"===n||"both"===n?(h=i[0]+d-r[3],f=i[0]+g+r[1]):f=(h=i[0]+(d+g-s.displaySize[0])/2)+s.displaySize[0];var y=e.top*o,A=e.bottom*o;return"height"===n||"both"===n?(c=i[1]+y-r[0],p=i[1]+A+r[2]):p=(c=i[1]+(y+A-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:f,bottom:p,left:h,collisionPadding:a}},vr=function(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Qa(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new Qa(s)),maxSize:n.evaluate(new Qa(u)),interpolationType:i}},mr=function(t,e,n){var r=e.uSize,i=n.lowerSize;return"source"===t.kind?i/128:"composite"===t.kind?rt(i/128,n.upperSize/128,e.uSizeT):r},_r=function(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,a=i?o(na.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=rt(t.minSize,t.maxSize,a):n=a}return{uSizeT:n,uSize:r}},br=function(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a],f=t[a+1];if(!f)return!1;var p=t[a-1].angleTo(c)-c.angleTo(f);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:p}),l+=p;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=c.dist(f)}return!0},xr=function(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e},wr=function(t,e,n){return t?.6*e*n:0},Er=function(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)},Sr=function(t,e,n,r,i,o){for(var a=wr(n,i,o),s=Er(n,r)*o,u=0,l=xr(t)/2,c=0;c<t.length-1;c++){var f=t[c],p=t[c+1],h=f.dist(p);if(u+h>l){var d=(l-u)/h,g=rt(f.x,p.x,d),y=rt(f.y,p.y,d),A=new Jl(g,y,p.angleTo(f),c);return A._round(),!a||br(t,A,s,a,e)?A:void 0}u+=h}},Pr=function(t,e,n,r,i,o,a,s,u){var l=wr(r,o,a),c=Er(r,i),f=c*a,p=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-f<e/4&&(e=f+e/4),function t(e,n,r,i,o,a,s,u,l){for(var c=a/2,f=xr(e),p=0,h=n-r,d=[],g=0;g<e.length-1;g++){for(var y=e[g],A=e[g+1],v=y.dist(A),m=A.angleTo(y);h+r<p+v;){var _=((h+=r)-p)/v,b=rt(y.x,A.x,_),x=rt(y.y,A.y,_);if(b>=0&&b<l&&x>=0&&x<l&&h-c>=0&&h+c<=f){var w=new Jl(b,x,m,g);w._round(),i&&!br(e,w,a,i,o)||d.push(w)}}p+=v}return u||d.length||s||(d=t(e,p/2,r,i,o,a,s,!0,l)),d}(t,p?e/2*s%e:(c/2+2*o)*a*s%e,e,l,n,f,p,!1,u)},kr=function(t,e,n,r,i){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],u=void 0,l=0;l<s.length-1;l++){var c=s[l],f=s[l+1];c.x<e&&f.x<e||(c.x<e?c=new ni(e,c.y+(e-c.x)/(f.x-c.x)*(f.y-c.y))._round():f.x<e&&(f=new ni(e,c.y+(e-c.x)/(f.x-c.x)*(f.y-c.y))._round()),c.y<n&&f.y<n||(c.y<n?c=new ni(c.x+(n-c.y)/(f.y-c.y)*(f.x-c.x),n)._round():f.y<n&&(f=new ni(c.x+(n-c.y)/(f.y-c.y)*(f.x-c.x),n)._round()),c.x>=r&&f.x>=r||(c.x>=r?c=new ni(r,c.y+(r-c.x)/(f.x-c.x)*(f.y-c.y))._round():f.x>=r&&(f=new ni(r,c.y+(r-c.x)/(f.x-c.x)*(f.y-c.y))._round()),c.y>=i&&f.y>=i||(c.y>=i?c=new ni(c.x+(i-c.y)/(f.y-c.y)*(f.x-c.x),i)._round():f.y>=i&&(f=new ni(c.x+(i-c.y)/(f.y-c.y)*(f.x-c.x),i)._round()),u&&c.equals(u[u.length-1])||o.push(u=[c]),u.push(f)))))}return o},Cr=function(t,e,n,r){var i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2,u=o.paddedRect.h-2,l=t.right-t.left,c=t.bottom-t.top,f=o.stretchX||[[0,s]],p=o.stretchY||[[0,u]],h=function(t,e){return t+e[1]-e[0]},d=f.reduce(h,0),g=p.reduce(h,0),y=s-d,A=u-g,v=0,m=d,_=0,b=g,x=0,w=y,E=0,S=A;if(o.content&&r){var P=o.content;v=Tr(f,0,P[0]),_=Tr(p,0,P[1]),m=Tr(f,P[0],P[2]),b=Tr(p,P[1],P[3]),x=P[0]-v,E=P[1]-_,w=P[2]-P[0]-m,S=P[3]-P[1]-b}var k=function(r,i,s,u){var f=Mr(r.stretch-v,m,l,t.left),p=Or(r.fixed-x,w,r.stretch,d),h=Mr(i.stretch-_,b,c,t.top),y=Or(i.fixed-E,S,i.stretch,g),A=Mr(s.stretch-v,m,l,t.left),P=Or(s.fixed-x,w,s.stretch,d),k=Mr(u.stretch-_,b,c,t.top),C=Or(u.fixed-E,S,u.stretch,g),T=new ni(f,h),I=new ni(A,h),M=new ni(A,k),O=new ni(f,k),L=new ni(p/a,y/a),R=new ni(P/a,C/a),D=e*Math.PI/180;if(D){var N=Math.sin(D),F=Math.cos(D),j=[F,-N,N,F];T._matMult(j),I._matMult(j),O._matMult(j),M._matMult(j)}var z=r.stretch+r.fixed,B=i.stretch+i.fixed;return{tl:T,tr:I,bl:O,br:M,tex:{x:o.paddedRect.x+1+z,y:o.paddedRect.y+1+B,w:s.stretch+s.fixed-z,h:u.stretch+u.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:R,minFontScaleX:w/a/l,minFontScaleY:S/a/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY))for(var C=Ir(f,y,d),T=Ir(p,A,g),I=0;I<C.length-1;I++)for(var M=C[I],O=C[I+1],L=0;L<T.length-1;L++)i.push(k(M,T[L],O,T[L+1]));else i.push(k({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:u+1}));return i},Tr=function(t,e,n){for(var r=0,i=0,o=t;i<o.length;i+=1){var a=o[i];r+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return r},Ir=function(t,e,n){for(var r=[{fixed:-1,stretch:0}],i=0,o=t;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],l=r[r.length-1];r.push({fixed:s-l.stretch,stretch:l.stretch}),r.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return r.push({fixed:e+1,stretch:n}),r},Mr=function(t,e,n,r){return t/e*n+r},Or=function(t,e,n,r){return t-e*n/r},Lr=function(t,e){return t<e?-1:t>e?1:0},Rr=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var r=1/0,i=1/0,o=-1/0,a=-1/0,s=t[0],u=0;u<s.length;u++){var l=s[u];(!u||l.x<r)&&(r=l.x),(!u||l.y<i)&&(i=l.y),(!u||l.x>o)&&(o=l.x),(!u||l.y>a)&&(a=l.y)}var c=Math.min(o-r,a-i),f=c/2,p=new ec([],Dr);if(0===c)return new ni(r,i);for(var h=r;h<o;h+=c)for(var d=i;d<a;d+=c)p.push(new Nr(h+f,d+f,f,t));for(var g=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new Nr(n/e,r/e,0,t)}(t),y=p.length;p.length;){var A=p.pop();(A.d>g.d||!g.d)&&(g=A,n&&console.log("found best %d after %d probes",Math.round(1e4*A.d)/1e4,y)),A.max-g.d<=e||(p.push(new Nr(A.p.x-(f=A.h/2),A.p.y-f,f,t)),p.push(new Nr(A.p.x+f,A.p.y-f,f,t)),p.push(new Nr(A.p.x-f,A.p.y+f,f,t)),p.push(new Nr(A.p.x+f,A.p.y+f,f,t)),y+=4)}return n&&(console.log("num probes: "+y),console.log("best distance: "+g.d)),g.p},Dr=function(t,e){return e.max-t.max},Nr=function(t,e,n,r){this.p=new ni(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>t.y!=c.y>t.y&&t.x<(c.x-l.x)*(t.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,Fe(t,l,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2},Fr=function(t,e){return e[1]!==nc?function(t,e,n){var r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){var n=0,r=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])},jr=function(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"},zr=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d){var y=function(t,e,n,r,i,o,a,s){for(var u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=[],c=0,f=e.positionedLines;c<f.length;c+=1)for(var p=f[c],h=0,d=p.positionedGlyphs;h<d.length;h+=1){var g=d[h];if(g.rect){var y=g.rect||{},A=4,v=!0,m=1,_=0,b=(i||s)&&g.vertical,x=g.metrics.advance*g.scale/2;if(s&&e.verticalizable&&(_=p.lineOffset/2-(g.imageName?-(24-g.metrics.width*g.scale)/2:24*(g.scale-1))),g.imageName){var w=a[g.imageName];v=w.sdf,A=1/(m=w.pixelRatio)}var E=i?[g.x+x,g.y]:[0,0],S=i?[0,0]:[g.x+x+n[0],g.y+n[1]-_],P=[0,0];b&&(P=S,S=[0,0]);var k=(g.metrics.left-A)*g.scale-x+S[0],C=(-g.metrics.top-A)*g.scale+S[1],T=k+y.w*g.scale/m,I=C+y.h*g.scale/m,M=new ni(k,C),O=new ni(T,C),L=new ni(k,I),R=new ni(T,I);if(b){var D=new ni(-x,x- -17),N=-Math.PI/2,F=12-x,j=new ni(22-F,-(g.imageName?F:0)),z=new(Function.prototype.bind.apply(ni,[null].concat(P)));M._rotateAround(N,D)._add(j)._add(z),O._rotateAround(N,D)._add(j)._add(z),L._rotateAround(N,D)._add(j)._add(z),R._rotateAround(N,D)._add(j)._add(z)}if(u){var B=Math.sin(u),U=Math.cos(u),V=[U,-B,B,U];M._matMult(V),O._matMult(V),L._matMult(V),R._matMult(V)}var G=new ni(0,0),q=new ni(0,0);l.push({tl:M,tr:O,bl:L,br:R,tex:y,writingMode:e.writingMode,glyphOffset:E,sectionIndex:g.sectionIndex,isSDF:v,pixelOffsetTL:G,pixelOffsetBR:q,minFontScaleX:0,minFontScaleY:0})}}return l}(0,n,s,i,o,a,r,t.allowVerticalPlacement),A=t.textSizeData,v=null;"source"===A.kind?(v=[128*i.layout.get("text-size").evaluate(a,{})])[0]>32640&&g(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===A.kind&&((v=[128*h.compositeTextSizes[0].evaluate(a,{},d),128*h.compositeTextSizes[1].evaluate(a,{},d)])[0]>32640||v[1]>32640)&&g(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,y,v,s,o,a,l,e,u.lineStartIndex,u.lineLength,p,d);for(var m=0,_=c;m<_.length;m+=1)f[_[m]]=t.text.placedSymbolArray.length-1;return 4*y.length},Br=function(t){for(var e in t)return t[e];return null},Ur=function(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1},Vr=function(t,e,n,r,i,o,a,s,u,l,c,f,p){var h=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(h<<1)+(u?1:0),d,16*l,16*c,256*f,256*p)},Gr=function(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)},qr=function(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(Ae(n[e].text))return!0;return!1},Wr=function(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]},Hr=function(t){return Oc*Math.cos(t*Math.PI/180)},Xr=function(t){return(180+t)/360},Zr=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360},Yr=function(t,e){return t/Hr(e)},Qr=function(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90},Kr=function(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)},Jr=function(t,e,n,r,i){return h(t,(function(t,o){var a=e instanceof is?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))},$r=function(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:e,minY:n,maxX:r,maxY:i}},ti=function(t,e){return e-t},ei=n;n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var ni=r;r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t};var ri="undefined"!=typeof self?self:{},ii=Math.pow(2,53)-1,oi=i(.25,.1,.25,1),ai=1;function si(t){return Array.isArray(t)?t.map(si):"object"==typeof t&&t?h(t,si):t}var ui,li,ci,fi,pi={},hi=null,di=ri.performance&&ri.performance.now?ri.performance.now.bind(ri.performance):Date.now.bind(Date),gi=ri.requestAnimationFrame||ri.mozRequestAnimationFrame||ri.webkitRequestAnimationFrame||ri.msRequestAnimationFrame,yi=ri.cancelAnimationFrame||ri.mozCancelAnimationFrame||ri.webkitCancelAnimationFrame||ri.msCancelAnimationFrame,Ai={now:di,frame:function(t){var e=gi(t);return{cancel:function(){return yi(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=ri.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return ui||(ui=ri.document.createElement("a")),ui.href=t,ui.href},hardwareConcurrency:ri.navigator&&ri.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ri.devicePixelRatio},get prefersReducedMotion(){return!!ri.matchMedia&&(null==li&&(li=ri.matchMedia("(prefers-reduced-motion: reduce)")),li.matches)}},vi={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},mi={supported:!1,testSupport:function(t){!_i&&fi&&(bi?x(t):ci=t)}},_i=!1,bi=!1;ri.document&&((fi=ri.document.createElement("img")).onload=function(){ci&&x(ci),ci=null,bi=!0},fi.onerror=function(){_i=!0,ci=null},fi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var xi="01",wi=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};wi.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",xi,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},wi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},wi.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},wi.prototype.normalizeStyleURL=function(t,e){if(!w(t))return t;var n=S(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},wi.prototype.normalizeGlyphsURL=function(t,e){if(!w(t))return t;var n=S(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},wi.prototype.normalizeSourceURL=function(t,e){if(!w(t))return t;var n=S(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},wi.prototype.normalizeSpriteURL=function(t,e,n,r){var i=S(t);return w(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=""+e+n,P(i))},wi.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!w(t))return t;var n=S(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ai.devicePixelRatio>=2||512===e?"@2x":"")+(mi.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var r=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||vi.ACCESS_TOKEN;return vi.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,r)},wi.prototype.canonicalizeTileURL=function(t,e){var n=S(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=n.path.replace("/v4/","");var i=n.params;return e&&(i=i.filter((function(t){return!t.match(/^access_token=/)}))),i.length&&(r+="?"+i.join("&")),r},wi.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&w(e),r=[],i=0,o=t.tiles||[];i<o.length;i+=1){var a=o[i];E(a)?r.push(this.canonicalizeTileURL(a,n)):r.push(a)}return r},wi.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=S(vi.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){var i=t.params.indexOf("secure");i>=0&&t.params.splice(i,1)}if("/"!==r.path&&(t.path=""+r.path+t.path),!vi.REQUIRE_ACCESS_TOKEN)return P(t);if(!(e=e||vi.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),P(t)};var Ei=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Si=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,Pi=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Pi.prototype.getStorageKey=function(t){var e,n=k(vi.ACCESS_TOKEN);return e=n&&n.u?ri.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):vi.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Pi.prototype.fetchEventData=function(){var t=b("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=ri.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=ri.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){g("Unable to read from LocalStorage")}},Pi.prototype.saveEventData=function(){var t=b("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{ri.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&ri.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){g("Unable to write to LocalStorage")}},Pi.prototype.processRequests=function(t){},Pi.prototype.postEvent=function(t,e,n,r){var i=this;if(vi.EVENTS_URL){var o=S(vi.EVENTS_URL);o.params.push("access_token="+(r||vi.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:xi,userId:this.anonId},u=e?s(a,e):a,l={url:P(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([u])};this.pendingRequest=Ki(l,(function(t){i.pendingRequest=null,n(t),i.saveEventData(),i.processRequests(r)}))}},Pi.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var ki,Ci,Ti,Ii,Mi,Oi,Li,Ri=(Oi=function(){Mi.call(this,"map.load"),this.success={},this.skuToken=""},(Mi=Pi)&&(Oi.__proto__=Mi),(Oi.prototype=Object.create(Mi&&Mi.prototype)).constructor=Oi,Oi.prototype.postMapLoadEvent=function(t,e,n,r){this.skuToken=n,(vi.EVENTS_URL&&r||vi.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return w(t)||E(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},r)},Oi.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),c(this.anonId)||(this.anonId=l()),this.postEvent(i,{skuToken:this.skuToken},(function(t){t||r&&(e.success[r]=!0)}),t))}},Oi),Di=new(Ii=function(t){Ti.call(this,"appUserTurnstile"),this._customAccessToken=t},(Ti=Pi)&&(Ii.__proto__=Ti),(Ii.prototype=Object.create(Ti&&Ti.prototype)).constructor=Ii,Ii.prototype.postTurnstileEvent=function(t,e){vi.EVENTS_URL&&vi.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return w(t)||E(t)}))&&this.queueRequest(Date.now(),e)},Ii.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=k(vi.ACCESS_TOKEN),r=n?n.u:vi.ACCESS_TOKEN,i=r!==this.eventData.tokenU;c(this.anonId)||(this.anonId=l(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)}),t)}},Ii),Ni=Di.postTurnstileEvent.bind(Di),Fi=new Ri,ji=Fi.postMapLoadEvent.bind(Fi),zi=500,Bi=50,Ui=1/0,Vi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Vi);var Gi,qi,Wi,Hi,Xi=(Gi=Error,qi=function(t,e,n){401===e&&E(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),Gi.call(this,t),this.status=e,this.url=n,this.name=this.constructor.name,this.message=t},Gi&&(qi.__proto__=Gi),(qi.prototype=Object.create(Gi&&Gi.prototype)).constructor=qi,qi.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},qi),Zi=v()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===ri.location.protocol?ri.parent:ri).location.href},Yi=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(Zi())&&!/^\w+:/.test(n))){if(ri.fetch&&ri.Request&&ri.AbortController&&ri.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,r=new ri.AbortController,i=new ri.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Zi(),signal:r.signal}),o=!1,a=!1,s=(n=i.url).indexOf("sku=")>0&&E(n);"json"===t.type&&i.headers.set("Accept","application/json");var u=function(n,r,o){if(!a){if(n&&"SecurityError"!==n.message&&g(n),r&&o)return l(r);var u=Date.now();ri.fetch(i).then((function(n){if(n.ok){var r=s?n.clone():null;return l(n,r,u)}return e(new Xi(n.statusText,n.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},l=function(n,r,s){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){a||(r&&s&&function(t,e,n){if(C(),ki){var r={status:e.status,statusText:e.statusText,headers:new ri.Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var i=m(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===Ci)try{new Response(new ReadableStream),Ci=!0}catch(t){Ci=!1}Ci?e(t.body):t.blob().then(e)}(e,(function(e){var n=new ri.Response(e,r);C(),ki&&ki.then((function(e){return e.put(T(t.url),n)})).catch((function(t){return g(t.message)}))})))}}(i,r,s),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){a||e(new Error(t.message))}))};return s?function(t,e){if(C(),!ki)return e(null);var n=T(t.url);ki.then((function(t){t.match(n).then((function(r){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=m(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)})).catch(e)})).catch(e)}(i,u):u(null,null),{cancel:function(){a=!0,o||r.abort()}}}(t,e);if(v()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new ri.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new Xi(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},Qi=function(t,e){return Yi(s(t,{type:"arrayBuffer"}),e)},Ki=function(t,e){return Yi(s(t,{method:"POST"}),e)},Ji="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Wi=[],Hi=0;var $i=function(t,e){if(mi.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Hi>=vi.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return Wi.push(n),n}Hi++;var r=!1,i=function(){if(!r)for(r=!0,Hi--;Wi.length&&Hi<vi.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Wi.shift();t.cancelled||(t.cancel=$i(t.requestParameters,t.callback).cancel)}},o=Qi(t,(function(t,n,r,o){i(),t?e(t):n&&(I()?function(t,e){var n=new ri.Blob([new Uint8Array(t)],{type:"image/png"});ri.createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(n,e):function(t,e,n,r){var i=new ri.Image,o=ri.URL;i.onload=function(){e(null,i),o.revokeObjectURL(i.src),i.onload=null,ri.requestAnimationFrame((function(){i.src=Ji}))},i.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new ri.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=t.byteLength?o.createObjectURL(a):Ji}(n,e,r,o))}));return{cancel:function(){o.cancel(),i()}}},to=function(t,e){void 0===e&&(e={}),s(this,e),this.type=t},eo=function(t){var e=function(e,n){void 0===n&&(n={}),t.call(this,"error",s({error:e},n))};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(to),no=function(){};no.prototype.on=function(t,e){return this._listeners=this._listeners||{},M(t,e,this._listeners),this},no.prototype.off=function(t,e){return O(t,e,this._listeners),O(t,e,this._oneTimeListeners),this},no.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},M(t,e,this._oneTimeListeners),this},no.prototype.fire=function(t,e){"string"==typeof t&&(t=new to(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var u=a[o];O(n,u,this._oneTimeListeners),u.call(this,t)}var l=this._eventedParent;l&&(s(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof eo&&console.error(t.error);return this},no.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},no.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var ro={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},io=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function oo(t){if(Array.isArray(t))return t.map(oo);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=oo(t[n]);return e}return D(t)}var ao=function(t){var e=function(e,n){t.call(this,n),this.message=n,this.key=e};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),so=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};so.prototype.concat=function(t){return new so(this,t)},so.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},so.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var uo={kind:"null"},lo={kind:"number"},co={kind:"string"},fo={kind:"boolean"},po={kind:"color"},ho={kind:"object"},go={kind:"value"},yo={kind:"collator"},Ao={kind:"formatted"},vo={kind:"resolvedImage"};function mo(t){if("array"===t.kind){var e=mo(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var _o=[uo,lo,co,fo,po,Ao,ho,N(go),vo];function bo(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!bo(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=_o;n<r.length;n+=1)if(!bo(r[n],e))return null}return"Expected "+mo(t)+" but found "+mo(e)+" instead."}var xo=e((function(t,e){var n=function(t){return(t=Math.round(t))<0?0:t>255?255:t},r=function(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))},i=function(t){var e;return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e},o=function(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t},a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in a)return a[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),f=s.substr(u+1,l-(u+1)).split(","),p=1;switch(c){case"rgba":if(4!==f.length)return null;p=i(f.pop());case"rgb":return 3!==f.length?null:[r(f[0]),r(f[1]),r(f[2]),p];case"hsla":if(4!==f.length)return null;p=i(f.pop());case"hsl":if(3!==f.length)return null;var h=(parseFloat(f[0])%360+360)%360/360,d=i(f[1]),g=i(f[2]),y=g<=.5?g*(d+1):g+d-g*d,A=2*g-y;return[n(255*o(A,y,h+1/3)),n(255*o(A,y,h)),n(255*o(A,y,h-1/3)),p];default:return null}}return null}}catch(t){}})).parseCSSColor,wo=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};wo.parse=function(t){if(t){if(t instanceof wo)return t;if("string"==typeof t){var e=xo(t);if(e)return new wo(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},wo.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+r+")"},wo.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},wo.black=new wo(0,0,0,1),wo.white=new wo(1,1,1,1),wo.transparent=new wo(0,0,0,0),wo.red=new wo(1,0,0,1);var Eo=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Eo.prototype.compare=function(t,e){return this.collator.compare(t,e)},Eo.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var So=function(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i},Po=function(t){this.sections=t};Po.fromString=function(t){return new Po([new So(t,null,null,null,null)])},Po.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},Po.factory=function(t){return t instanceof Po?t:Po.fromString(t)},Po.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},Po.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}return t};var ko=function(t){this.name=t.name,this.available=t.available};function Co(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof wo)return!0;if(t instanceof Eo)return!0;if(t instanceof Po)return!0;if(t instanceof ko)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!Co(n[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!Co(t[r]))return!1;return!0}return!1}function To(t){if(null===t)return uo;if("string"==typeof t)return co;if("boolean"==typeof t)return fo;if("number"==typeof t)return lo;if(t instanceof wo)return po;if(t instanceof Eo)return yo;if(t instanceof Po)return Ao;if(t instanceof ko)return vo;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=To(i[r]);if(e){if(e===o)continue;e=go;break}e=o}return N(e||go,n)}return ho}ko.prototype.toString=function(){return this.name},ko.fromString=function(t){return t?new ko({name:t,available:!1}):null},ko.prototype.serialize=function(){return["image",this.name]};var Io=function(t,e){this.type=t,this.value=e};Io.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!Co(t[1]))return e.error("invalid value");var n=t[1],r=To(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Io(r,n)},Io.prototype.evaluate=function(){return this.value},Io.prototype.eachChild=function(){},Io.prototype.outputDefined=function(){return!0},Io.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof wo?["rgba"].concat(this.value.toArray()):this.value instanceof Po?this.value.serialize():this.value};var Mo=function(t){this.name="ExpressionEvaluationError",this.message=t};Mo.prototype.toJSON=function(){return this.message};var Oo={string:co,number:lo,boolean:fo,object:ho},Lo=function(t,e){this.type=t,this.args=e};Lo.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Oo)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Oo[s],r++}else o=go;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=N(o,a)}else n=Oo[i];for(var u=[];r<t.length;r++){var l=e.parse(t[r],r,go);if(!l)return null;u.push(l)}return new Lo(n,u)},Lo.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!bo(this.type,To(n)))return n;if(e===this.args.length-1)throw new Mo("Expected value to be of type "+mo(this.type)+", but found "+mo(To(n))+" instead.")}return null},Lo.prototype.eachChild=function(t){this.args.forEach(t)},Lo.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},Lo.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var Ro=function(t){this.type=Ao,this.sections=t};Ro.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=t.length-1;++o){var a=t[o];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,lo)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,N(co))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,po)))return null;var c=r[r.length-1];c.scale=s,c.font=u,c.textColor=l}else{var f=e.parse(t[o],1,go);if(!f)return null;var p=f.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:f,scale:null,font:null,textColor:null})}}return new Ro(r)},Ro.prototype.evaluate=function(t){return new Po(this.sections.map((function(e){var n=e.content.evaluate(t);return To(n)===vo?new So("",n,null,null,null):new So(B(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},Ro.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}return t};var Do=function(t){this.type=vo,this.input=t};Do.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,co);return n?new Do(n):e.error("No image name provided.")},Do.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=ko.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},Do.prototype.eachChild=function(t){t(this.input)},Do.prototype.outputDefined=function(){return!1},Do.prototype.serialize=function(){return["image",this.input.serialize()]};var No={"to-boolean":fo,"to-color":po,"to-number":lo,"to-string":co},Fo=function(t,e){this.type=t,this.args=e};Fo.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=No[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,go);if(!a)return null;i.push(a)}return new Fo(r,i)},Fo.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof wo)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":z(e[0],e[1],e[2],e[3])))return new wo(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Mo(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new Mo("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Po.fromString(B(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ko.fromString(B(this.args[0].evaluate(t))):B(this.args[0].evaluate(t))},Fo.prototype.eachChild=function(t){this.args.forEach(t)},Fo.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},Fo.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ro([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Do(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var jo=["Unknown","Point","LineString","Polygon"],zo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};zo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},zo.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?jo[this.feature.type]:this.feature.type:null},zo.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},zo.prototype.canonicalID=function(){return this.canonical},zo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},zo.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=wo.parse(t)),e};var Bo=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};Bo.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Bo.prototype.eachChild=function(t){this.args.forEach(t)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},Bo.parse=function(t,e){var n,r=t[0],i=Bo.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter((function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1})),u=null,l=0,c=s;l<c.length;l+=1){var f=c[l],p=f[0],h=f[1];u=new Xo(e.registry,e.path,null,e.scope);for(var d=[],g=!1,y=1;y<t.length;y++){var A=t[y],v=Array.isArray(p)?p[y-1]:p.type,m=u.parse(A,1+d.length,v);if(!m){g=!0;break}d.push(m)}if(!g)if(Array.isArray(p)&&p.length!==d.length)u.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var _=0;_<d.length;_++){var b=Array.isArray(p)?p[_]:p.type,x=d[_];u.concat(_+1).checkSubtype(b,x.type)}if(0===u.errors.length)return new Bo(r,o,h,d)}}if(1===s.length)(n=e.errors).push.apply(n,u.errors);else{for(var w=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(mo).join(", ")+")":"("+mo(e.type)+"...)"})).join(" | "),E=[],S=1;S<t.length;S++){var P=e.parse(t[S],1+E.length);if(!P)return null;E.push(mo(P.type))}e.error("Expected arguments of type "+w+", but found ("+E.join(", ")+") instead.")}return null},Bo.register=function(t,e){for(var n in Bo.definitions=e,e)t[n]=Bo};var Uo=function(t,e,n){this.type=yo,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};Uo.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,fo);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,fo);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,co))?null:new Uo(r,i,o)},Uo.prototype.evaluate=function(t){return new Eo(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Uo.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Uo.prototype.outputDefined=function(){return!1},Uo.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Vo=function(t,e){this.type=fo,this.geojson=t,this.geometries=e};function Go(t){if(t instanceof Bo){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Vo)return!1;var e=!0;return t.eachChild((function(t){e&&!Go(t)&&(e=!1)})),e}function qo(t){if(t instanceof Bo&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!qo(t)&&(e=!1)})),e}function Wo(t,e){if(t instanceof Bo&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!Wo(t,e)&&(n=!1)})),n}Vo.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(Co(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Vo(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Vo(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Vo(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Vo.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=K(e.coordinates,r,i),a=tt(t.geometry(),n,r,i);if(!V(n,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!W(u[s],o))return!1}if("MultiPolygon"===e.type){var l=J(e.coordinates,r,i),c=tt(t.geometry(),n,r,i);if(!V(n,r))return!1;for(var f=0,p=c;f<p.length;f+=1)if(!H(p[f],l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=K(e.coordinates,r,i),a=et(t.geometry(),n,r,i);if(!V(n,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Y(u[s],o))return!1}if("MultiPolygon"===e.type){var l=J(e.coordinates,r,i),c=et(t.geometry(),n,r,i);if(!V(n,r))return!1;for(var f=0,p=c;f<p.length;f+=1)if(!Q(p[f],l))return!1}return!0}(t,this.geometries)}return!1},Vo.prototype.eachChild=function(){},Vo.prototype.outputDefined=function(){return!0},Vo.prototype.serialize=function(){return["within",this.geojson]};var Ho=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Ho.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Ho(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Ho.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Ho.prototype.eachChild=function(){},Ho.prototype.outputDefined=function(){return!1},Ho.prototype.serialize=function(){return["var",this.name]};var Xo=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new so),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=i,this.expectedType=n};Xo.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Xo.prototype._parse=function(t,e){var n=function(t,e,n){return"assert"===n?new Lo(e,[t]):"coerce"===n?new Fo(e,[t]):t};if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+(void 0===r?"undefined":vt.default(r))+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof Io)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof Ho)return t(e.boundExpression);if(e instanceof Bo&&"error"===e.name)return!1;if(e instanceof Uo)return!1;if(e instanceof Vo)return!1;var n=e instanceof Fo||e instanceof Lo,r=!0;return e.eachChild((function(e){r=n?r&&t(e):r&&e instanceof Io})),!!r&&Go(e)&&Wo(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new zo;try{o=new Io(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+(void 0===t?"undefined":vt.default(t))+" instead.")},Xo.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Xo(this.registry,r,e||null,i,this.errors)},Xo.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new ao(r,t))},Xo.prototype.checkSubtype=function(t,e){var n=bo(t,e);return n&&this.error(n),n};var Zo=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};Zo.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,lo);if(!n)return null;var r=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,i);if(!c)return null;i=i||c.type,r.push([a,c])}return new Zo(i,n,r)},Zo.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[nt(e,r)].evaluate(t)},Zo.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Zo.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Zo.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Yo=Object.freeze({__proto__:null,number:rt,color:function(t,e,n){return new wo(rt(t.r,e.r,n),rt(t.g,e.g,n),rt(t.b,e.b,n),rt(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,r){return rt(t,e[r],n)}))}}),Qo=6/29*3*(6/29),Ko=Math.PI/180,Jo=180/Math.PI,$o={forward:ut,reverse:lt,interpolate:function(t,e,n){return{l:rt(t.l,e.l,n),a:rt(t.a,e.a,n),b:rt(t.b,e.b,n),alpha:rt(t.alpha,e.alpha,n)}}},ta={forward:function(t){var e=ut(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*Jo;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Ko,n=t.c;return lt({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:ct(t.h,e.h,n),c:rt(t.c,e.c,n),l:rt(t.l,e.l,n),alpha:rt(t.alpha,e.alpha,n)}}},ea=Object.freeze({__proto__:null,lab:$o,hcl:ta}),na=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};na.interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=ft(e,t.base,n,r);else if("linear"===t.name)i=ft(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new ei(o[0],o[1],o[2],o[3]).solve(ft(e,1,n,r))}return i},na.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,lo)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=po:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var f=o[c],p=o[c+1],h=c+3,d=c+4;if("number"!=typeof f)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(u.length&&u[u.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var g=e.parse(p,d,l);if(!g)return null;l=l||g.type,u.push([f,g])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new na(l,n,r,i,u):e.error("Type "+mo(l)+" is not interpolatable.")},na.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=nt(e,r),a=na.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?Yo[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?ta.reverse(ta.interpolate(ta.forward(s),ta.forward(u),a)):$o.reverse($o.interpolate($o.forward(s),$o.forward(u),a))},na.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},na.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},na.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var ra=function(t,e){this.type=t,this.args=e};ra.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var u=r&&i.some((function(t){return bo(r,t.type)}));return new ra(u?go:n,i)},ra.prototype.evaluate=function(t){for(var e,n=null,r=0,i=0,o=this.args;i<o.length&&(r++,(n=o[i].evaluate(t))&&n instanceof ko&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null===n);i+=1);return n},ra.prototype.eachChild=function(t){this.args.forEach(t)},ra.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ra.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var ia=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};ia.prototype.evaluate=function(t){return this.result.evaluate(t)},ia.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},ia.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+(void 0===i?"undefined":vt.default(i))+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new ia(n,a):null},ia.prototype.outputDefined=function(){return this.result.outputDefined()},ia.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var oa=function(t,e,n){this.type=t,this.index=e,this.input=n};oa.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,lo),r=e.parse(t[2],2,N(e.expectedType||go));return n&&r?new oa(r.type.itemType,n,r):null},oa.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Mo("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new Mo("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new Mo("Array index must be an integer, but found "+e+" instead.");return n[e]},oa.prototype.eachChild=function(t){t(this.index),t(this.input)},oa.prototype.outputDefined=function(){return!1},oa.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var aa=function(t,e){this.type=fo,this.needle=t,this.haystack=e};aa.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,go),r=e.parse(t[2],2,go);return n&&r?F(n.type,[fo,co,lo,uo,go])?new aa(n,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+mo(n.type)+" instead"):null},aa.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!j(e,["boolean","string","number","null"]))throw new Mo("Expected first argument to be of type boolean, string, number or null, but found "+mo(To(e))+" instead.");if(!j(n,["string","array"]))throw new Mo("Expected second argument to be of type array or string, but found "+mo(To(n))+" instead.");return n.indexOf(e)>=0},aa.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},aa.prototype.outputDefined=function(){return!0},aa.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var sa=function(t,e,n){this.type=lo,this.needle=t,this.haystack=e,this.fromIndex=n};sa.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,go),r=e.parse(t[2],2,go);if(!n||!r)return null;if(!F(n.type,[fo,co,lo,uo,go]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+mo(n.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,lo);return i?new sa(n,r,i):null}return new sa(n,r)},sa.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!j(e,["boolean","string","number","null"]))throw new Mo("Expected first argument to be of type boolean, string, number or null, but found "+mo(To(e))+" instead.");if(!j(n,["string","array"]))throw new Mo("Expected second argument to be of type array or string, but found "+mo(To(n))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)},sa.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},sa.prototype.outputDefined=function(){return!1},sa.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ua=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};ua.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,f=s;c<f.length;c+=1){var p=f[c];if("number"!=typeof p&&"string"!=typeof p)return l.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,To(p)))return null}else n=To(p);if(void 0!==i[String(p)])return l.error("Branch labels must be unique.");i[String(p)]=o.length}var h=e.parse(u,a,r);if(!h)return null;r=r||h.type,o.push(h)}var d=e.parse(t[1],1,go);if(!d)return null;var g=e.parse(t[t.length-1],t.length-1,r);return g?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new ua(n,r,d,i,o,g):null},ua.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(To(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},ua.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},ua.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},ua.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(f=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[f][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=n;u<l.length;u+=1){var c=l[u],f=c[0],p=c[1];e.push(1===p.length?s(p[0]):p.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var la=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};la.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,fo);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new la(n,r,s):null},la.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},la.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},la.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},la.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var ca=function(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r};ca.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,go),r=e.parse(t[2],2,lo);if(!n||!r)return null;if(!F(n.type,[N(go),co,go]))return e.error("Expected first argument to be of type array or string, but found "+mo(n.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,lo);return i?new ca(n.type,n,r,i):null}return new ca(n.type,n,r)},ca.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!j(e,["string","array"]))throw new Mo("Expected first argument to be of type array or string, but found "+mo(To(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)},ca.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},ca.prototype.outputDefined=function(){return!1},ca.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var fa=dt("==",(function(t,e,n){return e===n}),ht),pa=dt("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!ht(0,e,n,r)})),ha=dt("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),da=dt(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),ga=dt("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),ya=dt(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),Aa=function(t,e,n,r,i){this.type=co,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};Aa.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,lo);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,co)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,co)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,lo)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,lo))?null:new Aa(n,i,o,a,s)},Aa.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Aa.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Aa.prototype.outputDefined=function(){return!1},Aa.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var va=function(t){this.type=lo,this.input=t};va.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+mo(n.type)+" instead."):new va(n):null},va.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Mo("Expected value to be of type string or array, but found "+mo(To(e))+" instead.")},va.prototype.eachChild=function(t){t(this.input)},va.prototype.outputDefined=function(){return!1},va.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var ma={"==":fa,"!=":pa,">":da,"<":ha,">=":ya,"<=":ga,array:Lo,at:oa,boolean:Lo,case:la,coalesce:ra,collator:Uo,format:Ro,image:Do,in:aa,"index-of":sa,interpolate:na,"interpolate-hcl":na,"interpolate-lab":na,length:va,let:ia,literal:Io,match:ua,number:Lo,"number-format":Aa,object:Lo,slice:ca,step:Zo,string:Lo,"to-boolean":Fo,"to-color":Fo,"to-number":Fo,"to-string":Fo,var:Ho,within:Vo};Bo.register(ma,{error:[{kind:"error"},[co],function(t,e){throw new Mo(e[0].evaluate(t))}],typeof:[co,[go],function(t,e){return mo(To(e[0].evaluate(t)))}],"to-rgba":[N(lo,4),[po],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[po,[lo,lo,lo],gt],rgba:[po,[lo,lo,lo,lo],gt],has:{type:fo,overloads:[[[co],function(t,e){return yt(e[0].evaluate(t),t.properties())}],[[co,ho],function(t,e){var n=e[1];return yt(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:go,overloads:[[[co],function(t,e){return At(e[0].evaluate(t),t.properties())}],[[co,ho],function(t,e){var n=e[1];return At(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[go,[co],function(t,e){return At(e[0].evaluate(t),t.featureState||{})}],properties:[ho,[],function(t){return t.properties()}],"geometry-type":[co,[],function(t){return t.geometryType()}],id:[go,[],function(t){return t.id()}],zoom:[lo,[],function(t){return t.globals.zoom}],"heatmap-density":[lo,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[lo,[],function(t){return t.globals.lineProgress||0}],accumulated:[go,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[lo,mt(lo),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[lo,mt(lo),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:lo,overloads:[[[lo,lo],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[lo],function(t,e){return-e[0].evaluate(t)}]]},"/":[lo,[lo,lo],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[lo,[lo,lo],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[lo,[],function(){return Math.LN2}],pi:[lo,[],function(){return Math.PI}],e:[lo,[],function(){return Math.E}],"^":[lo,[lo,lo],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[lo,[lo],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[lo,[lo],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[lo,[lo],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[lo,[lo],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[lo,[lo],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[lo,[lo],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[lo,[lo],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[lo,[lo],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[lo,[lo],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[lo,[lo],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[lo,mt(lo),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[lo,mt(lo),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[lo,[lo],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[lo,[lo],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[lo,[lo],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[lo,[lo],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[fo,[co,go],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[fo,[go],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[fo,[co],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[fo,[co,go],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return(void 0===i?"undefined":vt.default(i))==(void 0===o?"undefined":vt.default(o))&&i<o}],"filter-id-<":[fo,[go],function(t,e){var n=e[0],r=t.id(),i=n.value;return(void 0===r?"undefined":vt.default(r))==(void 0===i?"undefined":vt.default(i))&&r<i}],"filter->":[fo,[co,go],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return(void 0===i?"undefined":vt.default(i))==(void 0===o?"undefined":vt.default(o))&&i>o}],"filter-id->":[fo,[go],function(t,e){var n=e[0],r=t.id(),i=n.value;return(void 0===r?"undefined":vt.default(r))==(void 0===i?"undefined":vt.default(i))&&r>i}],"filter-<=":[fo,[co,go],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return(void 0===i?"undefined":vt.default(i))==(void 0===o?"undefined":vt.default(o))&&i<=o}],"filter-id-<=":[fo,[go],function(t,e){var n=e[0],r=t.id(),i=n.value;return(void 0===r?"undefined":vt.default(r))==(void 0===i?"undefined":vt.default(i))&&r<=i}],"filter->=":[fo,[co,go],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return(void 0===i?"undefined":vt.default(i))==(void 0===o?"undefined":vt.default(o))&&i>=o}],"filter-id->=":[fo,[go],function(t,e){var n=e[0],r=t.id(),i=n.value;return(void 0===r?"undefined":vt.default(r))==(void 0===i?"undefined":vt.default(i))&&r>=i}],"filter-has":[fo,[go],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[fo,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[fo,[N(co)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[fo,[N(go)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[fo,[co,N(go)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[fo,[co,N(go)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:fo,overloads:[[[fo,fo],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[mt(fo),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:fo,overloads:[[[fo,fo],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[mt(fo),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[fo,[fo],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[fo,[co],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[co,[co],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[co,[co],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[co,mt(go),function(t,e){return e.map((function(e){return B(e.evaluate(t))})).join("")}],"resolved-locale":[co,[yo],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var _a=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new zo,this._defaultValue=e?function(t){return"color"===t.type&&Pt(t.default)?new wo(0,0,0,0):"color"===t.type?wo.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};_a.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},_a.prototype.evaluate=function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Mo("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var ba=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!qo(e.expression)};ba.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},ba.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)};var xa=function(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!qo(e.expression),this.interpolationType=r};xa.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},xa.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)},xa.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?na.interpolationFactor(this.interpolationType,t,e,n):0};var wa=function(t,e){this._parameters=t,this._specification=e,R(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(Et(n)?"exponential":"interval");if(a&&((e=R({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],wo.parse(t[1])]}))),e.default=wo.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!ea[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)r=Mt;else if("interval"===l)r=It;else if("categorical"===l){r=Tt,i=Object.create(null);for(var c=0,f=e.stops;c<f.length;c+=1){var p=f[c];i[p[0]]=p[1]}o=vt.default(e.stops[0][0])}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=Ot}if(s){for(var h={},d=[],g=0;g<e.stops.length;g++){var y=e.stops[g],A=y[0].zoom;void 0===h[A]&&(h[A]={zoom:A,type:e.type,property:e.property,default:e.default,stops:[]},d.push(A)),h[A].stops.push([y[0].value,y[1]])}for(var v=[],m=0,_=d;m<_.length;m+=1){var b=_[m];v.push([h[b].zoom,t(h[b],n)])}var x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:na.interpolationFactor.bind(void 0,x),zoomStops:v.map((function(t){return t[0]})),evaluate:function(t,r){var i=t.zoom;return Mt({stops:v,base:e.base},n,i).evaluate(i,r)}}}if(u){var w="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:na.interpolationFactor.bind(void 0,w),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return r(e,n,t.zoom,i,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Ct(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};function Ea(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!Ea(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}wa.deserialize=function(t){return new wa(t._parameters,t._specification)},wa.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Sa={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pa(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?qt(t[1],t[2],"=="):"!="===n?Xt(qt(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?qt(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Pa))):"all"===n?["all"].concat(t.slice(1).map(Pa)):"none"===n?["all"].concat(t.slice(1).map(Pa).map(Xt)):"in"===n?Wt(t[1],t.slice(2)):"!in"===n?Xt(Wt(t[1],t.slice(2))):"has"===n?Ht(t[1]):"!has"===n?Xt(Ht(t[1])):"within"!==n||t}var ka={promoteId:function(t){var e=t.key,n=t.value;if("string"===St(n))return $t({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,$t({key:e+"."+i,value:n[i]}));return r}},Ca={"*":function(){return[]},array:Ft,boolean:function(t){var e=t.value,n=t.key,r=St(e);return"boolean"!==r?[new io(n,e,"boolean expected, "+r+" found")]:[]},number:jt,color:function(t){var e=t.key,n=t.value,r=St(n);return"string"!==r?[new io(e,n,"color expected, "+r+" found")]:null===xo(n)?[new io(e,n,'color expected, "'+n+'" found')]:[]},constants:L,enum:Ut,filter:Zt,function:zt,layer:Jt,object:Nt,source:te,light:ee,string:$t,formatted:function(t){return 0===$t(t).length?[]:Bt(t)},resolvedImage:function(t){return 0===$t(t).length?[]:Bt(t)}};ie.source=ae(te),ie.light=ae(ee),ie.layer=ae(Jt),ie.filter=ae(Zt),ie.paintProperty=ae(Qt),ie.layoutProperty=ae(Kt);var Ta=ie,Ia=Ta.light,Ma=Ta.paintProperty,Oa=Ta.layoutProperty,La=ue;ue.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},ue.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ue.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},ue.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},ue.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,f=0;f<u.length;f++){var p=u[f];if(void 0===a[p]){var h=4*p;(s?s(c[h+0],c[h+1],c[h+2],c[h+3]):t<=c[h+2]&&e<=c[h+3]&&n>=c[h+0]&&r>=c[h+1])?(a[p]=!0,o.push(l[p])):a[p]=!1}}},ue.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(n),f=this._convertToCellCoord(r),p=u;p<=c;p++)for(var h=l;h<=f;h++){var d=this.d*h+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(h),this._convertFromCellCoord(p+1),this._convertFromCellCoord(h+1)))&&i.call(this,t,e,n,r,d,o,a,s))return}},ue.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},ue.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},ue.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Ra=ri.ImageData,Da=ri.ImageBitmap,Na={};for(var Fa in le("Object",Object),La.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},La.deserialize=function(t){return new La(t.buffer)},le("Grid",La),le("Color",wo),le("Error",Error),le("ResolvedImage",ko),le("StylePropertyFunction",wa),le("StyleExpression",_a,{omit:["_evaluator"]}),le("ZoomDependentExpression",xa),le("ZoomConstantExpression",ba),le("CompoundExpression",Bo,{omit:["_evaluate"]}),ma)ma[Fa]._classRegistryKey||le("Expression_"+Fa,ma[Fa]);function ja(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(ce(t)||fe(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Ra)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1)r.push(ja(o[i],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(Na[s].omit.indexOf(l)>=0)){var c=t[l];u[l]=Na[s].shallow.indexOf(l)>=0?c:ja(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+(void 0===t?"undefined":vt.default(t)))}function za(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||ce(t)||fe(t)||ArrayBuffer.isView(t)||t instanceof Ra)return t;if(Array.isArray(t))return t.map(za);if("object"==typeof t){var e=t.$name||"Object",n=Na[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];r[a]=Na[e].shallow.indexOf(a)>=0?s:za(s)}}return r}throw new Error("can't deserialize object of type "+(void 0===t?"undefined":vt.default(t)))}var Ba=function(){this.first=!0};Ba.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Ua={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}},Va=null,Ga="unavailable",qa=null,Wa=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Ga="error"),Va&&Va(t)},Ha=new no,Xa=function(){return Ga},Za=function(){if("deferred"!==Ga||!qa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ga="loading",ve(),qa&&Qi({url:qa},(function(t){t?Wa(t):(Ga="loaded",ve())}))},Ya={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Ga||null!=Ya.applyArabicShaping},isLoading:function(){return"loading"===Ga},setState:function(t){Ga=t.pluginStatus,qa=t.pluginURL},isParsed:function(){return null!=Ya.applyArabicShaping&&null!=Ya.processBidirectionalText&&null!=Ya.processStyledBidirectionalText},getPluginURL:function(){return qa}},Qa=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ba,this.transition={})};Qa.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!ye(r[n].charCodeAt(0),e))return!1;return!0}(t,Ya.isLoaded())},Qa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Qa.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var Ka=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Pt(t))return new wa(t,e);if(Lt(t)){var n=Dt(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=wo.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};Ka.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ka.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var Ja=function(t){this.property=t,this.value=new Ka(t,void 0)};Ja.prototype.transitioned=function(t,e){return new ts(this.property,this.value,e,s({},t.transition,this.transition),t.now)},Ja.prototype.untransitioned=function(){return new ts(this.property,this.value,null,{},0)};var $a=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};$a.prototype.getValue=function(t){return si(this._values[t].value.value)},$a.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Ja(this._values[t].property)),this._values[t].value=new Ka(this._values[t].property,null===e?void 0:si(e))},$a.prototype.getTransition=function(t){return si(this._values[t].transition)},$a.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Ja(this._values[t].property)),this._values[t].transition=si(e)||void 0},$a.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},$a.prototype.transitioned=function(t,e){for(var n=new es(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},$a.prototype.untransitioned=function(){for(var t=new es(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var ts=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};ts.prototype.possiblyEvaluate=function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return i};var es=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};es.prototype.possiblyEvaluate=function(t,e,n){for(var r=new is(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r},es.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var ns=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};ns.prototype.getValue=function(t){return si(this._values[t].value)},ns.prototype.setValue=function(t,e){this._values[t]=new Ka(this._values[t].property,null===e?void 0:si(e))},ns.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},ns.prototype.possiblyEvaluate=function(t,e,n){for(var r=new is(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r};var rs=function(t,e,n){this.property=t,this.value=e,this.parameters=n};rs.prototype.isConstant=function(){return"constant"===this.value.kind},rs.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},rs.prototype.evaluate=function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)};var is=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};is.prototype.get=function(t){return this._values[t]};var os=function(t){this.specification=t};os.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},os.prototype.interpolate=function(t,e,n){var r=Yo[this.specification.type];return r?r(t,e,n):t};var as=function(t,e){this.specification=t,this.overrides=e};as.prototype.possiblyEvaluate=function(t,e,n,r){return new rs(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)},as.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new rs(this,{kind:"constant",value:void 0},t.parameters);var r=Yo[this.specification.type];return r?new rs(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},as.prototype.evaluate=function(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)};var ss=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0===t.value)return new rs(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new rs(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new rs(this,{kind:"constant",value:s},e)}return new rs(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r,i,o){if("source"===t.kind){var a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(as),us=function(t){this.specification=t};us.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Qa(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Qa(Math.floor(e.zoom),e)),t.expression.evaluate(new Qa(Math.floor(e.zoom+1),e)),e)}},us.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},us.prototype.interpolate=function(t){return t};var ls=function(t){this.specification=t};ls.prototype.possiblyEvaluate=function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)},ls.prototype.interpolate=function(){return!1};var cs=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new Ka(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new Ja(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};le("DataDrivenProperty",as),le("DataConstantProperty",os),le("CrossFadedDataDrivenProperty",ss),le("CrossFadedProperty",us),le("ColorRampProperty",ls);var fs,ps,hs=(ps=function(t,e){if(fs.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new ns(e.layout)),e.paint)){for(var n in this._transitionablePaint=new $a(e.paint),t.paint)this.setPaintProperty(n,t.paint[n],{validate:!1});for(var r in t.layout)this.setLayoutProperty(r,t.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new is(e.paint)}},(fs=no)&&(ps.__proto__=fs),(ps.prototype=Object.create(fs&&fs.prototype)).constructor=ps,ps.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},ps.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},ps.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(Oa,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},ps.prototype.getPaintProperty=function(t){return p(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)},ps.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Ma,"layers."+this.id+".paint."+t,t,e,n))return!1;if(p(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(t,a,s)},ps.prototype._handleSpecialPaintPropertyUpdate=function(t){},ps.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},ps.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},ps.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},ps.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},ps.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},ps.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),d(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},ps.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&se(this,t.call(Ta,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:ro,style:{glyphs:!0,sprite:!0}}))},ps.prototype.is3D=function(){return!1},ps.prototype.isTileClipped=function(){return!1},ps.prototype.hasOffscreenPass=function(){return!1},ps.prototype.resize=function(){},ps.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof rs&&xt(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},ps),ds={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},gs=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ys=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};ys.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},ys.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},ys.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ys.prototype.clear=function(){this.length=0},ys.prototype.resize=function(t){this.reserve(t),this.length=t},ys.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},ys.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var As=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(ys);As.prototype.bytesPerElement=4,le("StructArrayLayout2i4",As);var vs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(ys);vs.prototype.bytesPerElement=8,le("StructArrayLayout4i8",vs);var ms=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(ys);ms.prototype.bytesPerElement=12,le("StructArrayLayout2i4i12",ms);var _s=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(ys);_s.prototype.bytesPerElement=8,le("StructArrayLayout2i4ub8",_s);var bs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(ys);bs.prototype.bytesPerElement=8,le("StructArrayLayout2f8",bs);var xs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,a,s,u,l)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c){var f=10*t;return this.uint16[f+0]=e,this.uint16[f+1]=n,this.uint16[f+2]=r,this.uint16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=u,this.uint16[f+8]=l,this.uint16[f+9]=c,t},e}(ys);xs.prototype.bytesPerElement=20,le("StructArrayLayout10ui20",xs);var ws=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,f){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,a,s,u,l,c,f)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,f,p){var h=12*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=u,this.int16[h+8]=l,this.int16[h+9]=c,this.int16[h+10]=f,this.int16[h+11]=p,t},e}(ys);ws.prototype.bytesPerElement=24,le("StructArrayLayout4i4ui4i24",ws);var Es=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(ys);Es.prototype.bytesPerElement=12,le("StructArrayLayout3f12",Es);var Ss=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(ys);Ss.prototype.bytesPerElement=4,le("StructArrayLayout1ul4",Ss);var Ps=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,r,i,o,a,s,u)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l){var c=10*t,f=5*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+3]=i,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[f+3]=s,this.uint16[c+8]=u,this.uint16[c+9]=l,t},e}(ys);Ps.prototype.bytesPerElement=20,le("StructArrayLayout6i1ul2ui20",Ps);var ks=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(ys);ks.prototype.bytesPerElement=12,le("StructArrayLayout2i2i2i12",ks);var Cs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)},e.prototype.emplace=function(t,e,n,r,i,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t},e}(ys);Cs.prototype.bytesPerElement=16,le("StructArrayLayout2f1f2i16",Cs);var Ts=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t},e}(ys);Ts.prototype.bytesPerElement=12,le("StructArrayLayout2ub2f12",Ts);var Is=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(ys);Is.prototype.bytesPerElement=6,le("StructArrayLayout3ui6",Is);var Ms=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g,y){var A=this.length;return this.resize(A+1),this.emplace(A,t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g,y)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g,y,A){var v=24*t,m=12*t,_=48*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[m+2]=o,this.uint32[m+3]=a,this.uint32[m+4]=s,this.uint16[v+10]=u,this.uint16[v+11]=l,this.uint16[v+12]=c,this.float32[m+7]=f,this.float32[m+8]=p,this.uint8[_+36]=h,this.uint8[_+37]=d,this.uint8[_+38]=g,this.uint32[m+10]=y,this.int16[v+22]=A,t},e}(ys);Ms.prototype.bytesPerElement=48,le("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ms);var Os=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g,y,A,v,m,_,b,x,w,E,S,P,k){var C=this.length;return this.resize(C+1),this.emplace(C,t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g,y,A,v,m,_,b,x,w,E,S,P,k)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g,y,A,v,m,_,b,x,w,E,S,P,k,C){var T=34*t,I=17*t;return this.int16[T+0]=e,this.int16[T+1]=n,this.int16[T+2]=r,this.int16[T+3]=i,this.int16[T+4]=o,this.int16[T+5]=a,this.int16[T+6]=s,this.int16[T+7]=u,this.uint16[T+8]=l,this.uint16[T+9]=c,this.uint16[T+10]=f,this.uint16[T+11]=p,this.uint16[T+12]=h,this.uint16[T+13]=d,this.uint16[T+14]=g,this.uint16[T+15]=y,this.uint16[T+16]=A,this.uint16[T+17]=v,this.uint16[T+18]=m,this.uint16[T+19]=_,this.uint16[T+20]=b,this.uint16[T+21]=x,this.uint16[T+22]=w,this.uint32[I+12]=E,this.float32[I+13]=S,this.float32[I+14]=P,this.float32[I+15]=k,this.float32[I+16]=C,t},e}(ys);Os.prototype.bytesPerElement=68,le("StructArrayLayout8i15ui1ul4f68",Os);var Ls=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(ys);Ls.prototype.bytesPerElement=4,le("StructArrayLayout1f4",Ls);var Rs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(ys);Rs.prototype.bytesPerElement=6,le("StructArrayLayout3i6",Rs);var Ds=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t},e}(ys);Ds.prototype.bytesPerElement=8,le("StructArrayLayout1ul2ui8",Ds);var Ns=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(ys);Ns.prototype.bytesPerElement=4,le("StructArrayLayout2ui4",Ns);var Fs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(ys);Fs.prototype.bytesPerElement=2,le("StructArrayLayout1ui2",Fs);var js=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(ys);js.prototype.bytesPerElement=16,le("StructArrayLayout4f16",js);var zs=function(t){var e=function(){t.apply(this,arguments)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new ni(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(gs);zs.prototype.size=20;var Bs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new zs(this,t)},e}(Ps);le("CollisionBoxArray",Bs);var Us=function(t){var e=function(){t.apply(this,arguments)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(gs);Us.prototype.size=48;var Vs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Us(this,t)},e}(Ms);le("PlacedSymbolArray",Vs);var Gs=function(t){var e=function(){t.apply(this,arguments)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,n),e}(gs);Gs.prototype.size=68;var qs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Gs(this,t)},e}(Os);le("SymbolInstanceArray",qs);var Ws=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Ls);le("GlyphOffsetArray",Ws);var Hs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Rs);le("SymbolLineVertexArray",Hs);var Xs=function(t){var e=function(){t.apply(this,arguments)};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(gs);Xs.prototype.size=8;var Zs=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Xs(this,t)},e}(Ds);le("FeatureIndexArray",Zs);var Ys=me([{name:"a_pos",components:2,type:"Int16"}],4).members,Qs=function(t){void 0===t&&(t=[]),this.segments=t};Qs.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>Qs.MAX_VERTEX_ARRAY_LENGTH&&g("Max vertices per segment is "+Qs.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Qs.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},Qs.prototype.get=function(){return this.segments},Qs.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},Qs.simpleSegment=function(t,e,n,r){return new Qs([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},Qs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,le("SegmentVector",Qs);var Ks=me([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Js=e((function(t){t.exports=function(t,e){var n,r,i,o,a,s,u,l;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,l=0;l<r;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),$s=e((function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),tu=Js,eu=$s;tu.murmur3=Js,tu.murmur2=eu;var nu=function(){this.ids=[],this.positions=[],this.indexed=!1};nu.prototype.add=function(t,e,n,r){this.ids.push(xe(t)),this.positions.push(e,n,r)},nu.prototype.getPositions=function(t){for(var e=xe(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},nu.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){for(;r<i;){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;we(e,a,s),we(n,3*a,3*s),we(n,3*a+1,3*s+1),we(n,3*a+2,3*s+2)}s-r<i-s?(t(e,n,r,s),r=s+1):(t(e,n,s+1,i),i=s)}}(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}},nu.deserialize=function(t){var e=new nu;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var ru=Math.pow(2,53)-1;le("FeaturePositionMap",nu);var iu,ou,au,su,uu,lu,cu,fu,pu,hu,du,gu,yu,Au,vu=function(t,e){this.gl=t.gl,this.location=e},mu=(Au=function(t,e){yu.call(this,t,e),this.current=0},(yu=vu)&&(Au.__proto__=yu),(Au.prototype=Object.create(yu&&yu.prototype)).constructor=Au,Au.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},Au),_u=(gu=function(t,e){du.call(this,t,e),this.current=0},(du=vu)&&(gu.__proto__=du),(gu.prototype=Object.create(du&&du.prototype)).constructor=gu,gu.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},gu),bu=(hu=function(t,e){pu.call(this,t,e),this.current=[0,0]},(pu=vu)&&(hu.__proto__=pu),(hu.prototype=Object.create(pu&&pu.prototype)).constructor=hu,hu.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},hu),xu=(fu=function(t,e){cu.call(this,t,e),this.current=[0,0,0]},(cu=vu)&&(fu.__proto__=cu),(fu.prototype=Object.create(cu&&cu.prototype)).constructor=fu,fu.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},fu),wu=(lu=function(t,e){uu.call(this,t,e),this.current=[0,0,0,0]},(uu=vu)&&(lu.__proto__=uu),(lu.prototype=Object.create(uu&&uu.prototype)).constructor=lu,lu.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},lu),Eu=(su=function(t,e){au.call(this,t,e),this.current=wo.transparent},(au=vu)&&(su.__proto__=au),(su.prototype=Object.create(au&&au.prototype)).constructor=su,su.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},su),Su=new Float32Array(16),Pu=(ou=function(t,e){iu.call(this,t,e),this.current=Su},(iu=vu)&&(ou.__proto__=iu),(ou.prototype=Object.create(iu&&iu.prototype)).constructor=ou,ou.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},ou),ku=function(t,e,n){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=n};ku.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},ku.prototype.getBinding=function(t,e,n){return"color"===this.type?new Eu(t,e):new _u(t,e)};var Cu=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Cu.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Cu.prototype.setUniform=function(t,e,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)},Cu.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new wu(t,e):new _u(t,e)};var Tu=function(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new r};Tu.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new Qa(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},Tu.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)},Tu.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var r=Ee(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Tu.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Tu.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Iu=function(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o};Iu.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.expression.evaluate(new Qa(this.zoom),e,{},r,[],i),a=this.expression.evaluate(new Qa(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},Iu.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)},Iu.prototype._setPaintValue=function(t,e,n,r){if("color"===this.type)for(var i=Ee(n),o=Ee(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},Iu.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Iu.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Iu.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=o(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)},Iu.prototype.getBinding=function(t,e,n){return new _u(t,e)};var Mu=function(t,e,n,r,i,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};Mu.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)},Mu.prototype.updatePaintArray=function(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)},Mu.prototype._setPaintValues=function(t,e,n,r){if(r&&n){var i=r[n.min],o=r[n.mid],a=r[n.max];if(i&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Mu.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ks.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ks.members,this.expression.isStateDependent))},Mu.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ou=function(t,e,n){this.binders={},this._buffers=[];var r=[];for(var i in t.paint._values)if(n(i)){var o=t.paint.get(i);if(o instanceof rs&&xt(o.property.specification)){var a=Se(i,t.type),s=o.value,u=o.property.specification.type,l=o.property.useIntegerZoom,c=o.property.specification["property-type"],f="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[i]=f?new Cu(s.value,a):new ku(s.value,a,u),r.push("/u_"+i);else if("source"===s.kind||f){var p=Pe(i,u,"source");this.binders[i]=f?new Mu(s,u,l,e,p,t.id):new Tu(s,a,u,p),r.push("/a_"+i)}else{var h=Pe(i,u,"composite");this.binders[i]=new Iu(s,a,u,l,e,h),r.push("/z_"+i)}}}this.cacheKey=r.sort().join("")};Ou.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Tu||e instanceof Iu?e.maxValue:0},Ou.prototype.populatePaintArrays=function(t,e,n,r,i){for(var o in this.binders){var a=this.binders[o];(a instanceof Tu||a instanceof Iu||a instanceof Mu)&&a.populatePaintArray(t,e,n,r,i)}},Ou.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var r=this.binders[n];r instanceof Cu&&r.setConstantPatternPositions(t,e)}},Ou.prototype.updatePaintArrays=function(t,e,n,r,i){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var l=u[s],c=n.feature(l.index);for(var f in this.binders){var p=this.binders[f];if((p instanceof Tu||p instanceof Iu||p instanceof Mu)&&!0===p.expression.isStateDependent){var h=r.paint.get(f);p.expression=h.value,p.updatePaintArray(l.start,l.end,c,t[a],i),o=!0}}}return o},Ou.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof ku||n instanceof Cu)&&t.push.apply(t,n.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Ou.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof Tu||n instanceof Iu)for(var r=0;r<n.paintVertexAttributes.length;r++)t.push(n.paintVertexAttributes[r].name);else if(n instanceof Mu)for(var i=0;i<Ks.members.length;i++)t.push(Ks.members[i].name)}return t},Ou.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof ku||n instanceof Cu||n instanceof Iu)for(var r=0,i=n.uniformNames;r<i.length;r+=1)t.push(i[r])}return t},Ou.prototype.getPaintVertexBuffers=function(){return this._buffers},Ou.prototype.getUniforms=function(t,e){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof ku||i instanceof Cu||i instanceof Iu)for(var o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=i.getBinding(t,e[s],s);n.push({name:s,property:r,binding:u})}}}return n},Ou.prototype.setUniforms=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,n.get(u),s)}},Ou.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof Mu){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Tu||n instanceof Iu)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Ou.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof Tu||n instanceof Iu||n instanceof Mu)&&n.upload(t)}this.updatePaintBuffers()},Ou.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Tu||e instanceof Iu||e instanceof Mu)&&e.destroy()}};var Lu=function(t,e,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.programConfigurations[o.id]=new Ou(o,e,n)}this.needsUpload=!1,this._featureMap=new nu,this._bufferOffset=0};Lu.prototype.populatePaintArrays=function(t,e,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Lu.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},Lu.prototype.get=function(t){return this.programConfigurations[t]},Lu.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Lu.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},le("ConstantBinder",ku),le("CrossFadedConstantBinder",Cu),le("SourceExpressionBinder",Tu),le("CrossFadedCompositeBinder",Mu),le("CompositeExpressionBinder",Iu),le("ProgramConfiguration",Ou,{omit:["_buffers"]}),le("ProgramConfigurationSet",Lu);var Ru=Math.pow(2,14)-1,Du=-Ru-1,Nu=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new As,this.indexArray=new Is,this.segments=new Qs,this.programConfigurations=new Lu(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Nu.prototype.populate=function(t,e,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.feature,c=u.id,f=u.index,p=u.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d=Ce(l,h);if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),d,n)){var g=o?o.evaluate(d,{},n):void 0,y={id:c,properties:l.properties,type:l.type,sourceLayerIndex:p,index:f,geometry:h?d.geometry:ke(l),patterns:{},sortKey:g};i.push(y)}}o&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var A=0,v=i;A<v.length;A+=1){var m=v[A],_=m.geometry,b=m.index,x=m.sourceLayerIndex,w=t[b].feature;this.addFeature(m,_,b,n),e.featureIndex.insert(w,_,b,x,this.index)}},Nu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Nu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Nu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ys),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Nu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Nu.prototype.addFeature=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var u=s[a],l=u.x,c=u.y;if(!(l<0||l>=8192||c<0||c>=8192)){var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),p=f.vertexLength;Te(this.layoutVertexArray,l,c,-1,-1),Te(this.layoutVertexArray,l,c,1,-1),Te(this.layoutVertexArray,l,c,1,1),Te(this.layoutVertexArray,l,c,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),f.vertexLength+=4,f.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)},le("CircleBucket",Nu,{omit:["layers"]});var Fu=new cs({"circle-sort-key":new as(ro.layout_circle["circle-sort-key"])}),ju={paint:new cs({"circle-radius":new as(ro.paint_circle["circle-radius"]),"circle-color":new as(ro.paint_circle["circle-color"]),"circle-blur":new as(ro.paint_circle["circle-blur"]),"circle-opacity":new as(ro.paint_circle["circle-opacity"]),"circle-translate":new os(ro.paint_circle["circle-translate"]),"circle-translate-anchor":new os(ro.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new os(ro.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new os(ro.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new as(ro.paint_circle["circle-stroke-width"]),"circle-stroke-color":new as(ro.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new as(ro.paint_circle["circle-stroke-opacity"])}),layout:Fu},zu="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)});var Bu,Uu,Vu=We;Bu=new zu(3),zu!=Float32Array&&(Bu[0]=0,Bu[1]=0,Bu[2]=0),Uu=new zu(4),zu!=Float32Array&&(Uu[0]=0,Uu[1]=0,Uu[2]=0,Uu[3]=0);var Gu,qu,Wu=(function(){var t=new zu(2);zu!=Float32Array&&(t[0]=0,t[1]=0)}(),qu=function(t){Gu.call(this,t,ju)},(Gu=hs)&&(qu.__proto__=Gu),(qu.prototype=Object.create(Gu&&Gu.prototype)).constructor=qu,qu.prototype.createBucket=function(t){return new Nu(t)},qu.prototype.queryRadius=function(t){var e=t;return Ue("circle-radius",this,e)+Ue("circle-stroke-width",this,e)+Ve(this.paint.get("circle-translate"))},qu.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=Ge(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),f=c?u:function(t,e){return t.map((function(t){return Xe(t,e)}))}(u,s),p=c?l*a:l,h=0,d=r;h<d.length;h+=1)for(var g=0,y=d[h];g<y.length;g+=1){var A=y[g],v=c?A:Xe(A,s),m=p,_=He([],[A.x,A.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?m*=_[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(m*=o.cameraToCenterDistance/_[3]),Me(f,v,m))return!0}return!1},qu),Hu=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Nu);le("HeatmapBucket",Hu,{omit:["layers"]});var Xu=function(t,e){Ze(this,t,1,e)};Xu.prototype.resize=function(t){Ye(this,t,1)},Xu.prototype.clone=function(){return new Xu({width:this.width,height:this.height},new Uint8Array(this.data))},Xu.copy=function(t,e,n,r,i){Qe(t,e,n,r,i,1)};var Zu=function(t,e){Ze(this,t,4,e)};Zu.prototype.resize=function(t){Ye(this,t,4)},Zu.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},Zu.prototype.clone=function(){return new Zu({width:this.width,height:this.height},new Uint8Array(this.data))},Zu.copy=function(t,e,n,r,i){Qe(t,e,n,r,i,4)},le("AlphaImage",Xu),le("RGBAImage",Zu);var Yu,Qu,Ku={paint:new cs({"heatmap-radius":new as(ro.paint_heatmap["heatmap-radius"]),"heatmap-weight":new as(ro.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new os(ro.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ls(ro.paint_heatmap["heatmap-color"]),"heatmap-opacity":new os(ro.paint_heatmap["heatmap-opacity"])})},Ju=(Qu=function(t){Yu.call(this,t,Ku),this._updateColorRamp()},(Yu=hs)&&(Qu.__proto__=Yu),(Qu.prototype=Object.create(Yu&&Yu.prototype)).constructor=Qu,Qu.prototype.createBucket=function(t){return new Hu(t)},Qu.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},Qu.prototype._updateColorRamp=function(){this.colorRamp=Ke({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},Qu.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},Qu.prototype.queryRadius=function(){return 0},Qu.prototype.queryIntersectsFeature=function(){return!1},Qu.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},Qu),$u={paint:new cs({"hillshade-illumination-direction":new os(ro.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new os(ro.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new os(ro.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new os(ro.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new os(ro.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new os(ro.paint_hillshade["hillshade-accent-color"])})},tl=function(t){var e=function(e){t.call(this,e,$u)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(hs),el=me([{name:"a_pos",components:2,type:"Int16"}],4).members,nl=Je,rl=Je;function il(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=ln(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?nn(t,r,i,o):en(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),bn(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?il(t=rn(tn(t),e,n),e,n,r,i,o,2):2===a&&on(t,e,n,r,i,o):il(tn(t),e,n,r,i,o,1);break}}}Je.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(wn(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(wn(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*n,c=r[a+1]*n,f=r[a+2]*n;u+=Math.abs((t[l]-t[f])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[f+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},Je.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},nl.default=rl;var ol=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new As,this.indexArray=new Is,this.indexArray2=new Ns,this.programConfigurations=new Lu(t.layers,t.zoom),this.segments=new Qs,this.segments2=new Qs,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};ol.prototype.populate=function(t,e,n){this.hasPattern=Tn("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,f=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,h=Ce(u,p);if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),h,n)){var d=r?r.evaluate(h,{},n,e.availableImages):void 0,g={id:l,properties:u.properties,type:u.type,sourceLayerIndex:f,index:c,geometry:p?h.geometry:ke(u),patterns:{},sortKey:d};i.push(g)}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,A=i;y<A.length;y+=1){var v=A[y],m=v.geometry,_=v.index,b=v.sourceLayerIndex;if(this.hasPattern){var x=In("fill",this.layers,v,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(v,m,_,n,{});e.featureIndex.insert(t[_].feature,m,_,b,this.index)}},ol.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ol.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},ol.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ol.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ol.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,el),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ol.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ol.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=kn(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var f=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),p=f.vertexLength,h=[],d=[],g=0,y=s;g<y.length;g+=1){var A=y[g];if(0!==A.length){A!==s[0]&&d.push(h.length/2);var v=this.segments2.prepareSegment(A.length,this.layoutVertexArray,this.indexArray2),m=v.vertexLength;this.layoutVertexArray.emplaceBack(A[0].x,A[0].y),this.indexArray2.emplaceBack(m+A.length-1,m),h.push(A[0].x),h.push(A[0].y);for(var _=1;_<A.length;_++)this.layoutVertexArray.emplaceBack(A[_].x,A[_].y),this.indexArray2.emplaceBack(m+_-1,m+_),h.push(A[_].x),h.push(A[_].y);v.vertexLength+=A.length,v.primitiveLength+=A.length}}for(var b=nl(h,d),x=0;x<b.length;x+=3)this.indexArray.emplaceBack(p+b[x],p+b[x+1],p+b[x+2]);f.vertexLength+=u,f.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},le("FillBucket",ol,{omit:["layers","patternFeatures"]});var al,sl,ul=new cs({"fill-sort-key":new as(ro.layout_fill["fill-sort-key"])}),ll={paint:new cs({"fill-antialias":new os(ro.paint_fill["fill-antialias"]),"fill-opacity":new as(ro.paint_fill["fill-opacity"]),"fill-color":new as(ro.paint_fill["fill-color"]),"fill-outline-color":new as(ro.paint_fill["fill-outline-color"]),"fill-translate":new os(ro.paint_fill["fill-translate"]),"fill-translate-anchor":new os(ro.paint_fill["fill-translate-anchor"]),"fill-pattern":new ss(ro.paint_fill["fill-pattern"])}),layout:ul},cl=(sl=function(t){al.call(this,t,ll)},(al=hs)&&(sl.__proto__=al),(sl.prototype=Object.create(al&&al.prototype)).constructor=sl,sl.prototype.recalculate=function(t,e){al.prototype.recalculate.call(this,t,e);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},sl.prototype.createBucket=function(t){return new ol(t)},sl.prototype.queryRadius=function(){return Ve(this.paint.get("fill-translate"))},sl.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return Oe(Ge(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},sl.prototype.isTileClipped=function(){return!0},sl),fl=me([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,pl=Mn;Mn.types=["Unknown","Point","LineString","Polygon"],Mn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new ni(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Mn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},Mn.prototype.toGeoJSON=function(t,e,n){var r,i,o=function(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+u)/a)*Math.PI/180))-90]}},a=this.extent*Math.pow(2,n),s=this.extent*t,u=this.extent*e,l=this.loadGeometry(),c=Mn.types[this.type];switch(this.type){case 1:var f=[];for(r=0;r<l.length;r++)f[r]=l[r][0];o(l=f);break;case 2:for(r=0;r<l.length;r++)o(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Ln(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)o(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var hl=Rn;Rn.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new pl(this._pbf,e,this.extent,this._keys,this._values)};var dl={VectorTile:function(t,e){this.layers=t.readFields(Nn,{},e)},VectorTileFeature:pl,VectorTileLayer:hl},gl=dl.VectorTileFeature.types,yl=Math.pow(2,13),Al=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ms,this.indexArray=new Is,this.programConfigurations=new Lu(t.layers,t.zoom),this.segments=new Qs,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Al.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=Tn("fill-extrusion",this.layers,e);for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.id,u=o.index,l=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,f=Ce(a,c);if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),f,n)){var p={id:s,sourceLayerIndex:l,index:u,geometry:c?f.geometry:ke(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(In("fill-extrusion",this.layers,p,this.zoom,e)):this.addFeature(p,p.geometry,u,n,{}),e.featureIndex.insert(a,p.geometry,u,l,this.index,!0)}}},Al.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.features;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Al.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Al.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Al.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Al.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fl),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Al.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Al.prototype.addFeature=function(t,e,n,r,i){for(var o,a=this,s=function(e,n){for(var r=a,i=function(t,e,n){var i=n[e];if(0!==i.length&&!((o=i).every((function(t){return t.x<0}))||o.every((function(t){return t.x>8192}))||o.every((function(t){return t.y<0}))||o.every((function(t){return t.y>8192}))))for(var a=0,s=0;s<i.length;s++){var u=i[s];if(s>=1){var l=i[s-1];if(!jn(u,l)){t.vertexLength+4>Qs.MAX_VERTEX_ARRAY_LENGTH&&(t=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray));var c=u.sub(l)._perp()._unit(),p=l.dist(u);a+p>32768&&(a=0),Fn(r.layoutVertexArray,u.x,u.y,c.x,c.y,0,0,a),Fn(r.layoutVertexArray,u.x,u.y,c.x,c.y,0,1,a),Fn(r.layoutVertexArray,l.x,l.y,c.x,c.y,0,0,a+=p),Fn(r.layoutVertexArray,l.x,l.y,c.x,c.y,0,1,a);var h=t.vertexLength;r.indexArray.emplaceBack(h,h+2,h+1),r.indexArray.emplaceBack(h+1,h+2,h+3),t.vertexLength+=4,t.primitiveLength+=2}}}f=t},s=n[e],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var f=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),p=0,h=s;p<h.length;p+=1)i(f,p,h);if(f.vertexLength+u>Qs.MAX_VERTEX_ARRAY_LENGTH&&(f=a.segments.prepareSegment(u,a.layoutVertexArray,a.indexArray)),"Polygon"===gl[t.type]){for(var d=[],g=[],y=f.vertexLength,A=0,v=s;A<v.length;A+=1){var m=v[A];if(0!==m.length){m!==s[0]&&g.push(d.length/2);for(var _=0;_<m.length;_++){var b=m[_];Fn(a.layoutVertexArray,b.x,b.y,0,0,1,1,0),d.push(b.x),d.push(b.y)}}}for(var x=nl(d,g),w=0;w<x.length;w+=3)a.indexArray.emplaceBack(y+x[w],y+x[w+2],y+x[w+1]);f.primitiveLength+=x.length/3,f.vertexLength+=u}},u=0,l=kn(e,500);u<l.length;u+=1)s(u,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},le("FillExtrusionBucket",Al,{omit:["layers","features"]});var vl,ml,_l={paint:new cs({"fill-extrusion-opacity":new os(ro["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new as(ro["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new os(ro["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new os(ro["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ss(ro["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new as(ro["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new as(ro["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new os(ro["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},bl=(ml=function(t){vl.call(this,t,_l)},(vl=hs)&&(ml.__proto__=vl),(ml.prototype=Object.create(vl&&vl.prototype)).constructor=ml,ml.prototype.createBucket=function(t){return new Al(t)},ml.prototype.queryRadius=function(){return Ve(this.paint.get("fill-extrusion-translate"))},ml.prototype.is3D=function(){return!0},ml.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){var u=Ge(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),l=this.paint.get("fill-extrusion-height").evaluate(e,n),c=this.paint.get("fill-extrusion-base").evaluate(e,n),f=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=[s.x,s.y,0,1];He(u,u,e),i.push(new ni(u[0]/u[3],u[1]/u[3]))}return i}(u,s),p=function(t,e,n,r){for(var i=[],o=[],a=r[8]*e,s=r[9]*e,u=r[10]*e,l=r[11]*e,c=r[8]*n,f=r[9]*n,p=r[10]*n,h=r[11]*n,d=0,g=t;d<g.length;d+=1){for(var y=[],A=[],v=0,m=g[d];v<m.length;v+=1){var _=m[v],b=_.x,x=_.y,w=r[0]*b+r[4]*x+r[12],E=r[1]*b+r[5]*x+r[13],S=r[2]*b+r[6]*x+r[14],P=r[3]*b+r[7]*x+r[15],k=S+u,C=P+l,T=w+c,I=E+f,M=S+p,O=P+h,L=new ni((w+a)/C,(E+s)/C);L.z=k/C,y.push(L);var R=new ni(T/O,I/O);R.z=M/O,A.push(R)}i.push(y),o.push(A)}return[i,o]}(r,c,l,s);return function(t,e,n){var r=1/0;Oe(n,e)&&(r=Bn(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];Ie(n,l)&&(r=Math.min(r,Bn(n,l)))}return r!==1/0&&r}(p[0],p[1],f)},ml),xl=me([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,wl=me([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,El=dl.VectorTileFeature.types,Sl=Math.cos(Math.PI/180*37.5),Pl=Math.pow(2,14)/.5,kl=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new _s,this.layoutVertexArray2=new bs,this.indexArray=new Is,this.programConfigurations=new Lu(t.layers,t.zoom),this.segments=new Qs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};kl.prototype.populate=function(t,e,n){this.hasPattern=Tn("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,f=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,h=Ce(u,p);if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),h,n)){var d=r?r.evaluate(h,{},n):void 0,g={id:l,properties:u.properties,type:u.type,sourceLayerIndex:f,index:c,geometry:p?h.geometry:ke(u),patterns:{},sortKey:d};i.push(g)}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,A=i;y<A.length;y+=1){var v=A[y],m=v.geometry,_=v.index,b=v.sourceLayerIndex;if(this.hasPattern){var x=In("line",this.layers,v,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(v,m,_,n,{});e.featureIndex.insert(t[_].feature,m,_,b,this.index)}},kl.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},kl.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},kl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},kl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},kl.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,wl)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xl),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},kl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},kl.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},kl.prototype.addFeature=function(t,e,n,r,i){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),l=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var c=0,f=e;c<f.length;c+=1)this.addLine(f[c],t,a,s,u,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},kl.prototype.addLine=function(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===El[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var c,f=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),h=void 0,d=void 0,g=void 0,y=void 0;this.e1=this.e2=-1,s&&(y=t[l].sub(c=t[u-2])._unit()._perp());for(var A=l;A<u;A++)if(!(d=A===u-1?s?t[l+1]:void 0:t[A+1])||!t[A].equals(d)){y&&(g=y),c&&(h=c),c=t[A],y=d?d.sub(c)._unit()._perp():g;var v=(g=g||y).add(y);0===v.x&&0===v.y||v._unit();var m=g.x*y.x+g.y*y.y,_=v.x*y.x+v.y*y.y,b=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),w=_<Sl&&h&&d,E=g.x*y.y-g.y*y.x>0;if(w&&A>l){var S=c.dist(h);if(S>2*f){var P=c.sub(c.sub(h)._mult(f/S)._round());this.updateDistance(h,P),this.addCurrentVertex(P,g,0,0,p),h=P}}var k=h&&d,C=k?n:s?"butt":r;if(k&&"round"===C&&(b<o?C="miter":b<=2&&(C="fakeround")),"miter"===C&&b>i&&(C="bevel"),"bevel"===C&&(b>2&&(C="flipbevel"),b<i&&(C="miter")),h&&this.updateDistance(h,c),"miter"===C)v._mult(b),this.addCurrentVertex(c,v,0,0,p);else if("flipbevel"===C){if(b>100)v=y.mult(-1);else{var T=b*g.add(y).mag()/g.sub(y).mag();v._perp()._mult(T*(E?-1:1))}this.addCurrentVertex(c,v,0,0,p),this.addCurrentVertex(c,v.mult(-1),0,0,p)}else if("bevel"===C||"fakeround"===C){var I=-Math.sqrt(b*b-1),M=E?I:0,O=E?0:I;if(h&&this.addCurrentVertex(c,g,M,O,p),"fakeround"===C)for(var L=Math.round(180*x/Math.PI/20),R=1;R<L;R++){var D=R/L;if(.5!==D){var N=D-.5;D+=D*N*(D-1)*((1.0904+m*(m*(3.55645-1.43519*m)-3.2452))*N*N+(.848013+m*(.215638*m-1.06021)))}var F=y.sub(g)._mult(D)._add(g)._unit()._mult(E?-1:1);this.addHalfVertex(c,F.x,F.y,!1,E,0,p)}d&&this.addCurrentVertex(c,y,-M,-O,p)}else if("butt"===C)this.addCurrentVertex(c,v,0,0,p);else if("square"===C){var j=h?1:-1;this.addCurrentVertex(c,v,j,j,p)}else"round"===C&&(h&&(this.addCurrentVertex(c,g,0,0,p),this.addCurrentVertex(c,g,1,1,p,!0)),d&&(this.addCurrentVertex(c,y,-1,-1,p,!0),this.addCurrentVertex(c,y,0,0,p)));if(w&&A<u-1){var z=c.dist(d);if(z>2*f){var B=c.add(d.sub(c)._mult(f/z)._round());this.updateDistance(c,B),this.addCurrentVertex(B,y,0,0,p),c=B}}}}},kl.prototype.addCurrentVertex=function(t,e,n,r,i,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i),this.distance>Pl/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))},kl.prototype.addHalfVertex=function(t,e,n,r,i,o,a){var s=.5*(this.lineClips?this.scaledDistance*(Pl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),i?this.e2=u:this.e1=u},kl.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},kl.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},le("LineBucket",kl,{omit:["layers","patternFeatures"]});var Cl=new cs({"line-cap":new os(ro.layout_line["line-cap"]),"line-join":new as(ro.layout_line["line-join"]),"line-miter-limit":new os(ro.layout_line["line-miter-limit"]),"line-round-limit":new os(ro.layout_line["line-round-limit"]),"line-sort-key":new as(ro.layout_line["line-sort-key"])}),Tl={paint:new cs({"line-opacity":new as(ro.paint_line["line-opacity"]),"line-color":new as(ro.paint_line["line-color"]),"line-translate":new os(ro.paint_line["line-translate"]),"line-translate-anchor":new os(ro.paint_line["line-translate-anchor"]),"line-width":new as(ro.paint_line["line-width"]),"line-gap-width":new as(ro.paint_line["line-gap-width"]),"line-offset":new as(ro.paint_line["line-offset"]),"line-blur":new as(ro.paint_line["line-blur"]),"line-dasharray":new us(ro.paint_line["line-dasharray"]),"line-pattern":new ss(ro.paint_line["line-pattern"]),"line-gradient":new ls(ro.paint_line["line-gradient"])}),layout:Cl},Il=new(function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new Qa(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=s({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(as))(Tl.paint.properties["line-width"].specification);Il.useIntegerZoom=!0;var Ml,Ol,Ll=(Ol=function(t){Ml.call(this,t,Tl),this.gradientVersion=0},(Ml=hs)&&(Ol.__proto__=Ml),(Ol.prototype=Object.create(Ml&&Ml.prototype)).constructor=Ol,Ol.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Zo,this.gradientVersion=(this.gradientVersion+1)%ii)},Ol.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},Ol.prototype.recalculate=function(t,e){Ml.prototype.recalculate.call(this,t,e),this.paint._values["line-floorwidth"]=Il.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},Ol.prototype.createBucket=function(t){return new kl(t)},Ol.prototype.queryRadius=function(t){var e=t,n=Un(Ue("line-width",this,e),Ue("line-gap-width",this,e)),r=Ue("line-offset",this,e);return n/2+Math.abs(r)+Ve(this.paint.get("line-translate"))},Ol.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){var s=Ge(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),u=a/2*Un(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){for(var n=[],r=new ni(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var u=o[s],l=o[s+1],c=0===s?r:u.sub(o[s-1])._unit()._perp(),f=s===o.length-1?r:l.sub(u)._unit()._perp(),p=c._add(f)._unit();p._mult(1/(p.x*f.x+p.y*f.y)),a.push(p._mult(e)._add(u))}n.push(a)}return n}(r,l*a)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(ze(t,i[o]))return!0;if(Le(t,i,n))return!0}return!1}(s,r,u)},Ol.prototype.isTileClipped=function(){return!0},Ol),Rl=me([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Dl=me([{name:"a_projected_pos",components:3,type:"Float32"}],4),Nl=(me([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),me([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Fl=(me([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),me([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),jl=me([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);me([{name:"triangle",components:3,type:"Uint16"}]),me([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),me([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),me([{type:"Float32",name:"offsetX"}]),me([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var zl={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Bl=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,p=n?-1:1,h=t[e+f];for(f+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+t[e+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},Ul=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+h]=255&a,h+=d,a/=256,l-=8);t[n+h-d]|=128*g},Vl=Gn;Gn.Varint=0,Gn.Fixed64=1,Gn.Bytes=2,Gn.Fixed32=5;var Gl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");Gn.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=nr(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=ir(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=nr(this.buf,this.pos)+4294967296*nr(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=nr(this.buf,this.pos)+4294967296*ir(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Bl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Bl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Wn(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Wn(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Wn(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Wn(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Wn(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Wn(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Gl?function(t,e,n){return Gl.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Gn.Bytes)return t.push(this.readVarint(e));var n=qn(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Gn.Bytes)return t.push(this.readSVarint());var e=qn(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Gn.Bytes)return t.push(this.readBoolean());var e=qn(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Gn.Bytes)return t.push(this.readFloat());var e=qn(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Gn.Bytes)return t.push(this.readDouble());var e=qn(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Gn.Bytes)return t.push(this.readFixed32());var e=qn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Gn.Bytes)return t.push(this.readSFixed32());var e=qn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Gn.Bytes)return t.push(this.readFixed64());var e=qn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Gn.Bytes)return t.push(this.readSFixed64());var e=qn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Gn.Varint)for(;this.buf[this.pos++]>127;);else if(e===Gn.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Gn.Fixed32)this.pos+=4;else{if(e!==Gn.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),rr(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),rr(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),rr(this.buf,-1&t,this.pos),rr(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),rr(this.buf,-1&t,this.pos),rr(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Hn(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Ul(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Ul(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&Hn(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Gn.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Xn,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Zn,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Kn,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Yn,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Qn,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Jn,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,$n,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,tr,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,er,e)},writeBytesField:function(t,e){this.writeTag(t,Gn.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Gn.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Gn.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Gn.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Gn.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Gn.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Gn.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Gn.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Gn.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Gn.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var ql=function(t,e){var n=e.pixelRatio,r=e.version,i=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r},Wl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Wl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Wl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Wl.tlbr.get=function(){return this.tl.concat(this.br)},Wl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ql.prototype,Wl);var Hl=function(t,e){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,n,i),this.addImages(e,r,i);var o=ur(i),a=new Zu({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],l=n[s].paddedRect;Zu.copy(u.data,a,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var c in e){var f=e[c],p=r[c].paddedRect,h=p.x+1,d=p.y+1,g=f.data.width,y=f.data.height;Zu.copy(f.data,a,{x:0,y:0},{x:h,y:d},f.data),Zu.copy(f.data,a,{x:0,y:y-1},{x:h,y:d-1},{width:g,height:1}),Zu.copy(f.data,a,{x:0,y:0},{x:h,y:d+y},{width:g,height:1}),Zu.copy(f.data,a,{x:g-1,y:0},{x:h-1,y:d},{width:1,height:y}),Zu.copy(f.data,a,{x:0,y:0},{x:h+g,y:d},{width:1,height:y})}this.image=a,this.iconPositions=n,this.patternPositions=r};Hl.prototype.addImages=function(t,e,n){for(var r in t){var i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new ql(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},Hl.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},Hl.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;n.update(e.data,void 0,{x:r[0],y:r[1]})}},le("ImagePosition",ql),le("ImageAtlas",Hl);var Xl={horizontal:1,vertical:2,horizontalOnly:3},Zl=function(){this.scale=1,this.fontStack="",this.imageName=null};Zl.forText=function(t,e){var n=new Zl;return n.scale=t||1,n.fontStack=e,n},Zl.forImage=function(t){var e=new Zl;return e.imageName=t,e};var Yl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Yl.fromFeature=function(t,e){for(var n=new Yl,r=0;r<t.sections.length;r++){var i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n},Yl.prototype.length=function(){return this.text.length},Yl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Yl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Yl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Yl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&de(r)&&!zl[t[n+1]]||i&&de(i)&&!zl[t[n-1]]||!zl[t[n]]?t[n]:zl[t[n]]}return e}(this.text)},Yl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Ql[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Ql[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},Yl.prototype.substring=function(t,e){var n=new Yl;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},Yl.prototype.toString=function(){return this.text},Yl.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)},Yl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Zl.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)},Yl.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Zl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):g("Reached maximum number of images 6401")}else g("Can't add FormattedSection with an empty image.")},Yl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Ql={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kl={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Jl=function(t){var e=function(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(ni);le("Anchor",Jl);var $l=Object.freeze({__proto__:null,getSizeData:vr,evaluateSizeForFeature:mr,evaluateSizeForZoom:_r,SIZE_PACK_FACTOR:128}),tc=function(t,e,n,r,i,o,a,s,u,l){if(this.boxStartIndex=t.length,u){var c=o.top,f=o.bottom,p=o.collisionPadding;p&&(c-=p[1],f+=p[3]);var h=f-c;h>0&&(h=Math.max(10,h),this.circleDiameter=h)}else{var d=o.top*a-s,g=o.bottom*a+s,y=o.left*a-s,A=o.right*a+s,v=o.collisionPadding;if(v&&(y-=v[0]*a,d-=v[1]*a,A+=v[2]*a,g+=v[3]*a),l){var m=new ni(y,d),_=new ni(A,d),b=new ni(y,g),x=new ni(A,g),w=l*Math.PI/180;m._rotate(w),_._rotate(w),b._rotate(w),x._rotate(w),y=Math.min(m.x,_.x,b.x,x.x),A=Math.max(m.x,_.x,b.x,x.x),d=Math.min(m.y,_.y,b.y,x.y),g=Math.max(m.y,_.y,b.y,x.y)}t.emplaceBack(e.x,e.y,y,d,A,g,n,r,i)}this.boxEndIndex=t.length},ec=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Lr),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};ec.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},ec.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},ec.prototype.peek=function(){return this.data[0]},ec.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},ec.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i};var nc=Number.POSITIVE_INFINITY,rc=dl.VectorTileFeature.types,ic=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],oc=function(t){this.layoutVertexArray=new ws,this.indexArray=new Is,this.programConfigurations=t,this.segments=new Qs,this.dynamicLayoutVertexArray=new Es,this.opacityVertexArray=new Ss,this.placedSymbolArray=new Vs};oc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},oc.prototype.upload=function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Rl.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Dl.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ic,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))},oc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},le("SymbolBuffers",oc);var ac=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Qs,this.collisionVertexArray=new Ts};ac.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Nl.members,!0)},ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},le("CollisionBuffers",ac);var sc=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qe([]),this.placementViewportMatrix=qe([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vr(this.zoom,e["text-size"]),this.iconSizeData=vr(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(t){return Xl[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};sc.prototype.createArrays=function(){this.text=new oc(new Lu(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new oc(new Lu(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new Ws,this.lineVertexArray=new Hs,this.symbolInstances=new qs},sc.prototype.calculateGlyphDependencies=function(t,e,n,r,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){var a=zl[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},sc.prototype.populate=function(t,e,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof Po&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=i.get("symbol-sort-key");if(this.features=[],u||l){for(var f=e.iconDependencies,p=e.glyphDependencies,h=e.availableImages,d=new Qa(this.zoom),g=0,y=t;g<y.length;g+=1){var A=y[g],v=A.feature,m=A.id,_=A.index,b=A.sourceLayerIndex,x=r._featureFilter.needGeometry,w=Ce(v,x);if(r._featureFilter.filter(d,w,n)){x||(w.geometry=ke(v));var E=void 0;if(u){var S=r.getValueAndResolveTokens("text-field",w,n,h),P=Po.factory(S);qr(P)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Xa()||this.hasRTLText&&Ya.isParsed())&&(E=Vn(P,r,w))}var k=void 0;if(l){var C=r.getValueAndResolveTokens("icon-image",w,n,h);k=C instanceof ko?C:ko.fromString(C)}if(E||k){var T=this.sortFeaturesByKey?c.evaluate(w,{},n):void 0;if(this.features.push({id:m,text:E,icon:k,index:_,sourceLayerIndex:b,geometry:w.geometry,properties:v.properties,type:rc[v.type],sortKey:T}),k&&(f[k.name]=!0),E){var I=o.evaluate(w,{},n).join(","),M="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Xl.vertical)>=0;for(var O=0,L=E.sections;O<L.length;O+=1){var R=L[O];if(R.image)f[R.image.name]=!0;else{var D=pe(E.toString()),N=R.fontStack||I,F=p[N]=p[N]||{};this.calculateGlyphDependencies(R.text,F,M,this.allowVerticalPlacement,D)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){for(var e=function(e){s.push(t[e]),u++},n=function(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r},r=function(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r},i=function(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y},o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],f=c.geometry,p=c.text?c.text.toString():null;if(p){var h=i(p,f),d=i(p,f,!0);if(h in a&&d in o&&a[h]!==o[d]){var g=r(h,d,f),y=n(h,d,s[g].geometry);delete o[h],delete a[d],a[i(p,s[y].geometry,!0)]=y,s[g].geometry=null}else h in a?n(h,d,f):d in o?r(h,d,f):(e(l),o[h]=u-1,a[d]=u-1)}else e(l)}return s.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},sc.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},sc.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},sc.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},sc.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},sc.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},sc.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},sc.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},sc.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,l,c,f){for(var p=t.indexArray,h=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,h,p,this.canOverlap?o.sortKey:void 0),g=this.glyphOffsetArray.length,y=d.vertexLength,A=this.allowVerticalPlacement&&a===Xl.vertical?Math.PI/2:0,v=o.text&&o.text.sections,m=0;m<e.length;m++){var _=e[m],b=_.tl,x=_.tr,w=_.bl,E=_.br,S=_.tex,P=_.pixelOffsetTL,k=_.pixelOffsetBR,C=_.minFontScaleX,T=_.minFontScaleY,I=_.glyphOffset,M=_.isSDF,O=_.sectionIndex,L=d.vertexLength,R=I[1];Vr(h,s.x,s.y,b.x,R+b.y,S.x,S.y,n,M,P.x,P.y,C,T),Vr(h,s.x,s.y,x.x,R+x.y,S.x+S.w,S.y,n,M,k.x,P.y,C,T),Vr(h,s.x,s.y,w.x,R+w.y,S.x,S.y+S.h,n,M,P.x,k.y,C,T),Vr(h,s.x,s.y,E.x,R+E.y,S.x+S.w,S.y+S.h,n,M,k.x,k.y,C,T),Gr(t.dynamicLayoutVertexArray,s,A),p.emplaceBack(L,L+1,L+2),p.emplaceBack(L+1,L+2,L+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(I[0]),m!==e.length-1&&O===e[m+1].sectionIndex||t.programConfigurations.populatePaintArrays(h.length,o,o.index,{},f,v&&v[O])}t.placedSymbolArray.emplaceBack(s.x,s.y,g,this.glyphOffsetArray.length-g,y,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,c)},sc.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},sc.prototype.addCollisionDebugVertices=function(t,e,n,r,i,o,a){var s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=s.vertexLength,l=i.layoutVertexArray,c=i.collisionVertexArray,f=a.anchorX,p=a.anchorY;this._addCollisionDebugVertex(l,c,o,f,p,new ni(t,e)),this._addCollisionDebugVertex(l,c,o,f,p,new ni(n,e)),this._addCollisionDebugVertex(l,c,o,f,p,new ni(n,r)),this._addCollisionDebugVertex(l,c,o,f,p,new ni(t,r)),s.vertexLength+=4;var h=i.indexArray;h.emplaceBack(u,u+1),h.emplaceBack(u+1,u+2),h.emplaceBack(u+2,u+3),h.emplaceBack(u+3,u),s.primitiveLength+=4},sc.prototype.addDebugCollisionBoxes=function(t,e,n,r){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},sc.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ac(ks,Fl.members,Ns),this.iconCollisionBox=new ac(ks,Fl.members,Ns);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},sc.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i,o,a,s,u){for(var l={},c=e;c<n;c++){var f=t.get(c);l.textBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},l.textFeatureIndex=f.featureIndex;break}for(var p=r;p<i;p++){var h=t.get(p);l.verticalTextBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},l.verticalTextFeatureIndex=h.featureIndex;break}for(var d=o;d<a;d++){var g=t.get(d);l.iconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},l.iconFeatureIndex=g.featureIndex;break}for(var y=s;y<u;y++){var A=t.get(y);l.verticalIconBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,anchorPointX:A.anchorPointX,anchorPointY:A.anchorPointY},l.verticalIconFeatureIndex=A.featureIndex;break}return l},sc.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},sc.prototype.hasTextData=function(){return this.text.segments.get().length>0},sc.prototype.hasIconData=function(){return this.icon.segments.get().length>0},sc.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},sc.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},sc.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},sc.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},sc.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort((function(t,e){return r[t]-r[e]||i[e]-i[t]})),o},sc.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},sc.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var i=this.symbolInstances.get(r[n]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(t,n,r){t>=0&&r.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},le("SymbolBucket",sc,{omit:["layers","collisionBoxArray","features","compareText"]}),sc.MAX_GLYPHS=65535,sc.addDynamicAttributes=Gr;var uc=new cs({"symbol-placement":new os(ro.layout_symbol["symbol-placement"]),"symbol-spacing":new os(ro.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new os(ro.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new as(ro.layout_symbol["symbol-sort-key"]),"symbol-z-order":new os(ro.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new os(ro.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new os(ro.layout_symbol["icon-ignore-placement"]),"icon-optional":new os(ro.layout_symbol["icon-optional"]),"icon-rotation-alignment":new os(ro.layout_symbol["icon-rotation-alignment"]),"icon-size":new as(ro.layout_symbol["icon-size"]),"icon-text-fit":new os(ro.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new os(ro.layout_symbol["icon-text-fit-padding"]),"icon-image":new as(ro.layout_symbol["icon-image"]),"icon-rotate":new as(ro.layout_symbol["icon-rotate"]),"icon-padding":new os(ro.layout_symbol["icon-padding"]),"icon-keep-upright":new os(ro.layout_symbol["icon-keep-upright"]),"icon-offset":new as(ro.layout_symbol["icon-offset"]),"icon-anchor":new as(ro.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new os(ro.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new os(ro.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new os(ro.layout_symbol["text-rotation-alignment"]),"text-field":new as(ro.layout_symbol["text-field"]),"text-font":new as(ro.layout_symbol["text-font"]),"text-size":new as(ro.layout_symbol["text-size"]),"text-max-width":new as(ro.layout_symbol["text-max-width"]),"text-line-height":new os(ro.layout_symbol["text-line-height"]),"text-letter-spacing":new as(ro.layout_symbol["text-letter-spacing"]),"text-justify":new as(ro.layout_symbol["text-justify"]),"text-radial-offset":new as(ro.layout_symbol["text-radial-offset"]),"text-variable-anchor":new os(ro.layout_symbol["text-variable-anchor"]),"text-anchor":new as(ro.layout_symbol["text-anchor"]),"text-max-angle":new os(ro.layout_symbol["text-max-angle"]),"text-writing-mode":new os(ro.layout_symbol["text-writing-mode"]),"text-rotate":new as(ro.layout_symbol["text-rotate"]),"text-padding":new os(ro.layout_symbol["text-padding"]),"text-keep-upright":new os(ro.layout_symbol["text-keep-upright"]),"text-transform":new as(ro.layout_symbol["text-transform"]),"text-offset":new as(ro.layout_symbol["text-offset"]),"text-allow-overlap":new os(ro.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new os(ro.layout_symbol["text-ignore-placement"]),"text-optional":new os(ro.layout_symbol["text-optional"])}),lc={paint:new cs({"icon-opacity":new as(ro.paint_symbol["icon-opacity"]),"icon-color":new as(ro.paint_symbol["icon-color"]),"icon-halo-color":new as(ro.paint_symbol["icon-halo-color"]),"icon-halo-width":new as(ro.paint_symbol["icon-halo-width"]),"icon-halo-blur":new as(ro.paint_symbol["icon-halo-blur"]),"icon-translate":new os(ro.paint_symbol["icon-translate"]),"icon-translate-anchor":new os(ro.paint_symbol["icon-translate-anchor"]),"text-opacity":new as(ro.paint_symbol["text-opacity"]),"text-color":new as(ro.paint_symbol["text-color"],{runtimeType:po,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new as(ro.paint_symbol["text-halo-color"]),"text-halo-width":new as(ro.paint_symbol["text-halo-width"]),"text-halo-blur":new as(ro.paint_symbol["text-halo-blur"]),"text-translate":new os(ro.paint_symbol["text-translate"]),"text-translate-anchor":new os(ro.paint_symbol["text-translate-anchor"])}),layout:uc},cc=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:uo,this.defaultValue=t};cc.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},cc.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},cc.prototype.outputDefined=function(){return!1},cc.prototype.serialize=function(){return null},le("FormatSectionOverride",cc,{omit:["defaultValue"]});var fc,pc,hc,dc,gc=(dc=function(t){hc.call(this,t,lc)},(hc=hs)&&(dc.__proto__=hc),(dc.prototype=Object.create(hc&&hc.prototype)).constructor=dc,dc.prototype.recalculate=function(t,e){if(hc.prototype.recalculate.call(this,t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var n=this.layout.get("text-writing-mode");if(n){for(var r=[],i=0,o=n;i<o.length;i+=1){var a=o[i];r.indexOf(a)<0&&r.push(a)}this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},dc.prototype.getValueAndResolveTokens=function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Lt(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,i)},dc.prototype.createBucket=function(t){return new sc(t)},dc.prototype.queryRadius=function(){return 0},dc.prototype.queryIntersectsFeature=function(){return!1},dc.prototype._setPaintOverrides=function(){for(var t=0,e=lc.paint.overridableProperties;t<e.length;t+=1){var n=e[t];if(dc.hasPaintOverride(this.layout,n)){var r,i=this.paint.get(n),o=new cc(i),a=new _a(o,i.property.specification);r="constant"===i.value.kind||"source"===i.value.kind?new ba("source",a):new xa("composite",a,i.value.zoomStops,i.value._interpolationType),this.paint._values[n]=new rs(i.property,r,i.parameters)}}},dc.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&dc.hasPaintOverride(this.layout,t)},dc.hasPaintOverride=function(t,e){var n=t.get("text-field"),r=lc.paint.properties[e],i=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r.overrides&&r.overrides.hasOverride(n[e]))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Po)o(n.value.value.sections);else if("source"===n.value.kind){var a=function(t){i||(t instanceof Io&&To(t.value)===Ao?o(t.value.sections):t instanceof Ro?o(t.sections):t.eachChild(a))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i},dc),yc={paint:new cs({"background-color":new os(ro.paint_background["background-color"]),"background-pattern":new us(ro.paint_background["background-pattern"]),"background-opacity":new os(ro.paint_background["background-opacity"])})},Ac=function(t){var e=function(e){t.call(this,e,yc)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(hs),vc={paint:new cs({"raster-opacity":new os(ro.paint_raster["raster-opacity"]),"raster-hue-rotate":new os(ro.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new os(ro.paint_raster["raster-brightness-min"]),"raster-brightness-max":new os(ro.paint_raster["raster-brightness-max"]),"raster-saturation":new os(ro.paint_raster["raster-saturation"]),"raster-contrast":new os(ro.paint_raster["raster-contrast"]),"raster-resampling":new os(ro.paint_raster["raster-resampling"]),"raster-fade-duration":new os(ro.paint_raster["raster-fade-duration"])})},mc=function(t){var e=function(e){t.call(this,e,vc)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(hs),_c=(pc=function(t){fc.call(this,t,{}),this.implementation=t},(fc=hs)&&(pc.__proto__=fc),(pc.prototype=Object.create(fc&&fc.prototype)).constructor=pc,pc.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},pc.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},pc.prototype.recalculate=function(){},pc.prototype.updateTransitions=function(){},pc.prototype.hasTransition=function(){},pc.prototype.serialize=function(){},pc.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},pc.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},pc),bc={circle:Wu,heatmap:Ju,hillshade:tl,fill:cl,"fill-extrusion":bl,line:Ll,symbol:gc,background:Ac,raster:mc},xc=ri.HTMLImageElement,wc=ri.HTMLCanvasElement,Ec=ri.HTMLVideoElement,Sc=ri.ImageData,Pc=ri.ImageBitmap,kc=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};kc.prototype.update=function(t,e,n){var r=t.width,i=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,i],t instanceof xc||t instanceof wc||t instanceof Ec||t instanceof Sc||Pc&&t instanceof Pc?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=n||{x:0,y:0},l=u.x,c=u.y;t instanceof xc||t instanceof wc||t instanceof Ec||t instanceof Sc||Pc&&t instanceof Pc?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},kc.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},kc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},kc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Cc=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Cc.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Cc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Tc=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Cc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=v()?t:ri};Tc.prototype.send=function(t,e,n,r,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=_(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:ja(e,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Tc.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else v()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},Tc.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Tc.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(za(e.error)):r(null,za(e.data)))}else{var i=!1,o=_(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){i=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?ja(e):null,data:ja(r,o)},o)}:function(t){i=!0},s=null,u=za(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source)[l[1]](u,a)}else a(new Error("Could not find function "+e.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Tc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ic=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Ic.prototype.setNorthEast=function(t){return this._ne=t instanceof Mc?new Mc(t.lng,t.lat):Mc.convert(t),this},Ic.prototype.setSouthWest=function(t){return this._sw=t instanceof Mc?new Mc(t.lng,t.lat):Mc.convert(t),this},Ic.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof Mc)e=t,n=t;else{if(!(t instanceof Ic))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Ic.convert(t)):this.extend(Mc.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Mc(e.lng,e.lat),this._ne=new Mc(n.lng,n.lat)),this},Ic.prototype.getCenter=function(){return new Mc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ic.prototype.getSouthWest=function(){return this._sw},Ic.prototype.getNorthEast=function(){return this._ne},Ic.prototype.getNorthWest=function(){return new Mc(this.getWest(),this.getNorth())},Ic.prototype.getSouthEast=function(){return new Mc(this.getEast(),this.getSouth())},Ic.prototype.getWest=function(){return this._sw.lng},Ic.prototype.getSouth=function(){return this._sw.lat},Ic.prototype.getEast=function(){return this._ne.lng},Ic.prototype.getNorth=function(){return this._ne.lat},Ic.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ic.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ic.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ic.prototype.contains=function(t){var e=Mc.convert(t),n=e.lng,r=e.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i},Ic.convert=function(t){return!t||t instanceof Ic?t:new Ic(t)};var Mc=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Mc.prototype.wrap=function(){return new Mc(a(this.lng,-180,180),this.lat)},Mc.prototype.toArray=function(){return[this.lng,this.lat]},Mc.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Mc.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(i,1))},Mc.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Ic(new Mc(this.lng-n,this.lat-e),new Mc(this.lng+n,this.lat+e))},Mc.convert=function(t){if(t instanceof Mc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Mc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Mc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Oc=2*Math.PI*6371008.8,Lc=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Lc.fromLngLat=function(t,e){void 0===e&&(e=0);var n=Mc.convert(t);return new Lc(Xr(n.lng),Zr(n.lat),Yr(e,n.lat))},Lc.prototype.toLngLat=function(){return new Mc(360*this.x-180,Qr(this.y))},Lc.prototype.toAltitude=function(){return this.z*Hr(Qr(this.y))},Lc.prototype.meterInMercatorCoordinateUnits=function(){var t;return 1/Oc*(t=Qr(this.y),1/Math.cos(t*Math.PI/180))};var Rc=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Kr(0,t,t,e,n)};Rc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Rc.prototype.url=function(t,e){var n,r,i,o,a,s=(r=this.y,i=this.z,o=Wr(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=Wr(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Rc.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new ni(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Rc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Dc=function(t,e){this.wrap=t,this.canonical=e,this.key=Kr(t,e.z,e.z,e.x,e.y)},Nc=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Rc(n,+r,+i),this.key=Kr(e,t,n,r,i)};Nc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Nc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Nc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Nc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Nc.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?Kr(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Kr(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},Nc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Nc.prototype.children=function(t){if(this.overscaledZ>=t)return[new Nc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Nc(e,this.wrap,e,n,r),new Nc(e,this.wrap,e,n+1,r),new Nc(e,this.wrap,e,n,r+1),new Nc(e,this.wrap,e,n+1,r+1)]},Nc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Nc.prototype.wrapped=function(){return new Nc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Nc.prototype.unwrapTo=function(t){return new Nc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Nc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Nc.prototype.toUnwrapped=function(){return new Dc(this.wrap,this.canonical)},Nc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Nc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Lc(t.x-this.wrap,t.y))},le("CanonicalTileID",Rc),le("OverscaledTileID",Nc,{omit:["posMatrix"]});var Fc=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return g('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Fc.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])},Fc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Fc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Fc.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},Fc.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},Fc.prototype.getPixels=function(){return new Zu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Fc.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-n*this.dim,l=o;l<a;l++)for(var c=r;c<i;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},le("DEMData",Fc);var jc=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};jc.prototype.encode=function(t){return this._stringToNumber[t]},jc.prototype.decode=function(t){return this._numberToString[t]};var zc=function(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i},Bc={geometry:{configurable:!0}};Bc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Bc.geometry.set=function(t){this._geometry=t},zc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(zc.prototype,Bc);var Uc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Uc.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},s(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},Uc.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},Uc.prototype.getState=function(t,e){var n=String(e),r=s({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r},Uc.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Uc.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),s(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var u={};if(null===this.deletedStates[a])for(var l in this.state[a])u[l]={},this.state[a][l]={};else for(var c in this.deletedStates[a]){if(null===this.deletedStates[a][c])this.state[a][c]={};else for(var f=0,p=Object.keys(this.deletedStates[a][c]);f<p.length;f+=1)delete this.state[a][c][p[f]];u[c]=this.state[a][c]}n[a]=n[a]||{},s(n[a],u)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var h in t)t[h].setFeatureState(n,e)};var Vc=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new La(8192,16,0),this.grid3D=new La(8192,16,0),this.featureIndexArray=new Zs,this.promoteId=e};Vc.prototype.insert=function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],f=0;f<l.length;f++){var p=l[f];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},Vc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new dl.VectorTile(new Vl(this.rawTileData)).layers,this.sourceLayerCoder=new jc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Vc.prototype.query=function(t,e,n,r){var i=this;this.loadVTLayers();for(var o=t.params||{},a=8192/t.tileSize/t.scale,s=Vt(o.filter),u=t.queryGeometry,l=t.queryPadding*a,c=$r(u),f=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),p=$r(t.cameraQueryGeometry),h=this.grid3D.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l,(function(e,n,r,i){return function(t,e,n,r,i){for(var o=0,a=t;o<a.length;o+=1){var s=a[o];if(e<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}var u=[new ni(e,n),new ni(e,i),new ni(r,i),new ni(r,n)];if(t.length>2)for(var l=0,c=u;l<c.length;l+=1)if(ze(t,c[l]))return!0;for(var f=0;f<t.length-1;f++)if(Be(t[f],t[f+1],u))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,r+l,i+l)})),d=0,g=h;d<g.length;d+=1)f.push(g[d]);f.sort(ti);for(var y,A={},v=function(l){var c=f[l];if(c!==y){y=c;var p=i.featureIndexArray.get(c),h=null;i.loadMatchingFeature(A,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,s,o.layers,o.availableImages,e,n,r,(function(e,n,r){return h||(h=ke(e)),n.queryIntersectsFeature(u,e,r,h,i.z,t.transform,a,t.pixelPosMatrix)}))}},m=0;m<f.length;m++)v(m);return A},Vc.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,u,l,c,f){var p=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,p)){var h=this.sourceLayerCoder.decode(n),d=this.vtLayers[h].feature(r);if(i.needGeometry){var g=Ce(d,!0);if(!i.filter(new Qa(this.tileID.overscaledZ),g,this.tileID.canonical))return}else if(!i.filter(new Qa(this.tileID.overscaledZ),d))return;for(var y=this.getId(d,h),A=0;A<p.length;A++){var v=p[A];if(!(o&&o.indexOf(v)<0)){var m=u[v];if(m){var _={};void 0!==y&&c&&(_=c.getState(m.sourceLayer||"_geojsonTileLayer",y));var b=s({},l[v]);b.paint=Jr(b.paint,m.paint,d,_,a),b.layout=Jr(b.layout,m.layout,d,_,a);var x=!f||f(d,m,_);if(x){var w=new zc(d,this.z,this.x,this.y,y);w.layer=b;var E=t[v];void 0===E&&(E=t[v]=[]),E.push({featureIndex:r,feature:w,intersectionZ:x})}}}}}},Vc.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o,a,s){var u={};this.loadVTLayers();for(var l=Vt(i),c=0,f=t;c<f.length;c+=1)this.loadMatchingFeature(u,n,r,f[c],l,o,a,s,e);return u},Vc.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},Vc.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},le("FeatureIndex",Vc,{omit:["rawTileData","sourceLayerCoder"]});var Gc=function(t,e){this.tileID=t,this.uid=u(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Gc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<Ai.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Gc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Gc.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=function(){var t=o[i],r=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return r.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=r;a<s.length;a+=1)n[s[a].id]=t}},i=0,o=t;i<o.length;i+=1)r();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof sc){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof sc&&a.hasRTLText){this.hasRTLText=!0,Ya.isLoading()||Ya.isLoaded()||"deferred"!==Xa()||Za();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Bs},Gc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Gc.prototype.getBucket=function(t){return this.buckets[t.id]},Gc.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new kc(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new kc(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Gc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Gc.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,n):{}},Gc.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=Vt(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,f={z:u,x:l,y:c},p=0;p<o.length;p++){var h=o.feature(p);if(a.needGeometry){var d=Ce(h,!0);if(!a.filter(new Qa(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new Qa(this.tileID.overscaledZ),h))continue;var g=n.getId(h,i),y=new zc(h,u,l,c,g);y.tile=f,t.push(y)}}},Gc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Gc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Gc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=m(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Gc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Gc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=e&&e.style&&e.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(i)))}}}},Gc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Gc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ai.now()},Gc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Gc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=Ai.now()+t},Gc.prototype.setDependencies=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1)n[i[r]]=!0;this.dependencies[t]=n},Gc.prototype.hasDependency=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=this.dependencies[r[n]];if(i)for(var o=0,a=e;o<a.length;o+=1)if(i[a[o]])return!0}return!1};var qc=ri.performance,Wc=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},qc.mark(this._marks.start)};Wc.prototype.finish=function(){qc.mark(this._marks.end);var t=qc.getEntriesByName(this._marks.measure);return 0===t.length&&(qc.measure(this._marks.measure,this._marks.start,this._marks.end),t=qc.getEntriesByName(this._marks.measure),qc.clearMarks(this._marks.start),qc.clearMarks(this._marks.end),qc.clearMeasures(this._marks.measure)),t},t.Actor=Tc,t.AlphaImage=Xu,t.CanonicalTileID=Rc,t.CollisionBoxArray=Bs,t.Color=wo,t.DEMData=Fc,t.DataConstantProperty=os,t.DictionaryCoder=jc,t.EXTENT=8192,t.ErrorEvent=eo,t.EvaluationParameters=Qa,t.Event=to,t.Evented=no,t.FeatureIndex=Vc,t.FillBucket=ol,t.FillExtrusionBucket=Al,t.ImageAtlas=Hl,t.ImagePosition=ql,t.LineBucket=kl,t.LngLat=Mc,t.LngLatBounds=Ic,t.MercatorCoordinate=Lc,t.ONE_EM=24,t.OverscaledTileID=Nc,t.Point=ni,t.Point$1=ni,t.Properties=cs,t.Protobuf=Vl,t.RGBAImage=Zu,t.RequestManager=wi,t.RequestPerformance=Wc,t.ResourceType=Vi,t.SegmentVector=Qs,t.SourceFeatureState=Uc,t.StructArrayLayout1ui2=Fs,t.StructArrayLayout2f1f2i16=Cs,t.StructArrayLayout2i4=As,t.StructArrayLayout3ui6=Is,t.StructArrayLayout4i8=vs,t.SymbolBucket=sc,t.Texture=kc,t.Tile=Gc,t.Transitionable=$a,t.Uniform1f=_u,t.Uniform1i=mu,t.Uniform2f=bu,t.Uniform3f=xu,t.Uniform4f=wu,t.UniformColor=Eu,t.UniformMatrix4f=Pu,t.UnwrappedTileID=Dc,t.ValidationError=io,t.WritingMode=Xl,t.ZoomHistory=Ba,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=Gr,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))},t.bezier=i,t.bindAll=f,t.browser=Ai,t.cacheEntryPossiblyAdded=function(t){++Ui>Bi&&(t.getActor().send("enforceCacheSizeLimit",zi),Ui=0)},t.clamp=o,t.clearTileCache=function(t){var e=ri.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=kr,t.clone=function(t){var e=new zu(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=si,t.clone$2=function(t){var e=new zu(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=jl,t.config=vi,t.create=function(){var t=new zu(16);return zu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new zu(9);return zu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new zu(4);return zu!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Rt,t.createLayout=me,t.createStyleLayer=function(t){return"custom"===t.type?new _c(t):new bc[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=oi,t.emitValidationErrors=se,t.endsWith=p,t.enforceCacheSizeLimit=function(t){C(),ki&&ki.then((function(e){e.keys().then((function(n){for(var r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.evaluateSizeForFeature=mr,t.evaluateSizeForZoom=_r,t.evaluateVariableOffset=Fr,t.evented=Ha,t.extend=s,t.featureFilter=Vt,t.filterObject=d,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=gr,t.getAnchorJustification=jr,t.getArrayBuffer=Qi,t.getImage=$i,t.getJSON=function(t,e){return Yi(s(t,{type:"json"}),e)},t.getRTLTextPluginStatus=Xa,t.getReferrer=Zi,t.getVideo=function(t,e){var n,r,i=ri.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=ri.document.createElement("source");n=t[o],r=void 0,(r=ri.document.createElement("a")).href=n,(r.protocol!==ri.document.location.protocol||r.host!==ri.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.identity=qe,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],p=e[10],h=e[11],d=e[12],g=e[13],y=e[14],A=e[15],v=n*s-r*a,m=n*u-i*a,_=n*l-o*a,b=r*u-i*s,x=r*l-o*s,w=i*l-o*u,E=c*g-f*d,S=c*y-p*d,P=c*A-h*d,k=f*y-p*g,C=f*A-h*g,T=p*A-h*y,I=v*T-m*C+_*k+b*P-x*S+w*E;return I?(t[0]=(s*T-u*C+l*k)*(I=1/I),t[1]=(i*C-r*T-o*k)*I,t[2]=(g*w-y*x+A*b)*I,t[3]=(p*x-f*w-h*b)*I,t[4]=(u*P-a*T-l*S)*I,t[5]=(n*T-i*P+o*S)*I,t[6]=(y*_-d*w-A*m)*I,t[7]=(c*w-p*_+h*m)*I,t[8]=(a*C-s*P+l*E)*I,t[9]=(r*P-n*C-o*E)*I,t[10]=(d*x-g*_+A*v)*I,t[11]=(f*_-c*x-h*v)*I,t[12]=(s*S-a*k-u*E)*I,t[13]=(n*k-r*S+i*E)*I,t[14]=(g*m-d*b-y*v)*I,t[15]=(c*b-f*m+p*v)*I,t):null},t.isChar=Ua,t.isMapboxURL=w,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.makeRequest=Yi,t.mapObject=h,t.mercatorXfromLng=Xr,t.mercatorYfromLat=Zr,t.mercatorZfromAltitude=Yr,t.mul=Vu,t.multiply=We,t.mvt=dl,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=rt,t.offscreenCanvasSupported=I,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new Vl(t).readFields(or,[])},t.pbf=Vl,t.performSymbolLayout=function(t,e,n,r,i,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,f=c.maxZoom;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Qa(c.minZoom),a),u["text-size"].possiblyEvaluate(new Qa(f),a)]}if("composite"===t.iconSizeData.kind){var p=t.iconSizeData,h=p.maxZoom;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Qa(p.minZoom),a),u["icon-size"].possiblyEvaluate(new Qa(h),a)]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new Qa(t.zoom+1),a),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new Qa(t.zoom+1),a),l.textMaxSize=u["text-size"].possiblyEvaluate(new Qa(18));for(var d=24*s.get("text-line-height"),y="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),A=s.get("text-keep-upright"),v=s.get("text-size"),m=function(){var o=b[_],u=s.get("text-font").evaluate(o,{},a).join(","),c=v.evaluate(o,{},a),f=l.layoutTextSize.evaluate(o,{},a),p=l.layoutIconSize.evaluate(o,{},a),h={horizontal:{},vertical:void 0},m=o.text,x=[0,0];if(m){var w=m.toString(),E=24*s.get("text-letter-spacing").evaluate(o,{},a),S=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r=n[e].charCodeAt(0),Ua.Arabic(r)||Ua["Arabic Supplement"](r)||Ua["Arabic Extended-A"](r)||Ua["Arabic Presentation Forms-A"](r)||Ua["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(w)?E:0,P=s.get("text-anchor").evaluate(o,{},a),k=s.get("text-variable-anchor");if(!k){var C=s.get("text-radial-offset").evaluate(o,{},a);x=C?Fr(P,[24*C,nc]):s.get("text-offset").evaluate(o,{},a).map((function(t){return 24*t}))}var T=y?"center":s.get("text-justify").evaluate(o,{},a),I=s.get("symbol-placement"),M="point"===I?24*s.get("text-max-width").evaluate(o,{},a):0,O=function(){t.allowVerticalPlacement&&pe(w)&&(h.vertical=lr(m,e,n,i,u,M,d,P,"left",S,x,Xl.vertical,!0,I,f,c))};if(!y&&k){for(var L="auto"===T?k.map((function(t){return jr(t)})):[T],R=!1,D=0;D<L.length;D++){var N=L[D];if(!h.horizontal[N])if(R)h.horizontal[N]=h.horizontal[0];else{var F=lr(m,e,n,i,u,M,d,"center",N,S,x,Xl.horizontal,!1,I,f,c);F&&(h.horizontal[N]=F,R=1===F.positionedLines.length)}}O()}else{"auto"===T&&(T=jr(P));var j=lr(m,e,n,i,u,M,d,P,T,S,x,Xl.horizontal,!1,I,f,c);j&&(h.horizontal[T]=j),O(),pe(w)&&y&&A&&(h.vertical=lr(m,e,n,i,u,M,d,P,T,S,x,Xl.vertical,!1,I,f,c))}}var z=void 0,B=!1;if(o.icon&&o.icon.name){var U=r[o.icon.name];U&&(z=function(t,e,n){var r=gr(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}}(i[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),B=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&g("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var V=Br(h.horizontal)||h.vertical;t.iconsInText=!!V&&V.iconsInText,(V||z)&&function(t,e,n,r,i,o,a,s,u,l,c){var f=o.textMaxSize.evaluate(e,{});void 0===f&&(f=a);var p,h=t.layers[0].layout,d=h.get("icon-offset").evaluate(e,{},c),y=Br(n.horizontal),A=a/24,v=t.tilePixelRatio*A,m=t.tilePixelRatio*f/24,_=t.tilePixelRatio*s,b=t.tilePixelRatio*h.get("symbol-spacing"),x=h.get("text-padding")*t.tilePixelRatio,w=h.get("icon-padding")*t.tilePixelRatio,E=h.get("text-max-angle")/180*Math.PI,S="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),P="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),k=h.get("symbol-placement"),C=b/2,T=h.get("icon-text-fit");r&&"none"!==T&&(t.allowVerticalPlacement&&n.vertical&&(p=Ar(r,n.vertical,T,h.get("icon-text-fit-padding"),d,A)),y&&(r=Ar(r,y,T,h.get("icon-text-fit-padding"),d,A)));var I=function(s,f){f.x<0||f.x>=8192||f.y<0||f.y>=8192||function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,y,A,v,m,_,b,x,w,E,S){var P,k,C,T,I,M=t.addToLineVertexArray(e,n),O=0,L=0,R=0,D=0,N=-1,F=-1,j={},z=tu(""),B=0,U=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(B=(P=s.layout.get("text-offset").evaluate(b,{},E).map((function(t){return 24*t})))[0],U=P[1]):(B=24*s.layout.get("text-radial-offset").evaluate(b,{},E),U=nc),t.allowVerticalPlacement&&r.vertical){var V=s.layout.get("text-rotate").evaluate(b,{},E)+90;T=new tc(u,e,l,c,f,r.vertical,p,h,d,V),a&&(I=new tc(u,e,l,c,f,a,A,v,d,V))}if(i){var G=s.layout.get("icon-rotate").evaluate(b,{}),q="none"!==s.layout.get("icon-text-fit"),W=Cr(i,G,w,q),H=a?Cr(a,G,w,q):void 0;C=new tc(u,e,l,c,f,i,A,v,!1,G),O=4*W.length;var X=t.iconSizeData,Z=null;"source"===X.kind?(Z=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&g(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===X.kind&&((Z=[128*x.compositeIconSizes[0].evaluate(b,{},E),128*x.compositeIconSizes[1].evaluate(b,{},E)])[0]>32640||Z[1]>32640)&&g(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,W,Z,_,m,b,!1,e,M.lineStartIndex,M.lineLength,-1,E),N=t.icon.placedSymbolArray.length-1,H&&(L=4*H.length,t.addSymbols(t.icon,H,Z,_,m,b,Xl.vertical,e,M.lineStartIndex,M.lineLength,-1,E),F=t.icon.placedSymbolArray.length-1)}for(var Y in r.horizontal){var Q=r.horizontal[Y];if(!k){z=tu(Q.text);var K=s.layout.get("text-rotate").evaluate(b,{},E);k=new tc(u,e,l,c,f,Q,p,h,d,K)}var J=1===Q.positionedLines.length;if(R+=zr(t,e,Q,o,s,d,b,y,M,r.vertical?Xl.horizontal:Xl.horizontalOnly,J?Object.keys(r.horizontal):[Y],j,N,x,E),J)break}r.vertical&&(D+=zr(t,e,r.vertical,o,s,d,b,y,M,Xl.vertical,["vertical"],j,F,x,E));var $=k?k.boxStartIndex:t.collisionBoxArray.length,tt=k?k.boxEndIndex:t.collisionBoxArray.length,et=T?T.boxStartIndex:t.collisionBoxArray.length,nt=T?T.boxEndIndex:t.collisionBoxArray.length,rt=C?C.boxStartIndex:t.collisionBoxArray.length,it=C?C.boxEndIndex:t.collisionBoxArray.length,ot=I?I.boxStartIndex:t.collisionBoxArray.length,at=I?I.boxEndIndex:t.collisionBoxArray.length,st=-1,ut=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=ut(k,st),st=ut(T,st),st=ut(C,st);var lt=(st=ut(I,st))>-1?1:0;lt&&(st*=S/24),t.glyphOffsetArray.length>=sc.MAX_GLYPHS&&g("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical||-1,N,F,z,$,tt,et,nt,rt,it,ot,at,l,R,D,O,L,lt,0,p,B,U,st)}(t,f,s,n,r,i,p,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,v,x,S,u,_,w,P,d,e,o,l,c,a)};if("line"===k)for(var M=0,O=kr(e.geometry,0,0,8192,8192);M<O.length;M+=1)for(var L=O[M],R=0,D=Pr(L,b,E,n.vertical||y,r,24,m,t.overscaling,8192);R<D.length;R+=1){var N=D[R];y&&Ur(t,y.text,C,N)||I(L,N)}else if("line-center"===k)for(var F=0,j=e.geometry;F<j.length;F+=1){var z=j[F];if(z.length>1){var B=Sr(z,E,n.vertical||y,r,24,m);B&&I(z,B)}}else if("Polygon"===e.type)for(var U=0,V=kn(e.geometry,0);U<V.length;U+=1){var G=V[U],q=Rr(G,16);I(G[0],new Jl(q.x,q.y,0))}else if("LineString"===e.type)for(var W=0,H=e.geometry;W<H.length;W+=1){var X=H[W];I(X,new Jl(X[0].x,X[0].y,0))}else if("Point"===e.type)for(var Z=0,Y=e.geometry;Z<Y.length;Z+=1)for(var Q=0,K=Y[Z];Q<K.length;Q+=1){var J=K[Q];I([J],new Jl(J.x,J.y,0))}}(t,o,h,z,r,l,f,p,x,B,a)},_=0,b=t.features;_<b.length;_+=1)m();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=Ya,t.polygonIntersectsPolygon=Ie,t.postMapLoadEvent=ji,t.postTurnstileEvent=Ni,t.potpack=ur,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=le,t.registerForPluginStateChange=function(t){return t({pluginStatus:Ga,pluginURL:qa}),Ha.on("pluginStateChange",t),t},t.renderColorRamp=Ke,t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=p*i-u*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=p*i-u*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){zi=t,Bi=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===Ga||"loading"===Ga||"loaded"===Ga)throw new Error("setRTLTextPlugin cannot be called multiple times.");qa=Ai.resolveURL(t),Ga="deferred",Va=e,ve(),n||Za()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=ro,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=$l,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=He,t.translate=function(t,e,n){var r,i,o,a,s,u,l,c,f,p,h,d,g=n[0],y=n[1],A=n[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*A+e[12],t[13]=e[1]*g+e[5]*y+e[9]*A+e[13],t[14]=e[2]*g+e[6]*y+e[10]*A+e[14],t[15]=e[3]*g+e[7]*y+e[11]*A+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=p,t[10]=h,t[11]=d,t[12]=r*g+s*y+f*A+e[12],t[13]=i*g+u*y+p*A+e[13],t[14]=o*g+l*y+h*A+e[14],t[15]=a*g+c*y+d*A+e[15]),t},t.triggerPluginCompletionEvent=Wa,t.uniqueId=u,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Ia,t.validateStyle=Ta,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=dl,t.version="1.13.2",t.warnOnce=g,t.webpSupported=mi,t.window=ri,t.wrap=a})),r(["./shared"],(function(t){var e=function(e){for(var n="",r=0,i=t.refProperties;r<i.length;r+=1)n+="/"+tt(e[i[r]]);return n},n=function(e,n,r){for(var i=new t.EvaluationParameters(n),o=0,a=e;o<a.length;o+=1)a[o].recalculate(i,r)},r=function(e,n){var r=t.getArrayBuffer(e.request,(function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return function(){r.cancel(),n()}},i=function(t,e){if(0!==t.length){o(t[0],e);for(var n=1;n<t.length;n++)o(t[n],!e)}},o=function(t,e){for(var n=0,r=0,i=t.length,o=i-1;r<i;o=r++)n+=(t[r][0]-t[o][0])*(t[o][1]+t[r][1]);n>=0!=!!e&&t.reverse()},a=function(t,e){this.options=e||{},this.features=t,this.length=t.length},s=function(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096},u=function(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,l,t.layers[n])}(e,n),n.finish()},l=function(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,c,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,g,o[n])},c=function(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,f,t),e.writeVarintField(3,n.type),e.writeMessage(4,d,n)},f=function(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var l=n.properties[s],c=void 0===l?"undefined":vt.default(l);"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var f=c+":"+l,p=a[f];void 0===p&&(i.push(l),a[f]=p=i.length-1),e.writeVarint(p)}},p=function(t,e){return(e<<3)+(7&t)},h=function(t){return t<<1^t>>31},d=function(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),e.writeVarint(p(1,l));for(var c=3===r?u.length-1:u.length,f=0;f<c;f++){1===f&&1!==r&&e.writeVarint(p(2,c-1));var d=u[f].x-i,g=u[f].y-o;e.writeVarint(h(d)),e.writeVarint(h(g)),i+=d,o+=g}3===r&&e.writeVarint(p(7,1))}},g=function(t,e){var n=void 0===t?"undefined":vt.default(t);"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))},y=function(t,e,n,r){A(t,n,r),A(e,2*n,2*r),A(e,2*n+1,2*r+1)},A=function(t,e,n){var r=t[e];t[e]=t[n],t[n]=r},v=function(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o},m=function(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}},_=function(t,e){var n=t.geometry.coordinates,r=n[1];return{x:w(n[0]),y:E(r),zoom:1/0,index:e,parentId:-1}},b=function(t){var e,n,r;return{type:"Feature",id:t.id,properties:x(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}}},x=function(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return S(S({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})},w=function(t){return t/360+.5},E=function(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n},S=function(t,e){for(var n in e)t[n]=e[n];return t},P=function(t){return t.x},k=function(t){return t.y},C=function(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s},T=function(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)I(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)I(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)I(t,e[r][i])}(i),i},I=function(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])},M=function(t,e){e.push(R(t[0])),e.push(D(t[1])),e.push(0)},O=function(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=R(t[s][0]),l=D(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=e[n],c=e[n+1],f=e[r],p=e[r+1],h=n+3;h<r;h+=3){var d=C(e[h],e[h+1],l,c,f,p);if(d>a)o=h,a=d;else if(d===a){var g=Math.abs(h-s);g<u&&(o=h,u=g)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size},L=function(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];O(t[i],o,n,r),e.push(o)}},R=function(t){return t/360+.5},D=function(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n},N=function(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],f=c.geometry,p=c.type,h=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(h>=n&&d<r)u.push(c);else if(!(d<n||h>=r)){var g=[];if("Point"===p||"MultiPoint"===p)F(f,g,n,r,i);else if("LineString"===p)j(f,g,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)B(f,g,n,r,i,!1);else if("Polygon"===p)B(f,g,n,r,i,!0);else if("MultiPolygon"===p)for(var y=0;y<f.length;y++){var A=[];B(f[y],A,n,r,i,!0),A.length&&g.push(A)}if(g.length){if(s.lineMetrics&&"LineString"===p){for(y=0;y<g.length;y++)u.push(T(c.id,p,g[y],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===g.length?(p="LineString",g=g[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===g.length?"Point":"MultiPoint"),u.push(T(c.id,p,g,c.tags))}}}return u.length?u:null},F=function(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}},j=function(t,e,n,r,i,o,a){for(var s,u,l=z(t),c=0===i?V:G,f=t.start,p=0;p<t.length-3;p+=3){var h=t[p],d=t[p+1],g=t[p+2],y=t[p+3],A=t[p+4],v=0===i?h:d,m=0===i?y:A,_=!1;a&&(s=Math.sqrt(Math.pow(h-y,2)+Math.pow(d-A,2))),v<n?m>n&&(u=c(l,h,d,y,A,n),a&&(l.start=f+s*u)):v>r?m<r&&(u=c(l,h,d,y,A,r),a&&(l.start=f+s*u)):U(l,h,d,g),m<n&&v>=n&&(u=c(l,h,d,y,A,n),_=!0),m>r&&v<=r&&(u=c(l,h,d,y,A,r),_=!0),!o&&_&&(a&&(l.end=f+s*u),e.push(l),l=z(t)),a&&(f+=s)}var b=t.length-3;h=t[b],d=t[b+1],g=t[b+2],(v=0===i?h:d)>=n&&v<=r&&U(l,h,d,g),b=l.length-3,o&&b>=3&&(l[b]!==l[0]||l[b+1]!==l[1])&&U(l,l[0],l[1],l[2]),l.length&&e.push(l)},z=function(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e},B=function(t,e,n,r,i,o){for(var a=0;a<t.length;a++)j(t[a],e,n,r,i,o,!1)},U=function(t,e,n,r){t.push(e),t.push(n),t.push(r)},V=function(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a},G=function(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a},q=function(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=W(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(W(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(W(o.geometry[s][l],e));i.push(u)}n.push(T(o.id,a,i,o.tags))}return n},W=function(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n},H=function(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(X(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var f=[];for(i=0;i<l[r].length;i+=2)f.push(X(l[r][i],l[r][i+1],e,o,a,s));u.geometry.push(f)}}return t.transformed=!0,t},X=function(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]},Z=function(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,Y(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,f=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),f>a.maxY&&(a.maxY=f)}return a},Y=function(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Q(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Q(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)Q(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in c={},e.tags)c[f]=e.tags[f];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}},Q=function(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}},K=function(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r,i,o,a,s,u,l=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)_t(n,t.features[r],e,r);else _t(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=l,i=e,o=i.buffer/i.extent,a=r,s=N(r,1,-1-o,o,0,-1,2,i),u=N(r,1,1-o,2+o,0,-1,2,i),(s||u)&&(a=N(r,1,-o,1+o,0,-1,2,i)||[],s&&(a=q(s,1).concat(a)),u&&(a=a.concat(q(u,-1)))),l=a).length&&this.splitTile(l,0,0,0),n&&(l.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))},J=function(t,e,n){return 32*((1<<t)*n+e)+t},$=function(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new lt(r.features),o=pt(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})};function tt(t){var e=void 0===t?"undefined":vt.default(t);if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",r=0,i=t;r<i.length;r+=1)n+=tt(i[r])+",";return n+"]"}for(var o=Object.keys(t).sort(),a="{",s=0;s<o.length;s++)a+=JSON.stringify(o[s])+":"+tt(t[o[s]])+",";return a+"}"}var et=function(t){this.keyCache={},t&&this.replace(t)};et.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},et.prototype.update=function(n,r){for(var i=this,o=0,a=n;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var l=0,c=r;l<c.length;l+=1){var f=c[l];delete this.keyCache[f],delete this._layerConfigs[f],delete this._layers[f]}this.familiesBySource={};for(var p=0,h=function(t,n){for(var r={},i=0;i<t.length;i++){var o=n&&n[t[i].id]||e(t[i]);n&&(n[t[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[i])}var s=[];for(var u in r)s.push(r[u]);return s}(t.values(this._layerConfigs),this.keyCache);p<h.length;p+=1){var d=h[p].map((function(t){return i._layers[t.id]})),g=d[0];if("none"!==g.visibility){var y=g.source||"",A=this.familiesBySource[y];A||(A=this.familiesBySource[y]={});var v=g.sourceLayer||"_geojsonTileLayer",m=A[v];m||(m=A[v]=[]),m.push(d)}}};var nt=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=t.potpack(r),f=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var p in e){var h=e[p];for(var d in h){var g=h[+d];if(g&&0!==g.bitmap.width&&0!==g.bitmap.height){var y=n[p][d].rect;t.AlphaImage.copy(g.bitmap,f,{x:0,y:0},{x:y.x+1,y:y.y+1},g.bitmap)}}}this.image=f,this.positions=n};t.register("GlyphAtlas",nt);var rt=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};rt.prototype.parse=function(e,r,i,o,a){var s=function(){if(f)return a(f);if(p&&h&&d){var e=new nt(p),r=new t.ImageAtlas(h,d);for(var o in g){var s=g[o];s instanceof t.SymbolBucket?(n(s.layers,this.zoom,i),t.performSymbolLayout(s,p,e.positions,h,r.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):s.hasPattern&&(s instanceof t.LineBucket||s instanceof t.FillBucket||s instanceof t.FillExtrusionBucket)&&(n(s.layers,this.zoom,i),s.addFeatures(y,this.tileID.canonical,r.patternPositions))}this.status="done",a(null,{buckets:t.values(g).filter((function(t){return!t.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:r,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?h:null,glyphPositions:this.returnDependencies?e.positions:null})}},u=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var f,p,h,d,g={},y={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},A=r.familiesBySource[this.source];for(var v in A){var m=e.layers[v];if(m){1===m.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+v+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=l.encode(v),b=[],x=0;x<m.length;x++){var w=m.feature(x),E=c.getId(w,v);b.push({feature:w,id:E,index:x,sourceLayerIndex:_})}for(var S=0,P=A[v];S<P.length;S+=1){var k=P[S],C=k[0];C.minzoom&&this.zoom<Math.floor(C.minzoom)||C.maxzoom&&this.zoom>=C.maxzoom||"none"!==C.visibility&&(n(k,this.zoom,i),(g[C.id]=C.createBucket({index:c.bucketLayerIDs.length,layers:k,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_,sourceID:this.source})).populate(b,y,this.tileID.canonical),c.bucketLayerIDs.push(k.map((function(t){return t.id}))))}}}var T=t.mapObject(y.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(T).length?o.send("getGlyphs",{uid:this.uid,stacks:T},(function(t,e){f||(f=t,p=e,s.call(u))})):p={};var I=Object.keys(y.iconDependencies);I.length?o.send("getImages",{icons:I,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){f||(f=t,h=e,s.call(u))})):h={};var M=Object.keys(y.patternDependencies);M.length?o.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){f||(f=t,d=e,s.call(u))})):d={},s.call(this)};var it=function(t,e,n,i){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||r,this.loading={},this.loaded={}};it.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),a=this.loading[i]=new rt(e);a.abort=this.loadVectorData(e,(function(e,s){if(delete r.loading[i],e||!s)return a.status="done",r.loaded[i]=a,n(e);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(o){var f=o.finish();f&&(c.resourceTiming=JSON.parse(JSON.stringify(f)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,l,c))})),r.loaded=r.loaded||{},r.loaded[i]=a}))},it.prototype.reloadTile=function(t,e){var n=this,r=this.loaded,i=t.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),e(t,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},it.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},it.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var ot=t.window.ImageBitmap,at=function(){this.loaded={}};at.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=ot&&o instanceof ot?this.getImageData(o):o,s=new t.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)},at.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},at.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var st=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,ut=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};ut.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point$1(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var f=c[l];u.push(new t.Point$1(f[0],f[1]))}o.push(u)}return o},ut.prototype.toGeoJSON=function(t,e,n){return st.call(this,t,e,n)};var lt=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};lt.prototype.feature=function(t){return new ut(this._features[t])};var ct=t.vectorTile.VectorTileFeature,ft=a;a.prototype.feature=function(t){return new s(this.features[t],this.options.extent)},s.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},s.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},s.prototype.toGeoJSON=ct.prototype.toGeoJSON;var pt=u,ht=ft;pt.fromVectorTileJs=u,pt.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new ft(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return u({layers:n})},pt.GeoJSONWrapper=ht;var dt=function(t){return t[0]},gt=function(t){return t[1]},yt=function(t,e,n,r,i){void 0===e&&(e=dt),void 0===n&&(n=gt),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);!function t(e,n,r,i,o,a){if(!(o-i<=r)){var s=i+o>>1;!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*c/s+f)),Math.min(o,Math.floor(r+(s-u)*c/s+f)),a)}var p=n[2*r+a],h=i,d=o;for(y(e,n,i,r),n[2*o+a]>p&&y(e,n,i,o);h<d;){for(y(e,n,h,d),h++,d--;n[2*h+a]<p;)h++;for(;n[2*d+a]>p;)d--}n[2*i+a]===p?y(e,n,i,d):y(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,n,s,i,o,a%2),t(e,n,r,i,s-1,a+1),t(e,n,r,s+1,o,a+1)}}(a,s,r,0,a.length-1,0)};yt.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var f=l.pop(),p=l.pop(),h=l.pop();if(p-h<=a)for(var d=h;d<=p;d++)u=e[2*d+1],(s=e[2*d])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var g=Math.floor((h+p)/2);u=e[2*g+1],(s=e[2*g])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[g]);var y=(f+1)%2;(0===f?n<=s:r<=u)&&(l.push(h),l.push(g-1),l.push(y)),(0===f?i>=s:o>=u)&&(l.push(g+1),l.push(p),l.push(y))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},yt.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),f=a.pop();if(c-f<=o)for(var p=f;p<=c;p++)v(e[2*p],e[2*p+1],n,r)<=u&&s.push(t[p]);else{var h=Math.floor((f+c)/2),d=e[2*h],g=e[2*h+1];v(d,g,n,r)<=u&&s.push(t[h]);var y=(l+1)%2;(0===l?n-i<=d:r-i<=g)&&(a.push(f),a.push(h-1),a.push(y)),(0===l?n+i>=d:r+i>=g)&&(a.push(h+1),a.push(c),a.push(y))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var At={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},mt=function(t){this.options=S(Object.create(At),t),this.trees=new Array(this.options.maxZoom+1)};function _t(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)M(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)M(i[l],s);else if("LineString"===o)O(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)O(i[l],s=[],a,!1),t.push(T(u,"LineString",s,e.properties));return}L(i,s,a,!1)}else if("Polygon"===o)L(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)_t(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];L(i[l],c,a,!0),s.push(c)}}t.push(T(u,o,s,e.properties))}}mt.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(_(t[u],u));this.trees[i+1]=new yt(s,P,k,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new yt(s,P,k,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},mt.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=[],c=0,f=u.range(w(n),E(o),w(i),E(r));c<f.length;c+=1){var p=u.points[f[c]];l.push(p.numPoints?b(p):this.points[p.index])}return l},mt.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,l=i.within(o.x,o.y,a);u<l.length;u+=1){var c=i.points[l[u]];c.parentId===t&&s.push(c.numPoints?b(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},mt.prototype.getLeaves=function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r},mt.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},mt.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},mt.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}return i},mt.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],l=u.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:l?x(u):this.points[u.index].properties},f=void 0;l?f=u.id:this.options.generateId?f=u.index:this.points[u.index].id&&(f=this.points[u.index].id),void 0!==f&&(c.id=f),o.features.push(c)}},mt.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},mt.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.reduce,o=r.minPoints,a=r.radius/(r.extent*Math.pow(2,e)),s=0;s<t.length;s++){var u=t[s];if(!(u.zoom<=e)){u.zoom=e;for(var l=this.trees[e+1],c=l.within(u.x,u.y,a),f=u.numPoints||1,p=f,h=0,d=c;h<d.length;h+=1){var g=l.points[d[h]];g.zoom>e&&(p+=g.numPoints||1)}if(p>=o){for(var y=u.x*f,A=u.y*f,v=i&&f>1?this._map(u,!0):null,_=(s<<5)+(e+1)+this.points.length,b=0,x=c;b<x.length;b+=1){var w=l.points[x[b]];if(!(w.zoom<=e)){w.zoom=e;var E=w.numPoints||1;y+=w.x*E,A+=w.y*E,w.parentId=_,i&&(v||(v=this._map(u,!0)),i(v,this._map(w)))}}u.parentId=_,n.push(m(y/p,A/p,_,p,v))}else if(n.push(u),p>1)for(var S=0,P=c;S<P.length;S+=1){var k=l.points[P[S]];k.zoom<=e||(k.zoom=e,n.push(k))}}}return n},mt.prototype._getOriginId=function(t){return t-this.points.length>>5},mt.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},mt.prototype._map=function(t,e){if(t.numPoints)return e?S({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?S({},r):r},K.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},K.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,f=J(e,n,r),p=this.tiles[f];if(!p&&(l>1&&console.time("creation"),p=this.tiles[f]=Z(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var h="z"+e;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(p.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==t.length){l>1&&console.time("clipping");var g,y,A,v,m,_,b=.5*u.buffer/u.extent,x=.5-b,w=.5+b,E=1+b;g=y=A=v=null,m=N(t,c,n-b,n+w,0,p.minX,p.maxX,u),_=N(t,c,n+x,n+E,0,p.minX,p.maxX,u),t=null,m&&(g=N(m,c,r-b,r+w,1,p.minY,p.maxY,u),y=N(m,c,r+x,r+E,1,p.minY,p.maxY,u),m=null),_&&(A=N(_,c,r-b,r+w,1,p.minY,p.maxY,u),v=N(_,c,r+x,r+E,1,p.minY,p.maxY,u),_=null),l>1&&console.timeEnd("clipping"),s.push(g||[],e+1,2*n,2*r),s.push(y||[],e+1,2*n,2*r+1),s.push(A||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},K.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=J(t,e=(e%a+a)%a,n);if(this.tiles[s])return H(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,f=n;!u&&l>0;)l--,c=Math.floor(c/2),f=Math.floor(f/2),u=this.tiles[J(l,c,f)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,f),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,f,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?H(this.tiles[s],i):null):null};var bt,xt,wt=(xt=function(t,e,n,r){bt.call(this,t,e,n,$),r&&(this.loadGeoJSON=r)},(bt=it)&&(xt.__proto__=bt),(xt.prototype=Object.create(bt&&bt.prototype)).constructor=xt,xt.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},xt.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,(function(a,s){if(a||!s)return n(a);if("object"!=typeof s)return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function t(e,n){var r,o=e&&e.type;if("FeatureCollection"===o)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===o)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===o)t(e.geometry,n);else if("Polygon"===o)i(e.coordinates,n);else if("MultiPolygon"===o)for(r=0;r<e.coordinates.length;r++)i(e.coordinates[r],n);return e}(s,!0);try{if(r.filter){var u=t.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===u.result)throw new Error(u.value.map((function(t){return t.key+": "+t.message})).join(", "));var l=s.features.filter((function(t){return u.value.evaluate({zoom:0},t)}));s={type:"FeatureCollection",features:l}}e._geoJSONIndex=r.cluster?new mt(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l+=1){var f=c[l],p=r[f],h=p[0],d=t.createExpression(p[1]),g=t.createExpression("string"==typeof h?[h,["accumulated"],["get",f]]:h);i[f]=d.value,o[f]=g.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=u;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},n}(r)).load(s.features):(c=s,f=r.geojsonVtOptions,new K(c,f))}catch(t){return n(t)}var c,f;e.loaded={};var p={};if(o){var h=o.finish();h&&(p.resourceTiming={},p.resourceTiming[r.source]=JSON.parse(JSON.stringify(h)))}n(null,p)}))}},xt.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},xt.prototype.reloadTile=function(t,e){var n=this.loaded;return n&&n[t.uid]?bt.prototype.reloadTile.call(this,t,e):this.loadTile(t,e)},xt.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},xt.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},xt.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},xt.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},xt.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},xt),Et=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:it,geojson:wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Et.prototype.setReferrer=function(t,e){this.referrer=e},Et.prototype.setImages=function(t,e,n){for(var r in this.availableImages[t]=e,this.workerSources[t]){var i=this.workerSources[t][r];for(var o in i)i[o].availableImages=e}n()},Et.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Et.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Et.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Et.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Et.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Et.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Et.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Et.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Et.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},Et.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Et.prototype.syncRTLPluginState=function(e,n,r){try{t.plugin.setState(n);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+i),o)}}catch(t){r(t.toString())}},Et.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},Et.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new et),e},Et.prototype.getWorkerSource=function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},Et.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new at),this.demWorkerSources[t][e]},Et.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Et(self)),Et})),r(["./shared"],(function(t){var e,n=function(t){if(!St)return t[0];for(var e=0;e<t.length;e++)if(t[e]in St)return t[e];return t[0]},r=function(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)},i=function(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))},o=function(t,e,n,r,i,o,s){for(var u=0;u<e;u++){for(var l=0;l<n;l++)r[l]=t[l*e+u];for(a(r,i,o,s,n),l=0;l<n;l++)t[l*e+u]=i[l]}for(l=0;l<n;l++){for(u=0;u<e;u++)r[u]=t[l*e+u];for(a(r,i,o,s,e),u=0;u<e;u++)t[l*e+u]=Math.sqrt(i[u])}},a=function(t,e,n,r,i){n[0]=0,r[0]=-Nt,r[1]=+Nt;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+Nt}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}},s=function(e,n,r){var i=function(i,o){if(i)return r(i);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=n.canonicalizeTileset(a,e.url),r(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame((function(){return i(null,e)}))},u=function(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))},l=function(t,e,n,r,i,o){var a=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(r,s,a);l.sort(c);for(var f=[],p=0,h=l;p<h.length;p+=1){var d=h[p];f.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(e,n,t._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,i,o,s,u(t.transform,d.tileID))})}var g=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],f=u[l]=u[l]||{},p=e[l]=e[l]||[],h=0,d=c;h<d.length;h+=1){var g=d[h];f[g.featureIndex]||(f[g.featureIndex]=!0,p.push(g))}}return e}(f);for(var y in g)g[y].forEach((function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return g},c=function(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x},f=function(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x},p=function(t){return"raster"===t||"image"===t||"video"===t},h=function(){return new t.window.Worker(Eo.workerUrl)},d=function(){return dn||(dn=new hn),dn},g=function(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach((function(t){t in n&&(r[t]=n[t])})),r},y=function(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=g(t[r],e[t[r].ref]));return t},A=function(t,e,n){n.push({command:yn.addSource,args:[t,e[t]]})},v=function(t,e,n){e.push({command:yn.removeSource,args:[t]}),n[t]=!0},m=function(t,e,n,r){v(t,n,r),A(t,e,n)},_=function(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;return!0},b=function(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))},x=function(t){return t.id},w=function(t,e){return t[e.id]=e,t},E=function(e,n,r,i,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a},S=function(e,n,r,i,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix},P=function(e,n){var r=[e.x,e.y,0,1];N(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}},k=function(t,e){return.5+t/e*.5},C=function(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]},T=function(e,n,r,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var h=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=r.transform.width/r.transform.height,y=!1,A=0;A<d.length;A++){var v=d.get(A);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!y)D(v.numGlyphs,p);else{y=!1;var m=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(m,m,n),C(m,f)){var _=k(r.transform.cameraToCenterDistance,m[3]),b=t.evaluateSizeForFeature(l,c,v),x=s?b/_:b*_,w=new t.Point(v.anchorX,v.anchorY),E=P(w,o).point,S={},T=O(v,x,!1,u,n,o,a,e.glyphOffsetArray,h,p,E,w,S,g);y=T.useVertical,(T.notEnoughRoom||y||T.needsFlipping&&O(v,x,!0,u,n,o,a,e.glyphOffsetArray,h,p,E,w,S,g).notEnoughRoom)&&D(v.numGlyphs,p)}else D(v.numGlyphs,p)}}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)},I=function(t,e,n,r,i,o,a,s,u,l,c){var f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,h=s.lineStartIndex+s.lineLength,d=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(f-1),y=R(t*d,n,r,i,o,a,s.segment,p,h,u,l,c);if(!y)return null;var A=R(t*g,n,r,i,o,a,s.segment,p,h,u,l,c);return A?{first:y,last:A}:null},M=function(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null},O=function(e,n,r,i,o,a,s,u,l,c,f,p,h,d){var g,y=n/24,A=e.lineOffsetX*y,v=e.lineOffsetY*y;if(e.numGlyphs>1){var m=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,x=I(y,u,A,v,r,f,p,e,l,a,h);if(!x)return{notEnoughRoom:!0};var w=P(x.first.point,s).point,E=P(x.last.point,s).point;if(i&&!r){var S=M(e.writingMode,w,E,d);if(S)return S}g=[x.first];for(var k=e.glyphStartIndex+1;k<m-1;k++)g.push(R(y*u.getoffsetX(k),A,v,r,f,p,e.segment,_,b,l,a,h));g.push(x.last)}else{if(i&&!r){var C=P(p,o).point,T=e.lineStartIndex+e.segment+1,O=new t.Point(l.getx(T),l.gety(T)),D=P(O,o),N=D.signedDistanceFromCamera>0?D.point:L(p,O,C,1,o),F=M(e.writingMode,C,N,d);if(F)return F}var j=R(y*u.getoffsetX(e.glyphStartIndex),A,v,r,f,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,h);if(!j)return{notEnoughRoom:!0};g=[j]}for(var z=0,B=g;z<B.length;z+=1){var U=B[z];t.addDynamicAttributes(c,U.point,U.angle)}return{}},L=function(t,e,n,r,i){var o=P(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))},R=function(e,n,r,i,o,a,s,u,l,c,f,p){var h=i?e-n:e+n,d=h>0?1:-1,g=0;i&&(d*=-1,g=Math.PI),d<0&&(g+=Math.PI);for(var y=d>0?u+s:u+s+1,A=o,v=o,m=0,_=0,b=Math.abs(h),x=[];m+_<=b;){if((y+=d)<u||y>=l)return null;if(v=A,x.push(A),void 0===(A=p[y])){var w=new t.Point(c.getx(y),c.gety(y)),E=P(w,f);if(E.signedDistanceFromCamera>0)A=p[y]=E.point;else{var S=y-d;A=L(0===m?a:new t.Point(c.getx(S),c.gety(S)),w,v,b-m+1,f)}}m+=_,_=v.dist(A)}var k=(b-m)/_,C=A.sub(v),T=C.mult(k)._add(v);T._add(C._unit()._perp()._mult(r*d));var I=g+Math.atan2(A.y-v.y,A.x-v.x);return x.push(T),{point:T,angle:I,path:x}},D=function(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(mn,3*r)}},N=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t},F=function(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))},j=function(e,n,r,i,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*r,l=t.evaluateVariableOffset(e,i);return new t.Point(s+l[0]*o,u+l[1]*o)},z=function(e,n,r,i,o,a){var s=e.x1,u=e.x2,l=e.y1,c=e.y2,f=e.anchorPointX,p=e.anchorPointY,h=new t.Point(n,r);return i&&h._rotate(o?a:-a),{x1:s+h.x,y1:l+h.y,x2:u+h.x,y2:c+h.y,anchorPointX:f,anchorPointY:p}},B=function(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)},U=function(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Cn+e*Tn+n*In+e*Mn+n*On+e*Ln+n*Rn+e},V=function(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:t=t.replace(n,(function(t,e,n,r,i){return s[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})),vertexSource:e=e.replace(n,(function(t,e,n,r,i){var o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})),staticAttributes:r,staticUniforms:a}},G=function(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var r=t[n].split(" ");e.push(r.pop())}return e},q=function(t,e,n){var r=1/F(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}},W=function(t,e){return 1/F(t,1,e.tileZoom)},H=function(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))},X=function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]},Z=function(e,n,r,i,o,a,s){for(var u=e.context,l=u.gl,c=e.useProgram("collisionBox"),f=[],p=0,h=0,d=0;d<i.length;d++){var g=i[d],y=n.getTile(g),A=y.getBucket(r);if(A){var v=g.posMatrix;0===o[0]&&0===o[1]||(v=e.translatePosMatrix(g.posMatrix,y,o,a));var m=s?A.textCollisionBox:A.iconCollisionBox,_=A.collisionCircleArray;if(_.length>0){var b=t.create(),x=v;t.mul(b,A.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(b,b,A.placementViewportMatrix),f.push({circleArray:_,circleOffset:h,transform:x,invTransform:b}),h=p+=_.length/4}m&&c.draw(u,l.LINES,rn.disabled,on.disabled,e.colorModeForRenderPass(),sn.disabled,Or(v,e.transform,y),r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,e.transform.zoom,null,null,m.collisionVertexBuffer)}}if(s&&f.length){var w=e.useProgram("collisionCircle"),E=new t.StructArrayLayout2f1f2i16;E.resize(4*p),E._trim();for(var S=0,P=0,k=f;P<k.length;P+=1)for(var C=k[P],T=0;T<C.circleArray.length/4;T++){var I=4*T,M=C.circleArray[I+0],O=C.circleArray[I+1],L=C.circleArray[I+2],R=C.circleArray[I+3];E.emplace(S++,M,O,L,R,0),E.emplace(S++,M,O,L,R,1),E.emplace(S++,M,O,L,R,2),E.emplace(S++,M,O,L,R,3)}(!Er||Er.length<2*p)&&(Er=function(e){var n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[o+0]=4*i+0,r.uint16[o+1]=4*i+1,r.uint16[o+2]=4*i+2,r.uint16[o+3]=4*i+2,r.uint16[o+4]=4*i+3,r.uint16[o+5]=4*i+0}return r}(p));for(var D=u.createIndexBuffer(Er,!0),N=u.createVertexBuffer(E,t.collisionCircleLayout.members,!0),F=0,j=f;F<j.length;F+=1){var z=j[F],B=Lr(z.transform,z.invTransform,e.transform);w.draw(u,l.TRIANGLES,rn.disabled,on.disabled,e.colorModeForRenderPass(),sn.disabled,B,r.id,N,D,t.SegmentVector.simpleSegment(0,2*z.circleOffset,z.circleArray.length,z.circleArray.length/2),null,e.transform.zoom,null,null,null)}N.destroy(),D.destroy()}},Y=function(e,n,r,i,o,a){var s=t.getAnchorAlignment(e),u=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.Point((u/o+c[0])*a,(l/o+c[1])*a)},Q=function(e,n,r,i,o,a,s,u,l,c,f){var p=e.text.placedSymbolArray,h=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,g={};h.clear();for(var y=0;y<p.length;y++){var A=p.get(y),v=A.hidden||!A.crossTileID||e.allowVerticalPlacement&&!A.placedOrientation?null:i[A.crossTileID];if(v){var m=new t.Point(A.anchorX,A.anchorY),_=P(m,r?u:s),b=k(a.cameraToCenterDistance,_.signedDistanceFromCamera),x=o.evaluateSizeForFeature(e.textSizeData,c,A)*b/t.ONE_EM;r&&(x*=e.tilePixelRatio/l);for(var w=Y(v.anchor,v.width,v.height,v.textOffset,v.textBoxScale,x),E=r?P(m.add(w),s).point:_.point.add(n?w.rotate(-a.angle):w),S=e.allowVerticalPlacement&&A.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,C=0;C<A.numGlyphs;C++)t.addDynamicAttributes(h,E,S);f&&A.associatedIconIndex>=0&&(g[A.associatedIconIndex]={shiftedAnchor:E,angle:S})}else D(A.numGlyphs,h)}if(f){d.clear();for(var T=e.icon.placedSymbolArray,I=0;I<T.length;I++){var M=T.get(I);if(M.hidden)D(M.numGlyphs,d);else{var O=g[I];if(O)for(var L=0;L<M.numGlyphs;L++)t.addDynamicAttributes(d,O.shiftedAnchor,O.angle);else D(M.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(h)},K=function(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"},J=function(e,n,r,i,o,a,s,u,l,c,f,p){for(var h=e.context,d=h.gl,g=e.transform,y="map"===u,A="map"===l,v=y&&"point"!==r.layout.get("symbol-placement"),m=y&&!A&&!v,_=void 0!==r.layout.get("symbol-sort-key").constantOr(1),b=!1,x=e.depthModeForSublayer(0,rn.ReadOnly),w=r.layout.get("text-variable-anchor"),P=[],k=0,C=i;k<C.length;k+=1){var I=C[k],M=n.getTile(I),O=M.getBucket(r);if(O){var L=o?O.text:O.icon;if(L&&L.segments.get().length){var R=L.programConfigurations.get(r.id),D=o||O.sdfIcons,N=o?O.textSizeData:O.iconSizeData,j=A||0!==g.pitch,z=e.useProgram(K(D,o,O),R),B=t.evaluateSizeForZoom(N,g.zoom),U=void 0,V=[0,0],G=void 0,q=void 0,W=null,H=void 0;if(o)G=M.glyphAtlasTexture,q=d.LINEAR,U=M.glyphAtlasTexture.size,O.iconsInText&&(V=M.imageAtlasTexture.size,W=M.imageAtlasTexture,H=j||e.options.rotating||e.options.zooming||"composite"===N.kind||"camera"===N.kind?d.LINEAR:d.NEAREST);else{var X=1!==r.layout.get("icon-size").constantOr(0)||O.iconsNeedLinear;G=M.imageAtlasTexture,q=D||e.options.rotating||e.options.zooming||X||j?d.LINEAR:d.NEAREST,U=M.imageAtlasTexture.size}var Z=F(M,1,e.transform.zoom),Y=E(I.posMatrix,A,y,e.transform,Z),Q=S(I.posMatrix,A,y,e.transform,Z),J=w&&O.hasTextData(),tt="none"!==r.layout.get("icon-text-fit")&&J&&O.hasIconData();v&&T(O,I.posMatrix,e,o,Y,Q,A,c);var et=e.translatePosMatrix(I.posMatrix,M,a,s),nt=v||o&&w||tt?Zr:Y,rt=e.translatePosMatrix(Q,M,a,s,!0),it=D&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),ot={program:z,buffers:L,uniformValues:D?O.iconsInText?qr(N.kind,B,m,A,e,et,nt,rt,U,V):Gr(N.kind,B,m,A,e,et,nt,rt,o,U,!0):Vr(N.kind,B,m,A,e,et,nt,rt,o,U),atlasTexture:G,atlasTextureIcon:W,atlasInterpolation:q,atlasInterpolationIcon:H,isSDF:D,hasHalo:it};if(_&&O.canOverlap){b=!0;for(var at=0,st=L.segments.get();at<st.length;at+=1){var ut=st[at];P.push({segments:new t.SegmentVector([ut]),sortKey:ut.sortKey,state:ot})}}else P.push({segments:L.segments,sortKey:0,state:ot})}}}b&&P.sort((function(t,e){return t.sortKey-e.sortKey}));for(var lt=0,ct=P;lt<ct.length;lt+=1){var ft=ct[lt],pt=ft.state;if(h.activeTexture.set(d.TEXTURE0),pt.atlasTexture.bind(pt.atlasInterpolation,d.CLAMP_TO_EDGE),pt.atlasTextureIcon&&(h.activeTexture.set(d.TEXTURE1),pt.atlasTextureIcon&&pt.atlasTextureIcon.bind(pt.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),pt.isSDF){var ht=pt.uniformValues;pt.hasHalo&&(ht.u_is_halo=1,$(pt.buffers,ft.segments,r,e,pt.program,x,f,p,ht)),ht.u_is_halo=0}$(pt.buffers,ft.segments,r,e,pt.program,x,f,p,pt.uniformValues)}},$=function(t,e,n,r,i,o,a,s,u){var l=r.context;i.draw(l,l.gl.TRIANGLES,o,a,s,sn.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)},tt=function(t,e,n,r,i,o,a){var s,u,l,c,f,p=t.context.gl,h=n.paint.get("fill-pattern"),d=h&&h.constantOr(1),g=n.getCrossfadeParameters();a?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(u=d?"fillPattern":"fill",s=p.TRIANGLES);for(var y=0,A=r;y<A.length;y+=1){var v=A[y],m=e.getTile(v);if(!d||m.patternsLoaded()){var _=m.getBucket(n);if(_){var b=_.programConfigurations.get(n.id),x=t.useProgram(u,b);d&&(t.context.activeTexture.set(p.TEXTURE0),m.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),b.updatePaintBuffers(g));var w=h.constantOr(null);if(w&&m.imageAtlas){var E=m.imageAtlas,S=E.patternPositions[w.to.toString()],P=E.patternPositions[w.from.toString()];S&&P&&b.setConstantPatternPositions(S,P)}var k=t.translatePosMatrix(v.posMatrix,m,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=_.indexBuffer2,f=_.segments2;var C=[p.drawingBufferWidth,p.drawingBufferHeight];l="fillOutlinePattern"===u&&d?Ir(k,t,g,m,C):Tr(k,C)}else c=_.indexBuffer,f=_.segments,l=d?Cr(k,t,g,m):kr(k);x.draw(t.context,s,i,t.stencilModeForClipping(v),o,sn.disabled,l,n.id,_.layoutVertexBuffer,c,f,n.paint,t.transform.zoom,b)}}}},et=function(t,e,n,r,i,o,a){for(var s=t.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),f=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),h=0,d=r;h<d.length;h+=1){var g=d[h],y=e.getTile(g),A=y.getBucket(n);if(A){var v=A.programConfigurations.get(n.id),m=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",v);c&&(t.context.activeTexture.set(u.TEXTURE0),y.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),v.updatePaintBuffers(f));var _=l.constantOr(null);if(_&&y.imageAtlas){var b=y.imageAtlas,x=b.patternPositions[_.to.toString()],w=b.patternPositions[_.from.toString()];x&&w&&v.setConstantPatternPositions(x,w)}var E=t.translatePosMatrix(g.posMatrix,y,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),S=n.paint.get("fill-extrusion-vertical-gradient"),P=c?Pr(E,t,S,p,g,f,y):Sr(E,t,S,p);m.draw(s,s.gl.TRIANGLES,i,o,a,sn.backCCW,P,n.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,n.paint,t.transform.zoom,v)}}},nt=function(e,n,r,i,o,a){var s=e.context,u=s.gl,l=n.fbo;if(l){var c=e.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,l.colorAttachment.get());var f=function(e,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u,l,c,f=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),f),u_image:0,u_latrange:(u=n.tileID,l=Math.pow(2,u.canonical.z),c=u.canonical.y,[new t.MercatorCoordinate(0,c/l).toLngLat().lat,new t.MercatorCoordinate(0,(c+1)/l).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}}(e,n,r);c.draw(s,u.TRIANGLES,i,o,a,sn.disabled,f,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},rt=function(e,n,r,i,o,a){var s,u,l,c,f=e.context,p=f.gl,h=n.dem;if(h&&h.data){var d=h.dim,g=h.stride,y=h.getPixels();if(f.activeTexture.set(p.TEXTURE1),f.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(g),n.demTexture){var A=n.demTexture;A.update(y,{premultiply:!1}),A.bind(p.NEAREST,p.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(f,y,p.RGBA,{premultiply:!1}),n.demTexture.bind(p.NEAREST,p.CLAMP_TO_EDGE);f.activeTexture.set(p.TEXTURE0);var v=n.fbo;if(!v){var m=new t.Texture(f,{width:d,height:d,data:null},p.RGBA);m.bind(p.LINEAR,p.CLAMP_TO_EDGE),(v=n.fbo=f.createFramebuffer(d,d,!0)).colorAttachment.set(m.texture)}f.bindFramebuffer.set(v.framebuffer),f.viewport.set([0,0,d,d]),e.useProgram("hillshadePrepare").draw(f,p.TRIANGLES,i,o,a,sn.disabled,(s=n.tileID,l=(u=h).stride,c=t.create(),t.ortho(c,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(c,c,[0,-t.EXTENT,0]),{u_matrix:c,u_image:1,u_dimension:[l,l],u_zoom:s.overscaledZ,u_unpack:u.getUnpackVector()}),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}},it=function(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),f=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-f)>Math.abs(e.tileID.overscaledZ-f),h=p&&e.refreshedUponExpiration?1:t.clamp(p?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}},ot=function(t,e,n,r){st(t,0,e+n/2,t.transform.width,n,r)},at=function(t,e,n,r){st(t,e-n/2,0,n,t.transform.height,r)},st=function(e,n,r,i,o,a){var s=e.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)},ut=function(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),u=rn.disabled,l=on.disabled,c=e.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,u,l,c,sn.disabled,Rr(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var f=n.getTileByID(r.key).latestRawTileData,p=Math.floor((f&&f.byteLength||0)/1024),h=n.getTile(r).tileSize,d=512/Math.min(h,512)*(r.overscaledZ/e.transform.zoom)*.5,g=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(g+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,g+" "+p+"kb"),s.draw(i,o.TRIANGLES,u,l,an.alphaBlended,sn.disabled,Rr(a,t.Color.transparent,d),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)},lt=function(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)},ct=function(e,n,r){var i=r.maxSpeed,o=r.linearity,a=r.deceleration,s=t.clamp(e*o/(n/1e3),-i,i),u=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}},ft=function(t,e){for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n},pt=function(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]},ht=function(t,e){return Math.log(t/e)/Math.LN2},dt=function(t,e){return 180*t.angleWith(e)/Math.PI},gt=function(t){return Math.abs(t.y)>Math.abs(t.x)},yt=function(t){return t*(2-t)},At=function(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta},vt=function(t){t.parentNode&&t.parentNode.removeChild(t)},mt=function(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e},_t=function(t,e,n){var r=t.classList;for(var i in fo)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)},bt=function(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?xt(e,r,u/5280,t._getUIString("ScaleControl.Miles")):xt(e,r,u,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?xt(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?xt(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):xt(e,r,s,t._getUIString("ScaleControl.Meters"))},xt=function(t,e,n,r){var i,o,a,s,u,l=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:(s=a,u=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10)),Math.round(s*u)/u)));t.style.width=e*(l/n)+"px",t.innerHTML=l+"&nbsp;"+r},wt=t.createCommonjsModule((function(t){var e=function(t){return!n(t)},n=function(t){var n;return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[n=t&&t.failIfMajorPerformanceCaveat]&&(r[n]=function(t){var n,r,i,o=(n=t,r=document.createElement("canvas"),(i=Object.create(e.webGLContextAttributes)).failIfMajorPerformanceCaveat=n,r.probablySupportsContext?r.probablySupportsContext("webgl",i)||r.probablySupportsContext("experimental-webgl",i):r.supportsContext?r.supportsContext("webgl",i)||r.supportsContext("experimental-webgl",i):r.getContext("webgl",i)||r.getContext("experimental-webgl",i));if(!o)return!1;var a=o.createShader(o.VERTEX_SHADER);return!(!a||o.isContextLost())&&(o.shaderSource(a,"void main() {}"),o.compileShader(a),!0===o.getShaderParameter(a,o.COMPILE_STATUS))}(n)),r[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support"};t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=n);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),Et={create:function(e,n,r){var i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},St=t.window.document&&t.window.document.documentElement.style,Pt=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Et.disableDrag=function(){St&&Pt&&(e=St[Pt],St[Pt]="none")},Et.enableDrag=function(){St&&Pt&&(St[Pt]=e)};var kt=n(["transform","WebkitTransform"]);Et.setTransform=function(t,e){t.style[kt]=e};var Ct=!1;try{var Tt=Object.defineProperty({},"passive",{get:function(){Ct=!0}});t.window.addEventListener("test",Tt,Tt),t.window.removeEventListener("test",Tt,Tt)}catch(t){Ct=!1}Et.addEventListener=function(t,e,n,r){void 0===r&&(r={}),t.addEventListener(e,n,"passive"in r&&Ct?r:r.capture)},Et.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),t.removeEventListener(e,n,"passive"in r&&Ct?r:r.capture)};var It=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",It,!0)};Et.suppressClick=function(){t.window.addEventListener("click",It,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",It,!0)}),0)},Et.mousePos=function(e,n){var r=e.getBoundingClientRect();return new t.Point(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},Et.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o=0;o<n.length;o++)i.push(new t.Point(n[o].clientX-r.left-e.clientLeft,n[o].clientY-r.top-e.clientTop));return i},Et.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},Et.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var Mt,Ot,Lt=(Mt=t.Evented,Ot=function(){Mt.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0},Mt&&(Ot.__proto__=Mt),(Ot.prototype=Object.create(Mt&&Mt.prototype)).constructor=Ot,Ot.prototype.isLoaded=function(){return this.loaded},Ot.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},Ot.prototype.getImage=function(t){return this.images[t]},Ot.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},Ot.prototype._validate=function(e,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),r=!1),r},Ot.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},Ot.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},Ot.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},Ot.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},Ot.prototype.listImages=function(){return Object.keys(this.images)},Ot.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},Ot.prototype._notify=function(e,n){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},Ot.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},Ot.prototype.getPattern=function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},Ot.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},Ot.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,f=this.images[s].data,p=f.width,h=f.height;t.RGBAImage.copy(f,a,{x:0,y:0},{x:l,y:c},{width:p,height:h}),t.RGBAImage.copy(f,a,{x:0,y:h-1},{x:l,y:c-1},{width:p,height:1}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:l,y:c+h},{width:p,height:1}),t.RGBAImage.copy(f,a,{x:p-1,y:0},{x:l-1,y:c},{width:1,height:h}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:l+p,y:c},{width:1,height:h})}this.dirty=!0},Ot.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Ot.prototype.dispatchRenderCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var o=this.images[i];r(o)&&this.updateImage(i,o)}}},Ot),Rt=i,Dt=i,Nt=1e20;i.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?Nt:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?Nt:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(o(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),o(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},Rt.default=Dt;var Ft=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};Ft.prototype.setURL=function(t){this.url=t},Ft.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)i.push({stack:o,id:s[a]});t.asyncAll(i,(function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[i];if(void 0===a){if(a=r._tinySDF(o,n,i))return o.glyphs[i]=a,void e(null,{stack:n,id:i,glyph:a});var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:n,id:i,glyph:a});else{var u=o.requests[s];u||(u=o.requests[s]=[],Ft.loadGlyphRange(n,s,r.url,r.requestManager,(function(t,e){if(e){for(var n in e)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);o.ranges[s]=!0}for(var i=0,a=u;i<a.length;i+=1)(0,a[i])(t,e);delete o.requests[s]}))),u.push((function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})}))}}else e(null,{stack:n,id:i,glyph:a})}),(function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}}))},Ft.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},Ft.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new Ft.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ft.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,(function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}}))},Ft.TinySDF=Rt;var jt=function(){this.specification=t.styleSpec.light.position};jt.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},jt.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var zt,Bt,Ut=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new jt,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),Vt=(zt=t.Evented,Bt=function(e){zt.call(this),this._transitionable=new t.Transitionable(Ut),this.setLight(e),this._transitioning=this._transitionable.untransitioned()},zt&&(Bt.__proto__=zt),(Bt.prototype=Object.create(zt&&zt.prototype)).constructor=Bt,Bt.prototype.getLight=function(){return this._transitionable.serialize()},Bt.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),i):this._transitionable.setValue(r,i)}},Bt.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},Bt.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Bt.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},Bt.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},Bt),Gt=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Gt.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},Gt.prototype.getDashRanges=function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var l=t[u];r.push({left:i=s*n,right:o=(s+=l)*n,isDash:a=!a,zeroLength:0===l})}return r},Gt.prototype.addRoundDash=function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),f=Math.min(l,c),p=void 0,h=i/n*(r+1);if(s.isDash){var d=r-Math.abs(h);p=Math.sqrt(f*f+d*d)}else p=r-Math.sqrt(f*f+h*h);this.data[o+u]=Math.max(0,Math.min(255,p+128))}},Gt.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}var i=t[0],o=t[t.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],l=0;l<this.width;l++){l/u.right>1&&(u=t[++s]);var c=Math.abs(l-u.left),f=Math.abs(l-u.right),p=Math.min(c,f);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?p:-p)+128))}},Gt.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(e,this.width,s);n?this.addRoundDash(u,s,r):this.addRegularDash(u)}var l={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,l},Gt.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var qt=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new e.Actor(i[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};qt.prototype.broadcast=function(e,n,r){t.asyncAll(this.actors,(function(t,r){t.send(e,n,r)}),r=r||function(){})},qt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},qt.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},qt.Actor=t.Actor;var Wt=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};Wt.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},Wt.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var Ht,Xt,Zt,Yt,Qt,Kt,Jt,$t,te,ee,ne,re,ie,oe,ae=(ie=t.Evented,oe=function(e,n,r,i){if(ie.call(this),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)},ie&&(oe.__proto__=ie),(oe.prototype=Object.create(ie&&ie.prototype)).constructor=oe,oe.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=s(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Wt(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},oe.prototype.loaded=function(){return this._loaded},oe.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},oe.prototype.onAdd=function(t){this.map=t,this.load()},oe.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},oe.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},oe.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},oe.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},oe.prototype.serialize=function(){return t.extend({},this._options)},oe.prototype.loadTile=function(e,n){var r=function(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))},i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",o,r.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",o,r.bind(this)))},oe.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},oe.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},oe.prototype.hasTransition=function(){return!1},oe),se=(ne=t.Evented,re=function(e,n,r,i){ne.call(this),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))},ne&&(re.__proto__=ne),(re.prototype=Object.create(ne&&ne.prototype)).constructor=re,re.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=s(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Wt(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},re.prototype.loaded=function(){return this._loaded},re.prototype.onAdd=function(t){this.map=t,this.load()},re.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},re.prototype.serialize=function(){return t.extend({},this._options)},re.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},re.prototype.loadTile=function(e,n){var r=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),n(null)}}))},re.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},re.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},re.prototype.hasTransition=function(){return!1},re),ue=(ee=function(e,n,r,i){te.call(this,e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"},(te=se)&&(ee.__proto__=te),(ee.prototype=Object.create(te&&te.prototype)).constructor=ee,ee.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},ee.prototype.loadTile=function(e,n){var r=function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))},i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},ee.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},ee.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},ee),le=(Jt=t.Evented,$t=function(e,n,r,i){Jt.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;var o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(n.clusterRadius||50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)},Jt&&($t.__proto__=Jt),($t.prototype=Object.create(Jt&&Jt.prototype)).constructor=$t,$t.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}}))},$t.prototype.onAdd=function(t){this.map=t,this.load()},$t.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}})),this},$t.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},$t.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},$t.prototype.getClusterLeaves=function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this},$t.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send(this.type+".loadData",r,(function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),e(t))}))},$t.prototype.loaded=function(){return this._loaded},$t.prototype.loadTile=function(e,n){var r=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))}))},$t.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},$t.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},$t.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},$t.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},$t.prototype.hasTransition=function(){return!1},$t),ce=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),fe=(Qt=t.Evented,Kt=function(t,e,n,r){Qt.call(this),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e},Qt&&(Kt.__proto__=Qt),(Kt.prototype=Object.create(Qt&&Qt.prototype)).constructor=Kt,Kt.prototype.load=function(e,n){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(i,o){r._loaded=!0,i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())}))},Kt.prototype.loaded=function(){return this._loaded},Kt.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},Kt.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Kt.prototype.onAdd=function(t){this.map=t,this.load()},Kt.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var l=Math.max(i-n,o-r),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),f=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((n+i)/2*f),Math.floor((r+o)/2*f))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},Kt.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,ce.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},Kt.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},Kt.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Kt.prototype.hasTransition=function(){return!1},Kt),pe=(Yt=function(t,e,n,r){Zt.call(this,t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e},(Zt=fe)&&(Yt.__proto__=Zt),(Yt.prototype=Object.create(Zt&&Zt.prototype)).constructor=Yt,Yt.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(i[r],t.ResourceType.Source).url);t.getVideo(this.urls,(function(n,r){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},Yt.prototype.pause=function(){this.video&&this.video.pause()},Yt.prototype.play=function(){this.video&&this.video.play()},Yt.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},Yt.prototype.getVideo=function(){return this.video},Yt.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Yt.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,ce.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},Yt.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Yt.prototype.hasTransition=function(){return this.video&&!this.video.paused},Yt),he=(Xt=function(e,n,r,i){Ht.call(this,e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate},(Ht=fe)&&(Xt.__proto__=Ht),(Xt.prototype=Object.create(Ht&&Ht.prototype)).constructor=Xt,Xt.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Xt.prototype.getCanvas=function(){return this.canvas},Xt.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},Xt.prototype.onRemove=function(){this.pause()},Xt.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,ce.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},Xt.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Xt.prototype.hasTransition=function(){return this._playing},Xt.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},Xt),de={vector:ae,raster:se,"raster-dem":ue,geojson:le,video:pe,image:fe,canvas:he},ge=function(t,e){this.max=t,this.onRemove=e,this.reset()};ge.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},ge.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){r.remove(t,o)}),n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},ge.prototype.has=function(t){return t.wrapped().key in this.data},ge.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},ge.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},ge.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},ge.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},ge.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},ge.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},ge.prototype.filter=function(t){var e=[];for(var n in this.data)for(var r=0,i=this.data[n];r<i.length;r+=1){var o=i[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var ye=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};ye.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ye.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},ye.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ae={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ve=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};ve.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ve.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},ve.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},ve.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[Ae[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},ve.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var me=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};me.prototype.get=function(){return this.current},me.prototype.set=function(t){},me.prototype.getDefault=function(){return this.default},me.prototype.setDefault=function(){this.set(this.default)};var _e,be,xe=function(e){var n=function(){e.apply(this,arguments)};return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(me),we=(be=function(){_e.apply(this,arguments)},(_e=me)&&(be.__proto__=_e),(be.prototype=Object.create(_e&&_e.prototype)).constructor=be,be.prototype.getDefault=function(){return 1},be.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},be),Ee=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(me),Se=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(me),Pe=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(me),ke=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(me),Ce=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(me),Te=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(me),Ie=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(me),Me=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(me),Oe=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(me),Le=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(me),Re=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(me),De=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(me),Ne=function(e){var n=function(){e.apply(this,arguments)};return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(me),Fe=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(me),je=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(me),ze=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(me),Be=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(me),Ue=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(me),Ve=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(me),Ge=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(me),qe=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(me),We=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(me),He=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(me),Xe=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(me),Ze=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(me),Ye=function(t){var e=function(e){t.call(this,e),this.vao=e.extVertexArrayObject};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(me),Qe=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(me),Ke=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(me),Je=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(me),$e=function(t){var e=function(e,n){t.call(this,e),this.context=e,this.parent=n};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(me),tn=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}($e),en=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}($e),nn=function(t,e,n,r){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new tn(t,i),r&&(this.depthAttachment=new en(t,i))};nn.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var rn=function(t,e,n){this.func=t,this.mask=e,this.range=n};rn.ReadOnly=!1,rn.ReadWrite=!0,rn.disabled=new rn(519,rn.ReadOnly,[0,1]);var on=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};on.disabled=new on({func:519,mask:0},0,0,7680,7680,7680);var an=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};an.disabled=new an(an.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),an.unblended=new an(an.Replace,t.Color.transparent,[!0,!0,!0,!0]),an.alphaBlended=new an([1,771],t.Color.transparent,[!0,!0,!0,!0]);var sn=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};sn.disabled=new sn(!1,1029,2305),sn.backCCW=new sn(!0,1029,2305);var un=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new xe(this),this.clearDepth=new we(this),this.clearStencil=new Ee(this),this.colorMask=new Se(this),this.depthMask=new Pe(this),this.stencilMask=new ke(this),this.stencilFunc=new Ce(this),this.stencilOp=new Te(this),this.stencilTest=new Ie(this),this.depthRange=new Me(this),this.depthTest=new Oe(this),this.depthFunc=new Le(this),this.blend=new Re(this),this.blendFunc=new De(this),this.blendColor=new Ne(this),this.blendEquation=new Fe(this),this.cullFace=new je(this),this.cullFaceSide=new ze(this),this.frontFace=new Be(this),this.program=new Ue(this),this.activeTexture=new Ve(this),this.viewport=new Ge(this),this.bindFramebuffer=new qe(this),this.bindRenderbuffer=new We(this),this.bindTexture=new He(this),this.bindVertexBuffer=new Xe(this),this.bindElementBuffer=new Ze(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ye(this),this.pixelStoreUnpack=new Qe(this),this.pixelStoreUnpackPremultiplyAlpha=new Ke(this),this.pixelStoreUnpackFlipY=new Je(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};un.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},un.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},un.prototype.createIndexBuffer=function(t,e){return new ye(this,t,e)},un.prototype.createVertexBuffer=function(t,e,n){return new ve(this,t,e,n)},un.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},un.prototype.createFramebuffer=function(t,e,n){return new nn(this,t,e,n)},un.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},un.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},un.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},un.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},un.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,an.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},un.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ln,cn,fn=(ln=t.Evented,cn=function(e,n,r){var i=this;ln.call(this),this.id=e,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))})),this.on("error",(function(){i._sourceErrored=!0})),this._source=function(e,n,r,i){var o=new de[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(e,n,r,this),this._tiles={},this._cache=new ge(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState},ln&&(cn.__proto__=ln),(cn.prototype=Object.create(ln&&ln.prototype)).constructor=cn,cn.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},cn.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},cn.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},cn.prototype.getSource=function(){return this._source},cn.prototype.pause=function(){this._paused=!0},cn.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},cn.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},cn.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},cn.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},cn.prototype.serialize=function(){return this._source.serialize()},cn.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},cn.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(f).map((function(t){return t.key}))},cn.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,e)&&r.push(this._tiles[i]);return e?r.sort((function(e,r){var i=e.tileID,o=r.tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):r.map((function(t){return t.tileID})).sort(f).map((function(t){return t.key}))},cn.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},cn.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},cn.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},cn.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},cn.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},cn.prototype._backfillDEM=function(t){for(var e=function(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))},n=this.getRenderableIds(),r=0;r<n.length;r++){var i=n[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var o=this.getTileByID(i);e(t,o),e(o,t)}}},cn.prototype.getTile=function(t){return this.getTileByID(t.key)},cn.prototype.getTileByID=function(t){return this._tiles[t]},cn.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},cn.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}},cn.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},cn.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},cn.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},cn.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return n._source.hasTile(t)})))):r=[];var i=e.coveringZoomLevel(this._source),o=Math.max(i-cn.maxOverzooming,this._source.minzoom),a=Math.max(i+cn.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(r,i);if(p(this._source.type)){for(var u={},l={},c=0,f=Object.keys(s);c<f.length;c+=1){var h=f[c],d=s[h],g=this._tiles[h];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var y=this.findLoadedParent(d,o);y&&(this._addTile(y.tileID),u[y.tileID.key]=y.tileID),l[h]=d}}for(var A in this._retainLoadedChildren(l,i,a,s),u)s[A]||(this._coveredTiles[A]=!0,s[A]=u[A])}for(var v in s)this._tiles[v].clearFadeHold();for(var m=0,_=t.keysDifference(this._tiles,s);m<_.length;m+=1){var b=_[m],x=this._tiles[b];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(b)}this._updateLoadedParentTileCache()}},cn.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},cn.prototype._updateRetainedTiles=function(t,e){for(var n={},r={},i=Math.max(e-cn.maxOverzooming,this._source.minzoom),o=Math.max(e+cn.maxUnderzooming,this._source.minzoom),a={},s=0,u=t;s<u.length;s+=1){var l=u[s],c=this._addTile(l);n[l.key]=l,c.hasData()||e<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,e,o,n);for(var f=0,p=t;f<p.length;f+=1){var h=p[f],d=this._tiles[h.key];if(!d.hasData()){if(e+1>this._source.maxzoom){var g=h.children(this._source.maxzoom)[0],y=this.getTile(g);if(y&&y.hasData()){n[g.key]=g;continue}}else{var A=h.children(this._source.maxzoom);if(n[A[0].key]&&n[A[1].key]&&n[A[2].key]&&n[A[3].key])continue}for(var v=d.wasRequested(),m=h.overscaledZ-1;m>=i;--m){var _=h.scaledTo(m);if(r[_.key])break;if(r[_.key]=!0,!(d=this.getTile(_))&&v&&(d=this._addTile(_)),d&&(n[_.key]=_,v=d.wasRequested(),d.hasData()))break}}}return n},cn.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},cn.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},cn.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),r))},cn.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},cn.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},cn.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,u=e.map((function(t){return a.pointCoordinate(t)})),l=s.map((function(t){return a.pointCoordinate(t)})),c=this.getIds(),f=1/0,p=1/0,h=-1/0,d=-1/0,g=0,y=l;g<y.length;g+=1){var A=y[g];f=Math.min(f,A.x),p=Math.min(p,A.y),h=Math.max(h,A.x),d=Math.max(d,A.y)}for(var v=function(e){var r=i._tiles[c[e]];if(!r.holdingForFade()){var s=r.tileID,g=Math.pow(2,a.zoom-r.tileID.overscaledZ),y=n*r.queryPadding*t.EXTENT/r.tileSize/g,A=[s.getTilePoint(new t.MercatorCoordinate(f,p)),s.getTilePoint(new t.MercatorCoordinate(h,d))];if(A[0].x-y<t.EXTENT&&A[0].y-y<t.EXTENT&&A[1].x+y>=0&&A[1].y+y>=0){var v=u.map((function(t){return s.getTilePoint(t)})),m=l.map((function(t){return s.getTilePoint(t)}));o.push({tile:r,tileID:s,queryGeometry:v,cameraQueryGeometry:m,scale:g})}}},m=0;m<c.length;m++)v(m);return o},cn.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},cn.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(p(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},cn.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},cn.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},cn.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},cn.prototype.setDependencies=function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)},cn.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))},cn);fn.maxOverzooming=10,fn.maxUnderzooming=3;var pn="mapboxgl_preloaded_worker_pool",hn=function(){this.active={}};hn.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<hn.workerCount;)this.workers.push(new h);return this.active[t]=!0,this.workers.slice()},hn.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},hn.prototype.isPreloaded=function(){return!!this.active[pn]},hn.prototype.numActive=function(){return Object.keys(this.active).length};var dn,gn=Math.floor(t.browser.hardwareConcurrency/2);hn.workerCount=Math.max(Math.min(gn,6),1);var yn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},An=function(t,e){this.reset(t,e)};An.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},An.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,r=this._distances[n],i=e*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,a=this._distances[o],s=r-a,u=s>0?(i-a)/s:0;return this.points[o].mult(1-u).add(this.points[n].mult(u))};var vn=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};vn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},vn.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},vn.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},vn.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},vn.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},vn.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],f=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-f,y1:c-f,x2:l+f,y2:c+f})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},vn.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?l.length>0:l},vn.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},vn.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},vn.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},vn.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,f=0,p=l;f<p.length;f+=1){var h=p[f];if(!u.box[h]){u.box[h]=!0;var d=4*h;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[h]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[h],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var g=this.circleCells[i];if(null!==g)for(var y=this.circles,A=0,v=g;A<v.length;A+=1){var m=v[A];if(!u.circle[m]){u.circle[m]=!0;var _=3*m;if(this._circleAndRectCollide(y[_],y[_+1],y[_+2],t,e,n,r)&&(!s||s(this.circleKeys[m]))){if(a.hitTest)return o.push(!0),!0;var b=y[_],x=y[_+1],w=y[_+2];o.push({key:this.circleKeys[m],x1:b-w,y1:x-w,x2:b+w,y2:x+w})}}}},vn.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var f=this.bboxes,p=0,h=c;p<h.length;p+=1){var d=h[p];if(!l.box[d]){l.box[d]=!0;var g=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[g+0],f[g+1],f[g+2],f[g+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var y=this.circleCells[i];if(null!==y)for(var A=this.circles,v=0,m=y;v<m.length;v+=1){var _=m[v];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(this._circlesCollide(A[b],A[b+1],A[b+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}},vn.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),p=u;p<=c;p++)for(var h=l;h<=f;h++)if(i.call(this,t,e,n,r,this.xCellCount*h+p,o,a,s))return},vn.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},vn.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},vn.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},vn.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var f=u-s,p=c-l;return f*f+p*p<=n*n};var mn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),_n=function(t,e,n){void 0===e&&(e=new vn(t.width+200,t.height+200,25)),void 0===n&&(n=new vn(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};_n.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},_n.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,l,c,f,p,h){var d=[],g=new t.Point(n.anchorX,n.anchorY),y=P(g,a),A=k(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),v=(c?o/A:o*A)/t.ONE_EM,m=P(g,s).point,_=I(v,i,n.lineOffsetX*v,n.lineOffsetY*v,!1,m,g,n,r,s,{}),b=!1,x=!1,w=!0;if(_){for(var E=.5*p*A+h,S=new t.Point(-100,-100),C=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),T=new An,M=_.first,O=_.last,L=[],R=M.path.length-1;R>=1;R--)L.push(M.path[R]);for(var D=1;D<O.path.length;D++)L.push(O.path[D]);var N=2.5*E;if(u){var F=L.map((function(t){return P(t,u)}));L=F.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:F.map((function(t){return t.point}))}var j=[];if(L.length>0){for(var z=L[0].clone(),B=L[0].clone(),U=1;U<L.length;U++)z.x=Math.min(z.x,L[U].x),z.y=Math.min(z.y,L[U].y),B.x=Math.max(B.x,L[U].x),B.y=Math.max(B.y,L[U].y);j=z.x>=S.x&&B.x<=C.x&&z.y>=S.y&&B.y<=C.y?[L]:B.x<S.x||z.x>C.x||B.y<S.y||z.y>C.y?[]:t.clipLine([L],S.x,S.y,C.x,C.y)}for(var V=0,G=j;V<G.length;V+=1){var q;T.reset(G[V],.25*E),q=T.length<=.5*E?1:Math.ceil(T.paddedLength/N)+1;for(var W=0;W<q;W++){var H=W/Math.max(q-1,1),X=T.lerp(H),Z=X.x+100,Y=X.y+100;d.push(Z,Y,E,0);var Q=Z-E,K=Y-E,J=Z+E,$=Y+E;if(w=w&&this.isOffscreen(Q,K,J,$),x=x||this.isInsideGrid(Q,K,J,$),!e&&this.grid.hitTestCircle(Z,Y,E,f)&&(b=!0,!l))return{circles:[],offscreen:!1,collisionDetected:b}}}}return{circles:!l&&b||!x?[]:d,offscreen:w,collisionDetected:b}},_n.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.Point(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var f={},p={},h=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));h<d.length;h+=1){var g=d[h],y=g.key;if(void 0===f[y.bucketInstanceId]&&(f[y.bucketInstanceId]={}),!f[y.bucketInstanceId][y.featureIndex]){var A=[new t.Point(g.x1,g.y1),new t.Point(g.x2,g.y1),new t.Point(g.x2,g.y2),new t.Point(g.x1,g.y2)];t.polygonIntersectsPolygon(n,A)&&(f[y.bucketInstanceId][y.featureIndex]=!0,void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]=[]),p[y.bucketInstanceId].push(y.featureIndex))}}return p},_n.prototype.insertCollisionBox=function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])},_n.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},_n.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return N(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},_n.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},_n.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary},_n.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var bn=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};bn.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var xn=function(t,e,n,r,i){this.text=new bn(t?t.text:null,e,n,i),this.icon=new bn(t?t.icon:null,e,r,i)};xn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var wn=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},En=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},Sn=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},Pn=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};Pn.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var kn=function(t,e,n,r){this.transform=t.clone(),this.collisionIndex=new _n(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Pn(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};kn.prototype.getBucketParts=function(e,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,f=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===u.get("text-pitch-alignment"),h="map"===u.get("text-rotation-alignment"),d=F(r,1,this.transform.zoom),g=E(f,p,h,this.transform,d),y=null;if(p){var A=S(f,p,h,this.transform,d);y=t.multiply([],this.transform.labelPlaneMatrix,A)}this.retainedQueryData[o.bucketInstanceId]=new Sn(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var v={bucket:o,layout:u,posMatrix:f,textLabelPlaneMatrix:g,labelToScreenMatrix:y,scale:l,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(var m=0,_=o.sortKeyRanges;m<_.length;m+=1){var b=_[m];e.push({sortKey:b.sortKey,symbolInstanceStart:b.symbolInstanceStart,symbolInstanceEnd:b.symbolInstanceEnd,parameters:v})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:v})}},kn.prototype.attemptAnchorPlacement=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d){var g,y=[f.textOffset0,f.textOffset1],A=j(t,n,r,y,i),v=this.collisionIndex.placeCollisionBox(z(e,A.x,A.y,o,a,this.transform.angle),c,s,u,l.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(z(d,A.x,A.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)return v.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID].text&&(g=this.prevPlacement.variableOffsets[f.crossTileID].anchor),this.variableOffsets[f.crossTileID]={textOffset:y,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:g},this.markUsedJustification(p,t,f,h),p.allowVerticalPlacement&&(this.markUsedOrientation(p,h,f),this.placedOrientations[f.crossTileID]=h),{shift:A,placedGlyphBoxes:v}):void 0},kn.prototype.placeLayerBucketPart=function(e,n,r){var i=this,o=e.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,l=o.textLabelPlaneMatrix,c=o.labelToScreenMatrix,f=o.textPixelRatio,p=o.holdingForFade,h=o.collisionBoxArray,d=o.partiallyEvaluatedTextSize,g=o.collisionGroup,y=s.get("text-optional"),A=s.get("icon-optional"),v=s.get("text-allow-overlap"),m=s.get("icon-allow-overlap"),_="map"===s.get("text-rotation-alignment"),b="map"===s.get("text-pitch-alignment"),x="none"!==s.get("icon-text-fit"),w="viewport-y"===s.get("symbol-z-order"),E=v&&(m||!a.hasIconData()||A),S=m&&(v||!a.hasTextData()||y);!a.collisionArrays&&h&&a.deserializeCollisionBoxes(h);var P=function(e,o){if(!n[e.crossTileID])if(p)i.placements[e.crossTileID]=new wn(!1,!1,!1);else{var h,w=!1,P=!1,k=!0,C=null,T={box:null,offscreen:null},I={box:null,offscreen:null},M=null,O=null,L=0,R=0,D=0;o.textFeatureIndex?L=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),o.verticalTextFeatureIndex&&(R=o.verticalTextFeatureIndex);var N=o.textBox;if(N){var F=function(n){var r=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[e.crossTileID];o&&(i.placedOrientations[e.crossTileID]=o,i.markUsedOrientation(a,r=o,e))}return r},j=function(n,r){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var i=0,s=a.writingModes;i<s.length&&(s[i]===t.WritingMode.vertical?(T=r(),I=T):T=n(),!(T&&T.box&&T.box.length));i+=1);else T=n()};if(s.get("text-variable-anchor")){var B=s.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[e.crossTileID]){var U=i.prevPlacement.variableOffsets[e.crossTileID];B.indexOf(U.anchor)>0&&(B=B.filter((function(t){return t!==U.anchor}))).unshift(U.anchor)}var V=function(t,n,r){for(var o=t.x2-t.x1,s=t.y2-t.y1,l=e.textBoxScale,c=x&&!m?n:null,p={box:[],offscreen:!1},h=v?2*B.length:B.length,d=0;d<h;++d){var y=i.attemptAnchorPlacement(B[d%B.length],t,o,s,l,_,b,f,u,g,d>=B.length,e,a,r,c);if(y&&(p=y.placedGlyphBoxes)&&p.box&&p.box.length){w=!0,C=y.shift;break}}return p};j((function(){return V(N,o.iconBox,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(T&&T.box&&T.box.length)&&e.numVerticalGlyphVertices>0&&n?V(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),T&&(w=T.box,k=T.offscreen);var G=F(T&&T.box);if(!w&&i.prevPlacement){var q=i.prevPlacement.variableOffsets[e.crossTileID];q&&(i.variableOffsets[e.crossTileID]=q,i.markUsedJustification(a,q.anchor,e,G))}}else{var W=function(t,n){var r=i.collisionIndex.placeCollisionBox(t,v,f,u,g.predicate);return r&&r.box&&r.box.length&&(i.markUsedOrientation(a,n,e),i.placedOrientations[e.crossTileID]=n),r};j((function(){return W(N,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?W(n,t.WritingMode.vertical):{box:null,offscreen:null}})),F(T&&T.box&&T.box.length)}}if(w=(h=T)&&h.box&&h.box.length>0,k=h&&h.offscreen,e.useRuntimeCollisionCircles){var H=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),X=t.evaluateSizeForFeature(a.textSizeData,d,H),Z=s.get("text-padding");M=i.collisionIndex.placeCollisionCircles(v,H,a.lineVertexArray,a.glyphOffsetArray,X,u,l,c,r,b,g.predicate,e.collisionCircleDiameter,Z),w=v||M.circles.length>0&&!M.collisionDetected,k=k&&M.offscreen}if(o.iconFeatureIndex&&(D=o.iconFeatureIndex),o.iconBox){var Y=function(t){var e=x&&C?z(t,C.x,C.y,_,b,i.transform.angle):t;return i.collisionIndex.placeCollisionBox(e,m,f,u,g.predicate)};P=I&&I.box&&I.box.length&&o.verticalIconBox?(O=Y(o.verticalIconBox)).box.length>0:(O=Y(o.iconBox)).box.length>0,k=k&&O.offscreen}var Q=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,K=A||0===e.numIconVertices;if(Q||K?K?Q||(P=P&&w):w=P&&w:P=w=P&&w,w&&h&&h.box&&i.collisionIndex.insertCollisionBox(h.box,s.get("text-ignore-placement"),a.bucketInstanceId,I&&I.box&&R?R:L,g.ID),P&&O&&i.collisionIndex.insertCollisionBox(O.box,s.get("icon-ignore-placement"),a.bucketInstanceId,D,g.ID),M&&(w&&i.collisionIndex.insertCollisionCircles(M.circles,s.get("text-ignore-placement"),a.bucketInstanceId,L,g.ID),r)){var J=a.bucketInstanceId,$=i.collisionCircleArrays[J];void 0===$&&($=i.collisionCircleArrays[J]=new En);for(var tt=0;tt<M.circles.length;tt+=4)$.circles.push(M.circles[tt+0]),$.circles.push(M.circles[tt+1]),$.circles.push(M.circles[tt+2]),$.circles.push(M.collisionDetected?1:0)}i.placements[e.crossTileID]=new wn(w||E,P||S,k||a.justReloaded),n[e.crossTileID]=!0}};if(w)for(var k=a.getSortedSymbolIndexes(this.transform.angle),C=k.length-1;C>=0;--C){var T=k[C];P(a.symbolInstances.get(T),a.collisionArrays[T])}else for(var I=e.symbolInstanceStart;I<e.symbolInstanceEnd;I++)P(a.symbolInstances.get(I),a.collisionArrays[I]);if(r&&a.bucketInstanceId in this.collisionCircleArrays){var M=this.collisionCircleArrays[a.bucketInstanceId];t.invert(M.invProjMatrix,u),M.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},kn.prototype.markUsedJustification=function(e,n,r,i){var o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:r.crossTileID)}},kn.prototype.markUsedOrientation=function(e,n,r){for(var i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)},kn.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=i[s];l?(this.opacities[s]=new xn(l,r,u.text,u.icon),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new xn(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var c in i){var f=i[c];if(!this.opacities[c]){var p=new xn(f,r,!1,!1);p.isHidden()||(this.opacities[c]=p,n=n||f.text.placed||f.icon.placed)}}for(var h in o)this.variableOffsets[h]||!this.opacities[h]||this.opacities[h].isHidden()||(this.variableOffsets[h]=o[h]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},kn.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},kn.prototype.updateBucketOpacities=function(e,n,r){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new xn(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),f="map"===o.get("text-pitch-alignment"),p="none"!==o.get("icon-text-fit"),h=new xn(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var d=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)},g=function(r){var o=e.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,g=o.crossTileID,y=i.opacities[g];n[g]?y=a:y||(i.opacities[g]=y=h),n[g]=!0;var A=o.numIconVertices>0,v=i.placedOrientations[o.crossTileID],m=v===t.WritingMode.vertical,_=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(s>0||u>0){var b=U(y.text);d(e.text,s,m?Dn:b),d(e.text,u,_?Dn:b);var x=y.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=x||m?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=x||_?1:0);var w=i.variableOffsets[o.crossTileID];w&&i.markUsedJustification(e,w.anchor,o,v);var E=i.placedOrientations[o.crossTileID];E&&(i.markUsedJustification(e,"left",o,E),i.markUsedOrientation(e,E,o))}if(A){var S=U(y.icon),P=!(p&&o.verticalPlacedIconSymbolIndex&&m);o.placedIconSymbolIndex>=0&&(d(e.icon,o.numIconVertices,P?S:Dn),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=y.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,o.numVerticalIconVertices,P?Dn:S),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var k=e.collisionArrays[r];if(k){var C=new t.Point(0,0);if(k.textBox||k.verticalTextBox){var T=!0;if(l){var I=i.variableOffsets[g];I?(C=j(I.anchor,I.width,I.height,I.textOffset,I.textBoxScale),c&&C._rotate(f?i.transform.angle:-i.transform.angle)):T=!1}k.textBox&&B(e.textCollisionBox.collisionVertexArray,y.text.placed,!T||m,C.x,C.y),k.verticalTextBox&&B(e.textCollisionBox.collisionVertexArray,y.text.placed,!T||_,C.x,C.y)}var M=Boolean(!_&&k.verticalIconBox);k.iconBox&&B(e.iconCollisionBox.collisionVertexArray,y.icon.placed,M,p?C.x:0,p?C.y:0),k.verticalIconBox&&B(e.iconCollisionBox.collisionVertexArray,y.icon.placed,!M,p?C.x:0,p?C.y:0)}}},y=0;y<e.symbolInstances.length;y++)g(y);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var A=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=A.invProjMatrix,e.placementViewportMatrix=A.viewportMatrix,e.collisionCircleArray=A.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},kn.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},kn.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},kn.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},kn.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},kn.prototype.setStale=function(){this.stale=!0};var Cn=Math.pow(2,25),Tn=Math.pow(2,24),In=Math.pow(2,17),Mn=Math.pow(2,16),On=Math.pow(2,9),Ln=Math.pow(2,8),Rn=Math.pow(2,1),Dn=0,Nn=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Nn.prototype.continuePlacement=function(t,e,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1};var Fn=function(t,e,n,r,i,o,a){this.placement=new kn(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Fn.prototype.isDone=function(){return this._done},Fn.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Nn(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Fn.prototype.commit=function(t){return this.placement.commit(t),this.placement};var jn=512/t.EXTENT/2,zn=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};zn.prototype.getScaledCoordinates=function(e,n){var r=jn/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},zn.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Bn=function(){this.maxCrossTileID=0};Bn.prototype.generate=function(){return++this.maxCrossTileID};var Un=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Un.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},Un.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,i)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var f=e.symbolInstances.get(c);f.crossTileID||(f.crossTileID=n.generate(),i[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new zn(t,e.symbolInstances,e.bucketInstanceId),!0},Un.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},Un.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var Vn=function(){this.layerIndexes={},this.crossTileIDs=new Bn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Vn.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Un);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Vn.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Gn=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},qn=t.pick(yn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Wn=t.pick(yn,["setCenter","setZoom","setBearing","setPitch"]),Hn=function(){var e={},n=t.styleSpec.$version;for(var r in t.styleSpec.$root){var i,o=t.styleSpec.$root[r];o.required&&null!=(i="version"===r?n:"array"===o.type?[]:{})&&(e[r]=i)}return e}(),Xn=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new qt(d(),this),this.imageManager=new Lt,this.imageManager.setEventedParent(this),this.glyphManager=new Ft(r._requestManager,i.localIdeographFontFamily),this.lineAtlas=new Gt(256,512),this.crossTileSymbolIndex=new Vn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var r in a.sourceCaches)a.sourceCaches[r].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}}))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)}))},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){r._request=null,r._load(e,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Hn,!1)},n.prototype._load=function(e,n){if(!n||!Gn(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=y(this.stylesheet.layers);this._order=i.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Vt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,r){var i,o,a,s=function(){if(a)r(a);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var s in i){var u=i[s],l=u.width,c=u.height,f=u.x,p=u.y,h=u.sdf,d=u.pixelRatio,g=u.stretchX,y=u.stretchY,A=u.content,v=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,v,{x:f,y:p},{x:0,y:0},{width:l,height:c}),n[s]={data:v,pixelRatio:d,sdf:h,stretchX:g,stretchY:y,content:A}}r(null,n)}},u=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,u,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,a||(a=t,i=e,s())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,u,".png"),t.ResourceType.SpriteImage),(function(t,e){c=null,a||(a=t,o=e,s())}));return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,(function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&e.push(i.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var u={};for(var l in this.sourceCaches){var c=this.sourceCaches[l];u[l]=c.used,c.used=!1}for(var f=0,p=this._order;f<p.length;f+=1){var h=this._layers[p[f]];h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}for(var d in u){var g=this.sourceCaches[d];u[d]!==g.used&&g.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Gn(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=y(e.layers);var r=function(e,n){if(!e)return[{command:yn.setStyle,args:[n]}];var r=[];try{if(!t.deepEqual(e.version,n.version))return[{command:yn.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||r.push({command:yn.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||r.push({command:yn.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||r.push({command:yn.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||r.push({command:yn.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||r.push({command:yn.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||r.push({command:yn.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||r.push({command:yn.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||r.push({command:yn.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||v(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&_(e,n,o)?r.push({command:yn.setGeoJSONSourceData,args:[o,n[o].data]}):m(o,n,r,i)):A(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach((function(t){i[t.source]?r.push({command:yn.removeLayer,args:[t.id]}):a.push(t)})),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,l,c,f=(e=e||[]).map(x),p=n.map(x),h=e.reduce(w,{}),d=n.reduce(w,{}),g=f.slice(),y=Object.create(null);for(i=0,o=0;i<f.length;i++)d.hasOwnProperty(a=f[i])?o++:(r.push({command:yn.removeLayer,args:[a]}),g.splice(g.indexOf(a,o),1));for(i=0,o=0;i<p.length;i++)g[g.length-1-i]!==(a=p[p.length-1-i])&&(h.hasOwnProperty(a)?(r.push({command:yn.removeLayer,args:[a]}),g.splice(g.lastIndexOf(a,g.length-o),1)):o++,r.push({command:yn.addLayer,args:[d[a],l=g[g.length-i]]}),g.splice(g.length-i,0,a),y[a]=!0);for(i=0;i<p.length;i++)if(s=h[a=p[i]],u=d[a],!y[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(c in b(s.layout,u.layout,r,a,null,yn.setLayoutProperty),b(s.paint,u.paint,r,a,null,yn.setPaintProperty),t.deepEqual(s.filter,u.filter)||r.push({command:yn.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:yn.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?b(s[c],u[c],r,a,c.slice(6),yn.setPaintProperty):t.deepEqual(s[c],u[c])||r.push({command:yn.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?b(s[c],u[c],r,a,c.slice(6),yn.setPaintProperty):t.deepEqual(s[c],u[c])||r.push({command:yn.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:yn.removeLayer,args:[a]}),l=g[g.lastIndexOf(a)+1],r.push({command:yn.addLayer,args:[u,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:yn.setStyle,args:[n]}]}return r}(this.serialize(),e).filter((function(t){return!(t.command in Wn)}));if(0===r.length)return!1;var i=r.filter((function(t){return!(t.command in qn)}));if(i.length>0)throw new Error("Unimplemented: "+i.map((function(t){return t.command})).join(", ")+".");return r.forEach((function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)})),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},n.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new fn(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(Gn(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone$1(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,f=l;c<f.length;c+=1)i.push(f[c])}}}i.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var p=[],h=this._order.length-1;h>=0;h--){var d=this._order[h];if(n(d))for(var g=i.length-1;g>=0;g--){var y=i[g].feature;if(r[y.layer.id]<h)break;p.push(y),i.pop()}else for(var A=0,v=t;A<v.length;A+=1){var m=v[A][d];if(m)for(var _=0,b=m;_<b.length;_+=1)p.push(b[_].feature)}}return p},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var f=[];for(var p in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[p]||f.push(l(this.sourceCaches[p],this._layers,this._serializedLayers,e,n,r));return this.placement&&f.push(function(t,e,n,r,i,o,a){for(var s={},u=o.queryRenderedSymbols(r),l=[],f=0,p=Object.keys(u).map(Number);f<p.length;f+=1)l.push(a[p[f]]);l.sort(c);for(var h=function(){var n=g[d],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in r){var a=s[o]=s[o]||[],l=r[o];l.sort((function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(var c=0,f=l;c<f.length;c+=1)a.push(f[c])}},d=0,g=l;d<g.length;d+=1)h();var y=function(e){s[e].forEach((function(r){var i=r.feature,o=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}))};for(var A in s)y(A);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.deepEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Gn(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i,o){var a=this,s=function(t,n,r,i,o){var s=a._layers[o[i]];if("symbol"===s.type){if(!r[s.source]){var l=a.sourceCaches[s.source];r[s.source]=l.getRenderableIds(!0).map((function(t){return l.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var c=a.crossTileSymbolIndex.addLayer(s,r[s.source],e.center.lng);t=t||c}u=t};void 0===o&&(o=!1);for(var u=!1,l=!1,c={},f=0,p=this._order;f<p.length;f+=1)s(u,l,c,f,p);if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Fn(e,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),l=!0),u&&this.pauseablePlacement.placement.setStale()),l||u)for(var h=0,d=this._order;h<d.length;h+=1){var g=this._layers[d[h]];"symbol"===g.type&&this.placement.updateLayerOpacities(g,c[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);Xn.getSourceType=function(t){return de[t]},Xn.setSourceType=function(t,e){de[t]=e},Xn.registerForPluginStateChange=t.registerForPluginStateChange;var Zn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Yn=V("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Qn=V("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Kn=V("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Jn=V("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),$n=V("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),tr=V("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),er=V("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),nr=V("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),rr=V("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ir=V("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),or=V("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ar=V("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),sr=V("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ur=V("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),lr=V("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),cr=V("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),fr=V("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),pr=V("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),hr=V("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),dr=V("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),gr=V("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),yr=V("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Ar=V("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),vr=V("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mr=V("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),_r=V("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),br=Object.freeze({__proto__:null,prelude:Yn,background:Qn,backgroundPattern:Kn,circle:Jn,clippingMask:$n,heatmap:tr,heatmapTexture:er,collisionBox:nr,collisionCircle:rr,debug:ir,fill:or,fillOutline:ar,fillOutlinePattern:sr,fillPattern:ur,fillExtrusion:lr,fillExtrusionPattern:cr,hillshadePrepare:fr,hillshade:pr,line:hr,lineGradient:dr,linePattern:gr,lineSDF:yr,raster:Ar,symbolIcon:vr,symbolSDF:mr,symbolTextAndIcon:_r}),xr=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};xr.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)},xr.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var f=u;f<s;f++)c.disableVertexAttribArray(f)}e.enableAttributes(c,t);for(var p=0,h=n;p<h.length;p+=1)h[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,g=n;d<g.length;d+=1){var y=g[d];y.bind(),y.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},xr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var wr=function(t,e,n,r,i,o){var a=t.gl;this.program=a.createProgram();for(var s=G(n.staticAttributes),u=r?r.getBinderAttributes():[],l=s.concat(u),c=n.staticUniforms?G(n.staticUniforms):[],f=r?r.getBinderUniforms():[],p=[],h=0,d=c.concat(f);h<d.length;h+=1){var g=d[h];p.indexOf(g)<0&&p.push(g)}var y=r?r.defines():[];o&&y.push("#define OVERDRAW_INSPECTOR;");var A=y.concat(Yn.fragmentSource,n.fragmentSource).join("\n"),v=y.concat(Yn.vertexSource,n.vertexSource).join("\n"),m=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(m,A),a.compileShader(m),a.attachShader(this.program,m);var _=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,v),a.compileShader(_),a.attachShader(this.program,_),this.attributes={};var b={};this.numAttributes=l.length;for(var x=0;x<this.numAttributes;x++)l[x]&&(a.bindAttribLocation(this.program,x,l[x]),this.attributes[l[x]]=x);a.linkProgram(this.program),a.deleteShader(_),a.deleteShader(m);for(var w=0;w<p.length;w++){var E=p[w];if(E&&!b[E]){var S=a.getUniformLocation(this.program,E);S&&(b[E]=S)}}this.fixedUniforms=i(t,b),this.binderUniforms=r?r.getUniforms(t,b):[]}}};wr.prototype.draw=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,g){var y,A=t.gl;if(!this.failedToCreate){for(var v in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);h&&h.setUniforms(t,this.binderUniforms,f,{zoom:p});for(var m=(y={},y[A.LINES]=2,y[A.TRIANGLES]=3,y[A.LINE_STRIP]=1,y)[e],_=0,b=c.get();_<b.length;_+=1){var x=b[_],w=x.vaos||(x.vaos={});(w[s]||(w[s]=new xr)).bind(t,this,u,h?h.getPaintVertexBuffers():[],l,x.vertexOffset,d,g),A.drawElements(e,x.primitiveLength*m,A.UNSIGNED_SHORT,x.primitiveOffset*m*2)}}};var Er,Sr=function(e,n,r,i){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-n.transform.angle),t.transformMat3(s,s,u);var l=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:i}},Pr=function(e,n,r,i,o,a,s){return t.extend(Sr(e,n,r,i),q(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},kr=function(t){return{u_matrix:t}},Cr=function(e,n,r,i){return t.extend(kr(e),q(r,n,i))},Tr=function(t,e){return{u_matrix:t,u_world:e}},Ir=function(e,n,r,i,o){return t.extend(Cr(e,n,r,i),{u_world:o})},Mr=function(e,n,r,i){var o,a,s=e.transform;if("map"===i.paint.get("circle-pitch-alignment")){var u=F(r,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Or=function(t,e,n){var r=F(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},Lr=function(t,e,n){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},Rr=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},Dr=function(t){return{u_matrix:t}},Nr=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:F(e,1,n),u_intensity:r}},Fr=function(e,n,r){var i=e.transform;return{u_matrix:H(e,n,r),u_ratio:1/F(n,1,i.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},jr=function(e,n,r,i){return t.extend(Fr(e,n,r),{u_image:0,u_image_height:i})},zr=function(e,n,r,i){var o=e.transform,a=W(n,o);return{u_matrix:H(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/F(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Br=function(e,n,r,i,o){var a=e.lineAtlas,s=W(n,e.transform),u="round"===r.layout.get("line-cap"),l=a.getDash(i.from,u),c=a.getDash(i.to,u),f=l.width*o.fromScale,p=c.width*o.toScale;return t.extend(Fr(e,n,r),{u_patternscale_a:[s/f,-l.height/2],u_patternscale_b:[s/p,-c.height/2],u_sdfgamma:a.width/(256*Math.min(f,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:o.t})},Ur=function(t,e,n,r,i){var o,a;return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:X(i.paint.get("raster-hue-rotate"))}},Vr=function(t,e,n,r,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Gr=function(e,n,r,i,o,a,s,u,l,c,f){var p=o.transform;return t.extend(Vr(e,n,r,i,o,a,s,u,l,c),{u_gamma_scale:i?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+f})},qr=function(e,n,r,i,o,a,s,u,l,c){return t.extend(Gr(e,n,r,i,o,a,s,u,!0,l,!0),{u_texsize_icon:c,u_texture_icon:1})},Wr=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Hr=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,f=c*(r.tileID.canonical.x+r.tileID.wrap*l),p=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/F(r,1,n.transform.tileZoom),u_pixel_coord_upper:[f>>16,p>>16],u_pixel_coord_lower:[65535&f,65535&p]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},Xr={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}},Zr=t.identity(new Float32Array(16)),Yr=new t.Color(1,0,0,1),Qr=new t.Color(0,1,0,1),Kr=new t.Color(0,0,1,1),Jr=new t.Color(1,0,1,1),$r=new t.Color(0,1,1,1),ti={symbol:function(e,n,r,i,o){if("translucent"===e.renderPass){var a=on.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){for(var u=n.transform,l="map"===o,c="map"===a,f=0,p=e;f<p.length;f+=1){var h=p[f],d=i.getTile(h),g=d.getBucket(r);if(g&&g.text&&g.text.segments.get().length){var y=t.evaluateSizeForZoom(g.textSizeData,u.zoom),A=F(d,1,n.transform.zoom),v=E(h.posMatrix,c,l,n.transform,A),m="none"!==r.layout.get("icon-text-fit")&&g.hasIconData();if(y){var _=Math.pow(2,u.zoom-d.tileID.overscaledZ);Q(g,l,c,s,t.symbolSize,u,v,h.posMatrix,_,y,m)}}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&J(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&J(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Z(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Z(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var l=e.context,c=l.gl,f=e.depthModeForSublayer(0,rn.ReadOnly),p=on.disabled,h=e.colorModeForRenderPass(),d=[],g=0;g<i.length;g++){var y=i[g],A=n.getTile(y),v=A.getBucket(r);if(v){var m=v.programConfigurations.get(r.id),_={programConfiguration:m,program:e.useProgram("circle",m),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:Mr(e,y,A,r)};if(u)for(var b=0,x=v.segments.get();b<x.length;b+=1){var w=x[b];d.push({segments:new t.SegmentVector([w]),sortKey:w.sortKey,state:_})}else d.push({segments:v.segments,sortKey:0,state:_})}}u&&d.sort((function(t,e){return t.sortKey-e.sortKey}));for(var E=0,S=d;E<S.length;E+=1){var P=S[E],k=P.state;k.program.draw(l,c.TRIANGLES,f,p,h,sn.disabled,k.uniformValues,r.id,k.layoutVertexBuffer,k.indexBuffer,P.segments,r.paint,e.transform.zoom,k.programConfiguration)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=on.disabled,u=new an([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var l=0;l<i.length;l++){var c=i[l];if(!n.hasRenderableParent(c)){var f=n.getTile(c),p=f.getBucket(r);if(p){var h=p.programConfigurations.get(r.id);e.useProgram("heatmap",h).draw(o,a.TRIANGLES,rn.disabled,s,u,sn.disabled,Nr(c.posMatrix,f,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,r.paint,e.transform.zoom,h)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,rn.disabled,on.disabled,e.colorModeForRenderPass(),sn.disabled,function(e,n,r,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.depthModeForSublayer(0,rn.ReadOnly),u=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),f=c.constantOr(1),p=r.paint.get("line-gradient"),h=r.getCrossfadeParameters(),d=f?"linePattern":l?"lineSDF":p?"lineGradient":"line",g=e.context,y=g.gl,A=!0,v=0,m=i;v<m.length;v+=1){var _=m[v],b=n.getTile(_);if(!f||b.patternsLoaded()){var x=b.getBucket(r);if(x){var w=x.programConfigurations.get(r.id),E=e.context.program.get(),S=e.useProgram(d,w),P=A||S.program!==E,k=c.constantOr(null);if(k&&b.imageAtlas){var C=b.imageAtlas,T=C.patternPositions[k.to.toString()],I=C.patternPositions[k.from.toString()];T&&I&&w.setConstantPatternPositions(T,I)}var M=f?zr(e,b,r,h):l?Br(e,b,r,l,h):p?jr(e,b,r,x.lineClipsArray.length):Fr(e,b,r);if(f)g.activeTexture.set(y.TEXTURE0),b.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),w.updatePaintBuffers(h);else if(l&&(P||e.lineAtlas.dirty))g.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(g);else if(p){var O=x.gradients[r.id],L=O.texture;if(r.gradientVersion!==O.version){var R=256;if(r.stepInterpolant){var D=n.getSource().maxzoom,N=_.canonical.z===D?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;R=t.clamp(t.nextPowerOfTwo(x.maxLineLength/t.EXTENT*1024*N),256,g.maxTextureSize)}O.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:O.gradient||void 0,clips:x.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new t.Texture(g,O.gradient,y.RGBA),O.version=r.gradientVersion,L=O.texture}g.activeTexture.set(y.TEXTURE0),L.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}S.draw(g,y.TRIANGLES,s,e.stencilModeForClipping(_),u,sn.disabled,M,r.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,r.paint,e.transform.zoom,w,x.layoutVertexBuffer2),A=!1}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===l){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?rn.ReadWrite:rn.ReadOnly);tt(e,n,r,i,c,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var f=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,rn.ReadOnly);tt(e,n,r,i,f,s,!0)}}},"fill-extrusion":function(t,e,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new rn(t.context.gl.LEQUAL,rn.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))et(t,e,n,r,o,on.disabled,an.disabled),et(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();et(t,e,n,r,o,on.disabled,a)}}},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=t.depthModeForSublayer(0,rn.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],u=s[0],l=0,c=s[1];l<c.length;l+=1){var f=c[l],p=e.getTile(f);p.needsHillshadePrepare&&"offscreen"===t.renderPass?rt(t,p,n,o,on.disabled,a):"translucent"===t.renderPass&&nt(t,p,n,o,u[f.overscaledZ],a)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length)for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=a instanceof fe?[{},r]:t.stencilConfigForOverlap(r),c=l[0],f=l[1],p=f[f.length-1].overscaledZ,h=!t.options.moving,d=0,g=f;d<g.length;d+=1){var y=g[d],A=t.depthModeForSublayer(y.overscaledZ-p,1===n.paint.get("raster-opacity")?rn.ReadWrite:rn.ReadOnly,o.LESS),v=e.getTile(y),m=t.transform.calculatePosMatrix(y.toUnwrapped(),h);v.registerFadeDuration(n.paint.get("raster-fade-duration"));var _=e.findLoadedParent(y,0),b=it(v,_,e,n,t.transform),x=void 0,w=void 0,E="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),v.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),_?(_.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,_.tileID.overscaledZ-v.tileID.overscaledZ),w=[v.tileID.canonical.x*x%1,v.tileID.canonical.y*x%1]):v.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var S=Ur(m,w||[0,0],x||1,b,n);a instanceof fe?s.draw(i,o.TRIANGLES,A,on.disabled,u,sn.disabled,S,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,A,c[y.overscaledZ],u,sn.disabled,S,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===r.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var f=on.disabled,p=t.depthModeForSublayer(0,"opaque"===c?rn.ReadWrite:rn.ReadOnly),h=t.colorModeForRenderPass(),d=t.useProgram(l?"backgroundPattern":"background"),g=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var y=n.getCrossfadeParameters(),A=0,v=g;A<v.length;A+=1){var m=v[A],_=t.transform.calculatePosMatrix(m.toUnwrapped()),b=l?Hr(_,i,t,l,{tileID:m,tileSize:u},y):Wr(_,i,r);d.draw(o,a.TRIANGLES,p,f,h,sn.disabled,b,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)ut(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(on.disabled);var a="3d"===i.renderingMode?new rn(t.context.gl.LEQUAL,rn.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,rn.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},ei=function(t,e){this.context=new un(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=fn.maxUnderzooming+fn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vn,this.gpuTimers={}};ei.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1)this.style._layers[i[r]].resize()},ei.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Zn.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Zn.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,ce.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Zn.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new on({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},ei.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,rn.disabled,this.stencilClearMode,an.disabled,sn.disabled,Dr(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ei.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(an.disabled),n.setDepthMode(rn.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,rn.disabled,new on({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),an.disabled,sn.disabled,Dr(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ei.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new on({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},ei.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new on({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},ei.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,r=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+i]=new on({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,r]}return[(e={},e[i]=on.disabled,e),r]},ei.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new an([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?an.unblended:an.alphaBlended},ei.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return rn.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new rn(n||this.context.gl.LEQUAL,e,[r,r])},ei.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ei.prototype.render=function(e,n){var r=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,l,c={},f={},p={};for(var h in o){var d=o[h];c[h]=d.getVisibleCoordinates(),f[h]=c[h].slice().reverse(),p[h]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var g=0;g<i.length;g++)if(this.style._layers[i[g]].is3D()){this.opaquePassCutoff=g;break}this.renderPass="offscreen";for(var y=0,A=i;y<A.length;y+=1){var v=this.style._layers[A[y]];if(v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)){var m=f[v.source];("custom"===v.type||m.length)&&this.renderLayer(this,o[v.source],v,m)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[i[this.currentLayer]],b=o[_.source],x=c[_.source];this._renderTileClippingMasks(_,x),this.renderLayer(this,b,_,x)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var w=this.style._layers[i[this.currentLayer]],E=o[w.source],S=("symbol"===w.type?p:f)[w.source];this._renderTileClippingMasks(w,c[w.source]),this.renderLayer(this,E,w,S)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(l&&l.id)&&(l=r.style.sourceCaches[t.source]),(!u||u.getSource().maxzoom<l.getSource().maxzoom)&&(u=l))})),u&&ti.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;ot(t,t.transform.height-(e.top||0),3,Yr),ot(t,e.bottom||0,3,Qr),at(t,e.left||0,3,Kr),at(t,t.transform.width-(e.right||0),3,Jr);var n=t.transform.centerPoint;!function(t,e,n,r){st(t,e-1,n-10,2,20,r),st(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,$r)}(this),this.context.setDefault()},ei.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),ti[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},ei.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},ei.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},ei.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},ei.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e},ei.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:F(n,r[0],this.transform.zoom),o?r[1]:F(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},ei.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},ei.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},ei.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},ei.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new wr(this.context,t,br[t],e,Xr[t],this._showOverdrawInspector)),this.cache[n]},ei.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ei.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},ei.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ei.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ni=function(t,e){this.points=t,this.planes=e};ni.fromInvProjectionMatrix=function(e,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return t.transformMat4([],n,e)})).map((function(e){return t.scale$1([],e,1/e[3]/n*i)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var n=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),i=t.normalize([],t.cross([],n,r)),a=-t.dot(i,o[e[1]]);return i.concat(a)}));return new ni(o,a)};var ri=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};ri.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],r=t.clone$2(this.min),i=t.clone$2(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new ri(r,i)},ri.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},ri.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},ri.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<e.planes.length;i++){for(var o=e.planes[i],a=0,s=0;s<n.length;s++)a+=t.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(var u=0;u<3;u++){for(var l=Number.MAX_VALUE,c=-Number.MAX_VALUE,f=0;f<e.points.length;f++){var p=e.points[f][u]-this.min[u];l=Math.min(l,p),c=Math.max(c,p)}if(c<0||l>this.max[u]-this.min[u])return 0}return 1};var ii=function(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r};ii.prototype.interpolate=function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this},ii.prototype.getCenter=function(e,n){var r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)},ii.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},ii.prototype.clone=function(){return new ii(this.top,this.bottom,this.left,this.right)},ii.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var oi=function(e,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ii,this._posMatrixCache={},this._alignedPosMatrixCache={}},ai={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};oi.prototype.clone=function(){var t=new oi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},ai.minZoom.get=function(){return this._minZoom},ai.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},ai.maxZoom.get=function(){return this._maxZoom},ai.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},ai.minPitch.get=function(){return this._minPitch},ai.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},ai.maxPitch.get=function(){return this._maxPitch},ai.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},ai.renderWorldCopies.get=function(){return this._renderWorldCopies},ai.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},ai.worldSize.get=function(){return this.tileSize*this.scale},ai.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ai.size.get=function(){return new t.Point(this.width,this.height)},ai.bearing.get=function(){return-this.angle/Math.PI*180},ai.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ai.pitch.get=function(){return this._pitch/Math.PI*180},ai.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},ai.fov.get=function(){return this._fov/Math.PI*180},ai.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},ai.zoom.get=function(){return this._zoom},ai.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},ai.center.get=function(){return this._center},ai.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},ai.padding.get=function(){return this._edgeInsets.toJSON()},ai.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},ai.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},oi.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},oi.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},oi.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},oi.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&n.push(new t.UnwrappedTileID(l,e));return n},oi.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=ni.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=n);var l=function(t){return{aabb:new ri([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],f=[],p=n,h=e.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var d=1;d<=3;d++)c.push(l(-d)),c.push(l(d));for(c.push(l(0));c.length>0;){var g=c.pop(),y=g.x,A=g.y,v=g.fullyVisible;if(!v){var m=g.aabb.intersects(s);if(0===m)continue;v=2===m}var _=g.aabb.distanceX(a),b=g.aabb.distanceY(a),x=Math.max(Math.abs(_),Math.abs(b));if(g.zoom===p||x>3+(1<<p-g.zoom)-2&&g.zoom>=u)f.push({tileID:new t.OverscaledTileID(g.zoom===p?h:g.zoom,g.wrap,g.zoom,y,A),distanceSq:t.sqrLen([a[0]-.5-y,a[1]-.5-A])});else for(var w=0;w<4;w++){var E=(y<<1)+w%2,S=(A<<1)+(w>>1);c.push({aabb:g.aabb.quadrant(w),zoom:g.zoom+1,x:E,y:S,wrap:g.wrap,fullyVisible:v})}}return f.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},oi.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},ai.unmodified.get=function(){return this._unmodified},oi.prototype.zoomScale=function(t){return Math.pow(2,t)},oi.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},oi.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},oi.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},ai.point.get=function(){return this.project(this.center)},oi.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},oi.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},oi.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},oi.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},oi.prototype.coordinateLocation=function(t){return t.toLngLat()},oi.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,u=n[2]/i,l=r[2]/o,c=u===l?0:(0-u)/(l-u);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)},oi.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},oi.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},oi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},oi.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},oi.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},oi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},oi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var f=this.latRange;o=t.mercatorYfromLat(f[1])*this.worldSize,e=(a=t.mercatorYfromLat(f[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,n=(u=t.mercatorXfromLng(p[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var h=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(u+s)/2:h.x,e?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var g=h.y,y=l.y/2;g-y<o&&(i=o+y),g+y>a&&(i=a-y)}if(this.lngRange){var A=h.x,v=l.x/2;A-v<s&&(r=s+v),A+v>u&&(r=u-v)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:h.x,void 0!==i?i:h.y))),this._unmodified=c,this._constraining=!1}},oi.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),l=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,l,u),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-a,-s,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);var f=this.width%2/2,p=this.height%2/2,h=Math.cos(this.angle),d=Math.sin(this.angle),g=a-Math.round(a)+h*f+d*p,y=s-Math.round(s)+h*p+d*f,A=new Float64Array(c);if(t.translate(A,A,[g>.5?g-1:g,y>.5?y-1:y,0]),this.alignedProjMatrix=A,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},oi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},oi.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},oi.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,u=e;s<u.length;s+=1){var l=u[s];r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(oi.prototype,ai);var si=function(e){var n,r,i,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),r=!1,i=null,o=function(){i=null,r&&(n(),i=setTimeout(o,300),r=!1)},function(){return r=!0,i||o(),i})};si.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},si.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},si.prototype.getHashString=function(e){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=e?"/"+a+"/"+s+"/"+r:r+"/"+s+"/"+a,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var f=this._hashName,p=!1,h=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===f?(p=!0,e+"="+c):t})).filter((function(t){return t}));return p||h.push(f+"="+c),"#"+h.join("&")}return"#"+c},si.prototype._getCurrentHash=function(){var e,n=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===n._hashName&&(e=t)})),(e&&e[1]||"").split("/")):r.split("/")},si.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},si.prototype._updateHashUnthrottled=function(){var e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,e)}catch(t){}};var ui={linearity:.3,easing:t.bezier(0,0,.3,1)},li=t.extend({deceleration:2500,maxSpeed:1400},ui),ci=t.extend({deceleration:20,maxSpeed:1400},ui),fi=t.extend({deceleration:1e3,maxSpeed:360},ui),pi=t.extend({deceleration:1e3,maxSpeed:90},ui),hi=function(t){this._map=t,this.clear()};hi.prototype.clear=function(){this._inertiaBuffer=[]},hi.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},hi.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,n=t.browser.now();e.length>0&&n-e[0].time>160;)e.shift()},hi.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},r=0,i=this._inertiaBuffer;r<i.length;r+=1){var o=i[r].settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var u=ct(n.pan.mag(),a,t.extend({},li,e||{}));s.offset=n.pan.mult(u.amount/n.pan.mag()),s.center=this._map.transform.center,lt(s,u)}if(n.zoom){var l=ct(n.zoom,a,ci);s.zoom=this._map.transform.zoom+l.amount,lt(s,l)}if(n.bearing){var c=ct(n.bearing,a,fi);s.bearing=this._map.transform.bearing+t.clamp(c.amount,-179,179),lt(s,c)}if(n.pitch){var f=ct(n.pitch,a,pi);s.pitch=this._map.transform.pitch+f.amount,lt(s,f)}if(s.zoom||s.bearing){var p=void 0===n.pinchAround?n.around:n.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var di=function(e){var n=function(n,r,i,o){void 0===o&&(o={});var a=Et.mousePos(r.getCanvasContainer(),i),s=r.unproject(a);e.call(this,n,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=r};e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),gi=function(e){var n=function(n,r,i){var o="touchend"===n?i.changedTouches:i.touches,a=Et.touchPos(r.getCanvasContainer(),o),s=a.map((function(t){return r.unproject(t)})),u=a.reduce((function(t,e,n,r){return t.add(e.div(r.length))}),new t.Point(0,0)),l=r.unproject(u);e.call(this,n,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:i}),this._defaultPrevented=!1};e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),yi=function(t){var e=function(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1};t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),Ai=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Ai.prototype.reset=function(){delete this._mousedownPos},Ai.prototype.wheel=function(t){return this._firePreventable(new yi(t.type,this._map,t))},Ai.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new di(t.type,this._map,t))},Ai.prototype.mouseup=function(t){this._map.fire(new di(t.type,this._map,t))},Ai.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new di(t.type,this._map,t))},Ai.prototype.dblclick=function(t){return this._firePreventable(new di(t.type,this._map,t))},Ai.prototype.mouseover=function(t){this._map.fire(new di(t.type,this._map,t))},Ai.prototype.mouseout=function(t){this._map.fire(new di(t.type,this._map,t))},Ai.prototype.touchstart=function(t){return this._firePreventable(new gi(t.type,this._map,t))},Ai.prototype.touchmove=function(t){this._map.fire(new gi(t.type,this._map,t))},Ai.prototype.touchend=function(t){this._map.fire(new gi(t.type,this._map,t))},Ai.prototype.touchcancel=function(t){this._map.fire(new gi(t.type,this._map,t))},Ai.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Ai.prototype.isEnabled=function(){return!0},Ai.prototype.isActive=function(){return!1},Ai.prototype.enable=function(){},Ai.prototype.disable=function(){};var vi=function(t){this._map=t};vi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},vi.prototype.mousemove=function(t){this._map.fire(new di(t.type,this._map,t))},vi.prototype.mousedown=function(){this._delayContextMenu=!0},vi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},vi.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new di(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},vi.prototype.isEnabled=function(){return!0},vi.prototype.isActive=function(){return!1},vi.prototype.enable=function(){},vi.prototype.disable=function(){};var mi=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};mi.prototype.isEnabled=function(){return!!this._enabled},mi.prototype.isActive=function(){return!!this._active},mi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},mi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},mi.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(Et.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},mi.prototype.mousemoveWindow=function(t,e){if(this._active){var n=e;if(!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=n,this._box||(this._box=Et.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),a=Math.min(r.y,n.y),s=Math.max(r.y,n.y);Et.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}}},mi.prototype.mouseupWindow=function(e,n){var r=this;if(this._active&&0===e.button){var i=this._startPos,o=n;if(this.reset(),Et.suppressClick(),i.x!==o.x||i.y!==o.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(i,o,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},mi.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},mi.prototype.blur=function(){this.reset()},mi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Et.remove(this._box),this._box=null),Et.enableDrag(),delete this._startPos,delete this._lastPos},mi.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var _i=function(t){this.reset(),this.numTouches=t.numTouches};_i.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},_i.prototype.touchstart=function(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){for(var n=new t.Point(0,0),r=0,i=e;r<i.length;r+=1)n._add(i[r]);return n.div(e.length)}(n),this.touches=ft(r,n)))},_i.prototype.touchmove=function(t,e,n){if(!this.aborted&&this.centroid){var r=ft(n,e);for(var i in this.touches){var o=r[i];(!o||o.dist(this.touches[i])>30)&&(this.aborted=!0)}}},_i.prototype.touchend=function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var bi=function(t){this.singleTap=new _i(t),this.numTaps=t.numTaps,this.reset()};bi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},bi.prototype.touchstart=function(t,e,n){this.singleTap.touchstart(t,e,n)},bi.prototype.touchmove=function(t,e,n){this.singleTap.touchmove(t,e,n)},bi.prototype.touchend=function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(i&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var xi=function(){this._zoomIn=new bi({numTouches:1,numTaps:2}),this._zoomOut=new bi({numTouches:2,numTaps:1}),this.reset()};xi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},xi.prototype.touchstart=function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)},xi.prototype.touchmove=function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)},xi.prototype.touchend=function(t,e,n){var r=this,i=this._zoomIn.touchend(t,e,n),o=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},xi.prototype.touchcancel=function(){this.reset()},xi.prototype.enable=function(){this._enabled=!0},xi.prototype.disable=function(){this._enabled=!1,this.reset()},xi.prototype.isEnabled=function(){return this._enabled},xi.prototype.isActive=function(){return this._active};var wi={0:1,2:2},Ei=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Ei.prototype.blur=function(){this.reset()},Ei.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ei.prototype._correctButton=function(t,e){return!1},Ei.prototype._move=function(t,e){return{}},Ei.prototype.mousedown=function(t,e){if(!this._lastPoint){var n=Et.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}},Ei.prototype.mousemoveWindow=function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){var n=wi[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)},Ei.prototype.mouseupWindow=function(t){this._lastPoint&&Et.mouseButton(t)===this._eventButton&&(this._moved&&Et.suppressClick(),this.reset())},Ei.prototype.enable=function(){this._enabled=!0},Ei.prototype.disable=function(){this._enabled=!1,this.reset()},Ei.prototype.isEnabled=function(){return this._enabled},Ei.prototype.isActive=function(){return this._active};var Si=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,n){t.prototype.mousedown.call(this,e,n),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Ei),Pi=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Ei),ki=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Ei),Ci=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Ci.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Ci.prototype.touchstart=function(t,e,n){return this._calculateTransform(t,e,n)},Ci.prototype.touchmove=function(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)},Ci.prototype.touchend=function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()},Ci.prototype.touchcancel=function(){this.reset()},Ci.prototype._calculateTransform=function(e,n,r){r.length>0&&(this._active=!0);var i=ft(r,n),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var u in i){var l=i[u],c=this._touches[u];c&&(o._add(l),a._add(l.sub(c)),s++,i[u]=l)}if(this._touches=i,!(s<this._minTouches)&&a.mag()){var f=a.div(s);if(this._sum._add(f),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:f}}},Ci.prototype.enable=function(){this._enabled=!0},Ci.prototype.disable=function(){this._enabled=!1,this.reset()},Ci.prototype.isEnabled=function(){return this._enabled},Ci.prototype.isActive=function(){return this._active};var Ti=function(){this.reset()};Ti.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ti.prototype._start=function(t){},Ti.prototype._move=function(t,e,n){return{}},Ti.prototype.touchstart=function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))},Ti.prototype.touchmove=function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var r=this._firstTwoTouches,i=r[1],o=pt(n,e,r[0]),a=pt(n,e,i);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Ti.prototype.touchend=function(t,e,n){if(this._firstTwoTouches){var r=this._firstTwoTouches,i=r[1],o=pt(n,e,r[0]),a=pt(n,e,i);o&&a||(this._active&&Et.suppressClick(),this.reset())}},Ti.prototype.touchcancel=function(){this.reset()},Ti.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Ti.prototype.disable=function(){this._enabled=!1,this.reset()},Ti.prototype.isEnabled=function(){return this._enabled},Ti.prototype.isActive=function(){return this._active};var Ii=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(ht(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ht(this._distance,n),pinchAround:e}},e}(Ti),Mi=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:dt(this._vector,n),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=dt(t,this._startVector);return Math.abs(n)<e},e}(Ti),Oi=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,gt(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,n){var r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,n){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,i=e.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return gt(t)&&gt(e)&&o}},e}(Ti),Li={panStep:100,bearingStep:15,pitchStep:10},Ri=function(){var t=Li;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1};Ri.prototype.blur=function(){this.reset()},Ri.prototype.reset=function(){this._active=!1},Ri.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:yt,zoom:n?Math.round(u)+n*(t.shiftKey?2:1):u,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+i*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},Ri.prototype.enable=function(){this._enabled=!0},Ri.prototype.disable=function(){this._enabled=!1,this.reset()},Ri.prototype.isEnabled=function(){return this._enabled},Ri.prototype.isActive=function(){return this._active},Ri.prototype.disableRotation=function(){this._rotationDisabled=!0},Ri.prototype.enableRotation=function(){this._rotationDisabled=!1};var Di=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};Di.prototype.setZoomRate=function(t){this._defaultZoomRate=t},Di.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},Di.prototype.isEnabled=function(){return!!this._enabled},Di.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Di.prototype.isZooming=function(){return!!this._zooming},Di.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},Di.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Di.prototype.wheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}},Di.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},Di.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var n=Et.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Di.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,u=this._startZoom,l=this._easing,c=!1;if("wheel"===this._type&&u&&l){var f=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=l(f);a=t.number(u,s,p),f<1?this._frameId||(this._frameId=!0):c=!0}else a=s,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Di.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n},Di.prototype.blur=function(){this.reset()},Di.prototype.reset=function(){this._active=!1};var Ni=function(t,e){this._clickZoom=t,this._tapZoom=e};Ni.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ni.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ni.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ni.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Fi=function(){this.reset()};Fi.prototype.reset=function(){this._active=!1},Fi.prototype.blur=function(){this.reset()},Fi.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}},Fi.prototype.enable=function(){this._enabled=!0},Fi.prototype.disable=function(){this._enabled=!1,this.reset()},Fi.prototype.isEnabled=function(){return this._enabled},Fi.prototype.isActive=function(){return this._active};var ji=function(){this._tap=new bi({numTouches:1,numTaps:1}),this.reset()};ji.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ji.prototype.touchstart=function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))},ji.prototype.touchmove=function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)},ji.prototype.touchend=function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)},ji.prototype.touchcancel=function(){this.reset()},ji.prototype.enable=function(){this._enabled=!0},ji.prototype.disable=function(){this._enabled=!1,this.reset()},ji.prototype.isEnabled=function(){return this._enabled},ji.prototype.isActive=function(){return this._active};var zi=function(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n};zi.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},zi.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},zi.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},zi.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Bi=function(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n};Bi.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Bi.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Bi.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Bi.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ui=function(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};Ui.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ui.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ui.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ui.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ui.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ui.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Vi=function(t){return t.zoom||t.drag||t.pitch||t.rotate},Gi=function(t){var e=function(){t.apply(this,arguments)};return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event),qi=function(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hi(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(var i=0,o=this._listeners;i<o.length;i+=1){var a=o[i],s=a[0];Et.addEventListener(s,a[1],s===t.window.document?this.handleWindowEvent:this.handleEvent,a[2])}};qi.prototype.destroy=function(){for(var e=0,n=this._listeners;e<n.length;e+=1){var r=n[e],i=r[0];Et.removeEventListener(i,r[1],i===t.window.document?this.handleWindowEvent:this.handleEvent,r[2])}},qi.prototype._addDefaultHandlers=function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new Ai(e,t));var r=e.boxZoom=new mi(e,t);this._add("boxZoom",r);var i=new xi,o=new Fi;e.doubleClickZoom=new Ni(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var a=new ji;this._add("tapDragZoom",a);var s=e.touchPitch=new Oi;this._add("touchPitch",s);var u=new Pi(t),l=new ki(t);e.dragRotate=new Bi(t,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new Si(t),f=new Ci(t);e.dragPan=new zi(n,c,f),this._add("mousePan",c),this._add("touchPan",f,["touchZoom","touchRotate"]);var p=new Mi,h=new Ii;e.touchZoomRotate=new Ui(n,h,p,a),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",h,["touchPan","touchRotate"]);var d=e.scrollZoom=new Di(e,this);this._add("scrollZoom",d,["mousePan"]);var g=e.keyboard=new Ri;this._add("keyboard",g),this._add("blockableMapEvent",new vi(e));for(var y=0,A=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<A.length;y+=1){var v=A[y];t.interactive&&t[v]&&e[v].enable(t[v])}},qi.prototype._add=function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e},qi.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,n=this._handlers;e<n.length;e+=1)n[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},qi.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},qi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},qi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},qi.prototype.isMoving=function(){return Boolean(Vi(this._eventsInProgress))||this.isZooming()},qi.prototype._blockedByActive=function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1},qi.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},qi.prototype._getMapTouches=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=r[n];this._el.contains(i.target)&&e.push(i)}return e},qi.prototype.handleEvent=function(t,e){this._updatingCamera=!0;for(var n="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},i={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,s=a?Et.touchPos(this._el,a):Et.mousePos(this._el,t),u=0,l=this._handlers;u<l.length;u+=1){var c=l[u],f=c.handlerName,p=c.handler,h=c.allowed;if(p.isEnabled()){var d=void 0;this._blockedByActive(o,h,f)?p.reset():p[e||t.type]&&(d=p[e||t.type](t,s,a),this.mergeHandlerResult(r,i,d,f,n),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||p.isActive())&&(o[f]=p)}}var g={};for(var y in this._previousActiveHandlers)o[y]||(g[y]=n);this._previousActiveHandlers=o,(Object.keys(g).length||At(r))&&(this._changes.push([r,i,g]),this._triggerRenderFrame()),(Object.keys(o).length||At(r))&&this._map._stop(!0),this._updatingCamera=!1;var A=r.cameraAnimation;A&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],A(this._map))},qi.prototype.mergeHandlerResult=function(e,n,r,i,o){if(r){t.extend(e,r);var a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}},qi.prototype._applyChanges=function(){for(var e={},n={},r={},i=0,o=this._changes;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],l=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(n,u),t.extend(r,l)}this._updateMapTransform(e,n,r),this._changes=[]},qi.prototype._updateMapTransform=function(t,e,n){var r=this._map,i=r.transform;if(!At(t))return this._fireEvents(e,n,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,l=t.around,c=t.pinchAround;void 0!==c&&(l=c),r._stop(!0),l=l||r.transform.centerPoint;var f=i.pointLocation(o?l.sub(o):l);s&&(i.bearing+=s),u&&(i.pitch+=u),a&&(i.zoom+=a),i.setLocationAtPoint(f,l),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)},qi.prototype._fireEvents=function(e,n,r){var i=this,o=Vi(this._eventsInProgress),a=Vi(e),s={};for(var u in e)this._eventsInProgress[u]||(s[u+"start"]=e[u].originalEvent),this._eventsInProgress[u]=e[u];for(var l in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(l,s[l]);for(var c in a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(c,e[c].originalEvent);var f,p={};for(var h in this._eventsInProgress){var d=this._eventsInProgress[h],g=d.handlerName,y=d.originalEvent;this._handlersById[g].isActive()||(delete this._eventsInProgress[h],p[h+"end"]=f=n[g]||y)}for(var A in p)this._fireEvent(A,p[A]);var v=Vi(this._eventsInProgress);if(r&&(o||a)&&!v){this._updatingCamera=!0;var m=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap};m?(_(m.bearing||this._map.getBearing())&&(m.bearing=0),this._map.easeTo(m,{originalEvent:f})):(this._map.fire(new t.Event("moveend",{originalEvent:f})),_(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},qi.prototype._fireEvent=function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},qi.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new Gi("renderFrame",{timeStamp:e})),t._applyChanges()}))},qi.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var Wi,Hi,Xi=(Wi=t.Evented,Hi=function(e,n){Wi.call(this),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)},Wi&&(Hi.__proto__=Wi),(Hi.prototype=Object.create(Wi&&Wi.prototype)).constructor=Hi,Hi.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},Hi.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},Hi.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},Hi.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},Hi.prototype.getZoom=function(){return this.transform.zoom},Hi.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},Hi.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},Hi.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},Hi.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},Hi.prototype.getBearing=function(){return this.transform.bearing},Hi.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},Hi.prototype.getPadding=function(){return this.transform.padding},Hi.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},Hi.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},Hi.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},Hi.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},Hi.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},Hi.prototype.getPitch=function(){return this.transform.pitch},Hi.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},Hi.prototype.cameraForBounds=function(e,n){e=t.LngLatBounds.convert(e);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)},Hi.prototype._cameraForBoxAndBearing=function(e,n,r,i){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var a=i.padding;i.padding={top:a,bottom:a,right:a,left:a}}i.padding=t.extend(o,i.padding);var s=this.transform,u=s.padding,l=s.project(t.LngLat.convert(e)),c=s.project(t.LngLat.convert(n)),f=l.rotate(-r*Math.PI/180),p=c.rotate(-r*Math.PI/180),h=new t.Point(Math.max(f.x,p.x),Math.max(f.y,p.y)),d=new t.Point(Math.min(f.x,p.x),Math.min(f.y,p.y)),g=h.sub(d),y=(s.width-(u.left+u.right+i.padding.left+i.padding.right))/g.x,A=(s.height-(u.top+u.bottom+i.padding.top+i.padding.bottom))/g.y;if(!(A<0||y<0)){var v=Math.min(s.scaleZoom(s.scale*Math.min(y,A)),i.maxZoom),m="number"==typeof i.offset.x?new t.Point(i.offset.x,i.offset.y):t.Point.convert(i.offset),_=new t.Point((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),b=m.add(_).mult(s.scale/s.zoomScale(v));return{center:s.unproject(l.add(c).div(2).sub(b)),zoom:v,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Hi.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},Hi.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},Hi.prototype._fitInternal=function(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},Hi.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},Hi.prototype.easeTo=function(e,n){var r=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in e?+e.zoom:o,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,f="pitch"in e?+e.pitch:s,p="padding"in e?e.padding:i.padding,h=t.Point.convert(e.offset),d=i.centerPoint.add(h),g=i.pointLocation(d),y=t.LngLat.convert(e.center||g);this._normalizeCenter(y);var A,v,m=i.project(g),_=i.project(y).sub(m),b=i.zoomScale(l-o);e.around&&(A=t.LngLat.convert(e.around),v=i.locationPoint(A));var x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==o,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||f!==s,this._padding=!i.isPaddingEqual(p),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,x),this._ease((function(e){if(r._zooming&&(i.zoom=t.number(o,l,e)),r._rotating&&(i.bearing=t.number(a,c,e)),r._pitching&&(i.pitch=t.number(s,f,e)),r._padding&&(i.interpolatePadding(u,p,e),d=i.centerPoint.add(h)),A)i.setLocationAtPoint(A,v);else{var g=i.zoomScale(i.zoom-o),y=l>o?Math.min(2,b):Math.max(.5,b),x=Math.pow(y,1-e),w=i.unproject(m.add(_.mult(e*x)).mult(g));i.setLocationAtPoint(i.renderWorldCopies?w.wrap():w,d)}r._fireMoveEvents(n)}),(function(t){r._afterEase(n,t)}),e),this},Hi.prototype._prepareEase=function(e,n,r){void 0===r&&(r={}),this._moving=!0,n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))},Hi.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},Hi.prototype._afterEase=function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},Hi.prototype.flyTo=function(e,n){var r=function(t){var e=(P*P-S*S+(t?-1:1)*I*I*k*k)/(2*(t?P:S)*I*k);return Math.log(Math.sqrt(e*e+1)-e)},i=function(t){return(Math.exp(t)-Math.exp(-t))/2},o=function(t){return(Math.exp(t)+Math.exp(-t))/2},a=this;if(!e.essential&&t.browser.prefersReducedMotion){var s=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(s,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var u=this.transform,l=this.getZoom(),c=this.getBearing(),f=this.getPitch(),p=this.getPadding(),h="zoom"in e?t.clamp(+e.zoom,u.minZoom,u.maxZoom):l,d="bearing"in e?this._normalizeBearing(e.bearing,c):c,g="pitch"in e?+e.pitch:f,y="padding"in e?e.padding:u.padding,A=u.zoomScale(h-l),v=t.Point.convert(e.offset),m=u.centerPoint.add(v),_=u.pointLocation(m),b=t.LngLat.convert(e.center||_);this._normalizeCenter(b);var x=u.project(_),w=u.project(b).sub(x),E=e.curve,S=Math.max(u.width,u.height),P=S/A,k=w.mag();if("minZoom"in e){var C=t.clamp(Math.min(e.minZoom,l,h),u.minZoom,u.maxZoom),T=S/u.zoomScale(C-l);E=Math.sqrt(T/k*2)}var I=E*E,M=r(0),O=function(t){return o(M)/o(M+E*t)},L=function(t){var e;return S*((o(M)*(i(e=M+E*t)/o(e))-i(M))/I)/k},R=(r(1)-M)/E;if(Math.abs(k)<1e-6||!isFinite(R)){if(Math.abs(S-P)<1e-6)return this.easeTo(e,n);var D=P<S?-1:1;R=Math.abs(Math.log(P/S))/E,L=function(){return 0},O=function(t){return Math.exp(D*E*t)}}return e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/E:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=c!==d,this._pitching=g!==f,this._padding=!u.isPaddingEqual(y),this._prepareEase(n,!1),this._ease((function(e){var r=e*R,i=1/O(r);u.zoom=1===e?h:l+u.scaleZoom(i),a._rotating&&(u.bearing=t.number(c,d,e)),a._pitching&&(u.pitch=t.number(f,g,e)),a._padding&&(u.interpolatePadding(p,y,e),m=u.centerPoint.add(v));var o=1===e?b:u.unproject(x.add(w.mult(L(r))).mult(i));u.setLocationAtPoint(u.renderWorldCopies?o.wrap():o,m),a._fireMoveEvents(n)}),(function(){return a._afterEase(n)}),e),this},Hi.prototype.isEasing=function(){return!!this._easeFrameId},Hi.prototype.stop=function(){return this._stop()},Hi.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this},Hi.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Hi.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Hi.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},Hi.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},Hi),Zi=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Zi.prototype.getDefaultPosition=function(){return"bottom-right"},Zi.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=Et.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Et.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Et.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zi.prototype.onRemove=function(){Et.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Zi.prototype._setElementTitle=function(t,e){var n=this._map._getUIString("AttributionControl."+e);t.title=n,t.setAttribute("aria-label",n)},Zi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Zi.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=n.reduce((function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}},Zi.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Zi.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Zi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Yi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Yi.prototype.onAdd=function(t){this._map=t,this._container=Et.create("div","mapboxgl-ctrl");var e=Et.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Yi.prototype.onRemove=function(){Et.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Yi.prototype.getDefaultPosition=function(){return"bottom-left"},Yi.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Yi.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Yi.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Qi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Qi.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Qi.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Qi.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,r=e;n<r.length;n+=1){var i=r[n];if(!i.cancelled&&(i.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Qi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ki={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ji=t.window.HTMLImageElement,$i=t.window.HTMLElement,to=t.window.ImageBitmap,eo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},no=function(e){var n=function(n){var r=this;if(null!=(n=t.extend({},eo,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=n.maxPitch&&n.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var i=new oi(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies);if(e.call(this,i,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._antialias=n.antialias,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new Qi,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Ki,n.locale),this._clickTolerance=n.clickTolerance,this._requestManager=new t.RequestManager(n.transformRequest,n.accessToken),"string"==typeof n.container){if(this._container=t.window.document.getElementById(n.container),!this._container)throw new Error("Container '"+n.container+"' not found.")}else{if(!(n.container instanceof $i))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return r._update(!1)})),this.on("moveend",(function(){return r._update(!1)})),this.on("zoom",(function(){return r._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new qi(this,n),this._hash=n.hash&&new si("string"==typeof n.hash&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,t.extend({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Zi({customAttribution:n.customAttribution})),this.addControl(new Yi,n.logoPosition),this.on("style.load",(function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)})),this.on("data",(function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){r.fire(new t.Event(e.dataType+"dataloading",e))}))};e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return n.prototype._getMapId=function(){return this._mapId},n.prototype.addControl=function(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},n.prototype.hasControl=function(t){return this._controls.indexOf(t)>-1},n.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];if(r===this.transform.width&&i===this.transform.height)return this;this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i);var o=!this._moving;return o&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},n.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},n.prototype.getMinPitch=function(){return this.transform.minPitch},n.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},n.prototype.getMaxPitch=function(){return this.transform.maxPitch},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},n.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},n.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},n.prototype._createDelegatedListener=function(t,e,n){var r,i=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new di(t,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(i,new di(t,i,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new di(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}},n.prototype.on=function(t,n,r){if(void 0===r)return e.prototype.on.call(this,t,n);var i=this._createDelegatedListener(t,n,r);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i),i.delegates)this.on(o,i.delegates[o]);return this},n.prototype.once=function(t,n,r){if(void 0===r)return e.prototype.once.call(this,t,n);var i=this._createDelegatedListener(t,n,r);for(var o in i.delegates)this.once(o,i.delegates[o]);return this},n.prototype.off=function(t,n,r){var i=this;return void 0===r?e.prototype.off.call(this,t,n):(this._delegatedListeners&&this._delegatedListeners[t]&&function(e){for(var o=e[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===n&&s.listener===r){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}}(this._delegatedListeners),this)},n.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},n.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},n.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Xn(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},n.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Xn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},n.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(o,(function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)},n.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;void 0===o&&(o=!1);var a=r.stretchX,s=r.stretchY,u=r.content;if(this._lazyInitEmptyStyle(),n instanceof Ji||to&&n instanceof to){var l=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l.width,height:l.height},l.data),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}},n.prototype.updateImage=function(e,n){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof Ji||to&&n instanceof to?t.browser.getImageData(n):n,o=i.width,a=i.height,s=i.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof Ji||to&&n instanceof to)),void this.style.updateImage(e,r))},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},n.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=Et.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=Et.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=Et.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=Et.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){i[t]=Et.create("div","mapboxgl-ctrl-"+t,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},n.prototype._resizeCanvas=function(e,n){var r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},n.prototype._setupPainter=function(){var e=t.extend({},wt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?(this.painter=new ei(n,this.transform),t.webpSupported.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype._onMapScroll=function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(e){var n,r=this,i=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),i=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=t.browser.now();this.style.zoomHistory.update(s,u);var l=new t.EvaluationParameters(s,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=l.crossFadingFactor();1===c&&c===this._crossFadingFactor||(a=!0,this._crossFadingFactor=c),this.style.update(l)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var f=t.browser.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout((function(){var e=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),r.fire(new t.Event("gpu-timing-frame",{cpuTime:f,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var e=r.painter.queryGpuTimers(p);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0),this}},n.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),vt(this._canvasContainer),vt(this._controlContainer),vt(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},n.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showPadding.get=function(){return!!this._showPadding},r.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},r.version.get=function(){return t.version},Object.defineProperties(n.prototype,r),n}(Xi),ro={showCompass:!0,showZoom:!0,visualizePitch:!1},io=function(e){var n=this;this.options=t.extend({},ro,e),this._container=Et.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return n._map.zoomIn({},{originalEvent:t})})),Et.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return n._map.zoomOut({},{originalEvent:t})})),Et.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:t}):n._map.resetNorth({},{originalEvent:t})})),this._compassIcon=Et.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};io.prototype._updateZoomButtons=function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},io.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},io.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oo(this._map,this._compass,this.options.visualizePitch)),this._container},io.prototype.onRemove=function(){Et.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},io.prototype._createButton=function(t,e){var n=Et.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n},io.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var oo=function(e,n,r){void 0===r&&(r=!1),this._clickTolerance=10,this.element=n,this.mouseRotate=new Pi({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new ki({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Et.addEventListener(n,"mousedown",this.mousedown),Et.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),Et.addEventListener(n,"touchmove",this.touchmove),Et.addEventListener(n,"touchend",this.touchend),Et.addEventListener(n,"touchcancel",this.reset)};oo.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),Et.disableDrag()},oo.prototype.move=function(t,e){var n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}},oo.prototype.off=function(){var t=this.element;Et.removeEventListener(t,"mousedown",this.mousedown),Et.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),Et.removeEventListener(t,"touchmove",this.touchmove),Et.removeEventListener(t,"touchend",this.touchend),Et.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},oo.prototype.offTemp=function(){Et.enableDrag(),Et.removeEventListener(t.window,"mousemove",this.mousemove),Et.removeEventListener(t.window,"mouseup",this.mouseup)},oo.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),Et.mousePos(this.element,e)),Et.addEventListener(t.window,"mousemove",this.mousemove),Et.addEventListener(t.window,"mouseup",this.mouseup)},oo.prototype.mousemove=function(t){this.move(t,Et.mousePos(this.element,t))},oo.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},oo.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=Et.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},oo.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=Et.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},oo.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},oo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ao,so,uo,lo,co,fo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},po=(lo=t.Evented,co=function(e,n){if(lo.call(this),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=Et.create("div"),this._element.setAttribute("aria-label","Map marker");var r=Et.createNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height","41px"),r.setAttributeNS(null,"width","27px"),r.setAttributeNS(null,"viewBox","0 0 27 41");var i=Et.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd");var o=Et.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill-rule","nonzero");var a=Et.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"transform","translate(3.0, 29.0)"),a.setAttributeNS(null,"fill","#000000");for(var s=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];s<u.length;s+=1){var l=u[s],c=Et.createNS("http://www.w3.org/2000/svg","ellipse");c.setAttributeNS(null,"opacity","0.04"),c.setAttributeNS(null,"cx","10.5"),c.setAttributeNS(null,"cy","5.80029008"),c.setAttributeNS(null,"rx",l.rx),c.setAttributeNS(null,"ry",l.ry),a.appendChild(c)}var f=Et.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var p=Et.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(p);var h=Et.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000");var d=Et.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(d);var g=Et.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var y=Et.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var A=Et.createNS("http://www.w3.org/2000/svg","circle");A.setAttributeNS(null,"fill","#000000"),A.setAttributeNS(null,"opacity","0.25"),A.setAttributeNS(null,"cx","5.5"),A.setAttributeNS(null,"cy","5.5"),A.setAttributeNS(null,"r","5.4999962");var v=Et.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#FFFFFF"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962"),y.appendChild(A),y.appendChild(v),o.appendChild(a),o.appendChild(f),o.appendChild(h),o.appendChild(g),o.appendChild(y),r.appendChild(o),r.setAttributeNS(null,"height",41*this._scale+"px"),r.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(r),this._offset=t.Point.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),_t(this._element,this._anchor,"marker"),this._popup=null},lo&&(co.__proto__=lo),(co.prototype=Object.create(lo&&lo.prototype)).constructor=co,co.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},co.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Et.remove(this._element),this._popup&&this._popup.remove(),this},co.prototype.getLngLat=function(){return this._lngLat},co.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},co.prototype.getElement=function(){return this._element},co.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},co.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},co.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},co.prototype.getPopup=function(){return this._popup},co.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},co.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=mt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),Et.setTransform(this._element,fo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+n+" "+e)}},co.prototype.getOffset=function(){return this._offset},co.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},co.prototype._onMove=function(e){if(!this._isDragging){var n=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=n}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},co.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},co.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},co.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},co.prototype.isDraggable=function(){return this._draggable},co.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},co.prototype.getRotation=function(){return this._rotation},co.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},co.prototype.getRotationAlignment=function(){return this._rotationAlignment},co.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},co.prototype.getPitchAlignment=function(){return this._pitchAlignment},co),ho={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},go=0,yo=!1,Ao=(so=t.Evented,uo=function(e){so.call(this),this.options=t.extend({},ho,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)},so&&(uo.__proto__=so),(uo.prototype=Object.create(so&&so.prototype)).constructor=uo,uo.prototype.onAdd=function(e){var n;return this._map=e,this._container=Et.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==ao?n(ao):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){n(ao="denied"!==t.state)})):n(ao=!!t.window.navigator.geolocation),this._container},uo.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Et.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,go=0,yo=!1},uo.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},uo.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},uo.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},uo.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})},uo.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},uo.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"},uo.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},uo.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&yo)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},uo.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},uo.prototype._setupUI=function(e){var n=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=Et.create("button","mapboxgl-ctrl-geolocate",this._container),Et.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Et.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new po(this._dotElement),this._circleElement=Et.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new po({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))}))},uo.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":go--,yo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++go>1?(e={maximumAge:6e5,timeout:0},yo=!0):(e=this.options.positionOptions,yo=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},uo.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},uo),vo={maxWidth:100,unit:"metric"},mo=function(e){this.options=t.extend({},vo,e),t.bindAll(["_onMove","setUnit"],this)};mo.prototype.getDefaultPosition=function(){return"bottom-left"},mo.prototype._onMove=function(){bt(this._map,this._container,this.options)},mo.prototype.onAdd=function(t){return this._map=t,this._container=Et.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},mo.prototype.onRemove=function(){Et.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},mo.prototype.setUnit=function(t){this.options.unit=t,bt(this._map,this._container,this.options)};var _o=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};_o.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=Et.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},_o.prototype.onRemove=function(){Et.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},_o.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},_o.prototype._setupUI=function(){var e=this._fullscreenButton=Et.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Et.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},_o.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},_o.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},_o.prototype._isFullscreen=function(){return this._fullscreen},_o.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},_o.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var bo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),wo=function(e){var n=function(n){e.call(this),this.options=t.extend(Object.create(bo),n),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)};return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&Et.remove(this._content),this._container&&(Et.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},n.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},n.prototype.getElement=function(){return this._container},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},n.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},n.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},n.prototype.setDOMContent=function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Et.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this},n.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},n.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},n.prototype.setOffset=function(t){return this.options.offset=t,this._update(),this},n.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},n.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Et.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},n.prototype._onMouseUp=function(t){this._update(t.point)},n.prototype._onMouseMove=function(t){this._update(t.point)},n.prototype._onDrag=function(t){this._update(t.point)},n.prototype._update=function(e){var n=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Et.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Et.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return n._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=mt(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var r=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),i=this.options.anchor,o=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=r.y+o.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<s/2?a.push("left"):r.x>this._map.transform.width-s/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var l=r.add(o[i]).round();Et.setTransform(this._container,fo[i]+" translate("+l.x+"px,"+l.y+"px)"),_t(this._container,i,"popup")}},n.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(xo);t&&t.focus()}},n.prototype._onClose=function(){this.remove()},n}(t.Evented),Eo={version:t.version,supported:wt,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:no,NavigationControl:io,GeolocateControl:Ao,AttributionControl:Zi,ScaleControl:mo,FullscreenControl:_o,Popup:wo,Marker:po,Style:Xn,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){d().acquire(pn)},clearPrewarmedResources:function(){var t=dn;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(pn),dn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return hn.workerCount},set workerCount(t){hn.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Eo})),n}(),a("1Ft0x");function e_(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function n_(t,e){if(t===e)return!0;if(e_(t)&&e_(e)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!n_(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=1e-7}function r_(t,e,n){return Math.max(e,Math.min(n,t))}function i_(t,e,n){return e_(t)?t.map((function(t,r){return i_(t,e[r],n)})):n*e+(1-n)*t}function o_(t,e){if(!t)throw new Error(e||"react-map-gl: assertion failed.")}function a_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s_(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?a_(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}var u_={minZoom:0,maxZoom:24,minPitch:0,maxPitch:60},l_=0,c_=0,f_=1.5,p_=function(){function t(e){var n=e.width,r=e.height,i=e.latitude,o=e.longitude,a=e.zoom,s=e.bearing,u=void 0===s?c_:s,l=e.pitch,c=void 0===l?l_:l,f=e.altitude,p=void 0===f?f_:f,h=e.maxZoom,d=void 0===h?u_.maxZoom:h,g=e.minZoom,y=void 0===g?u_.minZoom:g,A=e.maxPitch,v=void 0===A?u_.maxPitch:A,m=e.minPitch,_=void 0===m?u_.minPitch:m,b=e.transitionDuration,x=e.transitionEasing,w=e.transitionInterpolator,E=e.transitionInterruption,S=e.startPanLngLat,P=e.startZoomLngLat,k=e.startRotatePos,C=e.startBearing,T=e.startPitch,I=e.startZoom;Bm(this,t),o_(Number.isFinite(n),"`width` must be supplied"),o_(Number.isFinite(r),"`height` must be supplied"),o_(Number.isFinite(o),"`longitude` must be supplied"),o_(Number.isFinite(i),"`latitude` must be supplied"),o_(Number.isFinite(a),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,latitude:i,longitude:o,zoom:a,bearing:u,pitch:c,altitude:p,maxZoom:d,minZoom:y,maxPitch:v,minPitch:_,transitionDuration:b,transitionEasing:x,transitionInterpolator:w,transitionInterruption:E}),this._state={startPanLngLat:S,startZoomLngLat:P,startRotatePos:k,startBearing:C,startPitch:T,startZoom:I}}return Vm(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var i=pm(this._calculateNewLngLat({startPanLngLat:r,pos:e}),2),o=i[0],a=i[1];return this._getUpdatedMapState({longitude:o,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e,n=t.pos,r=t.deltaAngleX,i=void 0===r?0:r,o=t.deltaAngleY,a=void 0===o?0:o,s=this._state,u=s.startRotatePos,l=s.startBearing,c=s.startPitch;return Number.isFinite(l)&&Number.isFinite(c)?(e=n?this._calculateNewPitchAndBearing(s_(s_({},this._getRotationParams(n,u)),{},{startBearing:l,startPitch:c})):{bearing:l+i,pitch:c+a},this._getUpdatedMapState(e)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale;o_(r>0,"`scale` must be a positive number");var i=this._state,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(e)),o_(a,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:r,startZoom:o||0}),u=pm(new it(Object.assign({},this._viewportProps,{zoom:s})).getMapCenterByLngLatPosition({lngLat:a,pos:e}),2),l=u[0],c=u[1];return this._getUpdatedMapState({zoom:s,longitude:l,latitude:c})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(e){return new t(Object.assign({},this._viewportProps,this._state,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=r_(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;return t.pitch=r_(a,o,i),Object.assign(t,ot(t)),t}},{key:"_unproject",value:function(t){var e=new it(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new it(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return r_(n+Math.log2(e),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=r_(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(a-i)),{pitch:u,bearing:r+180*e}}},{key:"_getRotationParams",value:function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=t[1],o=e[1],a=this._viewportProps,s=a.width,u=a.height,l=n/s,c=0;return r>0?Math.abs(u-o)>5&&(c=r/(o-u)*1.2):r<0&&o>5&&(c=1-i/o),{deltaScaleX:l,deltaScaleY:c=Math.min(1,Math.max(-1,c))}}}]),t}();function h_(t){return t[0].toLowerCase()+t.slice(1)}Mv=a("6cds3");function d_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g_(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?d_(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}var y_=(Mv=a("6cds3")).createContext({viewport:null,map:null,container:null,onViewportChange:null,onViewStateChange:null,eventManager:null}),A_=y_.Provider;y_.Provider=function(t){var e=t.value,n=t.children,r=pm(Mv.useState(null),2),i=r[0],o=r[1],a=Mv.useContext(y_);return e=g_(g_({setMap:o},a),{},{map:a&&a.map||i},e),Mv.createElement(A_,{value:e},n)};var v_=y_,m_=(Mv=a("6cds3"),"undefined"!=typeof window?Mv.useLayoutEffect:Mv.useEffect);function __(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b_(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?__(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}var x_="A valid API access token is required to use Mapbox data";function w_(t){var e=t.props,n=t.width,r=t.height;return new it(b_(b_(b_({},e),e.viewState),{},{width:n,height:r}))}var E_={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},S_=Object.assign({},$m.propTypes,{width:Tv.oneOfType([Tv.number,Tv.string]),height:Tv.oneOfType([Tv.number,Tv.string]),onResize:Tv.func,disableTokenWarning:Tv.bool,visible:Tv.bool,className:Tv.string,style:Tv.object,visibilityConstraints:Tv.object}),P_=Object.assign({},$m.defaultProps,{disableTokenWarning:!1,visible:!0,onResize:function(){},className:"",style:null,visibilityConstraints:u_});function k_(){return Mv.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},Mv.createElement("h3",{key:"header"},x_),Mv.createElement("div",{key:"text"},"For information on setting up your basemap, read"),Mv.createElement("a",{key:"link",href:"https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens"},"Note on Map Tokens"))}var C_=Mv.forwardRef((function(t,e){var n=pm(Mv.useState(!0),2),i=n[0],o=n[1],a=pm(Mv.useState({width:0,height:0}),2),s=a[0],u=a[1],l=Mv.useRef(null),c=Mv.useRef(null),f=Mv.useRef(null),p=Mv.useRef(null),h=Mv.useContext(v_);m_((function(){if(C_.supported()){var e=new $m(b_(b_(b_({},t),s),{},{mapboxgl:r(t_),container:c.current,onError:function(e){401===(e.error&&e.error.status||e.status)&&i&&(console.error(x_),o(!1)),t.onError(e)}}));l.current=e,h&&h.setMap&&h.setMap(e.getMap());var n=new zm((function(e){if(e[0].contentRect){var n=e[0].contentRect,r=n.width,i=n.height;u({width:r,height:i}),t.onResize({width:r,height:i})}}));return n.observe(f.current),function(){e.finalize(),l.current=null,n.disconnect()}}}),[]),m_((function(){l.current&&l.current.setProps(b_(b_({},t),s))}));var d=l.current&&l.current.getMap();Mv.useImperativeHandle(e,(function(){return function(t){return{getMap:function(){return t.current&&t.current.getMap()},queryRenderedFeatures:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.current&&t.current.getMap();return r&&r.queryRenderedFeatures(e,n)}}}(l)}),[]);var g=Mv.useCallback((function(t){var e=t.target;e===p.current&&e.scrollTo(0,0)}),[]),y=d&&Mv.createElement(A_,{value:b_(b_({},h),{},{viewport:h.viewport||w_(b_({map:d,props:t},s)),map:d,container:h.container||f.current})},Mv.createElement("div",{key:"map-overlays",className:"overlays",ref:p,style:E_,onScroll:g},t.children)),A=t.className,v=t.width,m=t.height,_=t.style,b=t.visibilityConstraints,x=Object.assign({position:"relative"},_,{width:v,height:m}),w=t.visible&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u_;for(var n in e){var r=n.slice(0,3),i=h_(n.slice(3));if("min"===r&&t[i]<e[n])return!1;if("max"===r&&t[i]>e[n])return!1}return!0}(t.viewState||t,b),E=Object.assign({},E_,{visibility:w?"inherit":"hidden"});return Mv.createElement("div",{key:"map-container",ref:f,style:x},Mv.createElement("div",{key:"map-mapbox",ref:c,style:E,className:A}),y,!i&&!t.disableTokenWarning&&Mv.createElement(k_,null))}));C_.supported=function(){return r(t_)&&r(t_).supported()},C_.propTypes=S_,C_.defaultProps=P_;var T_=C_;function I_(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return M_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M_(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function M_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var O_=function(){function t(){Bm(this,t),mt(this,"propNames",[])}return Vm(t,[{key:"arePropsEqual",value:function(t,e){var n,r=I_(this.propNames||[]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!n_(t[i],e[i]))return!1}}catch(t){r.e(t)}finally{r.f()}return!0}},{key:"initializeProps",value:function(t,e){return{start:t,end:e}}},{key:"interpolateProps",value:function(t,e,n){o_(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(t,e){return e.transitionDuration}}]),t}();function L_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R_(t,e){return(R_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D_(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R_(t,e)}vt=a("5qgrd");function N_(t){return(N_="function"==typeof Symbol&&"symbol"==vt.default(Symbol.iterator)?function(t){return void 0===t?"undefined":vt.default(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":vt.default(t)})(t)}function F_(t,e){if(e&&("object"===N_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return L_(t)}function j_(t){return(j_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}a("1Ft0x");var z_={longitude:1,bearing:1};function B_(t){return Number.isFinite(t)||Array.isArray(t)}function U_(t,e,n){return function(t){return t in z_}(t)&&Math.abs(n-e)>180&&(n=n<0?n+360:n-360),n}function V_(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return G_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G_(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function G_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j_(t);if(e){var i=j_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F_(this,n)}}var W_=["longitude","latitude","zoom","bearing","pitch"],H_=["latitude","longitude","zoom","width","height"],X_=["bearing","pitch"],Z_={speed:1.2,curve:1.414};!function(t){D_(n,t);var e=q_(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Bm(this,n),mt(L_(t=e.call(this)),"propNames",W_),t.props=Object.assign({},Z_,r),t}Vm(n,[{key:"initializeProps",value:function(t,e){var n,r={},i={},o=V_(H_);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=t[a],u=e[a];o_(B_(s)&&B_(u),"".concat(a," must be supplied for transition")),r[a]=s,i[a]=U_(a,s,u)}}catch(t){o.e(t)}finally{o.f()}var l,c=V_(X_);try{for(c.s();!(l=c.n()).done;){var f=l.value,p=t[f]||0,h=e[f]||0;r[f]=p,i[f]=U_(f,p,h)}}catch(t){c.e(t)}finally{c.f()}return{start:r,end:i}}},{key:"interpolateProps",value:function(t,e,n){var r,i=lt(t,e,n,this.props),o=V_(X_);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=i_(t[a],e[a],n)}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"getDuration",value:function(t,e){var n=e.transitionDuration;return"auto"===n&&(n=ct(t,e,this.props)),n}}])}(O_);function Y_(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Q_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q_(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Q_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j_(t);if(e){var i=j_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F_(this,n)}}a("1Ft0x");var J_=["longitude","latitude","zoom","bearing","pitch"],$_=function(t){D_(n,t);var e=K_(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Bm(this,n),t=e.call(this),Array.isArray(r)&&(r={transitionProps:r}),t.propNames=r.transitionProps||J_,r.around&&(t.around=r.around),t}return Vm(n,[{key:"initializeProps",value:function(t,e){var n={},r={};if(this.around){n.around=this.around;var i=new it(t).unproject(this.around);Object.assign(r,e,{around:new it(e).project(i),aroundLngLat:i})}var o,a=Y_(this.propNames);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=t[s],l=e[s];o_(B_(u)&&B_(l),"".concat(s," must be supplied for transition")),n[s]=u,r[s]=U_(s,u,l)}}catch(t){a.e(t)}finally{a.f()}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){var r,i={},o=Y_(this.propNames);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=i_(t[a],e[a],n)}}catch(t){o.e(t)}finally{o.f()}if(e.around){var s=pm(new it(Object.assign({},e,i)).getMapCenterByLngLatPosition({lngLat:e.aroundLngLat,pos:i_(t.around,e.around,n)}),2),u=s[0],l=s[1];i.longitude=u,i.latitude=l}return i}}]),n}(O_),tb=function(){};var eb=1,nb=2,rb=3,ib=4,ob={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new $_,transitionInterruption:eb,onTransitionStart:tb,onTransitionInterrupt:tb,onTransitionEnd:tb},ab=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Bm(this,t),mt(this,"_animationFrame",null),mt(this,"_onTransitionFrame",(function(){e._animationFrame=requestAnimationFrame(e._onTransitionFrame),e._updateViewport()})),this.props=null,this.onViewportChange=n.onViewportChange||tb,this.onStateChange=n.onStateChange||tb,this.time=n.getTime||Date.now}return Vm(t,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(t){var e=this.props;if(this.props=t,!e||this._shouldIgnoreViewportChange(e,t))return!1;if(this._isTransitionEnabled(t)){var n=Object.assign({},e),r=Object.assign({},t);if(this._isTransitionInProgress()&&(e.onTransitionInterrupt(),this.state.interruption===nb?Object.assign(n,this.state.endProps):Object.assign(n,this.state.propsInTransition),this.state.interruption===ib)){var i=this.time(),o=(i-this.state.startTime)/this.state.duration;r.transitionDuration=this.state.duration-(i-this.state.startTime),r.transitionEasing=function(t,e){var n=t(e);return function(r){return 1/(1-n)*(t(r*(1-e)+e)-n)}}(this.state.easing,o),r.transitionInterpolator=n.transitionInterpolator}return r.onTransitionStart(),this._triggerTransition(n,r),!0}return this._isTransitionInProgress()&&(e.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function(t){var e=t.transitionDuration,n=t.transitionInterpolator;return(e>0||"auto"===e)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return!t||(this._isTransitionInProgress()?this.state.interruption===rb||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e))}},{key:"_triggerTransition",value:function(t,e){o_(this._isTransitionEnabled(e)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var n=e.transitionInterpolator,r=n.getDuration?n.getDuration(t,e):e.transitionDuration;if(0!==r){var i=e.transitionInterpolator.initializeProps(t,e),o={inTransition:!0,isZooming:t.zoom!==e.zoom,isPanning:t.longitude!==e.longitude||t.latitude!==e.latitude,isRotating:t.bearing!==e.bearing||t.pitch!==e.pitch};this.state={duration:r,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startTime:this.time(),startProps:i.start,endProps:i.end,animation:null,propsInTransition:{}},this._onTransitionFrame(),this.onStateChange(o)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var t=this.time(),e=this.state,n=e.startTime,r=e.duration,i=e.easing,o=e.interpolator,a=e.startProps,s=e.endProps,u=!1,l=(t-n)/r;l>=1&&(l=1,u=!0),l=i(l);var c=o.interpolateProps(a,s,l),f=new p_(Object.assign({},this.props,c));this.state.propsInTransition=f.getViewportProps(),this.onViewportChange(this.state.propsInTransition,this.props),u&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();function sb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ub(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?sb(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}mt(ab,"defaultProps",ob);var lb={transitionDuration:0},cb={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new $_,transitionInterruption:eb},fb=300,pb=function(t){return 1-(1-t)*(1-t)},hb=["wheel"],db=["panstart","panmove","panend"],gb=["pinchstart","pinchmove","pinchend"],yb=["tripanstart","tripanmove","tripanend"],Ab=["doubletap"],vb=["keydown"],mb=function(){function t(){var e=this;Bm(this,t),mt(this,"events",[]),mt(this,"scrollZoom",!0),mt(this,"dragPan",!0),mt(this,"dragRotate",!0),mt(this,"doubleClickZoom",!0),mt(this,"touchZoom",!0),mt(this,"touchRotate",!1),mt(this,"keyboard",!0),mt(this,"_interactionState",{isDragging:!1}),mt(this,"_events",{}),mt(this,"_setInteractionState",(function(t){Object.assign(e._interactionState,t),e.onStateChange&&e.onStateChange(e._interactionState)})),mt(this,"_onTransition",(function(t,n){e.onViewportChange(t,e._interactionState,n)})),this.handleEvent=this.handleEvent.bind(this),this._transitionManager=new ab({onViewportChange:this._onTransition,onStateChange:this._setInteractionState})}return Vm(t,[{key:"handleEvent",value:function(t){this.mapState=this.getMapState();var e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"blockEvents",value:function(t){var e=this,n=setTimeout((function(){e._eventStartBlocked===n&&(e._eventStartBlocked=null)}),t);this._eventStartBlocked=n}},{key:"updateViewport",value:function(t,e,n){var r=this.mapState instanceof p_?this.mapState.getViewportProps():this.mapState,i=ub(ub({},t.getViewportProps()),e),o=Object.keys(i).some((function(t){return r[t]!==i[t]}));this._state=t.getState(),this._setInteractionState(n),o&&this.onViewportChange(i,this._interactionState,r)}},{key:"getMapState",value:function(t){return new p_(ub(ub(ub({},this.mapStateProps),this._state),t))}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"setOptions",value:function(t){var e=t.onViewportChange,n=t.onStateChange,r=t.eventManager,i=void 0===r?this.eventManager:r,o=t.isInteractive,a=void 0===o||o,s=t.scrollZoom,u=void 0===s?this.scrollZoom:s,l=t.dragPan,c=void 0===l?this.dragPan:l,f=t.dragRotate,p=void 0===f?this.dragRotate:f,h=t.doubleClickZoom,d=void 0===h?this.doubleClickZoom:h,g=t.touchZoom,y=void 0===g?this.touchZoom:g,A=t.touchRotate,v=void 0===A?this.touchRotate:A,m=t.keyboard,_=void 0===m?this.keyboard:m;this.onViewportChange=e,this.onStateChange=n;var b=this.mapStateProps||{},x=b.height!==t.height||b.width!==t.width;this.mapStateProps=t,x&&(this.mapState=b,this.updateViewport(new p_(t))),this._transitionManager.processViewportChange(t),this.eventManager!==i&&(this.eventManager=i,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(hb,a&&Boolean(u)),this.toggleEvents(db,a&&Boolean(c||p)),this.toggleEvents(gb,a&&Boolean(y||v)),this.toggleEvents(yb,a&&Boolean(v)),this.toggleEvents(Ab,a&&Boolean(d)),this.toggleEvents(vb,a&&Boolean(_)),this.scrollZoom=u,this.dragPan=c,this.dragRotate=p,this.doubleClickZoom=d,this.touchZoom=y,this.touchRotate=v,this.keyboard=_}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach((function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))}))}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);this._panRotate=this.isFunctionKeyPressed(t)||t.rightButton;var n=this._panRotate?this.mapState.rotateStart({pos:e}):this.mapState.panStart({pos:e});return this.updateViewport(n,lb,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){return!!this.isDragging()&&(this._panRotate?this._onPanRotate(t):this._onPanMove(t))}},{key:"_onPanEnd",value:function(t){return!!this.isDragging()&&(this._panRotate?this._onPanRotateEnd(t):this._onPanMoveEnd(t))}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.mapState.pan({pos:e});return this.updateViewport(n,lb,{isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(t){if(this.dragPan){var e=this.dragPan.inertia,n=void 0===e?fb:e;if(n&&t.velocity){var r=this.getCenter(t),i=[r[0]+t.velocityX*n/2,r[1]+t.velocityY*n/2],o=this.mapState.pan({pos:i}).panEnd();return this.updateViewport(o,ub(ub({},cb),{},{transitionDuration:n,transitionEasing:pb}),{isDragging:!1,isPanning:!0}),!0}}var a=this.mapState.panEnd();return this.updateViewport(a,null,{isDragging:!1,isPanning:!1}),!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=this.getCenter(t),n=this.mapState.rotate({pos:e});return this.updateViewport(n,lb,{isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(t){if(this.dragRotate){var e=this.dragRotate.inertia,n=void 0===e?fb:e;if(n&&t.velocity){var r=this.getCenter(t),i=[r[0]+t.velocityX*n/2,r[1]+t.velocityY*n/2],o=this.mapState.rotate({pos:i}).rotateEnd();return this.updateViewport(o,ub(ub({},cb),{},{transitionDuration:n,transitionEasing:pb}),{isDragging:!1,isRotating:!0}),!0}}var a=this.mapState.panEnd();return this.updateViewport(a,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;var e=this.scrollZoom,n=e.speed,r=void 0===n?.01:n,i=e.smooth,o=void 0!==i&&i;t.preventDefault();var a=this.getCenter(t),s=t.delta,u=2/(1+Math.exp(-Math.abs(s*r)));s<0&&0!==u&&(u=1/u);var l=this.mapState.zoom({pos:a,scale:u});return l.getViewportProps().zoom!==this.mapStateProps.zoom&&(this.updateViewport(l,ub(ub({},cb),{},{transitionInterpolator:new $_({around:a}),transitionDuration:o?250:1}),{isPanning:!0,isZooming:!0}),!0)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),n=this.mapState.zoomStart({pos:e}).rotateStart({pos:e});return this._startPinchRotation=t.rotation,this._lastPinchEvent=t,this.updateViewport(n,lb,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.isDragging())return!1;if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.mapState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation;e=e.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(e,lb,{isDragging:!0,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:Boolean(this.touchRotate)}),this._lastPinchEvent=t,!0}},{key:"_onPinchEnd",value:function(t){if(!this.isDragging())return!1;if(this.touchZoom){var e=this.touchZoom.inertia,n=void 0===e?fb:e,r=this._lastPinchEvent;if(n&&r&&t.scale!==r.scale){var i=this.getCenter(t),o=this.mapState.rotateEnd(),a=Math.log2(t.scale),s=(a-Math.log2(r.scale))/(t.deltaTime-r.deltaTime),u=Math.pow(2,a+s*n/2);return o=o.zoom({pos:i,scale:u}).zoomEnd(),this.updateViewport(o,ub(ub({},cb),{},{transitionInterpolator:new $_({around:i}),transitionDuration:n,transitionEasing:pb}),{isDragging:!1,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:!1}),this.blockEvents(n),!0}}var l=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(l,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onTriplePanStart",value:function(t){var e=this.getCenter(t),n=this.mapState.rotateStart({pos:e});return this.updateViewport(n,lb,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(t){if(!this.isDragging())return!1;if(!this.touchRotate)return!1;var e=this.getCenter(t);e[0]-=t.deltaX;var n=this.mapState.rotate({pos:e});return this.updateViewport(n,lb,{isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(t){if(!this.isDragging())return!1;if(this.touchRotate){var e=this.touchRotate.inertia,n=void 0===e?fb:e;if(n&&t.velocityY){var r=this.getCenter(t),i=[r[0],r[1]+=t.velocityY*n/2],o=this.mapState.rotate({pos:i});return this.updateViewport(o,ub(ub({},cb),{},{transitionDuration:n,transitionEasing:pb}),{isDragging:!1,isRotating:!0}),this.blockEvents(n),!1}}var a=this.mapState.rotateEnd();return this.updateViewport(a,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),n=this.isFunctionKeyPressed(t),r=this.mapState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,Object.assign({},cb,{transitionInterpolator:new $_({around:e})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.keyboard,i=r.zoomSpeed,o=void 0===i?2:i,a=r.moveSpeed,s=void 0===a?100:a,u=r.rotateSpeedX,l=void 0===u?15:u,c=r.rotateSpeedY,f=void 0===c?10:c,p=this.mapStateProps;switch(t.srcEvent.keyCode){case 189:e=n?this.getMapState({zoom:p.zoom-Math.log2(o)-1}):this.getMapState({zoom:p.zoom-Math.log2(o)});break;case 187:e=n?this.getMapState({zoom:p.zoom+Math.log2(o)+1}):this.getMapState({zoom:p.zoom+Math.log2(o)});break;case 37:e=n?this.getMapState({bearing:p.bearing-l}):this.mapState.pan({pos:[s,0],startPos:[0,0]});break;case 39:e=n?this.getMapState({bearing:p.bearing+l}):this.mapState.pan({pos:[-s,0],startPos:[0,0]});break;case 38:e=n?this.getMapState({pitch:p.pitch+f}):this.mapState.pan({pos:[0,s],startPos:[0,0]});break;case 40:e=n?this.getMapState({pitch:p.pitch-f}):this.mapState.pan({pos:[0,-s],startPos:[0,0]});break;default:return!1}return this.updateViewport(e,cb)}}]),t}();function _b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bb(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?_b(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}var xb=Object.assign({},T_.propTypes,{maxZoom:Tv.number,minZoom:Tv.number,maxPitch:Tv.number,minPitch:Tv.number,onViewStateChange:Tv.func,onViewportChange:Tv.func,onInteractionStateChange:Tv.func,transitionDuration:Tv.oneOfType([Tv.number,Tv.string]),transitionInterpolator:Tv.object,transitionInterruption:Tv.number,transitionEasing:Tv.func,onTransitionStart:Tv.func,onTransitionInterrupt:Tv.func,onTransitionEnd:Tv.func,scrollZoom:Tv.oneOfType([Tv.bool,Tv.object]),dragPan:Tv.oneOfType([Tv.bool,Tv.object]),dragRotate:Tv.oneOfType([Tv.bool,Tv.object]),doubleClickZoom:Tv.bool,touchZoom:Tv.oneOfType([Tv.bool,Tv.object]),touchRotate:Tv.oneOfType([Tv.bool,Tv.object]),keyboard:Tv.oneOfType([Tv.bool,Tv.object]),onHover:Tv.func,onClick:Tv.func,onDblClick:Tv.func,onContextMenu:Tv.func,onMouseDown:Tv.func,onMouseMove:Tv.func,onMouseUp:Tv.func,onTouchStart:Tv.func,onTouchMove:Tv.func,onTouchEnd:Tv.func,onMouseEnter:Tv.func,onMouseLeave:Tv.func,onMouseOut:Tv.func,onWheel:Tv.func,touchAction:Tv.string,eventRecognizerOptions:Tv.object,clickRadius:Tv.number,interactiveLayerIds:Tv.array,getCursor:Tv.func,controller:Tv.instanceOf(mb)}),wb=Object.assign({},T_.defaultProps,u_,ab.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(t){return t.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",eventRecognizerOptions:{},clickRadius:0,getCursor:function(t){var e=t.isDragging,n=t.isHovering;return e?"grabbing":n?"pointer":"grab"}});function Eb(t){if(t.lngLat||!t.offsetCenter)return t;var e=t.offsetCenter,n=e.x,r=e.y;if(!Number.isFinite(n)||!Number.isFinite(r))return t;var i=[n,r];return t.point=i,t.lngLat=this.viewport.unproject(i),t}function Sb(t){var e=this.map;if(!e||!t)return null;var n={},r=this.props.clickRadius;this.props.interactiveLayerIds&&(n.layers=this.props.interactiveLayerIds);try{return e.queryRenderedFeatures(r?[[t[0]-r,t[1]+r],[t[0]+r,t[1]-r]]:t,n)}catch(t){return null}}function Pb(t,e){var n=this.props[t];n&&n(Eb.call(this,e))}function kb(t){Pb.call(this,"touch"===t.pointerType?"onTouchStart":"onMouseDown",t)}function Cb(t){Pb.call(this,"touch"===t.pointerType?"onTouchEnd":"onMouseUp",t)}function Tb(t){if(Pb.call(this,"touch"===t.pointerType?"onTouchMove":"onMouseMove",t),!this.state.isDragging){var e,n=this.props,r=n.onHover,i=n.interactiveLayerIds;t=Eb.call(this,t),(i||r)&&(e=Sb.call(this,t.point));var o=Boolean(i&&e&&e.length>0),a=o&&!this.state.isHovering,s=!o&&this.state.isHovering;(r||a)&&(t.features=e,r&&r(t)),a&&Pb.call(this,"onMouseEnter",t),s&&Pb.call(this,"onMouseLeave",t),(a||s)&&this.setState({isHovering:o})}}function Ib(t){var e=this.props,n=e.onClick,r=e.onNativeClick,i=e.onDblClick,o=e.doubleClickZoom,a=[],s=i||o;switch(t.type){case"anyclick":a.push(r),s||a.push(n);break;case"click":s&&a.push(n)}(a=a.filter(Boolean)).length&&((t=Eb.call(this,t)).features=Sb.call(this,t.point),a.forEach((function(e){return e(t)})))}var Mb=Mv.forwardRef((function(t,e){var n=Mv.useContext(v_),r=Mv.useMemo((function(){return t.controller||new mb}),[]),i=Mv.useMemo((function(){return new td(null,{touchAction:t.touchAction,recognizerOptions:t.eventRecognizerOptions})}),[]),o=Mv.useRef(null),a=Mv.useRef(null),s=Mv.useRef({width:0,height:0,state:{isHovering:!1,isDragging:!1}}).current;s.props=t,s.map=a.current&&a.current.getMap(),s.setState=function(e){s.state=bb(bb({},s.state),e),o.current.style.cursor=t.getCursor(s.state)};var u,l,c=!0,f=function(t,e,n){if(c)u=[t,e,n];else{var r=s.props,i=r.onViewStateChange,o=r.onViewportChange;i&&i({viewState:t,interactionState:e,oldViewState:n}),o&&o(t,e,n)}};Mv.useImperativeHandle(e,(function(){return function(t){return{getMap:t.current&&t.current.getMap,queryRenderedFeatures:t.current&&t.current.queryRenderedFeatures}}(a)}),[]);var p=Mv.useMemo((function(){return bb(bb({},n),{},{eventManager:i,container:n.container||o.current})}),[n,o.current]);p.onViewportChange=f,p.viewport=n.viewport||w_(s),s.viewport=p.viewport;var h=function(t){var e=t.isDragging,n=void 0!==e&&e;if(n!==s.state.isDragging&&s.setState({isDragging:n}),c)l=t;else{var r=s.props.onInteractionStateChange;r&&r(t)}},d=function(){s.width&&s.height&&r.setOptions(bb(bb(bb({},s.props),s.props.viewState),{},{isInteractive:Boolean(s.props.onViewStateChange||s.props.onViewportChange),onViewportChange:f,onStateChange:h,eventManager:i,width:s.width,height:s.height}))};Mv.useEffect((function(){return i.setElement(o.current),i.on({pointerdown:kb.bind(s),pointermove:Tb.bind(s),pointerup:Cb.bind(s),pointerleave:Pb.bind(s,"onMouseOut"),click:Ib.bind(s),anyclick:Ib.bind(s),dblclick:Pb.bind(s,"onDblClick"),wheel:Pb.bind(s,"onWheel"),contextmenu:Pb.bind(s,"onContextMenu")}),function(){i.destroy()}}),[]),m_((function(){u&&f.apply(void 0,fm(u)),l&&h(l)})),d();var g=t.width,y=t.height,A=t.style,v=t.getCursor,m=Mv.useMemo((function(){return bb(bb({position:"relative"},A),{},{width:g,height:y,cursor:v(s.state)})}),[A,g,y,v,s.state]);return u&&s._child||(s._child=Mv.createElement(A_,{value:p},Mv.createElement("div",{key:"event-canvas",ref:o,style:m},Mv.createElement(T_,um({},t,{width:"100%",height:"100%",style:null,onResize:function(t){var e=t.width,n=t.height;s.width=e,s.height=n,d(),s.props.onResize({width:e,height:n})},ref:a}))))),c=!1,s._child}));Mb.supported=T_.supported,Mb.propTypes=xb,Mb.defaultProps=wb;Mv=a("6cds3"),Mv=a("6cds3"),Mv=a("6cds3");function Ob(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Ob(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===N_(t)&&"object"===N_(e)){var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var o=0,a=r;o<a.length;o++){var s=a[o];if(!e.hasOwnProperty(s))return!1;if(!Ob(t[s],e[s]))return!1}return!0}return!1}function Lb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Rb={type:Tv.string.isRequired,id:Tv.string},Db=0;function Nb(t,e,n){if(t.style&&t.style._loaded){var r=function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?Lb(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({},n);return delete r.id,delete r.children,t.addSource(e,r),t.getSource(e)}return null}function Fb(t){var e=Mv.useContext(v_),n=Mv.useRef({id:t.id,type:t.type}),r=pm(Mv.useState(0),2)[1],i=Mv.useMemo((function(){return t.id||"jsx-source-".concat(Db++)}),[]),o=e.map;Mv.useEffect((function(){if(o){var t=function(){return r((function(t){return t+1}))};return o.on("styledata",t),function(){o.off("styledata",t),requestAnimationFrame((function(){o.style&&o.style._loaded&&o.getSource(i)&&o.removeSource(i)}))}}}),[o,i]);var a=o&&o.style&&o.getSource(i);return a?function(t,e,n){o_(e.id===n.id,"source id changed"),o_(e.type===n.type,"source type changed");var r="",i=0;for(var o in e)"children"===o||"id"===o||Ob(n[o],e[o])||(r=o,i++);if(i){var a=e.type;if("geojson"===a)t.setData(e.data);else if("image"===a)t.updateImage({url:e.url,coordinates:e.coordinates});else if("canvas"!==a&&"video"!==a||1!==i||"coordinates"!==r)if("vector"===a&&t.setUrl)switch(r){case"url":t.setUrl(e.url);break;case"tiles":t.setTiles(e.tiles)}else console.warn("Unable to update <Source> prop: ".concat(r));else t.setCoordinates(e.coordinates)}}(a,t,n.current):a=Nb(o,i,t),n.current=t,a&&Mv.Children.map(t.children,(function(t){return t&&Mv.cloneElement(t,{source:i})}))||null}Fb.propTypes=Rb;function jb(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}Mv=a("6cds3");function zb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bb(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?zb(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}var Ub={type:Tv.oneOf(["fill","line","symbol","circle","fill-extrusion","raster","background","heatmap","hillshade"]).isRequired,id:Tv.string,source:Tv.string,beforeId:Tv.string};function Vb(t,e,n,r){o_(n.id===r.id,"layer id changed"),o_(n.type===r.type,"layer type changed");try{!function(t,e,n,r){var i=n.layout,o=void 0===i?{}:i,a=n.paint,s=void 0===a?{}:a,u=n.filter,l=n.minzoom,c=n.maxzoom,f=n.beforeId,p=jb(n,["layout","paint","filter","minzoom","maxzoom","beforeId"]);if(f!==r.beforeId&&t.moveLayer(e,f),o!==r.layout){var h=r.layout||{};for(var d in o)Ob(o[d],h[d])||t.setLayoutProperty(e,d,o[d]);for(var g in h)o.hasOwnProperty(g)||t.setLayoutProperty(e,g,void 0)}if(s!==r.paint){var y=r.paint||{};for(var A in s)Ob(s[A],y[A])||t.setPaintProperty(e,A,s[A]);for(var v in y)s.hasOwnProperty(v)||t.setPaintProperty(e,v,void 0)}for(var m in Ob(u,r.filter)||t.setFilter(e,u),l===r.minzoom&&c===r.maxzoom||t.setLayerZoomRange(e,l,c),p)Ob(p[m],r[m])||t.setLayerProperty(e,m,p[m])}(t,e,n,r)}catch(t){console.warn(t)}}var Gb=0;function qb(t){var e=Mv.useContext(v_),n=Mv.useRef({id:t.id,type:t.type}),r=pm(Mv.useState(0),2)[1],i=Mv.useMemo((function(){return t.id||"jsx-layer-".concat(Gb++)}),[]),o=e.map;return Mv.useEffect((function(){if(o){var t=function(){return r((function(t){return t+1}))};return o.on("styledata",t),function(){o.off("styledata",t),o.style&&o.style._loaded&&o.removeLayer(i)}}}),[o]),o&&o.style&&o.getLayer(i)?Vb(o,i,t,n.current):function(t,e,n){if(t.style&&t.style._loaded){var r=Bb(Bb({},n),{},{id:e});delete r.beforeId,t.addLayer(r,n.beforeId)}}(o,i,t),n.current=t,null}qb.propTypes=Ub;Mv=a("6cds3"),Mv=a("6cds3"),Mv=a("6cds3");var Wb={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0,capturePointerMove:!1},Hb={captureScroll:Tv.bool,captureDrag:Tv.bool,captureClick:Tv.bool,captureDoubleClick:Tv.bool,capturePointerMove:Tv.bool};function Xb(t){var e=t.containerRef.current,n=t.context.eventManager;if(e&&n){var r={wheel:function(e){var n=t.props;n.captureScroll&&e.stopPropagation(),n.onScroll&&n.onScroll(e,t)},panstart:function(e){var n=t.props;n.captureDrag&&e.stopPropagation(),n.onDragStart&&n.onDragStart(e,t)},anyclick:function(e){var n=t.props;n.captureClick&&e.stopPropagation(),n.onNativeClick&&n.onNativeClick(e,t)},click:function(e){var n=t.props;n.captureClick&&e.stopPropagation(),n.onClick&&n.onClick(e,t)},dblclick:function(e){var n=t.props;n.captureDoubleClick&&e.stopPropagation(),n.onDoubleClick&&n.onDoubleClick(e,t)},pointermove:function(e){var n=t.props;n.capturePointerMove&&e.stopPropagation(),n.onPointerMove&&n.onPointerMove(e,t)}};return n.watch(r,e),function(){n.off(r)}}}function Zb(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Mv.useContext(v_),n=Mv.useRef(null),r=Mv.useRef({props:t,state:{},context:e,containerRef:n}),i=r.current;return i.props=t,i.context=e,Mv.useEffect((function(){return Xb(i)}),[e.eventManager]),i}function Yb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j_(t);if(e){var i=j_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F_(this,n)}}function Qb(t){var e=t.instance,n=Zb(t),r=n.context,i=n.containerRef;return e._context=r,e._containerRef=i,e._render()}var Kb=function(t){D_(n,t);var e=Yb(n);function n(){var t;Bm(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return mt(L_(t=e.call.apply(e,[this].concat(i))),"_context",{}),mt(L_(t),"_containerRef",Mv.createRef()),mt(L_(t),"_onScroll",(function(t){})),mt(L_(t),"_onDragStart",(function(t){})),mt(L_(t),"_onDblClick",(function(t){})),mt(L_(t),"_onClick",(function(t){})),mt(L_(t),"_onPointerMove",(function(t){})),t}return Vm(n,[{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){return Mv.createElement(Qb,um({instance:this},this.props,{onScroll:this._onScroll,onDragStart:this._onDragStart,onDblClick:this._onDblClick,onClick:this._onClick,onPointerMove:this._onPointerMove}))}}]),n}(Mv.PureComponent);mt(Kb,"propTypes",Hb),mt(Kb,"defaultProps",Wb);Mv=a("6cds3"),Mv=a("6cds3"),Mv=a("6cds3");function Jb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $b(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?Jb(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}var tx=Object.assign({},Hb,{draggable:Tv.bool,onDrag:Tv.func,onDragEnd:Tv.func,onDragStart:Tv.func,offsetLeft:Tv.number,offsetTop:Tv.number}),ex=Object.assign({},Wb,{draggable:!1,offsetLeft:0,offsetTop:0});function nx(t){var e=t.offsetCenter;return[e.x,e.y]}function rx(t,e,n,r){var i=t[0]+e[0]-n.offsetLeft,o=t[1]+e[1]-n.offsetTop;return r.viewport.unproject([i,o])}function ix(t,e){var n=e.props,r=e.callbacks,i=e.state,o=e.context,a=e.containerRef;if(n.draggable){t.stopPropagation();var s=nx(t),u=function(t,e){var n=t.center,r=n.x,i=n.y;if(e){var o=e.getBoundingClientRect();return[o.left-r,o.top-i]}return null}(t,a.current);if(i.setDragPos(s),i.setDragOffset(u),r.onDragStart&&u){var l=Object.assign({},t);l.lngLat=rx(s,u,n,o),r.onDragStart(l)}}}function ox(t){var e=t.context.eventManager;if(e&&t.state.dragPos){var n={panmove:function(e){return function(t,e){var n=e.props,r=e.callbacks,i=e.state,o=e.context;t.stopPropagation();var a=nx(t);i.setDragPos(a);var s=i.dragOffset;if(r.onDrag&&s){var u=Object.assign({},t);u.lngLat=rx(a,s,n,o),r.onDrag(u)}}(e,t)},panend:function(e){return function(t,e){var n=e.props,r=e.callbacks,i=e.state,o=e.context;t.stopPropagation();var a=i.dragPos,s=i.dragOffset;if(i.setDragPos(null),i.setDragOffset(null),r.onDragEnd&&a&&s){var u=Object.assign({},t);u.lngLat=rx(a,s,n,o),r.onDragEnd(u)}}(e,t)},pancancel:function(e){return n=e,r=t.state,n.stopPropagation(),r.setDragPos(null),void r.setDragOffset(null);var n,r}};return e.watch(n),function(){e.off(n)}}}var ax="undefined"!=typeof window&&window.devicePixelRatio||1,sx=function(t){return Math.round(t*ax)/ax},ux=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";if(null===t)return e;var r="x"===n?t.offsetWidth:t.offsetHeight;return sx(e/100*r)/r*100};function lx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var cx=Object.assign({},tx,{className:Tv.string,longitude:Tv.number.isRequired,latitude:Tv.number.isRequired,style:Tv.object}),fx=Object.assign({},ex,{className:""});function px(t){var e=function(t){var e=pm(Mv.useState(null),2),n=e[0],r=e[1],i=pm(Mv.useState(null),2),o=i[0],a=i[1],s=Zb($b($b({},t),{},{onDragStart:ix}));return s.callbacks=t,s.state.dragPos=n,s.state.setDragPos=r,s.state.dragOffset=o,s.state.setDragOffset=a,Mv.useEffect((function(){return ox(s)}),[s.context.eventManager,Boolean(n)]),s}(t),n=e.state,r=e.containerRef,i=t.children,o=t.className,a=t.draggable,s=t.style,u=n.dragPos,l=function(t){var e=t.props,n=t.state,r=t.context,i=e.longitude,o=e.latitude,a=e.offsetLeft,s=e.offsetTop,u=n.dragPos,l=n.dragOffset;if(u&&l)return[u[0]+l[0],u[1]+l[1]];var c=pm(r.viewport.project([i,o]),2),f=c[0],p=c[1];return[f+=a,p+=s]}(e),c=pm(l,2),f=c[0],p=c[1],h="translate(".concat(sx(f),"px, ").concat(sx(p),"px)"),d=a?u?"grabbing":"grab":"auto",g=Mv.useMemo((function(){var t=function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?lx(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({position:"absolute",left:0,top:0,transform:h,cursor:d},s);return Mv.createElement("div",{className:"mapboxgl-marker ".concat(o),ref:e.containerRef,style:t},i)}),[i,o]),y=r.current;return y&&(y.style.transform=h,y.style.cursor=d),g}px.defaultProps=fx,px.propTypes=cx;Mv.memo(px),Mv=a("6cds3"),Mv=a("6cds3");var hx={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},dx=Object.keys(hx);var gx=Object.assign({},Hb,{className:Tv.string,longitude:Tv.number.isRequired,latitude:Tv.number.isRequired,altitude:Tv.number,offsetLeft:Tv.number,offsetTop:Tv.number,tipSize:Tv.number,closeButton:Tv.bool,closeOnClick:Tv.bool,anchor:Tv.oneOf(Object.keys(hx)),dynamicPosition:Tv.bool,sortByDepth:Tv.bool,onClose:Tv.func}),yx=Object.assign({},Wb,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});function Ax(t,e,n,r){var i=pm(r,2),o=i[0],a=i[1],s=t.anchor,u=t.dynamicPosition,l=t.tipSize;return n&&u?function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.selfWidth,a=t.selfHeight,s=t.anchor,u=t.padding,l=void 0===u?0:u,c=hx[s],f=c.x,p=c.y,h=n-p*a,d=h+a,g=Math.max(0,l-h)+Math.max(0,d-i+l);if(g>0){var y=p,A=g;for(p=0;p<=1;p+=.5)d=(h=n-p*a)+a,(g=Math.max(0,l-h)+Math.max(0,d-i+l))<A&&(A=g,y=p);p=y}var v=.5;.5===p&&(f=Math.floor(f),v=1);var m=e-f*o,_=m+o,b=Math.max(0,l-m)+Math.max(0,_-r+l);if(b>0){var x=f,w=b;for(f=0;f<=1;f+=v)_=(m=e-f*o)+o,(b=Math.max(0,l-m)+Math.max(0,_-r+l))<w&&(w=b,x=f);f=x}return dx.find((function(t){var e=hx[t];return e.x===f&&e.y===p}))||s}({x:o,y:a,anchor:s,padding:l,width:e.width,height:e.height,selfWidth:n.clientWidth,selfHeight:n.clientHeight}):s}function vx(t){var e=Mv.useRef(null),n=Zb(t),r=n.context,i=n.containerRef,o=pm(Mv.useState(!1),2)[1];Mv.useEffect((function(){o(!0)}),[e.current]),Mv.useEffect((function(){if(r.eventManager&&t.closeOnClick){var e=function(){return n.props.onClose()};return r.eventManager.on("anyclick",e),function(){r.eventManager.off("anyclick",e)}}}),[r.eventManager,t.closeOnClick]);var a=r.viewport,s=t.className,u=t.longitude,l=t.latitude,c=t.altitude,f=t.tipSize,p=t.closeButton,h=t.children,d=a.project([u,l,c]),g=Ax(t,a,e.current,d),y=function(t,e,n,r,i){var o=pm(r,3),a=o[0],s=o[1],u=o[2],l=t.offsetLeft,c=t.offsetTop,f=t.sortByDepth,p=hx[i],h=a+l,d=s+c,g=ux(n,100*-p.x),y=ux(n,100*-p.y,"y"),A={position:"absolute",transform:"\n      translate(".concat(g,"%, ").concat(y,"%)\n      translate(").concat(sx(h),"px, ").concat(sx(d),"px)\n    "),display:void 0,zIndex:void 0};return f?(u>1||u<-1||a<0||a>e.width||s<0||s>e.height?A.display="none":A.zIndex=Math.floor((1-u)/2*1e5),A):A}(t,a,i.current,d,g),A=Mv.useCallback((function(t){n.props.onClose();var e=n.context.eventManager;e&&e.once("click",(function(t){return t.stopPropagation()}),t.target)}),[]);return Mv.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(g," ").concat(s),style:y,ref:i},Mv.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:f}}),Mv.createElement("div",{key:"content",ref:e,className:"mapboxgl-popup-content"},p&&Mv.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:A},"×"),h))}vx.propTypes=gx,vx.defaultProps=yx;Mv.memo(vx),Mv=a("6cds3"),Mv=a("6cds3");function mx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var _x=Object.assign({},Hb,{toggleLabel:Tv.string,className:Tv.string,style:Tv.object,compact:Tv.bool,customAttribution:Tv.oneOfType([Tv.string,Tv.arrayOf(Tv.string)])}),bx=Object.assign({},Wb,{className:"",toggleLabel:"Toggle Attribution"});function xx(t){var e=Zb(t),n=e.context,i=e.containerRef,o=Mv.useRef(null),a=pm(Mv.useState(!1),2),s=a[0],u=a[1];Mv.useEffect((function(){var e;return n.map&&(e=function(t,e,n,i){var o=new(r(t_).AttributionControl)(t);return o._map=e,o._container=n,o._innerContainer=i,o._updateAttributions(),o._updateEditLink(),e.on("styledata",o._updateData),e.on("sourcedata",o._updateData),o}({customAttribution:t.customAttribution},n.map,i.current,o.current)),function(){return e&&function(t){t._map.off("styledata",t._updateData),t._map.off("sourcedata",t._updateData)}(e)}}),[n.map]);var l=void 0===t.compact?n.viewport.width<=640:t.compact;Mv.useEffect((function(){!l&&s&&u(!1)}),[l]);var c=Mv.useCallback((function(){return u((function(t){return!t}))}),[]),f=Mv.useMemo((function(){return function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?mx(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({position:"absolute"},t.style)}),[t.style]);return Mv.createElement("div",{style:f,className:t.className},Mv.createElement("div",{ref:i,"aria-pressed":s,className:"mapboxgl-ctrl mapboxgl-ctrl-attrib ".concat(l?"mapboxgl-compact":""," ").concat(s?"mapboxgl-compact-show":"")},Mv.createElement("button",{type:"button",className:"mapboxgl-ctrl-attrib-button",title:t.toggleLabel,onClick:c}),Mv.createElement("div",{ref:o,className:"mapboxgl-ctrl-attrib-inner",role:"list"})))}xx.propTypes=_x,xx.defaultProps=bx;Mv.memo(xx),Mv=a("6cds3"),Mv=a("6cds3");function wx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Ex=Object.assign({},Hb,{className:Tv.string,style:Tv.object,container:Tv.object,label:Tv.string}),Sx=Object.assign({},Wb,{className:"",container:null,label:"Toggle fullscreen"});function Px(t){var e=Zb(t),n=e.context,i=e.containerRef,o=pm(Mv.useState(!1),2),a=o[0],s=o[1],u=pm(Mv.useState(!1),2),l=u[0],c=u[1],f=pm(Mv.useState(null),2),p=f[0],h=f[1];Mv.useEffect((function(){var t=new(r(t_).FullscreenControl);h(t),c(t._checkFullscreenSupport());var e=function(){var e=!t._fullscreen;t._fullscreen=e,s(e)};return Gm.addEventListener(t._fullscreenchange,e),function(){Gm.removeEventListener(t._fullscreenchange,e)}}),[]);var d=Mv.useMemo((function(){return function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?wx(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({position:"absolute"},t.style)}),[t.style]);if(!l)return null;var g=t.className,y=t.label,A=a?"shrink":"fullscreen";return Mv.createElement("div",{style:d,className:g},Mv.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},Mv.createElement("button",{key:A,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(A),type:"button",title:y,onClick:function(){p&&(p._container=t.container||n.container,p._onClickFullscreen())}},Mv.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}Px.propTypes=Ex,Px.defaultProps=Sx;var kx;Mv.memo(Px),Mv=a("6cds3"),Mv=a("6cds3");function Cx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Tx=function(){},Ix=Object.assign({},Hb,{className:Tv.string,style:Tv.object,label:Tv.string,disabledLabel:Tv.string,auto:Tv.bool,positionOptions:Tv.object,fitBoundsOptions:Tv.object,trackUserLocation:Tv.bool,showUserLocation:Tv.bool,showAccuracyCircle:Tv.bool,showUserHeading:Tv.bool,onViewStateChange:Tv.func,onViewportChange:Tv.func,onGeolocate:Tv.func}),Mx=Object.assign({},Wb,{className:"",label:"Find My Location",disabledLabel:"Location Not Available",auto:!1,positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0,showUserHeading:!1,showAccuracyCircle:!0,onGeolocate:function(){}});function Ox(t,e){var n=e.context,i=e.props,o=function(t){var e=new(r(t_).LngLat)(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,i=e.toBounds(n);return[[i._ne.lng,i._ne.lat],[i._sw.lng,i._sw.lat]]}(t),a=n.viewport.fitBounds(o,i.fitBoundsOptions),s=a.longitude,u=a.latitude,l=a.zoom,c=Object.assign({},n.viewport,{longitude:s,latitude:u,zoom:l}),f=new p_(c),p=Object.assign({},f.getViewportProps(),cb),h=i.onViewportChange||n.onViewportChange||Tx;(i.onViewStateChange||n.onViewStateChange||Tx)({viewState:p}),h(p)}function Lx(t){var e=Zb(t),n=e.context,i=e.containerRef,o=Mv.useRef(null),a=pm(Mv.useState(null),2),s=a[0],u=a[1],l=pm(Mv.useState(!1),2),c=l[0],f=l[1];Mv.useEffect((function(){var i;return n.map&&(void 0!==kx?Promise.resolve(kx):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(t){return kx="denied"!==t.state})):(kx=Boolean(window.navigator.geolocation),Promise.resolve(kx))).then((function(a){f(a),o.current&&(i=function(t,e,n){var i=new(r(t_).GeolocateControl)(e);i._container=Gm.createElement("div"),i._map={on:function(){},_getUIString:function(){return""}},i._setupUI(!0),i._map=t.map,i._geolocateButton=n;var o=t.eventManager;return i.options.trackUserLocation&&o&&o.on("panstart",(function(){"ACTIVE_LOCK"===i._watchState&&(i._watchState="BACKGROUND",n.classList.add("mapboxgl-ctrl-geolocate-background"),n.classList.remove("mapboxgl-ctrl-geolocate-active"))})),i.on("geolocate",e.onGeolocate),i}(n,t,o.current),i._updateCamera=function(t){return Ox(t,e)},u(i))})),function(){i&&i._clearWatch()}}),[n.map]);var p=Mv.useCallback((function(){s&&(s.options=e.props,s.trigger())}),[s]);Mv.useEffect((function(){t.auto&&p()}),[s,t.auto]),Mv.useEffect((function(){s&&s._onZoom()}),[n.viewport.zoom]);var h=t.className,d=t.label,g=t.disabledLabel,y=t.trackUserLocation,A=Mv.useMemo((function(){return function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?Cx(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({position:"absolute"},t.style)}),[t.style]);return Mv.createElement("div",{style:A,className:h},Mv.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},Mv.createElement("button",{key:"geolocate",className:"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",ref:o,disabled:!c,"aria-pressed":!y,type:"button",title:c?d:g,"aria-label":c?d:g,onClick:p},Mv.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}Lx.propTypes=Ix,Lx.defaultProps=Mx;Mv.memo(Lx),Mv=a("6cds3"),Mv=a("6cds3");function Rx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Dx=function(){},Nx=Object.assign({},Hb,{className:Tv.string,style:Tv.object,onViewStateChange:Tv.func,onViewportChange:Tv.func,showCompass:Tv.bool,showZoom:Tv.bool,zoomInLabel:Tv.string,zoomOutLabel:Tv.string,compassLabel:Tv.string}),Fx=Object.assign({},Wb,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"});function jx(t){return function(t,e){for(var n=(t||"").split(".").map(Number),r=(e||"").split(".").map(Number),i=0;i<3;i++){var o=n[i]||0,a=r[i]||0;if(o<a)return-1;if(o>a)return 1}return 0}(t,"1.6.0")>=0?2:1}function zx(t,e,n){var r=t.viewport,i=new p_(Object.assign({},r,n)),o=Object.assign({},i.getViewportProps(),cb),a=e.onViewportChange||t.onViewportChange||Dx;(e.onViewStateChange||t.onViewStateChange||Dx)({viewState:o}),a(o)}function Bx(t,e,n,r){return Mv.createElement("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(t),type:"button",title:e,onClick:n},r||Mv.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}function Ux(t){var e=Zb(t),n=e.context,r=e.containerRef,i=t.className,o=t.showCompass,a=t.showZoom,s=t.zoomInLabel,u=t.zoomOutLabel,l=t.compassLabel,c=Mv.useMemo((function(){return function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?Rx(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({position:"absolute"},t.style)}),[t.style]);return Mv.createElement("div",{style:c,className:i},Mv.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},a&&Bx("zoom-in",s,(function(){zx(n,t,{zoom:n.viewport.zoom+1})})),a&&Bx("zoom-out",u,(function(){zx(n,t,{zoom:n.viewport.zoom-1})})),o&&Bx("compass",l,(function(){zx(n,t,{bearing:0,pitch:0})}),function(t){var e=Mv.useMemo((function(){return t.map?jx(t.map.version):2}),[t.map]),n=t.viewport.bearing,r={transform:"rotate(".concat(-n,"deg)")};return 2===e?Mv.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:r}):Mv.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:r})}(n))))}Ux.propTypes=Nx,Ux.defaultProps=Fx;Mv.memo(Ux),Mv=a("6cds3"),Mv=a("6cds3");function Vx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Gx=Object.assign({},Hb,{className:Tv.string,style:Tv.object,maxWidth:Tv.number,unit:Tv.oneOf(["imperial","metric","nautical"])}),qx=Object.assign({},Wb,{className:"",maxWidth:100,unit:"metric"});function Wx(t){var e=Zb(t),n=e.context,i=e.containerRef,o=pm(Mv.useState(null),2),a=o[0],s=o[1];Mv.useEffect((function(){if(n.map){var t=new(r(t_).ScaleControl);t._map=n.map,t._container=i.current,s(t)}}),[n.map]),a&&(a.options=t,a._onMove());var u=Mv.useMemo((function(){return function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?Vx(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({position:"absolute"},t.style)}),[t.style]);return Mv.createElement("div",{style:u,className:t.className},Mv.createElement("div",{ref:i,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}))}Wx.propTypes=Gx,Wx.defaultProps=qx;Mv.memo(Wx),Mv=a("6cds3"),Mv=a("6cds3");var Hx="undefined"!=typeof window&&window.devicePixelRatio||1,Xx=Object.assign({},Hb,{redraw:Tv.func.isRequired});function Zx(t){var e=Zb(t),n=e.context,r=e.containerRef,i=pm(Mv.useState(null),2),o=i[0],a=i[1];Mv.useEffect((function(){a(r.current.getContext("2d"))}),[]);var s=n.viewport,u=n.isDragging;return o&&(o.save(),o.scale(Hx,Hx),t.redraw({width:s.width,height:s.height,ctx:o,isDragging:u,project:s.project,unproject:s.unproject}),o.restore()),Mv.createElement("canvas",{ref:r,width:s.width*Hx,height:s.height*Hx,style:{width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),position:"absolute",left:0,top:0}})}Zx.propTypes=Xx,Zx.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};Mv=a("6cds3");function Yx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Qx=Object.assign({},Hb,{redraw:Tv.func.isRequired,style:Tv.object});function Kx(t){var e=Zb(t),n=e.context,r=e.containerRef,i=n.viewport,o=n.isDragging,a=function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?Yx(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({position:"absolute",left:0,top:0,width:i.width,height:i.height},t.style);return Mv.createElement("div",{ref:r,style:a},t.redraw({width:i.width,height:i.height,isDragging:o,project:i.project,unproject:i.unproject}))}Kx.propTypes=Qx,Kx.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};Mv=a("6cds3");function Jx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var $x=Object.assign({},Hb,{redraw:Tv.func.isRequired,style:Tv.object});function tw(t){var e=Zb(t),n=e.context,r=e.containerRef,i=n.viewport,o=n.isDragging,a=function(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?Jx(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}({position:"absolute",left:0,top:0},t.style);return Mv.createElement("svg",{width:i.width,height:i.height,ref:r,style:a},t.redraw({width:i.width,height:i.height,isDragging:o,project:i.project,unproject:i.unproject}))}tw.propTypes=$x,tw.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};a("1Ft0x");r(t_)&&r(t_).setRTLTextPlugin;var ew={};Object.defineProperty(ew,"__esModule",{value:!0}),Object.defineProperty(ew,"ArrowStyles",{enumerable:!0,get:function(){return Pv.ArrowStyles}}),Object.defineProperty(ew,"DEFAULT_ARROWS",{enumerable:!0,get:function(){return Pv.DEFAULT_ARROWS}}),Object.defineProperty(ew,"MAX_ARROWS",{enumerable:!0,get:function(){return Pv.MAX_ARROWS}}),Object.defineProperty(ew,"SELECTION_TYPE",{enumerable:!0,get:function(){return nw.SELECTION_TYPE}}),Object.defineProperty(ew,"Feature",{enumerable:!0,get:function(){return rw.default}}),Object.defineProperty(ew,"LayerMouseEvent",{enumerable:!0,get:function(){return iw.default}}),Object.defineProperty(ew,"NebulaLayer",{enumerable:!0,get:function(){return ow.default}}),Object.defineProperty(ew,"JunctionsLayer",{enumerable:!0,get:function(){return aw.default}}),Object.defineProperty(ew,"TextsLayer",{enumerable:!0,get:function(){return sw.default}}),Object.defineProperty(ew,"SegmentsLayer",{enumerable:!0,get:function(){return uw.default}}),Object.defineProperty(ew,"NebulaCore",{enumerable:!0,get:function(){return lw.default}}),Object.defineProperty(ew,"PROJECTED_PIXEL_SIZE_MULTIPLIER",{enumerable:!0,get:function(){return cw.PROJECTED_PIXEL_SIZE_MULTIPLIER}}),Object.defineProperty(ew,"toDeckColor",{enumerable:!0,get:function(){return fw.toDeckColor}}),Object.defineProperty(ew,"EditableGeoJsonLayer",{enumerable:!0,get:function(){return pw.EditableGeoJsonLayer}}),Object.defineProperty(ew,"SelectionLayer",{enumerable:!0,get:function(){return pw.SelectionLayer}}),Object.defineProperty(ew,"ElevatedEditHandleLayer",{enumerable:!0,get:function(){return pw.ElevatedEditHandleLayer}}),Object.defineProperty(ew,"PathOutlineLayer",{enumerable:!0,get:function(){return pw.PathOutlineLayer}}),Object.defineProperty(ew,"PathMarkerLayer",{enumerable:!0,get:function(){return pw.PathMarkerLayer}}),Object.defineProperty(ew,"GeoJsonEditMode",{enumerable:!0,get:function(){return hw.GeoJsonEditMode}}),Object.defineProperty(ew,"ModifyMode",{enumerable:!0,get:function(){return hw.ModifyMode}}),Object.defineProperty(ew,"ResizeCircleMode",{enumerable:!0,get:function(){return hw.ResizeCircleMode}}),Object.defineProperty(ew,"TranslateMode",{enumerable:!0,get:function(){return hw.TranslateMode}}),Object.defineProperty(ew,"ScaleMode",{enumerable:!0,get:function(){return hw.ScaleMode}}),Object.defineProperty(ew,"RotateMode",{enumerable:!0,get:function(){return hw.RotateMode}}),Object.defineProperty(ew,"DuplicateMode",{enumerable:!0,get:function(){return hw.DuplicateMode}}),Object.defineProperty(ew,"ExtendLineStringMode",{enumerable:!0,get:function(){return hw.ExtendLineStringMode}}),Object.defineProperty(ew,"SplitPolygonMode",{enumerable:!0,get:function(){return hw.SplitPolygonMode}}),Object.defineProperty(ew,"ExtrudeMode",{enumerable:!0,get:function(){return hw.ExtrudeMode}}),Object.defineProperty(ew,"ElevationMode",{enumerable:!0,get:function(){return hw.ElevationMode}}),Object.defineProperty(ew,"TransformMode",{enumerable:!0,get:function(){return hw.TransformMode}}),Object.defineProperty(ew,"DrawPointMode",{enumerable:!0,get:function(){return hw.DrawPointMode}}),Object.defineProperty(ew,"DrawLineStringMode",{enumerable:!0,get:function(){return hw.DrawLineStringMode}}),Object.defineProperty(ew,"DrawPolygonMode",{enumerable:!0,get:function(){return hw.DrawPolygonMode}}),Object.defineProperty(ew,"DrawRectangleMode",{enumerable:!0,get:function(){return hw.DrawRectangleMode}}),Object.defineProperty(ew,"DrawSquareMode",{enumerable:!0,get:function(){return hw.DrawSquareMode}}),Object.defineProperty(ew,"DrawRectangleFromCenterMode",{enumerable:!0,get:function(){return hw.DrawRectangleFromCenterMode}}),Object.defineProperty(ew,"DrawSquareFromCenterMode",{enumerable:!0,get:function(){return hw.DrawSquareFromCenterMode}}),Object.defineProperty(ew,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return hw.DrawCircleByDiameterMode}}),Object.defineProperty(ew,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return hw.DrawCircleFromCenterMode}}),Object.defineProperty(ew,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return hw.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(ew,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return hw.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(ew,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return hw.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(ew,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return hw.Draw90DegreePolygonMode}}),Object.defineProperty(ew,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return hw.DrawPolygonByDraggingMode}}),Object.defineProperty(ew,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return hw.ImmutableFeatureCollection}}),Object.defineProperty(ew,"ViewMode",{enumerable:!0,get:function(){return hw.ViewMode}}),Object.defineProperty(ew,"MeasureDistanceMode",{enumerable:!0,get:function(){return hw.MeasureDistanceMode}}),Object.defineProperty(ew,"MeasureAreaMode",{enumerable:!0,get:function(){return hw.MeasureAreaMode}}),Object.defineProperty(ew,"MeasureAngleMode",{enumerable:!0,get:function(){return hw.MeasureAngleMode}}),Object.defineProperty(ew,"CompositeMode",{enumerable:!0,get:function(){return hw.CompositeMode}}),Object.defineProperty(ew,"SnappableMode",{enumerable:!0,get:function(){return hw.SnappableMode}});var nw=a("OxgNg"),rw=dw(a("9yBMj")),iw=dw(a("hZWkR")),ow=dw(a("eXd8F")),aw=dw(a("dRvpn")),sw=dw(a("exBpP")),uw=dw(a("C59bL")),lw=dw(a("bgBmX")),cw=a("5lYgw"),fw=a("gQ5RH"),pw=a("d6f4f"),hw=a("lJ408");function dw(t){return t&&t.__esModule?t:{default:t}}ew.ViewMode,ew.DrawPolygonMode,ew.ModifyMode,Mv=a("6cds3");a("c9wMV");pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),At=a("e2Lau"),pn=a("9PFJu"),l=a("pGAoq"),yt=a("11zLF"),Mv=a("6cds3");var gw=[],yw=(r(Mv).Component,c=a("1zCSZ"),yt=a("11zLF"),f=a("gj7DP"),Mv=a("6cds3"),pw=a("d6f4f"),{});Object.defineProperty(yw,"__esModule",{value:!0}),Object.defineProperty(yw,"Toolbox",{enumerable:!0,get:function(){return Aw.Toolbox}}),Object.defineProperty(yw,"ExportModal",{enumerable:!0,get:function(){return iP.ExportModal}}),Object.defineProperty(yw,"ExportComponent",{enumerable:!0,get:function(){return sP.ExportComponent}}),Object.defineProperty(yw,"ImportModal",{enumerable:!0,get:function(){return kw.ImportModal}}),Object.defineProperty(yw,"ImportComponent",{enumerable:!0,get:function(){return Iw.ImportComponent}});var Aw={};function vw(t){return(vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.Toolbox=function(t){var e=t.mode,n=t.modeConfig,r=t.geoJson,i=t.onSetMode,o=t.onSetModeConfig,a=t.onSetGeoJson,s=t.onImport,u=NP(_w.useState(!1),2),l=u[0],c=u[1],f=NP(_w.useState(!1),2),p=f[0],h=f[1],d=NP(_w.useState(!1),2),g=d[0],y=d[1],A=NP(_w.useState(!1),2),v=A[0],m=A[1];return _w.createElement(_w.Fragment,null,_w.createElement(GP,null,XP.map((function(t,n){return _w.createElement(YP,{key:n,modeGroup:t,mode:e,onSetMode:i})})),_w.createElement(qP,{onClick:function(){return y(!0)},title:"Export"},_w.createElement(xw.Icon,{name:"export"})),_w.createElement(qP,{onClick:function(){return h(!0)},title:"Import"},_w.createElement(xw.Icon,{name:"import"})),_w.createElement(WP,null,l&&_w.createElement(HP,null,_w.createElement(qP,{onClick:function(){return c(!1)}},_w.createElement(xw.Icon,{name:"chevron-right"})),_w.createElement(qP,{onClick:function(){return o({booleanOperation:"difference"})},active:n&&"difference"===n.booleanOperation},_w.createElement(xw.Icon,{name:"minus-front"})),_w.createElement(qP,{onClick:function(){return o({booleanOperation:"union"})},active:n&&"union"===n.booleanOperation},_w.createElement(xw.Icon,{name:"unite"})),_w.createElement(qP,{onClick:function(){return o({booleanOperation:"intersection"})},active:n&&"intersection"===n.booleanOperation},_w.createElement(xw.Icon,{name:"intersect"}))),_w.createElement(qP,{onClick:function(){return c(!0)}},_w.createElement(xw.Icon,{name:"cog"}))),_w.createElement(WP,null,v&&_w.createElement(HP,null,_w.createElement(qP,{onClick:function(){a({type:"FeatureCollection",features:[]}),m(!1)},kind:"danger",title:"Clear all features"},"Clear all features ",_w.createElement(xw.Icon,{name:"trash"})),_w.createElement(qP,{onClick:function(){return m(!1)}},"Cancel")),_w.createElement(qP,{onClick:function(){return m(!0)},title:"Clear"},_w.createElement(xw.Icon,{name:"trash"})))),p&&_w.createElement(kw.ImportModal,{onImport:function(t){s(t),h(!1)},onClose:function(){return h(!1)}}),g&&_w.createElement(iP.ExportModal,{geoJson:r,onClose:function(){return y(!1)}}))};var mw,_w=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==vw(t)&&"function"!=typeof t)return{default:t};var e=DP();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}n.default=t,e&&e.set(t,n);return n}(a("dmVj1")),bw=(hw=a("lJ408"),(mw=a("k1UaX"))&&mw.__esModule?mw:{default:mw}),xw={};function ww(t){return ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ww(t)}Object.defineProperty(xw,"__esModule",{value:!0}),xw.Icon=function(t){return Ew.createElement("box-icon",Pw({color:"currentColor"},t))};var Ew=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ww(t)&&"function"!=typeof t)return{default:t};var e=Sw();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}n.default=t,e&&e.set(t,n);return n}(a("dmVj1"));vt=a("5qgrd");function Sw(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Sw=function(){return t},t}function Pw(){return Pw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pw.apply(this,arguments)}!function(t,e,n,r,i){var o=function(){var t=[];return t.isDone=!1,t.exec=function(){t.splice(0).forEach((function(t){t()}))},t.then=function(e){return t.isDone?e():t.push(e),t},t},a=function(t){var e=o(),n=r.createElement("script");return n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,e.isDone=!0,e.exec())}:n.onload=function(){e.isDone=!0,e.exec()},n.src=t,r.getElementsByTagName("head")[0].appendChild(n),n.then=e.then,n};if("customElements"in n)i();else{if(n.AWAITING_WEB_COMPONENTS_POLYFILL)return void n.AWAITING_WEB_COMPONENTS_POLYFILL.then(i);var s=n.AWAITING_WEB_COMPONENTS_POLYFILL=o();s.then(i);var u=n.WEB_COMPONENTS_POLYFILL||"//cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.0.2/webcomponents-bundle.js",l=n.ES6_CORE_POLYFILL||"//cdnjs.cloudflare.com/ajax/libs/core-js/2.5.3/core.min.js";"Promise"in n?a(u).then((function(){s.isDone=!0,s.exec()})):a(l).then((function(){a(u).then((function(){s.isDone=!0,s.exec()}))}))}}(0,0,window,document,(function(){var t;window,t=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r=n(3);t.exports="string"==typeof r?r:r.toString()},function(t,e,n){var r=n(4);t.exports="string"==typeof r?r:r.toString()},function(t,e,n){(t.exports=n(0)(!1)).push([t.i,"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@-webkit-keyframes burst{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}90%{-webkit-transform:scale(1.5);transform:scale(1.5);opacity:0}}@keyframes burst{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}90%{-webkit-transform:scale(1.5);transform:scale(1.5);opacity:0}}@-webkit-keyframes flashing{0%{opacity:1}45%{opacity:0}90%{opacity:1}}@keyframes flashing{0%{opacity:1}45%{opacity:0}90%{opacity:1}}@-webkit-keyframes fade-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}75%{-webkit-transform:translateX(-20px);transform:translateX(-20px);opacity:0}}@keyframes fade-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}75%{-webkit-transform:translateX(-20px);transform:translateX(-20px);opacity:0}}@-webkit-keyframes fade-right{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}75%{-webkit-transform:translateX(20px);transform:translateX(20px);opacity:0}}@keyframes fade-right{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}75%{-webkit-transform:translateX(20px);transform:translateX(20px);opacity:0}}@-webkit-keyframes fade-up{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}75%{-webkit-transform:translateY(-20px);transform:translateY(-20px);opacity:0}}@keyframes fade-up{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}75%{-webkit-transform:translateY(-20px);transform:translateY(-20px);opacity:0}}@-webkit-keyframes fade-down{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}75%{-webkit-transform:translateY(20px);transform:translateY(20px);opacity:0}}@keyframes fade-down{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}75%{-webkit-transform:translateY(20px);transform:translateY(20px);opacity:0}}@-webkit-keyframes tada{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}10%,20%{-webkit-transform:scale3d(.95,.95,.95) rotate(-10deg);transform:scale3d(.95,.95,.95) rotate(-10deg)}30%,50%,70%,90%{-webkit-transform:scaleX(1) rotate(10deg);transform:scaleX(1) rotate(10deg)}40%,60%,80%{-webkit-transform:scaleX(1) rotate(-10deg);transform:scaleX(1) rotate(-10deg)}to{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes tada{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}10%,20%{-webkit-transform:scale3d(.95,.95,.95) rotate(-10deg);transform:scale3d(.95,.95,.95) rotate(-10deg)}30%,50%,70%,90%{-webkit-transform:scaleX(1) rotate(10deg);transform:scaleX(1) rotate(10deg)}40%,60%,80%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}to{-webkit-transform:scaleX(1);transform:scaleX(1)}}.bx-spin,.bx-spin-hover:hover{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}.bx-tada,.bx-tada-hover:hover{-webkit-animation:tada 1.5s ease infinite;animation:tada 1.5s ease infinite}.bx-flashing,.bx-flashing-hover:hover{-webkit-animation:flashing 1.5s infinite linear;animation:flashing 1.5s infinite linear}.bx-burst,.bx-burst-hover:hover{-webkit-animation:burst 1.5s infinite linear;animation:burst 1.5s infinite linear}.bx-fade-up,.bx-fade-up-hover:hover{-webkit-animation:fade-up 1.5s infinite linear;animation:fade-up 1.5s infinite linear}.bx-fade-down,.bx-fade-down-hover:hover{-webkit-animation:fade-down 1.5s infinite linear;animation:fade-down 1.5s infinite linear}.bx-fade-left,.bx-fade-left-hover:hover{-webkit-animation:fade-left 1.5s infinite linear;animation:fade-left 1.5s infinite linear}.bx-fade-right,.bx-fade-right-hover:hover{-webkit-animation:fade-right 1.5s infinite linear;animation:fade-right 1.5s infinite linear}",""])},function(t,e,n){(t.exports=n(0)(!1)).push([t.i,'.bx-rotate-90{transform:rotate(90deg);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)"}.bx-rotate-180{transform:rotate(180deg);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)"}.bx-rotate-270{transform:rotate(270deg);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"}.bx-flip-horizontal{transform:scaleX(-1);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)"}.bx-flip-vertical{transform:scaleY(-1);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}',""])},function(t,e,n){"use strict";n.r(e),n.d(e,"BoxIconElement",(function(){return m}));var r,i,o,a,s,u=n(1),l=n.n(u),c=n(2),f=n.n(c),p="function"==typeof Symbol&&"symbol"==vt.default(Symbol.iterator)?function(t){return void 0===t?"undefined":vt.default(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":vt.default(t)},h=(s=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}},function(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}),d=(i=(r=Object).getPrototypeOf||function(t){return t.__proto__},o=r.setPrototypeOf||function(t,e){return t.__proto__=e,t},a="object"===("undefined"==typeof Reflect?"undefined":p(Reflect))?Reflect.construct:function(t,e,n){var r,i=[null];return i.push.apply(i,e),r=t.bind.apply(t,i),o(new r,n.prototype)},function(t){var e=i(t);return o(t,o((function(){return a(e,arguments,i(this).constructor)}),e))}),g=window,y={},A=document.createElement("template"),v=function(){return!!g.ShadyCSS};A.innerHTML='\n<style>\n:host {\n  display: inline-block;\n  font-size: initial;\n  box-sizing: border-box;\n  width: 24px;\n  height: 24px;\n}\n:host([size=xs]) {\n    width: 0.8rem;\n    height: 0.8rem;\n}\n:host([size=sm]) {\n    width: 1.55rem;\n    height: 1.55rem;\n}\n:host([size=md]) {\n    width: 2.25rem;\n    height: 2.25rem;\n}\n:host([size=lg]) {\n    width: 3.0rem;\n    height: 3.0rem;\n}\n\n:host([size]:not([size=""]):not([size=xs]):not([size=sm]):not([size=md]):not([size=lg])) {\n    width: auto;\n    height: auto;\n}\n:host([pull=left]) #icon {\n    float: left;\n    margin-right: .3em!important;\n}\n:host([pull=right]) #icon {\n    float: right;\n    margin-left: .3em!important;\n}\n:host([border=square]) #icon {\n    padding: .25em;\n    border: .07em solid rgba(0,0,0,.1);\n    border-radius: .25em;\n}\n:host([border=circle]) #icon {\n    padding: .25em;\n    border: .07em solid rgba(0,0,0,.1);\n    border-radius: 50%;\n}\n#icon,\nsvg {\n  width: 100%;\n  height: 100%;\n}\n#icon {\n    box-sizing: border-box;\n} \n'+l.a+"\n"+f.a+'\n</style>\n<div id="icon"></div>';var m=d(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.$ui=t.attachShadow({mode:"open"}),t.$ui.appendChild(t.ownerDocument.importNode(A.content,!0)),v()&&g.ShadyCSS.styleElement(t),t._state={$iconHolder:t.$ui.getElementById("icon"),type:t.getAttribute("type")},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":vt.default(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,HTMLElement),h(e,null,[{key:"getIconSvg",value:function(t,e){var n=this.cdnUrl+"/regular/bx-"+t+".svg";return"solid"===e?n=this.cdnUrl+"/solid/bxs-"+t+".svg":"logo"===e&&(n=this.cdnUrl+"/logos/bxl-"+t+".svg"),n&&y[n]||(y[n]=new Promise((function(t,e){var r=new XMLHttpRequest;r.addEventListener("load",(function(){this.status<200||this.status>=300?e(new Error(this.status+" "+this.responseText)):t(this.responseText)})),r.onerror=e,r.onabort=e,r.open("GET",n),r.send()}))),y[n]}},{key:"define",value:function(t){t=t||this.tagName,v()&&g.ShadyCSS.prepareTemplate(A,t),customElements.define(t,this)}},{key:"cdnUrl",get:function(){return"//unpkg.com/boxicons@2.1.2/svg"}},{key:"tagName",get:function(){return"box-icon"}},{key:"observedAttributes",get:function(){return["type","name","color","size","rotate","flip","animation","border","pull"]}}]),h(e,[{key:"attributeChangedCallback",value:function(t,e,n){var r,i,o,a=this._state.$iconHolder;switch(t){case"type":i=n,(o=(r=this)._state).$iconHolder.textContent="",o.type&&(o.type=null),o.type=!i||"solid"!==i&&"logo"!==i?"regular":i,void 0!==o.currentName&&r.constructor.getIconSvg(o.currentName,o.type).then((function(t){o.type===i&&(o.$iconHolder.innerHTML=t)})).catch((function(t){console.error("Failed to load icon: "+o.currentName+"\n"+t)}));break;case"name":!function(t,e,n){var r=t._state;r.currentName=n,r.$iconHolder.textContent="",n&&void 0!==r.type&&t.constructor.getIconSvg(n,r.type).then((function(t){r.currentName===n&&(r.$iconHolder.innerHTML=t)})).catch((function(t){console.error("Failed to load icon: "+n+"\n"+t)}))}(this,0,n);break;case"color":a.style.fill=n||"";break;case"size":!function(t,e,n){var r=t._state;r.size&&(r.$iconHolder.style.width=r.$iconHolder.style.height="",r.size=r.sizeType=null),n&&!/^(xs|sm|md|lg)$/.test(r.size)&&(r.size=n.trim(),r.$iconHolder.style.width=r.$iconHolder.style.height=r.size)}(this,0,n);break;case"rotate":e&&a.classList.remove("bx-rotate-"+e),n&&a.classList.add("bx-rotate-"+n);break;case"flip":e&&a.classList.remove("bx-flip-"+e),n&&a.classList.add("bx-flip-"+n);break;case"animation":e&&a.classList.remove("bx-"+e),n&&a.classList.add("bx-"+n)}}},{key:"connectedCallback",value:function(){v()&&g.ShadyCSS.styleElement(this)}}]),e}());e.default=m,m.define()}])},t()}));var kw={};function Cw(t){return Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cw(t)}Object.defineProperty(kw,"__esModule",{value:!0}),kw.ImportModal=function(t){return Tw.createElement(Dw.EditorModal,{onClose:t.onClose,title:"Import",content:Tw.createElement(Iw.ImportComponent,{onImport:t.onImport,onCancel:t.onClose,additionalInputs:t.additionalInputs})})};var Tw=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Cw(t)&&"function"!=typeof t)return{default:t};var e=rP();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}n.default=t,e&&e.set(t,n);return n}(a("dmVj1")),Iw={};function Mw(t){return Mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mw(t)}Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.ImportComponent=function(t){var e=function(){f(null),u(""),t.onCancel()},n=function(){return i&&s||!i&&c},r=jS(Ow.useState(!0),2),i=r[0],o=r[1],a=jS(Ow.useState(""),2),s=a[0],u=a[1],l=jS(Ow.useState(null),2),c=l[0],f=l[1],p=jS(Ow.useState({valid:!1,validationErrors:[]}),2),h=p[0],d=p[1];Ow.useEffect((function(){function t(){return(t=FS(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=8;break}return t.t0=d,t.next=4,(0,tE.parseImport)(s);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 8:if(null===c){t.next=14;break}return t.t2=d,t.next=12,(0,tE.parseImport)(c);case 12:t.t3=t.sent,(0,t.t2)(t.t3);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[i,s,c]);var g=n()&&h.valid&&(!t.onValidate||t.onValidate(h.features));return Ow.createElement(YS,null,Ow.createElement(QS,null,Ow.createElement(KS,null,Ow.createElement(Dw.Button,{style:{backgroundColor:i?"rgb(0, 105, 217)":"rgb(90, 98, 94)"},onClick:function(){o(!0)}},"Import From Text"),Ow.createElement(Dw.Button,{style:{backgroundColor:i?"rgb(90, 98, 94)":"rgb(0, 105, 217)"},onClick:function(){o(!1)}},"Import From File")),Ow.createElement(JS,null,i&&Ow.createElement($S,{style:n()&&!h.valid?{borderColor:"rgb(220, 53, 69)"}:{},onChange:function(t){return u(t.target.value)},value:s}),!i&&Ow.createElement(Lw.default,{onDrop:function(t){return f(t[0])}},(function(t){var e=t.getRootProps,r=t.getInputProps;return Ow.createElement(tP,DS({style:n()&&!h.valid?{borderColor:"rgb(220, 53, 69)"}:{}},e()),Ow.createElement("input",r()),c?Ow.createElement("p",null,h.valid?"":"Invalid"," Selected File: ",c.name,".",Ow.createElement("br",null),"Drag 'n' drop or click again to change the file."):Ow.createElement("p",null,"Drag 'n' drop your file here, or click to select a file."))})),Ow.createElement(eP,{style:{color:"rgb(133, 100, 4)",backgroundColor:"rgb(255, 243, 205)"}},n()&&!h.valid&&h.validationErrors.map((function(t,e){return Ow.createElement("div",{key:e},t)})))),Ow.createElement(eP,null,"Supported formats:",Ow.createElement("ul",{style:{marginTop:"0"}},Ow.createElement("li",{key:"geojson"},Ow.createElement("a",{href:"https://tools.ietf.org/html/rfc7946",target:"_blank",rel:"noopener noreferrer",title:"GeoJSON Specification"},"GeoJSON")),Ow.createElement("li",{key:"kml"},Ow.createElement("a",{href:"https://developers.google.com/kml/",target:"_blank",rel:"noopener noreferrer",title:"KML Specification"},"KML")),Ow.createElement("li",{key:"wkt"},Ow.createElement("a",{href:"https://en.wikipedia.org/wiki/Well-known_text",target:"_blank",rel:"noopener noreferrer",title:"WKT"},"WKT"))))),t.additionalInputs||null,Ow.createElement(nP,null,Ow.createElement(Dw.Button,{style:n()?{backgroundColor:g?"rgb(0, 105, 217)":"rgb(220, 53, 69)"}:{backgroundColor:"rgb(206, 212, 218)"},disabled:!g,onClick:function(){t.onImport({type:"FeatureCollection",properties:{},features:h.features}),e()}},"Import Geometry"),Ow.createElement(Dw.Button,{onClick:e},"Cancel")))};var Ow=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Mw(t)&&"function"!=typeof t)return{default:t};var e=RS();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}n.default=t,e&&e.set(t,n);return n}(a("dmVj1")),Lw=LS(a("jmURU")),Rw=LS(a("k1UaX")),Dw={};function Nw(t){return Nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nw(t)}Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.EditorModal=function(t){var e=function(){r&&t.onClose(),i(!r)},n=(o=Fw.useState(!0),a=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(o,a)||function(t,e){if(t){if("string"==typeof t)return Vw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vw(t,e):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1];var o,a;return Fw.createElement(Fw.Fragment,null,Fw.createElement(jw.ModalProvider,null,Fw.createElement(Qw,{isOpen:r,onBackgroundClick:e,onEscapeKeydown:e},Fw.createElement(Kw,null,Fw.createElement(Jw,null,Fw.createElement($w,null,t.title)),t.content))))},Dw.Button=void 0;var Fw=Uw(a("dmVj1")),jw=Uw(a("gIPYo")),zw=function(t){return t&&t.__esModule?t:{default:t}}(a("k1UaX"));function Bw(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Bw=function(){return t},t}function Uw(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Nw(t)&&"function"!=typeof t)return{default:t};var e=Bw();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function Vw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gw(){var t=Zw(["\n  font-size: 1.25rem;\n  font-weight: 500;\n  margin: 0;\n"]);return Gw=function(){return t},t}function qw(){var t=Zw(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  padding: 0.75rem 0.75rem;\n  border-bottom: 1px solid rgb(222, 226, 230);\n"]);return qw=function(){return t},t}function Ww(){var t=Zw(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  pointer-events: auto;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 0.3rem;\n  outline: 0;\n"]);return Ww=function(){return t},t}function Hw(){var t=Zw(['\n  position: relative;\n  display: block;\n  width: 50rem;\n  height: auto;\n  max-width: 500px;\n  margin: 1.75rem auto;\n  box-sizing: border-box;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n  font-size: 1rem;\n  font-weight: 400;\n  color: rgb(21, 25, 29);\n  line-height: 1.5;\n  text-align: left;\n']);return Hw=function(){return t},t}function Xw(){var t=Zw(["\n  display: inline-block;\n  color: #fff;\n  background-color: rgb(90, 98, 94);\n  font-size: 1em;\n  margin: 0.25em;\n  padding: 0.375em 0.75em;\n  border: 1px solid transparent;\n  border-radius: 0.25em;\n  display: block;\n"]);return Xw=function(){return t},t}function Zw(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Yw=zw.default.button(Xw());Dw.Button=Yw;var Qw=jw.default.styled(Hw()),Kw=zw.default.div(Ww()),Jw=zw.default.div(qw()),$w=zw.default.h5(Gw());var tE={};Object.defineProperty(tE,"__esModule",{value:!0}),tE.parseImport=function(t){return"string"==typeof t?OS(t):function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){var t=r.result;e(OS(t))},r.onabort=function(){n(Error("file reading was aborted"))},r.onerror=function(){n(Error("file reading has failed"))},r.readAsText(t)}))}(t)};var eE={};Qn=a("4Z8U5");function nE(t,e){if(!t)throw new Error(e||"loader assertion failed.")}!function(t){"use strict";var e=function(t){return t&&t.normalize&&t.normalize(),t&&t.textContent||""},n=function(t){var n={};if(t){var r=a(t,"line");if(r){var i=e(a(r,"color")),o=parseFloat(e(a(r,"opacity"))),s=parseFloat(e(a(r,"width")));i&&(n.stroke=i),isNaN(o)||(n["stroke-opacity"]=o),isNaN(s)||(n["stroke-width"]=96*s/25.4)}}return n},i=function(t,n){var r,i,o={};for(i=0;i<n.length;i++)(r=a(t,n[i]))&&(o[n[i]]=e(r));return o},o=function(t){for(var n=i(t,["name","cmt","desc","type","time","keywords"]),r=t.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/GpxExtensions/v3","*"),o=0;o<r.length;o++){var a=r[o];a.parentNode.parentNode===t&&(n[a.tagName.replace(":","_")]=e(a))}var s=t.getElementsByTagName("link");s.length&&(n.links=[]);for(var u=0;u<s.length;u++)n.links.push(Object.assign({href:s[u].getAttribute("href")},i(s[u],["text","type"])));return n},a=function(t,e){var n=t.getElementsByTagName(e);return n.length?n[0]:null},s=function(t){var n,r=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))],i=a(t,"ele"),o=a(t,"gpxtpx:hr")||a(t,"hr"),s=a(t,"time");i&&(n=parseFloat(e(i)),isNaN(n)||r.push(n));var u={coordinates:r,time:s?e(s):null,heartRate:o?parseFloat(e(o)):null},l=a(t,"extensions");return null!==l&&_.map((function(t){return t[0]})).filter((function(t){return"heartrate"!==t})).forEach((function(t){var n=a(l,t);if(null!==n){var r=parseFloat(e(n));isNaN(r)||(u[t]=r)}})),u},u=function(t){var e=l(t,"rtept");if(e.line)return{type:"Feature",properties:Object.assign(o(t),n(a(t,"extensions"))),geometry:{type:"LineString",coordinates:e.line}}},l=function(t,e){var n=function(t){var e=s(r[t]);i.push(e.coordinates),e.time&&o.push(e.time),_.map((function(t){return t[0]})).forEach((function(n){(e[n]||u[n])&&(u[n]||(u[n]=Array(t).fill(null)),u[n].push(e[n]||null))}))},r=t.getElementsByTagName(e),i=[],o=[],a=r.length,u={};if(a<2)return{};for(var l=0;l<a;l++)n(l);var c={line:i,times:o};return _.forEach((function(t){u[t[0]]&&(c[t[1]]=u[t[0]]||[])})),c},c=function(t){for(var e,r=function(t){(e=l(i[t],"trkpt"))&&(e.line&&s.push(e.line),e.times&&e.times.length&&u.push(e.times),_.map((function(t){return t[1]})).forEach((function(n){if(c[n]&&c[n].length||e[n]&&e[n].length){if(c[n]||(c[n]=[]),!c[n].length)for(var r=0;r<t;r++)c[n].push(Array(s[r].length).fill(null));e[n]&&e[n].length?c[n].push(e[n]):c[n].push(Array(e.line.length||0).fill(null))}})))},i=t.getElementsByTagName("trkseg"),s=[],u=[],c={},f=0;f<i.length;f++)r(f);if(0!==s.length){var p=Object.assign(o(t),n(a(t,"extensions")));return u.length&&(p.coordTimes=1===s.length?u[0]:u),_.forEach((function(t){c[t[1]]&&c[t[1]].length&&(p[t[1]]=1===s.length?c[t[1]][0]:c[t[1]])})),{type:"Feature",properties:p,geometry:{type:1===s.length?"LineString":"MultiLineString",coordinates:1===s.length?s[0]:s}}}},f=r(Qn).mark((function t(e){var n,a,l,f,p,h,d,g,y;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getElementsByTagName("trk"),a=e.getElementsByTagName("rte"),l=e.getElementsByTagName("wpt"),f=0;case 2:if(!(f<n.length)){t.next=11;break}if(p=c(n[f]),t.t0=p,!t.t0){t.next=8;break}return t.next=8,p;case 8:f++,t.next=2;break;case 11:h=0;case 12:if(!(h<a.length)){t.next=21;break}if(d=u(a[h]),t.t1=d,!t.t1){t.next=18;break}return t.next=18,d;case 18:h++,t.next=12;break;case 21:g=0;case 22:if(!(g<l.length)){t.next=28;break}return t.next=25,y=l[g],{type:"Feature",properties:Object.assign(o(y),i(y,["sym"])),geometry:{type:"Point",coordinates:s(y).coordinates}};case 25:g++,t.next=22;break;case 28:case 29:case"end":return t.stop()}}),t)})),p=function(t){if(!t||!t.length)return 0;for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e},h=function(t,e){var n=t.getElementsByTagName(e);return n.length?n[0]:null},d=function(t){return t.replace(b,"").split(",").map(parseFloat)},g=function(t){return t.replace(x,"").split(w).map(d)},y=function(t){var e,n;return"#"===(t=t||"").substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(n=parseInt(t.substr(0,2),16)/255,e="#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)),[e,isNaN(n)?void 0:n]},A=function(t){var n=t.getElementsByTagName("coord"),r=[],i=[];0===n.length&&(n=t.getElementsByTagName("gx:coord"));for(var o=0;o<n.length;o++)r.push(e(n[o]).split(" ").map(parseFloat));for(var a=t.getElementsByTagName("when"),s=0;s<a.length;s++)i.push(e(a[s]));return{coords:r,times:i}},v=function(t,n,r,i){var o,a=function t(n){var r,i,o,a,s,u=[],l=[];if(h(n,"MultiGeometry"))return t(h(n,"MultiGeometry"));if(h(n,"MultiTrack"))return t(h(n,"MultiTrack"));if(h(n,"gx:MultiTrack"))return t(h(n,"gx:MultiTrack"));for(o=0;o<S.length;o++)if(i=n.getElementsByTagName(S[o]))for(a=0;a<i.length;a++)if(r=i[a],"Point"===S[o])u.push({type:"Point",coordinates:d(e(h(r,"coordinates")))});else if("LineString"===S[o])u.push({type:"LineString",coordinates:g(e(h(r,"coordinates")))});else if("Polygon"===S[o]){var c=r.getElementsByTagName("LinearRing"),f=[];for(s=0;s<c.length;s++)f.push(g(e(h(c[s],"coordinates"))));u.push({type:"Polygon",coordinates:f})}else if("Track"===S[o]||"gx:Track"===S[o]){var p=A(r);u.push({type:"LineString",coordinates:p.coords}),p.times.length&&l.push(p.times)}return{geoms:u,coordTimes:l}}(t),s={},u=e(h(t,"name")),l=e(h(t,"address")),c=e(h(t,"styleUrl")),f=e(h(t,"description")),p=h(t,"TimeSpan"),v=h(t,"TimeStamp"),m=h(t,"ExtendedData"),_=h(t,"LineStyle"),b=h(t,"PolyStyle"),x=h(t,"visibility");if(a.geoms.length){if(u&&(s.name=u),l&&(s.address=l),c){"#"!==c[0]&&(c="#"+c),s.styleUrl=c,n[c]&&(s.styleHash=n[c]),r[c]&&(s.styleMapHash=r[c],s.styleHash=n[r[c].normal]);var w=i[s.styleHash];if(w){_||(_=h(w,"LineStyle")),b||(b=h(w,"PolyStyle"));var E=h(w,"IconStyle");if(E){var P=h(E,"Icon");if(P){var k=e(h(P,"href"));k&&(s.icon=k)}}}}if(f&&(s.description=f),p){var C=e(h(p,"begin")),T=e(h(p,"end"));s.timespan={begin:C,end:T}}if(v&&(s.timestamp=e(h(v,"when"))),_){var I=y(e(h(_,"color"))),M=I[0],O=I[1],L=parseFloat(e(h(_,"width")));M&&(s.stroke=M),isNaN(O)||(s["stroke-opacity"]=O),isNaN(L)||(s["stroke-width"]=L)}if(b){var R=y(e(h(b,"color"))),D=R[0],N=R[1],F=e(h(b,"fill")),j=e(h(b,"outline"));D&&(s.fill=D),isNaN(N)||(s["fill-opacity"]=N),F&&(s["fill-opacity"]="1"===F?s["fill-opacity"]||1:0),j&&(s["stroke-opacity"]="1"===j?s["stroke-opacity"]||1:0)}if(m){var z=m.getElementsByTagName("Data"),B=m.getElementsByTagName("SimpleData");for(o=0;o<z.length;o++)s[z[o].getAttribute("name")]=e(h(z[o],"value"));for(o=0;o<B.length;o++)s[B[o].getAttribute("name")]=e(B[o])}x&&(s.visibility=e(x)),a.coordTimes.length&&(s.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var U={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:s};return t.getAttribute("id")&&(U.id=t.getAttribute("id")),U}},m=r(Qn).mark((function t(n){var i,o,a,s,u,l,c,f,d,g,y,A,m,_;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i={},o={},a={},s=n.getElementsByTagName("Placemark"),u=n.getElementsByTagName("Style"),l=n.getElementsByTagName("StyleMap"),c=0;c<u.length;c++)f=p(E(u[c])).toString(16),i["#"+u[c].getAttribute("id")]=f,o[f]=u[c];for(d=0;d<l.length;d++){for(i["#"+l[d].getAttribute("id")]=p(E(l[d])).toString(16),g=l[d].getElementsByTagName("Pair"),y={},A=0;A<g.length;A++)y[e(h(g[A],"key"))]=e(h(g[A],"styleUrl"));a["#"+l[d].getAttribute("id")]=y}m=0;case 4:if(!(m<s.length)){t.next=13;break}if(_=v(s[m],i,a,o),t.t0=_,!t.t0){t.next=10;break}return t.next=10,_;case 10:m++,t.next=4;break;case 13:case"end":return t.stop()}}),t)})),_=[["speed","speeds"],["course","courses"],["hAcc","hAccs"],["vAcc","vAccs"],["heartRate","heartRates"]],b=/\s*/g,x=/^\s*|\s*$/g,w=/\s+/;function E(t){if(void 0!==t.xml)return t.xml;if(t.tagName){for(var e=t.tagName,n=0;n<t.attributes.length;n++)e+=t.attributes[n].name+t.attributes[n].value;for(var r=0;r<t.childNodes.length;r++)e+=E(t.childNodes[r]);return e}return"#text"===t.nodeName?(t.nodeValue||t.value||"").trim():"#cdata-section"===t.nodeName?t.nodeValue:""}var S=["Polygon","LineString","Point","Track","gx:Track"];t.gpx=function(t){return{type:"FeatureCollection",features:Array.from(f(t))}},t.gpxGen=f,t.kml=function(t){return{type:"FeatureCollection",features:Array.from(m(t))}},t.kmlGen=m,Object.defineProperty(t,"__esModule",{value:!0})}(eE);Bt=a("a8i8g");var rE={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},iE=rE.global||rE.self||rE.window,oE=("object"!==(void 0===Bt?"undefined":N_(Bt))||String(Bt),void 0!==Bt&&Bt.version&&Bt.version.match(/v([0-9]*)/));oE&&parseFloat(oE[1]),a("aqbQf");var aE="",sE={};function uE(t){for(var e in sE)if(t.startsWith(e)){var n=sE[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(aE).concat(t)),t}var lE;function cE(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function fE(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){cE(o,r,i,a,s,"next",t)}function s(t){cE(o,r,i,a,s,"throw",t)}a(void 0)}))}}function pE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hE(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?pE(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}function dE(t){if(!t)return!1;Array.isArray(t)&&(t=t[0]);var e=t.parseTextSync||t.parseSync||t.parse||t.parseStream||t.parseInBatches,n=t.options&&t.options[t.id];return e=e||n&&n.workerUrl}function gE(t){var e;return nE(t,"null loader"),nE(dE(t),"invalid loader"),Array.isArray(t)&&(e=t[1],t=hE(hE({},t=t[0]),{},{options:hE(hE({},t.options),e)})),t.extension&&(t.extensions=t.extensions||t.extension,delete t.extension),Array.isArray(t.extensions)||(t.extensions=[t.extensions]),nE(t.extensions&&t.extensions.length>0&&t.extensions[0]),(t.parseTextSync||t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}lE=a("4Z8U5");var yE=function(t){return null!==t&&"object"===N_(t)},AE=function(t){return yE(t)&&t.constructor==={}.constructor},vE=function(t){return"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json},mE=function(t){return"undefined"!=typeof Blob&&t instanceof Blob},_E=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,bE=/^([-\w.]+\/[-\w.+]+)/;function xE(t){if("string"!=typeof t)return"";var e=t.match(_E);return e?e[1]:""}var wE=/\?.*/;function EE(t){if(vE(t)){var e=function(t){if("string"!=typeof t)return"";var e=t.match(bE);return e?e[1]:t}(t.headers.get("content-type")),n=xE(t.url);return{url:PE(t.url||""),type:e||n||null}}return mE(t)?{url:PE(t.name||""),type:t.type||""}:"string"==typeof t?{url:PE(t),type:xE(t)}:{url:"",type:""}}function SE(t){return vE(t)?t.headers["content-length"]||-1:mE(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function PE(t){return t.replace(wE,"")}function kE(t){return CE.apply(this,arguments)}function CE(){return(CE=fE(r(lE).mark((function t(e){var n,i,o,a,s,u,l;return r(lE).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!vE(e)){t.next=2;break}return t.abrupt("return",e);case 2:return n={},(i=SE(e))>=0&&(n["content-length"]=String(i)),o=EE(e),a=o.url,(s=o.type)&&(n["content-type"]=s),t.next=9,TE(e);case 9:return(u=t.sent)&&(n["x-first-bytes"]=u),"string"==typeof e&&(e=(new TextEncoder).encode(e)),l=new Response(e,{headers:n}),Object.defineProperty(l,"url",{value:a}),t.abrupt("return",l);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function TE(t){return IE.apply(this,arguments)}function IE(){return(IE=fE(r(lE).mark((function t(e){var n,i,o,a;return r(lE).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=5,"string"!=typeof e){t.next=3;break}return t.abrupt("return","data:,".concat(e.slice(0,n)));case 3:if(!(e instanceof Blob)){t.next=8;break}return i=e.slice(0,5),t.next=7,new Promise((function(t){var e=new FileReader;e.onload=function(e){return t(e.target&&e.target.result)},e.readAsDataURL(i)}));case 7:return t.abrupt("return",t.sent);case 8:if(!(e instanceof ArrayBuffer)){t.next=12;break}return o=e.slice(0,n),a=ME(o),t.abrupt("return","data:base64,".concat(a));case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ME(t){for(var e="",n=new Uint8Array(t),r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function OE(t){return LE.apply(this,arguments)}function LE(){return(LE=fE(r(lE).mark((function t(e){var n;return r(lE).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,!e.headers.get("Content-Type").includes("application/json")){t.next=10;break}return t.t0=n,t.next=7,e.text();case 7:n=t.t0+=t.sent,t.next=11;break;case 10:n+=e.statusText;case 11:t.next=16;break;case 13:return t.prev=13,t.t1=t.catch(1),t.abrupt("return",n);case 16:return t.abrupt("return",n);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function RE(t){return DE.apply(this,arguments)}function DE(){return DE=fE(r(lE).mark((function t(e){var n,i,o=arguments;return r(lE).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},"string"==typeof e){t.next=5;break}return t.next=4,kE(e);case 4:return t.abrupt("return",t.sent);case 5:return e=uE(e),t.next=8,fetch(e,n);case 8:if((i=t.sent).ok||!n.throws){t.next=15;break}return t.t0=Error,t.next=13,OE(i);case 13:throw t.t1=t.sent,new t.t0(t.t1);case 15:return t.abrupt("return",i);case 16:case"end":return t.stop()}}),t)}))),DE.apply(this,arguments)}var NE=function(){function t(){Bm(this,t)}return Vm(t,[{key:"log",value:function(){return function(t){}}},{key:"info",value:function(){return function(t){}}},{key:"warn",value:function(){return function(t){}}},{key:"error",value:function(){return function(t){}}}]),t}(),FE=function(){function t(){Bm(this,t),this.console=console}return Vm(t,[{key:"log",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.log).bind.apply(t,[this.console].concat(n))}},{key:"info",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.info).bind.apply(t,[this.console].concat(n))}},{key:"warn",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.warn).bind.apply(t,[this.console].concat(n))}},{key:"error",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.error).bind.apply(t,[this.console].concat(n))}}]),t}();function jE(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return zE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zE(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function zE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function UE(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?BE(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}var VE={baseUri:"",fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new FE,metadata:!1,transforms:[],reuseWorkers:!0},GE={dataType:"(no longer used)",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},qE=function(){iE.loaders=iE.loaders||{};var t=iE.loaders;return t._state=t._state||{},t._state},WE=function(){var t=qE();return t.globalOptions=t.globalOptions||UE({},VE),t.globalOptions};function HE(t,e,n,r){return n=n||[],function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;ZE(t,null,n,VE,GE,e);var r,i=jE(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=t&&t[o.id]||{},s=o.options&&o.options[o.id]||{},u=o.defaultOptions&&o.defaultOptions[o.id]||{};ZE(a,o.id,n,s,u,e)}}catch(t){i.e(t)}finally{i.f()}}(t,n=Array.isArray(n)?n:[n]),QE(e,t,r)}function XE(t,e){var n=WE(),r=t.fetch||n.fetch;return"function"==typeof r?r:yE(r)?function(t){return RE(t,r)}:e&&e.fetch?e.fetch:function(e){return RE(e,t)}}function ZE(t,e,n,r,i,o){var a=e||"Top level",s=e?"".concat(e,"."):"";for(var u in t){var l=!e&&yE(t[u]);if(!(u in r))if(u in i)n.warn("".concat(a," loader option '").concat(s).concat(u,"' deprecated, use '").concat(i[u],"'"));else if(!l){var c=YE(u,o);n.warn("".concat(a," loader option '").concat(s).concat(u,"' not recognized. ").concat(c))}}}function YE(t,e){var n,r=t.toLowerCase(),i="",o=jE(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;for(var s in a.options){if(t===s)return"Did you mean '".concat(a.id,".").concat(s,"'?");var u=s.toLowerCase();(r.startsWith(u)||u.startsWith(r))&&(i=i||"Did you mean '".concat(a.id,".").concat(s,"'?"))}}}catch(t){o.e(t)}finally{o.f()}return i}function QE(t,e,n){var r=UE({},t.options||{});return null===r.log&&(r.log=new NE),KE(r,WE()),KE(r,e),function(t,e){e&&!t.baseUri&&(t.baseUri=e)}(r,n),r}function KE(t,e){for(var n in e)if(n in e){var r=e[n];AE(r)&&AE(t[n])?t[n]=UE(UE({},t[n]),e[n]):t[n]=e[n]}}var JE=function(){var t=qE();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function $E(){return JE()}function tS(t){this.wrapped=t}function eS(t){var e,n,r=function(t,r){switch(t){case"return":e.resolve({value:r,done:!0});break;case"throw":e.reject(r);break;default:e.resolve({value:r,done:!1})}(e=e.next)?i(e.key,e.arg):n=null};function i(e,n){try{var o=t[e](n),a=o.value,s=a instanceof tS;Promise.resolve(s?a.wrapped:a).then((function(t){s?i("return"===e?"return":"next",t):r(o.done?"return":"normal",t)}),(function(t){i("throw",t)}))}catch(t){r("throw",t)}}this._invoke=function(t,r){return new Promise((function(o,a){var s={key:t,arg:r,resolve:o,reject:a,next:null};n?n=n.next=s:(e=n=s,i(t,r))}))},"function"!=typeof t.return&&(this.return=void 0)}eS.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},eS.prototype.next=function(t){return this._invoke("next",t)},eS.prototype.throw=function(t){return this._invoke("throw",t)},eS.prototype.return=function(t){return this._invoke("return",t)};function nS(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return rS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rS(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function rS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var iS=/\.([^.]+)$/;function oS(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e&&!Array.isArray(e))return gE(e);sS(e=[].concat(fm(e||[]),fm($E())));var i=EE(t),o=i.url,a=i.type,s=uS(e,o||r.url);if(!(s=(s=s||lS(e,a))||cS(e,t))&&!n.nothrow)throw new Error(aS(t));return s}function aS(t){var e=EE(t),n=e.url,r=e.type,i="No valid loader found";return t&&(i+=' data: "'.concat(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return hS(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer)return hS(t,0,e);return""}(t),'", contentType: "').concat(r,'"')),n&&(i+=" url: ".concat(n)),i}function sS(t){var e,n=nS(t);try{for(n.s();!(e=n.n()).done;){gE(e.value)}}catch(t){n.e(t)}finally{n.f()}}function uS(t,e){var n=e&&e.match(iS),r=n&&n[1];return r&&function(t,e){e=e.toLowerCase();var n,r=nS(t);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=nS(o.extensions);try{for(a.s();!(i=a.n()).done;){if(i.value.toLowerCase()===e)return o}}catch(t){a.e(t)}finally{a.f()}}}catch(t){r.e(t)}finally{r.f()}return null}(t,r)}function lS(t,e){var n,r=nS(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.mimeTypes&&i.mimeTypes.includes(e))return i;if(e==="application/x.".concat(i.id))return i}}catch(t){r.e(t)}finally{r.f()}return null}function cS(t,e){if(!e)return null;var n,r=nS(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"==typeof e){if(fS(e,i))return i}else if(ArrayBuffer.isView(e)){if(pS(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer){if(pS(e,0,i))return i}}}catch(t){r.e(t)}finally{r.f()}return null}function fS(t,e){return e.testText&&e.testText(t)}function pS(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((function(r){return function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;for(var r=new Uint8Array(t),i=new Uint8Array(e),o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,t,r.byteLength);switch(N_(r)){case"function":return r(t,n);case"string":return r===hS(t,e,r.length);default:return!1}}(t,e,n,r)}))}function hS(t,e,n){if(t.byteLength<e+n)return"";for(var r=new DataView(t),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}var dS=r(lE).mark(gS);function gS(t){var e,n,i,o,a,s,u,l=arguments;return r(lE).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=l.length>1&&void 0!==l[1]?l[1]:{},n=e.chunkSize,i=void 0===n?262144:n,o=0,a=new TextEncoder;case 4:if(!(o<t.length)){r.next=12;break}return s=Math.min(t.length-o,i),u=t.slice(o,o+s),o+=s,r.next=10,a.encode(u);case 10:r.next=4;break;case 12:case"end":return r.stop()}}),dS)}var yS=r(lE).mark(AS);function AS(t){var e,n,i,o,a,s,u,l=arguments;return r(lE).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=l.length>1&&void 0!==l[1]?l[1]:{},n=e.chunkSize,i=void 0===n?262144:n,o=0;case 3:if(!(o<t.byteLength)){r.next=14;break}return a=Math.min(t.byteLength-o,i),s=new ArrayBuffer(a),u=new Uint8Array(t,o,a),new Uint8Array(s).set(u),o+=a,r.next=12,s;case 12:r.next=3;break;case 14:case"end":return r.stop()}}),yS)}var vS="Cannot convert supplied data type";function mS(t,e){if(e.text&&"string"==typeof t)return t;if(t instanceof ArrayBuffer){var n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)||(o=t)&&"object"===N_(o)&&o.isBuffer){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);var r=t.buffer,i=t.byteLength||t.length;return 0===t.byteOffset&&i===r.byteLength||(r=r.slice(t.byteOffset,t.byteOffset+i)),r}var o;throw new Error(vS)}function _S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bS(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?_S(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}function xS(t,e,n,r){nE(!r||"string"!=typeof r,"parseSync no longer accepts final url"),Array.isArray(e)||dE(e)||(r=n,n=e,e=null),n=n||{};var i=function(t,e){if(!e&&t&&!Array.isArray(t))return t;var n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){var r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[].concat(fm(n),fm(r)):r}return n&&n.length?n:null}(e,r),o=oS(t,i,n);return o?(n=HE(n,o,i),r=function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||(t=bS({fetch:XE(e||{},t)},t),Array.isArray(t.loaders)||(t.loaders=null),t)}({url:EE(t).url,parseSync:xS,loaders:e},n),function(t,e,n,r){if(e=mS(e,t),t.parseTextSync&&"string"==typeof e)return t.parseTextSync(e,n,r,t);if(t.parseSync)return t.parseSync(e,n,r,t);throw new Error("".concat(t.name," loader: 'parseSync' not supported by this loader, use 'parse' instead. ").concat(r.url||""))}(o,t,n,r)):null}var wS=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,ES=new RegExp("^"+wS.source+"(\\s"+wS.source+"){1,}");function SS(t){var e=function(t){var e=u.substring(c).match(t);return e?(c+=e[0].length,e[0]):null},n=function(){e(/^\s*/)},r=function(){n();for(var t,r=0,i=[],o=[i],a=i;t=e(/^(\()/)||e(/^(\))/)||e(/^(,)/)||e(ES);){if("("===t)o.push(a),a=[],o[o.length-1].push(a),r++;else if(")"===t){if(0===a.length)return null;if(!(a=o.pop()))return null;if(0===--r)break}else if(","===t)a=[],o[o.length-1].push(a);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(a,t.split(/\s/g).map(parseFloat))}n()}return 0!==r?null:i},i=function(){for(var t,r,i=[];r=e(ES)||e(/^(,)/);)","===r?(i.push(t),t=[]):r.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,r.split(/\s/g).map(parseFloat))),n();return t?(i.push(t),i.length?i:null):null},o=function(){var t,r=[];if(!e(/^(geometrycollection)/i))return null;if(n(),!e(/^(\()/))return null;for(;t=a();)r.push(t),n(),e(/^(,)/),n();return e(/^(\))/)?{type:"GeometryCollection",geometries:r}:null},a=function(){return function(){if(!e(/^(point(\sz)?)/i))return null;if(n(),!e(/^(\()/))return null;var t=i();return t?(n(),e(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!e(/^(linestring(\sz)?)/i))return null;if(n(),!e(/^(\()/))return null;var t=i();return t&&e(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!e(/^(polygon(\sz)?)/i))return null;n();var t=r();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!e(/^(multipoint)/i))return null;n();var t=u.substring(u.indexOf("(")+1,u.length-1).replace(/\(/g,"").replace(/\)/g,"");u="MULTIPOINT ("+t+")";var i=r();return i?(n(),{type:"MultiPoint",coordinates:i}):null}()||function(){if(!e(/^(multilinestring)/i))return null;n();var t=r();return t?(n(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!e(/^(multipolygon)/i))return null;n();var t=r();return t?{type:"MultiPolygon",coordinates:t}:null}()||o()},s=t.split(";"),u=s.pop(),l=(s.shift()||"").split("=").pop(),c=0;return function(t){return t&&l.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+l}}),t}(a())}function PS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kS(t){for(var e=arguments,n=function(n){var r=null!=e[n]?e[n]:{};n%2?PS(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))},r=1;r<arguments.length;r++)n(r);return t}var CS="2.3.13",TS=kS(kS({},{id:"wkt",name:"WKT",version:CS,extensions:["wkt"],mimeTypes:["text/plain"],category:"geometry",text:!0,options:{wkt:{workerUrl:"https://unpkg.com/@loaders.gl/wkt@".concat(CS,"/dist/wkt-loader.worker.js")}}}),{},{parse:function(){var t=fE(r(lE).mark((function t(e,n){return r(lE).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",SS((new TextDecoder).decode(e)));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),parseTextSync:SS});function IS(t){if("FeatureCollection"!==t.type&&"Feature"!==t.type)throw Error("GeoJSON must have type of 'Feature' or 'FeatureCollection'");return("FeatureCollection"===t.type?t.features:[t]).map(MS)}function MS(t){var e=t.id,n=t.properties||{},r=t.geometry;if("GeometryCollection"===r.type&&1===r.geometries.length)r=r.geometries[0];else if("GeometryCollection"===r.type&&r.geometries.length>1){var i=new Set(r.geometries.map((function(t){return t.type})));if(1!==i.size)throw Error("GeometryCollection geometry type not yet supported");var o=i.values().next().value;"Polygon"===o?r={type:"MultiPolygon",coordinates:r.geometries.map((function(t){return t.coordinates}))}:"LineString"===o&&(r={type:"MultiLineString",coordinates:r.geometries.map((function(t){return t.coordinates}))})}return{type:"Feature",id:e,geometry:r,properties:n}}function OS(t){var e,n=[];if(function(t){return t.startsWith("{")}(t=t.trim()))try{e={valid:!0,type:"GeoJSON",features:IS(JSON.parse(t))}}catch(t){n.push("Error parsing GeoJSON"),n.push(t.toString())}else if(function(t){return t.startsWith("<")}(t)){var r=(new DOMParser).parseFromString(t,"text/xml");try{var i=(0,eE.kml)(r),o=i&&"Feature"===i.type,a=i&&"FeatureCollection"===i.type&&i.features.length>0;o||a?e={valid:!0,type:"KML",features:IS(i)}:n.push("Invalid KML")}catch(t){n.push("Error parsing KML"),n.push(t.toString())}}else if(function(t){return t.startsWith("POINT")||t.startsWith("LINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTILINESTRING")||t.startsWith("MULTIPOLYGON")}(t))try{var s=xS(t,TS);s?e={valid:!0,type:"WKT",features:[{type:"Feature",properties:{},geometry:s}]}:n.push("Invalid WKT")}catch(t){n.push("Error parsing WKT"),n.push(t.toString())}else n.push("Unknown data format");return e?Promise.resolve(e):Promise.resolve({valid:!1,validationErrors:n})}function LS(t){return t&&t.__esModule?t:{default:t}}function RS(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return RS=function(){return t},t}function DS(){return DS=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DS.apply(this,arguments)}function NS(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function FS(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){NS(o,r,i,a,s,"next",t)}function s(t){NS(o,r,i,a,s,"throw",t)}a(void 0)}))}}function jS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zS(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BS(){var t=ZS(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 0.75rem 0.75rem;\n  border-top: 1px solid rgb(222, 226, 230);\n"]);return BS=function(){return t},t}function US(){var t=ZS(["\n  display: block;\n  padding: 0rem 1rem;\n"]);return US=function(){return t},t}function VS(){var t=ZS(["\n  padding: 0px;\n  width: 100%;\n  min-height: 250px;\n  height: 100%;\n  border: 1px solid rgb(206, 212, 218);\n  border-radius: 0.3rem;\n  fontfamily: -apple-system, system-ui, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n    'Noto Sans' sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n    'Noto Color Emoji';\n  font-size: 1rem;\n  font-weight: 400;\n"]);return VS=function(){return t},t}function GS(){var t=ZS(["\n  padding: 0px;\n  width: 100%;\n  resize: vertical;\n  min-height: 250px;\n  max-height: 450px;\n  border: 1px solid rgb(206, 212, 218);\n  border-radius: 0.3rem;\n  font-family: -apple-system, system-ui, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans',\n    sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  font-size: 1rem;\n  font-weight: 400;\n"]);return GS=function(){return t},t}function qS(){var t=ZS(["\n  box-sizing: border-box;\n  display: block;\n  width: auto;\n  height: auto;\n  min-height: 300px;\n  padding: 0rem 1rem;\n"]);return qS=function(){return t},t}function WS(){var t=ZS(["\n  display: flex;\n  padding: 0.75rem 0.75rem 0rem 0.75rem;\n"]);return WS=function(){return t},t}function HS(){var t=ZS(["\n  width: auto;\n  height: auto;\n"]);return HS=function(){return t},t}function XS(){var t=ZS(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  pointer-events: auto;\n  background-color: #fff;\n  background-clip: padding-box;\n  border-radius: 0.3rem;\n  outline: 0;\n"]);return XS=function(){return t},t}function ZS(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var YS=Rw.default.div(XS()),QS=Rw.default.div(HS()),KS=Rw.default.div(WS()),JS=Rw.default.div(qS()),$S=Rw.default.textarea(GS()),tP=Rw.default.div(VS()),eP=Rw.default.div(US()),nP=Rw.default.div(BS());function rP(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return rP=function(){return t},t}var iP={};function oP(t){return oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oP(t)}Object.defineProperty(iP,"__esModule",{value:!0}),iP.ExportModal=function(t){return aP.createElement(Dw.EditorModal,{onClose:t.onClose,title:"Export",content:aP.createElement(sP.ExportComponent,t)})};var aP=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==oP(t)&&"function"!=typeof t)return{default:t};var e=RP();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}n.default=t,e&&e.set(t,n);return n}(a("dmVj1")),sP={};function uP(t){return uP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uP(t)}Object.defineProperty(sP,"__esModule",{value:!0}),sP.ExportComponent=function(t){var e=t.geoJson,n=t.onClose,r=t.filename,i=t.additionalInputs,o=(l=lP.useState("geoJson"),c=2,function(t){if(Array.isArray(t))return t}(l)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(l,c)||function(t,e){if(t){if("string"==typeof t)return EP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EP(t,e):void 0}}(l,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],u=r;var l,c;u||(u="FeatureCollection"===e.type?"features":e.properties.name||e.id||"feature");var f=lP.useMemo((function(){switch(a){case"geoJson":return(0,hP.toGeoJson)(e,u);case"kml":return(0,hP.toKml)(e,u);case"wkt":return(0,hP.toWkt)(e,u);default:throw Error("Unsupported format ".concat(a))}}),[e,a,u]),p=f.data.length>5e5;return lP.createElement(lP.Fragment,null,lP.createElement(IP,null,lP.createElement("strong",{style:{padding:"0.5rem 0.25rem"}},"Format:"),lP.createElement(Dw.Button,{style:{backgroundColor:"geoJson"===a?"rgb(0, 105, 217)":"rgb(90, 98, 94)"},onClick:function(){return s("geoJson")}},"GeoJSON"),lP.createElement(Dw.Button,{style:{backgroundColor:"kml"===a?"rgb(0, 105, 217)":"rgb(90, 98, 94)"},onClick:function(){return s("kml")}},"KML"),lP.createElement(Dw.Button,{style:{backgroundColor:"wkt"===a?"rgb(0, 105, 217)":"rgb(90, 98, 94)"},onClick:function(){return s("wkt")}},"WKT")),lP.createElement(MP,null,lP.createElement(OP,{readOnly:!0,style:p?{fontStyle:"italic",padding:"0.75rem 0rem"}:{},value:p?"Too much data to display. Download or Copy to clipboard instead.":f.data})),i||null,lP.createElement(LP,null,lP.createElement(Dw.Button,{style:{backgroundColor:"rgb(0, 105, 217)"},onClick:function(){(0,fP.default)(new Blob([f.data]),f.filename,f.mimetype),n()}},"Download"),lP.createElement(Dw.Button,{style:{backgroundColor:"rgb(0, 105, 217)"},onClick:function(){(0,cP.default)(f.data).then((function(){return n()}))}},"Copy"),lP.createElement(Dw.Button,{onClick:n},"Cancel")))};var lP=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==uP(t)&&"function"!=typeof t)return{default:t};var e=wP();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}n.default=t,e&&e.set(t,n);return n}(a("dmVj1")),cP=xP(a("jcncr")),fP=xP(a("asTPE")),pP=xP(a("k1UaX")),hP={};Object.defineProperty(hP,"__esModule",{value:!0}),hP.toGeoJson=function(t,e){return{data:JSON.stringify(t,null,2),filename:"".concat(e,".geojson"),mimetype:"application/json"}},hP.toKml=function(t,e){"FeatureCollection"===t.type&&t.features.forEach((function(t){t.properties=t.properties||{}}));return{data:(0,dP.default)(t),filename:"".concat(e,".kml"),mimetype:"application/xml"}},hP.toWkt=function(t,e){var n="";if("Feature"===t.type)n=(0,gP.stringify)(t);else{n="";var r,i=mP(t.features);try{for(i.s();!(r=i.n()).done;){var o=r.value;n+="".concat((0,gP.stringify)(o),"\n")}}catch(t){i.e(t)}finally{i.f()}n.length>0&&(n=n.substring(0,n.length-1))}return{data:n,filename:"".concat(e,".wkt"),mimetype:"text/plain"}},hP.toStats=function(t,e){var n=0,r=0,i=0,o=0;if("Feature"===t.type){var a=bP(t.geometry);n=a.pointCount,r=a.ringCount,i=a.polygonCount,o=1}else{var s,u=mP(t.features);try{for(u.s();!(s=u.n()).done;){var l=bP(s.value.geometry);n+=l.pointCount,r+=l.ringCount,i+=l.polygonCount,o++}}catch(t){u.e(t)}finally{u.f()}}return{data:"Features: ".concat(o,"\nPolygons: ").concat(i,"\nRings: ").concat(r,"\nPoints: ").concat(n),filename:"".concat(e,".txt"),mimetype:"text/plain"}};var dP=function(t){return t&&t.__esModule?t:{default:t}}(a("RJQNM")),gP={};(gP=vP).parse=vP,gP.stringify=function t(e){var n=function(t){return t.join(" ")},r=function(t){return t.map(n).join(", ")},i=function(t){return t.map(r).map(o).join(", ")},o=function(t){return"("+t+")"};"Feature"===e.type&&(e=e.geometry);switch(e.type){case"Point":return"POINT ("+n(e.coordinates)+")";case"LineString":return"LINESTRING ("+r(e.coordinates)+")";case"Polygon":return"POLYGON ("+i(e.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+r(e.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+(e.coordinates.map(i).map(o).join(", ")+")");case"MultiLineString":return"MULTILINESTRING ("+i(e.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(t).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var yP=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,AP=new RegExp("^"+yP.source+"(\\s"+yP.source+"){1,}");function vP(t){var e=function(t){var e=u.substring(c).match(t);return e?(c+=e[0].length,e[0]):null},n=function(){e(/^\s*/)},r=function(){n();for(var t,r=0,i=[],o=[i],a=i;t=e(/^(\()/)||e(/^(\))/)||e(/^(,)/)||e(AP);){if("("===t)o.push(a),a=[],o[o.length-1].push(a),r++;else if(")"===t){if(0===a.length)return null;if(!(a=o.pop()))return null;if(0===--r)break}else if(","===t)a=[],o[o.length-1].push(a);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(a,t.split(/\s/g).map(parseFloat))}n()}return 0!==r?null:i},i=function(){for(var t,r,i=[];r=e(AP)||e(/^(,)/);)","===r?(i.push(t),t=[]):r.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,r.split(/\s/g).map(parseFloat))),n();return t?(i.push(t),i.length?i:null):null},o=function(){var t,r=[];if(!e(/^(geometrycollection)/i))return null;if(n(),!e(/^(\()/))return null;for(;t=a();)r.push(t),n(),e(/^(,)/),n();return e(/^(\))/)?{type:"GeometryCollection",geometries:r}:null},a=function(){return function(){if(!e(/^(point(\sz)?)/i))return null;if(n(),!e(/^(\()/))return null;var t=i();return t?(n(),e(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!e(/^(linestring(\sz)?)/i))return null;if(n(),!e(/^(\()/))return null;var t=i();return t&&e(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!e(/^(polygon(\sz)?)/i))return null;n();var t=r();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!e(/^(multipoint)/i))return null;n();var t=u.substring(u.indexOf("(")+1,u.length-1).replace(/\(/g,"").replace(/\)/g,"");u="MULTIPOINT ("+t+")";var i=r();return i?(n(),{type:"MultiPoint",coordinates:i}):null}()||function(){if(!e(/^(multilinestring)/i))return null;n();var t=r();return t?(n(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!e(/^(multipolygon)/i))return null;n();var t=r();return t?{type:"MultiPolygon",coordinates:t}:null}()||o()},s=t.split(";"),u=s.pop(),l=(s.shift()||"").split("=").pop(),c=0;return function(t){return t&&l.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+l}}),t}(a())}function mP(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return _P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _P(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function _P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bP(t){if("Polygon"!==t.type&&"MultiPolygon"!==t.type)return{pointCount:-1,ringCount:-1,polygonCount:-1};var e,n=0,r=0,i=0,o=mP(t.coordinates);try{for(o.s();!(e=o.n()).done;){var a=e.value;if("Polygon"===t.type)i=1,r++,n+=a.length;else if("MultiPolygon"===t.type){i++;var s,u=mP(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;r++,n+=l.length}}catch(t){u.e(t)}finally{u.f()}}}}catch(t){o.e(t)}finally{o.f()}return{pointCount:n,ringCount:r,polygonCount:i}}function xP(t){return t&&t.__esModule?t:{default:t}}function wP(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return wP=function(){return t},t}function EP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SP(){var t=TP(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 0.75rem 0.75rem;\n"]);return SP=function(){return t},t}function PP(){var t=TP(["\n  padding: 0px;\n  width: 100%;\n  resize: vertical;\n  min-height: 300px;\n  max-height: 500px;\n  border: 1px solid rgb(206, 212, 218);\n  border-radius: 0.3rem;\n  font-family: -apple-system, system-ui, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans',\n    sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  font-size: 1rem;\n  font-weight: 400;\n"]);return PP=function(){return t},t}function kP(){var t=TP(["\n  box-sizing: border-box;\n  display: block;\n  width: auto;\n  height: auto;\n  min-height: 300px;\n  padding: 0rem 1rem;\n"]);return kP=function(){return t},t}function CP(){var t=TP(["\n  display: flex;\n  padding: 0.75rem 0.75rem 0rem 0.75rem;\n"]);return CP=function(){return t},t}function TP(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var IP=pP.default.div(CP()),MP=pP.default.div(kP()),OP=pP.default.textarea(PP()),LP=pP.default.div(SP());function RP(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return RP=function(){return t},t}function DP(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return DP=function(){return t},t}function NP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return FP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FP(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jP(){var t=VP(["\n  display: flex;\n  flex-direction: row-reverse;\n  position: absolute;\n  top: 0;\n  right: 0;\n"]);return jP=function(){return t},t}function zP(){var t=VP(["\n  position: relative;\n"]);return zP=function(){return t},t}function BP(){var t=VP(["\n  color: #fff;\n  background: ",";\n  font-size: 1em;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n    'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n    'Noto Color Emoji';\n  border: 1px solid transparent;\n  border-radius: 0.25em;\n  margin: 0.05em;\n  padding: 0.1em 0.2em;\n  :hover {\n    background: rgb(128, 137, 133);\n  }\n"]);return BP=function(){return t},t}function UP(){var t=VP(["\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  top: 10px;\n  right: 10px;\n"]);return UP=function(){return t},t}function VP(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var GP=bw.default.div(UP()),qP=bw.default.button(BP(),(function(t){var e=t.kind,n=t.active;return"danger"===e?"rgb(180, 40, 40)":n?"rgb(0, 105, 217)":"rgb(90, 98, 94)"})),WP=bw.default.div(zP()),HP=bw.default.div(jP()),XP=[{modes:[{mode:hw.ViewMode,content:_w.createElement(xw.Icon,{name:"pointer"})}]},{modes:[{mode:hw.DrawPointMode,content:_w.createElement(xw.Icon,{name:"map-pin"})}]},{modes:[{mode:hw.DrawLineStringMode,content:_w.createElement(xw.Icon,{name:"stats"})}]},{modes:[{mode:hw.DrawPolygonMode,content:_w.createElement(xw.Icon,{name:"shape-polygon"})},{mode:hw.DrawRectangleMode,content:_w.createElement(xw.Icon,{name:"rectangle"})},{mode:hw.DrawCircleFromCenterMode,content:_w.createElement(xw.Icon,{name:"circle"})}]},{modes:[{mode:hw.MeasureDistanceMode,content:_w.createElement(xw.Icon,{name:"ruler"})},{mode:hw.MeasureAngleMode,content:_w.createElement(xw.Icon,{name:"shape-triangle"})},{mode:hw.MeasureAreaMode,content:_w.createElement(xw.Icon,{name:"shape-square"})}]}];function ZP(t){var e=t.buttonConfig,n=t.mode,r=t.onClick;return _w.createElement(qP,{active:e.mode===n,onClick:r},e.content)}function YP(t){var e=t.modeGroup,n=t.mode,r=t.onSetMode,i=NP(_w.useState(!1),2),o=i[0],a=i[1],s=e.modes,u=null;o&&(u=_w.createElement(HP,null,s.map((function(t,e){return _w.createElement(ZP,{key:e,buttonConfig:t,mode:n,onClick:function(){r((function(){return t.mode})),a(!1)}})}))));var l=s.find((function(t){return t.mode===n}))||s[0];return _w.createElement(WP,null,u,_w.createElement(ZP,{buttonConfig:l,mode:n,onClick:function(){r((function(){return l.mode})),a(!0)}}))}hw=a("lJ408"),c=a("1zCSZ"),Mv=a("6cds3"),pt=a("hE9gS"),ht=a("1joaW"),u=a("ijozg"),l=a("pGAoq"),pn=a("9PFJu"),c=a("1zCSZ"),vt=a("5qgrd"),f=a("gj7DP"),Qn=a("4Z8U5"),Mv=a("6cds3"),Mv=a("6cds3"),Ov=a("9nHRL"),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var QP=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(e.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}},KP=Mv.createContext(null);var JP=function(t,e,n,r){var i={};return function(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}(t,(function(t,o){var a=n[o];a!==e[o]&&(i[o]=a,t(r,a))})),i};function $P(t,e,n){var r=function(t,e,n){return Object.keys(t).reduce((function(n,r){return e(n,t[r],r)}),n)}(n,(function(n,r,i){return"function"==typeof t[i]&&n.push(google.maps.event.addListener(e,r,t[i])),n}),[]);return r}function tk(t){google.maps.event.removeListener(t)}function ek(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach(tk)}function nk(t){var e=t.updaterMap,n=t.eventMap,r=t.prevProps,i=t.nextProps,o=t.instance,a=$P(i,o,n);return JP(e,r,i,o),a}var rk={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},ik={extraMapTypes:function(t,e){e.forEach((function(e,n){t.mapTypes.set(String(n),e)}))},center:function(t,e){t.setCenter(e)},clickableIcons:function(t,e){t.setClickableIcons(e)},heading:function(t,e){t.setHeading(e)},mapTypeId:function(t,e){t.setMapTypeId(e)},options:function(t,e){t.setOptions(e)},streetView:function(t,e){t.setStreetView(e)},tilt:function(t,e){t.setTilt(e)},zoom:function(t,e){t.setZoom(e)}},ok=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).state={map:null},t.registeredEvents=[],t.mapRef=null,t.getInstance=function(){return null===t.mapRef?null:new google.maps.Map(t.mapRef,t.props.options)},t.panTo=function(e){var n=t.getInstance();n&&n.panTo(e)},t.setMapCallback=function(){null!==t.state.map&&t.props.onLoad&&t.props.onLoad(t.state.map)},t.getRef=function(e){t.mapRef=e},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=this.getInstance();this.registeredEvents=nk({updaterMap:ik,eventMap:rk,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{map:t}}),this.setMapCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.map&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:ik,eventMap:rk,prevProps:t,nextProps:this.props,instance:this.state.map}))}},{key:"componentWillUnmount",value:function(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ek(this.registeredEvents))}},{key:"render",value:function(){return Mv.createElement("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName},Mv.createElement(KP.Provider,{value:this.state.map},null!==this.state.map?this.props.children:Mv.createElement(Mv.Fragment,null)))}}]),n}(Mv.PureComponent);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function ak(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function sk(t,e,n,r){return new(n||(n=Promise))((function(i,o){var a=function(t){try{u(r.next(t))}catch(t){o(t)}},s=function(t){try{u(r.throw(t))}catch(t){o(t)}},u=function(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)};u((r=r.apply(t,e||[])).next())}))}var uk="undefined"!=typeof document,lk=function(t){var e=t.url,n=t.id,r=t.nonce;return uk?new Promise((function(t,i){var o=document.getElementById(n),a=window;if(o){var s=o.getAttribute("data-state");if(o.src===e&&"error"!==s){if("ready"===s)return t(n);var u=a.initMap,l=o.onerror;return a.initMap=function(){u&&u(),t(n)},void(o.onerror=function(t){l&&l(t),i(t)})}o.remove()}var c=document.createElement("script");c.type="text/javascript",c.src=e,c.id=n,c.async=!0,c.nonce=r,c.onerror=function(t){c.setAttribute("data-state","error"),i(t)},a.initMap=function(){c.setAttribute("data-state","ready"),t(n)},document.head.appendChild(c)})).catch((function(t){throw console.error("injectScript error: ",t),t})):Promise.reject(new Error("document is undefined"))},ck=function(t){return!(!t.href||0!==t.href.indexOf("https://fonts.googleapis.com/css?family=Roboto"))||("style"===t.tagName.toLowerCase()&&t.styleSheet&&t.styleSheet.cssText&&0===t.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(t.styleSheet.cssText="",!0):"style"===t.tagName.toLowerCase()&&t.innerHTML&&0===t.innerHTML.replace("\r\n","").indexOf(".gm-style")?(t.innerHTML="",!0):"style"===t.tagName.toLowerCase()&&!t.styleSheet&&!t.innerHTML)},fk=function(){var t=document.getElementsByTagName("head")[0],e=t.insertBefore.bind(t);t.insertBefore=function(n,r){ck(n)||Reflect.apply(e,t,[n,r])};var n=t.appendChild.bind(t);t.appendChild=function(e){ck(e)||Reflect.apply(n,t,[e])}};function pk(t){var e=t.googleMapsApiKey,n=t.googleMapsClientId,r=t.version,i=void 0===r?"weekly":r,o=t.language,a=t.region,s=t.libraries,u=t.channel,l=t.mapIds,c=[];return QP(e&&n||!(e&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?c.push("key=".concat(e)):n&&c.push("client=".concat(n)),i&&c.push("v=".concat(i)),o&&c.push("language=".concat(o)),a&&c.push("region=".concat(a)),s&&s.length&&c.push("libraries=".concat(s.sort().join(","))),u&&c.push("channel=".concat(u)),l&&l.length&&c.push("map_ids=".concat(l.join(","))),c.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(c.join("&"))}var hk=!1;function dk(){return Mv.createElement("div",null,"Loading...")}var gk,yk={id:"script-loader",version:"weekly"},Ak=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).check=Mv.createRef(),t.state={loaded:!1},t.cleanupCallback=function(){delete window.google.maps,t.injectScript()},t.isCleaningUp=function(){return sk(pn.default(t),void 0,void 0,r(Qn).mark((function t(){var e;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t){if(hk){if(uk)var e=window.setInterval((function(){hk||(window.clearInterval(e),t())}),1)}else t()},t.abrupt("return",new Promise(e));case 2:case"end":return t.stop()}}),t)})))},t.cleanup=function(){hk=!0;var e=document.getElementById(t.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(t){return"string"==typeof t.src&&t.src.includes("maps.googleapis")})).forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(t){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===t.href})).forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(t){return void 0!==t.innerText&&t.innerText.length>0&&t.innerText.includes(".gm-")})).forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))},t.injectScript=function(){t.props.preventGoogleFontsLoading&&fk(),QP(!!t.props.id,'LoadScript requires "id" prop to be a string: %s',t.props.id);var e={id:t.props.id,nonce:t.props.nonce,url:pk(t.props)};lk(e).then((function(){t.props.onLoad&&t.props.onLoad(),t.setState((function(){return{loaded:!0}}))})).catch((function(e){t.props.onError&&t.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(t.props.googleMapsApiKey||"-",") or Client ID (").concat(t.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))},t}return l.default(n,[{key:"componentDidMount",value:function(){if(uk){if(window.google&&window.google.maps&&!hk)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(t){console.error("Error at injecting script after cleaning up: ",t)}))}}},{key:"componentDidUpdate",value:function(t){this.props.libraries!==t.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),uk&&t.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))}},{key:"componentWillUnmount",value:function(){if(uk){var t=this;this.cleanup();window.setTimeout((function(){t.check.current||(delete window.google,hk=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}}},{key:"render",value:function(){return Mv.createElement(Mv.Fragment,null,Mv.createElement("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||Mv.createElement(dk,null))}}]),n}(Mv.PureComponent);Ak.defaultProps=yk;var vk=Mv.createElement(dk,null);Mv.memo((function(t){var e=t.loadingElement,n=t.onLoad,r=t.onError,i=t.onUnmount,o=t.children,a=function(t){var e=t.id,n=void 0===e?yk.id:e,r=t.version,i=void 0===r?yk.version:r,o=t.nonce,a=t.googleMapsApiKey,s=t.googleMapsClientId,u=t.language,l=t.region,f=t.libraries,p=t.preventGoogleFontsLoading,h=t.channel,d=t.mapIds,g=Mv.useRef(!1),y=c.default(Mv.useState(!1),2),A=y[0],v=y[1],m=c.default(Mv.useState(void 0),2),_=m[0],b=m[1];Mv.useEffect((function(){return g.current=!0,function(){g.current=!1}}),[]),Mv.useEffect((function(){uk&&p&&fk()}),[p]),Mv.useEffect((function(){A&&QP(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[A]);var x=pk({version:i,googleMapsApiKey:a,googleMapsClientId:s,language:u,region:l,libraries:f,channel:h,mapIds:d});Mv.useEffect((function(){var t=function(){g.current&&(v(!0),gk=x)};uk&&(window.google&&window.google.maps&&gk===x?t():lk({id:n,url:x,nonce:o}).then(t).catch((function(t){g.current&&b(t),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(a||"-",") or Client ID (").concat(s||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(t)})))}),[n,x,o]);var w=Mv.useRef();return Mv.useEffect((function(){w.current&&f!==w.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),w.current=f}),[f]),{isLoaded:A,loadError:_,url:x}}(ak(t,["loadingElement","onLoad","onError","onUnmount","children"])),s=a.isLoaded,u=a.loadError;return Mv.useEffect((function(){s&&"function"==typeof n&&n()}),[s,n]),Mv.useEffect((function(){u&&"function"==typeof r&&r(u)}),[u,r]),Mv.useEffect((function(){return function(){i&&i()}}),[i]),s?o:e||vk}));var mk=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!=e&&n!=n},_k="__googleMapsScriptId",bk=function(){"use strict";function t(e){var n=e.apiKey,r=e.channel,i=e.client,o=e.id,a=void 0===o?_k:o,s=e.libraries,l=void 0===s?[]:s,c=e.language,f=e.region,p=e.version,h=e.mapIds,d=e.nonce,g=e.retries,y=void 0===g?3:g,A=e.url,v=void 0===A?"https://maps.googleapis.com/maps/api/js":A;if(u.default(this,t),this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=p,this.apiKey=n,this.channel=r,this.client=i,this.id=a||_k,this.libraries=l,this.language=c,this.region=f,this.mapIds=h,this.nonce=d,this.retries=y,this.url=v,t.instance){if(!mk(this.options,t.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(t.instance.options)));return t.instance}t.instance=this}return l.default(t,[{key:"options",get:function(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}},{key:"failed",get:function(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}},{key:"createUrl",value:function(){var t=this.url;return t+="?callback=".concat(this.CALLBACK),this.apiKey&&(t+="&key=".concat(this.apiKey)),this.channel&&(t+="&channel=".concat(this.channel)),this.client&&(t+="&client=".concat(this.client)),this.libraries.length>0&&(t+="&libraries=".concat(this.libraries.join(","))),this.language&&(t+="&language=".concat(this.language)),this.region&&(t+="&region=".concat(this.region)),this.version&&(t+="&v=".concat(this.version)),this.mapIds&&(t+="&map_ids=".concat(this.mapIds.join(","))),t}},{key:"deleteScript",value:function(){var t=document.getElementById(this.id);t&&t.remove()}},{key:"load",value:function(){return this.loadPromise()}},{key:"loadPromise",value:function(){var t=this;return new Promise((function(e,n){t.loadCallback((function(t){t?n(t.error):e(window.google)}))}))}},{key:"loadCallback",value:function(t){this.callbacks.push(t),this.execute()}},{key:"setScript",value:function(){if(document.getElementById(this.id))this.callback();else{var t=this.createUrl(),e=document.createElement("script");e.id=this.id,e.type="text/javascript",e.src=t,e.onerror=this.loadErrorCallback.bind(this),e.defer=!0,e.async=!0,this.nonce&&(e.nonce=this.nonce),document.head.appendChild(e)}}},{key:"reset",value:function(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}},{key:"resetIfRetryingFailed",value:function(){this.failed&&this.reset()}},{key:"loadErrorCallback",value:function(t){if(this.errors.push(t),this.errors.length<=this.retries){var e=this,n=this.errors.length*Math.pow(2,this.errors.length);console.log("Failed to load Google Maps script, retrying in ".concat(n," ms.")),setTimeout((function(){e.deleteScript(),e.setScript()}),n)}else this.onerrorEvent=t,this.callback()}},{key:"setCallback",value:function(){window.__googleMapsCallback=this.callback.bind(this)}},{key:"callback",value:function(){var t=this;this.done=!0,this.loading=!1,this.callbacks.forEach((function(e){e(t.onerrorEvent)})),this.callbacks=[]}},{key:"execute",value:function(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}]),t}();var xk={},wk={options:function(t,e){t.setOptions(e)}},Ek=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).state={trafficLayer:null},t.setTrafficLayerCallback=function(){null!==t.state.trafficLayer&&t.props.onLoad&&t.props.onLoad(t.state.trafficLayer)},t.registeredEvents=[],t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.TrafficLayer(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=nk({updaterMap:wk,eventMap:xk,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{trafficLayer:t}}),this.setTrafficLayerCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.trafficLayer&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:wk,eventMap:xk,prevProps:t,nextProps:this.props,instance:this.state.trafficLayer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ek(this.registeredEvents),this.state.trafficLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);Ek.contextType=KP;var Sk=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).state={bicyclingLayer:null},t.setBicyclingLayerCallback=function(){null!==t.state.bicyclingLayer&&(t.state.bicyclingLayer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.bicyclingLayer))},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.BicyclingLayer;this.setState((function(){return{bicyclingLayer:t}}),this.setBicyclingLayerCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);Sk.contextType=KP;var Pk=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).state={transitLayer:null},t.setTransitLayerCallback=function(){null!==t.state.transitLayer&&(t.state.transitLayer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.transitLayer))},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:t}}),this.setTransitLayerCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);Pk.contextType=KP;var kk={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Ck={drawingMode:function(t,e){t.setDrawingMode(e)},options:function(t,e){t.setOptions(e)}},Tk=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r;return u.default(this,n),(r=e.call(this,t)).registeredEvents=[],r.state={drawingManager:null},r.setDrawingManagerCallback=function(){null!==r.state.drawingManager&&r.props.onLoad&&r.props.onLoad(r.state.drawingManager)},QP(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing),r}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.drawing.DrawingManager(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=nk({updaterMap:Ck,eventMap:kk,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{drawingManager:t}}),this.setDrawingManagerCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.drawingManager&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:Ck,eventMap:kk,prevProps:t,nextProps:this.props,instance:this.state.drawingManager}))}},{key:"componentWillUnmount",value:function(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ek(this.registeredEvents),this.state.drawingManager.setMap(null))}},{key:"render",value:function(){return Mv.createElement(Mv.Fragment,null)}}]),n}(Mv.PureComponent);Tk.contextType=KP;var Ik={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Mk={animation:function(t,e){t.setAnimation(e)},clickable:function(t,e){t.setClickable(e)},cursor:function(t,e){t.setCursor(e)},draggable:function(t,e){t.setDraggable(e)},icon:function(t,e){t.setIcon(e)},label:function(t,e){t.setLabel(e)},map:function(t,e){t.setMap(e)},opacity:function(t,e){t.setOpacity(e)},options:function(t,e){t.setOptions(e)},position:function(t,e){t.setPosition(e)},shape:function(t,e){t.setShape(e)},title:function(t,e){t.setTitle(e)},visible:function(t,e){t.setVisible(e)},zIndex:function(t,e){t.setZIndex(e)}},Ok=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t}return l.default(n,[{key:"componentDidMount",value:function(){var t=Object.assign(Object.assign(Object.assign({},this.props.options||{}),this.props.clusterer?{}:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(t),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=nk({updaterMap:Mk,eventMap:Ik,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)}},{key:"componentDidUpdate",value:function(t){this.marker&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:Mk,eventMap:Ik,prevProps:t,nextProps:this.props,instance:this.marker}))}},{key:"componentWillUnmount",value:function(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ek(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}},{key:"render",value:function(){var t=this,e=null;return this.props.children&&(e=Mv.Children.map(this.props.children,(function(e){if(!Mv.isValidElement(e))return e;var n=e;return Mv.cloneElement(n,{anchor:t.marker})}))),e||null}}]),n}(Mv.PureComponent);Ok.contextType=KP;var Lk,Rk=function(){function t(e,n){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.setMap(e.getMap())}return t.prototype.onAdd=function(){var t,e,n=this;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div),this.boundsChangedListener=google.maps.event.addListener(this.getMap(),"boundschanged",(function(){e=t})),google.maps.event.addDomListener(this.div,"mousedown",(function(){t=!0,e=!1})),google.maps.event.addDomListener(this.div,"click",(function(r){if(t=!1,!e){var i=n.cluster.getClusterer();if(google.maps.event.trigger(i,"click",n.cluster),google.maps.event.trigger(i,"clusterclick",n.cluster),i.getZoomOnClick()){var o=i.getMaxZoom(),a=n.cluster.getBounds();i.getMap().fitBounds(a),setTimeout((function(){i.getMap().fitBounds(a),null!==o&&i.getMap().getZoom()>o&&i.getMap().setZoom(o+1)}),100)}r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation()}})),google.maps.event.addDomListener(this.div,"mouseover",(function(){google.maps.event.trigger(n.cluster.getClusterer(),"mouseover",n.cluster)})),google.maps.event.addDomListener(this.div,"mouseout",(function(){google.maps.event.trigger(n.cluster.getClusterer(),"mouseout",n.cluster)}))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),google.maps.event.clearInstanceListeners(this.div),this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var t=this.getPosFromLatLng(this.center),e=t.x,n=t.y;this.div.style.top=n+"px",this.div.style.left=e+"px"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){if(this.div&&this.center){var t="",e="",n=this.backgroundPosition.split(" "),r=parseInt(n[0].replace(/^\s+|\s+$/g,""),10),i=parseInt(n[1].replace(/^\s+|\s+$/g,""),10),o=this.getPosFromLatLng(this.center);e=null===this.sums||void 0===this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,this.div.style.cssText=this.createCss(o),t="<img alt='"+e+"' src='"+this.url+"' style='position: absolute; top: "+i+"px; left: "+r+"px; ",this.cluster.getClusterer().enableRetinaIcons||(t+="clip: rect("+-1*i+"px, "+(-1*r+this.width)+"px, "+(-1*i+this.height)+"px, "+-1*r+"px);"),t+="'>",this.div.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText[0]+"px;left: "+this.anchorText[1]+"px;color: "+this.textColor+";font-size: "+this.textSize+"px;font-family: "+this.fontFamily+";font-weight: "+this.fontWeight+";font-style: "+this.fontStyle+";text-decoration: "+this.textDecoration+";text-align: center;width: "+this.width+"px;line-height:"+this.height+"px;'>"+this.sums.text+"</div>",this.div.title=e,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(t){this.sums=t;var e=this.cluster.getClusterer().getStyles(),n=e[Math.min(e.length-1,Math.max(0,t.index-1))];this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className=this.clusterClassName+" "+n.className),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0"},t.prototype.setCenter=function(t){this.center=t},t.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width+"px; height: "+this.height+"px;"),e.join("")},t.prototype.getPosFromLatLng=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon[1],e.y-=this.anchorIcon[0],e},t}(),Dk=((Lk=function(t){this.markerClusterer=t,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Rk(this,this.markerClusterer.getStyles())}).prototype.getSize=function(){return this.markers.length},Lk.prototype.getMarkers=function(){return this.markers},Lk.prototype.getCenter=function(){return this.center},Lk.prototype.getMap=function(){return this.map},Lk.prototype.getClusterer=function(){return this.markerClusterer},Lk.prototype.getBounds=function(){for(var t=new google.maps.LatLngBounds(this.center,this.center),e=this.getMarkers(),n=0;n<e.length;n++){var r=e[n].getPosition();r&&t.extend(r)}return t},Lk.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},Lk.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center){if(this.averageCenter){var e;if(e=t.getPosition()){var n=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(n-1)+e.lat())/n,(this.center.lng()*(n-1)+e.lng())/n),this.calculateBounds()}}}else(e=t.getPosition())&&(this.center=e,this.calculateBounds());t.isAdded=!0,this.markers.push(t);var r=this.markers.length,i=this.markerClusterer.getMaxZoom(),o=this.map.getZoom();if(null!==i&&void 0!==o&&o>i)t.getMap()!==this.map&&t.setMap(this.map);else if(r<this.minClusterSize)t.getMap()!==this.map&&t.setMap(this.map);else if(r===this.minClusterSize)for(var a=0;a<r;a++)this.markers[a].setMap(null);else t.setMap(null);return!0},Lk.prototype.isMarkerInClusterBounds=function(t){if(null!==this.bounds){var e=t.getPosition();if(e)return this.bounds.contains(e)}return!1},Lk.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},Lk.prototype.updateIcon=function(){var t=this.markers.length,e=this.markerClusterer.getMaxZoom(),n=this.map.getZoom();null!==e&&void 0!==n&&n>e||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},Lk.prototype.isMarkerAlreadyAdded=function(t){if(this.markers.includes)return this.markers.includes(t);for(var e=0;e<this.markers.length;e++)if(t===this.markers[e])return!0;return!1},Lk),Nk=function(t,e){var n=t.length,r=n.toString().length,i=Math.min(r,e);return{text:n.toString(),index:i,title:""}},Fk=[53,56,66,78,90],jk=function(){function t(e,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||Fk,this.calculator=r.calculator||Nk,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(e)}return t.prototype.onAdd=function(){var t=this;this.activeMap=this.getMap(),this.ready=!0,this.repaint(),this.listeners=[google.maps.event.addListener(this.getMap(),"zoom_changed",(function(){t.resetViewport(!1),t.getMap().getZoom()!==(t.get("minZoom")||0)&&t.getMap().getZoom()!==t.get("maxZoom")||google.maps.event.trigger(t,"idle")})),google.maps.event.addListener(this.getMap(),"idle",(function(){t.redraw()}))]},t.prototype.onRemove=function(){for(var t=0;t<this.markers.length;t++)this.markers[t].getMap()!==this.activeMap&&this.markers[t].setMap(this.activeMap);for(t=0;t<this.clusters.length;t++)this.clusters[t].remove();this.clusters=[];for(t=0;t<this.listeners.length;t++)google.maps.event.removeListener(this.listeners[t]);this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var t=0;t<this.imageSizes.length;t++)this.styles.push({url:this.imagePath+(t+1)+"."+this.imageExtension,height:this.imageSizes[t],width:this.imageSizes[t]})},t.prototype.fitMapToMarkers=function(){for(var t=this.getMarkers(),e=new google.maps.LatLngBounds,n=0;n<t.length;n++){var r=t[n].getPosition();r&&e.extend(r)}this.getMap().fitBounds(e)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(t){this.gridSize=t},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(t){this.minClusterSize=t},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(t){this.maxZoom=t},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(t){this.styles=t},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(t){this.title=t},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(t){this.zoomOnClick=t},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(t){this.averageCenter=t},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(t){this.ignoreHidden=t},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons=t},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(t){this.imageExtension=t},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(t){this.imagePath=t},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(t){this.imageSizes=t},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(t){this.calculator=t},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(t){this.batchSizeIE=t},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(t){this.clusterClass=t},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(t,e){this.pushMarkerTo(t),e||this.redraw()},t.prototype.addMarkers=function(t,e){for(var n in t)t.hasOwnProperty(n)&&this.pushMarkerTo(t[n]);e||this.redraw()},t.prototype.pushMarkerTo=function(t){var e=this;t.getDraggable()&&google.maps.event.addListener(t,"dragend",(function(){e.ready&&(t.isAdded=!1,e.repaint())})),t.isAdded=!1,this.markers.push(t)},t.prototype.removeMarker_=function(t){var e=-1;if(this.markers.indexOf)e=this.markers.indexOf(t);else for(var n=0;n<this.markers.length;n++)if(t===this.markers[n]){e=n;break}return-1!==e&&(t.setMap(null),this.markers.splice(e,1),!0)},t.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!e&&n&&this.repaint(),n},t.prototype.removeMarkers=function(t,e){for(var n=!1,r=0;r<t.length;r++)n=n||this.removeMarker_(t[r]);return!e&&n&&this.repaint(),n},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var t=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var e=0;e<t.length;e++)t[e].remove()}),0)},t.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=e.fromLatLngToDivPixel(new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()));n.x+=this.gridSize,n.y-=this.gridSize;var r=e.fromLatLngToDivPixel(new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()));return r.x-=this.gridSize,r.y+=this.gridSize,t.extend(e.fromDivPixelToLatLng(n)),t.extend(e.fromDivPixelToLatLng(r)),t},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(t){for(var e=0;e<this.clusters.length;e++)this.clusters[e].remove();this.clusters=[];for(e=0;e<this.markers.length;e++){var n=this.markers[e];n.isAdded=!1,t&&n.setMap(null)}},t.prototype.distanceBetweenPoints=function(t,e){var n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},t.prototype.isMarkerInBounds=function(t,e){var n=t.getPosition();return!!n&&e.contains(n)},t.prototype.addToClosestCluster=function(t){for(var e,n=4e4,r=null,i=0;i<this.clusters.length;i++){var o=(e=this.clusters[i]).getCenter(),a=t.getPosition();if(o&&a){var s=this.distanceBetweenPoints(o,a);s<n&&(n=s,r=e)}}r&&r.isMarkerInClusterBounds(t)?r.addMarker(t):((e=new Dk(this)).addMarker(t),this.clusters.push(e))},t.prototype.createClusters=function(t){var e=this;if(this.ready){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),r=this.getExtendedBounds(n),i=Math.min(t+this.batchSize,this.markers.length),o=t;o<i;o++){var a=this.markers[o];!a.isAdded&&this.isMarkerInBounds(a,r)&&(!this.ignoreHidden||this.ignoreHidden&&a.getVisible())&&this.addToClosestCluster(a)}if(i<this.markers.length)this.timerRefStatic=window.setTimeout((function(){e.createClusters(i)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(o=0;o<this.clusters.length;o++)this.clusters[o].updateIcon()}}},t.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},t}(),zk={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Bk={averageCenter:function(t,e){t.setAverageCenter(e)},batchSizeIE:function(t,e){t.setBatchSizeIE(e)},calculator:function(t,e){t.setCalculator(e)},clusterClass:function(t,e){t.setClusterClass(e)},enableRetinaIcons:function(t,e){t.setEnableRetinaIcons(e)},gridSize:function(t,e){t.setGridSize(e)},ignoreHidden:function(t,e){t.setIgnoreHidden(e)},imageExtension:function(t,e){t.setImageExtension(e)},imagePath:function(t,e){t.setImagePath(e)},imageSizes:function(t,e){t.setImageSizes(e)},maxZoom:function(t,e){t.setMaxZoom(e)},minimumClusterSize:function(t,e){t.setMinimumClusterSize(e)},styles:function(t,e){t.setStyles(e)},title:function(t,e){t.setTitle(e)},zoomOnClick:function(t,e){t.setZoomOnClick(e)}},Uk=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={markerClusterer:null},t.setClustererCallback=function(){null!==t.state.markerClusterer&&t.props.onLoad&&t.props.onLoad(t.state.markerClusterer)},t}return l.default(n,[{key:"componentDidMount",value:function(){if(this.context){var t=new jk(this.context,[],this.props.options);this.registeredEvents=nk({updaterMap:Bk,eventMap:zk,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{markerClusterer:t}}),this.setClustererCallback)}}},{key:"componentDidUpdate",value:function(t){this.state.markerClusterer&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:Bk,eventMap:zk,prevProps:t,nextProps:this.props,instance:this.state.markerClusterer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ek(this.registeredEvents),this.state.markerClusterer.setMap(null))}},{key:"render",value:function(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}]),n}(Mv.PureComponent);Uk.contextType=KP;var Vk=function(){function t(e){void 0===e&&(e={}),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===e.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),void 0===e.visible&&(void 0===e.isHidden?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var t=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},e=this;if(!this.div){if(this.div=document.createElement("div"),this.setBoxStyle(),"string"==typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content)),this.getPanes()[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var n=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-n.left-n.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],i=0;i<r.length;i++)this.eventListeners.push(google.maps.event.addDomListener(this.div,r[i],t));this.eventListeners.push(google.maps.event.addDomListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addDomListener(this.div,"contextmenu",(function(n){n.returnValue=!1,n.preventDefault&&n.preventDefault(),e.enableEventPropagation||t(n)})),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var t="";return""!==this.closeBoxURL&&(t='<img alt=""',t+=' aria-hidden="true"',t+=" src='"+this.closeBoxURL+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin+";",t+="'>"),t},t.prototype.addClickHandler=function(){if(this.div&&this.div.firstChild&&""!==this.closeBoxURL){var t=this.div.firstChild;this.closeListener=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler())}else this.closeListener=null},t.prototype.getCloseClickHandler=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},t.prototype.panBox=function(t){if(this.div&&!t){var e=this.getMap();if(e instanceof google.maps.Map){var n=0,r=0,i=e.getBounds();i&&!i.contains(this.position)&&e.setCenter(this.position);var o=e.getDiv(),a=o.offsetWidth,s=o.offsetHeight,u=this.pixelOffset.width,l=this.pixelOffset.height,c=this.div.offsetWidth,f=this.div.offsetHeight,p=this.infoBoxClearance.width,h=this.infoBoxClearance.height,d=this.getProjection().fromLatLngToContainerPixel(this.position);null!==d&&(d.x<-u+p?n=d.x+u-p:d.x+c+u+p>a&&(n=d.x+c+u+p-a),this.alignBottom?d.y<-l+h+f?r=d.y+l-h-f:d.y+l+h>s&&(r=d.y+l+h-s):d.y<-l+h?r=d.y+l-h:d.y+f+l+h>s&&(r=d.y+f+l+h-s)),0===n&&0===r||e.panBy(n,r)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var t=this.boxStyle;for(var e in t)t.hasOwnProperty(e)&&(this.div.style[e]=t[e]);if(this.div.style.webkitTransform="translateZ(0)",void 0!==this.div.style.opacity&&""!==this.div.style.opacity){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*n+')"',this.div.style.filter="alpha(opacity="+100*n+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var t={top:0,bottom:0,left:0,right:0};if(!this.div)return t;if(document.defaultView&&document.defaultView.getComputedStyle){var e=this.div.ownerDocument,n=e&&e.defaultView?e.defaultView.getComputedStyle(this.div,""):null;n&&(t.top=parseInt(n.borderTopWidth||"",10)||0,t.bottom=parseInt(n.borderBottomWidth||"",10)||0,t.left=parseInt(n.borderLeftWidth||"",10)||0,t.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(t.top=parseInt(r.borderTopWidth||"",10)||0,t.bottom=parseInt(r.borderBottomWidth||"",10)||0,t.left=parseInt(r.borderLeftWidth||"",10)||0,t.right=parseInt(r.borderRightWidth||"",10)||0)}return t},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var t=this.getProjection().fromLatLngToDivPixel(this.position);null!==t&&(this.div.style.left=t.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(t.y+this.pixelOffset.height)+"px":this.div.style.top=t.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(t){void 0===t&&(t={}),void 0!==t.boxClass&&(this.boxClass=t.boxClass,this.setBoxStyle()),void 0!==t.boxStyle&&(this.boxStyle=t.boxStyle,this.setBoxStyle()),void 0!==t.content&&this.setContent(t.content),void 0!==t.disableAutoPan&&(this.disableAutoPan=t.disableAutoPan),void 0!==t.maxWidth&&(this.maxWidth=t.maxWidth),void 0!==t.pixelOffset&&(this.pixelOffset=t.pixelOffset),void 0!==t.alignBottom&&(this.alignBottom=t.alignBottom),void 0!==t.position&&this.setPosition(t.position),void 0!==t.zIndex&&this.setZIndex(t.zIndex),void 0!==t.closeBoxMargin&&(this.closeBoxMargin=t.closeBoxMargin),void 0!==t.closeBoxURL&&(this.closeBoxURL=t.closeBoxURL),void 0!==t.infoBoxClearance&&(this.infoBoxClearance=t.infoBoxClearance),void 0!==t.isHidden&&(this.isHidden=t.isHidden),void 0!==t.visible&&(this.isHidden=!t.visible),void 0!==t.enableEventPropagation&&(this.enableEventPropagation=t.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(t){this.content=t,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"==typeof t?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"==typeof t?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(t){this.position=t,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(t){this.isHidden=!t,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(t){this.zIndex=t,this.div&&(this.div.style.zIndex=t+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var t=this.getMap();return null!=t&&!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(t,e){var n=this;e&&(this.position=e.getPosition(),this.moveListener=google.maps.event.addListener(e,"position_changed",(function(){var t=e.getPosition();n.setPosition(t)})),this.mapListener=google.maps.event.addListener(e,"map_changed",(function(){n.setMap(e.map)}))),this.setMap(t),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var t=0;t<this.eventListeners.length;t++)google.maps.event.removeListener(this.eventListeners[t]);this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype.hasOwnProperty(e)||(this.prototype[e]=t.prototype[e]);return this}.apply(t,[e])},t}(),Gk={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},qk={options:function(t,e){t.setOptions(e)},position:function(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible:function(t,e){t.setVisible(e)},zIndex:function(t,e){t.setZIndex(e)}},Wk=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.containerElement=null,t.state={infoBox:null},t.open=function(e,n){n?e.open(t.context,n):e.getPosition()?e.open(t.context):QP(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},t.setInfoBoxCallback=function(){var e=t.props,n=e.anchor,r=e.onLoad,i=t.state.infoBox;null!==i&&null!==t.containerElement&&(i.setContent(t.containerElement),t.open(i,n),r&&r(i))},t}return l.default(n,[{key:"componentDidMount",value:function(){var t,e=this.props.options||{},n=e.position,r=ak(e,["position"]);!n||n instanceof google.maps.LatLng||(t=new google.maps.LatLng(n.lat,n.lng));var i=new Vk(Object.assign(Object.assign({},r),t?{position:t}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=nk({updaterMap:qk,eventMap:Gk,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)}},{key:"componentDidUpdate",value:function(t){var e=this.state.infoBox;null!==e&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:qk,eventMap:Gk,prevProps:t,nextProps:this.props,instance:e}))}},{key:"componentWillUnmount",value:function(){var t=this.props.onUnmount,e=this.state.infoBox;null!==e&&(t&&t(e),ek(this.registeredEvents),e.close())}},{key:"render",value:function(){return this.containerElement?Ov.createPortal(Mv.Children.only(this.props.children),this.containerElement):null}}]),n}(Mv.PureComponent);Wk.contextType=KP;var Hk,Xk,Zk={exports:{}},Yk={exports:{}};
/**
 * DBSCAN - Density based clustering
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */
Hk=Yk,(Xk=function(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}).prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},Xk.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+(void 0===t?"undefined":vt.default(t))+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},Xk.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},Xk.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},Xk.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},Xk.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},Xk.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},Hk.exports&&(Hk.exports=Xk);var Qk={exports:{}};!function(t){var e=
/**
 * KMEANS clustering
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */
function(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)};e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,u=0;u<c;u++)a[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)a[u]+=this.dataset[l][u];s++}}if(s>0){for(u=0;u<c;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}(Qk);var Kk={exports:{}},Jk={exports:{}};
/**
 * PriorityQueue
 * Elements in this queue are sorted according to their value
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */
!function(t){var e=function(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)};e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}(Jk),function(t){var e=
/**
 * OPTICS - Ordering points to identify the clustering structure
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */
function(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)};if(t.exports)var n=Jk.exports;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(s,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+(void 0===t?"undefined":vt.default(t))+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}(Kk),function(t){t.exports&&(t.exports={DBSCAN:Yk.exports,KMEANS:Qk.exports,OPTICS:Kk.exports,PriorityQueue:Jk.exports})}(Zk);var $k={exports:{}};!function(t,e){t.exports=function(){var t=function(t,n,r,i){e(t,r,i),e(n,2*r,2*i),e(n,2*r+1,2*i+1)},e=function(t,e,n){var r=t[e];t[e]=t[n],t[n]=r},n=function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var f=l.pop(),p=l.pop(),h=l.pop();if(p-h<=a)for(var d=h;d<=p;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var g=Math.floor((h+p)/2);s=e[2*g],u=e[2*g+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[g]);var y=(f+1)%2;(0===f?n<=s:r<=u)&&(l.push(h),l.push(g-1),l.push(y)),(0===f?i>=s:o>=u)&&(l.push(g+1),l.push(p),l.push(y))}}return c},r=function(t,e,n,r,o,a){for(var s=[0,t.length-1,0],u=[],l=o*o;s.length;){var c=s.pop(),f=s.pop(),p=s.pop();if(f-p<=a)for(var h=p;h<=f;h++)i(e[2*h],e[2*h+1],n,r)<=l&&u.push(t[h]);else{var d=Math.floor((p+f)/2),g=e[2*d],y=e[2*d+1];i(g,y,n,r)<=l&&u.push(t[d]);var A=(c+1)%2;(0===c?n-o<=g:r-o<=y)&&(s.push(p),s.push(d-1),s.push(A)),(0===c?n+o>=g:r+o>=y)&&(s.push(d+1),s.push(f),s.push(A))}}return u},i=function(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o},o=function(t,e,n,r,i){return{x:w(t),y:w(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}},a=function(t,e){var n=t.geometry.coordinates,r=n[0],i=n[1];return{x:w(l(r)),y:w(c(i)),zoom:1/0,index:e,parentId:-1}},s=function(t){return{type:"Feature",id:t.id,properties:u(t),geometry:{type:"Point",coordinates:[f(t.x),p(t.y)]}}},u=function(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return h(h({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})},l=function(t){return t/360+.5},c=function(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n},f=function(t){return 360*(t-.5)},p=function(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90},h=function(t,e){for(var n in e)t[n]=e[n];return t},d=function(t){return t.x},g=function(t){return t.y};function y(t,e,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;A(t,e,a,r,i,o%2),y(t,e,n,r,a-1,o+1),y(t,e,n,a+1,i,o+1)}}function A(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);A(e,n,r,Math.max(i,Math.floor(r-u*c/s+f)),Math.min(o,Math.floor(r+(s-u)*c/s+f)),a)}var p=n[2*r+a],h=i,d=o;for(t(e,n,i,r),n[2*o+a]>p&&t(e,n,i,o);h<d;){for(t(e,n,h,d),h++,d--;n[2*h+a]<p;)h++;for(;n[2*d+a]>p;)d--}n[2*i+a]===p?t(e,n,i,d):(d++,t(e,n,d,o)),d<=r&&(i=d+1),r<=d&&(o=d-1)}}var v=function(t){return t[0]},m=function(t){return t[1]},_=function(t,e,n,r,i){void 0===e&&(e=v),void 0===n&&(n=m),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);y(a,s,r,0,a.length-1,0)};_.prototype.range=function(t,e,r,i){return n(this.ids,this.coords,t,e,r,i,this.nodeSize)},_.prototype.within=function(t,e,n){return r(this.ids,this.coords,t,e,n,this.nodeSize)};var b,x={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},w=Math.fround||(b=new Float32Array(1),function(t){return b[0]=+t,b[0]}),E=function(t){this.options=h(Object.create(x),t),this.trees=new Array(this.options.maxZoom+1)};return E.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var s="prepare "+t.length+" points";n&&console.time(s),this.points=t;for(var u=[],l=0;l<t.length;l++)t[l].geometry&&u.push(a(t[l],l));this.trees[i+1]=new _(u,d,g,o,Float32Array),n&&console.timeEnd(s);for(var c=i;c>=r;c--){var f=+Date.now();u=this._cluster(u,c),this.trees[c]=new _(u,d,g,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,u.length,+Date.now()-f)}return n&&console.timeEnd("total time"),this},E.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),u=this.getClusters([-180,r,i,o],e);return a.concat(u)}for(var f=this.trees[this._limitZoom(e)],p=[],h=0,d=f.range(l(n),c(o),l(i),c(r));h<d.length;h+=1){var g=d[h],y=f.points[g];p.push(y.numPoints?s(y):this.points[y.index])}return p},E.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),u=[],l=0,c=i.within(o.x,o.y,a);l<c.length;l+=1){var f=c[l],p=i.points[f];p.parentId===t&&u.push(p.numPoints?s(p):this.points[p.index])}if(0===u.length)throw new Error(r);return u},E.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},E.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius/a,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((e-s)/i,u,(e+1+s)/i,l),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null},E.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},E.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}return i},E.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var f=e[s[a]],p=f.numPoints,h=void 0,d=void 0,g=void 0;if(p)h=u(f),d=f.x,g=f.y;else{var y=this.points[f.index];h=y.properties,d=l(y.geometry.coordinates[0]),g=c(y.geometry.coordinates[1])}var A={type:1,geometry:[[Math.round(this.options.extent*(d*i-n)),Math.round(this.options.extent*(g*i-r))]],tags:h},v=void 0;p?v=f.id:this.options.generateId?v=f.index:this.points[f.index].id&&(v=this.points[f.index].id),void 0!==v&&(A.id=v),o.features.push(A)}},E.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},E.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.radius,a=r.extent,s=r.reduce,u=r.minPoints,l=i/(a*Math.pow(2,e)),c=0;c<t.length;c++){var f=t[c];if(!(f.zoom<=e)){f.zoom=e;for(var p=this.trees[e+1],h=p.within(f.x,f.y,l),d=f.numPoints||1,g=d,y=0,A=h;y<A.length;y+=1){var v=A[y],m=p.points[v];m.zoom>e&&(g+=m.numPoints||1)}if(g>d&&g>=u){for(var _=f.x*d,b=f.y*d,x=s&&d>1?this._map(f,!0):null,w=(c<<5)+(e+1)+this.points.length,E=0,S=h;E<S.length;E+=1){var P=S[E],k=p.points[P];if(!(k.zoom<=e)){k.zoom=e;var C=k.numPoints||1;_+=k.x*C,b+=k.y*C,k.parentId=w,s&&(x||(x=this._map(f,!0)),s(x,this._map(k)))}}f.parentId=w,n.push(o(_/g,b/g,w,g,x))}else if(n.push(f),g>1)for(var T=0,I=h;T<I.length;T+=1){var M=I[T],O=p.points[M];O.zoom<=e||(O.zoom=e,n.push(O))}}}return n},E.prototype._getOriginId=function(t){return t-this.points.length>>5},E.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},E.prototype._map=function(t,e){if(t.numPoints)return e?h({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?h({},r):r},E}()}($k);var tC,eC;(eC=tC||(tC={})).CLUSTERING_BEGIN="clusteringbegin",eC.CLUSTERING_END="clusteringend",eC.CLUSTER_CLICK="click";var nC={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},rC={options:function(t,e){t.setOptions(e)},position:function(t,e){t.setPosition(e)},zIndex:function(t,e){t.setZIndex(e)}},iC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.containerElement=null,t.state={infoWindow:null},t.open=function(e,n){n?e.open(t.context,n):e.getPosition()?e.open(t.context):QP(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},t.setInfoWindowCallback=function(){null!==t.state.infoWindow&&null!==t.containerElement&&(t.state.infoWindow.setContent(t.containerElement),t.open(t.state.infoWindow,t.props.anchor),t.props.onLoad&&t.props.onLoad(t.state.infoWindow))},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.InfoWindow(Object.assign({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=nk({updaterMap:rC,eventMap:nC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{infoWindow:t}}),this.setInfoWindowCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.infoWindow&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:rC,eventMap:nC,prevProps:t,nextProps:this.props,instance:this.state.infoWindow}))}},{key:"componentWillUnmount",value:function(){null!==this.state.infoWindow&&(ek(this.registeredEvents),this.state.infoWindow.close())}},{key:"render",value:function(){return this.containerElement?Ov.createPortal(Mv.Children.only(this.props.children),this.containerElement):Mv.createElement(Mv.Fragment,null)}}]),n}(Mv.PureComponent);iC.contextType=KP;var oC={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},aC={draggable:function(t,e){t.setDraggable(e)},editable:function(t,e){t.setEditable(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},path:function(t,e){t.setPath(e)},visible:function(t,e){t.setVisible(e)}},sC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={polyline:null},t.setPolylineCallback=function(){null!==t.state.polyline&&t.props.onLoad&&t.props.onLoad(t.state.polyline)},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.Polyline(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=nk({updaterMap:aC,eventMap:oC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{polyline:t}}),this.setPolylineCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.polyline&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:aC,eventMap:oC,prevProps:t,nextProps:this.props,instance:this.state.polyline}))}},{key:"componentWillUnmount",value:function(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ek(this.registeredEvents),this.state.polyline.setMap(null))}},{key:"render",value:function(){return Mv.createElement(Mv.Fragment,null)}}]),n}(Mv.PureComponent);sC.contextType=KP;var uC={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},lC={draggable:function(t,e){t.setDraggable(e)},editable:function(t,e){t.setEditable(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},path:function(t,e){t.setPath(e)},paths:function(t,e){t.setPaths(e)},visible:function(t,e){t.setVisible(e)}},cC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={polygon:null},t.setPolygonCallback=function(){null!==t.state.polygon&&t.props.onLoad&&t.props.onLoad(t.state.polygon)},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.Polygon(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=nk({updaterMap:lC,eventMap:uC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{polygon:t}}),this.setPolygonCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.polygon&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:lC,eventMap:uC,prevProps:t,nextProps:this.props,instance:this.state.polygon}))}},{key:"componentWillUnmount",value:function(){null!==this.state.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),ek(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);cC.contextType=KP;var fC={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},pC={bounds:function(t,e){t.setBounds(e)},draggable:function(t,e){t.setDraggable(e)},editable:function(t,e){t.setEditable(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},visible:function(t,e){t.setVisible(e)}},hC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={rectangle:null},t.setRectangleCallback=function(){null!==t.state.rectangle&&t.props.onLoad&&t.props.onLoad(t.state.rectangle)},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.Rectangle(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=nk({updaterMap:pC,eventMap:fC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{rectangle:t}}),this.setRectangleCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.rectangle&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:pC,eventMap:fC,prevProps:t,nextProps:this.props,instance:this.state.rectangle}))}},{key:"componentWillUnmount",value:function(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ek(this.registeredEvents),this.state.rectangle.setMap(null))}},{key:"render",value:function(){return Mv.createElement(Mv.Fragment,null)}}]),n}(Mv.PureComponent);hC.contextType=KP;var dC={onCenterChanged:"center_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRadiusChanged:"radius_changed",onRightClick:"rightclick"},gC={center:function(t,e){t.setCenter(e)},draggable:function(t,e){t.setDraggable(e)},editable:function(t,e){t.setEditable(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},radius:function(t,e){t.setRadius(e)},visible:function(t,e){t.setVisible(e)}},yC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={circle:null},t.setCircleCallback=function(){null!==t.state.circle&&t.props.onLoad&&t.props.onLoad(t.state.circle)},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.Circle(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=nk({updaterMap:gC,eventMap:dC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{circle:t}}),this.setCircleCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.circle&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:gC,eventMap:dC,prevProps:t,nextProps:this.props,instance:this.state.circle}))}},{key:"componentWillUnmount",value:function(){null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),ek(this.registeredEvents),this.state.circle&&this.state.circle.setMap(null))}},{key:"render",value:function(){return Mv.createElement(Mv.Fragment,null)}}]),n}(Mv.PureComponent);yC.contextType=KP;var AC={onAddFeature:"addfeature",onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onRightClick:"rightclick",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},vC={add:function(t,e){t.add(e)},addgeojson:function(t,e,n){t.addGeoJson(e,n)},contains:function(t,e){t.contains(e)},foreach:function(t,e){t.forEach(e)},loadgeojson:function(t,e,n,r){t.loadGeoJson(e,n,r)},overridestyle:function(t,e,n){t.overrideStyle(e,n)},remove:function(t,e){t.remove(e)},revertstyle:function(t,e){t.revertStyle(e)},controlposition:function(t,e){t.setControlPosition(e)},controls:function(t,e){t.setControls(e)},drawingmode:function(t,e){t.setDrawingMode(e)},map:function(t,e){t.setMap(e)},style:function(t,e){t.setStyle(e)},togeojson:function(t,e){t.toGeoJson(e)}},mC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={data:null},t.setDataCallback=function(){null!==t.state.data&&t.props.onLoad&&t.props.onLoad(t.state.data)},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.Data(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=nk({updaterMap:vC,eventMap:AC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{data:t}}),this.setDataCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.data&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:vC,eventMap:AC,prevProps:t,nextProps:this.props,instance:this.state.data}))}},{key:"componentWillUnmount",value:function(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ek(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);mC.contextType=KP;var _C={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},bC={options:function(t,e){t.setOptions(e)},url:function(t,e){t.setUrl(e)},zIndex:function(t,e){t.setZIndex(e)}},xC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={kmlLayer:null},t.setKmlLayerCallback=function(){null!==t.state.kmlLayer&&t.props.onLoad&&t.props.onLoad(t.state.kmlLayer)},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.KmlLayer(Object.assign(Object.assign({},this.props.options),{map:this.context}));this.registeredEvents=nk({updaterMap:bC,eventMap:_C,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{kmlLayer:t}}),this.setKmlLayerCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.kmlLayer&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:bC,eventMap:_C,prevProps:t,nextProps:this.props,instance:this.state.kmlLayer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ek(this.registeredEvents),this.state.kmlLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);xC.contextType=KP;var wC=function(t,e){return new e(t.lat,t.lng)},EC=function(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))},SC=function(t,e,n){return t instanceof e?t:n(t,e)};function PC(t){return t?(t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng))+"":""}function kC(t){return t?(t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west)))+"":""}var CC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(t){var r;u.default(this,n),(r=e.call(this,t)).state={paneEl:null,containerStyle:{position:"absolute"}},r.updatePane=function(){var t=r.props.mapPaneName,e=r.overlayView.getPanes();QP(!!t,"OverlayView requires props.mapPaneName but got %s",t),e?r.setState({paneEl:e[t]}):r.setState({paneEl:null})},r.onAdd=function(){var t,e;r.updatePane(),null===(e=(t=r.props).onLoad)||void 0===e||e.call(t,r.overlayView)},r.onPositionElement=function(){var t,e,n,i,o=function(t,e,n,r){return void 0!==n?function(t,e,n){var r=t&&t.fromLatLngToDivPixel(n.getNorthEast()),i=t&&t.fromLatLngToDivPixel(n.getSouthWest());return r&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-i.x-e.x,"px"),height:"".concat(i.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}(t,e,SC(n,google.maps.LatLngBounds,EC)):function(t,e,n){var r=t&&t.fromLatLngToDivPixel(n);if(r){var i=r.x,o=r.y;return{left:"".concat(i+e.x,"px"),top:"".concat(o+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}(t,e,SC(r,google.maps.LatLng,wC))}(r.overlayView.getProjection(),Object.assign({x:0,y:0},r.containerRef.current?(t=r.containerRef.current,"function"==typeof(e=r.props.getPixelPositionOffset)?e(t.offsetWidth,t.offsetHeight):{}):{}),r.props.bounds,r.props.position),a=r.state.containerStyle,s=a.left,u=a.top,l=a.width,c=a.height;i={left:s,top:u,width:l,height:c},((n=o).left!==i.left||n.top!==i.top||n.width!==i.height||n.height!==i.height)&&r.setState({containerStyle:Object.assign(Object.assign({},o),{position:"absolute"})})},r.draw=function(){r.onPositionElement()},r.onRemove=function(){var t,e;r.setState((function(){return{paneEl:null}})),null===(e=(t=r.props).onUnmount)||void 0===e||e.call(t,r.overlayView)},r.containerRef=Mv.createRef();var i=new google.maps.OverlayView;return i.onAdd=r.onAdd,i.draw=r.draw,i.onRemove=r.onRemove,r.overlayView=i,r}return l.default(n,[{key:"componentDidMount",value:function(){this.overlayView.setMap(this.context)}},{key:"componentDidUpdate",value:function(t){var e=PC(t.position),n=PC(this.props.position),r=kC(t.bounds),i=kC(this.props.bounds);e===n&&r===i||this.overlayView.draw(),t.mapPaneName!==this.props.mapPaneName&&this.updatePane()}},{key:"componentWillUnmount",value:function(){this.overlayView.setMap(null)}},{key:"render",value:function(){var t=this.state.paneEl;return t?Ov.createPortal(Mv.createElement("div",{ref:this.containerRef,style:this.state.containerStyle},Mv.Children.only(this.props.children)),t):null}}]),n}(Mv.PureComponent);CC.FLOAT_PANE="floatPane",CC.MAP_PANE="mapPane",CC.MARKER_LAYER="markerLayer",CC.OVERLAY_LAYER="overlayLayer",CC.OVERLAY_MOUSE_TARGET="overlayMouseTarget",CC.contextType=KP;var TC={onDblClick:"dblclick",onClick:"click"},IC={opacity:function(t,e){t.setOpacity(e)}},MC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={groundOverlay:null},t.setGroundOverlayCallback=function(){null!==t.state.groundOverlay&&t.props.onLoad&&t.props.onLoad(t.state.groundOverlay)},t}return l.default(n,[{key:"componentDidMount",value:function(){QP(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var t=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Object.assign(Object.assign({},this.props.options),{map:this.context}));this.registeredEvents=nk({updaterMap:IC,eventMap:TC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{groundOverlay:t}}),this.setGroundOverlayCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.groundOverlay&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:IC,eventMap:TC,prevProps:t,nextProps:this.props,instance:this.state.groundOverlay}))}},{key:"componentWillUnmount",value:function(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);MC.defaultProps={onLoad:function(){}},MC.contextType=KP;var OC={},LC={data:function(t,e){t.setData(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)}},RC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={heatmapLayer:null},t.setHeatmapLayerCallback=function(){null!==t.state.heatmapLayer&&t.props.onLoad&&t.props.onLoad(t.state.heatmapLayer)},t}return l.default(n,[{key:"componentDidMount",value:function(){QP(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),QP(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var t=new google.maps.visualization.HeatmapLayer(Object.assign(Object.assign({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=nk({updaterMap:LC,eventMap:OC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{heatmapLayer:t}}),this.setHeatmapLayerCallback)}},{key:"componentDidUpdate",value:function(t){ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:LC,eventMap:OC,prevProps:t,nextProps:this.props,instance:this.state.heatmapLayer})}},{key:"componentWillUnmount",value:function(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ek(this.registeredEvents),this.state.heatmapLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);RC.contextType=KP;var DC={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},NC={register:function(t,e,n){t.registerPanoProvider(e,n)},links:function(t,e){t.setLinks(e)},motionTracking:function(t,e){t.setMotionTracking(e)},options:function(t,e){t.setOptions(e)},pano:function(t,e){t.setPano(e)},position:function(t,e){t.setPosition(e)},pov:function(t,e){t.setPov(e)},visible:function(t,e){t.setVisible(e)},zoom:function(t,e){t.setZoom(e)}},FC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={streetViewPanorama:null},t.setStreetViewPanoramaCallback=function(){null!==t.state.streetViewPanorama&&t.props.onLoad&&t.props.onLoad(t.state.streetViewPanorama)},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=this.context.getStreetView();this.registeredEvents=nk({updaterMap:NC,eventMap:DC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{streetViewPanorama:t}}),this.setStreetViewPanoramaCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.streetViewPanorama&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:NC,eventMap:DC,prevProps:t,nextProps:this.props,instance:this.state.streetViewPanorama}))}},{key:"componentWillUnmount",value:function(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ek(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);FC.contextType=KP;var jC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).state={streetViewService:null},t.setStreetViewServiceCallback=function(){null!==t.state.streetViewService&&t.props.onLoad&&t.props.onLoad(t.state.streetViewService)},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:t}}),this.setStreetViewServiceCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}},{key:"render",value:function(){return null}}]),n}(Mv.PureComponent);jC.contextType=KP;Mv.PureComponent;var zC={onDirectionsChanged:"directions_changed"},BC={directions:function(t,e){t.setDirections(e)},map:function(t,e){t.setMap(e)},options:function(t,e){t.setOptions(e)},panel:function(t,e){t.setPanel(e)},routeIndex:function(t,e){t.setRouteIndex(e)}},UC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.state={directionsRenderer:null},t.setDirectionsRendererCallback=function(){null!==t.state.directionsRenderer&&(t.state.directionsRenderer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.directionsRenderer))},t}return l.default(n,[{key:"componentDidMount",value:function(){var t=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=nk({updaterMap:BC,eventMap:zC,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{directionsRenderer:t}}),this.setDirectionsRendererCallback)}},{key:"componentDidUpdate",value:function(t){null!==this.state.directionsRenderer&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:BC,eventMap:zC,prevProps:t,nextProps:this.props,instance:this.state.directionsRenderer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ek(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}},{key:"render",value:function(){return Mv.createElement(Mv.Fragment,null)}}]),n}(Mv.PureComponent);UC.contextType=KP;Mv.PureComponent;var VC={onPlacesChanged:"places_changed"},GC={bounds:function(t,e){t.setBounds(e)}},qC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.containerElement=Mv.createRef(),t.state={searchBox:null},t.setSearchBoxCallback=function(){null!==t.state.searchBox&&t.props.onLoad&&t.props.onLoad(t.state.searchBox)},t}return l.default(n,[{key:"componentDidMount",value:function(){if(QP(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var t=this.containerElement.current.querySelector("input");if(null!==t){var e=new google.maps.places.SearchBox(t,this.props.options);this.registeredEvents=nk({updaterMap:GC,eventMap:VC,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{searchBox:e}}),this.setSearchBoxCallback)}}}},{key:"componentDidUpdate",value:function(t){null!==this.state.searchBox&&(ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:GC,eventMap:VC,prevProps:t,nextProps:this.props,instance:this.state.searchBox}))}},{key:"componentWillUnmount",value:function(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ek(this.registeredEvents))}},{key:"render",value:function(){return Mv.createElement("div",{ref:this.containerElement},Mv.Children.only(this.props.children))}}]),n}(Mv.PureComponent);qC.contextType=KP;var WC={onPlaceChanged:"place_changed"},HC={bounds:function(t,e){t.setBounds(e)},restrictions:function(t,e){t.setComponentRestrictions(e)},fields:function(t,e){t.setFields(e)},options:function(t,e){t.setOptions(e)},types:function(t,e){t.setTypes(e)}},XC=function(t){"use strict";pt.default(n,t);var e=ht.default(n);function n(){var t;return u.default(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).registeredEvents=[],t.containerElement=Mv.createRef(),t.state={autocomplete:null},t.setAutocompleteCallback=function(){null!==t.state.autocomplete&&t.props.onLoad&&t.props.onLoad(t.state.autocomplete)},t}return l.default(n,[{key:"componentDidMount",value:function(){QP(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=this.containerElement.current.querySelector("input");if(t){var e=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=nk({updaterMap:HC,eventMap:WC,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{autocomplete:e}}),this.setAutocompleteCallback)}}},{key:"componentDidUpdate",value:function(t){ek(this.registeredEvents),this.registeredEvents=nk({updaterMap:HC,eventMap:WC,prevProps:t,nextProps:this.props,instance:this.state.autocomplete})}},{key:"componentWillUnmount",value:function(){null!==this.state.autocomplete&&ek(this.registeredEvents)}},{key:"render",value:function(){return Mv.createElement("div",{ref:this.containerElement,className:this.props.className||""},Mv.Children.only(this.props.children))}}]),n}(Mv.PureComponent);XC.contextType=KP;var ZC;ZC=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[77.21970319747925,28.632897467894534]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[77.21860885620117,28.633443640005158],[77.2184157371521,28.633010469254096],[77.21845865249632,28.632614963963334],[77.21867322921753,28.63220062348861],[77.21903800964355,28.63184278267126],[77.21968173980713,28.631729780054386],[77.22051858901978,28.63193695142568],[77.22090482711792,28.632407793930444],[77.22094774246216,28.633161137544214],[77.22056150436401,28.633688474856154],[77.2199821472168,28.633914475750096],[77.2191023826599,28.63387680896824],[77.21860885620117,28.633443640005158]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[77.216956615448,28.634196976183045],[77.21642017364502,28.633349472602678],[77.21642017364502,28.632727965627083],[77.21661329269409,28.631805115145813],[77.21710681915283,28.631070595697672],[77.21798658370972,28.630298403042698],[77.21993923187256,28.629940555739534],[77.22148418426514,28.63039257318282],[77.22238540649413,28.63118359902429],[77.22296476364136,28.63255846308582],[77.2225570678711,28.634196976183045],[77.22146272659302,28.635232804597337],[77.21985340118408,28.635797797604614],[77.21811532974242,28.63538346969672],[77.216956615448,28.634196976183045]]]}}]}');var YC;YC=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[77.21418857574461,28.63306696988823],[77.21770763397217,28.63306696988823],[77.21770763397217,28.635289304034945],[77.21418857574461,28.635289304034945],[77.21418857574461,28.63306696988823]]]}}]}');var QC;QC=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[74.4378662109375,25.388697990350824],[74.4378662109375,24.44714958973082],[75.65185546874999,24.1617902576437],[76.26708984375,24.766784522874453],[75.9979248046875,25.35891851754525],[74.51751708984375,25.227304826281653],[74.85260009765625,25.0333500082522],[75.640869140625,25.100523057465217],[75.7891845703125,24.761796517185815],[75.6573486328125,24.37712083961039],[75.135498046875,24.402135566630744],[74.9542236328125,24.79670834894575],[75.08056640625,25.12539261151203],[74.90478515625,25.219850725454755],[74.4378662109375,25.388697990350824]]]}}]}');var KC={width:"100%",height:"100%"},JC={lat:28.632897467894534,lng:77.21970319747925},$C=["drawing"];window.google;function tT(){var t=function(t){var e=!this.editable;this.setEditable(e),this.setDraggable(e)},e=function(){this.setMap(null)},n=function(t){var e=this.getStyle(),n=e.editable,r=e.draggable;this.setStyle({draggable:!r,editable:!n})},i=function(t){var e=t.id,n=void 0===e?yk.id:e,r=t.version,i=void 0===r?yk.version:r,o=t.nonce,a=t.googleMapsApiKey,s=t.language,u=t.region,l=t.libraries,f=t.preventGoogleFontsLoading,p=t.mapIds,h=Mv.useRef(!1),d=c.default(Mv.useState(!1),2),g=d[0],y=d[1],A=c.default(Mv.useState(void 0),2),v=A[0],m=A[1];Mv.useEffect((function(){return h.current=!0,function(){h.current=!1}}),[]);var _=Mv.useMemo((function(){return new bk({id:n,apiKey:a,version:i,libraries:l,language:s,region:u,mapIds:p,nonce:o})}),[n,a,i,l,s,u,p,o]);Mv.useEffect((function(){g||_.load().then((function(){h.current&&y(!0)})).catch((function(t){m(t)}))}),[]),Mv.useEffect((function(){uk&&f&&fk()}),[f]);var b=Mv.useRef();return Mv.useEffect((function(){b.current&&l!==b.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),b.current=l}),[l]),{isLoaded:g,loadError:v}}({id:"google-map-script",googleMapsApiKey:"AIzaSyCgdU5UGTSfLApTSi8oJK8BlMsLdKUYXNI",libraries:$C}).isLoaded,o=c.default(r(Mv).useState(null),2),a=(o[0],o[1]),s=c.default(r(Mv).useState([]),2),u=(s[0],s[1],Mv.useRef()),l=Mv.useRef(),f=Mv.useRef(),p=r(Mv).useCallback((function(t){a(t),u.current=new window.google.maps.Data({map:t}),l.current=new window.google.maps.Data({map:t}),f.current=new window.google.maps.Data({map:t}),u.current.addGeoJson(r(ZC)),l.current.addGeoJson(r(YC)),f.current.addGeoJson(r(QC)),u.current.setStyle({draggable:!1,editable:!1}),l.current.setStyle({draggable:!1,editable:!1}),f.current.setStyle({draggable:!1,editable:!1}),u.current.addListener("click",n),l.current.addListener("click",n),u.current.addListener("dblclick",e),l.current.addListener("dblclick",e)}),[]),h=r(Mv).useCallback((function(t){a(null)}),[]);return i?Iv.jsxs(ok,{mapContainerStyle:KC,center:JC,zoom:16,onLoad:p,onUnmount:h,options:{disableDoubleClickZoom:!0},children:[Iv.jsx(Iv.Fragment,{}),Iv.jsx(Tk,{drawingMode:"",onLoad:function(t){console.log(t)},onPolygonComplete:function(n){n.setEditable(!1),n.addListener("click",t),n.addListener("dblclick",e)},options:{drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:[window.google.maps.drawing.OverlayType.POLYGON]},polygonOptions:{fillColor:"#000",fillOpacity:.5,strokeWeight:2,editable:!1,draggable:!1,zIndex:1},markerOptions:{icon:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png"}}})]}):Iv.jsx(Iv.Fragment,{})}var eT=r(Mv).memo(tT),nT=function(t){if(1===t.length)return t[0];var e=0,n=0,r=0,i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=l[1]*Math.PI/180,f=l[0]*Math.PI/180;e+=Math.cos(c)*Math.cos(f),n+=Math.cos(c)*Math.sin(f),r+=Math.sin(c)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var p=t.length;e/=p,n/=p,r/=p;var h=Math.atan2(n,e),d=Math.sqrt(e*e+n*n);return{latitude:180*Math.atan2(r,d)/Math.PI,longitude:180*h/Math.PI}};ew.ViewMode,ew.DrawPolygonMode,ew.ModifyMode;var rT=function(t){var e=c.default(Mv.useState({type:"FeatureCollection",features:[]}),2),n=(e[0],e[1]),i=c.default(Mv.useState(!0),2),o=(i[0],i[1]),a=c.default(Mv.useState({latitude:0,longitude:0}),2),s=(a[0],a[1]),u=c.default(Mv.useState({id:null,handler:null}),2);return u[0],u[1],Mv.useEffect((function(){o(!0);var t=function(){var t=Yn.default(r(Qn).mark((function t(){var e,i,a,u,l,c;return r(Qn).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ol("#{Rails.root}/data/polygons_final.kml",am);case 2:e=t.sent,n(e),i=e.features.flatMap((function(t){return t.geometry.coordinates})),a=i.flat(1),u=nT(a),l=u.latitude,c=u.longitude,s((function(t){return yt.default({},t,{latitude:l,longitude:c})})),o(!1);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),Iv.jsxs("div",{className:"App",style:{height:"100vh"},children:[Iv.jsxs("div",{style:{position:"absolute",top:0,left:0,zIndex:10,backgroundColor:"#fff",padding:"10px"},children:["Message from HTML - ",t.message," ",console.log(t.message)]}),Iv.jsx(eT,{})]})},iT=function(t){t&&t instanceof Function&&a("dToYb").then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),r(t),i(t),o(t),a(t)}))},oT=document.getElementById("maps-widget");r(Ov).render(Iv.jsx(r(Mv).StrictMode,{children:Iv.jsx(rT,{message:oT.dataset.message})}),oT),iT()}();
//# sourceMappingURL=index.js.map
